!function(l){function I(I){for(var g,C,n=I[0],A=I[1],t=0,e=[];t<n.length;t++)C=n[t],Object.prototype.hasOwnProperty.call(c,C)&&c[C]&&e.push(c[C][0]),c[C]=0;for(g in A)Object.prototype.hasOwnProperty.call(A,g)&&(l[g]=A[g]);for(i&&i(I);e.length;)e.shift()()}var C={},c={build:0};function A(I){var g;return(C[I]||(g=C[I]={i:I,l:!1,exports:{}},l[I].call(g.exports,g,g.exports,A),g.l=!0,g)).exports}A.m=l,A.c=C,A.d=function(I,g,C){A.o(I,g)||Object.defineProperty(I,g,{enumerable:!0,get:C})},A.r=function(I){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},A.t=function(g,I){if(1&I&&(g=A(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var C=Object.create(null);if(A.r(C),Object.defineProperty(C,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var n in g)A.d(C,n,function(I){return g[I]}.bind(null,n));return C},A.n=function(I){var g=I&&I.__esModule?function(){return I.default}:function(){return I};return A.d(g,"a",g),g},A.o=function(I,g){return Object.prototype.hasOwnProperty.call(I,g)},A.p="",A.oe=function(I){throw console.error(I),I};var g=(n=window.webpackJsonp=window.webpackJsonp||[]).push.bind(n);n.push=I;for(var n=n.slice(),t=0;t<n.length;t++)I(n[t]);var i=g;A(A.s=0)}({"./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */function(module,exports){eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzP2YyOGMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFDQUFxQzs7QUFFckM7QUFDQTtBQUNBOztBQUVBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/process/browser.js\n")},"./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    "use strict";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== "function") {\n        callback = new Function("" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."\n        // So if we\'re currently running a task, we\'ll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // "too much recursion" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can\'t be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage("", "*");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = "setImmediate$" + Math.random() + "$";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === "string" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener("message", onGlobalMessage, false);\n        } else {\n            global.attachEvent("onmessage", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, "*");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it\'s been called.\n            var script = doc.createElement("script");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don\'t get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === "[object process]") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && "onreadystatechange" in doc.createElement("script")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcz82MDE3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixpQkFBaUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBDQUEwQyxzQkFBc0IsRUFBRTtBQUNsRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/setimmediate/setImmediate.js\n')},"./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||\n            (typeof self !== "undefined" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");\n// On some exotic environments, it\'s not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||\n                       (typeof global !== "undefined" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||\n                         (typeof global !== "undefined" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcz81MTE4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxtQkFBTyxDQUFDLGlFQUFjO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHNjb3BlID0gKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYpIHx8XG4gICAgICAgICAgICB3aW5kb3c7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWRpYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/timers-browserify/main.js\n')},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(module,exports){eval('var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function("return this")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === "object") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it\'s\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzP2NkMDAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0Q0FBNEM7O0FBRTVDIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n')},"./node_modules/whatwg-fetch/fetch.js":
/*!********************************************!*\
  !*** ./node_modules/whatwg-fetch/fetch.js ***!
  \********************************************/
/*! exports provided: Headers, Request, Response, DOMException, fetch */function(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Headers\", function() { return Headers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Request\", function() { return Request; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Response\", function() { return Response; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOMException\", function() { return DOMException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fetch\", function() { return fetch; });\n/* eslint-disable no-prototype-builtins */\nvar g =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  // eslint-disable-next-line no-undef\n  (typeof global !== 'undefined' && global) ||\n  {}\n\nvar support = {\n  searchParams: 'URLSearchParams' in g,\n  iterable: 'Symbol' in g && 'iterator' in Symbol,\n  blob:\n    'FileReader' in g &&\n    'Blob' in g &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in g,\n  arrayBuffer: 'ArrayBuffer' in g\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nfunction Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      if (header.length != 2) {\n        throw new TypeError('Headers constructor: expected name/value pair to be length 2, found' + header.length)\n      }\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body._noBody) return\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  var match = /charset=([A-Za-z0-9_-]+)/.exec(blob.type)\n  var encoding = match ? match[1] : 'utf-8'\n  reader.readAsText(blob, encoding)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    // eslint-disable-next-line no-self-assign\n    this.bodyUsed = this.bodyUsed\n    this._bodyInit = body\n    if (!body) {\n      this._noBody = true;\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n  }\n\n  this.arrayBuffer = function() {\n    if (this._bodyArrayBuffer) {\n      var isConsumed = consumed(this)\n      if (isConsumed) {\n        return isConsumed\n      } else if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n        return Promise.resolve(\n          this._bodyArrayBuffer.buffer.slice(\n            this._bodyArrayBuffer.byteOffset,\n            this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n          )\n        )\n      } else {\n        return Promise.resolve(this._bodyArrayBuffer)\n      }\n    } else if (support.blob) {\n      return this.blob().then(readBlobAsArrayBuffer)\n    } else {\n      throw new Error('could not read as ArrayBuffer')\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['CONNECT', 'DELETE', 'GET', 'HEAD', 'OPTIONS', 'PATCH', 'POST', 'PUT', 'TRACE']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nfunction Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal || (function () {\n    if ('AbortController' in g) {\n      var ctrl = new AbortController();\n      return ctrl.signal;\n    }\n  }());\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        try {\n          headers.append(key, value)\n        } catch (error) {\n          console.warn('Response ' + error.message)\n        }\n      }\n    })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nfunction Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  if (this.status < 200 || this.status > 599) {\n    throw new RangeError(\"Failed to construct 'Response': The status provided (0) is outside the range [200, 599].\")\n  }\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 200, statusText: ''})\n  response.ok = false\n  response.status = 0\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nvar DOMException = g.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nfunction fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      // This check if specifically for when a user fetches a file locally from the file system\n      // Only if the status is out of a normal range\n      if (request.url.indexOf('file://') === 0 && (xhr.status < 200 || xhr.status > 599)) {\n        options.status = 200;\n      } else {\n        options.status = xhr.status;\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      setTimeout(function() {\n        resolve(new Response(body, options))\n      }, 0)\n    }\n\n    xhr.onerror = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.ontimeout = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request timed out'))\n      }, 0)\n    }\n\n    xhr.onabort = function() {\n      setTimeout(function() {\n        reject(new DOMException('Aborted', 'AbortError'))\n      }, 0)\n    }\n\n    function fixUrl(url) {\n      try {\n        return url === '' && g.location.href ? g.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n\n    xhr.open(request.method, fixUrl(request.url), true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr) {\n      if (support.blob) {\n        xhr.responseType = 'blob'\n      } else if (\n        support.arrayBuffer\n      ) {\n        xhr.responseType = 'arraybuffer'\n      }\n    }\n\n    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers || (g.Headers && init.headers instanceof g.Headers))) {\n      var names = [];\n      Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n        names.push(normalizeName(name))\n        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))\n      })\n      request.headers.forEach(function(value, name) {\n        if (names.indexOf(name) === -1) {\n          xhr.setRequestHeader(name, value)\n        }\n      })\n    } else {\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n    }\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!g.fetch) {\n  g.fetch = fetch\n  g.Headers = Headers\n  g.Request = Request\n  g.Response = Response\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2hhdHdnLWZldGNoL2ZldGNoLmpzPzZkOTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsaUJBQWlCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JELE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUCw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTRCLHFCQUFxQjtBQUNqRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSxxQ0FBcUMsNEJBQTRCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLDBCQUEwQixlQUFlO0FBQ3RFOztBQUVPO0FBQ1A7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL3doYXR3Zy1mZXRjaC9mZXRjaC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvdHlwZS1idWlsdGlucyAqL1xudmFyIGcgPVxuICAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbFRoaXMpIHx8XG4gICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZikgfHxcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwpIHx8XG4gIHt9XG5cbnZhciBzdXBwb3J0ID0ge1xuICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIGcsXG4gIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBnICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICBibG9iOlxuICAgICdGaWxlUmVhZGVyJyBpbiBnICYmXG4gICAgJ0Jsb2InIGluIGcgJiZcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBuZXcgQmxvYigpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIGcsXG4gIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIGdcbn1cblxuZnVuY3Rpb24gaXNEYXRhVmlldyhvYmopIHtcbiAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG59XG5cbmlmIChzdXBwb3J0LmFycmF5QnVmZmVyKSB7XG4gIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICBdXG5cbiAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID1cbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcgfHxcbiAgICBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gIH1cbiAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXl9gfH4hXS9pLnRlc3QobmFtZSkgfHwgbmFtZSA9PT0gJycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZTogXCInICsgbmFtZSArICdcIicpXG4gIH1cbiAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKVxuICB9XG4gIHJldHVybiB2YWx1ZVxufVxuXG4vLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgdmFyIGl0ZXJhdG9yID0ge1xuICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlcmF0b3Jcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICB0aGlzLm1hcCA9IHt9XG5cbiAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcbiAgICB9LCB0aGlzKVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICBpZiAoaGVhZGVyLmxlbmd0aCAhPSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hlYWRlcnMgY29uc3RydWN0b3I6IGV4cGVjdGVkIG5hbWUvdmFsdWUgcGFpciB0byBiZSBsZW5ndGggMiwgZm91bmQnICsgaGVhZGVyLmxlbmd0aClcbiAgICAgIH1cbiAgICAgIHRoaXMuYXBwZW5kKGhlYWRlclswXSwgaGVhZGVyWzFdKVxuICAgIH0sIHRoaXMpXG4gIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICB9LCB0aGlzKVxuICB9XG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG4gIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdXG4gIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSArICcsICcgKyB2YWx1ZSA6IHZhbHVlXG59XG5cbkhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgcmV0dXJuIHRoaXMuaGFzKG5hbWUpID8gdGhpcy5tYXBbbmFtZV0gOiBudWxsXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG59XG5cbkhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICBmb3IgKHZhciBuYW1lIGluIHRoaXMubWFwKSB7XG4gICAgaWYgKHRoaXMubWFwLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKVxuICAgIH1cbiAgfVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpdGVtcyA9IFtdXG4gIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgIGl0ZW1zLnB1c2gobmFtZSlcbiAgfSlcbiAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGl0ZW1zID0gW11cbiAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaXRlbXMucHVzaCh2YWx1ZSlcbiAgfSlcbiAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxufVxuXG5IZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpdGVtcyA9IFtdXG4gIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgIGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSlcbiAgfSlcbiAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxufVxuXG5pZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllc1xufVxuXG5mdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gIGlmIChib2R5Ll9ub0JvZHkpIHJldHVyblxuICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgfVxuICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxufVxuXG5mdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG4gICAgfVxuICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgcmV0dXJuIHByb21pc2Vcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIHZhciBtYXRjaCA9IC9jaGFyc2V0PShbQS1aYS16MC05Xy1dKykvLmV4ZWMoYmxvYi50eXBlKVxuICB2YXIgZW5jb2RpbmcgPSBtYXRjaCA/IG1hdGNoWzFdIDogJ3V0Zi04J1xuICByZWFkZXIucmVhZEFzVGV4dChibG9iLCBlbmNvZGluZylcbiAgcmV0dXJuIHByb21pc2Vcbn1cblxuZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyQXNUZXh0KGJ1Zikge1xuICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZilcbiAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3W2ldKVxuICB9XG4gIHJldHVybiBjaGFycy5qb2luKCcnKVxufVxuXG5mdW5jdGlvbiBidWZmZXJDbG9uZShidWYpIHtcbiAgaWYgKGJ1Zi5zbGljZSkge1xuICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zi5ieXRlTGVuZ3RoKVxuICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpXG4gICAgcmV0dXJuIHZpZXcuYnVmZmVyXG4gIH1cbn1cblxuZnVuY3Rpb24gQm9keSgpIHtcbiAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgLypcbiAgICAgIGZldGNoLW1vY2sgd3JhcHMgdGhlIFJlc3BvbnNlIG9iamVjdCBpbiBhbiBFUzYgUHJveHkgdG9cbiAgICAgIHByb3ZpZGUgdXNlZnVsIHRlc3QgaGFybmVzcyBmZWF0dXJlcyBzdWNoIGFzIGZsdXNoLiBIb3dldmVyLCBvblxuICAgICAgRVM1IGJyb3dzZXJzIHdpdGhvdXQgZmV0Y2ggb3IgUHJveHkgc3VwcG9ydCBwb2xseWZpbGxzIG11c3QgYmUgdXNlZDtcbiAgICAgIHRoZSBwcm94eS1wb2xseWZpbGwgaXMgdW5hYmxlIHRvIHByb3h5IGFuIGF0dHJpYnV0ZSB1bmxlc3MgaXQgZXhpc3RzXG4gICAgICBvbiB0aGUgb2JqZWN0IGJlZm9yZSB0aGUgUHJveHkgaXMgY3JlYXRlZC4gVGhpcyBjaGFuZ2UgZW5zdXJlc1xuICAgICAgUmVzcG9uc2UuYm9keVVzZWQgZXhpc3RzIG9uIHRoZSBpbnN0YW5jZSwgd2hpbGUgbWFpbnRhaW5pbmcgdGhlXG4gICAgICBzZW1hbnRpYyBvZiBzZXR0aW5nIFJlcXVlc3QuYm9keVVzZWQgaW4gdGhlIGNvbnN0cnVjdG9yIGJlZm9yZVxuICAgICAgX2luaXRCb2R5IGlzIGNhbGxlZC5cbiAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWFzc2lnblxuICAgIHRoaXMuYm9keVVzZWQgPSB0aGlzLmJvZHlVc2VkXG4gICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG4gICAgaWYgKCFib2R5KSB7XG4gICAgICB0aGlzLl9ub0JvZHkgPSB0cnVlO1xuICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgc3VwcG9ydC5ibG9iICYmIGlzRGF0YVZpZXcoYm9keSkpIHtcbiAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkuYnVmZmVyKVxuICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gbmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pXG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIChBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSB8fCBpc0FycmF5QnVmZmVyVmlldyhib2R5KSkpIHtcbiAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChib2R5KVxuICAgIH1cblxuICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgIHZhciBpc0NvbnN1bWVkID0gY29uc3VtZWQodGhpcylcbiAgICAgIGlmIChpc0NvbnN1bWVkKSB7XG4gICAgICAgIHJldHVybiBpc0NvbnN1bWVkXG4gICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ1ZmZlci5zbGljZShcbiAgICAgICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlci5ieXRlT2Zmc2V0LFxuICAgICAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyLmJ5dGVPZmZzZXQgKyB0aGlzLl9ib2R5QXJyYXlCdWZmZXIuYnl0ZUxlbmd0aFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBhcyBBcnJheUJ1ZmZlcicpXG4gICAgfVxuICB9XG5cbiAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgIHJldHVybiByZWplY3RlZFxuICAgIH1cblxuICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgfVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgfVxuICB9XG5cbiAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxudmFyIG1ldGhvZHMgPSBbJ0NPTk5FQ1QnLCAnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUEFUQ0gnLCAnUE9TVCcsICdQVVQnLCAnVFJBQ0UnXVxuXG5mdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgcmV0dXJuIG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xID8gdXBjYXNlZCA6IG1ldGhvZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVxdWVzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQbGVhc2UgdXNlIHRoZSBcIm5ld1wiIG9wZXJhdG9yLCB0aGlzIERPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLicpXG4gIH1cblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuXG4gIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgfVxuICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG4gICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgIHRoaXMuc2lnbmFsID0gaW5wdXQuc2lnbmFsXG4gICAgaWYgKCFib2R5ICYmIGlucHV0Ll9ib2R5SW5pdCAhPSBudWxsKSB7XG4gICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG4gICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpXG4gIH1cblxuICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdzYW1lLW9yaWdpbidcbiAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICB9XG4gIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgdGhpcy5zaWduYWwgPSBvcHRpb25zLnNpZ25hbCB8fCB0aGlzLnNpZ25hbCB8fCAoZnVuY3Rpb24gKCkge1xuICAgIGlmICgnQWJvcnRDb250cm9sbGVyJyBpbiBnKSB7XG4gICAgICB2YXIgY3RybCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgIHJldHVybiBjdHJsLnNpZ25hbDtcbiAgICB9XG4gIH0oKSk7XG4gIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cbiAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgfVxuICB0aGlzLl9pbml0Qm9keShib2R5KVxuXG4gIGlmICh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykge1xuICAgIGlmIChvcHRpb25zLmNhY2hlID09PSAnbm8tc3RvcmUnIHx8IG9wdGlvbnMuY2FjaGUgPT09ICduby1jYWNoZScpIHtcbiAgICAgIC8vIFNlYXJjaCBmb3IgYSAnXycgcGFyYW1ldGVyIGluIHRoZSBxdWVyeSBzdHJpbmdcbiAgICAgIHZhciByZVBhcmFtU2VhcmNoID0gLyhbPyZdKV89W14mXSovXG4gICAgICBpZiAocmVQYXJhbVNlYXJjaC50ZXN0KHRoaXMudXJsKSkge1xuICAgICAgICAvLyBJZiBpdCBhbHJlYWR5IGV4aXN0cyB0aGVuIHNldCB0aGUgdmFsdWUgd2l0aCB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgIHRoaXMudXJsID0gdGhpcy51cmwucmVwbGFjZShyZVBhcmFtU2VhcmNoLCAnJDFfPScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSBhZGQgYSBuZXcgJ18nIHBhcmFtZXRlciB0byB0aGUgZW5kIHdpdGggdGhlIGN1cnJlbnQgdGltZVxuICAgICAgICB2YXIgcmVRdWVyeVN0cmluZyA9IC9cXD8vXG4gICAgICAgIHRoaXMudXJsICs9IChyZVF1ZXJ5U3RyaW5nLnRlc3QodGhpcy51cmwpID8gJyYnIDogJz8nKSArICdfPScgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5SZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcywge2JvZHk6IHRoaXMuX2JvZHlJbml0fSlcbn1cblxuZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICBib2R5XG4gICAgLnRyaW0oKVxuICAgIC5zcGxpdCgnJicpXG4gICAgLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgIGlmIChieXRlcykge1xuICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG4gICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuICAgICAgfVxuICAgIH0pXG4gIHJldHVybiBmb3JtXG59XG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKVxuICAvLyBSZXBsYWNlIGluc3RhbmNlcyBvZiBcXHJcXG4gYW5kIFxcbiBmb2xsb3dlZCBieSBhdCBsZWFzdCBvbmUgc3BhY2Ugb3IgaG9yaXpvbnRhbCB0YWIgd2l0aCBhIHNwYWNlXG4gIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM3MjMwI3NlY3Rpb24tMy4yXG4gIHZhciBwcmVQcm9jZXNzZWRIZWFkZXJzID0gcmF3SGVhZGVycy5yZXBsYWNlKC9cXHI/XFxuW1xcdCBdKy9nLCAnICcpXG4gIC8vIEF2b2lkaW5nIHNwbGl0IHZpYSByZWdleCB0byB3b3JrIGFyb3VuZCBhIGNvbW1vbiBJRTExIGJ1ZyB3aXRoIHRoZSBjb3JlLWpzIDMuNi4wIHJlZ2V4IHBvbHlmaWxsXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9naXRodWIvZmV0Y2gvaXNzdWVzLzc0OFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvNzUxXG4gIHByZVByb2Nlc3NlZEhlYWRlcnNcbiAgICAuc3BsaXQoJ1xccicpXG4gICAgLm1hcChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHJldHVybiBoZWFkZXIuaW5kZXhPZignXFxuJykgPT09IDAgPyBoZWFkZXIuc3Vic3RyKDEsIGhlYWRlci5sZW5ndGgpIDogaGVhZGVyXG4gICAgfSlcbiAgICAuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKVxuICAgICAgaWYgKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5qb2luKCc6JykudHJpbSgpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1Jlc3BvbnNlICcgKyBlcnJvci5tZXNzYWdlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgcmV0dXJuIGhlYWRlcnNcbn1cblxuQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG5leHBvcnQgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlc3BvbnNlKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1BsZWFzZSB1c2UgdGhlIFwibmV3XCIgb3BlcmF0b3IsIHRoaXMgRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uJylcbiAgfVxuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge31cbiAgfVxuXG4gIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzID09PSB1bmRlZmluZWQgPyAyMDAgOiBvcHRpb25zLnN0YXR1c1xuICBpZiAodGhpcy5zdGF0dXMgPCAyMDAgfHwgdGhpcy5zdGF0dXMgPiA1OTkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Jlc3BvbnNlJzogVGhlIHN0YXR1cyBwcm92aWRlZCAoMCkgaXMgb3V0c2lkZSB0aGUgcmFuZ2UgWzIwMCwgNTk5XS5cIilcbiAgfVxuICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwXG4gIHRoaXMuc3RhdHVzVGV4dCA9IG9wdGlvbnMuc3RhdHVzVGV4dCA9PT0gdW5kZWZpbmVkID8gJycgOiAnJyArIG9wdGlvbnMuc3RhdHVzVGV4dFxuICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcbiAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG59XG5cbkJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cblJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICB1cmw6IHRoaXMudXJsXG4gIH0pXG59XG5cblJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAyMDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgcmVzcG9uc2Uub2sgPSBmYWxzZVxuICByZXNwb25zZS5zdGF0dXMgPSAwXG4gIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG4gIHJldHVybiByZXNwb25zZVxufVxuXG52YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblxuUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuICB9XG5cbiAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG59XG5cbmV4cG9ydCB2YXIgRE9NRXhjZXB0aW9uID0gZy5ET01FeGNlcHRpb25cbnRyeSB7XG4gIG5ldyBET01FeGNlcHRpb24oKVxufSBjYXRjaCAoZXJyKSB7XG4gIERPTUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG5hbWUpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIHZhciBlcnJvciA9IEVycm9yKG1lc3NhZ2UpXG4gICAgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrXG4gIH1cbiAgRE9NRXhjZXB0aW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKVxuICBET01FeGNlcHRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRE9NRXhjZXB0aW9uXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaChpbnB1dCwgaW5pdCkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcblxuICAgIGlmIChyZXF1ZXN0LnNpZ25hbCAmJiByZXF1ZXN0LnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXG4gICAgZnVuY3Rpb24gYWJvcnRYaHIoKSB7XG4gICAgICB4aHIuYWJvcnQoKVxuICAgIH1cblxuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgIH1cbiAgICAgIC8vIFRoaXMgY2hlY2sgaWYgc3BlY2lmaWNhbGx5IGZvciB3aGVuIGEgdXNlciBmZXRjaGVzIGEgZmlsZSBsb2NhbGx5IGZyb20gdGhlIGZpbGUgc3lzdGVtXG4gICAgICAvLyBPbmx5IGlmIHRoZSBzdGF0dXMgaXMgb3V0IG9mIGEgbm9ybWFsIHJhbmdlXG4gICAgICBpZiAocmVxdWVzdC51cmwuaW5kZXhPZignZmlsZTovLycpID09PSAwICYmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPiA1OTkpKSB7XG4gICAgICAgIG9wdGlvbnMuc3RhdHVzID0gMjAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5zdGF0dXMgPSB4aHIuc3RhdHVzO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy51cmwgPSAncmVzcG9uc2VVUkwnIGluIHhociA/IHhoci5yZXNwb25zZVVSTCA6IG9wdGlvbnMuaGVhZGVycy5nZXQoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfSwgMClcbiAgICB9XG5cbiAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCB0aW1lZCBvdXQnKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydGVkJywgJ0Fib3J0RXJyb3InKSlcbiAgICAgIH0sIDApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZml4VXJsKHVybCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHVybCA9PT0gJycgJiYgZy5sb2NhdGlvbi5ocmVmID8gZy5sb2NhdGlvbi5ocmVmIDogdXJsXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1cmxcbiAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgZml4VXJsKHJlcXVlc3QudXJsKSwgdHJ1ZSlcblxuICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gICAgfSBlbHNlIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnb21pdCcpIHtcbiAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIpIHtcbiAgICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgc3VwcG9ydC5hcnJheUJ1ZmZlclxuICAgICAgKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluaXQgJiYgdHlwZW9mIGluaXQuaGVhZGVycyA9PT0gJ29iamVjdCcgJiYgIShpbml0LmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzIHx8IChnLkhlYWRlcnMgJiYgaW5pdC5oZWFkZXJzIGluc3RhbmNlb2YgZy5IZWFkZXJzKSkpIHtcbiAgICAgIHZhciBuYW1lcyA9IFtdO1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaW5pdC5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgbmFtZXMucHVzaChub3JtYWxpemVOYW1lKG5hbWUpKVxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCBub3JtYWxpemVWYWx1ZShpbml0LmhlYWRlcnNbbmFtZV0pKVxuICAgICAgfSlcbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lcy5pbmRleE9mKG5hbWUpID09PSAtMSkge1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3Quc2lnbmFsKSB7XG4gICAgICByZXF1ZXN0LnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0WGhyKVxuXG4gICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIERPTkUgKHN1Y2Nlc3Mgb3IgZmFpbHVyZSlcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgcmVxdWVzdC5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocilcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gIH0pXG59XG5cbmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxuXG5pZiAoIWcuZmV0Y2gpIHtcbiAgZy5mZXRjaCA9IGZldGNoXG4gIGcuSGVhZGVycyA9IEhlYWRlcnNcbiAgZy5SZXF1ZXN0ID0gUmVxdWVzdFxuICBnLlJlc3BvbnNlID0gUmVzcG9uc2Vcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/whatwg-fetch/fetch.js\n")},"./web/app/builder/build.js":
/*!**********************************!*\
  !*** ./web/app/builder/build.js ***!
  \**********************************/
/*! no exports provided */function(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _assets_less_js_less_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets/less.js/less.min.js */ "./web/assets/less.js/less.min.js");\n/* harmony import */ var _assets_less_js_less_min_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_assets_less_js_less_min_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _assets_spectrum_spectrum_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../assets/spectrum/spectrum.js */ "./web/assets/spectrum/spectrum.js");\n/* harmony import */ var _assets_spectrum_spectrum_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_assets_spectrum_spectrum_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _summernote_summernote_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./summernote/summernote.js */ "./web/app/builder/summernote/summernote.js");\n/* harmony import */ var _summernote_summernote_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_summernote_summernote_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _summernote_lang_en_US_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./summernote/lang/en-US.js */ "./web/app/builder/summernote/lang/en-US.js");\n/* harmony import */ var _summernote_lang_en_US_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_summernote_lang_en_US_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_button_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-button.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-button.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_button_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_button_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_fonts_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-fonts.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-fonts.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_fonts_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_fonts_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_color_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-color.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-color.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_color_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_color_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_link_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-link.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-link.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_link_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_link_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_align_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-align.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-align.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_align_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_align_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_multiline_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-multiline.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-multiline.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_multiline_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_multiline_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_iconfont_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-iconfont.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-iconfont.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_iconfont_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_iconfont_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_short_mode_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./summernote/plugin/summernote-ext-mbr-short-mode.js */ "./web/app/builder/summernote/plugin/summernote-ext-mbr-short-mode.js");\n/* harmony import */ var _summernote_plugin_summernote_ext_mbr_short_mode_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_summernote_plugin_summernote_ext_mbr_short_mode_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _assets_bootbox_bootbox_min_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../assets/bootbox/bootbox.min.js */ "./web/assets/bootbox/bootbox.min.js");\n/* harmony import */ var _assets_bootbox_bootbox_min_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_assets_bootbox_bootbox_min_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _assets_tooltipster_js_jquery_tooltipster_min_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../assets/tooltipster/js/jquery.tooltipster.min.js */ "./web/assets/tooltipster/js/jquery.tooltipster.min.js");\n/* harmony import */ var _assets_tooltipster_js_jquery_tooltipster_min_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_assets_tooltipster_js_jquery_tooltipster_min_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _js_builder_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./js/builder.js */ "./web/app/builder/js/builder.js");\n/* harmony import */ var _js_builder_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_js_builder_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _js_builder_components_load_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./js/builder-components-load.js */ "./web/app/builder/js/builder-components-load.js");\n/* harmony import */ var _js_builder_components_load_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_js_builder_components_load_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _js_builder_components_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./js/builder-components.js */ "./web/app/builder/js/builder-components.js");\n/* harmony import */ var _js_builder_components_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_js_builder_components_js__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _js_builder_pages_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./js/builder-pages.js */ "./web/app/builder/js/builder-pages.js");\n/* harmony import */ var _js_builder_pages_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_js_builder_pages_js__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _js_builder_cleaners_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./js/builder-cleaners.js */ "./web/app/builder/js/builder-cleaners.js");\n/* harmony import */ var _js_builder_cleaners_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_js_builder_cleaners_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _js_builder_plugin_media_editor_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./js/builder-plugin-media-editor.js */ "./web/app/builder/js/builder-plugin-media-editor.js");\n/* harmony import */ var _js_builder_plugin_media_editor_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_js_builder_plugin_media_editor_js__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _js_builder_plugin_summernote_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./js/builder-plugin-summernote.js */ "./web/app/builder/js/builder-plugin-summernote.js");\n/* harmony import */ var _js_builder_plugin_summernote_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_js_builder_plugin_summernote_js__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _js_builder_plugin_iconfont_editor_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./js/builder-plugin-iconfont-editor.js */ "./web/app/builder/js/builder-plugin-iconfont-editor.js");\n/* harmony import */ var _js_builder_plugin_iconfont_editor_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_js_builder_plugin_iconfont_editor_js__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _js_builder_plugin_tooltips_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./js/builder-plugin-tooltips.js */ "./web/app/builder/js/builder-plugin-tooltips.js");\n/* harmony import */ var _js_builder_plugin_tooltips_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_js_builder_plugin_tooltips_js__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _js_builder_plugin_sortable_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./js/builder-plugin-sortable.js */ "./web/app/builder/js/builder-plugin-sortable.js");\n/* harmony import */ var _js_builder_plugin_sortable_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_js_builder_plugin_sortable_js__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _js_builder_plugin_class_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./js/builder-plugin-class.js */ "./web/app/builder/js/builder-plugin-class.js");\n/* harmony import */ var _js_builder_plugin_class_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_js_builder_plugin_class_js__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _js_builder_migrate_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./js/builder-migrate.js */ "./web/app/builder/js/builder-migrate.js");\n/* harmony import */ var _js_builder_migrate_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_js_builder_migrate_js__WEBPACK_IMPORTED_MODULE_25__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvYnVpbGQuanM/MmJmZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQXlDOztBQUVDOztBQUVQO0FBQ0E7QUFDc0I7QUFDRDtBQUNBO0FBQ0Q7QUFDQztBQUNJO0FBQ0Q7QUFDRTs7QUFFakI7O0FBRWtCOztBQUV0QztBQUNnQjtBQUNMO0FBQ0w7QUFDRztBQUNXO0FBQ0Y7QUFDSztBQUNQO0FBQ0E7QUFDSCIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9idWlsZC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcIi4uLy4uL2Fzc2V0cy9sZXNzLmpzL2xlc3MubWluLmpzXCJcblxuaW1wb3J0IFwiLi4vLi4vYXNzZXRzL3NwZWN0cnVtL3NwZWN0cnVtLmpzXCJcblxuaW1wb3J0IFwiLi9zdW1tZXJub3RlL3N1bW1lcm5vdGUuanNcIlxuaW1wb3J0IFwiLi9zdW1tZXJub3RlL2xhbmcvZW4tVVMuanNcIlxuaW1wb3J0IFwiLi9zdW1tZXJub3RlL3BsdWdpbi9zdW1tZXJub3RlLWV4dC1tYnItYnV0dG9uLmpzXCJcbmltcG9ydCBcIi4vc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWZvbnRzLmpzXCJcbmltcG9ydCBcIi4vc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWNvbG9yLmpzXCJcbmltcG9ydCBcIi4vc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWxpbmsuanNcIlxuaW1wb3J0IFwiLi9zdW1tZXJub3RlL3BsdWdpbi9zdW1tZXJub3RlLWV4dC1tYnItYWxpZ24uanNcIlxuaW1wb3J0IFwiLi9zdW1tZXJub3RlL3BsdWdpbi9zdW1tZXJub3RlLWV4dC1tYnItbXVsdGlsaW5lLmpzXCJcbmltcG9ydCBcIi4vc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWljb25mb250LmpzXCJcbmltcG9ydCBcIi4vc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLXNob3J0LW1vZGUuanNcIlxuXG5pbXBvcnQgXCIuLi8uLi9hc3NldHMvYm9vdGJveC9ib290Ym94Lm1pbi5qc1wiXG5cbmltcG9ydCBcIi4uLy4uL2Fzc2V0cy90b29sdGlwc3Rlci9qcy9qcXVlcnkudG9vbHRpcHN0ZXIubWluLmpzXCJcblxuaW1wb3J0IFwiLi9qcy9idWlsZGVyLmpzXCJcbmltcG9ydCBcIi4vanMvYnVpbGRlci1jb21wb25lbnRzLWxvYWQuanNcIlxuaW1wb3J0IFwiLi9qcy9idWlsZGVyLWNvbXBvbmVudHMuanNcIlxuaW1wb3J0IFwiLi9qcy9idWlsZGVyLXBhZ2VzLmpzXCJcbmltcG9ydCBcIi4vanMvYnVpbGRlci1jbGVhbmVycy5qc1wiXG5pbXBvcnQgXCIuL2pzL2J1aWxkZXItcGx1Z2luLW1lZGlhLWVkaXRvci5qc1wiXG5pbXBvcnQgXCIuL2pzL2J1aWxkZXItcGx1Z2luLXN1bW1lcm5vdGUuanNcIlxuaW1wb3J0IFwiLi9qcy9idWlsZGVyLXBsdWdpbi1pY29uZm9udC1lZGl0b3IuanNcIlxuaW1wb3J0IFwiLi9qcy9idWlsZGVyLXBsdWdpbi10b29sdGlwcy5qc1wiXG5pbXBvcnQgXCIuL2pzL2J1aWxkZXItcGx1Z2luLXNvcnRhYmxlLmpzXCJcbmltcG9ydCBcIi4vanMvYnVpbGRlci1wbHVnaW4tY2xhc3MuanNcIlxuaW1wb3J0IFwiLi9qcy9idWlsZGVyLW1pZ3JhdGUuanNcIiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/build.js\n')},"./web/app/builder/js/builder-cleaners.js":
/*!************************************************!*\
  !*** ./web/app/builder/js/builder-cleaners.js ***!
  \************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module mbrAppCore/cleaners\n */\n(function($, CORE) {\n    'use strict';\n\n    // uncomment jquery plugin\n    // Author: Romuald Brunet <romuald@chivil.com>\n    // usage: $('body').uncomment(true, 'ABC');\n    // will remove all html comments with ABC inside\n    $.fn.uncomment = function(recurse, contains) {\n        $(this).contents().each(function() {\n            if(this.tagName === 'IFRAME') {\n                // do nothing\n            } else if ( recurse && this.hasChildNodes() ) {\n                $(this).uncomment(recurse, contains);\n            } else if ( this.nodeType == 8 ) {\n                if(contains && !RegExp(contains, 'g').test(this.nodeValue)) {\n                    return;\n                }\n                $(this).remove();\n            }\n        });\n    };\n\n    var recursiveReplace = function(str, regexp, replaceStr) {\n        var newStr = str.replace(regexp, replaceStr);\n        if(newStr === str) {\n            return newStr;\n        } else {\n            return recursiveReplace(newStr, regexp, replaceStr);\n        }\n    }\n\n    CORE.regExtension({\n        name: 'cleaners',\n        /** @lends module:mbrAppCore/cleaners */\n        global: {\n\n           /**\n            * clean html string / jquery object\n            *\n            * remove all Mobirise attributes / classnames\n            * @param HTML\n            * @param forJSON\n            */\n            cleanHTMLplease: function(HTML, forJSON) {\n                var isString = typeof HTML == 'string';\n                var isJQuery = typeof HTML == 'object' && !!HTML.jQuery;\n\n                // check if no html string and no jquery object - return with no changes\n                if(!isString && !isJQuery) {\n                    return HTML;\n                }\n\n                // add wrapper\n                HTML = $('<div>').html(HTML);\n\n                // find <b> and <i> tags and change it to <strong> and <em>\n                HTML.find('b:not([class])').each(function() {\n                    let attributes = this.attributes;\n                    const $strong = $('<strong>' + this.innerHTML + '</strong>')\n                    $(this).replaceWith($strong);\n                    for (const attr of attributes) {\n                        $strong.attr(attr.name, attr.value);\n                    }\n                });\n                \n                HTML.find('i:not([class])').each(function() {\n                    let attributes = this.attributes;\n                    const $em = $('<em>' + this.innerHTML + '</em>')\n                    $(this).replaceWith($em);\n                    for (const attr of attributes) {\n                        $em.attr(attr.name, attr.value);\n                    }\n                });\n\n                // find [data-app-remove-it] attr and remove item\n                HTML.find('[data-app-remove-it]').remove();\n\n                // find and remove attributes / classnames / styles\n                HTML.find('[data-app-edit], [data-app-btn]')\n                    .removeAttr('data-app-edit contenteditable id' + (forJSON?'':' data-app-btn data-app-list-item'))\n                    .removeClass('note-air-editor note-editable');\n\n                // remove all mbr-... attributes\n                HTML.find('*').each(function() {\n                    var attributes = '';\n                    for (var i = 0, atts = this.attributes, n = atts.length; i < n; i++) {\n                        if(/mbr-/g.test(atts[i].nodeName)) {\n                            attributes += atts[i].nodeName + ' ';\n                        }\n                    }\n                    $(this).removeAttr(attributes);\n                });\n\n                // remove revets comments\n                HTML.uncomment(true, 'rivets:');\n\n                // remove menu items classname\n                if(!forJSON) {\n                    HTML.find('.mbr-menu-item').removeClass('mbr-menu-item');\n\n                    // remove toolbar attrs\n                    HTML.find('[data-toolbar]').removeAttr('data-toolbar');\n\n                    // remove placeholder attrs\n                    HTML.find('[data-app-placeholder]').removeAttr('data-app-placeholder');\n\n                    // remove selector attrs\n                    HTML.find('[data-app-selector]').removeAttr('data-app-selector');\n\n                    // remove multiline attrs\n                    HTML.find('[data-multiline]').removeAttr('data-multiline');\n                }\n\n                // remove image attrs\n                HTML.find('[data-app-img-width], [data-app-img-height]')\n                    .removeAttr('data-app-img-width data-app-img-height');\n\n\n                /**\n                 * clean html filter\n                 * @filter mbrAppCore->cleanHTMLplease\n                 * @param {jQuery} HTML\n                 * @param {Bool} forJSON\n                 */\n                HTML = this.applyFilter('cleanHTMLplease', HTML, forJSON);\n\n                if(isString) {\n                    HTML = HTML.html();\n\n                    // fix for iframe\n                    HTML = HTML.replace(/(<iframe\\b[^>]*>)(.*?)(<\\/iframe>)/g, function($0, $1, $2, $3) {\n                        $2 = recursiveReplace($2, /\\&amp;/g, '&');\n                        $2 = $('<textarea/>').html($2).text();\n                        return $1 + $2 + $3;\n                    });\n                } else {\n                    HTML = HTML.unwrap();\n                }\n\n                return HTML;\n            },\n\n            /**\n             * Checking object serializability\n             * @param  {Object} obj\n             * @return {Bool}\n             */\n            isSerializableObject: function(obj) {\n                return (typeof obj == 'object') && (Array.isArray(obj) || $.isPlainObject(obj));\n            },\n\n           /**\n            * clean project json - remove some system settings and clean html strings\n            *\n            * remove all Mobirise attributes / classnames\n            * @param project\n            * @param {Bool} HTMLonly only clean html strings without settings\n            */\n            cleanJSONPlease: function(project, HTMLonly) {\n                if(this.isSerializableObject(project)) {\n                    for(var k in project) {\n                        // remove _id\n                        // remove functions\n                        if(/_id|_alwaysTop|_alwaysBottom|_positionAbsolute|_noDrag|_once|_group|_global|_autoPadding|_css|_js|_plugins/g.test(k) || typeof project[k] === 'function') {\n                            if(!HTMLonly) {\n                                delete project[k];\n                            }\n                        } else {\n                            project[k] = this.cleanJSONPlease(project[k], HTMLonly);\n                        }\n                    }\n                }\n                \n                // clean html\n                else if (typeof project === 'string' && /data-app-btn=|contenteditable=|note-editable/g.test(project)) {\n                    project = this.cleanHTMLplease( project, true );\n                }\n\n                return project;\n            }\n        }\n    });\n}(jQuery, mbrAppCore));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1jbGVhbmVycy5qcz9jNTU0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxPQUFPO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDLDJCQUEyQixLQUFLO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EseURBQXlEO0FBQ3pEO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSx3QkFBd0IsT0FBTztBQUMvQix3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLEtBQUs7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUMiLCJmaWxlIjoiLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1jbGVhbmVycy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG1vZHVsZSBtYnJBcHBDb3JlL2NsZWFuZXJzXG4gKi9cbihmdW5jdGlvbigkLCBDT1JFKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gdW5jb21tZW50IGpxdWVyeSBwbHVnaW5cbiAgICAvLyBBdXRob3I6IFJvbXVhbGQgQnJ1bmV0IDxyb211YWxkQGNoaXZpbC5jb20+XG4gICAgLy8gdXNhZ2U6ICQoJ2JvZHknKS51bmNvbW1lbnQodHJ1ZSwgJ0FCQycpO1xuICAgIC8vIHdpbGwgcmVtb3ZlIGFsbCBodG1sIGNvbW1lbnRzIHdpdGggQUJDIGluc2lkZVxuICAgICQuZm4udW5jb21tZW50ID0gZnVuY3Rpb24ocmVjdXJzZSwgY29udGFpbnMpIHtcbiAgICAgICAgJCh0aGlzKS5jb250ZW50cygpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZih0aGlzLnRhZ05hbWUgPT09ICdJRlJBTUUnKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgfSBlbHNlIGlmICggcmVjdXJzZSAmJiB0aGlzLmhhc0NoaWxkTm9kZXMoKSApIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnVuY29tbWVudChyZWN1cnNlLCBjb250YWlucyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCB0aGlzLm5vZGVUeXBlID09IDggKSB7XG4gICAgICAgICAgICAgICAgaWYoY29udGFpbnMgJiYgIVJlZ0V4cChjb250YWlucywgJ2cnKS50ZXN0KHRoaXMubm9kZVZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgcmVjdXJzaXZlUmVwbGFjZSA9IGZ1bmN0aW9uKHN0ciwgcmVnZXhwLCByZXBsYWNlU3RyKSB7XG4gICAgICAgIHZhciBuZXdTdHIgPSBzdHIucmVwbGFjZShyZWdleHAsIHJlcGxhY2VTdHIpO1xuICAgICAgICBpZihuZXdTdHIgPT09IHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIG5ld1N0cjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVSZXBsYWNlKG5ld1N0ciwgcmVnZXhwLCByZXBsYWNlU3RyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIENPUkUucmVnRXh0ZW5zaW9uKHtcbiAgICAgICAgbmFtZTogJ2NsZWFuZXJzJyxcbiAgICAgICAgLyoqIEBsZW5kcyBtb2R1bGU6bWJyQXBwQ29yZS9jbGVhbmVycyAqL1xuICAgICAgICBnbG9iYWw6IHtcblxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogY2xlYW4gaHRtbCBzdHJpbmcgLyBqcXVlcnkgb2JqZWN0XG4gICAgICAgICAgICAqXG4gICAgICAgICAgICAqIHJlbW92ZSBhbGwgTW9iaXJpc2UgYXR0cmlidXRlcyAvIGNsYXNzbmFtZXNcbiAgICAgICAgICAgICogQHBhcmFtIEhUTUxcbiAgICAgICAgICAgICogQHBhcmFtIGZvckpTT05cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBjbGVhbkhUTUxwbGVhc2U6IGZ1bmN0aW9uKEhUTUwsIGZvckpTT04pIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgSFRNTCA9PSAnc3RyaW5nJztcbiAgICAgICAgICAgICAgICB2YXIgaXNKUXVlcnkgPSB0eXBlb2YgSFRNTCA9PSAnb2JqZWN0JyAmJiAhIUhUTUwualF1ZXJ5O1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgbm8gaHRtbCBzdHJpbmcgYW5kIG5vIGpxdWVyeSBvYmplY3QgLSByZXR1cm4gd2l0aCBubyBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgaWYoIWlzU3RyaW5nICYmICFpc0pRdWVyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSFRNTDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgd3JhcHBlclxuICAgICAgICAgICAgICAgIEhUTUwgPSAkKCc8ZGl2PicpLmh0bWwoSFRNTCk7XG5cbiAgICAgICAgICAgICAgICAvLyBmaW5kIDxiPiBhbmQgPGk+IHRhZ3MgYW5kIGNoYW5nZSBpdCB0byA8c3Ryb25nPiBhbmQgPGVtPlxuICAgICAgICAgICAgICAgIEhUTUwuZmluZCgnYjpub3QoW2NsYXNzXSknKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJHN0cm9uZyA9ICQoJzxzdHJvbmc+JyArIHRoaXMuaW5uZXJIVE1MICsgJzwvc3Ryb25nPicpXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVwbGFjZVdpdGgoJHN0cm9uZyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXR0ciBvZiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc3Ryb25nLmF0dHIoYXR0ci5uYW1lLCBhdHRyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIEhUTUwuZmluZCgnaTpub3QoW2NsYXNzXSknKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJGVtID0gJCgnPGVtPicgKyB0aGlzLmlubmVySFRNTCArICc8L2VtPicpXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVwbGFjZVdpdGgoJGVtKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbS5hdHRyKGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGZpbmQgW2RhdGEtYXBwLXJlbW92ZS1pdF0gYXR0ciBhbmQgcmVtb3ZlIGl0ZW1cbiAgICAgICAgICAgICAgICBIVE1MLmZpbmQoJ1tkYXRhLWFwcC1yZW1vdmUtaXRdJykucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBmaW5kIGFuZCByZW1vdmUgYXR0cmlidXRlcyAvIGNsYXNzbmFtZXMgLyBzdHlsZXNcbiAgICAgICAgICAgICAgICBIVE1MLmZpbmQoJ1tkYXRhLWFwcC1lZGl0XSwgW2RhdGEtYXBwLWJ0bl0nKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignZGF0YS1hcHAtZWRpdCBjb250ZW50ZWRpdGFibGUgaWQnICsgKGZvckpTT04/Jyc6JyBkYXRhLWFwcC1idG4gZGF0YS1hcHAtbGlzdC1pdGVtJykpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbm90ZS1haXItZWRpdG9yIG5vdGUtZWRpdGFibGUnKTtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgbWJyLS4uLiBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgSFRNTC5maW5kKCcqJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGF0dHMgPSB0aGlzLmF0dHJpYnV0ZXMsIG4gPSBhdHRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoL21ici0vZy50ZXN0KGF0dHNbaV0ubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyArPSBhdHRzW2ldLm5vZGVOYW1lICsgJyAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQXR0cihhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSByZXZldHMgY29tbWVudHNcbiAgICAgICAgICAgICAgICBIVE1MLnVuY29tbWVudCh0cnVlLCAncml2ZXRzOicpO1xuXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG1lbnUgaXRlbXMgY2xhc3NuYW1lXG4gICAgICAgICAgICAgICAgaWYoIWZvckpTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgSFRNTC5maW5kKCcubWJyLW1lbnUtaXRlbScpLnJlbW92ZUNsYXNzKCdtYnItbWVudS1pdGVtJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRvb2xiYXIgYXR0cnNcbiAgICAgICAgICAgICAgICAgICAgSFRNTC5maW5kKCdbZGF0YS10b29sYmFyXScpLnJlbW92ZUF0dHIoJ2RhdGEtdG9vbGJhcicpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBwbGFjZWhvbGRlciBhdHRyc1xuICAgICAgICAgICAgICAgICAgICBIVE1MLmZpbmQoJ1tkYXRhLWFwcC1wbGFjZWhvbGRlcl0nKS5yZW1vdmVBdHRyKCdkYXRhLWFwcC1wbGFjZWhvbGRlcicpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBzZWxlY3RvciBhdHRyc1xuICAgICAgICAgICAgICAgICAgICBIVE1MLmZpbmQoJ1tkYXRhLWFwcC1zZWxlY3Rvcl0nKS5yZW1vdmVBdHRyKCdkYXRhLWFwcC1zZWxlY3RvcicpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBtdWx0aWxpbmUgYXR0cnNcbiAgICAgICAgICAgICAgICAgICAgSFRNTC5maW5kKCdbZGF0YS1tdWx0aWxpbmVdJykucmVtb3ZlQXR0cignZGF0YS1tdWx0aWxpbmUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaW1hZ2UgYXR0cnNcbiAgICAgICAgICAgICAgICBIVE1MLmZpbmQoJ1tkYXRhLWFwcC1pbWctd2lkdGhdLCBbZGF0YS1hcHAtaW1nLWhlaWdodF0nKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignZGF0YS1hcHAtaW1nLXdpZHRoIGRhdGEtYXBwLWltZy1oZWlnaHQnKTtcblxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogY2xlYW4gaHRtbCBmaWx0ZXJcbiAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmNsZWFuSFRNTHBsZWFzZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBIVE1MXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtCb29sfSBmb3JKU09OXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgSFRNTCA9IHRoaXMuYXBwbHlGaWx0ZXIoJ2NsZWFuSFRNTHBsZWFzZScsIEhUTUwsIGZvckpTT04pO1xuXG4gICAgICAgICAgICAgICAgaWYoaXNTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgSFRNTCA9IEhUTUwuaHRtbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpeCBmb3IgaWZyYW1lXG4gICAgICAgICAgICAgICAgICAgIEhUTUwgPSBIVE1MLnJlcGxhY2UoLyg8aWZyYW1lXFxiW14+XSo+KSguKj8pKDxcXC9pZnJhbWU+KS9nLCBmdW5jdGlvbigkMCwgJDEsICQyLCAkMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJDIgPSByZWN1cnNpdmVSZXBsYWNlKCQyLCAvXFwmYW1wOy9nLCAnJicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJDIgPSAkKCc8dGV4dGFyZWEvPicpLmh0bWwoJDIpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkMSArICQyICsgJDM7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEhUTUwgPSBIVE1MLnVud3JhcCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBIVE1MO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDaGVja2luZyBvYmplY3Qgc2VyaWFsaXphYmlsaXR5XG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG9ialxuICAgICAgICAgICAgICogQHJldHVybiB7Qm9vbH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaXNTZXJpYWxpemFibGVPYmplY3Q6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIG9iaiA9PSAnb2JqZWN0JykgJiYgKEFycmF5LmlzQXJyYXkob2JqKSB8fCAkLmlzUGxhaW5PYmplY3Qob2JqKSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgIC8qKlxuICAgICAgICAgICAgKiBjbGVhbiBwcm9qZWN0IGpzb24gLSByZW1vdmUgc29tZSBzeXN0ZW0gc2V0dGluZ3MgYW5kIGNsZWFuIGh0bWwgc3RyaW5nc1xuICAgICAgICAgICAgKlxuICAgICAgICAgICAgKiByZW1vdmUgYWxsIE1vYmlyaXNlIGF0dHJpYnV0ZXMgLyBjbGFzc25hbWVzXG4gICAgICAgICAgICAqIEBwYXJhbSBwcm9qZWN0XG4gICAgICAgICAgICAqIEBwYXJhbSB7Qm9vbH0gSFRNTG9ubHkgb25seSBjbGVhbiBodG1sIHN0cmluZ3Mgd2l0aG91dCBzZXR0aW5nc1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNsZWFuSlNPTlBsZWFzZTogZnVuY3Rpb24ocHJvamVjdCwgSFRNTG9ubHkpIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmlzU2VyaWFsaXphYmxlT2JqZWN0KHByb2plY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgayBpbiBwcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgX2lkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgZnVuY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICBpZigvX2lkfF9hbHdheXNUb3B8X2Fsd2F5c0JvdHRvbXxfcG9zaXRpb25BYnNvbHV0ZXxfbm9EcmFnfF9vbmNlfF9ncm91cHxfZ2xvYmFsfF9hdXRvUGFkZGluZ3xfY3NzfF9qc3xfcGx1Z2lucy9nLnRlc3QoaykgfHwgdHlwZW9mIHByb2plY3Rba10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighSFRNTG9ubHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHByb2plY3Rba107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0W2tdID0gdGhpcy5jbGVhbkpTT05QbGVhc2UocHJvamVjdFtrXSwgSFRNTG9ubHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNsZWFuIGh0bWxcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcHJvamVjdCA9PT0gJ3N0cmluZycgJiYgL2RhdGEtYXBwLWJ0bj18Y29udGVudGVkaXRhYmxlPXxub3RlLWVkaXRhYmxlL2cudGVzdChwcm9qZWN0KSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0ID0gdGhpcy5jbGVhbkhUTUxwbGVhc2UoIHByb2plY3QsIHRydWUgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufShqUXVlcnksIG1ickFwcENvcmUpKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-cleaners.js\n")},"./web/app/builder/js/builder-components-load.js":
/*!*******************************************************!*\
  !*** ./web/app/builder/js/builder-components-load.js ***!
  \*******************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module  mbrAppCore/components-load\n *\n * @description components load\n *\n *\n */\n(function($, CORE) {\n    'use strict';\n\n    var renderTimeout;\n    var $insertBefore = $('#insertBefore');\n\n\n    CORE.regExtension({\n        name: 'components-load',\n        /** @lends module:mbrAppCore/components-load */\n        global: {\n           /**\n            * Clear all blocks\n            */\n            clearBlocks: function() {\n               /**\n                * @event mbrAppCore:clearBlocks\n                */\n                this.fire('clearBlocks');\n                this.$template.html('');\n               /**\n                * @event mbrAppCore:clearedBlocks\n                */\n                this.fire('clearedBlocks');\n            },\n\n           /**\n            * Prepare Component Blocks for designer\n            * @param {Object} component - component params\n            * @return {String} html - result html\n            */\n            prepareComponent: function(component) {\n                var result = '';\n\n                // if component not available\n                if((CORE.theme.type == 'secondary' ? false : typeof CORE.components[component._name] === 'undefined') || typeof component._id === 'undefined') {\n                    return result;\n                }\n\n                var draggable = !component._noDrag;\n                var alwaysBottom = component._alwaysBottom;\n                var alwaysTop = component._alwaysTop;\n                var posAbsolute = component._positionAbsolute;\n\n                var withParams = component._params;\n\n                const paramsCheck = function() {\n                    return typeof withParams === 'object' && withParams && Object.keys(withParams).length\n                }\n\n                result += [\n                    '<div class=\"app-component'+(draggable?'':' no-sortable')+(posAbsolute?' pos-absolute':'')+'\" data-app-component-id=\"'+component._id+'\"'+(alwaysBottom?' data-app-always-bottom=\"true\"':'')+(alwaysTop?' data-app-always-top=\"true\"':'')+'>',\n                        '<div class=\"app-component-menu\">',\n                            '<div class=\"app-component-edit\">',\n                                draggable?'<span class=\"mbr-btn sortable mbr-icon-arrows-vertical\" data-tooltipster=\"bottom\" title=\"Drag Block\"></span>':'',\n                                paramsCheck()?'<span class=\"mbr-btn component-params mbr-icon-cog\" data-tooltipster=\"bottom\" title=\"Block Parameters\"></span>':'',\n                                '<span class=\"mbr-btn component-remove mbr-icon-trash\" data-tooltipster=\"bottom\" title=\"Remove Block\"></span>',\n                                '<span class=\"mbr-btn component-show-more mbr-icon-horizontal-ellipsis\" data-tooltipster=\"bottom\" title=\"Show More\"></span>',\n                            '</div>',\n                        '</div>',\n                        '<div class=\"app-component-content\"></div>',\n                    '</div>'\n                ].join('');\n\n                /**\n                 * Prepare component\n                 * @filter mbrAppCore->prepareComponent\n                 * @param {String} componentStringSkeleton\n                 * @param {Object} component\n                 */\n                return this.applyFilter('prepareComponent', result, component);\n            },\n           /**\n            * Prepare All Component Blocks\n            * @param components\n            */\n            prepareAllComponents: function(components) {\n                var result = '';\n\n                //filter restricted components\n                components = components.filter(function(el) {\n                    if (!Object.keys(CORE.APP.restrictedAddons).length) return true;\n                    return !CORE.APP.restrictedAddons[el.alias]; \n                });\n\n                // prepare all top components\n                for(var k in components) {\n                    if(components[k]._alwaysTop) {\n                        result += this.prepareComponent(components[k]);\n                    }\n                }\n\n                // prepare all components instead bottom\n                for(var k in components) {\n                    if(!components[k]._alwaysBottom && !components[k]._alwaysTop) {\n                        result += this.prepareComponent(components[k]);\n                    }\n                }\n\n                // prepare all bottom components\n                for(var k in components) {\n                    if(components[k]._alwaysBottom) {\n                        result += this.prepareComponent(components[k]);\n                    }\n                }\n\n                return result;\n            },\n\n            publishAssets: [],\n           /**\n            * prepare style.css and script.js of component\n            * @param componentName\n            */\n            prepareComponentAssets: function(componentName) {\n\n                var component = CORE.components[componentName];\n                var path = (component.alias ? CORE.APP.getAddonDir(component.alias) : this.theme.pathExport + '/components') + '/' + componentName;\n                var pathCore = component.alias? path: this.theme.pathCore + '/components/' + componentName\n\n                // style.css\n                if(component._css) {\n                    // add to list of assets\n                    this.publishAssets.push({\n                        src: path + '/style.css',\n                        dest: 'assets/mobirise/css/style.css'\n                    });\n\n                    // add link to head\n                    if(!$('#CSS-' + componentName).length) {\n                        $insertBefore.before('<link id=\"CSS-' + componentName + '\" rel=\"stylesheet\" href=\"' + pathCore + '/style.css\">');\n                    }\n                }\n\n                // script.js\n                if(component._js) {\n                    // add to list of assets\n                    this.publishAssets.push({\n                        src: path + '/script.js',\n                        dest: 'assets/mobirise/js/script.js'\n                    });\n\n                    // add link to head\n                    if(!$('#JS-' + componentName).length) {\n                        $insertBefore.before('<script id=\"JS-' + componentName + '\" src=\"' + pathCore + '/script.js\">');\n                    }\n                }\n            },\n\n\n           /**\n            * Load Components and append to prepared Blocks\n            * @param {Object} component - component params\n            * @param {jQuery} context - context to insert\n            * @param {Object} pageJSON\n            * @param {String} page - page name\n            * @param {bool} publish - request for is publish\n            */\n            loadEachComponent: function(component, context, pageJSON, page, publish) {\n\n                var name = component._name;\n                var _this = this;\n\n                if(CORE.isSecondaryComponent(component) && component._cid && !component._customHTML) {\n                    console.log(\"Error: component '\" + name + \"' is broken\");\n                    return;\n                };\n                if (publish && CORE.isSecondaryComponent(component)) {\n                    component = $.extend(true, {}, component);\n                }\n\n                if (component._id === undefined){\n                    console.log(\"Error: component '\" + name + \"' is not initialized\");\n                    return;\n                }\n\n                if (!component._sourceTheme) {\n                    component._sourceTheme = CORE.theme.name;\n                }\n\n                // if (CORE.APP.accountMode.isOffline() && !CORE.APP.isBuildInAddon(component._sourceTheme)) {\n                //     console.log(\"Error: component '\" + name + \"' from \" + component._sourceTheme + \" needs account information. Unavailable in the offline mode.\");\n                //     return;\n                // }\n\n                /**\n                 * Load component template\n                 * @filter mbrAppCore->loadComponentTemplate\n                 * @param {String} template - html template\n                 * @param {jQuery} context - context to insert\n                 * @param {bool} publish - request for is publish\n                 */\n                var templateHTML = _this.applyFilter('loadComponentTemplate', CORE.APP.cachedTemplates[name] || '', component, publish, component._styles || {});\n\n                // when there is cached template, use it\n                if(templateHTML) {\n                    // add uniq anchor\n                    if(typeof component._anchor === 'undefined') {\n                        // prefix for unique ID\n                        var prefix = component._name.replace(/^pro\\./i, '');\n                        prefix = prefix.replace(/\\./g, '_') + '-';\n\n\t\t\t\t\t\tcomponent._anchor = prefix + _this.getUniqCompName();\n                    }\n                   /**\n                    * @event mbrAppCore:loadComponent\n                    * @param {Object} component\n                    * @param {String} page\n                    * @param {jQuery} context\n                    */\n                    _this.fire('loadComponent', component, page, context);\n\n                    // render template\n                    var $sandbox = $( document.createElement('DIV') );\n                    var rendered = $sandbox.html(templateHTML).find('> *');\n\n                    // add some additional attributes\n                    rendered.find('[data-app-edit=\"content\"], [data-app-edit=\"full\"], [data-app-edit=\"buttons\"], [data-app-edit=\"menu\"]').each(function() {\n                        $(this).attr('mbr-content-edit', $(this).attr('mbr-html'));\n                    });\n\n                    // additional method for publish checking\n                    component._checkPublish = function() {\n                        return publish;\n                    }\n\n                    // render for adding to block\n                    // var _component = jQuery.extend(true, {}, component);\n                    //_this.replaceSystemVariables(component, component);\n\n                    rivets.bind(rendered, component);\n\n                    context.find('[data-app-component-id='+component._id+']')\n                        .find('> .app-component-content').html(rendered);\n\n                   /**\n                    * @event mbrAppCore:loadedComponent\n                    * @param {Object} component\n                    * @param {String} page  -- {String} publish before 3.06.4\n                    * @param {jQuery} context\n                    * @param {publish} boolean -- since 3.06.4\n                    */\n                    _this.fire('loadedComponent', component, page, context, publish);\n\n                    // fire publish filter\n                    if(publish && component._publishFilter) {\n\t\t\t\t\t\ttry{\n\t\t\t\t\t\t\tcomponent._publishFilter(context.find('[data-app-component-id=' + component._id + '] > .app-component-content'), pageJSON);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch(e){\n\t\t\t\t\t\t\tconsole.error(\"Error of _publishFilter of component(\" + component._id + \") on the page(\" + page + \"):\", e);\n\t\t\t\t\t\t}\n                    }\n                }\n            },\n\n           /**\n            * Render Component Blocks\n            * @param id - component id, if undefined then render all components\n            * @param callback\n            */\n            render: function(id, callback) {\n                var _this = this;\n                clearTimeout(renderTimeout);\n                renderTimeout = setTimeout(function() {\n\n                   /**\n                    * @event mbrAppCore:render\n                    * @param id\n                    */\n                    _this.fire('render', id);\n\n                    try {\n                        // render the specified component by ID\n                        if(typeof id !== 'undefined') {\n                            var component = _this.getComponent(id);\n\n                            // load each component content\n                            _this.loadEachComponent(component, _this.$template, _this.resultJSON[_this.currentPage], _this.currentPage, false);\n\n                            // fire _onParamsChange without any var names and values\n                            if(typeof component._onParamsChange !== 'undefined') {\n                                try{\n                                    component._onParamsChange(_this.$template.find('[data-app-component-id=' + id + '] > .app-component-content'));\n                                }\n                                catch(e){\n                                    console.log(\"Error execution _onParamsChange of compoment(_name=\", component&&component._name, \", _id-\", component&&component._id, \"):\", e)\n                                }\n                            }\n                        }\n\n                        // render all components\n                        else {\n                            _this.clearBlocks();\n                            var components = _this.resultJSON[_this.currentPage].components;\n                            var preparedHtml = _this.prepareAllComponents(components);\n                            var brokenBlocks = [];\n                            var restrictedBlocks = [];\n\n                            // append all blocks\n                            _this.$template.append(preparedHtml);\n\n                            // load each component content\n                            for(var k in components) {\n                                var component = components[k];\n                                if ( component._id === undefined ) {\n                                    continue;\n                                }\n\n                                // Search for broken blocks\n                                if(CORE.isSecondaryComponent(component) && component._cid && !component._customHTML) {\n                                    console.log(\"Error: component '\" + component._name + \"' is broken\");\n                                    brokenBlocks.push(component._id);\n                                    continue;\n                                };\n\n                                // Search for restricted blocks\n                                if(component.alias && CORE.APP.restrictedAddons[component.alias]) {\n                                    console.log(\"Error: component '\" + component._name + \"' is restricted\");\n                                    restrictedBlocks.push(component._id);\n                                    continue;\n                                };\n\n                                _this.loadEachComponent(component, _this.$template, _this.resultJSON[_this.currentPage], _this.currentPage, false);\n\n                                // fire _onParamsChange without any var names and values\n                                if(typeof component._onParamsChange !== 'undefined') {\n                                    try{\n                                        component._onParamsChange(_this.$template.find('[data-app-component-id=' + component._id + '] > .app-component-content'));\n                                    }\n                                    catch(e){\n                                        console.log(\"Error execution _onParamsChange of compoment(_name=\", component&&component._name, \", _id-\", component&&component._id, \"):\", e)\n                                    }\n                                }\n                            }\n\n                            if (brokenBlocks.length) {\n                                _this.showDialog({\n                                    title: CORE.APP.TR('Broken blocks were found. Remove them?'),\n                                    cancelLabel: CORE.APP.TR('Skip'),\n                                    successLabel: CORE.APP.TR('Remove'),\n                                    success: () => {\n                                        _this.resultJSON[_this.currentPage].components = components.filter(comp => !brokenBlocks.includes(comp._id));\n                                        CORE.APP.runSaveProject();\n                                    },\n                                    cancel: () => {}\n                                });\n                            }\n\n                            if (restrictedBlocks.length) {\n                                _this.resultJSON[_this.currentPage].components = components.filter(comp => !restrictedBlocks.includes(comp._id));\n                                CORE.APP.runSaveProject();\n                            }\n                        }   \n                    }\n                    catch(err){\n                        console.log(err);\n                    }\n\n                   /**\n                    * @event mbrAppCore:rendered\n                    * @param id\n                    */\n                    _this.fire('rendered', id);\n\n                    if(typeof callback === 'function') {\n                        callback();\n                    }\n                }, 50);\n            }\n        },\n        events: {}\n    });\n}(jQuery, mbrAppCore));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1jb21wb25lbnRzLWxvYWQuanM/YjE0NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEMsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0U7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOzs7QUFHYjtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0Isc0JBQXNCLE9BQU87QUFDN0Isc0JBQXNCLE9BQU87QUFDN0Isc0JBQXNCLE9BQU87QUFDN0Isc0JBQXNCLEtBQUs7QUFDM0I7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDLDJCQUEyQixPQUFPO0FBQ2xDLDJCQUEyQixLQUFLO0FBQ2hDO0FBQ0EsK0pBQStKOztBQUUvSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDLDhCQUE4QixPQUFPO0FBQ3JDLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBOEQ7QUFDOUQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLE9BQU87QUFDckMsOEJBQThCLE9BQU8sV0FBVyxPQUFPO0FBQ3ZELDhCQUE4QixPQUFPO0FBQ3JDLDhCQUE4QixRQUFRO0FBQ3RDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0EsaUNBQWlDO0FBQ2pDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6Ii4vd2ViL2FwcC9idWlsZGVyL2pzL2J1aWxkZXItY29tcG9uZW50cy1sb2FkLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlICBtYnJBcHBDb3JlL2NvbXBvbmVudHMtbG9hZFxuICpcbiAqIEBkZXNjcmlwdGlvbiBjb21wb25lbnRzIGxvYWRcbiAqXG4gKlxuICovXG4oZnVuY3Rpb24oJCwgQ09SRSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciByZW5kZXJUaW1lb3V0O1xuICAgIHZhciAkaW5zZXJ0QmVmb3JlID0gJCgnI2luc2VydEJlZm9yZScpO1xuXG5cbiAgICBDT1JFLnJlZ0V4dGVuc2lvbih7XG4gICAgICAgIG5hbWU6ICdjb21wb25lbnRzLWxvYWQnLFxuICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTptYnJBcHBDb3JlL2NvbXBvbmVudHMtbG9hZCAqL1xuICAgICAgICBnbG9iYWw6IHtcbiAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAqIENsZWFyIGFsbCBibG9ja3NcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBjbGVhckJsb2NrczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmNsZWFyQmxvY2tzXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmZpcmUoJ2NsZWFyQmxvY2tzJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kdGVtcGxhdGUuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmNsZWFyZWRCbG9ja3NcbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgnY2xlYXJlZEJsb2NrcycpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogUHJlcGFyZSBDb21wb25lbnQgQmxvY2tzIGZvciBkZXNpZ25lclxuICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29tcG9uZW50IC0gY29tcG9uZW50IHBhcmFtc1xuICAgICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGh0bWwgLSByZXN1bHQgaHRtbFxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHByZXBhcmVDb21wb25lbnQ6IGZ1bmN0aW9uKGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcblxuICAgICAgICAgICAgICAgIC8vIGlmIGNvbXBvbmVudCBub3QgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgaWYoKENPUkUudGhlbWUudHlwZSA9PSAnc2Vjb25kYXJ5JyA/IGZhbHNlIDogdHlwZW9mIENPUkUuY29tcG9uZW50c1tjb21wb25lbnQuX25hbWVdID09PSAndW5kZWZpbmVkJykgfHwgdHlwZW9mIGNvbXBvbmVudC5faWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdnYWJsZSA9ICFjb21wb25lbnQuX25vRHJhZztcbiAgICAgICAgICAgICAgICB2YXIgYWx3YXlzQm90dG9tID0gY29tcG9uZW50Ll9hbHdheXNCb3R0b207XG4gICAgICAgICAgICAgICAgdmFyIGFsd2F5c1RvcCA9IGNvbXBvbmVudC5fYWx3YXlzVG9wO1xuICAgICAgICAgICAgICAgIHZhciBwb3NBYnNvbHV0ZSA9IGNvbXBvbmVudC5fcG9zaXRpb25BYnNvbHV0ZTtcblxuICAgICAgICAgICAgICAgIHZhciB3aXRoUGFyYW1zID0gY29tcG9uZW50Ll9wYXJhbXM7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXNDaGVjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIHdpdGhQYXJhbXMgPT09ICdvYmplY3QnICYmIHdpdGhQYXJhbXMgJiYgT2JqZWN0LmtleXMod2l0aFBhcmFtcykubGVuZ3RoXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhcHAtY29tcG9uZW50JysoZHJhZ2dhYmxlPycnOicgbm8tc29ydGFibGUnKSsocG9zQWJzb2x1dGU/JyBwb3MtYWJzb2x1dGUnOicnKSsnXCIgZGF0YS1hcHAtY29tcG9uZW50LWlkPVwiJytjb21wb25lbnQuX2lkKydcIicrKGFsd2F5c0JvdHRvbT8nIGRhdGEtYXBwLWFsd2F5cy1ib3R0b209XCJ0cnVlXCInOicnKSsoYWx3YXlzVG9wPycgZGF0YS1hcHAtYWx3YXlzLXRvcD1cInRydWVcIic6JycpKyc+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYXBwLWNvbXBvbmVudC1tZW51XCI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImFwcC1jb21wb25lbnQtZWRpdFwiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZT8nPHNwYW4gY2xhc3M9XCJtYnItYnRuIHNvcnRhYmxlIG1ici1pY29uLWFycm93cy12ZXJ0aWNhbFwiIGRhdGEtdG9vbHRpcHN0ZXI9XCJib3R0b21cIiB0aXRsZT1cIkRyYWcgQmxvY2tcIj48L3NwYW4+JzonJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zQ2hlY2soKT8nPHNwYW4gY2xhc3M9XCJtYnItYnRuIGNvbXBvbmVudC1wYXJhbXMgbWJyLWljb24tY29nXCIgZGF0YS10b29sdGlwc3Rlcj1cImJvdHRvbVwiIHRpdGxlPVwiQmxvY2sgUGFyYW1ldGVyc1wiPjwvc3Bhbj4nOicnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJtYnItYnRuIGNvbXBvbmVudC1yZW1vdmUgbWJyLWljb24tdHJhc2hcIiBkYXRhLXRvb2x0aXBzdGVyPVwiYm90dG9tXCIgdGl0bGU9XCJSZW1vdmUgQmxvY2tcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwibWJyLWJ0biBjb21wb25lbnQtc2hvdy1tb3JlIG1ici1pY29uLWhvcml6b250YWwtZWxsaXBzaXNcIiBkYXRhLXRvb2x0aXBzdGVyPVwiYm90dG9tXCIgdGl0bGU9XCJTaG93IE1vcmVcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhcHAtY29tcG9uZW50LWNvbnRlbnRcIj48L2Rpdj4nLFxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICAgICAgICAgIF0uam9pbignJyk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBQcmVwYXJlIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+cHJlcGFyZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb21wb25lbnRTdHJpbmdTa2VsZXRvblxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcigncHJlcGFyZUNvbXBvbmVudCcsIHJlc3VsdCwgY29tcG9uZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgIC8qKlxuICAgICAgICAgICAgKiBQcmVwYXJlIEFsbCBDb21wb25lbnQgQmxvY2tzXG4gICAgICAgICAgICAqIEBwYXJhbSBjb21wb25lbnRzXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJlcGFyZUFsbENvbXBvbmVudHM6IGZ1bmN0aW9uKGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICAvL2ZpbHRlciByZXN0cmljdGVkIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzID0gY29tcG9uZW50cy5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhDT1JFLkFQUC5yZXN0cmljdGVkQWRkb25zKS5sZW5ndGgpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIUNPUkUuQVBQLnJlc3RyaWN0ZWRBZGRvbnNbZWwuYWxpYXNdOyBcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgYWxsIHRvcCBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgZm9yKHZhciBrIGluIGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoY29tcG9uZW50c1trXS5fYWx3YXlzVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5wcmVwYXJlQ29tcG9uZW50KGNvbXBvbmVudHNba10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBhbGwgY29tcG9uZW50cyBpbnN0ZWFkIGJvdHRvbVxuICAgICAgICAgICAgICAgIGZvcih2YXIgayBpbiBjb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFjb21wb25lbnRzW2tdLl9hbHdheXNCb3R0b20gJiYgIWNvbXBvbmVudHNba10uX2Fsd2F5c1RvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMucHJlcGFyZUNvbXBvbmVudChjb21wb25lbnRzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgYWxsIGJvdHRvbSBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgZm9yKHZhciBrIGluIGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoY29tcG9uZW50c1trXS5fYWx3YXlzQm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5wcmVwYXJlQ29tcG9uZW50KGNvbXBvbmVudHNba10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHB1Ymxpc2hBc3NldHM6IFtdLFxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogcHJlcGFyZSBzdHlsZS5jc3MgYW5kIHNjcmlwdC5qcyBvZiBjb21wb25lbnRcbiAgICAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudE5hbWVcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcmVwYXJlQ29tcG9uZW50QXNzZXRzOiBmdW5jdGlvbihjb21wb25lbnROYW1lKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gQ09SRS5jb21wb25lbnRzW2NvbXBvbmVudE5hbWVdO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gKGNvbXBvbmVudC5hbGlhcyA/IENPUkUuQVBQLmdldEFkZG9uRGlyKGNvbXBvbmVudC5hbGlhcykgOiB0aGlzLnRoZW1lLnBhdGhFeHBvcnQgKyAnL2NvbXBvbmVudHMnKSArICcvJyArIGNvbXBvbmVudE5hbWU7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGhDb3JlID0gY29tcG9uZW50LmFsaWFzPyBwYXRoOiB0aGlzLnRoZW1lLnBhdGhDb3JlICsgJy9jb21wb25lbnRzLycgKyBjb21wb25lbnROYW1lXG5cbiAgICAgICAgICAgICAgICAvLyBzdHlsZS5jc3NcbiAgICAgICAgICAgICAgICBpZihjb21wb25lbnQuX2Nzcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdG8gbGlzdCBvZiBhc3NldHNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoQXNzZXRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBwYXRoICsgJy9zdHlsZS5jc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdDogJ2Fzc2V0cy9tb2JpcmlzZS9jc3Mvc3R5bGUuY3NzJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbGluayB0byBoZWFkXG4gICAgICAgICAgICAgICAgICAgIGlmKCEkKCcjQ1NTLScgKyBjb21wb25lbnROYW1lKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnNlcnRCZWZvcmUuYmVmb3JlKCc8bGluayBpZD1cIkNTUy0nICsgY29tcG9uZW50TmFtZSArICdcIiByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIicgKyBwYXRoQ29yZSArICcvc3R5bGUuY3NzXCI+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBzY3JpcHQuanNcbiAgICAgICAgICAgICAgICBpZihjb21wb25lbnQuX2pzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0byBsaXN0IG9mIGFzc2V0c1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hBc3NldHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM6IHBhdGggKyAnL3NjcmlwdC5qcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0OiAnYXNzZXRzL21vYmlyaXNlL2pzL3NjcmlwdC5qcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGxpbmsgdG8gaGVhZFxuICAgICAgICAgICAgICAgICAgICBpZighJCgnI0pTLScgKyBjb21wb25lbnROYW1lKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnNlcnRCZWZvcmUuYmVmb3JlKCc8c2NyaXB0IGlkPVwiSlMtJyArIGNvbXBvbmVudE5hbWUgKyAnXCIgc3JjPVwiJyArIHBhdGhDb3JlICsgJy9zY3JpcHQuanNcIj4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cblxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogTG9hZCBDb21wb25lbnRzIGFuZCBhcHBlbmQgdG8gcHJlcGFyZWQgQmxvY2tzXG4gICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnQgLSBjb21wb25lbnQgcGFyYW1zXG4gICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBjb250ZXh0IC0gY29udGV4dCB0byBpbnNlcnRcbiAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhZ2VKU09OXG4gICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYWdlIC0gcGFnZSBuYW1lXG4gICAgICAgICAgICAqIEBwYXJhbSB7Ym9vbH0gcHVibGlzaCAtIHJlcXVlc3QgZm9yIGlzIHB1Ymxpc2hcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICBsb2FkRWFjaENvbXBvbmVudDogZnVuY3Rpb24oY29tcG9uZW50LCBjb250ZXh0LCBwYWdlSlNPTiwgcGFnZSwgcHVibGlzaCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBjb21wb25lbnQuX25hbWU7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgICAgIGlmKENPUkUuaXNTZWNvbmRhcnlDb21wb25lbnQoY29tcG9uZW50KSAmJiBjb21wb25lbnQuX2NpZCAmJiAhY29tcG9uZW50Ll9jdXN0b21IVE1MKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3I6IGNvbXBvbmVudCAnXCIgKyBuYW1lICsgXCInIGlzIGJyb2tlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHB1Ymxpc2ggJiYgQ09SRS5pc1NlY29uZGFyeUNvbXBvbmVudChjb21wb25lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9ICQuZXh0ZW5kKHRydWUsIHt9LCBjb21wb25lbnQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb21wb25lbnQuX2lkID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOiBjb21wb25lbnQgJ1wiICsgbmFtZSArIFwiJyBpcyBub3QgaW5pdGlhbGl6ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudC5fc291cmNlVGhlbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50Ll9zb3VyY2VUaGVtZSA9IENPUkUudGhlbWUubmFtZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiAoQ09SRS5BUFAuYWNjb3VudE1vZGUuaXNPZmZsaW5lKCkgJiYgIUNPUkUuQVBQLmlzQnVpbGRJbkFkZG9uKGNvbXBvbmVudC5fc291cmNlVGhlbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiRXJyb3I6IGNvbXBvbmVudCAnXCIgKyBuYW1lICsgXCInIGZyb20gXCIgKyBjb21wb25lbnQuX3NvdXJjZVRoZW1lICsgXCIgbmVlZHMgYWNjb3VudCBpbmZvcm1hdGlvbi4gVW5hdmFpbGFibGUgaW4gdGhlIG9mZmxpbmUgbW9kZS5cIik7XG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBMb2FkIGNvbXBvbmVudCB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+bG9hZENvbXBvbmVudFRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlIC0gaHRtbCB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBjb250ZXh0IC0gY29udGV4dCB0byBpbnNlcnRcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2Jvb2x9IHB1Ymxpc2ggLSByZXF1ZXN0IGZvciBpcyBwdWJsaXNoXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlSFRNTCA9IF90aGlzLmFwcGx5RmlsdGVyKCdsb2FkQ29tcG9uZW50VGVtcGxhdGUnLCBDT1JFLkFQUC5jYWNoZWRUZW1wbGF0ZXNbbmFtZV0gfHwgJycsIGNvbXBvbmVudCwgcHVibGlzaCwgY29tcG9uZW50Ll9zdHlsZXMgfHwge30pO1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGVyZSBpcyBjYWNoZWQgdGVtcGxhdGUsIHVzZSBpdFxuICAgICAgICAgICAgICAgIGlmKHRlbXBsYXRlSFRNTCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdW5pcSBhbmNob3JcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGNvbXBvbmVudC5fYW5jaG9yID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlZml4IGZvciB1bmlxdWUgSURcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVmaXggPSBjb21wb25lbnQuX25hbWUucmVwbGFjZSgvXnByb1xcLi9pLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBwcmVmaXgucmVwbGFjZSgvXFwuL2csICdfJykgKyAnLSc7XG5cblx0XHRcdFx0XHRcdGNvbXBvbmVudC5fYW5jaG9yID0gcHJlZml4ICsgX3RoaXMuZ2V0VW5pcUNvbXBOYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpsb2FkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYWdlXG4gICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9IGNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlyZSgnbG9hZENvbXBvbmVudCcsIGNvbXBvbmVudCwgcGFnZSwgY29udGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVuZGVyIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgIHZhciAkc2FuZGJveCA9ICQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW5kZXJlZCA9ICRzYW5kYm94Lmh0bWwodGVtcGxhdGVIVE1MKS5maW5kKCc+IConKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgc29tZSBhZGRpdGlvbmFsIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWQuZmluZCgnW2RhdGEtYXBwLWVkaXQ9XCJjb250ZW50XCJdLCBbZGF0YS1hcHAtZWRpdD1cImZ1bGxcIl0sIFtkYXRhLWFwcC1lZGl0PVwiYnV0dG9uc1wiXSwgW2RhdGEtYXBwLWVkaXQ9XCJtZW51XCJdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignbWJyLWNvbnRlbnQtZWRpdCcsICQodGhpcykuYXR0cignbWJyLWh0bWwnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZGl0aW9uYWwgbWV0aG9kIGZvciBwdWJsaXNoIGNoZWNraW5nXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fY2hlY2tQdWJsaXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHVibGlzaDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlciBmb3IgYWRkaW5nIHRvIGJsb2NrXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBfY29tcG9uZW50ID0galF1ZXJ5LmV4dGVuZCh0cnVlLCB7fSwgY29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgLy9fdGhpcy5yZXBsYWNlU3lzdGVtVmFyaWFibGVzKGNvbXBvbmVudCwgY29tcG9uZW50KTtcblxuICAgICAgICAgICAgICAgICAgICByaXZldHMuYmluZChyZW5kZXJlZCwgY29tcG9uZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbmQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9Jytjb21wb25lbnQuX2lkKyddJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCc+IC5hcHAtY29tcG9uZW50LWNvbnRlbnQnKS5odG1sKHJlbmRlcmVkKTtcblxuICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmxvYWRlZENvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFnZSAgLS0ge1N0cmluZ30gcHVibGlzaCBiZWZvcmUgMy4wNi40XG4gICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9IGNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3B1Ymxpc2h9IGJvb2xlYW4gLS0gc2luY2UgMy4wNi40XG4gICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpcmUoJ2xvYWRlZENvbXBvbmVudCcsIGNvbXBvbmVudCwgcGFnZSwgY29udGV4dCwgcHVibGlzaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSBwdWJsaXNoIGZpbHRlclxuICAgICAgICAgICAgICAgICAgICBpZihwdWJsaXNoICYmIGNvbXBvbmVudC5fcHVibGlzaEZpbHRlcikge1xuXHRcdFx0XHRcdFx0dHJ5e1xuXHRcdFx0XHRcdFx0XHRjb21wb25lbnQuX3B1Ymxpc2hGaWx0ZXIoY29udGV4dC5maW5kKCdbZGF0YS1hcHAtY29tcG9uZW50LWlkPScgKyBjb21wb25lbnQuX2lkICsgJ10gPiAuYXBwLWNvbXBvbmVudC1jb250ZW50JyksIHBhZ2VKU09OKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNhdGNoKGUpe1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3Igb2YgX3B1Ymxpc2hGaWx0ZXIgb2YgY29tcG9uZW50KFwiICsgY29tcG9uZW50Ll9pZCArIFwiKSBvbiB0aGUgcGFnZShcIiArIHBhZ2UgKyBcIik6XCIsIGUpO1xuXHRcdFx0XHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogUmVuZGVyIENvbXBvbmVudCBCbG9ja3NcbiAgICAgICAgICAgICogQHBhcmFtIGlkIC0gY29tcG9uZW50IGlkLCBpZiB1bmRlZmluZWQgdGhlbiByZW5kZXIgYWxsIGNvbXBvbmVudHNcbiAgICAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyZW5kZXJUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICByZW5kZXJUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnJlbmRlclxuICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5maXJlKCdyZW5kZXInLCBpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlciB0aGUgc3BlY2lmaWVkIGNvbXBvbmVudCBieSBJRFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBfdGhpcy5nZXRDb21wb25lbnQoaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZCBlYWNoIGNvbXBvbmVudCBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZEVhY2hDb21wb25lbnQoY29tcG9uZW50LCBfdGhpcy4kdGVtcGxhdGUsIF90aGlzLnJlc3VsdEpTT05bX3RoaXMuY3VycmVudFBhZ2VdLCBfdGhpcy5jdXJyZW50UGFnZSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSBfb25QYXJhbXNDaGFuZ2Ugd2l0aG91dCBhbnkgdmFyIG5hbWVzIGFuZCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgY29tcG9uZW50Ll9vblBhcmFtc0NoYW5nZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50Ll9vblBhcmFtc0NoYW5nZShfdGhpcy4kdGVtcGxhdGUuZmluZCgnW2RhdGEtYXBwLWNvbXBvbmVudC1pZD0nICsgaWQgKyAnXSA+IC5hcHAtY29tcG9uZW50LWNvbnRlbnQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGV4ZWN1dGlvbiBfb25QYXJhbXNDaGFuZ2Ugb2YgY29tcG9tZW50KF9uYW1lPVwiLCBjb21wb25lbnQmJmNvbXBvbmVudC5fbmFtZSwgXCIsIF9pZC1cIiwgY29tcG9uZW50JiZjb21wb25lbnQuX2lkLCBcIik6XCIsIGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlciBhbGwgY29tcG9uZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xlYXJCbG9ja3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50cyA9IF90aGlzLnJlc3VsdEpTT05bX3RoaXMuY3VycmVudFBhZ2VdLmNvbXBvbmVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXBhcmVkSHRtbCA9IF90aGlzLnByZXBhcmVBbGxDb21wb25lbnRzKGNvbXBvbmVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBicm9rZW5CbG9ja3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdHJpY3RlZEJsb2NrcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIGFsbCBibG9ja3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kdGVtcGxhdGUuYXBwZW5kKHByZXBhcmVkSHRtbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2FkIGVhY2ggY29tcG9uZW50IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGsgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gY29tcG9uZW50c1trXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjb21wb25lbnQuX2lkID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmb3IgYnJva2VuIGJsb2Nrc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihDT1JFLmlzU2Vjb25kYXJ5Q29tcG9uZW50KGNvbXBvbmVudCkgJiYgY29tcG9uZW50Ll9jaWQgJiYgIWNvbXBvbmVudC5fY3VzdG9tSFRNTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjogY29tcG9uZW50ICdcIiArIGNvbXBvbmVudC5fbmFtZSArIFwiJyBpcyBicm9rZW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm9rZW5CbG9ja3MucHVzaChjb21wb25lbnQuX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmb3IgcmVzdHJpY3RlZCBibG9ja3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29tcG9uZW50LmFsaWFzICYmIENPUkUuQVBQLnJlc3RyaWN0ZWRBZGRvbnNbY29tcG9uZW50LmFsaWFzXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjogY29tcG9uZW50ICdcIiArIGNvbXBvbmVudC5fbmFtZSArIFwiJyBpcyByZXN0cmljdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3RlZEJsb2Nrcy5wdXNoKGNvbXBvbmVudC5faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZEVhY2hDb21wb25lbnQoY29tcG9uZW50LCBfdGhpcy4kdGVtcGxhdGUsIF90aGlzLnJlc3VsdEpTT05bX3RoaXMuY3VycmVudFBhZ2VdLCBfdGhpcy5jdXJyZW50UGFnZSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgX29uUGFyYW1zQ2hhbmdlIHdpdGhvdXQgYW55IHZhciBuYW1lcyBhbmQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjb21wb25lbnQuX29uUGFyYW1zQ2hhbmdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fb25QYXJhbXNDaGFuZ2UoX3RoaXMuJHRlbXBsYXRlLmZpbmQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9JyArIGNvbXBvbmVudC5faWQgKyAnXSA+IC5hcHAtY29tcG9uZW50LWNvbnRlbnQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGV4ZWN1dGlvbiBfb25QYXJhbXNDaGFuZ2Ugb2YgY29tcG9tZW50KF9uYW1lPVwiLCBjb21wb25lbnQmJmNvbXBvbmVudC5fbmFtZSwgXCIsIF9pZC1cIiwgY29tcG9uZW50JiZjb21wb25lbnQuX2lkLCBcIik6XCIsIGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnJva2VuQmxvY2tzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zaG93RGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBDT1JFLkFQUC5UUignQnJva2VuIGJsb2NrcyB3ZXJlIGZvdW5kLiBSZW1vdmUgdGhlbT8nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbExhYmVsOiBDT1JFLkFQUC5UUignU2tpcCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xhYmVsOiBDT1JFLkFQUC5UUignUmVtb3ZlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzdWx0SlNPTltfdGhpcy5jdXJyZW50UGFnZV0uY29tcG9uZW50cyA9IGNvbXBvbmVudHMuZmlsdGVyKGNvbXAgPT4gIWJyb2tlbkJsb2Nrcy5pbmNsdWRlcyhjb21wLl9pZCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPUkUuQVBQLnJ1blNhdmVQcm9qZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsOiAoKSA9PiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdHJpY3RlZEJsb2Nrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzdWx0SlNPTltfdGhpcy5jdXJyZW50UGFnZV0uY29tcG9uZW50cyA9IGNvbXBvbmVudHMuZmlsdGVyKGNvbXAgPT4gIXJlc3RyaWN0ZWRCbG9ja3MuaW5jbHVkZXMoY29tcC5faWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5BUFAucnVuU2F2ZVByb2plY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZXJyKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnJlbmRlcmVkXG4gICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpcmUoJ3JlbmRlcmVkJywgaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiB7fVxuICAgIH0pO1xufShqUXVlcnksIG1ickFwcENvcmUpKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-components-load.js\n")},"./web/app/builder/js/builder-components.js":
/*!**************************************************!*\
  !*** ./web/app/builder/js/builder-components.js ***!
  \**************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module  mbrAppCore/components\n *\n * @description components\n *\n * @listens module:mbrAppCore/plugins/sortable~mbrAppCore:changeComponentPosition\n * @listens module:mbrAppCore/components-load~mbrAppCore:rendered\n *\n * @ADDON_DIR@\n * @USER_EMAIL@\n */\n(function($, CORE) {\n    'use strict';\n\n    var $addStyles = $('<style name=\"theme-styles\">').appendTo('body');\n\n    CORE.regExtension({\n        name: 'components',\n        /** @lends module:mbrAppCore/components */\n        global: {\n            /**\n             * replace variables in string like @USER_EMAIL@, @ADDON_DIR@\n             * @param {String} str\n             * @param component\n             * @return {String}\n             */\n            replaceSystemVariables: function(str, component) {\n                var _this = this;\n\n                if (typeof str === 'string') {\n                    if (/@USER_EMAIL@/g.test(str)) {\n                        var user_email = (function() {\n                            var userInfo = _this.APP.getUserInfo();\n                            if (userInfo && userInfo.email) {\n                                return userInfo.email;\n                            }\n                            return '';\n                        }());\n                        str = str.replace(/@USER_EMAIL@/g, user_email);\n                    }\n                    //\n                    if (/@ADDON_DIR@/g.test(str)) {\n                        // alias\n                        str = str.replace(/@ADDON_DIR@/g,\n                            _this.APP.path2core(_this.APP.getAddonDir(component.alias || _this.APP.theme.name)) + (component.alias ? '/' : '/components/')\n                        );\n                    }\n                    if (/@SITES@/g.test(str)) {\n                        // replace @SITES@/id with project resource url\n                        str = str.replace(new RegExp(`${CORE.APP.projectSettings.path}/`,'g'), CORE.APP.projectSettings.resourcesUrl);\n                    }\n                    /**\n                     * Replace System Variables like @USER_EMAIL@, @ADDON_DIR@\n                     * @filter mbrAppCore->replaceSystemVariables\n                     * @param {String} str\n                     * @param {Object} component\n                     */\n                    str = _this.applyFilter('replaceSystemVariables', str, component);\n                } else if (typeof str === 'object') {\n                    for (var k in str) {\n                        str[k] = _this.replaceSystemVariables(str[k], component);\n                    }\n                }\n\n                return str;\n            },\n\n\n            /**\n             * Add Component (without waiting for component to download)\n             * Note: component must be real\n             * @param {String} name\n             * @param {Object} insertTo\n             *        @param {String} insertTo.item - id of semi-detached element\n             *        @param {String} insertTo.where - \"before\"\n             * @param {jQueryNode} domSource (since 3.7.1+)\n             */\n            addComponent: function(name, insertTo, domSource) {\n                var def = $.Deferred();\n\n                var newComponent = $.extend(true, {}, this.components[name]);\n                if (!insertTo || !insertTo.item || !insertTo.where) {\n                    insertTo = false;\n                }\n\n                // check if component isset\n                var issetComponent = 0;\n                for (var k in this.APP.components) {\n                    if (k === name) {\n                        issetComponent = 1;\n                        break;\n                    }\n                }\n                if (!issetComponent && !CORE.APP.theme.type == 'secondary') {\n                    return;\n                }\n\n                // replace system variables\n                newComponent = this.replaceSystemVariables(newComponent, newComponent);\n\n                // check _once parameter and stop if this block added\n                if (newComponent._once) {\n                    for (var k in this.resultJSON[this.currentPage].components) {\n                        if (this.resultJSON[this.currentPage].components[k]._name == name) {\n                            return;\n                        }\n                    }\n                }\n\n                /**\n                 * @event mbrAppCore:addComponent\n                 * @param {String} name\n                 */\n                this.fire('addComponent', name);\n\n                // copy from same global component if exist\n                var globalCopied;\n                if (newComponent._global) {\n                    for (var k in this.resultJSON) {\n                        for (var n in this.resultJSON[k].components) {\n                            if (this.resultJSON[k].components[n]._global && this.resultJSON[k].components[n]._name == name) {\n                                for (var s in this.resultJSON[k].components[n]) {\n                                    // if(!/^_/g.test(s)) {\n                                    newComponent[s] = this.resultJSON[k].components[n][s];\n                                    // }\n                                }\n                                // newComponent = $.extend(true, {}, this.resultJSON[k].components[n]);\n                                globalCopied = true;\n                                continue;\n                            }\n                        }\n                    }\n                }\n\n                // add default params for new component\n                if (!globalCopied && newComponent._params) {\n                    for (var k in newComponent._params) {\n                        newComponent._params[k] = newComponent._params[k].default;\n                    }\n                }\n\n                // insert to\n                var spliceNum = this.resultJSON[this.currentPage].components.length;\n                if (insertTo) {\n                    for (var k in this.resultJSON[this.currentPage].components) {\n                        if (this.resultJSON[this.currentPage].components[k]._id == insertTo.item) {\n                            if (insertTo.where == 'before') {\n                                spliceNum = k;\n                            } else {\n                                spliceNum = parseFloat(k) + 1;\n                            }\n                        }\n                    }\n                }\n\n                /**\n                 * Add component\n                 * @filter mbrAppCore->addComponent\n                 * @param {Object} component\n                 * @param {Boolean} globalCopied (since 3.7.1+)\n                 * @param {jQueryNode} domSource (since 3.7.1+)\n                 */\n                var id = this.uniqNum();\n                var filteredComponent = CORE.applyFilter('addComponent', $.extend(true, newComponent, { _name: name, _id: id }), globalCopied, domSource);\n\n                if (filteredComponent && typeof filteredComponent.then === 'function') {\n                    filteredComponent.then(\n                        function(resultComponent) {\n                            CORE.resultJSON[CORE.currentPage].components.splice(spliceNum, 0, resultComponent);\n                            renderComponent();\n                        },\n                        function(error) {\n                            CORE.render(undefined);\n                            def.reject();\n                        }\n                    );\n                } else {\n                    CORE.resultJSON[CORE.currentPage].components.splice(spliceNum, 0, filteredComponent);\n                    renderComponent();\n                };\n\n                function renderComponent() {\n                    // prepare component html\n                    var component = CORE.resultJSON[CORE.currentPage].components[spliceNum];\n                    var preparedHtml = CORE.prepareComponent(component);\n\n                    var scrollTop = 0;\n\n                    // insert new item to drag place\n                    if (\n                        insertTo &&\n                        !component._alwaysBottom &&\n                        !component._alwaysTop\n                    ) {\n                        var insertItem = CORE.$template.find('[data-app-component-id=' + insertTo.item + ']');\n                        if (insertTo.where == 'before' || insertItem.attr('data-app-always-bottom')) {\n                            insertItem.before(preparedHtml);\n                            scrollTop = insertItem.offset().top;\n                        } else {\n                            insertItem.after(preparedHtml);\n                            scrollTop = insertItem.offset().top + insertItem.height();\n                        }\n                    }\n\n                    // insert to top\n                    else if (component._alwaysTop) {\n                        CORE.$template.prepend(preparedHtml);\n\n                        // scroll to component\n                        scrollTop = 0;\n                    }\n\n                    // insert to bottom\n                    else {\n                        var bottomComponent = CORE.$template.find('[data-app-always-bottom]:eq(0)');\n                        if (bottomComponent.length) {\n                            bottomComponent.before(preparedHtml);\n                        } else {\n                            CORE.$template.append(preparedHtml);\n                        }\n\n                        // scroll to component\n                        scrollTop = CORE.$template.height();\n                    }\n\n                    // scroll to element\n                    $('html').stop().animate({ scrollTop: scrollTop }, 1000);\n\n                    CORE.render(id);\n\n                    /**\n                     * @event mbrAppCore:addedComponent\n                     * @param id\n                     */\n                    CORE.fire('addedComponent', id);\n\n                    def.resolve();\n                };\n\n                return def.promise();\n\n            },\n\n            /**\n             * Return all variables of component by ID\n             * @param {String} id - component id (._id)\n             * @param {String} page - page name, currentPage by default\n             * @param {Bool} clone - return cloned instance of component object (without _id, _group), else return original PAGE.components[k]\n             * @return {Object} - component params object or false\n             */\n            getComponent: function(id, page, clone) {\n                page = page || this.currentPage;\n                for (var k in this.resultJSON[page].components) {\n                    if (this.resultJSON[page].components[k]._id == id) {\n                        var result = '';\n                        if (clone) {\n                            result = $.extend(true, {}, this.resultJSON[page].components[k]);\n                            delete result._id;\n                            delete result._group;\n                        } else {\n                            result = this.resultJSON[page].components[k];\n                        }\n                        /**\n                         * Get component\n                         * @filter mbrAppCore->getComponent\n                         * @param {Object} result - component params object or false\n                         * @param {String} id - component id (._id)\n                         * @param {String} page - page name\n                         * @param {Bool} clone\n                         */\n                        return this.applyFilter('getComponent', result, id, page, clone);\n                    }\n                }\n\n                return this.applyFilter('getComponent', false, id, page, clone);\n            },\n\n            /**\n             * Return next component by ID\n             * @param {String} id - component id (._id)\n             * @param {String} page\n             * @return {Object}\n             */\n            getNextComponent: function(id, page) {\n                page = page || this.currentPage;\n                var getNext;\n                for (var k in this.resultJSON[page].components) {\n                    if (getNext) {\n                        /**\n                         * Get next component\n                         * @filter mbrAppCore->getNextComponent\n                         * @param {Object} result - component params object or false\n                         * @param {String} componentId\n                         * @param {String} page - page name\n                         */\n                        return this.applyFilter('getNextComponent', this.resultJSON[page].components[k], id, page);\n                    }\n                    if (this.resultJSON[page].components[k]._id == id) {\n                        getNext = true;\n                    }\n                }\n                return this.applyFilter('getNextComponent', false, id, page);\n            },\n\n            /**\n             * Return previous component by ID\n             * @param id\n             * @param page\n             * @return {Object}\n             */\n            getPrevComponent: function(id, page) {\n                page = page || this.currentPage;\n                var getPrevious = false;\n                for (var k in this.resultJSON[page].components) {\n                    if (this.resultJSON[page].components[k]._id == id) {\n                        /**\n                         * Get previous component\n                         * @filter mbrAppCore->getPrevComponent\n                         * @param result component\n                         * @param componentId\n                         * @param page\n                         */\n                        return this.applyFilter('getPrevComponent', getPrevious, id, page);\n                    }\n                    getPrevious = this.resultJSON[page].components[k];\n                }\n                return this.applyFilter('getPrevComponent', false, id, page);\n            },\n\n            /**\n             * Remove Component by ID\n             * @param id\n             * @param page\n             * @param {Boolean} globalComp - if global, removing the component on all pages (since 4.10.5)\n             * @return {Boolean}\n             */\n            removeComponent: function(id, page, globalComp) {\n                page = page || this.currentPage;\n\n                for (var k in this.resultJSON[page].components) {\n                    if (this.resultJSON[page].components[k]._id == id) {\n                        var prevComponent = this.getPrevComponent(id, page);\n                        var nextComponent = this.getNextComponent(id, page);\n                        var _name = this.resultJSON[page].components[k]._name;\n\n                        // component dom\n                        var component = this.$template.find('[data-app-component-id=' + id + ']');\n\n                        /**\n                         * fire remove event\n                         * @event mbrAppCore:removeComponent\n                         * @param id\n                         * @param component\n                         * @param page\n                         */\n                        this.fire('removeComponent', id, component, page);\n\n                        // remove component from project\n                        this.resultJSON[page].components.splice(k, 1);\n\n                        // remove component\n                        if (page === this.currentPage) {\n                            component.remove();\n\n                            this.renderComponentsStyles();\n                        }\n\n                        /**\n                         * @event mbrAppCore:removedComponent\n                         * @param id\n                         * @param {Object} prevComponent (since 3.01)\n                         * @param {Object} nextComponent (since 3.01)\n                         * @param page\n                         */\n\n                        this.fire('removedComponent', id, prevComponent, nextComponent, page);\n\n                        // If component - global and need remove on all pages his (since 4.10.5)\n                        if (globalComp) {\n                            for (let k in this.resultJSON) {\n                                let page = this.resultJSON[k];\n\n                                page.components.forEach(function(v, i, arr) {\n                                    if (v._name === _name) {\n                                        arr.splice(i, 1);\n                                    }\n                                })\n                            }\n                        }\n\n                        return true;\n                    }\n                }\n                return false;\n            },\n\n            /**\n             * Change Component Position (when drag)\n             * @param id\n             * @param prevId\n             * @param oldPrevId\n             */\n            changeComponentPosition: function(id, prevId, oldPrevId) {\n                (function(items) {\n                    var element;\n                    for (var k in items) {\n                        if (items[k]._id == id) {\n                            element = items[k];\n                            items.splice(parseInt(k), 1);\n                            break;\n                        }\n                    }\n\n                    if (undefined === prevId) items.splice(0, 0, element);\n                    else {\n                        for (var k in items) {\n                            if (items[k]._id == prevId) {\n                                items.splice(parseInt(k) + 1, 0, element);\n                                break;\n                            }\n                        }\n                    }\n                })(this.resultJSON[this.currentPage].components);\n\n                /**\n                 * drag component event\n                 * @event mbrAppCore:changedComponentPosition\n                 * @param id\n                 * @param oldId\n                 */\n                this.fire('changedComponentPosition', id, oldPrevId);\n            },\n\n            /**\n             * Add Component Additional Styles\n             * @param {jQuery} $item\n             * @param {String} prop\n             * @param value\n             * @param googleLink\n             */\n            addComponentStyles: function($item, prop, value, googleLink) {\n                var _this = this,\n                    styles = {},\n                    id = $item.parents('[data-app-component-id]:eq(0)').attr('data-app-component-id'),\n                    component = _this.getComponent(id);\n                styles[prop] = value;\n\n                /**\n                 * Prevent component styles save\n                 * @filter mbrAppCore->preventComponentStylesSave\n                 * @param {Bool}\n                 * @param component\n                 * @param {jQuery} changed_item\n                 * @param property\n                 * @param value\n                 * @param googleLink\n                 */\n                if (!component || _this.applyFilter('preventComponentStylesSave', false, component, $item, prop, value, googleLink)) {\n                    return;\n                }\n\n                var selector = $item.attr('data-app-selector') ||\n                    ($item.hasClass('btn') ? '.btn' : '') ||\n                    $item.prop('tagName');\n\n                if (typeof component._onStylesChange === 'function' && !component._onStylesChange($item, prop, value, selector)) {\n                    return;\n                }\n\n                $item.parents('[data-app-selector]').each(function() {\n                    selector = $(this).attr('data-app-selector') + ' ' + selector;\n                });\n\n                if (typeof component._styles === 'undefined') {\n                    component._styles = {};\n                }\n                if (typeof component._styles[selector] === 'undefined') {\n                    component._styles[selector] = {};\n                }\n\n                $.extend(component._styles[selector], styles);\n\n                if (googleLink) {\n                    component._styles[selector].googleLink = googleLink;\n                }\n\n                /**\n                 * Add component styles\n                 * @filter mbrAppCore->addComponentStyles\n                 * @param styles\n                 * @param component\n                 * @param {jQuery} changed_item\n                 * @param property\n                 * @param value\n                 * @param googleLink\n                 */\n                component._styles = _this.applyFilter('addComponentStyles', component._styles, component, $item, prop, value, googleLink);\n\n                // change global params if exist\n                _this.updateGlobalComponents(id, function(current, global) {\n                    global._styles = current._styles;\n                });\n\n                _this.renderComponentsStyles();\n            },\n\n            /**\n             * get component styles\n             * @param ID\n             * @param deploy\n             * @return {Object}\n             */\n            getComponentStyles: (function() {\n\n                var compile = (function() {\n\n                    function CSS(styles) {\n                        this._rules = '';\n                        this._googleLinks = '';\n                        if (styles) {\n                            this._compile(styles, 0);\n                        }\n                    }\n\n                    CSS.prototype._compile = function(styles, level) {\n                        var spaces = '';\n                        for (var i = 0; i < level; i++) {\n                            spaces += '  ';\n                        }\n                        for (var selector in styles) {\n                            var value = styles[selector];\n                            if (typeof value == 'object') {\n                                this._rules += spaces + selector + ' {\\n';\n                                this._compile(value, level + 1);\n                                this._rules += spaces + '}\\n';\n                            } else if (selector === 'googleLink') {\n                                this._googleLinks += '@import url(' + value + ');\\n';\n                            } else {\n                                this._rules += spaces + selector + ': ' + value + ';\\n';\n                            }\n                        }\n                    };\n\n                    CSS.prototype.getRules = function() {\n                        return this._rules;\n                    };\n\n                    CSS.prototype.getGoogleLinks = function() {\n                        return this._googleLinks;\n                    };\n\n                    return function(styles) {\n                        return new CSS(styles);\n                    };\n\n                })();\n\n                return function(ID, deploy) {\n                    var component = ID;\n                    if (typeof ID === 'number') {\n                        component = this.getComponent(ID);\n                    }\n\n                    var css = compile(component._styles);\n\n                    /**\n                     * Get component styles\n                     * @filter mbrAppCore->getComponentStyles\n                     * @param {Object} styles\n                     * @param component\n                     * @param deploy\n                     */\n                    return this.applyFilter('getComponentStyles', {\n                        css: css.getRules(),\n                        google: deploy ? css.getGoogleLinks() : ''\n                    }, component, deploy);\n                };\n\n            })(),\n\n            /**\n             * render additional component styles\n             * @param deploy when true only return result, else add result in page styles\n             * @param page render current page styles, else render from this.currentPage\n             * @param component\n             * @return {Object}\n             */\n            renderComponentsStyles: function(deploy, page, component) {\n                var result = '';\n                var googleLinks = '';\n                page = page || this.currentPage;\n                var components = this.resultJSON[page].components;\n                deploy = deploy || false;\n\n                if (component && this.isSecondaryComponent(component) && !deploy) {\n                    var def = $.Deferred();\n                    var selector = this.applyFilter('componentSelector', '#' + component._anchor, component);\n                    var curStyles = this.getComponentStyles(component, deploy);\n\n                    // less compile\n                    less.render(\n                        /**\n                         * @filter mbrAppCore->beforeRenderStylesForComponent\n                         * @param styles\n                         * @param component\n                         */\n                        this.applyFilter('beforeRenderStylesForComponent', selector + ' {\\n' + curStyles.css + '}\\n', component),\n                        function(err, css) {\n                            if (err) {\n                                def.reject(err);\n                                console.log('Error while page (' + page + ') less render:', err);\n                            }\n                            else {\n                                def.resolve(css);\n                                $('[data-app-component-id=\"' + component._id + '\"] > style').html(css.css);\n                            }\n                        }\n                    );\n\n                    return def.promise();\n                }\n\n                for (var k in components) {\n                    if (this.isSecondaryComponent(components[k]) && components[k]._cid && !components[k]._customHTML) {\n                        console.log((components[k]._name || 'The Block') + ' is broken. Skip style rendering');\n                        continue;\n                    }\n                    /**\n                     * @filter mbrAppCore->componentSelector\n                     * @param selector\n                     * @param component\n                     */\n                    var selector = this.applyFilter('componentSelector', '#' + components[k]._anchor, components[k]);\n                    var curStyles = this.getComponentStyles(components[k], deploy);\n                    if (deploy || !this.isSecondaryComponent(components[k])) {\n                        result += '\\n' + selector + ' {\\n' + curStyles.css + '}\\n';\n                        googleLinks += curStyles.google;\n                        continue;\n                    }\n\n                    var $component = $('[data-app-component-id=\"' + components[k]._id + '\"]');\n                    if (!$component.find('> style').length) $component.append('<style/>');\n\n                    // less compile\n                    less.render(\n                        /**\n                         * @filter mbrAppCore->beforeRenderStylesForComponent\n                         * @param styles\n                         * @param component\n                         */\n                        this.applyFilter('beforeRenderStylesForComponent', selector + ' {\\n' + curStyles.css + '}\\n', components[k]),\n                        function(err, css) {\n                            if (err) {\n                                _this.APP.showError(('The following error occured while creating the ' + page + ' page:<br>Less render in the ' + components[k]._name + ' block: ' + err.message));\n                                $component.find('> style').html('');\n                            } else {\n                                $component.find('> style').html(css.css);\n                            }\n                        }\n                    );\n                }\n\n                /**\n                 * @filter mbrAppCore->beforeRenderStyles\n                 * @param result\n                 * @param components\n                 * @param deploy\n                 * @param page\n                 * @param googleLinks\n                 */\n                result = this.applyFilter('beforeRenderStyles', result, components, deploy, page, googleLinks);\n                \n                // less compile\n                less.render(result, function(err, css) {\n                    if (err) console.log('Error while page (' + page + ') less render:', err);\n                    else {\n                        result = css.css;\n                    }\n                });\n\n\n                if (deploy) {\n                    result = googleLinks + result;\n                    /**\n                     * @filter mbrAppCore->afterRenderStyles\n                     * @param result\n                     * @param components\n                     * @param deploy\n                     * @param page\n                     * @param googleLinks\n                     */\n                    return this.applyFilter('afterRenderStyles', result, components, deploy, page, googleLinks);\n                }\n\n                $addStyles.html(this.applyFilter('afterRenderStyles', result, components, deploy, page, googleLinks));\n            },\n\n            /**\n             * Focus Component Block\n             * @param {String} id - if ==\"x\" then unfocused all\n             */\n            focusComponentBlock: function(id) {\n                var $component = $('[data-app-component-id=\"' + id + '\"]');\n                if ($component.hasClass('focused')) // prevent double focus\n                    return;\n\n                /**\n                 * @event mbrAppCore:blurComponent\n                 * @param {String} id - component id\n                 */\n                var focused = $('[data-app-component-id].focused');\n                if (focused.length)\n                    CORE.fire('blurComponent', focused.attr('data-app-component-id'));\n\n                // unfocus all\n                $('[data-app-component-id]').removeClass('focused');\n\n                // focus one\n                if (id !== 'x') {\n                    $component.addClass('focused');\n                }\n\n                // if unfocus all manually\n                else {\n                    CORE.$body.find('.note-popover > *').attr('style', 'display: none;');\n                    CORE.$body.find('.sp-container').addClass('sp-hidden');\n                    CORE.$body.find('.sp-replacer').css('visibility', 'hidden');\n                }\n\n                /**\n                 * @event mbrAppCore:focusComponent\n                 * @param {String} id - if ==false then unfocused all\n                 */\n                CORE.fire('focusedComponent', id != 'x' && id);\n            },\n\n            /**\n             * Return ID of focused component\n             * @return {String} componentId\n             */\n            getFocusedComponentBlockId: function() {\n                return $('[data-app-component-id].focused').attr('data-app-component-id');\n            },\n\n            /**\n             * Get xomponent Block by Id\n             * @param  {String} id component id\n             * @return {DomNode}\n             */\n            getComponentBlock: function(id) {\n                return $('[data-app-component-id=\"' + id + '\"]').get(0);\n            },\n\n            // Convert params from array to object (array used in beta version 1)\n            // FROM:\n            //   {\n            //     logo: ['switch', 'Logo', true]\n            //   }\n            // TO:\n            //   {\n            //     logo: {\n            //       type: 'switch',\n            //       title: 'Logo',\n            //       default: true\n            //     }\n            //   }\n\n            /**\n             * Focus Component Block\n             * @param params\n             * @return {Object}\n             */\n            convertComponentParams: function(params) {\n                params = $.extend(true, {}, params);\n                var result = {};\n\n                for (var k in params) {\n                    // if array - prepare object\n                    if ($.isArray(params[k])) {\n                        result[k] = {};\n\n                        if (typeof params[k][0] !== 'undefined') {\n                            result[k].type = params[k][0];\n                        }\n                        if (typeof params[k][1] !== 'undefined') {\n                            result[k].title = params[k][1];\n                        }\n                        if (typeof params[k][2] !== 'undefined') {\n                            result[k].default = params[k][2];\n                        }\n                        if (typeof params[k][3] !== 'undefined') {\n                            result[k].values = params[k][3];\n                        }\n                    } else {\n                        result[k] = params[k];\n                    }\n                }\n\n                return result;\n            },\n\n            /**\n             * Return current component params\n             * @param id\n             * @param real\n             * @return {Object}\n             */\n            getComponentParams: function(id, real) {\n                var component = this.getComponent(id, false, !real);\n                var defaultParams = this.convertComponentParams((CORE.theme.type == 'secondary' && CORE.isSecondaryComponent(component)) ? component._params : this.components[component._name]._params);\n                /**\n                 * @filter mbrAppCore->getComponentParams\n                 * @param {Object}  params\n                 * @param {Object}  params.current - component params\n                 * @param {Object}  params.default - default Params\n                 * @param id - component ID\n                 */\n                return this.applyFilter('getComponentParams', {\n                    // current: real?component._params:$.extend(true, {}, component._params );\n                    current: component._params,\n                    'default': defaultParams\n                }, id);\n            },\n\n            /**\n             * Change component param\n             * @param id component ID\n             * @param {String} name param name\n             * @param value param value\n             */\n            changeComponentParams: function(id, name, value) {\n                var _this = this;\n                var component = this.getComponent(id);\n                var params = component._params;\n                var extend = false;\n                var $item = _this.$template.find('[data-app-component-id=' + id + '] > .app-component-content');\n\n                /**\n                 * @event mbrAppCore:changeComponentParams\n                 * @param id\n                 * @param {String} name\n                 * @param value\n                 */\n                _this.fire('changeComponentParams', id, name, value);\n\n                // save current params\n                function update(main, name, newVal, current) {\n                    if (extend) {\n                        if ($.isArray(main[name]) && typeof main[name][Object.keys(main[name])[0]] === 'object') {\n                            for (var k in newVal) {\n                                $.extend(main[name][k], newVal[k]);\n                            }\n                        } else {\n                            $.extend(main[name], newVal);\n                        }\n                    } else {\n                        main[name] = newVal;\n                    }\n\n                    if (current) {\n                        $.extend(main, current);\n                    }\n                }\n\n                // change params only if name isset\n                if (name) {\n                    // fix for parallax backgrounds\n                    if (name === 'bgImage' || name === 'parallax' || name === 'bgImageRadio') {\n                        $item.trigger('destroy.parallax');\n                    }\n\n                    if (typeof value == 'object') {\n                        var cnt1 = 0;\n                        var cnt2 = 0;\n                        for (var z in params[name]) { cnt1++; }\n                        for (var z in value) { cnt2++; }\n\n                        extend = cnt2 <= cnt1;\n                    }\n                    /**\n                     * @filter mbrAppCore->changeComponentParams\n                     * @param value\n                     * @param {String} param_name\n                     * @param params\n                     * @param {String} id - component ID  (since v3.03.1+)\n                     */\n                    value = this.applyFilter('changeComponentParams', value, name, params, id);\n\n                    update(params, name, value);\n\n                    // change global params if exist\n                    this.updateGlobalComponents(id, function(current, global) {\n                        update(global._params, name, value, current._params);\n                    });\n                }\n\n                // render current changes\n                if (typeof component._onParamsChange !== 'undefined') {\n                    component._onParamsChange($item, name, value);\n                }\n\n                /**\n                 * @event mbrAppCore:changedComponentParams\n                 * @param id - component id\n                 * @param {String} paramName - param name\n                 * @param {Any} value - param value\n                 */\n                _this.fire('changedComponentParams', id, name, value);\n            },\n\n            /**\n             * Return select list with anchors\n             * @param {String} defaultHref\n             */\n            getComponentsAnchorList: function(defaultHref, page) {\n                var result = '';\n                var nothingSelected = 1;\n                var selectedProp = 'selected=\"selected\"';\n                for (var k in this.resultJSON[page || this.currentPage].components) {\n                    var current = this.resultJSON[page || this.currentPage].components[k];\n                    var selected = '';\n                    if (defaultHref == '#' + current._anchor) {\n                        selected = selectedProp;\n                        nothingSelected = 1;\n                    }\n                    if (typeof current._anchor !== 'undefined' && !current._positionAbsolute && !current._alwaysBottom) {\n                        var thumb = (current.alias ? CORE.APP.getAddonDir(current.alias) : CORE.theme.path + '/components') + '/' + current._name + '/thumb.png';\n                        var isDefaultAnchor = current._anchor.indexOf(current._name + '-') === 0;\n                        var currentAnchorLabel = isDefaultAnchor ? current._anchor.charAt(0).toUpperCase() + current._anchor.slice(1).replace(/\\d/, ' $&') : current._anchor;\n\n                        result += '<option data-tooltipster=\"right\" data-tooltip-src=\"' + thumb + '\" value=\"' + (page || this.currentPage) + '#' + current._anchor + '\" ' + selected + '>' + currentAnchorLabel + '</option>';\n                    }\n                }\n\n                result =\n                    '<option value=\"' + (page || '') + '#top\" ' + (defaultHref == 'top' ? selectedProp : '') + '>Top of Page</option>' +\n                    result +\n                    '<option value=\"' + (page || '') + '#bottom\" ' + (defaultHref == 'top' ? selectedProp : '') + '>Bottom of Page</option>';\n                /**\n                 * @filter mbrAppCore->getComponentsAnchorList\n                 * @param list\n                 * @param {String} defaultHref\n                 */\n                result = this.applyFilter('getComponentsAnchorList', result, defaultHref);\n\n                return '<option value=\"\" disabled=\"disabled\" ' + (nothingSelected ? 'selected=\"selected\"' : '') + '></option>' + result;\n            },\n\n            /**\n             * Update global Components\n             * @param id\n             * @param callback function(component, this.resultJSON[n].component[k])\n             */\n            updateGlobalComponents: function(id, callback) {\n                var component = this.getComponent(id);\n\n                // change global params if exist\n                if (component._global) {\n                    for (var n in this.resultJSON) {\n                        for (var k in this.resultJSON[n].components) {\n                            if (this.resultJSON[n].components[k]._name == component._name &&\n                                this.resultJSON[n].components[k]._id !== component._id &&\n                                callback\n                            ) {\n                                callback(component, this.resultJSON[n].components[k]);\n                            }\n                        }\n                    }\n                }\n\n                CORE.fire('updateGlobalComponents', id, callback);\n            }\n        },\n        events: {\n            // event from plugin-sortable\n            changeComponentPosition: function(id, prevId, oldPrevId) {\n                this.changeComponentPosition(id, prevId, oldPrevId);\n            },\n            rendered: function(id) {\n                this.renderComponentsStyles();\n\n                if (typeof id === \"number\") {\n                    initGlobalComponent.call(this, id);\n                }\n            }\n        }\n    });\n\n    function initGlobalComponent(id) {\n        let newComponent = CORE.getComponent(id);\n\n        if (newComponent._global && Object.keys(this.resultJSON).length > 1) {\n            let\n                allPages = this.resultJSON,\n                curPage = this.currentPage,\n                arrPages = [];\n\n            // Check global block on other pages\n            if(newComponent._once)\n            for (let page in allPages) {\n                if (allPages.hasOwnProperty(page)) {\n                    if (page !== curPage) {\n                        let components = allPages[page].components;\n\n                        components.some(function(v, i, arr) {\n                            if (v._once === newComponent._once) {\n                                arrPages.push(page);\n                                return true;\n                            }\n                        })\n                    }\n                }\n            }\n\n            CORE.APP.confirmDlg(CORE.APP.TR(\"This block is global. Do you want to add it to all pages?\"), function(ok) {\n                if (ok) {\n                    if (arrPages.length) {\n                        let text = CORE.APP.TR(\"Please remove $component$ on all pages\").replace(\"$component$\", newComponent._once || newComponent._name.replace(/[0-9]/g, '')) + \":<br/><br/>- \" + arrPages.join(\"<br/>- \");\n\n                        CORE.APP.alertDlg(text);\n                        CORE.removeComponent(id);\n                    } else {\n                        for (let page in allPages) {\n                            if (allPages.hasOwnProperty(page)) {\n                                if (page !== curPage) {\n                                    allPages[page].components.push(newComponent);\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n        }\n    }\n\n}(jQuery, mbrAppCore));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1jb21wb25lbnRzLmpzP2YxMjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCw4QkFBOEI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsT0FBTztBQUN0QywrQkFBK0IsT0FBTztBQUN0QztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTs7O0FBR2I7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUIsdUJBQXVCLE9BQU87QUFDOUIsOEJBQThCLE9BQU87QUFDckMsOEJBQThCLE9BQU87QUFDckMsdUJBQXVCLFdBQVc7QUFDbEM7QUFDQTtBQUNBOztBQUVBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUEsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLWNvbXBvbmVudHMuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBtb2R1bGUgIG1ickFwcENvcmUvY29tcG9uZW50c1xuICpcbiAqIEBkZXNjcmlwdGlvbiBjb21wb25lbnRzXG4gKlxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvcGx1Z2lucy9zb3J0YWJsZX5tYnJBcHBDb3JlOmNoYW5nZUNvbXBvbmVudFBvc2l0aW9uXG4gKiBAbGlzdGVucyBtb2R1bGU6bWJyQXBwQ29yZS9jb21wb25lbnRzLWxvYWR+bWJyQXBwQ29yZTpyZW5kZXJlZFxuICpcbiAqIEBBRERPTl9ESVJAXG4gKiBAVVNFUl9FTUFJTEBcbiAqL1xuKGZ1bmN0aW9uKCQsIENPUkUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgJGFkZFN0eWxlcyA9ICQoJzxzdHlsZSBuYW1lPVwidGhlbWUtc3R5bGVzXCI+JykuYXBwZW5kVG8oJ2JvZHknKTtcblxuICAgIENPUkUucmVnRXh0ZW5zaW9uKHtcbiAgICAgICAgbmFtZTogJ2NvbXBvbmVudHMnLFxuICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTptYnJBcHBDb3JlL2NvbXBvbmVudHMgKi9cbiAgICAgICAgZ2xvYmFsOiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJlcGxhY2UgdmFyaWFibGVzIGluIHN0cmluZyBsaWtlIEBVU0VSX0VNQUlMQCwgQEFERE9OX0RJUkBcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICAgICAgICAgICAqIEBwYXJhbSBjb21wb25lbnRcbiAgICAgICAgICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVwbGFjZVN5c3RlbVZhcmlhYmxlczogZnVuY3Rpb24oc3RyLCBjb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgvQFVTRVJfRU1BSUxAL2cudGVzdChzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlcl9lbWFpbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXNlckluZm8gPSBfdGhpcy5BUFAuZ2V0VXNlckluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlckluZm8gJiYgdXNlckluZm8uZW1haWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJJbmZvLmVtYWlsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL0BVU0VSX0VNQUlMQC9nLCB1c2VyX2VtYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICBpZiAoL0BBRERPTl9ESVJAL2cudGVzdChzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGlhc1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL0BBRERPTl9ESVJAL2csXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuQVBQLnBhdGgyY29yZShfdGhpcy5BUFAuZ2V0QWRkb25EaXIoY29tcG9uZW50LmFsaWFzIHx8IF90aGlzLkFQUC50aGVtZS5uYW1lKSkgKyAoY29tcG9uZW50LmFsaWFzID8gJy8nIDogJy9jb21wb25lbnRzLycpXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgvQFNJVEVTQC9nLnRlc3Qoc3RyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZSBAU0lURVNAL2lkIHdpdGggcHJvamVjdCByZXNvdXJjZSB1cmxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoYCR7Q09SRS5BUFAucHJvamVjdFNldHRpbmdzLnBhdGh9L2AsJ2cnKSwgQ09SRS5BUFAucHJvamVjdFNldHRpbmdzLnJlc291cmNlc1VybCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFJlcGxhY2UgU3lzdGVtIFZhcmlhYmxlcyBsaWtlIEBVU0VSX0VNQUlMQCwgQEFERE9OX0RJUkBcbiAgICAgICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5yZXBsYWNlU3lzdGVtVmFyaWFibGVzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgc3RyID0gX3RoaXMuYXBwbHlGaWx0ZXIoJ3JlcGxhY2VTeXN0ZW1WYXJpYWJsZXMnLCBzdHIsIGNvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3RyID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHN0cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyW2tdID0gX3RoaXMucmVwbGFjZVN5c3RlbVZhcmlhYmxlcyhzdHJba10sIGNvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICAgICAgfSxcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFkZCBDb21wb25lbnQgKHdpdGhvdXQgd2FpdGluZyBmb3IgY29tcG9uZW50IHRvIGRvd25sb2FkKVxuICAgICAgICAgICAgICogTm90ZTogY29tcG9uZW50IG11c3QgYmUgcmVhbFxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnNlcnRUb1xuICAgICAgICAgICAgICogICAgICAgIEBwYXJhbSB7U3RyaW5nfSBpbnNlcnRUby5pdGVtIC0gaWQgb2Ygc2VtaS1kZXRhY2hlZCBlbGVtZW50XG4gICAgICAgICAgICAgKiAgICAgICAgQHBhcmFtIHtTdHJpbmd9IGluc2VydFRvLndoZXJlIC0gXCJiZWZvcmVcIlxuICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnlOb2RlfSBkb21Tb3VyY2UgKHNpbmNlIDMuNy4xKylcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYWRkQ29tcG9uZW50OiBmdW5jdGlvbihuYW1lLCBpbnNlcnRUbywgZG9tU291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZiA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICAgICAgICAgIHZhciBuZXdDb21wb25lbnQgPSAkLmV4dGVuZCh0cnVlLCB7fSwgdGhpcy5jb21wb25lbnRzW25hbWVdKTtcbiAgICAgICAgICAgICAgICBpZiAoIWluc2VydFRvIHx8ICFpbnNlcnRUby5pdGVtIHx8ICFpbnNlcnRUby53aGVyZSkge1xuICAgICAgICAgICAgICAgICAgICBpbnNlcnRUbyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGNvbXBvbmVudCBpc3NldFxuICAgICAgICAgICAgICAgIHZhciBpc3NldENvbXBvbmVudCA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLkFQUC5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc3NldENvbXBvbmVudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWlzc2V0Q29tcG9uZW50ICYmICFDT1JFLkFQUC50aGVtZS50eXBlID09ICdzZWNvbmRhcnknKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyByZXBsYWNlIHN5c3RlbSB2YXJpYWJsZXNcbiAgICAgICAgICAgICAgICBuZXdDb21wb25lbnQgPSB0aGlzLnJlcGxhY2VTeXN0ZW1WYXJpYWJsZXMobmV3Q29tcG9uZW50LCBuZXdDb21wb25lbnQpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgX29uY2UgcGFyYW1ldGVyIGFuZCBzdG9wIGlmIHRoaXMgYmxvY2sgYWRkZWRcbiAgICAgICAgICAgICAgICBpZiAobmV3Q29tcG9uZW50Ll9vbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZXN1bHRKU09OW3RoaXMuY3VycmVudFBhZ2VdLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdEpTT05bdGhpcy5jdXJyZW50UGFnZV0uY29tcG9uZW50c1trXS5fbmFtZSA9PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6YWRkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmZpcmUoJ2FkZENvbXBvbmVudCcsIG5hbWUpO1xuXG4gICAgICAgICAgICAgICAgLy8gY29weSBmcm9tIHNhbWUgZ2xvYmFsIGNvbXBvbmVudCBpZiBleGlzdFxuICAgICAgICAgICAgICAgIHZhciBnbG9iYWxDb3BpZWQ7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0NvbXBvbmVudC5fZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZXN1bHRKU09OKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHRoaXMucmVzdWx0SlNPTltrXS5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0SlNPTltrXS5jb21wb25lbnRzW25dLl9nbG9iYWwgJiYgdGhpcy5yZXN1bHRKU09OW2tdLmNvbXBvbmVudHNbbl0uX25hbWUgPT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIHRoaXMucmVzdWx0SlNPTltrXS5jb21wb25lbnRzW25dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZighL15fL2cudGVzdChzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29tcG9uZW50W3NdID0gdGhpcy5yZXN1bHRKU09OW2tdLmNvbXBvbmVudHNbbl1bc107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmV3Q29tcG9uZW50ID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMucmVzdWx0SlNPTltrXS5jb21wb25lbnRzW25dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsQ29waWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gYWRkIGRlZmF1bHQgcGFyYW1zIGZvciBuZXcgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgaWYgKCFnbG9iYWxDb3BpZWQgJiYgbmV3Q29tcG9uZW50Ll9wYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBuZXdDb21wb25lbnQuX3BhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29tcG9uZW50Ll9wYXJhbXNba10gPSBuZXdDb21wb25lbnQuX3BhcmFtc1trXS5kZWZhdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaW5zZXJ0IHRvXG4gICAgICAgICAgICAgICAgdmFyIHNwbGljZU51bSA9IHRoaXMucmVzdWx0SlNPTlt0aGlzLmN1cnJlbnRQYWdlXS5jb21wb25lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0VG8pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0aGlzLnJlc3VsdEpTT05bdGhpcy5jdXJyZW50UGFnZV0uY29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0SlNPTlt0aGlzLmN1cnJlbnRQYWdlXS5jb21wb25lbnRzW2tdLl9pZCA9PSBpbnNlcnRUby5pdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc2VydFRvLndoZXJlID09ICdiZWZvcmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGljZU51bSA9IGs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaWNlTnVtID0gcGFyc2VGbG9hdChrKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQWRkIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+YWRkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZ2xvYmFsQ29waWVkIChzaW5jZSAzLjcuMSspXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnlOb2RlfSBkb21Tb3VyY2UgKHNpbmNlIDMuNy4xKylcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgaWQgPSB0aGlzLnVuaXFOdW0oKTtcbiAgICAgICAgICAgICAgICB2YXIgZmlsdGVyZWRDb21wb25lbnQgPSBDT1JFLmFwcGx5RmlsdGVyKCdhZGRDb21wb25lbnQnLCAkLmV4dGVuZCh0cnVlLCBuZXdDb21wb25lbnQsIHsgX25hbWU6IG5hbWUsIF9pZDogaWQgfSksIGdsb2JhbENvcGllZCwgZG9tU291cmNlKTtcblxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJlZENvbXBvbmVudCAmJiB0eXBlb2YgZmlsdGVyZWRDb21wb25lbnQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZENvbXBvbmVudC50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzdWx0Q29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5yZXN1bHRKU09OW0NPUkUuY3VycmVudFBhZ2VdLmNvbXBvbmVudHMuc3BsaWNlKHNwbGljZU51bSwgMCwgcmVzdWx0Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJDb21wb25lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENPUkUucmVuZGVyKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIENPUkUucmVzdWx0SlNPTltDT1JFLmN1cnJlbnRQYWdlXS5jb21wb25lbnRzLnNwbGljZShzcGxpY2VOdW0sIDAsIGZpbHRlcmVkQ29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyQ29tcG9uZW50KCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBjb21wb25lbnQgaHRtbFxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gQ09SRS5yZXN1bHRKU09OW0NPUkUuY3VycmVudFBhZ2VdLmNvbXBvbmVudHNbc3BsaWNlTnVtXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZXBhcmVkSHRtbCA9IENPUkUucHJlcGFyZUNvbXBvbmVudChjb21wb25lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGluc2VydCBuZXcgaXRlbSB0byBkcmFnIHBsYWNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydFRvICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhY29tcG9uZW50Ll9hbHdheXNCb3R0b20gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFjb21wb25lbnQuX2Fsd2F5c1RvcFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnNlcnRJdGVtID0gQ09SRS4kdGVtcGxhdGUuZmluZCgnW2RhdGEtYXBwLWNvbXBvbmVudC1pZD0nICsgaW5zZXJ0VG8uaXRlbSArICddJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0VG8ud2hlcmUgPT0gJ2JlZm9yZScgfHwgaW5zZXJ0SXRlbS5hdHRyKCdkYXRhLWFwcC1hbHdheXMtYm90dG9tJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRJdGVtLmJlZm9yZShwcmVwYXJlZEh0bWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9IGluc2VydEl0ZW0ub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRJdGVtLmFmdGVyKHByZXBhcmVkSHRtbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gaW5zZXJ0SXRlbS5vZmZzZXQoKS50b3AgKyBpbnNlcnRJdGVtLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zZXJ0IHRvIHRvcFxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb21wb25lbnQuX2Fsd2F5c1RvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS4kdGVtcGxhdGUucHJlcGVuZChwcmVwYXJlZEh0bWwpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdG8gY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3AgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zZXJ0IHRvIGJvdHRvbVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3R0b21Db21wb25lbnQgPSBDT1JFLiR0ZW1wbGF0ZS5maW5kKCdbZGF0YS1hcHAtYWx3YXlzLWJvdHRvbV06ZXEoMCknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChib3R0b21Db21wb25lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tQ29tcG9uZW50LmJlZm9yZShwcmVwYXJlZEh0bWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT1JFLiR0ZW1wbGF0ZS5hcHBlbmQocHJlcGFyZWRIdG1sKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gQ09SRS4kdGVtcGxhdGUuaGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdG8gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sJykuc3RvcCgpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IHNjcm9sbFRvcCB9LCAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICBDT1JFLnJlbmRlcihpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmFkZGVkQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgQ09SRS5maXJlKCdhZGRlZENvbXBvbmVudCcsIGlkKTtcblxuICAgICAgICAgICAgICAgICAgICBkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnByb21pc2UoKTtcblxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm4gYWxsIHZhcmlhYmxlcyBvZiBjb21wb25lbnQgYnkgSURcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIGNvbXBvbmVudCBpZCAoLl9pZClcbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYWdlIC0gcGFnZSBuYW1lLCBjdXJyZW50UGFnZSBieSBkZWZhdWx0XG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2x9IGNsb25lIC0gcmV0dXJuIGNsb25lZCBpbnN0YW5jZSBvZiBjb21wb25lbnQgb2JqZWN0ICh3aXRob3V0IF9pZCwgX2dyb3VwKSwgZWxzZSByZXR1cm4gb3JpZ2luYWwgUEFHRS5jb21wb25lbnRzW2tdXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gY29tcG9uZW50IHBhcmFtcyBvYmplY3Qgb3IgZmFsc2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0Q29tcG9uZW50OiBmdW5jdGlvbihpZCwgcGFnZSwgY2xvbmUpIHtcbiAgICAgICAgICAgICAgICBwYWdlID0gcGFnZSB8fCB0aGlzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzW2tdLl9pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0Ll9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0Ll9ncm91cDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHNba107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEdldCBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Z2V0Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcmVzdWx0IC0gY29tcG9uZW50IHBhcmFtcyBvYmplY3Qgb3IgZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIGNvbXBvbmVudCBpZCAoLl9pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYWdlIC0gcGFnZSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2x9IGNsb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVyKCdnZXRDb21wb25lbnQnLCByZXN1bHQsIGlkLCBwYWdlLCBjbG9uZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcignZ2V0Q29tcG9uZW50JywgZmFsc2UsIGlkLCBwYWdlLCBjbG9uZSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybiBuZXh0IGNvbXBvbmVudCBieSBJRFxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gY29tcG9uZW50IGlkICguX2lkKVxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhZ2VcbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0TmV4dENvbXBvbmVudDogZnVuY3Rpb24oaWQsIHBhZ2UpIHtcbiAgICAgICAgICAgICAgICBwYWdlID0gcGFnZSB8fCB0aGlzLmN1cnJlbnRQYWdlO1xuICAgICAgICAgICAgICAgIHZhciBnZXROZXh0O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldE5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogR2V0IG5leHQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmdldE5leHRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXN1bHQgLSBjb21wb25lbnQgcGFyYW1zIG9iamVjdCBvciBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbXBvbmVudElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFnZSAtIHBhZ2UgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcignZ2V0TmV4dENvbXBvbmVudCcsIHRoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzW2tdLCBpZCwgcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzW2tdLl9pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TmV4dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlGaWx0ZXIoJ2dldE5leHRDb21wb25lbnQnLCBmYWxzZSwgaWQsIHBhZ2UpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm4gcHJldmlvdXMgY29tcG9uZW50IGJ5IElEXG4gICAgICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICAgICAqIEBwYXJhbSBwYWdlXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFByZXZDb21wb25lbnQ6IGZ1bmN0aW9uKGlkLCBwYWdlKSB7XG4gICAgICAgICAgICAgICAgcGFnZSA9IHBhZ2UgfHwgdGhpcy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgICAgICB2YXIgZ2V0UHJldmlvdXMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHRoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdEpTT05bcGFnZV0uY29tcG9uZW50c1trXS5faWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogR2V0IHByZXZpb3VzIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5nZXRQcmV2Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcmVzdWx0IGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudElkXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcignZ2V0UHJldkNvbXBvbmVudCcsIGdldFByZXZpb3VzLCBpZCwgcGFnZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ2V0UHJldmlvdXMgPSB0aGlzLnJlc3VsdEpTT05bcGFnZV0uY29tcG9uZW50c1trXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlGaWx0ZXIoJ2dldFByZXZDb21wb25lbnQnLCBmYWxzZSwgaWQsIHBhZ2UpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW1vdmUgQ29tcG9uZW50IGJ5IElEXG4gICAgICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICAgICAqIEBwYXJhbSBwYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGdsb2JhbENvbXAgLSBpZiBnbG9iYWwsIHJlbW92aW5nIHRoZSBjb21wb25lbnQgb24gYWxsIHBhZ2VzIChzaW5jZSA0LjEwLjUpXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZW1vdmVDb21wb25lbnQ6IGZ1bmN0aW9uKGlkLCBwYWdlLCBnbG9iYWxDb21wKSB7XG4gICAgICAgICAgICAgICAgcGFnZSA9IHBhZ2UgfHwgdGhpcy5jdXJyZW50UGFnZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzW2tdLl9pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZDb21wb25lbnQgPSB0aGlzLmdldFByZXZDb21wb25lbnQoaWQsIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRDb21wb25lbnQgPSB0aGlzLmdldE5leHRDb21wb25lbnQoaWQsIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9uYW1lID0gdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHNba10uX25hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBkb21cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSB0aGlzLiR0ZW1wbGF0ZS5maW5kKCdbZGF0YS1hcHAtY29tcG9uZW50LWlkPScgKyBpZCArICddJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogZmlyZSByZW1vdmUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnJlbW92ZUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpcmUoJ3JlbW92ZUNvbXBvbmVudCcsIGlkLCBjb21wb25lbnQsIHBhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY29tcG9uZW50IGZyb20gcHJvamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHMuc3BsaWNlKGssIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFnZSA9PT0gdGhpcy5jdXJyZW50UGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50c1N0eWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnJlbW92ZWRDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByZXZDb21wb25lbnQgKHNpbmNlIDMuMDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gbmV4dENvbXBvbmVudCAoc2luY2UgMy4wMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBwYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlKCdyZW1vdmVkQ29tcG9uZW50JywgaWQsIHByZXZDb21wb25lbnQsIG5leHRDb21wb25lbnQsIHBhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBjb21wb25lbnQgLSBnbG9iYWwgYW5kIG5lZWQgcmVtb3ZlIG9uIGFsbCBwYWdlcyBoaXMgKHNpbmNlIDQuMTAuNSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWxDb21wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayBpbiB0aGlzLnJlc3VsdEpTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2UgPSB0aGlzLnJlc3VsdEpTT05ba107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5jb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24odiwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5fbmFtZSA9PT0gX25hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDaGFuZ2UgQ29tcG9uZW50IFBvc2l0aW9uICh3aGVuIGRyYWcpXG4gICAgICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICAgICAqIEBwYXJhbSBwcmV2SWRcbiAgICAgICAgICAgICAqIEBwYXJhbSBvbGRQcmV2SWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2hhbmdlQ29tcG9uZW50UG9zaXRpb246IGZ1bmN0aW9uKGlkLCBwcmV2SWQsIG9sZFByZXZJZCkge1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbihpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1zW2tdLl9pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBpdGVtc1trXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5zcGxpY2UocGFyc2VJbnQoayksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcHJldklkKSBpdGVtcy5zcGxpY2UoMCwgMCwgZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc1trXS5faWQgPT0gcHJldklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnNwbGljZShwYXJzZUludChrKSArIDEsIDAsIGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSh0aGlzLnJlc3VsdEpTT05bdGhpcy5jdXJyZW50UGFnZV0uY29tcG9uZW50cyk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBkcmFnIGNvbXBvbmVudCBldmVudFxuICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmNoYW5nZWRDb21wb25lbnRQb3NpdGlvblxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBpZFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBvbGRJZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgnY2hhbmdlZENvbXBvbmVudFBvc2l0aW9uJywgaWQsIG9sZFByZXZJZCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFkZCBDb21wb25lbnQgQWRkaXRpb25hbCBTdHlsZXNcbiAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkaXRlbVxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAgICAgICAgICogQHBhcmFtIGdvb2dsZUxpbmtcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYWRkQ29tcG9uZW50U3R5bGVzOiBmdW5jdGlvbigkaXRlbSwgcHJvcCwgdmFsdWUsIGdvb2dsZUxpbmspIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZXMgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSAkaXRlbS5wYXJlbnRzKCdbZGF0YS1hcHAtY29tcG9uZW50LWlkXTplcSgwKScpLmF0dHIoJ2RhdGEtYXBwLWNvbXBvbmVudC1pZCcpLFxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBfdGhpcy5nZXRDb21wb25lbnQoaWQpO1xuICAgICAgICAgICAgICAgIHN0eWxlc1twcm9wXSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogUHJldmVudCBjb21wb25lbnQgc3R5bGVzIHNhdmVcbiAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPnByZXZlbnRDb21wb25lbnRTdHlsZXNTYXZlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtCb29sfVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gY2hhbmdlZF9pdGVtXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGdvb2dsZUxpbmtcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCB8fCBfdGhpcy5hcHBseUZpbHRlcigncHJldmVudENvbXBvbmVudFN0eWxlc1NhdmUnLCBmYWxzZSwgY29tcG9uZW50LCAkaXRlbSwgcHJvcCwgdmFsdWUsIGdvb2dsZUxpbmspKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAkaXRlbS5hdHRyKCdkYXRhLWFwcC1zZWxlY3RvcicpIHx8XG4gICAgICAgICAgICAgICAgICAgICgkaXRlbS5oYXNDbGFzcygnYnRuJykgPyAnLmJ0bicgOiAnJykgfHxcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW0ucHJvcCgndGFnTmFtZScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wb25lbnQuX29uU3R5bGVzQ2hhbmdlID09PSAnZnVuY3Rpb24nICYmICFjb21wb25lbnQuX29uU3R5bGVzQ2hhbmdlKCRpdGVtLCBwcm9wLCB2YWx1ZSwgc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkaXRlbS5wYXJlbnRzKCdbZGF0YS1hcHAtc2VsZWN0b3JdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtYXBwLXNlbGVjdG9yJykgKyAnICcgKyBzZWxlY3RvcjtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29tcG9uZW50Ll9zdHlsZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fc3R5bGVzID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29tcG9uZW50Ll9zdHlsZXNbc2VsZWN0b3JdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuX3N0eWxlc1tzZWxlY3Rvcl0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkLmV4dGVuZChjb21wb25lbnQuX3N0eWxlc1tzZWxlY3Rvcl0sIHN0eWxlcyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ29vZ2xlTGluaykge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuX3N0eWxlc1tzZWxlY3Rvcl0uZ29vZ2xlTGluayA9IGdvb2dsZUxpbms7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQWRkIGNvbXBvbmVudCBzdHlsZXNcbiAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmFkZENvbXBvbmVudFN0eWxlc1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBzdHlsZXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9IGNoYW5nZWRfaXRlbVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBnb29nbGVMaW5rXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29tcG9uZW50Ll9zdHlsZXMgPSBfdGhpcy5hcHBseUZpbHRlcignYWRkQ29tcG9uZW50U3R5bGVzJywgY29tcG9uZW50Ll9zdHlsZXMsIGNvbXBvbmVudCwgJGl0ZW0sIHByb3AsIHZhbHVlLCBnb29nbGVMaW5rKTtcblxuICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBnbG9iYWwgcGFyYW1zIGlmIGV4aXN0XG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlR2xvYmFsQ29tcG9uZW50cyhpZCwgZnVuY3Rpb24oY3VycmVudCwgZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbC5fc3R5bGVzID0gY3VycmVudC5fc3R5bGVzO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMucmVuZGVyQ29tcG9uZW50c1N0eWxlcygpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBnZXQgY29tcG9uZW50IHN0eWxlc1xuICAgICAgICAgICAgICogQHBhcmFtIElEXG4gICAgICAgICAgICAgKiBAcGFyYW0gZGVwbG95XG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldENvbXBvbmVudFN0eWxlczogKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBpbGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQ1NTKHN0eWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcnVsZXMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dvb2dsZUxpbmtzID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcGlsZShzdHlsZXMsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgQ1NTLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uKHN0eWxlcywgbGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFjZXMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGV2ZWw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlcyArPSAnICAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0b3IgaW4gc3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gc3R5bGVzW3NlbGVjdG9yXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3J1bGVzICs9IHNwYWNlcyArIHNlbGVjdG9yICsgJyB7XFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcGlsZSh2YWx1ZSwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcnVsZXMgKz0gc3BhY2VzICsgJ31cXG4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgPT09ICdnb29nbGVMaW5rJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nb29nbGVMaW5rcyArPSAnQGltcG9ydCB1cmwoJyArIHZhbHVlICsgJyk7XFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ydWxlcyArPSBzcGFjZXMgKyBzZWxlY3RvciArICc6ICcgKyB2YWx1ZSArICc7XFxuJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgQ1NTLnByb3RvdHlwZS5nZXRSdWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3J1bGVzO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIENTUy5wcm90b3R5cGUuZ2V0R29vZ2xlTGlua3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nb29nbGVMaW5rcztcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENTUyhzdHlsZXMpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihJRCwgZGVwbG95KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnQgPSBJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBJRCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IHRoaXMuZ2V0Q29tcG9uZW50KElEKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjc3MgPSBjb21waWxlKGNvbXBvbmVudC5fc3R5bGVzKTtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogR2V0IGNvbXBvbmVudCBzdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5nZXRDb21wb25lbnRTdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBkZXBsb3lcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVyKCdnZXRDb21wb25lbnRTdHlsZXMnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3M6IGNzcy5nZXRSdWxlcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlOiBkZXBsb3kgPyBjc3MuZ2V0R29vZ2xlTGlua3MoKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0sIGNvbXBvbmVudCwgZGVwbG95KTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB9KSgpLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJlbmRlciBhZGRpdGlvbmFsIGNvbXBvbmVudCBzdHlsZXNcbiAgICAgICAgICAgICAqIEBwYXJhbSBkZXBsb3kgd2hlbiB0cnVlIG9ubHkgcmV0dXJuIHJlc3VsdCwgZWxzZSBhZGQgcmVzdWx0IGluIHBhZ2Ugc3R5bGVzXG4gICAgICAgICAgICAgKiBAcGFyYW0gcGFnZSByZW5kZXIgY3VycmVudCBwYWdlIHN0eWxlcywgZWxzZSByZW5kZXIgZnJvbSB0aGlzLmN1cnJlbnRQYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0gY29tcG9uZW50XG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlbmRlckNvbXBvbmVudHNTdHlsZXM6IGZ1bmN0aW9uKGRlcGxveSwgcGFnZSwgY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBnb29nbGVMaW5rcyA9ICcnO1xuICAgICAgICAgICAgICAgIHBhZ2UgPSBwYWdlIHx8IHRoaXMuY3VycmVudFBhZ2U7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudHMgPSB0aGlzLnJlc3VsdEpTT05bcGFnZV0uY29tcG9uZW50cztcbiAgICAgICAgICAgICAgICBkZXBsb3kgPSBkZXBsb3kgfHwgZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIHRoaXMuaXNTZWNvbmRhcnlDb21wb25lbnQoY29tcG9uZW50KSAmJiAhZGVwbG95KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuYXBwbHlGaWx0ZXIoJ2NvbXBvbmVudFNlbGVjdG9yJywgJyMnICsgY29tcG9uZW50Ll9hbmNob3IsIGNvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJTdHlsZXMgPSB0aGlzLmdldENvbXBvbmVudFN0eWxlcyhjb21wb25lbnQsIGRlcGxveSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbGVzcyBjb21waWxlXG4gICAgICAgICAgICAgICAgICAgIGxlc3MucmVuZGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmJlZm9yZVJlbmRlclN0eWxlc0ZvckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHN0eWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RmlsdGVyKCdiZWZvcmVSZW5kZXJTdHlsZXNGb3JDb21wb25lbnQnLCBzZWxlY3RvciArICcge1xcbicgKyBjdXJTdHlsZXMuY3NzICsgJ31cXG4nLCBjb21wb25lbnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBjc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZi5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHBhZ2UgKCcgKyBwYWdlICsgJykgbGVzcyByZW5kZXI6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZi5yZXNvbHZlKGNzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9XCInICsgY29tcG9uZW50Ll9pZCArICdcIl0gPiBzdHlsZScpLmh0bWwoY3NzLmNzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWYucHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1NlY29uZGFyeUNvbXBvbmVudChjb21wb25lbnRzW2tdKSAmJiBjb21wb25lbnRzW2tdLl9jaWQgJiYgIWNvbXBvbmVudHNba10uX2N1c3RvbUhUTUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKChjb21wb25lbnRzW2tdLl9uYW1lIHx8ICdUaGUgQmxvY2snKSArICcgaXMgYnJva2VuLiBTa2lwIHN0eWxlIHJlbmRlcmluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Y29tcG9uZW50U2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuYXBwbHlGaWx0ZXIoJ2NvbXBvbmVudFNlbGVjdG9yJywgJyMnICsgY29tcG9uZW50c1trXS5fYW5jaG9yLCBjb21wb25lbnRzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1clN0eWxlcyA9IHRoaXMuZ2V0Q29tcG9uZW50U3R5bGVzKGNvbXBvbmVudHNba10sIGRlcGxveSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXBsb3kgfHwgIXRoaXMuaXNTZWNvbmRhcnlDb21wb25lbnQoY29tcG9uZW50c1trXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnXFxuJyArIHNlbGVjdG9yICsgJyB7XFxuJyArIGN1clN0eWxlcy5jc3MgKyAnfVxcbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGVMaW5rcyArPSBjdXJTdHlsZXMuZ29vZ2xlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgJGNvbXBvbmVudCA9ICQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9XCInICsgY29tcG9uZW50c1trXS5faWQgKyAnXCJdJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJGNvbXBvbmVudC5maW5kKCc+IHN0eWxlJykubGVuZ3RoKSAkY29tcG9uZW50LmFwcGVuZCgnPHN0eWxlLz4nKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBsZXNzIGNvbXBpbGVcbiAgICAgICAgICAgICAgICAgICAgbGVzcy5yZW5kZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+YmVmb3JlUmVuZGVyU3R5bGVzRm9yQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gc3R5bGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlGaWx0ZXIoJ2JlZm9yZVJlbmRlclN0eWxlc0ZvckNvbXBvbmVudCcsIHNlbGVjdG9yICsgJyB7XFxuJyArIGN1clN0eWxlcy5jc3MgKyAnfVxcbicsIGNvbXBvbmVudHNba10pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyLCBjc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLkFQUC5zaG93RXJyb3IoKCdUaGUgZm9sbG93aW5nIGVycm9yIG9jY3VyZWQgd2hpbGUgY3JlYXRpbmcgdGhlICcgKyBwYWdlICsgJyBwYWdlOjxicj5MZXNzIHJlbmRlciBpbiB0aGUgJyArIGNvbXBvbmVudHNba10uX25hbWUgKyAnIGJsb2NrOiAnICsgZXJyLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBvbmVudC5maW5kKCc+IHN0eWxlJykuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvbXBvbmVudC5maW5kKCc+IHN0eWxlJykuaHRtbChjc3MuY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5iZWZvcmVSZW5kZXJTdHlsZXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcmVzdWx0XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZGVwbG95XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZ29vZ2xlTGlua3NcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmFwcGx5RmlsdGVyKCdiZWZvcmVSZW5kZXJTdHlsZXMnLCByZXN1bHQsIGNvbXBvbmVudHMsIGRlcGxveSwgcGFnZSwgZ29vZ2xlTGlua3MpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGxlc3MgY29tcGlsZVxuICAgICAgICAgICAgICAgIGxlc3MucmVuZGVyKHJlc3VsdCwgZnVuY3Rpb24oZXJyLCBjc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHBhZ2UgKCcgKyBwYWdlICsgJykgbGVzcyByZW5kZXI6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjc3MuY3NzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgIGlmIChkZXBsb3kpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZ29vZ2xlTGlua3MgKyByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmFmdGVyUmVuZGVyU3R5bGVzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGRlcGxveVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gcGFnZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZ29vZ2xlTGlua3NcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVyKCdhZnRlclJlbmRlclN0eWxlcycsIHJlc3VsdCwgY29tcG9uZW50cywgZGVwbG95LCBwYWdlLCBnb29nbGVMaW5rcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJGFkZFN0eWxlcy5odG1sKHRoaXMuYXBwbHlGaWx0ZXIoJ2FmdGVyUmVuZGVyU3R5bGVzJywgcmVzdWx0LCBjb21wb25lbnRzLCBkZXBsb3ksIHBhZ2UsIGdvb2dsZUxpbmtzKSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZvY3VzIENvbXBvbmVudCBCbG9ja1xuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gaWYgPT1cInhcIiB0aGVuIHVuZm9jdXNlZCBhbGxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZm9jdXNDb21wb25lbnRCbG9jazogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGNvbXBvbmVudCA9ICQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9XCInICsgaWQgKyAnXCJdJyk7XG4gICAgICAgICAgICAgICAgaWYgKCRjb21wb25lbnQuaGFzQ2xhc3MoJ2ZvY3VzZWQnKSkgLy8gcHJldmVudCBkb3VibGUgZm9jdXNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6Ymx1ckNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIGNvbXBvbmVudCBpZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHZhciBmb2N1c2VkID0gJCgnW2RhdGEtYXBwLWNvbXBvbmVudC1pZF0uZm9jdXNlZCcpO1xuICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgQ09SRS5maXJlKCdibHVyQ29tcG9uZW50JywgZm9jdXNlZC5hdHRyKCdkYXRhLWFwcC1jb21wb25lbnQtaWQnKSk7XG5cbiAgICAgICAgICAgICAgICAvLyB1bmZvY3VzIGFsbFxuICAgICAgICAgICAgICAgICQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWRdJykucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQnKTtcblxuICAgICAgICAgICAgICAgIC8vIGZvY3VzIG9uZVxuICAgICAgICAgICAgICAgIGlmIChpZCAhPT0gJ3gnKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb21wb25lbnQuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiB1bmZvY3VzIGFsbCBtYW51YWxseVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBDT1JFLiRib2R5LmZpbmQoJy5ub3RlLXBvcG92ZXIgPiAqJykuYXR0cignc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcbiAgICAgICAgICAgICAgICAgICAgQ09SRS4kYm9keS5maW5kKCcuc3AtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3NwLWhpZGRlbicpO1xuICAgICAgICAgICAgICAgICAgICBDT1JFLiRib2R5LmZpbmQoJy5zcC1yZXBsYWNlcicpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpmb2N1c0NvbXBvbmVudFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIGlmID09ZmFsc2UgdGhlbiB1bmZvY3VzZWQgYWxsXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ09SRS5maXJlKCdmb2N1c2VkQ29tcG9uZW50JywgaWQgIT0gJ3gnICYmIGlkKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJuIElEIG9mIGZvY3VzZWQgY29tcG9uZW50XG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGNvbXBvbmVudElkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldEZvY3VzZWRDb21wb25lbnRCbG9ja0lkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJCgnW2RhdGEtYXBwLWNvbXBvbmVudC1pZF0uZm9jdXNlZCcpLmF0dHIoJ2RhdGEtYXBwLWNvbXBvbmVudC1pZCcpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgeG9tcG9uZW50IEJsb2NrIGJ5IElkXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGlkIGNvbXBvbmVudCBpZFxuICAgICAgICAgICAgICogQHJldHVybiB7RG9tTm9kZX1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0Q29tcG9uZW50QmxvY2s6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9XCInICsgaWQgKyAnXCJdJykuZ2V0KDApO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gQ29udmVydCBwYXJhbXMgZnJvbSBhcnJheSB0byBvYmplY3QgKGFycmF5IHVzZWQgaW4gYmV0YSB2ZXJzaW9uIDEpXG4gICAgICAgICAgICAvLyBGUk9NOlxuICAgICAgICAgICAgLy8gICB7XG4gICAgICAgICAgICAvLyAgICAgbG9nbzogWydzd2l0Y2gnLCAnTG9nbycsIHRydWVdXG4gICAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAgIC8vIFRPOlxuICAgICAgICAgICAgLy8gICB7XG4gICAgICAgICAgICAvLyAgICAgbG9nbzoge1xuICAgICAgICAgICAgLy8gICAgICAgdHlwZTogJ3N3aXRjaCcsXG4gICAgICAgICAgICAvLyAgICAgICB0aXRsZTogJ0xvZ28nLFxuICAgICAgICAgICAgLy8gICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZvY3VzIENvbXBvbmVudCBCbG9ja1xuICAgICAgICAgICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb252ZXJ0Q29tcG9uZW50UGFyYW1zOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0ge307XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBhcnJheSAtIHByZXBhcmUgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzQXJyYXkocGFyYW1zW2tdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zW2tdWzBdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtrXS50eXBlID0gcGFyYW1zW2tdWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXNba11bMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdLnRpdGxlID0gcGFyYW1zW2tdWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXNba11bMl0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdLmRlZmF1bHQgPSBwYXJhbXNba11bMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtc1trXVszXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRba10udmFsdWVzID0gcGFyYW1zW2tdWzNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2tdID0gcGFyYW1zW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJuIGN1cnJlbnQgY29tcG9uZW50IHBhcmFtc1xuICAgICAgICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgICAgICAgKiBAcGFyYW0gcmVhbFxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRDb21wb25lbnRQYXJhbXM6IGZ1bmN0aW9uKGlkLCByZWFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuZ2V0Q29tcG9uZW50KGlkLCBmYWxzZSwgIXJlYWwpO1xuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0UGFyYW1zID0gdGhpcy5jb252ZXJ0Q29tcG9uZW50UGFyYW1zKChDT1JFLnRoZW1lLnR5cGUgPT0gJ3NlY29uZGFyeScgJiYgQ09SRS5pc1NlY29uZGFyeUNvbXBvbmVudChjb21wb25lbnQpKSA/IGNvbXBvbmVudC5fcGFyYW1zIDogdGhpcy5jb21wb25lbnRzW2NvbXBvbmVudC5fbmFtZV0uX3BhcmFtcyk7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5nZXRDb21wb25lbnRQYXJhbXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gIHBhcmFtc1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSAgcGFyYW1zLmN1cnJlbnQgLSBjb21wb25lbnQgcGFyYW1zXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9ICBwYXJhbXMuZGVmYXVsdCAtIGRlZmF1bHQgUGFyYW1zXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGlkIC0gY29tcG9uZW50IElEXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlGaWx0ZXIoJ2dldENvbXBvbmVudFBhcmFtcycsIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudDogcmVhbD9jb21wb25lbnQuX3BhcmFtczokLmV4dGVuZCh0cnVlLCB7fSwgY29tcG9uZW50Ll9wYXJhbXMgKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogY29tcG9uZW50Ll9wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICdkZWZhdWx0JzogZGVmYXVsdFBhcmFtc1xuICAgICAgICAgICAgICAgIH0sIGlkKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2hhbmdlIGNvbXBvbmVudCBwYXJhbVxuICAgICAgICAgICAgICogQHBhcmFtIGlkIGNvbXBvbmVudCBJRFxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgcGFyYW0gbmFtZVxuICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlIHBhcmFtIHZhbHVlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNoYW5nZUNvbXBvbmVudFBhcmFtczogZnVuY3Rpb24oaWQsIG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoaWQpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBjb21wb25lbnQuX3BhcmFtcztcbiAgICAgICAgICAgICAgICB2YXIgZXh0ZW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyICRpdGVtID0gX3RoaXMuJHRlbXBsYXRlLmZpbmQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWQ9JyArIGlkICsgJ10gPiAuYXBwLWNvbXBvbmVudC1jb250ZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpjaGFuZ2VDb21wb25lbnRQYXJhbXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIF90aGlzLmZpcmUoJ2NoYW5nZUNvbXBvbmVudFBhcmFtcycsIGlkLCBuYW1lLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzYXZlIGN1cnJlbnQgcGFyYW1zXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlKG1haW4sIG5hbWUsIG5ld1ZhbCwgY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pc0FycmF5KG1haW5bbmFtZV0pICYmIHR5cGVvZiBtYWluW25hbWVdW09iamVjdC5rZXlzKG1haW5bbmFtZV0pWzBdXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZChtYWluW25hbWVdW2tdLCBuZXdWYWxba10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQobWFpbltuYW1lXSwgbmV3VmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5bbmFtZV0gPSBuZXdWYWw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5leHRlbmQobWFpbiwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgcGFyYW1zIG9ubHkgaWYgbmFtZSBpc3NldFxuICAgICAgICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpeCBmb3IgcGFyYWxsYXggYmFja2dyb3VuZHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdiZ0ltYWdlJyB8fCBuYW1lID09PSAncGFyYWxsYXgnIHx8IG5hbWUgPT09ICdiZ0ltYWdlUmFkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaXRlbS50cmlnZ2VyKCdkZXN0cm95LnBhcmFsbGF4Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY250MSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY250MiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB6IGluIHBhcmFtc1tuYW1lXSkgeyBjbnQxKys7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHogaW4gdmFsdWUpIHsgY250MisrOyB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dGVuZCA9IGNudDIgPD0gY250MTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5jaGFuZ2VDb21wb25lbnRQYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbV9uYW1lXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gY29tcG9uZW50IElEICAoc2luY2UgdjMuMDMuMSspXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuYXBwbHlGaWx0ZXIoJ2NoYW5nZUNvbXBvbmVudFBhcmFtcycsIHZhbHVlLCBuYW1lLCBwYXJhbXMsIGlkKTtcblxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUocGFyYW1zLCBuYW1lLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlIGdsb2JhbCBwYXJhbXMgaWYgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVHbG9iYWxDb21wb25lbnRzKGlkLCBmdW5jdGlvbihjdXJyZW50LCBnbG9iYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZShnbG9iYWwuX3BhcmFtcywgbmFtZSwgdmFsdWUsIGN1cnJlbnQuX3BhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHJlbmRlciBjdXJyZW50IGNoYW5nZXNcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbXBvbmVudC5fb25QYXJhbXNDaGFuZ2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudC5fb25QYXJhbXNDaGFuZ2UoJGl0ZW0sIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpjaGFuZ2VkQ29tcG9uZW50UGFyYW1zXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGlkIC0gY29tcG9uZW50IGlkXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtTmFtZSAtIHBhcmFtIG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgLSBwYXJhbSB2YWx1ZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIF90aGlzLmZpcmUoJ2NoYW5nZWRDb21wb25lbnRQYXJhbXMnLCBpZCwgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm4gc2VsZWN0IGxpc3Qgd2l0aCBhbmNob3JzXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGVmYXVsdEhyZWZcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0Q29tcG9uZW50c0FuY2hvckxpc3Q6IGZ1bmN0aW9uKGRlZmF1bHRIcmVmLCBwYWdlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBub3RoaW5nU2VsZWN0ZWQgPSAxO1xuICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFByb3AgPSAnc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHRoaXMucmVzdWx0SlNPTltwYWdlIHx8IHRoaXMuY3VycmVudFBhZ2VdLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLnJlc3VsdEpTT05bcGFnZSB8fCB0aGlzLmN1cnJlbnRQYWdlXS5jb21wb25lbnRzW2tdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRIcmVmID09ICcjJyArIGN1cnJlbnQuX2FuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSBzZWxlY3RlZFByb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RoaW5nU2VsZWN0ZWQgPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY3VycmVudC5fYW5jaG9yICE9PSAndW5kZWZpbmVkJyAmJiAhY3VycmVudC5fcG9zaXRpb25BYnNvbHV0ZSAmJiAhY3VycmVudC5fYWx3YXlzQm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWIgPSAoY3VycmVudC5hbGlhcyA/IENPUkUuQVBQLmdldEFkZG9uRGlyKGN1cnJlbnQuYWxpYXMpIDogQ09SRS50aGVtZS5wYXRoICsgJy9jb21wb25lbnRzJykgKyAnLycgKyBjdXJyZW50Ll9uYW1lICsgJy90aHVtYi5wbmcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzRGVmYXVsdEFuY2hvciA9IGN1cnJlbnQuX2FuY2hvci5pbmRleE9mKGN1cnJlbnQuX25hbWUgKyAnLScpID09PSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRBbmNob3JMYWJlbCA9IGlzRGVmYXVsdEFuY2hvciA/IGN1cnJlbnQuX2FuY2hvci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGN1cnJlbnQuX2FuY2hvci5zbGljZSgxKS5yZXBsYWNlKC9cXGQvLCAnICQmJykgOiBjdXJyZW50Ll9hbmNob3I7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnPG9wdGlvbiBkYXRhLXRvb2x0aXBzdGVyPVwicmlnaHRcIiBkYXRhLXRvb2x0aXAtc3JjPVwiJyArIHRodW1iICsgJ1wiIHZhbHVlPVwiJyArIChwYWdlIHx8IHRoaXMuY3VycmVudFBhZ2UpICsgJyMnICsgY3VycmVudC5fYW5jaG9yICsgJ1wiICcgKyBzZWxlY3RlZCArICc+JyArIGN1cnJlbnRBbmNob3JMYWJlbCArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzdWx0ID1cbiAgICAgICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICsgKHBhZ2UgfHwgJycpICsgJyN0b3BcIiAnICsgKGRlZmF1bHRIcmVmID09ICd0b3AnID8gc2VsZWN0ZWRQcm9wIDogJycpICsgJz5Ub3Agb2YgUGFnZTwvb3B0aW9uPicgK1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgK1xuICAgICAgICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgKyAocGFnZSB8fCAnJykgKyAnI2JvdHRvbVwiICcgKyAoZGVmYXVsdEhyZWYgPT0gJ3RvcCcgPyBzZWxlY3RlZFByb3AgOiAnJykgKyAnPkJvdHRvbSBvZiBQYWdlPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmdldENvbXBvbmVudHNBbmNob3JMaXN0XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIGxpc3RcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGVmYXVsdEhyZWZcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmFwcGx5RmlsdGVyKCdnZXRDb21wb25lbnRzQW5jaG9yTGlzdCcsIHJlc3VsdCwgZGVmYXVsdEhyZWYpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICc8b3B0aW9uIHZhbHVlPVwiXCIgZGlzYWJsZWQ9XCJkaXNhYmxlZFwiICcgKyAobm90aGluZ1NlbGVjdGVkID8gJ3NlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJykgKyAnPjwvb3B0aW9uPicgKyByZXN1bHQ7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFVwZGF0ZSBnbG9iYWwgQ29tcG9uZW50c1xuICAgICAgICAgICAgICogQHBhcmFtIGlkXG4gICAgICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgZnVuY3Rpb24oY29tcG9uZW50LCB0aGlzLnJlc3VsdEpTT05bbl0uY29tcG9uZW50W2tdKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB1cGRhdGVHbG9iYWxDb21wb25lbnRzOiBmdW5jdGlvbihpZCwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoaWQpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIGdsb2JhbCBwYXJhbXMgaWYgZXhpc3RcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50Ll9nbG9iYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0aGlzLnJlc3VsdEpTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5yZXN1bHRKU09OW25dLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRKU09OW25dLmNvbXBvbmVudHNba10uX25hbWUgPT0gY29tcG9uZW50Ll9uYW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0SlNPTltuXS5jb21wb25lbnRzW2tdLl9pZCAhPT0gY29tcG9uZW50Ll9pZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhjb21wb25lbnQsIHRoaXMucmVzdWx0SlNPTltuXS5jb21wb25lbnRzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBDT1JFLmZpcmUoJ3VwZGF0ZUdsb2JhbENvbXBvbmVudHMnLCBpZCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAgIC8vIGV2ZW50IGZyb20gcGx1Z2luLXNvcnRhYmxlXG4gICAgICAgICAgICBjaGFuZ2VDb21wb25lbnRQb3NpdGlvbjogZnVuY3Rpb24oaWQsIHByZXZJZCwgb2xkUHJldklkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VDb21wb25lbnRQb3NpdGlvbihpZCwgcHJldklkLCBvbGRQcmV2SWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbmRlcmVkOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50c1N0eWxlcygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICBpbml0R2xvYmFsQ29tcG9uZW50LmNhbGwodGhpcywgaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gaW5pdEdsb2JhbENvbXBvbmVudChpZCkge1xuICAgICAgICBsZXQgbmV3Q29tcG9uZW50ID0gQ09SRS5nZXRDb21wb25lbnQoaWQpO1xuXG4gICAgICAgIGlmIChuZXdDb21wb25lbnQuX2dsb2JhbCAmJiBPYmplY3Qua2V5cyh0aGlzLnJlc3VsdEpTT04pLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIGxldFxuICAgICAgICAgICAgICAgIGFsbFBhZ2VzID0gdGhpcy5yZXN1bHRKU09OLFxuICAgICAgICAgICAgICAgIGN1clBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIGFyclBhZ2VzID0gW107XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGdsb2JhbCBibG9jayBvbiBvdGhlciBwYWdlc1xuICAgICAgICAgICAgaWYobmV3Q29tcG9uZW50Ll9vbmNlKVxuICAgICAgICAgICAgZm9yIChsZXQgcGFnZSBpbiBhbGxQYWdlcykge1xuICAgICAgICAgICAgICAgIGlmIChhbGxQYWdlcy5oYXNPd25Qcm9wZXJ0eShwYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZSAhPT0gY3VyUGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudHMgPSBhbGxQYWdlc1twYWdlXS5jb21wb25lbnRzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzLnNvbWUoZnVuY3Rpb24odiwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuX29uY2UgPT09IG5ld0NvbXBvbmVudC5fb25jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJQYWdlcy5wdXNoKHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBDT1JFLkFQUC5jb25maXJtRGxnKENPUkUuQVBQLlRSKFwiVGhpcyBibG9jayBpcyBnbG9iYWwuIERvIHlvdSB3YW50IHRvIGFkZCBpdCB0byBhbGwgcGFnZXM/XCIpLCBmdW5jdGlvbihvaykge1xuICAgICAgICAgICAgICAgIGlmIChvaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyUGFnZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IENPUkUuQVBQLlRSKFwiUGxlYXNlIHJlbW92ZSAkY29tcG9uZW50JCBvbiBhbGwgcGFnZXNcIikucmVwbGFjZShcIiRjb21wb25lbnQkXCIsIG5ld0NvbXBvbmVudC5fb25jZSB8fCBuZXdDb21wb25lbnQuX25hbWUucmVwbGFjZSgvWzAtOV0vZywgJycpKSArIFwiOjxici8+PGJyLz4tIFwiICsgYXJyUGFnZXMuam9pbihcIjxici8+LSBcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIENPUkUuQVBQLmFsZXJ0RGxnKHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5yZW1vdmVDb21wb25lbnQoaWQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcGFnZSBpbiBhbGxQYWdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxQYWdlcy5oYXNPd25Qcm9wZXJ0eShwYWdlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFnZSAhPT0gY3VyUGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsUGFnZXNbcGFnZV0uY29tcG9uZW50cy5wdXNoKG5ld0NvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxufShqUXVlcnksIG1ickFwcENvcmUpKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-components.js\n")},"./web/app/builder/js/builder-migrate.js":
/*!***********************************************!*\
  !*** ./web/app/builder/js/builder-migrate.js ***!
  \***********************************************/
/*! no static exports found */function(module,exports){eval("/**\r\n * @module  mbrAppCore/migrate\r\n * @description migrate module, use it as stock for depricated or compatability code\r\n */\r\n(function($, CORE) {\r\n    'use strict';\r\n\r\n    var hasComponentStyles; // chashing check Component Styles exists\r\n\r\n    CORE.regExtension({\r\n        name: 'builder/migrate',\r\n        /** @lends module:mbrAppCore/migrate */\r\n        global: {\r\n            /**\r\n             * !!! DEPRICATED, since 3.11.1+ use mbrApp.showMediaImageDialog instead  \r\n             * now used by some addon theme: mobile3-blocks, colorm, clarius\r\n             */\r\n            showMediaImageDialog: function(media, callback, imageOnly) {\r\n                console.warn('mbrAppCore.showMediaImageDialog is depricated, use mbrApp.showMediaImageDialog instead'); //\r\n\r\n                return CORE.APP.showMediaImageDialog(media, callback, imageOnly);\r\n            },\r\n\r\n            /**\r\n             * !!! DEPRICATED, since 3.11.1+ use mbrApp.showMediaVideoDialog instead  \r\n             */\r\n            showMediaVideoDialog: function(media, callback) {\r\n                console.warn('mbrAppCore.showMediaVideoDialog is depricated, use mbrApp.showMediaVideoDialog instead');\r\n\r\n                return CORE.APP.showMediaVideoDialog(media, callback);\r\n            }\r\n        },\r\n        events: {\r\n            load: function() {\r\n                // relink events\r\n\r\n                /**\r\n                 * DEPRICATED, dublicate with mbrApp:saveMediaImageDialog  \r\n                 * now used in core-auto-paddings.js, mobile3\\core.js\r\n                 * @event mbrAppCore:saveMediaImageDialog\r\n                 * @param {jQuery} dialog\r\n                 */\r\n                CORE.APP.on('saveMediaImageDialog', function(modal, media, componentID) {\r\n                    // triggers every time 'mbrAPP.saveMediaImageDialog' is used. My console said: 'ENOUGH' and commented it.\r\n                    // console.warn(\"using mbrAppCore version of saveMediaImageDialog event is depricated\");\r\n                    CORE.fire('saveMediaImageDialog', modal, media, componentID);\r\n                });\r\n\r\n                /**\r\n                 * Show \"Edit Site Styles\" button after usage of \"Site Styles\"\r\n                 */\r\n                CORE.APP.on('openThemeSettings', function() {\r\n                    if (CORE.APP.theme.type === 'secondary' && CORE.APP.hasThemeSettings(CORE.APP.theme.params)) {\r\n                        CORE.APP.$themeToggleBtn.css('visibility', 'visible');\r\n                    }\r\n                });\r\n\r\n                /**\r\n                 * FALLBACKs for compatibility with old projects\r\n                 */\r\n                CORE.addFilter('loadingPageComponent', function(comp, page) {\r\n\r\n                    // fix menu in old projects\r\n                    if (comp._name == 'menu') {\r\n                        // fix Brand name\r\n                        if (comp._params && typeof comp._params.brand !== 'undefined') {\r\n                            comp.brand = '<a href=\"#\">' + comp._params.brand + '</a>';\r\n                            delete comp._params.brand;\r\n                        }\r\n                        // fix menu items\r\n                        if (comp._params && typeof comp._params.items !== 'undefined') {\r\n                            var menuItems = '';\r\n                            for (var m in comp._params.items) {\r\n                                menuItems += '<li><a href=\"' + comp._params.items[m].href + '\" data-app-btn=\"true\" class=\"mbr-menu-item\">' + comp._params.items[m].title + '</a></li>';\r\n                            }\r\n                            comp.items = '<ul class=\"nav nav-pills pull-right\">' + menuItems + '</ul>';\r\n                            delete comp._params.items;\r\n                        }\r\n                    }\r\n\r\n                    // fix anchor name for version < 2.1\r\n                    if (comp._anchor) {\r\n                        comp._anchor = comp._anchor.replace(/\\./i, '_');\r\n                    }\r\n\r\n\r\n                    /**\r\n                     *\r\n                     *\r\n                     * FALLBACK for media blocks (added in 2.5.3 version)\r\n                     * all images and videos moved to media block\r\n                     *\r\n                     *\r\n                     */\r\n                    var media = {};\r\n                    var useMediaImage = 0;\r\n                    var useMediaVideo = 0;\r\n                    if (comp._name == 'menu' || comp._name == 'ext.menu' || comp._name == 'contacts1') {\r\n                        if (comp.logo && typeof comp.logo !== 'object') {\r\n                            media['logo'] = {\r\n                                image: {\r\n                                    src: comp.logo,\r\n                                    'class': comp._name == 'contacts1' ? 'mbr-contacts__img mbr-contacts__img--left' : 'mbr-navbar__brand-img mbr-brand__img',\r\n                                    height: 128\r\n                                }\r\n                            };\r\n                        }\r\n                    }\r\n                    if (comp._name == 'features1') {\r\n                        if (comp.img1 && typeof comp.img1 !== 'object') {\r\n                            media['media1'] = {\r\n                                image: {\r\n                                    src: comp.img1,\r\n                                    width: 600\r\n                                }\r\n                            };\r\n                            delete comp.img1;\r\n                        }\r\n                        if (comp.img2 && typeof comp.img2 !== 'object') {\r\n                            media['media2'] = {\r\n                                image: {\r\n                                    src: comp.img2,\r\n                                    width: 600\r\n                                }\r\n                            };\r\n                            delete comp.img2;\r\n                        }\r\n                        if (comp.img3 && typeof comp.img3 !== 'object') {\r\n                            media['media3'] = {\r\n                                image: {\r\n                                    src: comp.img3,\r\n                                    width: 600\r\n                                }\r\n                            };\r\n                            delete comp.img3;\r\n                        }\r\n                        if (comp.img4 && typeof comp.img4 !== 'object') {\r\n                            media['media4'] = {\r\n                                image: {\r\n                                    src: comp.img4,\r\n                                    width: 600\r\n                                }\r\n                            };\r\n                            delete comp.img4;\r\n                        }\r\n                    }\r\n                    if (comp._name == 'msg-box5' || comp._name == 'msg-box4') {\r\n                        if (comp.image && typeof comp.image !== 'object') {\r\n                            media['media'] = {\r\n                                image: {\r\n                                    src: comp.image,\r\n                                    'class': 'mbr-figure__img',\r\n                                    'width': 1400\r\n                                    //height: 128 -- fixed for\r\n                                }\r\n                            };\r\n\r\n                            if (comp._params) {\r\n                                if (comp._params.video) {\r\n                                    media['media']['video'] = {\r\n                                        'src': comp._params.video.url,\r\n                                        'class': 'mbr-figure__img',\r\n                                        'aspectratio': comp._params.video.aspectratio,\r\n                                        'autoplay': comp._params.video.autoplay,\r\n                                        'loop': comp._params.video.loop\r\n                                    };\r\n                                    if (comp._params.isVideo) {\r\n                                        media['media'].video.active = true;\r\n                                    }\r\n                                }\r\n                            }\r\n                            delete comp.image;\r\n                        }\r\n                    }\r\n                    if (comp._name == 'image1' || comp._name == 'video1' || comp._name == 'image2' || comp._name == 'video2') {\r\n                        if ((comp.image && typeof comp.image !== 'object') || comp._params && comp._params.video) {\r\n                            media['media'] = {\r\n                                image: {\r\n                                    'src': comp.image || 'images/slide3.jpg',\r\n                                    'class': 'mbr-figure__img',\r\n                                    'width': 1400\r\n                                },\r\n                                video: {\r\n                                    'class': 'mbr-figure__img',\r\n                                    'src': comp._params && comp._params.video ? comp._params.video.url : 'http://www.youtube.com/embed/sOSTC6FM6Bw'\r\n                                }\r\n                            };\r\n                            if (comp._params && comp._params.video) {\r\n                                media['media'].video.active = true;\r\n                            }\r\n                            delete comp.image;\r\n                        }\r\n                    }\r\n                    for (var x in media) {\r\n                        comp[x] = media[x];\r\n                    }\r\n\r\n\r\n                    return comp;\r\n                });\r\n\r\n\r\n                // check component styles and add mbrFonts button for all blocks by default\r\n                // for themes has element-styles list pass mbrFonts button adding\r\n                CORE.addFilter('summernoteMakePopover', function(popover, $editable) {\r\n                    // init hasComponentStyles\r\n                    if (typeof hasComponentStyles == 'undefined') {\r\n                        var settings = getWindowVar('window.mbrAppCore.APP.theme.params.theme.settings');\r\n                        if (settings) {\r\n                            var names = []; // for check dublicates only\r\n                            hasComponentStyles = false;\r\n                            for (var i in settings) {\r\n                                var item = settings[i];\r\n                                if (item && (item.type == 'group') && ('rule' in item)) {\r\n                                    hasComponentStyles = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (!hasComponentStyles) {\r\n                        for (var p = popover.length; p >= 0; p--)\r\n                            if (popover[p] && popover[p][0] == 'mbrFonts') {\r\n                                if (popover[p][1] && (popover[p][1].indexOf('mbrFonts') < 0))\r\n                                    popover[p][1].unshift('mbrFonts');\r\n                                if (popover[p][1] && (popover[p][1].indexOf('mbrFontSize') < 0))\r\n                                    popover[p][1].unshift('mbrFontSize');\r\n                                break;\r\n                            }\r\n                    }\r\n\r\n                    return popover;\r\n                });\r\n\r\n                CORE.addFilter('summernoteOptions', function(options, $editable) {\r\n                    // use \"short mode\" only for themes without component styles\r\n                    if (!hasComponentStyles) {\r\n                        options.shortMode = true;\r\n                    }\r\n\r\n                    options.isSecondaryComponent = CORE.APP.isSecondaryComponent(\r\n                        $editable.closest('[data-app-component-id]').attr('data-app-component-id')\r\n                    );\r\n\r\n                    return options;\r\n                });\r\n\r\n            } // load: function(){\r\n        } // events: {\r\n\r\n    });\r\n\r\n    // ----------------\r\n    function getWindowVar(path) {\r\n        path = path.split('.');\r\n        var value = window;\r\n        for (var i = 0; value && (i < path.length); i++)\r\n            value = value[path[i]];\r\n\r\n        return value;\r\n    }\r\n}(jQuery, mbrAppCore));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1taWdyYXRlLmpzP2YyYjYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJCQUEyQjs7QUFFM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUhBQXVIOztBQUV2SDtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQSxpQkFBaUI7OztBQUdqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9EQUFvRCxRQUFRO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhO0FBQ2IsU0FBUzs7QUFFVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDRCQUE0QjtBQUNuRDs7QUFFQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLW1pZ3JhdGUuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQG1vZHVsZSAgbWJyQXBwQ29yZS9taWdyYXRlXHJcbiAqIEBkZXNjcmlwdGlvbiBtaWdyYXRlIG1vZHVsZSwgdXNlIGl0IGFzIHN0b2NrIGZvciBkZXByaWNhdGVkIG9yIGNvbXBhdGFiaWxpdHkgY29kZVxyXG4gKi9cclxuKGZ1bmN0aW9uKCQsIENPUkUpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgaGFzQ29tcG9uZW50U3R5bGVzOyAvLyBjaGFzaGluZyBjaGVjayBDb21wb25lbnQgU3R5bGVzIGV4aXN0c1xyXG5cclxuICAgIENPUkUucmVnRXh0ZW5zaW9uKHtcclxuICAgICAgICBuYW1lOiAnYnVpbGRlci9taWdyYXRlJyxcclxuICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTptYnJBcHBDb3JlL21pZ3JhdGUgKi9cclxuICAgICAgICBnbG9iYWw6IHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqICEhISBERVBSSUNBVEVELCBzaW5jZSAzLjExLjErIHVzZSBtYnJBcHAuc2hvd01lZGlhSW1hZ2VEaWFsb2cgaW5zdGVhZCAgXHJcbiAgICAgICAgICAgICAqIG5vdyB1c2VkIGJ5IHNvbWUgYWRkb24gdGhlbWU6IG1vYmlsZTMtYmxvY2tzLCBjb2xvcm0sIGNsYXJpdXNcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNob3dNZWRpYUltYWdlRGlhbG9nOiBmdW5jdGlvbihtZWRpYSwgY2FsbGJhY2ssIGltYWdlT25seSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdtYnJBcHBDb3JlLnNob3dNZWRpYUltYWdlRGlhbG9nIGlzIGRlcHJpY2F0ZWQsIHVzZSBtYnJBcHAuc2hvd01lZGlhSW1hZ2VEaWFsb2cgaW5zdGVhZCcpOyAvL1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBDT1JFLkFQUC5zaG93TWVkaWFJbWFnZURpYWxvZyhtZWRpYSwgY2FsbGJhY2ssIGltYWdlT25seSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogISEhIERFUFJJQ0FURUQsIHNpbmNlIDMuMTEuMSsgdXNlIG1ickFwcC5zaG93TWVkaWFWaWRlb0RpYWxvZyBpbnN0ZWFkICBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNob3dNZWRpYVZpZGVvRGlhbG9nOiBmdW5jdGlvbihtZWRpYSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignbWJyQXBwQ29yZS5zaG93TWVkaWFWaWRlb0RpYWxvZyBpcyBkZXByaWNhdGVkLCB1c2UgbWJyQXBwLnNob3dNZWRpYVZpZGVvRGlhbG9nIGluc3RlYWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ09SRS5BUFAuc2hvd01lZGlhVmlkZW9EaWFsb2cobWVkaWEsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVsaW5rIGV2ZW50c1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogREVQUklDQVRFRCwgZHVibGljYXRlIHdpdGggbWJyQXBwOnNhdmVNZWRpYUltYWdlRGlhbG9nICBcclxuICAgICAgICAgICAgICAgICAqIG5vdyB1c2VkIGluIGNvcmUtYXV0by1wYWRkaW5ncy5qcywgbW9iaWxlM1xcY29yZS5qc1xyXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2F2ZU1lZGlhSW1hZ2VEaWFsb2dcclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBkaWFsb2dcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgQ09SRS5BUFAub24oJ3NhdmVNZWRpYUltYWdlRGlhbG9nJywgZnVuY3Rpb24obW9kYWwsIG1lZGlhLCBjb21wb25lbnRJRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXJzIGV2ZXJ5IHRpbWUgJ21ickFQUC5zYXZlTWVkaWFJbWFnZURpYWxvZycgaXMgdXNlZC4gTXkgY29uc29sZSBzYWlkOiAnRU5PVUdIJyBhbmQgY29tbWVudGVkIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihcInVzaW5nIG1ickFwcENvcmUgdmVyc2lvbiBvZiBzYXZlTWVkaWFJbWFnZURpYWxvZyBldmVudCBpcyBkZXByaWNhdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIENPUkUuZmlyZSgnc2F2ZU1lZGlhSW1hZ2VEaWFsb2cnLCBtb2RhbCwgbWVkaWEsIGNvbXBvbmVudElEKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogU2hvdyBcIkVkaXQgU2l0ZSBTdHlsZXNcIiBidXR0b24gYWZ0ZXIgdXNhZ2Ugb2YgXCJTaXRlIFN0eWxlc1wiXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIENPUkUuQVBQLm9uKCdvcGVuVGhlbWVTZXR0aW5ncycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChDT1JFLkFQUC50aGVtZS50eXBlID09PSAnc2Vjb25kYXJ5JyAmJiBDT1JFLkFQUC5oYXNUaGVtZVNldHRpbmdzKENPUkUuQVBQLnRoZW1lLnBhcmFtcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5BUFAuJHRoZW1lVG9nZ2xlQnRuLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBGQUxMQkFDS3MgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBvbGQgcHJvamVjdHNcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgQ09SRS5hZGRGaWx0ZXIoJ2xvYWRpbmdQYWdlQ29tcG9uZW50JywgZnVuY3Rpb24oY29tcCwgcGFnZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBmaXggbWVudSBpbiBvbGQgcHJvamVjdHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tcC5fbmFtZSA9PSAnbWVudScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4IEJyYW5kIG5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuX3BhcmFtcyAmJiB0eXBlb2YgY29tcC5fcGFyYW1zLmJyYW5kICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcC5icmFuZCA9ICc8YSBocmVmPVwiI1wiPicgKyBjb21wLl9wYXJhbXMuYnJhbmQgKyAnPC9hPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29tcC5fcGFyYW1zLmJyYW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeCBtZW51IGl0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9wYXJhbXMgJiYgdHlwZW9mIGNvbXAuX3BhcmFtcy5pdGVtcyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZW51SXRlbXMgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG0gaW4gY29tcC5fcGFyYW1zLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUl0ZW1zICs9ICc8bGk+PGEgaHJlZj1cIicgKyBjb21wLl9wYXJhbXMuaXRlbXNbbV0uaHJlZiArICdcIiBkYXRhLWFwcC1idG49XCJ0cnVlXCIgY2xhc3M9XCJtYnItbWVudS1pdGVtXCI+JyArIGNvbXAuX3BhcmFtcy5pdGVtc1ttXS50aXRsZSArICc8L2E+PC9saT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcC5pdGVtcyA9ICc8dWwgY2xhc3M9XCJuYXYgbmF2LXBpbGxzIHB1bGwtcmlnaHRcIj4nICsgbWVudUl0ZW1zICsgJzwvdWw+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLl9wYXJhbXMuaXRlbXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpeCBhbmNob3IgbmFtZSBmb3IgdmVyc2lvbiA8IDIuMVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9hbmNob3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcC5fYW5jaG9yID0gY29tcC5fYW5jaG9yLnJlcGxhY2UoL1xcLi9pLCAnXycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgKiBGQUxMQkFDSyBmb3IgbWVkaWEgYmxvY2tzIChhZGRlZCBpbiAyLjUuMyB2ZXJzaW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAqIGFsbCBpbWFnZXMgYW5kIHZpZGVvcyBtb3ZlZCB0byBtZWRpYSBibG9ja1xyXG4gICAgICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVkaWEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlTWVkaWFJbWFnZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZU1lZGlhVmlkZW8gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9uYW1lID09ICdtZW51JyB8fCBjb21wLl9uYW1lID09ICdleHQubWVudScgfHwgY29tcC5fbmFtZSA9PSAnY29udGFjdHMxJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcC5sb2dvICYmIHR5cGVvZiBjb21wLmxvZ28gIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVsnbG9nbyddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogY29tcC5sb2dvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiBjb21wLl9uYW1lID09ICdjb250YWN0czEnID8gJ21ici1jb250YWN0c19faW1nIG1ici1jb250YWN0c19faW1nLS1sZWZ0JyA6ICdtYnItbmF2YmFyX19icmFuZC1pbWcgbWJyLWJyYW5kX19pbWcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEyOFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuX25hbWUgPT0gJ2ZlYXR1cmVzMScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuaW1nMSAmJiB0eXBlb2YgY29tcC5pbWcxICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFbJ21lZGlhMSddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogY29tcC5pbWcxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLmltZzE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuaW1nMiAmJiB0eXBlb2YgY29tcC5pbWcyICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFbJ21lZGlhMiddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogY29tcC5pbWcyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLmltZzI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuaW1nMyAmJiB0eXBlb2YgY29tcC5pbWczICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFbJ21lZGlhMyddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogY29tcC5pbWczLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLmltZzM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuaW1nNCAmJiB0eXBlb2YgY29tcC5pbWc0ICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFbJ21lZGlhNCddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogY29tcC5pbWc0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNjAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLmltZzQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuX25hbWUgPT0gJ21zZy1ib3g1JyB8fCBjb21wLl9uYW1lID09ICdtc2ctYm94NCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuaW1hZ2UgJiYgdHlwZW9mIGNvbXAuaW1hZ2UgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVsnbWVkaWEnXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6IGNvbXAuaW1hZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdtYnItZmlndXJlX19pbWcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAxNDAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaGVpZ2h0OiAxMjggLS0gZml4ZWQgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tcC5fcGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAuX3BhcmFtcy52aWRlbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVsnbWVkaWEnXVsndmlkZW8nXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcmMnOiBjb21wLl9wYXJhbXMudmlkZW8udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ21ici1maWd1cmVfX2ltZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXNwZWN0cmF0aW8nOiBjb21wLl9wYXJhbXMudmlkZW8uYXNwZWN0cmF0aW8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYXV0b3BsYXknOiBjb21wLl9wYXJhbXMudmlkZW8uYXV0b3BsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbG9vcCc6IGNvbXAuX3BhcmFtcy52aWRlby5sb29wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9wYXJhbXMuaXNWaWRlbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFbJ21lZGlhJ10udmlkZW8uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLmltYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9uYW1lID09ICdpbWFnZTEnIHx8IGNvbXAuX25hbWUgPT0gJ3ZpZGVvMScgfHwgY29tcC5fbmFtZSA9PSAnaW1hZ2UyJyB8fCBjb21wLl9uYW1lID09ICd2aWRlbzInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoY29tcC5pbWFnZSAmJiB0eXBlb2YgY29tcC5pbWFnZSAhPT0gJ29iamVjdCcpIHx8IGNvbXAuX3BhcmFtcyAmJiBjb21wLl9wYXJhbXMudmlkZW8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhWydtZWRpYSddID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzcmMnOiBjb21wLmltYWdlIHx8ICdpbWFnZXMvc2xpZGUzLmpwZycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICdtYnItZmlndXJlX19pbWcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAxNDAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbWJyLWZpZ3VyZV9faW1nJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NyYyc6IGNvbXAuX3BhcmFtcyAmJiBjb21wLl9wYXJhbXMudmlkZW8gPyBjb21wLl9wYXJhbXMudmlkZW8udXJsIDogJ2h0dHA6Ly93d3cueW91dHViZS5jb20vZW1iZWQvc09TVEM2Rk02QncnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wLl9wYXJhbXMgJiYgY29tcC5fcGFyYW1zLnZpZGVvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFbJ21lZGlhJ10udmlkZW8uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb21wLmltYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggaW4gbWVkaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcFt4XSA9IG1lZGlhW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGNvbXBvbmVudCBzdHlsZXMgYW5kIGFkZCBtYnJGb250cyBidXR0b24gZm9yIGFsbCBibG9ja3MgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoZW1lcyBoYXMgZWxlbWVudC1zdHlsZXMgbGlzdCBwYXNzIG1ickZvbnRzIGJ1dHRvbiBhZGRpbmdcclxuICAgICAgICAgICAgICAgIENPUkUuYWRkRmlsdGVyKCdzdW1tZXJub3RlTWFrZVBvcG92ZXInLCBmdW5jdGlvbihwb3BvdmVyLCAkZWRpdGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbml0IGhhc0NvbXBvbmVudFN0eWxlc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaGFzQ29tcG9uZW50U3R5bGVzID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGdldFdpbmRvd1Zhcignd2luZG93Lm1ickFwcENvcmUuQVBQLnRoZW1lLnBhcmFtcy50aGVtZS5zZXR0aW5ncycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lcyA9IFtdOyAvLyBmb3IgY2hlY2sgZHVibGljYXRlcyBvbmx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21wb25lbnRTdHlsZXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHNldHRpbmdzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIChpdGVtLnR5cGUgPT0gJ2dyb3VwJykgJiYgKCdydWxlJyBpbiBpdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21wb25lbnRTdHlsZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzQ29tcG9uZW50U3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHAgPSBwb3BvdmVyLmxlbmd0aDsgcCA+PSAwOyBwLS0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wb3ZlcltwXSAmJiBwb3BvdmVyW3BdWzBdID09ICdtYnJGb250cycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wb3ZlcltwXVsxXSAmJiAocG9wb3ZlcltwXVsxXS5pbmRleE9mKCdtYnJGb250cycpIDwgMCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcG92ZXJbcF1bMV0udW5zaGlmdCgnbWJyRm9udHMnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9wb3ZlcltwXVsxXSAmJiAocG9wb3ZlcltwXVsxXS5pbmRleE9mKCdtYnJGb250U2l6ZScpIDwgMCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcG92ZXJbcF1bMV0udW5zaGlmdCgnbWJyRm9udFNpemUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3BvdmVyO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ09SRS5hZGRGaWx0ZXIoJ3N1bW1lcm5vdGVPcHRpb25zJywgZnVuY3Rpb24ob3B0aW9ucywgJGVkaXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdXNlIFwic2hvcnQgbW9kZVwiIG9ubHkgZm9yIHRoZW1lcyB3aXRob3V0IGNvbXBvbmVudCBzdHlsZXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc0NvbXBvbmVudFN0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNob3J0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmlzU2Vjb25kYXJ5Q29tcG9uZW50ID0gQ09SRS5BUFAuaXNTZWNvbmRhcnlDb21wb25lbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5jbG9zZXN0KCdbZGF0YS1hcHAtY29tcG9uZW50LWlkXScpLmF0dHIoJ2RhdGEtYXBwLWNvbXBvbmVudC1pZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gLy8gbG9hZDogZnVuY3Rpb24oKXtcclxuICAgICAgICB9IC8vIGV2ZW50czoge1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS1cclxuICAgIGZ1bmN0aW9uIGdldFdpbmRvd1ZhcihwYXRoKSB7XHJcbiAgICAgICAgcGF0aCA9IHBhdGguc3BsaXQoJy4nKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSB3aW5kb3c7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IHZhbHVlICYmIChpIDwgcGF0aC5sZW5ndGgpOyBpKyspXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbcGF0aFtpXV07XHJcblxyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxufShqUXVlcnksIG1ickFwcENvcmUpKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-migrate.js\n")},"./web/app/builder/js/builder-pages.js":
/*!*********************************************!*\
  !*** ./web/app/builder/js/builder-pages.js ***!
  \*********************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module  mbrAppCore/pages\n *\n * @description pages\n *\n */\n(function($, CORE) {\n    'use strict';\n\n    // Creating placeholder element\n    let placeholderElement = function () {\n        let divElement = document.createElement('div');\n\n        $(divElement).addClass('placeholderPage');\n\n        let text = CORE.APP.TR('Click the \"plus\" $icon$ to add a new block.').replace('$icon$', '<br/><button class=\"placeholderPage__button mbr-btn btn-red\"><i class=\"mbr-icon-plus\"></i></button>');\n        $(divElement).append(CORE.APP.TR('This is a new empty page.') + '<br/>' + text);\n\n        $(divElement).find('button').on('click', function (e) {\n            setTimeout(function () {\n                $(e.target).css({'pointerEvents': 'none'});\n                CORE.APP.$componentsToggleBtn.trigger('click');\n            }, 0);\n        });\n\n        return divElement;\n    };\n\n    function removePlaceholderPage () {\n        let $placeholderPage = $('.placeholderPage');\n\n        $placeholderPage.length ? $placeholderPage.remove() : \"\";\n\n    }\n\n    function addPlaceholderPage (id) {\n        let\n            idComponent = id || false,\n            currentPage = CORE.currentPage,\n            amountAllComponentsPage = CORE.resultJSON[currentPage].components.length,\n            availabilityPlaceholder = CORE.$body.find(\".placeholderPage\").length;\n\n        // If page has placeholder remove before adding\n        if (availabilityPlaceholder) {\n            CORE.$body.find(\".placeholderPage\").remove();\n        }\n\n\n        if (!idComponent && !amountAllComponentsPage) {\n            $(document.body).append(placeholderElement());\n        } else if (idComponent && !amountAllComponentsPage) {\n            $(document.body).append(placeholderElement());\n        } else {\n            removePlaceholderPage();\n        }\n    }\n\n    CORE.regExtension({\n        name: 'pages',\n        /** @lends module:mbrAppCore/pages */\n        global: {\n            /**\n             * return copy of resultJSON\n             * @return {Object}\n             */\n            getPages: function() {\n                /**\n                 * Get pages\n                 * @filter mbrAppCore->getPages\n                 * @param  {Object} pages\n                 */\n                return this.applyFilter('getPages', $.extend(true, {}, this.resultJSON));\n            },\n\n            /**\n             * check if current page == name\n             * @param {String} name\n             * @return {Bool}\n             */\n            checkCurrentPage: function(name) {\n                return name === this.currentPage;\n            },\n\n            /**\n             * return unique page name\n             * @param num\n             * @return {Object}\n             */\n            getUniquePageName: function(num) {\n                if (!num) {\n                    var size = 0,\n                        key;\n                    for (key in this.resultJSON) {\n                        if (this.resultJSON.hasOwnProperty(key)) size++;\n                    }\n                    num = size;\n                }\n\n                if (this.resultJSON['page' + num + '.html']) {\n                    return this.getUniquePageName(num + 1);\n                }\n\n                /**\n                 * Get unique page name\n                 * @filter mbrAppCore->getUniquePageName\n                 * @param {String} name - page name\n                 * @param num - unique number\n                 */\n                return this.applyFilter('getUniquePageName', 'page' + num + '.html', num);\n\n            },\n\n            /**\n             * return current page components\n             * @param {String} name\n             * @return {Object}\n             */\n            getPageComponents: function(name) {\n                name = name || this.currentPage;\n\n                /**\n                 * Get page components\n                 * @filter mbrAppCore->getPageComponents\n                 * @param components\n                 * @param name - page name\n                 */\n                return this.applyFilter(\n                    'getPageComponents',\n                    this.resultJSON[name] ? $.extend(true, {}, this.resultJSON[name].components) : false,\n                    name\n                );\n            },\n\n            /**\n             * Load Page\n             * @param {String} name - page name\n             * @param {Object} project\n             * @return {Object} promise\n             */\n            loadPage: function(name, project) {\n                var _this = this;\n\n                var page = (project ? project.pages : this.resultJSON)[name],\n                    _once = [], // once component already added\n                    defers = [];\n\n                if (typeof page != 'object' || typeof page.settings != 'object' || typeof page.components != 'object') {\n                    console.log('Error: error component list in page', name);\n\n                    return $.Deferred().reject().promise();\n                }\n\n                // if page is loaded already\n                if (page.components.length && '_id' in page.components[0]) {\n                    return $.when();\n                }\n\n                var loadComponent = function(comp) {\n                    var promise = CORE.isSecondaryComponent(comp) ? $.Deferred().resolve(comp).promise() : CORE.APP.getRealComponent(comp._name);\n                    return promise.then(function(component) {\n                        onLoadComponent.call(CORE, comp, component);\n                    });\n                };\n\n                var onLoadComponent = function(comp, component) {\n\n                    // check _once already added\n                    if(!component){ component = {} };\n                    if (component._once) {\n                        if (_once.indexOf(component._once) < 0) {\n                            _once.push(component._once);\n                        } else {\n                            console.log('Error: dublicate _once =', component._once, 'at component', comp._name);\n                            page.components.splice(n, 1);\n\n                            return;\n                        }\n                    }\n\n                    // set uniq nums for each loaded component\n                    comp._id = this.uniqNum(); // this number is not be saved\n\n                    // ignore for secondary-components\n                    if (this.isSecondaryComponent(component)) return;\n\n                    // add native components params/functions\n                    var unfilteredParams = $.extend({}, comp._params || {});\n\n                    for (var m in this.components[comp._name]) {\n                        if (typeof this.components[comp._name][m] === 'function' ||\n                            /_alwaysTop|_alwaysBottom|_positionAbsolute|_noDrag|_once|_group|_global|_autoPadding|_css|_js|_plugins|_afterNavbarItem/g.test(m) && this.components[comp._name][m]) {\n                            comp[m] = this.components[comp._name][m];\n                        }\n\n                        // add default params if project from old version\n                        if (m === '_params') {\n                            if (typeof comp[m] === 'undefined') {\n                                comp[m] = {};\n                            }\n\n                            var defaultParams = this.components[comp._name][m];\n                            var updatedParams = {};\n                            for (var s in defaultParams) {\n                                if (typeof comp[m][s] === 'undefined') {\n                                    updatedParams[s] = defaultParams[s].default;\n                                } else if ($.isArray(comp[m][s])) {\n                                    updatedParams[s] = $.extend([], true, comp[m][s]);\n                                } else if (typeof comp[m][s] === 'object') {\n                                    updatedParams[s] = $.extend({}, true, comp[m][s]);\n                                } else {\n                                    updatedParams[s] = comp[m][s];\n                                }\n                            }\n                            comp[m] = updatedParams;\n                        }\n                    }\n\n                    // replace system variables - do it after join component with template, because of published project may has vars\n                    comp = CORE.replaceSystemVariables(comp, comp);\n\n                    if (typeof comp._onLoadFromProject == 'function') {\n                        comp._onLoadFromProject(this.components[comp._name], unfilteredParams);\n                    }\n\n                };\n\n\n                var n = 0;\n                while (n < page.components.length) {\n                    var comp = page.components[n];\n\n                    if (!comp) { //\n                        console.log('Warning: Empty component #', n, 'in page', name, '. Will be removed!');\n                        page.components.splice(n, 1);\n                        continue;\n                    }\n\n                    /**\n                     * Change component while loading from project,\n                     * use it for project compatibility failbacks\n                     * @filter mbrAppCore->loadingPageComponent\n                     * @param {Object} comp - component record from project\n                     * @param {Object} page - containing the components\n                     */\n                    comp = _this.applyFilter('loadingPageComponent', comp, page);\n\n                    function isRegistredComponent(name, context) {\n                        if (typeof name !== 'string') return false;\n                        if (context.theme.type === 'secondary') return true;\n                        if (name === 'pro.custom-html') return true; // exception for CodeEditor's component\n                        return name in context.components;\n                    }\n                    // ignore component without name\n                    if (!isRegistredComponent(comp._name, _this)) {\n                        console.log('Error: component with name \"' + comp._name + '\" is not registered, will be passed');\n                        n++;\n                        continue;\n                    }\n\n                    defers.push(loadComponent(comp));\n\n                    n++;\n                } // while(var n in page.components) {\n\n                return $.when.apply($, defers);\n\n            },\n\n            /**\n             * Add New Page\n             * @param {Bool} clone when true - clone current active page\n             * @return {String}\n             */\n            addPage: function(clone) {\n                this.fire('addPage');\n\n                var name = this.getUniquePageName();\n                var result = {\n                    settings: {},\n                    components: []\n                };\n\n                // added custom keywords for default themes while page created\n                if (CORE.APP && /^(default|mobirise3|mobirise4)$/.test(CORE.APP.theme.name)) {\n                    var kwTitle = CORE.APP.spinText('{Website|Website|Site|Web|Web Site|Web Page} {Builder|Builder|Creator|Maker|Generator}');\n                    result.settings.meta_descr = kwTitle + ' Description';\n                }\n\n                if (clone) {\n                    result = CORE.APP.getResultPage(this.resultJSON[clone]);\n                    delete result.settings.main;\n                }\n\n                var regExp = /\\d+/;\n                var title = 'Page' + (regExp.test(name) ? ' ' + name.match(regExp) : '');\n\n                result.settings.title = title;\n\n                /**\n                 * Add page\n                 * @filter mbrAppCore->addPage\n                 * @param page\n                 * @param {String} name - page name\n                 */\n                this.resultJSON[name] = this.applyFilter('addPage', result, name);\n\n                this.fire('addedPage', name);\n\n                return { 'name': name, 'title': title };\n            },\n\n            /**\n             * Remove Page\n             * @param {String} name\n             * @return {Bool}\n             */\n            removePage: function(name) {\n                if (this.resultJSON[name]) {\n                    this.fire('removePage', name);\n                    delete this.resultJSON[name];\n                    this.fire('removedPage', name);\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            /**\n             * Switch Page\n             * @param {String} name\n             * @return {Bool}\n             */\n            switchPage: function(name) {\n                if (this.resultJSON[name]) {\n                    this.fire('switchPage', name);\n                    this.currentPage = name;\n\n                    return this.loadPage(name).then(function() {\n                        CORE.render();\n                        CORE.fire('switchedPage', name);\n                    });\n                }\n\n                return $.Deferred().reject().promise();\n            },\n\n            /**\n             * Change Page Settings (also rename)\n             * @param page\n             * @param {String} setting_name\n             * @param setting_value\n             * @return {String} return new file name when page renamed, else return empty string\n             */\n            changePageSettings: function(page, setting_name, setting_value) {\n                this.fire('changePageSettings', page);\n                if (setting_name !== 'fileName') {\n\n                    /**\n                     * Change page settings\n                     * @filter mbrAppCore->changePageSettings\n                     * @param setting_value\n                     * @param {String} setting_name\n                     * @param page\n                     */\n                    this.resultJSON[page].settings[setting_name] = this.applyFilter('changePageSettings', setting_value, setting_name, page);\n                    this.fire('changedPageSettings', setting_name, page);\n                } else {\n                    setting_value = setting_value.replace(/^[\\.]+|[\"'\\\\\\/\\:\\;<>]/g, ''); // remove wrong symbols from name\n\n                    // add .html fix\n                    if (setting_value) {\n                        let settSplit = setting_value.split('.'),\n                            ext = settSplit[settSplit.length - 1],\n                            allowedExts = ['html', 'shtml', 'xml', 'php', 'asp', 'aspx', 'xhtml', 'htm', 'jsp', 'js'];\n\n                        // check whether the string contains only single word equal extension like \"html\", \"php\" etc.\n                        if ( settSplit.length < 2 || !allowedExts.includes(ext) ) {\n                            setting_value += '.html';\n                        }\n                    }\n\n                    if (setting_value !== '' && !this.resultJSON[setting_value]) {\n                        // clone object with new key and remove old object\n                        Object.defineProperty(this.resultJSON, setting_value, Object.getOwnPropertyDescriptor(this.resultJSON, page));\n                        delete this.resultJSON[page];\n\n                        // change current page name\n                        if (this.currentPage == page) {\n                            this.currentPage = this.applyFilter('changePageSettings', setting_value, setting_name, page);\n                        }\n                        this.fire('changedPageSettings', setting_name, page);\n\n                        return setting_value;\n                    }\n                }\n\n                return '';\n            },\n\n            /**\n             * Return select list with pages\n             * @param {String} defaultHref\n             * @return {String}\n             */\n            getPagesList: function(defaultHref) {\n                var result = '';\n                var nothingSelected = 1;\n                var sortedPages = CORE.APP.sortPagesByOrder(this.getPages());\n\n                for (var k in sortedPages) {\n                    var selected = '';\n                    if (defaultHref == k) {\n                        selected = 'selected=\"selected\"';\n                        nothingSelected = 1;\n                    }\n\n                    var pageLabel = CORE.APP.escapeHtml(sortedPages[k].settings.title ? sortedPages[k].settings.title : k);\n\n                    result += '<option value=\"' + k + '\" ' + selected + ' data-text=\"' + pageLabel + '\">' + pageLabel + '</option>';\n                }\n\n                /**\n                 * Get list of pages\n                 * @filter mbrAppCore->getPagesList\n                 * @param {String} - list of pages\n                 * @param {String} defaultHref\n                 */\n                return this.applyFilter('getPagesList', '<option value=\"\" disabled=\"disabled\" ' + (nothingSelected ? 'selected=\"selected\"' : '') + '></option>' + result, defaultHref);\n            },\n            getMainPage: function() {\n                const pages = this.getPages();\n                for (let key in pages) {\n                    if (pages[key]['settings']['main']) return pages[key];\n                }\n            }\n        },\n        events: {\n            rendered: function (id) {\n                addPlaceholderPage(id);\n            },\n            projectLoaded: function () {\n                CORE.APP.on(\"hideComponents\", function () {\n                    if (CORE.$body.find(\".placeholderPage__button\").length) {\n                        CORE.$body.find(\".placeholderPage__button\").css({'pointerEvents' : ''});\n                    }\n                })\n            },\n            removedComponent: function (id) {\n                addPlaceholderPage(id)\n            }\n        }\n    });\n}(jQuery, mbrAppCore));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wYWdlcy5qcz9jODJhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQyx3QkFBd0I7QUFDekQ7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixPQUFPO0FBQ25DO0FBQ0EscUVBQXFFO0FBQ3JFLGFBQWE7O0FBRWI7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBOztBQUVBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUIsdUJBQXVCLE9BQU87QUFDOUIsd0JBQXdCLE9B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QUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLXBhZ2VzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlICBtYnJBcHBDb3JlL3BhZ2VzXG4gKlxuICogQGRlc2NyaXB0aW9uIHBhZ2VzXG4gKlxuICovXG4oZnVuY3Rpb24oJCwgQ09SRSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIENyZWF0aW5nIHBsYWNlaG9sZGVyIGVsZW1lbnRcbiAgICBsZXQgcGxhY2Vob2xkZXJFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICQoZGl2RWxlbWVudCkuYWRkQ2xhc3MoJ3BsYWNlaG9sZGVyUGFnZScpO1xuXG4gICAgICAgIGxldCB0ZXh0ID0gQ09SRS5BUFAuVFIoJ0NsaWNrIHRoZSBcInBsdXNcIiAkaWNvbiQgdG8gYWRkIGEgbmV3IGJsb2NrLicpLnJlcGxhY2UoJyRpY29uJCcsICc8YnIvPjxidXR0b24gY2xhc3M9XCJwbGFjZWhvbGRlclBhZ2VfX2J1dHRvbiBtYnItYnRuIGJ0bi1yZWRcIj48aSBjbGFzcz1cIm1ici1pY29uLXBsdXNcIj48L2k+PC9idXR0b24+Jyk7XG4gICAgICAgICQoZGl2RWxlbWVudCkuYXBwZW5kKENPUkUuQVBQLlRSKCdUaGlzIGlzIGEgbmV3IGVtcHR5IHBhZ2UuJykgKyAnPGJyLz4nICsgdGV4dCk7XG5cbiAgICAgICAgJChkaXZFbGVtZW50KS5maW5kKCdidXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJChlLnRhcmdldCkuY3NzKHsncG9pbnRlckV2ZW50cyc6ICdub25lJ30pO1xuICAgICAgICAgICAgICAgIENPUkUuQVBQLiRjb21wb25lbnRzVG9nZ2xlQnRuLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRpdkVsZW1lbnQ7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJlbW92ZVBsYWNlaG9sZGVyUGFnZSAoKSB7XG4gICAgICAgIGxldCAkcGxhY2Vob2xkZXJQYWdlID0gJCgnLnBsYWNlaG9sZGVyUGFnZScpO1xuXG4gICAgICAgICRwbGFjZWhvbGRlclBhZ2UubGVuZ3RoID8gJHBsYWNlaG9sZGVyUGFnZS5yZW1vdmUoKSA6IFwiXCI7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRQbGFjZWhvbGRlclBhZ2UgKGlkKSB7XG4gICAgICAgIGxldFxuICAgICAgICAgICAgaWRDb21wb25lbnQgPSBpZCB8fCBmYWxzZSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlID0gQ09SRS5jdXJyZW50UGFnZSxcbiAgICAgICAgICAgIGFtb3VudEFsbENvbXBvbmVudHNQYWdlID0gQ09SRS5yZXN1bHRKU09OW2N1cnJlbnRQYWdlXS5jb21wb25lbnRzLmxlbmd0aCxcbiAgICAgICAgICAgIGF2YWlsYWJpbGl0eVBsYWNlaG9sZGVyID0gQ09SRS4kYm9keS5maW5kKFwiLnBsYWNlaG9sZGVyUGFnZVwiKS5sZW5ndGg7XG5cbiAgICAgICAgLy8gSWYgcGFnZSBoYXMgcGxhY2Vob2xkZXIgcmVtb3ZlIGJlZm9yZSBhZGRpbmdcbiAgICAgICAgaWYgKGF2YWlsYWJpbGl0eVBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICBDT1JFLiRib2R5LmZpbmQoXCIucGxhY2Vob2xkZXJQYWdlXCIpLnJlbW92ZSgpO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAoIWlkQ29tcG9uZW50ICYmICFhbW91bnRBbGxDb21wb25lbnRzUGFnZSkge1xuICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5hcHBlbmQocGxhY2Vob2xkZXJFbGVtZW50KCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGlkQ29tcG9uZW50ICYmICFhbW91bnRBbGxDb21wb25lbnRzUGFnZSkge1xuICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5hcHBlbmQocGxhY2Vob2xkZXJFbGVtZW50KCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVtb3ZlUGxhY2Vob2xkZXJQYWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBDT1JFLnJlZ0V4dGVuc2lvbih7XG4gICAgICAgIG5hbWU6ICdwYWdlcycsXG4gICAgICAgIC8qKiBAbGVuZHMgbW9kdWxlOm1ickFwcENvcmUvcGFnZXMgKi9cbiAgICAgICAgZ2xvYmFsOiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJldHVybiBjb3B5IG9mIHJlc3VsdEpTT05cbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0UGFnZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldCBwYWdlc1xuICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Z2V0UGFnZXNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHBhZ2VzXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlGaWx0ZXIoJ2dldFBhZ2VzJywgJC5leHRlbmQodHJ1ZSwge30sIHRoaXMucmVzdWx0SlNPTikpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBjaGVjayBpZiBjdXJyZW50IHBhZ2UgPT0gbmFtZVxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICAgICAgICAgICAqIEByZXR1cm4ge0Jvb2x9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNoZWNrQ3VycmVudFBhZ2U6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gdGhpcy5jdXJyZW50UGFnZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogcmV0dXJuIHVuaXF1ZSBwYWdlIG5hbWVcbiAgICAgICAgICAgICAqIEBwYXJhbSBudW1cbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0VW5pcXVlUGFnZU5hbWU6IGZ1bmN0aW9uKG51bSkge1xuICAgICAgICAgICAgICAgIGlmICghbnVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5yZXN1bHRKU09OKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRKU09OLmhhc093blByb3BlcnR5KGtleSkpIHNpemUrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBudW0gPSBzaXplO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdEpTT05bJ3BhZ2UnICsgbnVtICsgJy5odG1sJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5pcXVlUGFnZU5hbWUobnVtICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0IHVuaXF1ZSBwYWdlIG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmdldFVuaXF1ZVBhZ2VOYW1lXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBwYWdlIG5hbWVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbnVtIC0gdW5pcXVlIG51bWJlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVyKCdnZXRVbmlxdWVQYWdlTmFtZScsICdwYWdlJyArIG51bSArICcuaHRtbCcsIG51bSk7XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogcmV0dXJuIGN1cnJlbnQgcGFnZSBjb21wb25lbnRzXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRQYWdlQ29tcG9uZW50czogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lIHx8IHRoaXMuY3VycmVudFBhZ2U7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgcGFnZSBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5nZXRQYWdlQ29tcG9uZW50c1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIG5hbWUgLSBwYWdlIG5hbWVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgJ2dldFBhZ2VDb21wb25lbnRzJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRKU09OW25hbWVdID8gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMucmVzdWx0SlNPTltuYW1lXS5jb21wb25lbnRzKSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTG9hZCBQYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIHBhZ2UgbmFtZVxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHByb2plY3RcbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gcHJvbWlzZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsb2FkUGFnZTogZnVuY3Rpb24obmFtZSwgcHJvamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFnZSA9IChwcm9qZWN0ID8gcHJvamVjdC5wYWdlcyA6IHRoaXMucmVzdWx0SlNPTilbbmFtZV0sXG4gICAgICAgICAgICAgICAgICAgIF9vbmNlID0gW10sIC8vIG9uY2UgY29tcG9uZW50IGFscmVhZHkgYWRkZWRcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJzID0gW107XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhZ2UgIT0gJ29iamVjdCcgfHwgdHlwZW9mIHBhZ2Uuc2V0dGluZ3MgIT0gJ29iamVjdCcgfHwgdHlwZW9mIHBhZ2UuY29tcG9uZW50cyAhPSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6IGVycm9yIGNvbXBvbmVudCBsaXN0IGluIHBhZ2UnLCBuYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5EZWZlcnJlZCgpLnJlamVjdCgpLnByb21pc2UoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBwYWdlIGlzIGxvYWRlZCBhbHJlYWR5XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2UuY29tcG9uZW50cy5sZW5ndGggJiYgJ19pZCcgaW4gcGFnZS5jb21wb25lbnRzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkLndoZW4oKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbG9hZENvbXBvbmVudCA9IGZ1bmN0aW9uKGNvbXApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBDT1JFLmlzU2Vjb25kYXJ5Q29tcG9uZW50KGNvbXApID8gJC5EZWZlcnJlZCgpLnJlc29sdmUoY29tcCkucHJvbWlzZSgpIDogQ09SRS5BUFAuZ2V0UmVhbENvbXBvbmVudChjb21wLl9uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbihjb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZENvbXBvbmVudC5jYWxsKENPUkUsIGNvbXAsIGNvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgb25Mb2FkQ29tcG9uZW50ID0gZnVuY3Rpb24oY29tcCwgY29tcG9uZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgX29uY2UgYWxyZWFkeSBhZGRlZFxuICAgICAgICAgICAgICAgICAgICBpZighY29tcG9uZW50KXsgY29tcG9uZW50ID0ge30gfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5fb25jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9vbmNlLmluZGV4T2YoY29tcG9uZW50Ll9vbmNlKSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb25jZS5wdXNoKGNvbXBvbmVudC5fb25jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogZHVibGljYXRlIF9vbmNlID0nLCBjb21wb25lbnQuX29uY2UsICdhdCBjb21wb25lbnQnLCBjb21wLl9uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlLmNvbXBvbmVudHMuc3BsaWNlKG4sIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHVuaXEgbnVtcyBmb3IgZWFjaCBsb2FkZWQgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGNvbXAuX2lkID0gdGhpcy51bmlxTnVtKCk7IC8vIHRoaXMgbnVtYmVyIGlzIG5vdCBiZSBzYXZlZFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBmb3Igc2Vjb25kYXJ5LWNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNTZWNvbmRhcnlDb21wb25lbnQoY29tcG9uZW50KSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBuYXRpdmUgY29tcG9uZW50cyBwYXJhbXMvZnVuY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmZpbHRlcmVkUGFyYW1zID0gJC5leHRlbmQoe30sIGNvbXAuX3BhcmFtcyB8fCB7fSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbSBpbiB0aGlzLmNvbXBvbmVudHNbY29tcC5fbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb21wb25lbnRzW2NvbXAuX25hbWVdW21dID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgL19hbHdheXNUb3B8X2Fsd2F5c0JvdHRvbXxfcG9zaXRpb25BYnNvbHV0ZXxfbm9EcmFnfF9vbmNlfF9ncm91cHxfZ2xvYmFsfF9hdXRvUGFkZGluZ3xfY3NzfF9qc3xfcGx1Z2luc3xfYWZ0ZXJOYXZiYXJJdGVtL2cudGVzdChtKSAmJiB0aGlzLmNvbXBvbmVudHNbY29tcC5fbmFtZV1bbV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wW21dID0gdGhpcy5jb21wb25lbnRzW2NvbXAuX25hbWVdW21dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZGVmYXVsdCBwYXJhbXMgaWYgcHJvamVjdCBmcm9tIG9sZCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobSA9PT0gJ19wYXJhbXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wW21dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wW21dID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRQYXJhbXMgPSB0aGlzLmNvbXBvbmVudHNbY29tcC5fbmFtZV1bbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRQYXJhbXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIGRlZmF1bHRQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wW21dW3NdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFBhcmFtc1tzXSA9IGRlZmF1bHRQYXJhbXNbc10uZGVmYXVsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkLmlzQXJyYXkoY29tcFttXVtzXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRQYXJhbXNbc10gPSAkLmV4dGVuZChbXSwgdHJ1ZSwgY29tcFttXVtzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbXBbbV1bc10gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUGFyYW1zW3NdID0gJC5leHRlbmQoe30sIHRydWUsIGNvbXBbbV1bc10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFBhcmFtc1tzXSA9IGNvbXBbbV1bc107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcFttXSA9IHVwZGF0ZWRQYXJhbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlIHN5c3RlbSB2YXJpYWJsZXMgLSBkbyBpdCBhZnRlciBqb2luIGNvbXBvbmVudCB3aXRoIHRlbXBsYXRlLCBiZWNhdXNlIG9mIHB1Ymxpc2hlZCBwcm9qZWN0IG1heSBoYXMgdmFyc1xuICAgICAgICAgICAgICAgICAgICBjb21wID0gQ09SRS5yZXBsYWNlU3lzdGVtVmFyaWFibGVzKGNvbXAsIGNvbXApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29tcC5fb25Mb2FkRnJvbVByb2plY3QgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcC5fb25Mb2FkRnJvbVByb2plY3QodGhpcy5jb21wb25lbnRzW2NvbXAuX25hbWVdLCB1bmZpbHRlcmVkUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICAgICAgdmFyIG4gPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgcGFnZS5jb21wb25lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcCA9IHBhZ2UuY29tcG9uZW50c1tuXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbXApIHsgLy9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXYXJuaW5nOiBFbXB0eSBjb21wb25lbnQgIycsIG4sICdpbiBwYWdlJywgbmFtZSwgJy4gV2lsbCBiZSByZW1vdmVkIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5jb21wb25lbnRzLnNwbGljZShuLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoYW5nZSBjb21wb25lbnQgd2hpbGUgbG9hZGluZyBmcm9tIHByb2plY3QsXG4gICAgICAgICAgICAgICAgICAgICAqIHVzZSBpdCBmb3IgcHJvamVjdCBjb21wYXRpYmlsaXR5IGZhaWxiYWNrc1xuICAgICAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmxvYWRpbmdQYWdlQ29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wIC0gY29tcG9uZW50IHJlY29yZCBmcm9tIHByb2plY3RcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhZ2UgLSBjb250YWluaW5nIHRoZSBjb21wb25lbnRzXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBjb21wID0gX3RoaXMuYXBwbHlGaWx0ZXIoJ2xvYWRpbmdQYWdlQ29tcG9uZW50JywgY29tcCwgcGFnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gaXNSZWdpc3RyZWRDb21wb25lbnQobmFtZSwgY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQudGhlbWUudHlwZSA9PT0gJ3NlY29uZGFyeScpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdwcm8uY3VzdG9tLWh0bWwnKSByZXR1cm4gdHJ1ZTsgLy8gZXhjZXB0aW9uIGZvciBDb2RlRWRpdG9yJ3MgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSBpbiBjb250ZXh0LmNvbXBvbmVudHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGNvbXBvbmVudCB3aXRob3V0IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1JlZ2lzdHJlZENvbXBvbmVudChjb21wLl9uYW1lLCBfdGhpcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogY29tcG9uZW50IHdpdGggbmFtZSBcIicgKyBjb21wLl9uYW1lICsgJ1wiIGlzIG5vdCByZWdpc3RlcmVkLCB3aWxsIGJlIHBhc3NlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkZWZlcnMucHVzaChsb2FkQ29tcG9uZW50KGNvbXApKTtcblxuICAgICAgICAgICAgICAgICAgICBuKys7XG4gICAgICAgICAgICAgICAgfSAvLyB3aGlsZSh2YXIgbiBpbiBwYWdlLmNvbXBvbmVudHMpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiAkLndoZW4uYXBwbHkoJCwgZGVmZXJzKTtcblxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBZGQgTmV3IFBhZ2VcbiAgICAgICAgICAgICAqIEBwYXJhbSB7Qm9vbH0gY2xvbmUgd2hlbiB0cnVlIC0gY2xvbmUgY3VycmVudCBhY3RpdmUgcGFnZVxuICAgICAgICAgICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhZGRQYWdlOiBmdW5jdGlvbihjbG9uZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgnYWRkUGFnZScpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB0aGlzLmdldFVuaXF1ZVBhZ2VOYW1lKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHt9LFxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBhZGRlZCBjdXN0b20ga2V5d29yZHMgZm9yIGRlZmF1bHQgdGhlbWVzIHdoaWxlIHBhZ2UgY3JlYXRlZFxuICAgICAgICAgICAgICAgIGlmIChDT1JFLkFQUCAmJiAvXihkZWZhdWx0fG1vYmlyaXNlM3xtb2JpcmlzZTQpJC8udGVzdChDT1JFLkFQUC50aGVtZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIga3dUaXRsZSA9IENPUkUuQVBQLnNwaW5UZXh0KCd7V2Vic2l0ZXxXZWJzaXRlfFNpdGV8V2VifFdlYiBTaXRlfFdlYiBQYWdlfSB7QnVpbGRlcnxCdWlsZGVyfENyZWF0b3J8TWFrZXJ8R2VuZXJhdG9yfScpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0dGluZ3MubWV0YV9kZXNjciA9IGt3VGl0bGUgKyAnIERlc2NyaXB0aW9uJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2xvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gQ09SRS5BUFAuZ2V0UmVzdWx0UGFnZSh0aGlzLnJlc3VsdEpTT05bY2xvbmVdKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zZXR0aW5ncy5tYWluO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByZWdFeHAgPSAvXFxkKy87XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJ1BhZ2UnICsgKHJlZ0V4cC50ZXN0KG5hbWUpID8gJyAnICsgbmFtZS5tYXRjaChyZWdFeHApIDogJycpO1xuXG4gICAgICAgICAgICAgICAgcmVzdWx0LnNldHRpbmdzLnRpdGxlID0gdGl0bGU7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBBZGQgcGFnZVxuICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+YWRkUGFnZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSBwYWdlXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBwYWdlIG5hbWVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdEpTT05bbmFtZV0gPSB0aGlzLmFwcGx5RmlsdGVyKCdhZGRQYWdlJywgcmVzdWx0LCBuYW1lKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgnYWRkZWRQYWdlJywgbmFtZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4geyAnbmFtZSc6IG5hbWUsICd0aXRsZSc6IHRpdGxlIH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJlbW92ZSBQYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICogQHJldHVybiB7Qm9vbH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVtb3ZlUGFnZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdEpTT05bbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlKCdyZW1vdmVQYWdlJywgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc3VsdEpTT05bbmFtZV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmlyZSgncmVtb3ZlZFBhZ2UnLCBuYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFN3aXRjaCBQYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAgICAgICAgICogQHJldHVybiB7Qm9vbH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3dpdGNoUGFnZTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdEpTT05bbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlKCdzd2l0Y2hQYWdlJywgbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBuYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRQYWdlKG5hbWUpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDT1JFLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5maXJlKCdzd2l0Y2hlZFBhZ2UnLCBuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuRGVmZXJyZWQoKS5yZWplY3QoKS5wcm9taXNlKCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENoYW5nZSBQYWdlIFNldHRpbmdzIChhbHNvIHJlbmFtZSlcbiAgICAgICAgICAgICAqIEBwYXJhbSBwYWdlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2V0dGluZ19uYW1lXG4gICAgICAgICAgICAgKiBAcGFyYW0gc2V0dGluZ192YWx1ZVxuICAgICAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSByZXR1cm4gbmV3IGZpbGUgbmFtZSB3aGVuIHBhZ2UgcmVuYW1lZCwgZWxzZSByZXR1cm4gZW1wdHkgc3RyaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNoYW5nZVBhZ2VTZXR0aW5nczogZnVuY3Rpb24ocGFnZSwgc2V0dGluZ19uYW1lLCBzZXR0aW5nX3ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJlKCdjaGFuZ2VQYWdlU2V0dGluZ3MnLCBwYWdlKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ19uYW1lICE9PSAnZmlsZU5hbWUnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENoYW5nZSBwYWdlIHNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Y2hhbmdlUGFnZVNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBzZXR0aW5nX3ZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzZXR0aW5nX25hbWVcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0SlNPTltwYWdlXS5zZXR0aW5nc1tzZXR0aW5nX25hbWVdID0gdGhpcy5hcHBseUZpbHRlcignY2hhbmdlUGFnZVNldHRpbmdzJywgc2V0dGluZ192YWx1ZSwgc2V0dGluZ19uYW1lLCBwYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlKCdjaGFuZ2VkUGFnZVNldHRpbmdzJywgc2V0dGluZ19uYW1lLCBwYWdlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nX3ZhbHVlID0gc2V0dGluZ192YWx1ZS5yZXBsYWNlKC9eW1xcLl0rfFtcIidcXFxcXFwvXFw6XFw7PD5dL2csICcnKTsgLy8gcmVtb3ZlIHdyb25nIHN5bWJvbHMgZnJvbSBuYW1lXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIC5odG1sIGZpeFxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ192YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNldHRTcGxpdCA9IHNldHRpbmdfdmFsdWUuc3BsaXQoJy4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHQgPSBzZXR0U3BsaXRbc2V0dFNwbGl0Lmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93ZWRFeHRzID0gWydodG1sJywgJ3NodG1sJywgJ3htbCcsICdwaHAnLCAnYXNwJywgJ2FzcHgnLCAneGh0bWwnLCAnaHRtJywgJ2pzcCcsICdqcyddO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBzdHJpbmcgY29udGFpbnMgb25seSBzaW5nbGUgd29yZCBlcXVhbCBleHRlbnNpb24gbGlrZSBcImh0bWxcIiwgXCJwaHBcIiBldGMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNldHRTcGxpdC5sZW5ndGggPCAyIHx8ICFhbGxvd2VkRXh0cy5pbmNsdWRlcyhleHQpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdfdmFsdWUgKz0gJy5odG1sJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5nX3ZhbHVlICE9PSAnJyAmJiAhdGhpcy5yZXN1bHRKU09OW3NldHRpbmdfdmFsdWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZSBvYmplY3Qgd2l0aCBuZXcga2V5IGFuZCByZW1vdmUgb2xkIG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMucmVzdWx0SlNPTiwgc2V0dGluZ192YWx1ZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0aGlzLnJlc3VsdEpTT04sIHBhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlc3VsdEpTT05bcGFnZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBjdXJyZW50IHBhZ2UgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPT0gcGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB0aGlzLmFwcGx5RmlsdGVyKCdjaGFuZ2VQYWdlU2V0dGluZ3MnLCBzZXR0aW5nX3ZhbHVlLCBzZXR0aW5nX25hbWUsIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXJlKCdjaGFuZ2VkUGFnZVNldHRpbmdzJywgc2V0dGluZ19uYW1lLCBwYWdlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdfdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybiBzZWxlY3QgbGlzdCB3aXRoIHBhZ2VzXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGVmYXVsdEhyZWZcbiAgICAgICAgICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0UGFnZXNMaXN0OiBmdW5jdGlvbihkZWZhdWx0SHJlZikge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgbm90aGluZ1NlbGVjdGVkID0gMTtcbiAgICAgICAgICAgICAgICB2YXIgc29ydGVkUGFnZXMgPSBDT1JFLkFQUC5zb3J0UGFnZXNCeU9yZGVyKHRoaXMuZ2V0UGFnZXMoKSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIHNvcnRlZFBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdEhyZWYgPT0gaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSAnc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJztcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGhpbmdTZWxlY3RlZCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZUxhYmVsID0gQ09SRS5BUFAuZXNjYXBlSHRtbChzb3J0ZWRQYWdlc1trXS5zZXR0aW5ncy50aXRsZSA/IHNvcnRlZFBhZ2VzW2tdLnNldHRpbmdzLnRpdGxlIDogayk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGsgKyAnXCIgJyArIHNlbGVjdGVkICsgJyBkYXRhLXRleHQ9XCInICsgcGFnZUxhYmVsICsgJ1wiPicgKyBwYWdlTGFiZWwgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXQgbGlzdCBvZiBwYWdlc1xuICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Z2V0UGFnZXNMaXN0XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IC0gbGlzdCBvZiBwYWdlc1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkZWZhdWx0SHJlZlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5RmlsdGVyKCdnZXRQYWdlc0xpc3QnLCAnPG9wdGlvbiB2YWx1ZT1cIlwiIGRpc2FibGVkPVwiZGlzYWJsZWRcIiAnICsgKG5vdGhpbmdTZWxlY3RlZCA/ICdzZWxlY3RlZD1cInNlbGVjdGVkXCInIDogJycpICsgJz48L29wdGlvbj4nICsgcmVzdWx0LCBkZWZhdWx0SHJlZik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0TWFpblBhZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5nZXRQYWdlcygpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBwYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZXNba2V5XVsnc2V0dGluZ3MnXVsnbWFpbiddKSByZXR1cm4gcGFnZXNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgcmVuZGVyZWQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgIGFkZFBsYWNlaG9sZGVyUGFnZShpZCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdExvYWRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIENPUkUuQVBQLm9uKFwiaGlkZUNvbXBvbmVudHNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQ09SRS4kYm9keS5maW5kKFwiLnBsYWNlaG9sZGVyUGFnZV9fYnV0dG9uXCIpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS4kYm9keS5maW5kKFwiLnBsYWNlaG9sZGVyUGFnZV9fYnV0dG9uXCIpLmNzcyh7J3BvaW50ZXJFdmVudHMnIDogJyd9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlZENvbXBvbmVudDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkUGxhY2Vob2xkZXJQYWdlKGlkKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KGpRdWVyeSwgbWJyQXBwQ29yZSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-pages.js\n")},"./web/app/builder/js/builder-plugin-class.js":
/*!****************************************************!*\
  !*** ./web/app/builder/js/builder-plugin-class.js ***!
  \****************************************************/
/*! no static exports found */function(module,exports){eval("/**\r\n * @module mbrAppCore/plugins/plugin-element-class\r\n *\r\n * @description\r\n *   template.html\r\n *        mbr-class-var = var1 // name of variable to store selected class in project\r\n *    component.json\r\n *        var1 = <default-style-name> // you may set default class, if no then geted from class attribute of element template\r\n *    rivets\r\n *        use \"mbr-style-var\" as variable\r\n *        value stored to tempory attribute \"data-style-var\"\r\n *    params.json\r\n *        {\r\n *            \"type\": \"group\", \t\t// component group typeт, describe class list too\r\n *            \"rule\": \".mbr-text\", \t// css-selector for elements to apply class from maked list, this is a list identifier\r\n *            \"title\": \"Title 1\", \t// title of class to display\r\n *            \"name\": \"display-1\",\t// css-value of class\r\n *            \"set\": [\t\t\t\t// array of compoment-params\r\n *                {\r\n *                    \"type\": \"font\",\r\n *                    \"var\": \"display1Font\",\r\n *                    \"default\": \"IBM Plex Sans\"\r\n *                },\r\n *                {\r\n *                    \"type\": \"range\", \"min\": 0.4, \"max\" : 9.2, \"step\": 0.4,\r\n *                    \"var\": \"display1Size\",\r\n *                    \"default\": 4.25\r\n *                }\r\n *            ]\r\n *        },\r\n *        this list used for classes-list in summernote button(class-selector)\r\n *    summernote\r\n *        set selected class to element\r\n *        set \"data-style-var\" attribute\r\n *\r\n *\r\n */\r\n(function($, CORE) {\r\n    'use strict';\r\n\r\n    var VAR_ATTR = \"mbr-class-var\"; // attribute with var\r\n    var DATA_MBR_STYLE = \"data-class-var\"; // data attribute for selected style, use with rivets\r\n    // summernote\r\n    var EVENT_NAME = \"mbrStyle\"; // event and button name\r\n    var BUTTON_STYLE = \"note-current-mbrStyle\"; // button text style\r\n\r\n    function isLinksGroup($el) {\r\n        return $el.is('[mbr-buttons], [mbr-menu]');\r\n    }\r\n\r\n    // ------------------ rivets extension ------------------\r\n\r\n    // [mbr-style-var] attribute converted to -> class-name\r\n    rivets.binders['class-var'] = {\r\n        bind: function(el, value) {\r\n            var self = this,\r\n                $el = $(el);\r\n            $el.off('blur.style').on('blur.style', (isLinksGroup($el) ? 'a' : null), function(event) {\r\n                self.observer.setValue($el.attr(DATA_MBR_STYLE));\r\n            });\r\n        },\r\n        unbind: function(el, value) {\r\n            $(el).off('blur.style');\r\n            $(el).removeAttr(DATA_MBR_STYLE);\r\n        },\r\n\r\n        routine: function(el, value) {\r\n            var oldStyle = this.getValue(el);\r\n            var $el = $(el).attr(DATA_MBR_STYLE, value);\r\n            if (isLinksGroup($el)) $el = $el.find('a');\r\n            if (oldStyle) $el.removeClass(oldStyle);\r\n            if (value) $el.addClass(value);\r\n        },\r\n\r\n        getValue: function(el) {\r\n            return $(el).attr(DATA_MBR_STYLE);\r\n        }\r\n    }\r\n\r\n\r\n    // ------------------- summernote extension -------------------\r\n    // Add summernote button for select element style\r\n    // mbrStyle - button and event name\r\n    // Style list getted from theme.settings list with (type==group) and has property \"rule\"\r\n\r\n\r\n\r\n    let rangeBegin;\r\n    let rangeEnd;\r\n\r\n    function updatePopoverPosition(editable) {\r\n        let summernote = $.summernote.eventHandler;\r\n        let layoutInfo = $.summernote.core.dom.makeLayoutInfo(editable);\r\n\r\n        summernote.updateStyleInfo(summernote.modules.editor.currentStyle(layoutInfo.editable()), layoutInfo);\r\n    }\r\n\r\n    // init summernote button with\r\n    var StyleButtonInfo = {\r\n        name: EVENT_NAME,\r\n        className: BUTTON_STYLE,\r\n        title: 'Font',\r\n        label: \"[...]\", // style title for undefined styles\r\n        itemsHtml: \"\", // for force submenu creating without items\r\n\r\n        onUpdate: function(editable, button, styleInfo) { // update button text and selected item\r\n            editable = $(editable).closest(\"[\" + VAR_ATTR + \"]\"); // summernote useing attribute\r\n\r\n            var isCollapsed = styleInfo.range && styleInfo.range.isCollapsed();\r\n\r\n            if (!isCollapsed && !isLinksGroup(editable)) {\r\n                button.hide();\r\n\r\n                // when select text\r\n                if (editable.length && !(rangeBegin === styleInfo.range.so && rangeEnd === styleInfo.range.eo)) {\r\n                    updatePopoverPosition(editable);\r\n\r\n                    rangeBegin = styleInfo.range.so;\r\n                    rangeEnd = styleInfo.range.eo;\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            // check and init button\r\n            var res = initItemListForNode(button, editable);\r\n            if (!res) {\r\n                button.hide();\r\n\r\n                if (editable.length && !(rangeBegin === styleInfo.range.so && rangeEnd === styleInfo.range.eo)) {\r\n                    updatePopoverPosition(editable);\r\n\r\n                    rangeBegin = styleInfo.range.so;\r\n                    rangeEnd = styleInfo.range.eo;\r\n                }\r\n\r\n                return;\r\n            } else\r\n                button.show();\r\n\r\n\r\n            // calc style from node\r\n            var style = editable.attr(DATA_MBR_STYLE);\r\n            if (!style) {\r\n                CORE.eachStylesForNode(editable, function(name) {\r\n                    if ($(editable).hasClass(name))\r\n                        style = name;\r\n                })\r\n            }\r\n\r\n            button.find('li').removeClass('selected');\r\n\r\n            var currentItem = button.find('li [data-value=\"' + style + '\"]');\r\n\r\n            currentItem.parent().addClass('selected');\r\n\r\n            button.find('.mbr-icon-paint-brush').tooltip({\r\n                container: 'body',\r\n                trigger: 'hover',\r\n                placement: 'top'\r\n            });\r\n\r\n            // edit\r\n            button.find(\".\" + BUTTON_STYLE)\r\n                .attr('class', BUTTON_STYLE + ' ' + style)\r\n                .html(currentItem.text());\r\n        },\r\n\r\n        onAction: function(event, editor, layoutInfo) { // == EVENT_NAME\r\n            // focus recovery (fix for dropdown)\r\n            layoutInfo.editable().focus();\r\n\r\n            if ($(event.target).is('.mbr-icon-paint-brush')) {\r\n                setTimeout(function() { // prevent to close on iframe click\r\n                    var groupName = layoutInfo.editor().closest('[' + DATA_MBR_STYLE + ']').attr(DATA_MBR_STYLE);\r\n                    CORE.APP.openThemeSettings();\r\n                    CORE.APP.ToogleThemeSettings.target.$elm // highlight current style in #theme-settings\r\n                        .find('.app-layer-group[data-group-name=\"' + groupName + '\"]')\r\n                        .addClass('selected');\r\n                }, 100);\r\n                return;\r\n            }\r\n\r\n            var newStyle = $(event.target).closest('a').attr('data-value');\r\n            if (newStyle) {\r\n                activateStyle(layoutInfo.editable(), newStyle);\r\n                setTimeout(function() { // update Summernote's position\r\n                    var summernote = $.summernote.eventHandler;\r\n                    summernote.updateStyleInfo(summernote.modules.editor.currentStyle(layoutInfo.editable()), layoutInfo);\r\n                }, 250);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // @return true/false -\r\n    function initItemListForNode(button, node) {\r\n        if (button.find(\"li\").length > 1) return true; // already inited\r\n\r\n        var items = '';\r\n        var maxItemSize = 0;\r\n        CORE.eachStylesForNode(node, function(name, title) {\r\n            items += '<li><a data-event=\"' + EVENT_NAME + '\" href=\"javascript:void(0);\"' +\r\n                'data-value=\"' + name + '\">' +\r\n                '<span class=\"' + name + '\">' +\r\n                    title +\r\n                '</span>' +\r\n                // filter needed for translation\r\n                CORE.applyFilter('buttonFontSiteStyleIcon', '') +\r\n                '</a></li>';\r\n            maxItemSize = Math.max(maxItemSize, title.length);\r\n        });\r\n\r\n        if (!items) return false;\r\n\r\n        //maxItemSize = Math.max(maxItemSize, 10);\r\n\r\n        var menuWidth = Math.min(200, 20 * 2 + 14 + maxItemSize * 18 / 2 + 15); // padding=20, <i>=14, font-size:18, scroll:15 max-width:200\r\n        var ul = button.find(\"ul\");\r\n        ul.html(items);\r\n        ul.css(\"min-width\", menuWidth + \"px\");\r\n\r\n        return true;\r\n    }\r\n\r\n    function activateStyle(context, newStyle) {\r\n\r\n        context = $(context).closest('[' + DATA_MBR_STYLE + ']');\r\n        if (context.attr(DATA_MBR_STYLE) == newStyle) return;\r\n\r\n        var $items = isLinksGroup(context) ? context.find('a') : context;\r\n\r\n        // remove old styles-class\r\n        var classes = [];\r\n        CORE.eachStylesForNode(context, function(name) { classes.push(name); });\r\n        if (classes.length) $items.removeClass(classes.join(' '));\r\n\r\n        $items.addClass(newStyle);\r\n\r\n        context.attr(DATA_MBR_STYLE, newStyle)\r\n            .trigger($.Event('change-theme-style', { themeStyle: newStyle }));\r\n\r\n    }\r\n\r\n\r\n    // --------------------------------------------------------------\r\n\r\n    // template\r\n    var tmpl = $.summernote.renderer.getTemplate();\r\n\r\n    CORE.regExtension({\r\n        name: 'plugin-element-class',\r\n        global: {\r\n            registeredSummernoteButtons: [], // buttons registered with regSummernoteButton\r\n            /**\r\n             *  Alhpa version...\r\n             * @param {Object} info - button info\r\n             * @param {String} info.name\r\n             * @param {Function} info.onInit\r\n             * @param {Function} info.onAction\r\n             */\r\n            regSummernoteButton: function(info) {\r\n                info.event = info.event || info.name;\r\n\r\n                var group = info.name; // must be button group!\r\n\r\n                var plugin = {\r\n                    name: info.name,\r\n                    buttons: {},\r\n                    events: {},\r\n                    langs: {\r\n                        \"en-US\": {}\r\n                    }\r\n                }\r\n                plugin.buttons[info.name] = function(lang, options) {\r\n\r\n                    var label = '<span class=\"' + info.className + '\">' + info.label + '</span>';\r\n                    var buttonInfo = { // summernote button info\r\n                        title: lang[group][info.name],\r\n                        hide: info.hide || false,\r\n                        event: info.event,\r\n                        name: info.name\r\n                    }\r\n                    if (\"itemsHtml\" in info)\r\n                        buttonInfo.dropdown = '<ul class=\"dropdown-menu note-check\">' + info.itemsHtml + '</ul>'\r\n\r\n                    if (info.onInit) info.onInit(buttonInfo);\r\n                    return tmpl.button(label, buttonInfo);\r\n\r\n                }\r\n                plugin.events[info.name] = function(event, editor, layoutInfo) {\r\n                    if (info.onAction) info.onAction(event, editor, layoutInfo);\r\n                }\r\n\r\n                // title\r\n                plugin.langs[\"en-US\"][group] = {};\r\n                plugin.langs[\"en-US\"][group][info.name] = info.title;\r\n\r\n                $.summernote.addPlugin(plugin);\r\n                this.registeredSummernoteButtons.push(info);\r\n            },\r\n\r\n\r\n            // loop for each theme styles that has \"rule\" property\r\n            // @param node - element for styles for\r\n            // @param func_name_title\r\n            // @param func_name_title.name\r\n            // @param func_name_title.title\r\n            eachStylesForNode: function(node, func_name_title) {\r\n                node = $(node).closest(\"[\" + VAR_ATTR + \"]\");\r\n                var styles = []; // {name:, title:}\r\n                var settings = getWindowVar(\"window.mbrAppCore.APP.theme.params.theme.settings\") || [];\r\n                var names = []; // for check dublicates only\r\n                for (var i in settings) {\r\n                    var item = settings[i];\r\n                    if (item && (item.type == \"group\") && (\"rule\" in item) && node.is(item[\"rule\"])) {\r\n                        if (!item.name || (names.indexOf(item.name) >= 0)) {\r\n                            console.warn(\"Wrong name of theme style from theme.settings[\" + i + \"]: {\" + item.name + \",\" + item.title + \"}. Passed...\");\r\n                            continue;\r\n                        }\r\n                        names.push(item.name);\r\n                        func_name_title(item.name, item.title || item.name);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        events: {\r\n\r\n            load: function() {\r\n                var _this = this;\r\n\r\n                // remove \"data-class-var\"\r\n                CORE.addFilter('cleanHTMLplease', function(HTML, forJSON) {\r\n                    HTML.find(\"[\" + DATA_MBR_STYLE + \"]\").removeAttr(DATA_MBR_STYLE);\r\n                    return HTML;\r\n                })\r\n\r\n                CORE.addFilter('summernoteMakePopover', function(popover, $editable) {\r\n                    popover.unshift(['mbrStyle', ['mbrStyle']]);\r\n                    return popover;\r\n                })\r\n\r\n                CORE.addFilter('summernoteOptions', function(options, $editable) {\r\n                    if ($editable.closest('[' + DATA_MBR_STYLE + ']').length) {\r\n                        if (!options.customToolbar) {\r\n                            options.customToolbar = {};\r\n                        }\r\n                        $.extend(options.customToolbar, {\r\n                            mbrFonts: 'off',\r\n                            mbrFontSize: 'off'\r\n                        });\r\n                    }\r\n\r\n                    //for dropdown menu\r\n                    if ($editable.hasClass('dropdown-toggle')) {\r\n                        options.customToolbar = $.extend(options.customToolbar || {}, {\r\n                            mbrLink: 'off'\r\n                        });\r\n                    }\r\n                    return options;\r\n                });\r\n\r\n                CORE.regSummernoteButton(StyleButtonInfo);\r\n\r\n                CORE.APP.on('openThemeSettings', function() {\r\n                    CORE.APP.ToogleThemeSettings.target.$elm // clean highlight styles in #theme-settings\r\n                        .find('[data-group-name]')\r\n                        .removeClass('selected');\r\n                });\r\n\r\n                CORE.APP.on('change.Node.SecondaryComponent', function(args) {\r\n                    var event = args[0],\r\n                        content = args[1];\r\n                    if (event.target.type == 'buttons' || event.target.type == 'menu') {\r\n                        var className = $(event.originalEvent.target).attr(DATA_MBR_STYLE);\r\n                        if (className) {\r\n                            args[1] = $('<div/>')\r\n                                .append(content)\r\n                                .find('a').removeClass(className).end()\r\n                                .html();\r\n                        }\r\n                    }\r\n                });\r\n\r\n            },\r\n\r\n            // regSummernoteButton > onUpdate handler\r\n            summernotePopoverUpdate: function(popover, editable, styleInfo) {\r\n                // dropdown top parent element\r\n                if ($(editable).parent('.dropdown').parent('.nav-dropdown').length && $(popover).hasClass('bottom')) {\r\n                    let $popover = $(popover);\r\n                    let popoverHeight = $popover.height();\r\n                    let newPopoverTopPosition;\r\n\r\n                    if (CORE.APP.appSettings.fullscreenCanvas) {\r\n                        newPopoverTopPosition = parseInt($popover.css('top')) - popoverHeight * 1.2;\r\n                    } else {\r\n                        newPopoverTopPosition = parseInt($popover.css('top')) - popoverHeight * 1.5;\r\n                    }\r\n\r\n                    $popover.css('top', newPopoverTopPosition);\r\n                }\r\n\r\n                for (var i = 0; i < this.registeredSummernoteButtons.length; i++) {\r\n                    var info = this.registeredSummernoteButtons[i];\r\n                    if (info.onUpdate) {\r\n                        var button = $(popover).find('[data-name=\"' + info.name + '\"]');\r\n                        if (button.length)\r\n                            info.onUpdate(editable, button, styleInfo);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    });\r\n\r\n    function getWindowVar(path) {\r\n        path = path.split(\".\");\r\n        var value = window;\r\n        for (var i = 0; value && (i < path.length); i++)\r\n            value = value[path[i]];\r\n        return value;\r\n    }\r\n\r\n})(jQuery, mbrAppCore);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tY2xhc3MuanM/NjY4YiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1DQUFtQztBQUNuQywwQ0FBMEM7QUFDMUM7QUFDQSxnQ0FBZ0M7QUFDaEMsK0NBQStDOztBQUUvQztBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlEQUF5RDtBQUN6RCxpRUFBaUU7O0FBRWpFOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTtBQUNiOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVCx1REFBdUQ7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0Esc0RBQXNEOztBQUV0RDtBQUNBO0FBQ0E7QUFDQSxzRkFBc0Y7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7O0FBRUEsK0VBQStFO0FBQy9FO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHdEQUF3RCxvQkFBb0IsRUFBRTtBQUM5RTs7QUFFQTs7QUFFQTtBQUNBLG9EQUFvRCx1QkFBdUI7O0FBRTNFOzs7QUFHQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCLHVCQUF1QixPQUFPO0FBQzlCLHVCQUF1QixTQUFTO0FBQ2hDLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7O0FBRXRDO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0IsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7OztBQUdiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLEtBQUs7QUFDckM7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxR0FBcUcscUNBQXFDO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0Esb0ZBQW9GO0FBQ3BGO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsK0JBQStCLDZDQUE2QztBQUM1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDRCQUE0QjtBQUNuRDtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLXBsdWdpbi1jbGFzcy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAbW9kdWxlIG1ickFwcENvcmUvcGx1Z2lucy9wbHVnaW4tZWxlbWVudC1jbGFzc1xyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogICB0ZW1wbGF0ZS5odG1sXHJcbiAqICAgICAgICBtYnItY2xhc3MtdmFyID0gdmFyMSAvLyBuYW1lIG9mIHZhcmlhYmxlIHRvIHN0b3JlIHNlbGVjdGVkIGNsYXNzIGluIHByb2plY3RcclxuICogICAgY29tcG9uZW50Lmpzb25cclxuICogICAgICAgIHZhcjEgPSA8ZGVmYXVsdC1zdHlsZS1uYW1lPiAvLyB5b3UgbWF5IHNldCBkZWZhdWx0IGNsYXNzLCBpZiBubyB0aGVuIGdldGVkIGZyb20gY2xhc3MgYXR0cmlidXRlIG9mIGVsZW1lbnQgdGVtcGxhdGVcclxuICogICAgcml2ZXRzXHJcbiAqICAgICAgICB1c2UgXCJtYnItc3R5bGUtdmFyXCIgYXMgdmFyaWFibGVcclxuICogICAgICAgIHZhbHVlIHN0b3JlZCB0byB0ZW1wb3J5IGF0dHJpYnV0ZSBcImRhdGEtc3R5bGUtdmFyXCJcclxuICogICAgcGFyYW1zLmpzb25cclxuICogICAgICAgIHtcclxuICogICAgICAgICAgICBcInR5cGVcIjogXCJncm91cFwiLCBcdFx0Ly8gY29tcG9uZW50IGdyb3VwIHR5cGXRgiwgZGVzY3JpYmUgY2xhc3MgbGlzdCB0b29cclxuICogICAgICAgICAgICBcInJ1bGVcIjogXCIubWJyLXRleHRcIiwgXHQvLyBjc3Mtc2VsZWN0b3IgZm9yIGVsZW1lbnRzIHRvIGFwcGx5IGNsYXNzIGZyb20gbWFrZWQgbGlzdCwgdGhpcyBpcyBhIGxpc3QgaWRlbnRpZmllclxyXG4gKiAgICAgICAgICAgIFwidGl0bGVcIjogXCJUaXRsZSAxXCIsIFx0Ly8gdGl0bGUgb2YgY2xhc3MgdG8gZGlzcGxheVxyXG4gKiAgICAgICAgICAgIFwibmFtZVwiOiBcImRpc3BsYXktMVwiLFx0Ly8gY3NzLXZhbHVlIG9mIGNsYXNzXHJcbiAqICAgICAgICAgICAgXCJzZXRcIjogW1x0XHRcdFx0Ly8gYXJyYXkgb2YgY29tcG9tZW50LXBhcmFtc1xyXG4gKiAgICAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJmb250XCIsXHJcbiAqICAgICAgICAgICAgICAgICAgICBcInZhclwiOiBcImRpc3BsYXkxRm9udFwiLFxyXG4gKiAgICAgICAgICAgICAgICAgICAgXCJkZWZhdWx0XCI6IFwiSUJNIFBsZXggU2Fuc1wiXHJcbiAqICAgICAgICAgICAgICAgIH0sXHJcbiAqICAgICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInJhbmdlXCIsIFwibWluXCI6IDAuNCwgXCJtYXhcIiA6IDkuMiwgXCJzdGVwXCI6IDAuNCxcclxuICogICAgICAgICAgICAgICAgICAgIFwidmFyXCI6IFwiZGlzcGxheTFTaXplXCIsXHJcbiAqICAgICAgICAgICAgICAgICAgICBcImRlZmF1bHRcIjogNC4yNVxyXG4gKiAgICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgICAgXVxyXG4gKiAgICAgICAgfSxcclxuICogICAgICAgIHRoaXMgbGlzdCB1c2VkIGZvciBjbGFzc2VzLWxpc3QgaW4gc3VtbWVybm90ZSBidXR0b24oY2xhc3Mtc2VsZWN0b3IpXHJcbiAqICAgIHN1bW1lcm5vdGVcclxuICogICAgICAgIHNldCBzZWxlY3RlZCBjbGFzcyB0byBlbGVtZW50XHJcbiAqICAgICAgICBzZXQgXCJkYXRhLXN0eWxlLXZhclwiIGF0dHJpYnV0ZVxyXG4gKlxyXG4gKlxyXG4gKi9cclxuKGZ1bmN0aW9uKCQsIENPUkUpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgVkFSX0FUVFIgPSBcIm1ici1jbGFzcy12YXJcIjsgLy8gYXR0cmlidXRlIHdpdGggdmFyXHJcbiAgICB2YXIgREFUQV9NQlJfU1RZTEUgPSBcImRhdGEtY2xhc3MtdmFyXCI7IC8vIGRhdGEgYXR0cmlidXRlIGZvciBzZWxlY3RlZCBzdHlsZSwgdXNlIHdpdGggcml2ZXRzXHJcbiAgICAvLyBzdW1tZXJub3RlXHJcbiAgICB2YXIgRVZFTlRfTkFNRSA9IFwibWJyU3R5bGVcIjsgLy8gZXZlbnQgYW5kIGJ1dHRvbiBuYW1lXHJcbiAgICB2YXIgQlVUVE9OX1NUWUxFID0gXCJub3RlLWN1cnJlbnQtbWJyU3R5bGVcIjsgLy8gYnV0dG9uIHRleHQgc3R5bGVcclxuXHJcbiAgICBmdW5jdGlvbiBpc0xpbmtzR3JvdXAoJGVsKSB7XHJcbiAgICAgICAgcmV0dXJuICRlbC5pcygnW21ici1idXR0b25zXSwgW21ici1tZW51XScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLSByaXZldHMgZXh0ZW5zaW9uIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8vIFttYnItc3R5bGUtdmFyXSBhdHRyaWJ1dGUgY29udmVydGVkIHRvIC0+IGNsYXNzLW5hbWVcclxuICAgIHJpdmV0cy5iaW5kZXJzWydjbGFzcy12YXInXSA9IHtcclxuICAgICAgICBiaW5kOiBmdW5jdGlvbihlbCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgJGVsID0gJChlbCk7XHJcbiAgICAgICAgICAgICRlbC5vZmYoJ2JsdXIuc3R5bGUnKS5vbignYmx1ci5zdHlsZScsIChpc0xpbmtzR3JvdXAoJGVsKSA/ICdhJyA6IG51bGwpLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vYnNlcnZlci5zZXRWYWx1ZSgkZWwuYXR0cihEQVRBX01CUl9TVFlMRSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVuYmluZDogZnVuY3Rpb24oZWwsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICQoZWwpLm9mZignYmx1ci5zdHlsZScpO1xyXG4gICAgICAgICAgICAkKGVsKS5yZW1vdmVBdHRyKERBVEFfTUJSX1NUWUxFKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByb3V0aW5lOiBmdW5jdGlvbihlbCwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZFN0eWxlID0gdGhpcy5nZXRWYWx1ZShlbCk7XHJcbiAgICAgICAgICAgIHZhciAkZWwgPSAkKGVsKS5hdHRyKERBVEFfTUJSX1NUWUxFLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIGlmIChpc0xpbmtzR3JvdXAoJGVsKSkgJGVsID0gJGVsLmZpbmQoJ2EnKTtcclxuICAgICAgICAgICAgaWYgKG9sZFN0eWxlKSAkZWwucmVtb3ZlQ2xhc3Mob2xkU3R5bGUpO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpICRlbC5hZGRDbGFzcyh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKGVsKS5hdHRyKERBVEFfTUJSX1NUWUxFKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0gc3VtbWVybm90ZSBleHRlbnNpb24gLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgLy8gQWRkIHN1bW1lcm5vdGUgYnV0dG9uIGZvciBzZWxlY3QgZWxlbWVudCBzdHlsZVxyXG4gICAgLy8gbWJyU3R5bGUgLSBidXR0b24gYW5kIGV2ZW50IG5hbWVcclxuICAgIC8vIFN0eWxlIGxpc3QgZ2V0dGVkIGZyb20gdGhlbWUuc2V0dGluZ3MgbGlzdCB3aXRoICh0eXBlPT1ncm91cCkgYW5kIGhhcyBwcm9wZXJ0eSBcInJ1bGVcIlxyXG5cclxuXHJcblxyXG4gICAgbGV0IHJhbmdlQmVnaW47XHJcbiAgICBsZXQgcmFuZ2VFbmQ7XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlUG9wb3ZlclBvc2l0aW9uKGVkaXRhYmxlKSB7XHJcbiAgICAgICAgbGV0IHN1bW1lcm5vdGUgPSAkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyO1xyXG4gICAgICAgIGxldCBsYXlvdXRJbmZvID0gJC5zdW1tZXJub3RlLmNvcmUuZG9tLm1ha2VMYXlvdXRJbmZvKGVkaXRhYmxlKTtcclxuXHJcbiAgICAgICAgc3VtbWVybm90ZS51cGRhdGVTdHlsZUluZm8oc3VtbWVybm90ZS5tb2R1bGVzLmVkaXRvci5jdXJyZW50U3R5bGUobGF5b3V0SW5mby5lZGl0YWJsZSgpKSwgbGF5b3V0SW5mbyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaW5pdCBzdW1tZXJub3RlIGJ1dHRvbiB3aXRoXHJcbiAgICB2YXIgU3R5bGVCdXR0b25JbmZvID0ge1xyXG4gICAgICAgIG5hbWU6IEVWRU5UX05BTUUsXHJcbiAgICAgICAgY2xhc3NOYW1lOiBCVVRUT05fU1RZTEUsXHJcbiAgICAgICAgdGl0bGU6ICdGb250JyxcclxuICAgICAgICBsYWJlbDogXCJbLi4uXVwiLCAvLyBzdHlsZSB0aXRsZSBmb3IgdW5kZWZpbmVkIHN0eWxlc1xyXG4gICAgICAgIGl0ZW1zSHRtbDogXCJcIiwgLy8gZm9yIGZvcmNlIHN1Ym1lbnUgY3JlYXRpbmcgd2l0aG91dCBpdGVtc1xyXG5cclxuICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oZWRpdGFibGUsIGJ1dHRvbiwgc3R5bGVJbmZvKSB7IC8vIHVwZGF0ZSBidXR0b24gdGV4dCBhbmQgc2VsZWN0ZWQgaXRlbVxyXG4gICAgICAgICAgICBlZGl0YWJsZSA9ICQoZWRpdGFibGUpLmNsb3Nlc3QoXCJbXCIgKyBWQVJfQVRUUiArIFwiXVwiKTsgLy8gc3VtbWVybm90ZSB1c2VpbmcgYXR0cmlidXRlXHJcblxyXG4gICAgICAgICAgICB2YXIgaXNDb2xsYXBzZWQgPSBzdHlsZUluZm8ucmFuZ2UgJiYgc3R5bGVJbmZvLnJhbmdlLmlzQ29sbGFwc2VkKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzQ29sbGFwc2VkICYmICFpc0xpbmtzR3JvdXAoZWRpdGFibGUpKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gc2VsZWN0IHRleHRcclxuICAgICAgICAgICAgICAgIGlmIChlZGl0YWJsZS5sZW5ndGggJiYgIShyYW5nZUJlZ2luID09PSBzdHlsZUluZm8ucmFuZ2Uuc28gJiYgcmFuZ2VFbmQgPT09IHN0eWxlSW5mby5yYW5nZS5lbykpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQb3BvdmVyUG9zaXRpb24oZWRpdGFibGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByYW5nZUJlZ2luID0gc3R5bGVJbmZvLnJhbmdlLnNvO1xyXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlRW5kID0gc3R5bGVJbmZvLnJhbmdlLmVvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY2hlY2sgYW5kIGluaXQgYnV0dG9uXHJcbiAgICAgICAgICAgIHZhciByZXMgPSBpbml0SXRlbUxpc3RGb3JOb2RlKGJ1dHRvbiwgZWRpdGFibGUpO1xyXG4gICAgICAgICAgICBpZiAoIXJlcykge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRpdGFibGUubGVuZ3RoICYmICEocmFuZ2VCZWdpbiA9PT0gc3R5bGVJbmZvLnJhbmdlLnNvICYmIHJhbmdlRW5kID09PSBzdHlsZUluZm8ucmFuZ2UuZW8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUG9wb3ZlclBvc2l0aW9uKGVkaXRhYmxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2VCZWdpbiA9IHN0eWxlSW5mby5yYW5nZS5zbztcclxuICAgICAgICAgICAgICAgICAgICByYW5nZUVuZCA9IHN0eWxlSW5mby5yYW5nZS5lbztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnNob3coKTtcclxuXHJcblxyXG4gICAgICAgICAgICAvLyBjYWxjIHN0eWxlIGZyb20gbm9kZVxyXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBlZGl0YWJsZS5hdHRyKERBVEFfTUJSX1NUWUxFKTtcclxuICAgICAgICAgICAgaWYgKCFzdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgQ09SRS5lYWNoU3R5bGVzRm9yTm9kZShlZGl0YWJsZSwgZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKGVkaXRhYmxlKS5oYXNDbGFzcyhuYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnV0dG9uLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBidXR0b24uZmluZCgnbGkgW2RhdGEtdmFsdWU9XCInICsgc3R5bGUgKyAnXCJdJyk7XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50SXRlbS5wYXJlbnQoKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbi5maW5kKCcubWJyLWljb24tcGFpbnQtYnJ1c2gnKS50b29sdGlwKHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJ2JvZHknLFxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2hvdmVyJyxcclxuICAgICAgICAgICAgICAgIHBsYWNlbWVudDogJ3RvcCdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBlZGl0XHJcbiAgICAgICAgICAgIGJ1dHRvbi5maW5kKFwiLlwiICsgQlVUVE9OX1NUWUxFKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgQlVUVE9OX1NUWUxFICsgJyAnICsgc3R5bGUpXHJcbiAgICAgICAgICAgICAgICAuaHRtbChjdXJyZW50SXRlbS50ZXh0KCkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG9uQWN0aW9uOiBmdW5jdGlvbihldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7IC8vID09IEVWRU5UX05BTUVcclxuICAgICAgICAgICAgLy8gZm9jdXMgcmVjb3ZlcnkgKGZpeCBmb3IgZHJvcGRvd24pXHJcbiAgICAgICAgICAgIGxheW91dEluZm8uZWRpdGFibGUoKS5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5pcygnLm1ici1pY29uLXBhaW50LWJydXNoJykpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IC8vIHByZXZlbnQgdG8gY2xvc2Ugb24gaWZyYW1lIGNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwTmFtZSA9IGxheW91dEluZm8uZWRpdG9yKCkuY2xvc2VzdCgnWycgKyBEQVRBX01CUl9TVFlMRSArICddJykuYXR0cihEQVRBX01CUl9TVFlMRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ09SRS5BUFAub3BlblRoZW1lU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBDT1JFLkFQUC5Ub29nbGVUaGVtZVNldHRpbmdzLnRhcmdldC4kZWxtIC8vIGhpZ2hsaWdodCBjdXJyZW50IHN0eWxlIGluICN0aGVtZS1zZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLmFwcC1sYXllci1ncm91cFtkYXRhLWdyb3VwLW5hbWU9XCInICsgZ3JvdXBOYW1lICsgJ1wiXScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBuZXdTdHlsZSA9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCdhJykuYXR0cignZGF0YS12YWx1ZScpO1xyXG4gICAgICAgICAgICBpZiAobmV3U3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlU3R5bGUobGF5b3V0SW5mby5lZGl0YWJsZSgpLCBuZXdTdHlsZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAvLyB1cGRhdGUgU3VtbWVybm90ZSdzIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bW1lcm5vdGUgPSAkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHN1bW1lcm5vdGUudXBkYXRlU3R5bGVJbmZvKHN1bW1lcm5vdGUubW9kdWxlcy5lZGl0b3IuY3VycmVudFN0eWxlKGxheW91dEluZm8uZWRpdGFibGUoKSksIGxheW91dEluZm8pO1xyXG4gICAgICAgICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gQHJldHVybiB0cnVlL2ZhbHNlIC1cclxuICAgIGZ1bmN0aW9uIGluaXRJdGVtTGlzdEZvck5vZGUoYnV0dG9uLCBub2RlKSB7XHJcbiAgICAgICAgaWYgKGJ1dHRvbi5maW5kKFwibGlcIikubGVuZ3RoID4gMSkgcmV0dXJuIHRydWU7IC8vIGFscmVhZHkgaW5pdGVkXHJcblxyXG4gICAgICAgIHZhciBpdGVtcyA9ICcnO1xyXG4gICAgICAgIHZhciBtYXhJdGVtU2l6ZSA9IDA7XHJcbiAgICAgICAgQ09SRS5lYWNoU3R5bGVzRm9yTm9kZShub2RlLCBmdW5jdGlvbihuYW1lLCB0aXRsZSkge1xyXG4gICAgICAgICAgICBpdGVtcyArPSAnPGxpPjxhIGRhdGEtZXZlbnQ9XCInICsgRVZFTlRfTkFNRSArICdcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiJyArXHJcbiAgICAgICAgICAgICAgICAnZGF0YS12YWx1ZT1cIicgKyBuYW1lICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiJyArIG5hbWUgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgK1xyXG4gICAgICAgICAgICAgICAgJzwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgIC8vIGZpbHRlciBuZWVkZWQgZm9yIHRyYW5zbGF0aW9uXHJcbiAgICAgICAgICAgICAgICBDT1JFLmFwcGx5RmlsdGVyKCdidXR0b25Gb250U2l0ZVN0eWxlSWNvbicsICcnKSArXHJcbiAgICAgICAgICAgICAgICAnPC9hPjwvbGk+JztcclxuICAgICAgICAgICAgbWF4SXRlbVNpemUgPSBNYXRoLm1heChtYXhJdGVtU2l6ZSwgdGl0bGUubGVuZ3RoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFpdGVtcykgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAvL21heEl0ZW1TaXplID0gTWF0aC5tYXgobWF4SXRlbVNpemUsIDEwKTtcclxuXHJcbiAgICAgICAgdmFyIG1lbnVXaWR0aCA9IE1hdGgubWluKDIwMCwgMjAgKiAyICsgMTQgKyBtYXhJdGVtU2l6ZSAqIDE4IC8gMiArIDE1KTsgLy8gcGFkZGluZz0yMCwgPGk+PTE0LCBmb250LXNpemU6MTgsIHNjcm9sbDoxNSBtYXgtd2lkdGg6MjAwXHJcbiAgICAgICAgdmFyIHVsID0gYnV0dG9uLmZpbmQoXCJ1bFwiKTtcclxuICAgICAgICB1bC5odG1sKGl0ZW1zKTtcclxuICAgICAgICB1bC5jc3MoXCJtaW4td2lkdGhcIiwgbWVudVdpZHRoICsgXCJweFwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZhdGVTdHlsZShjb250ZXh0LCBuZXdTdHlsZSkge1xyXG5cclxuICAgICAgICBjb250ZXh0ID0gJChjb250ZXh0KS5jbG9zZXN0KCdbJyArIERBVEFfTUJSX1NUWUxFICsgJ10nKTtcclxuICAgICAgICBpZiAoY29udGV4dC5hdHRyKERBVEFfTUJSX1NUWUxFKSA9PSBuZXdTdHlsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB2YXIgJGl0ZW1zID0gaXNMaW5rc0dyb3VwKGNvbnRleHQpID8gY29udGV4dC5maW5kKCdhJykgOiBjb250ZXh0O1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgb2xkIHN0eWxlcy1jbGFzc1xyXG4gICAgICAgIHZhciBjbGFzc2VzID0gW107XHJcbiAgICAgICAgQ09SRS5lYWNoU3R5bGVzRm9yTm9kZShjb250ZXh0LCBmdW5jdGlvbihuYW1lKSB7IGNsYXNzZXMucHVzaChuYW1lKTsgfSk7XHJcbiAgICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoKSAkaXRlbXMucmVtb3ZlQ2xhc3MoY2xhc3Nlcy5qb2luKCcgJykpO1xyXG5cclxuICAgICAgICAkaXRlbXMuYWRkQ2xhc3MobmV3U3R5bGUpO1xyXG5cclxuICAgICAgICBjb250ZXh0LmF0dHIoREFUQV9NQlJfU1RZTEUsIG5ld1N0eWxlKVxyXG4gICAgICAgICAgICAudHJpZ2dlcigkLkV2ZW50KCdjaGFuZ2UtdGhlbWUtc3R5bGUnLCB7IHRoZW1lU3R5bGU6IG5ld1N0eWxlIH0pKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gdGVtcGxhdGVcclxuICAgIHZhciB0bXBsID0gJC5zdW1tZXJub3RlLnJlbmRlcmVyLmdldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgQ09SRS5yZWdFeHRlbnNpb24oe1xyXG4gICAgICAgIG5hbWU6ICdwbHVnaW4tZWxlbWVudC1jbGFzcycsXHJcbiAgICAgICAgZ2xvYmFsOiB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyZWRTdW1tZXJub3RlQnV0dG9uczogW10sIC8vIGJ1dHRvbnMgcmVnaXN0ZXJlZCB3aXRoIHJlZ1N1bW1lcm5vdGVCdXR0b25cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqICBBbGhwYSB2ZXJzaW9uLi4uXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbmZvIC0gYnV0dG9uIGluZm9cclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGluZm8ubmFtZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbmZvLm9uSW5pdFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbmZvLm9uQWN0aW9uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZWdTdW1tZXJub3RlQnV0dG9uOiBmdW5jdGlvbihpbmZvKSB7XHJcbiAgICAgICAgICAgICAgICBpbmZvLmV2ZW50ID0gaW5mby5ldmVudCB8fCBpbmZvLm5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gaW5mby5uYW1lOyAvLyBtdXN0IGJlIGJ1dHRvbiBncm91cCFcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGluZm8ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBldmVudHM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxhbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZW4tVVNcIjoge31cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwbHVnaW4uYnV0dG9uc1tpbmZvLm5hbWVdID0gZnVuY3Rpb24obGFuZywgb3B0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSAnPHNwYW4gY2xhc3M9XCInICsgaW5mby5jbGFzc05hbWUgKyAnXCI+JyArIGluZm8ubGFiZWwgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbkluZm8gPSB7IC8vIHN1bW1lcm5vdGUgYnV0dG9uIGluZm9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGxhbmdbZ3JvdXBdW2luZm8ubmFtZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGU6IGluZm8uaGlkZSB8fCBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGluZm8uZXZlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGluZm8ubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJpdGVtc0h0bWxcIiBpbiBpbmZvKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25JbmZvLmRyb3Bkb3duID0gJzx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnUgbm90ZS1jaGVja1wiPicgKyBpbmZvLml0ZW1zSHRtbCArICc8L3VsPidcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8ub25Jbml0KSBpbmZvLm9uSW5pdChidXR0b25JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG1wbC5idXR0b24obGFiZWwsIGJ1dHRvbkluZm8pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBsdWdpbi5ldmVudHNbaW5mby5uYW1lXSA9IGZ1bmN0aW9uKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5vbkFjdGlvbikgaW5mby5vbkFjdGlvbihldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0aXRsZVxyXG4gICAgICAgICAgICAgICAgcGx1Z2luLmxhbmdzW1wiZW4tVVNcIl1bZ3JvdXBdID0ge307XHJcbiAgICAgICAgICAgICAgICBwbHVnaW4ubGFuZ3NbXCJlbi1VU1wiXVtncm91cF1baW5mby5uYW1lXSA9IGluZm8udGl0bGU7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5zdW1tZXJub3RlLmFkZFBsdWdpbihwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkU3VtbWVybm90ZUJ1dHRvbnMucHVzaChpbmZvKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgICAgICAvLyBsb29wIGZvciBlYWNoIHRoZW1lIHN0eWxlcyB0aGF0IGhhcyBcInJ1bGVcIiBwcm9wZXJ0eVxyXG4gICAgICAgICAgICAvLyBAcGFyYW0gbm9kZSAtIGVsZW1lbnQgZm9yIHN0eWxlcyBmb3JcclxuICAgICAgICAgICAgLy8gQHBhcmFtIGZ1bmNfbmFtZV90aXRsZVxyXG4gICAgICAgICAgICAvLyBAcGFyYW0gZnVuY19uYW1lX3RpdGxlLm5hbWVcclxuICAgICAgICAgICAgLy8gQHBhcmFtIGZ1bmNfbmFtZV90aXRsZS50aXRsZVxyXG4gICAgICAgICAgICBlYWNoU3R5bGVzRm9yTm9kZTogZnVuY3Rpb24obm9kZSwgZnVuY19uYW1lX3RpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlID0gJChub2RlKS5jbG9zZXN0KFwiW1wiICsgVkFSX0FUVFIgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGVzID0gW107IC8vIHtuYW1lOiwgdGl0bGU6fVxyXG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gZ2V0V2luZG93VmFyKFwid2luZG93Lm1ickFwcENvcmUuQVBQLnRoZW1lLnBhcmFtcy50aGVtZS5zZXR0aW5nc1wiKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lcyA9IFtdOyAvLyBmb3IgY2hlY2sgZHVibGljYXRlcyBvbmx5XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIHNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBzZXR0aW5nc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiAoaXRlbS50eXBlID09IFwiZ3JvdXBcIikgJiYgKFwicnVsZVwiIGluIGl0ZW0pICYmIG5vZGUuaXMoaXRlbVtcInJ1bGVcIl0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXRlbS5uYW1lIHx8IChuYW1lcy5pbmRleE9mKGl0ZW0ubmFtZSkgPj0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIldyb25nIG5hbWUgb2YgdGhlbWUgc3R5bGUgZnJvbSB0aGVtZS5zZXR0aW5nc1tcIiArIGkgKyBcIl06IHtcIiArIGl0ZW0ubmFtZSArIFwiLFwiICsgaXRlbS50aXRsZSArIFwifS4gUGFzc2VkLi4uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChpdGVtLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jX25hbWVfdGl0bGUoaXRlbS5uYW1lLCBpdGVtLnRpdGxlIHx8IGl0ZW0ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBldmVudHM6IHtcclxuXHJcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgXCJkYXRhLWNsYXNzLXZhclwiXHJcbiAgICAgICAgICAgICAgICBDT1JFLmFkZEZpbHRlcignY2xlYW5IVE1McGxlYXNlJywgZnVuY3Rpb24oSFRNTCwgZm9ySlNPTikge1xyXG4gICAgICAgICAgICAgICAgICAgIEhUTUwuZmluZChcIltcIiArIERBVEFfTUJSX1NUWUxFICsgXCJdXCIpLnJlbW92ZUF0dHIoREFUQV9NQlJfU1RZTEUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBIVE1MO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBDT1JFLmFkZEZpbHRlcignc3VtbWVybm90ZU1ha2VQb3BvdmVyJywgZnVuY3Rpb24ocG9wb3ZlciwgJGVkaXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wb3Zlci51bnNoaWZ0KFsnbWJyU3R5bGUnLCBbJ21iclN0eWxlJ11dKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9wb3ZlcjtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgQ09SRS5hZGRGaWx0ZXIoJ3N1bW1lcm5vdGVPcHRpb25zJywgZnVuY3Rpb24ob3B0aW9ucywgJGVkaXRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlZGl0YWJsZS5jbG9zZXN0KCdbJyArIERBVEFfTUJSX1NUWUxFICsgJ10nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmN1c3RvbVRvb2xiYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY3VzdG9tVG9vbGJhciA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKG9wdGlvbnMuY3VzdG9tVG9vbGJhciwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWJyRm9udHM6ICdvZmYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWJyRm9udFNpemU6ICdvZmYnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9mb3IgZHJvcGRvd24gbWVudVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWRpdGFibGUuaGFzQ2xhc3MoJ2Ryb3Bkb3duLXRvZ2dsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY3VzdG9tVG9vbGJhciA9ICQuZXh0ZW5kKG9wdGlvbnMuY3VzdG9tVG9vbGJhciB8fCB7fSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWJyTGluazogJ29mZidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ09SRS5yZWdTdW1tZXJub3RlQnV0dG9uKFN0eWxlQnV0dG9uSW5mbyk7XHJcblxyXG4gICAgICAgICAgICAgICAgQ09SRS5BUFAub24oJ29wZW5UaGVtZVNldHRpbmdzJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ09SRS5BUFAuVG9vZ2xlVGhlbWVTZXR0aW5ncy50YXJnZXQuJGVsbSAvLyBjbGVhbiBoaWdobGlnaHQgc3R5bGVzIGluICN0aGVtZS1zZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnW2RhdGEtZ3JvdXAtbmFtZV0nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBDT1JFLkFQUC5vbignY2hhbmdlLk5vZGUuU2Vjb25kYXJ5Q29tcG9uZW50JywgZnVuY3Rpb24oYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudCA9IGFyZ3NbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBhcmdzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQudHlwZSA9PSAnYnV0dG9ucycgfHwgZXZlbnQudGFyZ2V0LnR5cGUgPT0gJ21lbnUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSAkKGV2ZW50Lm9yaWdpbmFsRXZlbnQudGFyZ2V0KS5hdHRyKERBVEFfTUJSX1NUWUxFKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1sxXSA9ICQoJzxkaXYvPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChjb250ZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKS5lbmQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyByZWdTdW1tZXJub3RlQnV0dG9uID4gb25VcGRhdGUgaGFuZGxlclxyXG4gICAgICAgICAgICBzdW1tZXJub3RlUG9wb3ZlclVwZGF0ZTogZnVuY3Rpb24ocG9wb3ZlciwgZWRpdGFibGUsIHN0eWxlSW5mbykge1xyXG4gICAgICAgICAgICAgICAgLy8gZHJvcGRvd24gdG9wIHBhcmVudCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoJChlZGl0YWJsZSkucGFyZW50KCcuZHJvcGRvd24nKS5wYXJlbnQoJy5uYXYtZHJvcGRvd24nKS5sZW5ndGggJiYgJChwb3BvdmVyKS5oYXNDbGFzcygnYm90dG9tJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgJHBvcG92ZXIgPSAkKHBvcG92ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3BvdmVySGVpZ2h0ID0gJHBvcG92ZXIuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1BvcG92ZXJUb3BQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKENPUkUuQVBQLmFwcFNldHRpbmdzLmZ1bGxzY3JlZW5DYW52YXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UG9wb3ZlclRvcFBvc2l0aW9uID0gcGFyc2VJbnQoJHBvcG92ZXIuY3NzKCd0b3AnKSkgLSBwb3BvdmVySGVpZ2h0ICogMS4yO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BvcG92ZXJUb3BQb3NpdGlvbiA9IHBhcnNlSW50KCRwb3BvdmVyLmNzcygndG9wJykpIC0gcG9wb3ZlckhlaWdodCAqIDEuNTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRwb3BvdmVyLmNzcygndG9wJywgbmV3UG9wb3ZlclRvcFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVnaXN0ZXJlZFN1bW1lcm5vdGVCdXR0b25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSB0aGlzLnJlZ2lzdGVyZWRTdW1tZXJub3RlQnV0dG9uc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5vblVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gJChwb3BvdmVyKS5maW5kKCdbZGF0YS1uYW1lPVwiJyArIGluZm8ubmFtZSArICdcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbi5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLm9uVXBkYXRlKGVkaXRhYmxlLCBidXR0b24sIHN0eWxlSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRXaW5kb3dWYXIocGF0aCkge1xyXG4gICAgICAgIHBhdGggPSBwYXRoLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICB2YXIgdmFsdWUgPSB3aW5kb3c7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IHZhbHVlICYmIChpIDwgcGF0aC5sZW5ndGgpOyBpKyspXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbcGF0aFtpXV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxufSkoalF1ZXJ5LCBtYnJBcHBDb3JlKTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-plugin-class.js\n")},"./web/app/builder/js/builder-plugin-iconfont-editor.js":
/*!**************************************************************!*\
  !*** ./web/app/builder/js/builder-plugin-iconfont-editor.js ***!
  \**************************************************************/
/*! no static exports found */function(module,exports){eval("/**\r\n * @module mbrAppCore/plugins/iconfont-editor\r\n *\r\n * @description\r\n * Extend image/video insert element, add IconFont type to insert\r\n *\r\n * Note:  \r\n * old iconfont plugin (in addon) automaticaly added iconFont type for media elements to some standart components  \r\n * menu|ext.menu|contacts1|features1|msg-box4|msg-box5  \r\n * this plugin doesn't have such functionality\r\n *\r\n * @listens module:mbrAppCore/plugins/media-editor~mbrAppCore:changeMediaItem\r\n * @listens mbrAppCore/plugins/summernote~mbrAppCore:summernoteInited\r\n */\r\n(function($, Core) {\r\n    'use strict';\r\n\r\n    var EXTENSION_NAME = 'iconfont';\r\n\r\n    // default data for iconfont images\r\n    var DEFAULT_ICON_FONT = {\r\n        'class': 'mbr-iconfont', // class name\r\n        'linkInNewWindow': false\r\n    };\r\n\r\n\r\n    //\r\n    // --- interface ---\r\n    //\r\n\r\n    function createIconFont(data) {\r\n        return Core.APP.createIconFont(data);\r\n    }\r\n\r\n    function extractIconFont(node) {\r\n        return Core.APP.extractIconFont(node);\r\n    }\r\n\r\n    function hasFont() {\r\n        for (var p in Core.APP.iconFonts) return true;\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n    // search for \"iconFont\" summernote plugin\r\n    var iconFontPlugin;\r\n    for (var p in $.summernote.plugins) {\r\n        if ($.summernote.plugins[p]['name'] == 'iconFont')\r\n            iconFontPlugin = $.summernote.plugins[p];\r\n    }\r\n    if (!iconFontPlugin) { // !!! fail\r\n        console.log('Error: iconFont summernote plugin not found');\r\n\r\n        return;\r\n    }\r\n\r\n\r\n    Core.regExtension({\r\n        name: EXTENSION_NAME,\r\n\r\n        /** @lends module:mbrAppCore/plugins/iconfont-editor */\r\n        global: {\r\n\r\n            /**\r\n             * called from summernote-ext-mbr-iconfont.js\r\n             * @param node - old icon node\r\n             * @param parent - may be parent Anchor, Button or Menu Link\r\n             * @param callback_node function(node) return new node\r\n             */\r\n            summernoteIconRequest: function(node, parent, callback_node) {\r\n\r\n                var data = extractIconFont(node);\r\n                if (!data.name) node = 0;\r\n\r\n                // for button+menu-links use size but not link\r\n                var btnData = $(parent).attr('data-app-btn');\r\n                if (btnData) {\r\n                    data.size = data.size || ''; // force show size\r\n                    delete data.link;\r\n                    data['class'] = 'mbr-iconfont mbr-iconfont-btn' + (btnData == 'true' ? '' : '-' + btnData.replace(/\\s+/, '_'));\r\n                }\r\n\r\n                var $editable = $(node || parent);\r\n                var default_data = {\r\n                    size: $editable.attr('data-app-btn') ? Math.round($editable.outerHeight() / 2) : parseInt($editable.css('font-size')) || 12,\r\n                    color: $editable.css('color')\r\n                };\r\n\r\n                Core.APP.runIconFontDialog(data, default_data, function(data) {\r\n                    if (!callback_node) return;\r\n\r\n                    if (arguments.length) {\r\n                        data = data && $.extend({}, DEFAULT_ICON_FONT, data);\r\n                        callback_node(data && createIconFont(data));\r\n                    } else\r\n                        callback_node();\r\n                });\r\n            },\r\n\r\n\r\n            /**\r\n             * show Iconfont dialog,\r\n             * by analogy {@link module:mbrApp/plugins/media-editor showMediaImageDialog} and {@link module:mbrApp/plugins/media-editor showMediaVideoDialog}\r\n             * @param  {Object} media - media data object\r\n             * @param  {Function} saveMedia - callback function(media)\r\n             * @param  {DomNode} item - editable node\r\n             */\r\n            showMediaIconFontDialog: function(media, saveMedia, item) {\r\n                // --------- extract to media ---------\r\n                // get iconFont data record\r\n                var data = $.extend({}, media.iconFont);\r\n\r\n                var default_data = {\r\n                    size: parseInt($(item).height()),\r\n                    color: $(item).css('color'),\r\n                    name: data.name\r\n                };\r\n\r\n                delete data.name; // transfer name with default_data for run iconfont-dialog in insert mode, without delete\r\n\r\n                /**\r\n                 * @event mbrAppCore:showMediaIconFontDialog\r\n                 */\r\n                Core.fire('showMediaIconFontDialog');\r\n\r\n                var mediaVar = $(item).attr('mbr-media') || $(item).attr('logo');\r\n\r\n                function saveMediaIcon(current, real) {\r\n                    if (!mediaVar) return;\r\n                    $.extend(true, real[mediaVar], current[mediaVar]);\r\n                    for (var k in real[mediaVar]) {\r\n                        real[mediaVar][k].active = undefined;\r\n                    }\r\n                    real[mediaVar].iconFont.active = true;\r\n\r\n                    return real;\r\n                }\r\n\r\n                var dialog = Core.APP.runIconFontDialog(data, default_data, function(new_data) {\r\n                    if (!new_data) return;\r\n\r\n                    // media record\r\n                    media.iconFont = $.extend({}, DEFAULT_ICON_FONT, new_data);\r\n\r\n                    // cloned from builder-plugin-media-editor.js\r\n                    for (var k in media) {\r\n                        media[k].active = undefined;\r\n                    }\r\n                    media.iconFont.active = true;\r\n\r\n                    /**\r\n                     * Save media iconfont dialog\r\n                     * @filter mbrAppCore->saveMediaIconFontDialog\r\n                     * @param media\r\n                     */\r\n                    media = Core.applyFilter('saveMediaIconFontDialog', media);\r\n\r\n                    /**\r\n                     * @event mbrAppCore:saveMediaIconFontDialog\r\n                     */\r\n                    Core.fire('saveMediaIconFontDialog');\r\n\r\n                    var componentID = $(item).parents('[data-app-component-id]:eq(0)').attr('data-app-component-id');\r\n                    saveMedia(media);\r\n                    Core.updateGlobalComponents(componentID, saveMediaIcon);\r\n\r\n                    /**\r\n                     * @event mbrAppCore:savedMediaIconFontDialog\r\n                     * @param  {DomNode} item - edited node\r\n                     */\r\n                    Core.fire('savedMediaIconFontDialog', item, media, componentID);\r\n                });\r\n\r\n                /**\r\n                 * @event mbrAppCore:showedMediaIconFontDialog\r\n                 * @param {jQuery} dialog\r\n                 */\r\n                Core.fire('showedMediaIconFontDialog', dialog);\r\n                /**\r\n                 * @event mbrApp:showedPopup\r\n                 */\r\n                Core.APP.fire('showedPopup', dialog);\r\n\r\n            }\r\n        },\r\n\r\n\r\n        events: {\r\n\r\n            load: function() {\r\n                // if has no fonts then return\r\n                if (!hasFont()) return;\r\n\r\n                // add iconfont button to media elements\r\n                var btnGroup = $('[data-event=changeImage]').parent();\r\n                btnGroup.each(function() {\r\n                    var $this = $(this);\r\n                    if (btnGroup.find('[data-event=changeIconfont]').length)\r\n                        return;\r\n\r\n                    var options = $.summernote.options;\r\n                    var lang = $.summernote.lang[options.lang];\r\n\r\n                    $(iconFontPlugin.buttons.iconFont(lang, options))\r\n                        .attr('data-event', 'changeIconfont')\r\n                        .attr('data-media', 'iconFont')\r\n                        .appendTo($this);\r\n                });\r\n            },\r\n\r\n\r\n            // add iconfont button group to editor panels\r\n            summernoteInited: function(Item) {\r\n\r\n                // if has no fonts then return\r\n                if (!hasFont()) return;\r\n\r\n                var layoutInfo = $.summernote.core.dom.makeLayoutInfo($(Item));\r\n                var options = layoutInfo.editor().data('options');\r\n\r\n                if ($(Item).attr('data-app-btn') && (options.customToolbar ? options.customToolbar.iconFont !== 'off' : true)) { // is button\r\n                    $(Item).summernote('popover.addGroup', ['iconFont', ['iconFont'], { optional: true }]);\r\n                    layoutInfo.popover()\r\n                        .find('[data-event=insertIconFontDialog]')\r\n                        .tooltip({\r\n                            container: 'body',\r\n                            trigger: 'hover',\r\n                            placement: 'top'\r\n                        });\r\n\r\n                } // added editor now only for buttons(and menu links)\r\n\r\n            },\r\n\r\n\r\n            // add \"changeIconfont\" event for select Iconfont additioning of image/video\r\n            changeMediaItem: function(eventName, media, saveMedia, item) {\r\n                if (eventName != 'changeIconfont') return;\r\n                this.showMediaIconFontDialog(media, saveMedia, item);\r\n            }\r\n        }\r\n    });\r\n}(jQuery, mbrAppCore));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4taWNvbmZvbnQtZWRpdG9yLmpzP2JjMGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTs7O0FBR2I7QUFDQTtBQUNBLDJCQUEyQiw4REFBOEQsTUFBTTtBQUMvRix3QkFBd0IsT0FBTztBQUMvQix3QkFBd0IsU0FBUztBQUNqQyx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUM7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGdEQUFnRDs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQ0FBZ0MsUUFBUTtBQUN4QztBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUzs7O0FBR1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7OztBQUdiO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdJQUFnSTtBQUNoSSx1RkFBdUYsaUJBQWlCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekIsaUJBQWlCOztBQUVqQixhQUFhOzs7QUFHYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLXBsdWdpbi1pY29uZm9udC1lZGl0b3IuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQG1vZHVsZSBtYnJBcHBDb3JlL3BsdWdpbnMvaWNvbmZvbnQtZWRpdG9yXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBFeHRlbmQgaW1hZ2UvdmlkZW8gaW5zZXJ0IGVsZW1lbnQsIGFkZCBJY29uRm9udCB0eXBlIHRvIGluc2VydFxyXG4gKlxyXG4gKiBOb3RlOiAgXHJcbiAqIG9sZCBpY29uZm9udCBwbHVnaW4gKGluIGFkZG9uKSBhdXRvbWF0aWNhbHkgYWRkZWQgaWNvbkZvbnQgdHlwZSBmb3IgbWVkaWEgZWxlbWVudHMgdG8gc29tZSBzdGFuZGFydCBjb21wb25lbnRzICBcclxuICogbWVudXxleHQubWVudXxjb250YWN0czF8ZmVhdHVyZXMxfG1zZy1ib3g0fG1zZy1ib3g1ICBcclxuICogdGhpcyBwbHVnaW4gZG9lc24ndCBoYXZlIHN1Y2ggZnVuY3Rpb25hbGl0eVxyXG4gKlxyXG4gKiBAbGlzdGVucyBtb2R1bGU6bWJyQXBwQ29yZS9wbHVnaW5zL21lZGlhLWVkaXRvcn5tYnJBcHBDb3JlOmNoYW5nZU1lZGlhSXRlbVxyXG4gKiBAbGlzdGVucyBtYnJBcHBDb3JlL3BsdWdpbnMvc3VtbWVybm90ZX5tYnJBcHBDb3JlOnN1bW1lcm5vdGVJbml0ZWRcclxuICovXHJcbihmdW5jdGlvbigkLCBDb3JlKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIEVYVEVOU0lPTl9OQU1FID0gJ2ljb25mb250JztcclxuXHJcbiAgICAvLyBkZWZhdWx0IGRhdGEgZm9yIGljb25mb250IGltYWdlc1xyXG4gICAgdmFyIERFRkFVTFRfSUNPTl9GT05UID0ge1xyXG4gICAgICAgICdjbGFzcyc6ICdtYnItaWNvbmZvbnQnLCAvLyBjbGFzcyBuYW1lXHJcbiAgICAgICAgJ2xpbmtJbk5ld1dpbmRvdyc6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvL1xyXG4gICAgLy8gLS0tIGludGVyZmFjZSAtLS1cclxuICAgIC8vXHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlSWNvbkZvbnQoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBDb3JlLkFQUC5jcmVhdGVJY29uRm9udChkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBleHRyYWN0SWNvbkZvbnQobm9kZSkge1xyXG4gICAgICAgIHJldHVybiBDb3JlLkFQUC5leHRyYWN0SWNvbkZvbnQobm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGFzRm9udCgpIHtcclxuICAgICAgICBmb3IgKHZhciBwIGluIENvcmUuQVBQLmljb25Gb250cykgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gc2VhcmNoIGZvciBcImljb25Gb250XCIgc3VtbWVybm90ZSBwbHVnaW5cclxuICAgIHZhciBpY29uRm9udFBsdWdpbjtcclxuICAgIGZvciAodmFyIHAgaW4gJC5zdW1tZXJub3RlLnBsdWdpbnMpIHtcclxuICAgICAgICBpZiAoJC5zdW1tZXJub3RlLnBsdWdpbnNbcF1bJ25hbWUnXSA9PSAnaWNvbkZvbnQnKVxyXG4gICAgICAgICAgICBpY29uRm9udFBsdWdpbiA9ICQuc3VtbWVybm90ZS5wbHVnaW5zW3BdO1xyXG4gICAgfVxyXG4gICAgaWYgKCFpY29uRm9udFBsdWdpbikgeyAvLyAhISEgZmFpbFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogaWNvbkZvbnQgc3VtbWVybm90ZSBwbHVnaW4gbm90IGZvdW5kJyk7XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgQ29yZS5yZWdFeHRlbnNpb24oe1xyXG4gICAgICAgIG5hbWU6IEVYVEVOU0lPTl9OQU1FLFxyXG5cclxuICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTptYnJBcHBDb3JlL3BsdWdpbnMvaWNvbmZvbnQtZWRpdG9yICovXHJcbiAgICAgICAgZ2xvYmFsOiB7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogY2FsbGVkIGZyb20gc3VtbWVybm90ZS1leHQtbWJyLWljb25mb250LmpzXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSBub2RlIC0gb2xkIGljb24gbm9kZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gcGFyZW50IC0gbWF5IGJlIHBhcmVudCBBbmNob3IsIEJ1dHRvbiBvciBNZW51IExpbmtcclxuICAgICAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrX25vZGUgZnVuY3Rpb24obm9kZSkgcmV0dXJuIG5ldyBub2RlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzdW1tZXJub3RlSWNvblJlcXVlc3Q6IGZ1bmN0aW9uKG5vZGUsIHBhcmVudCwgY2FsbGJhY2tfbm9kZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZXh0cmFjdEljb25Gb250KG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLm5hbWUpIG5vZGUgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZvciBidXR0b24rbWVudS1saW5rcyB1c2Ugc2l6ZSBidXQgbm90IGxpbmtcclxuICAgICAgICAgICAgICAgIHZhciBidG5EYXRhID0gJChwYXJlbnQpLmF0dHIoJ2RhdGEtYXBwLWJ0bicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ0bkRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnNpemUgPSBkYXRhLnNpemUgfHwgJyc7IC8vIGZvcmNlIHNob3cgc2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhLmxpbms7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsnY2xhc3MnXSA9ICdtYnItaWNvbmZvbnQgbWJyLWljb25mb250LWJ0bicgKyAoYnRuRGF0YSA9PSAndHJ1ZScgPyAnJyA6ICctJyArIGJ0bkRhdGEucmVwbGFjZSgvXFxzKy8sICdfJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkZWRpdGFibGUgPSAkKG5vZGUgfHwgcGFyZW50KTtcclxuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X2RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogJGVkaXRhYmxlLmF0dHIoJ2RhdGEtYXBwLWJ0bicpID8gTWF0aC5yb3VuZCgkZWRpdGFibGUub3V0ZXJIZWlnaHQoKSAvIDIpIDogcGFyc2VJbnQoJGVkaXRhYmxlLmNzcygnZm9udC1zaXplJykpIHx8IDEyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAkZWRpdGFibGUuY3NzKCdjb2xvcicpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIENvcmUuQVBQLnJ1bkljb25Gb250RGlhbG9nKGRhdGEsIGRlZmF1bHRfZGF0YSwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2tfbm9kZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YSAmJiAkLmV4dGVuZCh7fSwgREVGQVVMVF9JQ09OX0ZPTlQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja19ub2RlKGRhdGEgJiYgY3JlYXRlSWNvbkZvbnQoZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja19ub2RlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogc2hvdyBJY29uZm9udCBkaWFsb2csXHJcbiAgICAgICAgICAgICAqIGJ5IGFuYWxvZ3kge0BsaW5rIG1vZHVsZTptYnJBcHAvcGx1Z2lucy9tZWRpYS1lZGl0b3Igc2hvd01lZGlhSW1hZ2VEaWFsb2d9IGFuZCB7QGxpbmsgbW9kdWxlOm1ickFwcC9wbHVnaW5zL21lZGlhLWVkaXRvciBzaG93TWVkaWFWaWRlb0RpYWxvZ31cclxuICAgICAgICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBtZWRpYSAtIG1lZGlhIGRhdGEgb2JqZWN0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBzYXZlTWVkaWEgLSBjYWxsYmFjayBmdW5jdGlvbihtZWRpYSlcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RG9tTm9kZX0gaXRlbSAtIGVkaXRhYmxlIG5vZGVcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNob3dNZWRpYUljb25Gb250RGlhbG9nOiBmdW5jdGlvbihtZWRpYSwgc2F2ZU1lZGlhLCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0gZXh0cmFjdCB0byBtZWRpYSAtLS0tLS0tLS1cclxuICAgICAgICAgICAgICAgIC8vIGdldCBpY29uRm9udCBkYXRhIHJlY29yZFxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkLmV4dGVuZCh7fSwgbWVkaWEuaWNvbkZvbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkZWZhdWx0X2RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogcGFyc2VJbnQoJChpdGVtKS5oZWlnaHQoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICQoaXRlbSkuY3NzKCdjb2xvcicpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgZGF0YS5uYW1lOyAvLyB0cmFuc2ZlciBuYW1lIHdpdGggZGVmYXVsdF9kYXRhIGZvciBydW4gaWNvbmZvbnQtZGlhbG9nIGluIGluc2VydCBtb2RlLCB3aXRob3V0IGRlbGV0ZVxyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2hvd01lZGlhSWNvbkZvbnREaWFsb2dcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgQ29yZS5maXJlKCdzaG93TWVkaWFJY29uRm9udERpYWxvZycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtZWRpYVZhciA9ICQoaXRlbSkuYXR0cignbWJyLW1lZGlhJykgfHwgJChpdGVtKS5hdHRyKCdsb2dvJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZU1lZGlhSWNvbihjdXJyZW50LCByZWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZWRpYVZhcikgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHJlYWxbbWVkaWFWYXJdLCBjdXJyZW50W21lZGlhVmFyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiByZWFsW21lZGlhVmFyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFsW21lZGlhVmFyXVtrXS5hY3RpdmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWxbbWVkaWFWYXJdLmljb25Gb250LmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSBDb3JlLkFQUC5ydW5JY29uRm9udERpYWxvZyhkYXRhLCBkZWZhdWx0X2RhdGEsIGZ1bmN0aW9uKG5ld19kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdfZGF0YSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtZWRpYSByZWNvcmRcclxuICAgICAgICAgICAgICAgICAgICBtZWRpYS5pY29uRm9udCA9ICQuZXh0ZW5kKHt9LCBERUZBVUxUX0lDT05fRk9OVCwgbmV3X2RhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZWQgZnJvbSBidWlsZGVyLXBsdWdpbi1tZWRpYS1lZGl0b3IuanNcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIG1lZGlhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhW2tdLmFjdGl2ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEuaWNvbkZvbnQuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICogU2F2ZSBtZWRpYSBpY29uZm9udCBkaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPnNhdmVNZWRpYUljb25Gb250RGlhbG9nXHJcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIG1lZGlhXHJcbiAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgbWVkaWEgPSBDb3JlLmFwcGx5RmlsdGVyKCdzYXZlTWVkaWFJY29uRm9udERpYWxvZycsIG1lZGlhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2F2ZU1lZGlhSWNvbkZvbnREaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICBDb3JlLmZpcmUoJ3NhdmVNZWRpYUljb25Gb250RGlhbG9nJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnRJRCA9ICQoaXRlbSkucGFyZW50cygnW2RhdGEtYXBwLWNvbXBvbmVudC1pZF06ZXEoMCknKS5hdHRyKCdkYXRhLWFwcC1jb21wb25lbnQtaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBzYXZlTWVkaWEobWVkaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgIENvcmUudXBkYXRlR2xvYmFsQ29tcG9uZW50cyhjb21wb25lbnRJRCwgc2F2ZU1lZGlhSWNvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnNhdmVkTWVkaWFJY29uRm9udERpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSAge0RvbU5vZGV9IGl0ZW0gLSBlZGl0ZWQgbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIENvcmUuZmlyZSgnc2F2ZWRNZWRpYUljb25Gb250RGlhbG9nJywgaXRlbSwgbWVkaWEsIGNvbXBvbmVudElEKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2hvd2VkTWVkaWFJY29uRm9udERpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9IGRpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBDb3JlLmZpcmUoJ3Nob3dlZE1lZGlhSWNvbkZvbnREaWFsb2cnLCBkaWFsb2cpO1xyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwOnNob3dlZFBvcHVwXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIENvcmUuQVBQLmZpcmUoJ3Nob3dlZFBvcHVwJywgZGlhbG9nKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgZXZlbnRzOiB7XHJcblxyXG4gICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIGhhcyBubyBmb250cyB0aGVuIHJldHVyblxyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNGb250KCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgaWNvbmZvbnQgYnV0dG9uIHRvIG1lZGlhIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICB2YXIgYnRuR3JvdXAgPSAkKCdbZGF0YS1ldmVudD1jaGFuZ2VJbWFnZV0nKS5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIGJ0bkdyb3VwLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuR3JvdXAuZmluZCgnW2RhdGEtZXZlbnQ9Y2hhbmdlSWNvbmZvbnRdJykubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5zdW1tZXJub3RlLm9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhbmcgPSAkLnN1bW1lcm5vdGUubGFuZ1tvcHRpb25zLmxhbmddO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKGljb25Gb250UGx1Z2luLmJ1dHRvbnMuaWNvbkZvbnQobGFuZywgb3B0aW9ucykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLWV2ZW50JywgJ2NoYW5nZUljb25mb250JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2RhdGEtbWVkaWEnLCAnaWNvbkZvbnQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gYWRkIGljb25mb250IGJ1dHRvbiBncm91cCB0byBlZGl0b3IgcGFuZWxzXHJcbiAgICAgICAgICAgIHN1bW1lcm5vdGVJbml0ZWQ6IGZ1bmN0aW9uKEl0ZW0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBoYXMgbm8gZm9udHMgdGhlbiByZXR1cm5cclxuICAgICAgICAgICAgICAgIGlmICghaGFzRm9udCgpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxheW91dEluZm8gPSAkLnN1bW1lcm5vdGUuY29yZS5kb20ubWFrZUxheW91dEluZm8oJChJdGVtKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGxheW91dEluZm8uZWRpdG9yKCkuZGF0YSgnb3B0aW9ucycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkKEl0ZW0pLmF0dHIoJ2RhdGEtYXBwLWJ0bicpICYmIChvcHRpb25zLmN1c3RvbVRvb2xiYXIgPyBvcHRpb25zLmN1c3RvbVRvb2xiYXIuaWNvbkZvbnQgIT09ICdvZmYnIDogdHJ1ZSkpIHsgLy8gaXMgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgJChJdGVtKS5zdW1tZXJub3RlKCdwb3BvdmVyLmFkZEdyb3VwJywgWydpY29uRm9udCcsIFsnaWNvbkZvbnQnXSwgeyBvcHRpb25hbDogdHJ1ZSB9XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0SW5mby5wb3BvdmVyKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ1tkYXRhLWV2ZW50PWluc2VydEljb25Gb250RGlhbG9nXScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50b29sdGlwKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJ2JvZHknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2hvdmVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogJ3RvcCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSAvLyBhZGRlZCBlZGl0b3Igbm93IG9ubHkgZm9yIGJ1dHRvbnMoYW5kIG1lbnUgbGlua3MpXHJcblxyXG4gICAgICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIGFkZCBcImNoYW5nZUljb25mb250XCIgZXZlbnQgZm9yIHNlbGVjdCBJY29uZm9udCBhZGRpdGlvbmluZyBvZiBpbWFnZS92aWRlb1xyXG4gICAgICAgICAgICBjaGFuZ2VNZWRpYUl0ZW06IGZ1bmN0aW9uKGV2ZW50TmFtZSwgbWVkaWEsIHNhdmVNZWRpYSwgaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSAhPSAnY2hhbmdlSWNvbmZvbnQnKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNZWRpYUljb25Gb250RGlhbG9nKG1lZGlhLCBzYXZlTWVkaWEsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0oalF1ZXJ5LCBtYnJBcHBDb3JlKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-plugin-iconfont-editor.js\n")},"./web/app/builder/js/builder-plugin-media-editor.js":
/*!***********************************************************!*\
  !*** ./web/app/builder/js/builder-plugin-media-editor.js ***!
  \***********************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module  mbrAppCore/plugins/media-editor\n *\n * @description Media editor\n *\n * @listens module:mbrApp~mbrApp:load\n * @listens module:mbrAppCore/plugins/summernote~mbrAppCore:summernoteFocus\n * @listens module:mbrApp/component-params~mbrApp:componentClicked\n */\n(function($, CORE) {\n    'use strict';\n\n    var $popover = $([\n        '<div class=\"note-button-popover popover in bottom\">',\n            '<div class=\"arrow\"></div>',\n            '<div class=\"popover-content\">',\n                '<div class=\"btn-group\">',\n                    '<button type=\"button\" class=\"btn btn-default btn-sm\" tabindex=\"-1\" data-event=\"changeImage\" data-media=\"image\"><i class=\"mbr-icon-image\"></i></button>',\n                    '<button type=\"button\" class=\"btn btn-default btn-sm\" tabindex=\"-1\" data-event=\"changeVideo\" data-media=\"video\"><i class=\"mbr-icon-youtube\"></i></button>',\n                '</div>',\n            '</div>',\n        '</div>'\n    ].join('\\n')).hide()\n    .appendTo($('<div class=\"note-popover note-air-layout\">').appendTo('body'));\n\n    CORE.regExtension({\n        name: 'plugin-media-editor',\n        /** @lends module:mbrAppCore/plugins/media-editor */\n        global: {\n           /**\n            * @param {jQuery} $media\n            */\n            showMediaPopover: function($media) {\n                var Core = this;\n\n                $popover.mediaItem = $media;\n\n                // hide some media buttons from popover\n                var componentID = $media.parents('[data-app-component-id]:eq(0)').attr('data-app-component-id');\n                var mediaVar = $media.attr('mbr-media') || $media.attr('mbr-pure-media');\n                var component = Core.getComponent(componentID);\n                var visibleMediaItems = [];\n                $popover.find('[data-media]').each(function() {\n                    var show = component[mediaVar][$(this).attr('data-media')];\n                    $(this)[show?'show':'hide']();\n                    if(show) {\n                        visibleMediaItems.push($(this));\n                    }\n                });\n\n                // if only 1 media type - dont show popover, click on item\n                if(visibleMediaItems.length == 1) {\n                    visibleMediaItems[0].click();\n                    return;\n                }\n                if(!visibleMediaItems.length) {\n                    return;\n                }\n\n                /**\n                 * @event mbrAppCore:showMediaPopover\n                 * @param {jQuery} $popover\n                 */\n                Core.fire('showMediaPopover', $popover);\n\n                var componentID = $media.parents('[data-app-component-id]:eq(0)').attr('data-app-component-id');\n                var pos = {\n                    top: $media.offset().top + $media.height() / 2,\n                    left: $media.offset().left - $popover.width() / 2 + $media.width() / 2\n                };\n\n                $popover.css(pos).show();\n\n                Core.focusComponentBlock(componentID);\n\n                /**\n                 * @event mbrAppCore:showedMediaPopover\n                 * @param {jQuery} $popover\n                 */\n                Core.fire('showedMediaPopover', $popover);\n                /**\n                 * @event mbrAppCore:showedPopover\n                 */\n                Core.fire('showedPopover');\n            },\n            hideMediaPopover: function() {\n                /**\n                 * @event mbrAppCore:hideMediaPopover\n                 * @param {jQuery} $popover\n                 */\n                this.fire('hideMediaPopover', $popover);\n                $popover.mediaItem = undefined;\n                $popover.hide();\n                /**\n                 * @event mbrAppCore:hiddenMediaPopover\n                 * @param {jQuery} $popover\n                 */\n                this.fire('hiddenMediaPopover', $popover);\n            }\n\n        },\n        events: {\n            load: function() {\n                var Core = this;\n\n                // click on editable element\n                Core.$body.on('click', '[mbr-media],[mbr-pure-media]', function(e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n\n                    Core.showMediaPopover($(this));\n                });\n\n                $popover.on('click', '[data-event]', function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    var eventName = $(this).attr('data-event');\n                    var $item = $popover.mediaItem;\n                    if (!$item) return;\n\n                    var mediaVar = $item.attr('mbr-media') || $item.attr('mbr-pure-media');\n                    if (!mediaVar) return;\n\n                    var componentID = $item.parents('[data-app-component-id]:eq(0)').attr('data-app-component-id');\n                    var component = Core.getComponent(componentID);\n\n                    var media = $.extend({}, component[mediaVar]);\n\n                    // if there are no default settings for media item\n                    for(var k in media) {\n                        if(typeof media[k] !== 'object') {\n                            media[k] = {};\n                        }\n                    }\n\n                    function saveMedia(media) {\n                        component[mediaVar] = media;\n\n                        /**\n                         * @event mbrAppCore:saveMedia\n                         * (since version 4)\n                         * @param {String} componentID - component id\n                         * @param {String} mediaVar - media param name\n                         * @param {Object} media - media object data\n                         */\n                        Core.fire('saveMedia', componentID, mediaVar, media);\n\n                        Core.updateGlobalComponents(componentID, function(current, real){\n                            if (!mediaVar) return;\n                            $.extend(true, real[mediaVar], current[mediaVar]);\n                            return real;\n                        });\n\n                    }\n\n                    if (eventName == 'changeImage') {\n                        Core.APP.showMediaImageDialog(media, saveMedia, '', '', '', componentID);\n                    } else if (eventName == 'changeVideo') {\n                        Core.APP.showMediaVideoDialog(media, saveMedia);\n                    }\n\n                    /**\n                     * Use for extend media object\n                     * (since version 2.12)\n                     * @event mbrAppCore:chngeMediaItem\n                     * @param {String} eventName\n                     * @param {Object} media - media object data\n                     * @param {Function} saveMedia - function(media), callback for new media data transfer\n                     * @param {DomNode} item - changed item\n                     */\n                    Core.fire('changeMediaItem', eventName, media, saveMedia, $item.get(0));\n\n                    /**\n                     * @event mbrAppCore:clickOnMediaItem\n                     * @param eventName\n                     * @param component\n                     * @param {jQuery} $popover\n                     */\n                    Core.fire('clickOnMediaItem', eventName, component, $popover);\n\n                    Core.hideMediaPopover();\n                });\n\n                $(window).on('resize', function() {\n                    Core.hideMediaPopover();\n                });\n\n                Core.on('summernoteFocus', function() {\n                    Core.hideMediaPopover();\n                });\n\n                Core.APP.on('componentClicked', function(id) {\n                    Core.hideMediaPopover();\n                });\n            }\n        }\n    });\n}(jQuery, mbrAppCore));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tbWVkaWEtZWRpdG9yLmpzPzRiNjUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsT0FBTztBQUNsQztBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwyQ0FBMkM7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxPQUFPO0FBQzFDLG1DQUFtQyxPQUFPO0FBQzFDLG1DQUFtQyxPQUFPO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7O0FBRXpCOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixPQUFPO0FBQ3RDLCtCQUErQixPQUFPO0FBQ3RDLCtCQUErQixTQUFTO0FBQ3hDLCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsT0FBTztBQUN0QztBQUNBOztBQUVBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLXBsdWdpbi1tZWRpYS1lZGl0b3IuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBtb2R1bGUgIG1ickFwcENvcmUvcGx1Z2lucy9tZWRpYS1lZGl0b3JcbiAqXG4gKiBAZGVzY3JpcHRpb24gTWVkaWEgZWRpdG9yXG4gKlxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcH5tYnJBcHA6bG9hZFxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvcGx1Z2lucy9zdW1tZXJub3Rlfm1ickFwcENvcmU6c3VtbWVybm90ZUZvY3VzXG4gKiBAbGlzdGVucyBtb2R1bGU6bWJyQXBwL2NvbXBvbmVudC1wYXJhbXN+bWJyQXBwOmNvbXBvbmVudENsaWNrZWRcbiAqL1xuKGZ1bmN0aW9uKCQsIENPUkUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgJHBvcG92ZXIgPSAkKFtcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWJ1dHRvbi1wb3BvdmVyIHBvcG92ZXIgaW4gYm90dG9tXCI+JyxcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj4nLFxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj4nLFxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+JyxcbiAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIHRhYmluZGV4PVwiLTFcIiBkYXRhLWV2ZW50PVwiY2hhbmdlSW1hZ2VcIiBkYXRhLW1lZGlhPVwiaW1hZ2VcIj48aSBjbGFzcz1cIm1ici1pY29uLWltYWdlXCI+PC9pPjwvYnV0dG9uPicsXG4gICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIiB0YWJpbmRleD1cIi0xXCIgZGF0YS1ldmVudD1cImNoYW5nZVZpZGVvXCIgZGF0YS1tZWRpYT1cInZpZGVvXCI+PGkgY2xhc3M9XCJtYnItaWNvbi15b3V0dWJlXCI+PC9pPjwvYnV0dG9uPicsXG4gICAgICAgICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICAgICAnPC9kaXY+JyxcbiAgICAgICAgJzwvZGl2PidcbiAgICBdLmpvaW4oJ1xcbicpKS5oaWRlKClcbiAgICAuYXBwZW5kVG8oJCgnPGRpdiBjbGFzcz1cIm5vdGUtcG9wb3ZlciBub3RlLWFpci1sYXlvdXRcIj4nKS5hcHBlbmRUbygnYm9keScpKTtcblxuICAgIENPUkUucmVnRXh0ZW5zaW9uKHtcbiAgICAgICAgbmFtZTogJ3BsdWdpbi1tZWRpYS1lZGl0b3InLFxuICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTptYnJBcHBDb3JlL3BsdWdpbnMvbWVkaWEtZWRpdG9yICovXG4gICAgICAgIGdsb2JhbDoge1xuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRtZWRpYVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNob3dNZWRpYVBvcG92ZXI6IGZ1bmN0aW9uKCRtZWRpYSkge1xuICAgICAgICAgICAgICAgIHZhciBDb3JlID0gdGhpcztcblxuICAgICAgICAgICAgICAgICRwb3BvdmVyLm1lZGlhSXRlbSA9ICRtZWRpYTtcblxuICAgICAgICAgICAgICAgIC8vIGhpZGUgc29tZSBtZWRpYSBidXR0b25zIGZyb20gcG9wb3ZlclxuICAgICAgICAgICAgICAgIHZhciBjb21wb25lbnRJRCA9ICRtZWRpYS5wYXJlbnRzKCdbZGF0YS1hcHAtY29tcG9uZW50LWlkXTplcSgwKScpLmF0dHIoJ2RhdGEtYXBwLWNvbXBvbmVudC1pZCcpO1xuICAgICAgICAgICAgICAgIHZhciBtZWRpYVZhciA9ICRtZWRpYS5hdHRyKCdtYnItbWVkaWEnKSB8fCAkbWVkaWEuYXR0cignbWJyLXB1cmUtbWVkaWEnKTtcbiAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gQ29yZS5nZXRDb21wb25lbnQoY29tcG9uZW50SUQpO1xuICAgICAgICAgICAgICAgIHZhciB2aXNpYmxlTWVkaWFJdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgICRwb3BvdmVyLmZpbmQoJ1tkYXRhLW1lZGlhXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaG93ID0gY29tcG9uZW50W21lZGlhVmFyXVskKHRoaXMpLmF0dHIoJ2RhdGEtbWVkaWEnKV07XG4gICAgICAgICAgICAgICAgICAgICQodGhpcylbc2hvdz8nc2hvdyc6J2hpZGUnXSgpO1xuICAgICAgICAgICAgICAgICAgICBpZihzaG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlTWVkaWFJdGVtcy5wdXNoKCQodGhpcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBvbmx5IDEgbWVkaWEgdHlwZSAtIGRvbnQgc2hvdyBwb3BvdmVyLCBjbGljayBvbiBpdGVtXG4gICAgICAgICAgICAgICAgaWYodmlzaWJsZU1lZGlhSXRlbXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZU1lZGlhSXRlbXNbMF0uY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZighdmlzaWJsZU1lZGlhSXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpzaG93TWVkaWFQb3BvdmVyXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRwb3BvdmVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ29yZS5maXJlKCdzaG93TWVkaWFQb3BvdmVyJywgJHBvcG92ZXIpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudElEID0gJG1lZGlhLnBhcmVudHMoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWRdOmVxKDApJykuYXR0cignZGF0YS1hcHAtY29tcG9uZW50LWlkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAkbWVkaWEub2Zmc2V0KCkudG9wICsgJG1lZGlhLmhlaWdodCgpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJG1lZGlhLm9mZnNldCgpLmxlZnQgLSAkcG9wb3Zlci53aWR0aCgpIC8gMiArICRtZWRpYS53aWR0aCgpIC8gMlxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAkcG9wb3Zlci5jc3MocG9zKS5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICBDb3JlLmZvY3VzQ29tcG9uZW50QmxvY2soY29tcG9uZW50SUQpO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2hvd2VkTWVkaWFQb3BvdmVyXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRwb3BvdmVyXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgQ29yZS5maXJlKCdzaG93ZWRNZWRpYVBvcG92ZXInLCAkcG9wb3Zlcik7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2hvd2VkUG9wb3ZlclxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIENvcmUuZmlyZSgnc2hvd2VkUG9wb3ZlcicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhpZGVNZWRpYVBvcG92ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmhpZGVNZWRpYVBvcG92ZXJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHBvcG92ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmZpcmUoJ2hpZGVNZWRpYVBvcG92ZXInLCAkcG9wb3Zlcik7XG4gICAgICAgICAgICAgICAgJHBvcG92ZXIubWVkaWFJdGVtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICRwb3BvdmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpoaWRkZW5NZWRpYVBvcG92ZXJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHBvcG92ZXJcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmZpcmUoJ2hpZGRlbk1lZGlhUG9wb3ZlcicsICRwb3BvdmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBDb3JlID0gdGhpcztcblxuICAgICAgICAgICAgICAgIC8vIGNsaWNrIG9uIGVkaXRhYmxlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBDb3JlLiRib2R5Lm9uKCdjbGljaycsICdbbWJyLW1lZGlhXSxbbWJyLXB1cmUtbWVkaWFdJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgQ29yZS5zaG93TWVkaWFQb3BvdmVyKCQodGhpcykpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJHBvcG92ZXIub24oJ2NsaWNrJywgJ1tkYXRhLWV2ZW50XScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLWV2ZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICRwb3BvdmVyLm1lZGlhSXRlbTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkaXRlbSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYVZhciA9ICRpdGVtLmF0dHIoJ21ici1tZWRpYScpIHx8ICRpdGVtLmF0dHIoJ21ici1wdXJlLW1lZGlhJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWVkaWFWYXIpIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50SUQgPSAkaXRlbS5wYXJlbnRzKCdbZGF0YS1hcHAtY29tcG9uZW50LWlkXTplcSgwKScpLmF0dHIoJ2RhdGEtYXBwLWNvbXBvbmVudC1pZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50ID0gQ29yZS5nZXRDb21wb25lbnQoY29tcG9uZW50SUQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZWRpYSA9ICQuZXh0ZW5kKHt9LCBjb21wb25lbnRbbWVkaWFWYXJdKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gZGVmYXVsdCBzZXR0aW5ncyBmb3IgbWVkaWEgaXRlbVxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGsgaW4gbWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBtZWRpYVtrXSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVtrXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZU1lZGlhKG1lZGlhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRbbWVkaWFWYXJdID0gbWVkaWE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c2F2ZU1lZGlhXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiAoc2luY2UgdmVyc2lvbiA0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbXBvbmVudElEIC0gY29tcG9uZW50IGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVkaWFWYXIgLSBtZWRpYSBwYXJhbSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gbWVkaWEgLSBtZWRpYSBvYmplY3QgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBDb3JlLmZpcmUoJ3NhdmVNZWRpYScsIGNvbXBvbmVudElELCBtZWRpYVZhciwgbWVkaWEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBDb3JlLnVwZGF0ZUdsb2JhbENvbXBvbmVudHMoY29tcG9uZW50SUQsIGZ1bmN0aW9uKGN1cnJlbnQsIHJlYWwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVkaWFWYXIpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmV4dGVuZCh0cnVlLCByZWFsW21lZGlhVmFyXSwgY3VycmVudFttZWRpYVZhcl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudE5hbWUgPT0gJ2NoYW5nZUltYWdlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ29yZS5BUFAuc2hvd01lZGlhSW1hZ2VEaWFsb2cobWVkaWEsIHNhdmVNZWRpYSwgJycsICcnLCAnJywgY29tcG9uZW50SUQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50TmFtZSA9PSAnY2hhbmdlVmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBDb3JlLkFQUC5zaG93TWVkaWFWaWRlb0RpYWxvZyhtZWRpYSwgc2F2ZU1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBVc2UgZm9yIGV4dGVuZCBtZWRpYSBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICogKHNpbmNlIHZlcnNpb24gMi4xMilcbiAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6Y2huZ2VNZWRpYUl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gbWVkaWEgLSBtZWRpYSBvYmplY3QgZGF0YVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzYXZlTWVkaWEgLSBmdW5jdGlvbihtZWRpYSksIGNhbGxiYWNrIGZvciBuZXcgbWVkaWEgZGF0YSB0cmFuc2ZlclxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0RvbU5vZGV9IGl0ZW0gLSBjaGFuZ2VkIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIENvcmUuZmlyZSgnY2hhbmdlTWVkaWFJdGVtJywgZXZlbnROYW1lLCBtZWRpYSwgc2F2ZU1lZGlhLCAkaXRlbS5nZXQoMCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpjbGlja09uTWVkaWFJdGVtXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBldmVudE5hbWVcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHBvcG92ZXJcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIENvcmUuZmlyZSgnY2xpY2tPbk1lZGlhSXRlbScsIGV2ZW50TmFtZSwgY29tcG9uZW50LCAkcG9wb3Zlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgQ29yZS5oaWRlTWVkaWFQb3BvdmVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBDb3JlLmhpZGVNZWRpYVBvcG92ZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIENvcmUub24oJ3N1bW1lcm5vdGVGb2N1cycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBDb3JlLmhpZGVNZWRpYVBvcG92ZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIENvcmUuQVBQLm9uKCdjb21wb25lbnRDbGlja2VkJywgZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgQ29yZS5oaWRlTWVkaWFQb3BvdmVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0oalF1ZXJ5LCBtYnJBcHBDb3JlKSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-plugin-media-editor.js\n")},"./web/app/builder/js/builder-plugin-sortable.js":
/*!*******************************************************!*\
  !*** ./web/app/builder/js/builder-plugin-sortable.js ***!
  \*******************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module  mbrAppCore/plugins/sortable\n *\n * @description Sortable\n *\n * @listens module:mbrAppCore~mbrAppCore:load\n */\n(function($, CORE) {\n    'use strict';\n\n    CORE.regExtension({\n        name: 'plugin-sortable',\n        events: {\n            load: function() {\n                var prevId, newPrevId;\n                var sortStarted = false;\n\n                CORE.$template.sortable({\n                    axis: 'y',\n                    items: '> div:not(.no-sortable)',\n                    handle: '.sortable',\n                    placeholder: 'ui-sortable-placeholder',\n                    scrollSpeed: 50\n                }).on('sortstart', function(e, info) {\n                    CORE.fire('startChangeComponentPosition');\n\n                    CORE.focusComponentBlock('x');\n\n                    sortStarted = true;\n\n                    if (CORE.APP.$iframe.hasClass('desktop')) {\n                        CORE.APP.$iframe.closest('.app-template').addClass('scaled sorting');\n                        CORE.APP.$body.addClass('sorting');\n                        CORE.$body.addClass('scaled');\n                        CORE.$template.addClass('scaled');\n                    }\n\n                    if (!CORE.APP.isAMP()) {\n                        info.helper.find('.app-component-content > section').jarallax('destroy').css('position', '');\n                    }\n\n                    prevId = info.item.prev(':not(.no-sortable)').data('app-component-id');\n                }).on('sortstop', function(e, info) {\n                    sortStarted = false;\n\n                    CORE.APP.$iframe.closest('.app-template').removeClass('scaled sorting');\n                    CORE.APP.$body.removeClass('sorting');\n                    CORE.$body.removeClass('scaled');\n                    CORE.$template.removeClass('scaled');\n\n                    if (!CORE.APP.isAMP()) {\n                        if (info) {\n                            info.item.find('.mbr-parallax-background').jarallax({\n                                speed: 0.6\n                            }).css('position', 'relative');\n                        } else {\n                            CORE.$template.find('.app-component > .mbr-parallax-background').jarallax({\n                                speed: 0.6\n                            }).css('position', 'relative');\n                        }\n                    }\n\n                    if (info) {\n                        newPrevId = info.item.prev(':not(.no-sortable)').data('app-component-id');\n                    }\n\n                    // change item position in project file\n                    if (info && prevId !== newPrevId) {\n                        /**\n                         * @event mbrAppCore:changeComponentPosition\n                         * @param id\n                         * @param newPrevId\n                         * @param prevId\n                         */\n                        CORE.fire('changeComponentPosition', info.item.data('app-component-id'), newPrevId, prevId);\n                    }\n                });\n\n                // fix for compatibility with jquery.tooltipster.js\n                $.fn.scrollParent = (function(scrollParent) {\n                    return function() {\n                        if (this[0].parentNode === CORE.$template[0]) {\n                            return $(this[0].ownerDocument);\n                        }\n\n                        return scrollParent.apply(this, arguments);\n                    };\n                })($.fn.scrollParent);\n\n                // when drag block and mouseup outside of core iframe\n                CORE.APP.$body.on('mouseup touchend', function(e) {\n                    if (sortStarted) {\n                        CORE.$template.trigger('sortstop');\n                    }\n                });\n            }\n        }\n    });\n}(jQuery, mbrAppCore));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tc29ydGFibGUuanM/OWUzOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUMiLCJmaWxlIjoiLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tc29ydGFibGUuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBtb2R1bGUgIG1ickFwcENvcmUvcGx1Z2lucy9zb3J0YWJsZVxuICpcbiAqIEBkZXNjcmlwdGlvbiBTb3J0YWJsZVxuICpcbiAqIEBsaXN0ZW5zIG1vZHVsZTptYnJBcHBDb3Jlfm1ickFwcENvcmU6bG9hZFxuICovXG4oZnVuY3Rpb24oJCwgQ09SRSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIENPUkUucmVnRXh0ZW5zaW9uKHtcbiAgICAgICAgbmFtZTogJ3BsdWdpbi1zb3J0YWJsZScsXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZJZCwgbmV3UHJldklkO1xuICAgICAgICAgICAgICAgIHZhciBzb3J0U3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgQ09SRS4kdGVtcGxhdGUuc29ydGFibGUoe1xuICAgICAgICAgICAgICAgICAgICBheGlzOiAneScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiAnPiBkaXY6bm90KC5uby1zb3J0YWJsZSknLFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGU6ICcuc29ydGFibGUnLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ3VpLXNvcnRhYmxlLXBsYWNlaG9sZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsU3BlZWQ6IDUwXG4gICAgICAgICAgICAgICAgfSkub24oJ3NvcnRzdGFydCcsIGZ1bmN0aW9uKGUsIGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgQ09SRS5maXJlKCdzdGFydENoYW5nZUNvbXBvbmVudFBvc2l0aW9uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgQ09SRS5mb2N1c0NvbXBvbmVudEJsb2NrKCd4Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc29ydFN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChDT1JFLkFQUC4kaWZyYW1lLmhhc0NsYXNzKCdkZXNrdG9wJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIENPUkUuQVBQLiRpZnJhbWUuY2xvc2VzdCgnLmFwcC10ZW1wbGF0ZScpLmFkZENsYXNzKCdzY2FsZWQgc29ydGluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5BUFAuJGJvZHkuYWRkQ2xhc3MoJ3NvcnRpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIENPUkUuJGJvZHkuYWRkQ2xhc3MoJ3NjYWxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS4kdGVtcGxhdGUuYWRkQ2xhc3MoJ3NjYWxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFDT1JFLkFQUC5pc0FNUCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmhlbHBlci5maW5kKCcuYXBwLWNvbXBvbmVudC1jb250ZW50ID4gc2VjdGlvbicpLmphcmFsbGF4KCdkZXN0cm95JykuY3NzKCdwb3NpdGlvbicsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHByZXZJZCA9IGluZm8uaXRlbS5wcmV2KCc6bm90KC5uby1zb3J0YWJsZSknKS5kYXRhKCdhcHAtY29tcG9uZW50LWlkJyk7XG4gICAgICAgICAgICAgICAgfSkub24oJ3NvcnRzdG9wJywgZnVuY3Rpb24oZSwgaW5mbykge1xuICAgICAgICAgICAgICAgICAgICBzb3J0U3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIENPUkUuQVBQLiRpZnJhbWUuY2xvc2VzdCgnLmFwcC10ZW1wbGF0ZScpLnJlbW92ZUNsYXNzKCdzY2FsZWQgc29ydGluZycpO1xuICAgICAgICAgICAgICAgICAgICBDT1JFLkFQUC4kYm9keS5yZW1vdmVDbGFzcygnc29ydGluZycpO1xuICAgICAgICAgICAgICAgICAgICBDT1JFLiRib2R5LnJlbW92ZUNsYXNzKCdzY2FsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgQ09SRS4kdGVtcGxhdGUucmVtb3ZlQ2xhc3MoJ3NjYWxlZCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghQ09SRS5BUFAuaXNBTVAoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLml0ZW0uZmluZCgnLm1ici1wYXJhbGxheC1iYWNrZ3JvdW5kJykuamFyYWxsYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogMC42XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY3NzKCdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT1JFLiR0ZW1wbGF0ZS5maW5kKCcuYXBwLWNvbXBvbmVudCA+IC5tYnItcGFyYWxsYXgtYmFja2dyb3VuZCcpLmphcmFsbGF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDAuNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdQcmV2SWQgPSBpbmZvLml0ZW0ucHJldignOm5vdCgubm8tc29ydGFibGUpJykuZGF0YSgnYXBwLWNvbXBvbmVudC1pZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdlIGl0ZW0gcG9zaXRpb24gaW4gcHJvamVjdCBmaWxlXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmZvICYmIHByZXZJZCAhPT0gbmV3UHJldklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOmNoYW5nZUNvbXBvbmVudFBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBuZXdQcmV2SWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBwcmV2SWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS5maXJlKCdjaGFuZ2VDb21wb25lbnRQb3NpdGlvbicsIGluZm8uaXRlbS5kYXRhKCdhcHAtY29tcG9uZW50LWlkJyksIG5ld1ByZXZJZCwgcHJldklkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gZml4IGZvciBjb21wYXRpYmlsaXR5IHdpdGgganF1ZXJ5LnRvb2x0aXBzdGVyLmpzXG4gICAgICAgICAgICAgICAgJC5mbi5zY3JvbGxQYXJlbnQgPSAoZnVuY3Rpb24oc2Nyb2xsUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzWzBdLnBhcmVudE5vZGUgPT09IENPUkUuJHRlbXBsYXRlWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpc1swXS5vd25lckRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKCQuZm4uc2Nyb2xsUGFyZW50KTtcblxuICAgICAgICAgICAgICAgIC8vIHdoZW4gZHJhZyBibG9jayBhbmQgbW91c2V1cCBvdXRzaWRlIG9mIGNvcmUgaWZyYW1lXG4gICAgICAgICAgICAgICAgQ09SRS5BUFAuJGJvZHkub24oJ21vdXNldXAgdG91Y2hlbmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3J0U3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ09SRS4kdGVtcGxhdGUudHJpZ2dlcignc29ydHN0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KGpRdWVyeSwgbWJyQXBwQ29yZSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-plugin-sortable.js\n")},"./web/app/builder/js/builder-plugin-summernote.js":
/*!*********************************************************!*\
  !*** ./web/app/builder/js/builder-plugin-summernote.js ***!
  \*********************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module mbrAppCore/plugins/summernote\n * @description  summernote plugin\n * @listens module:mbrAppCore/components-load~mbrAppCore:load\n * @listens module:mbrAppCore/components-load~mbrAppCore:rendered\n * @listens module:mbrAppCore/components~mbrAppCore:changedComponentParams\n * @listens module:mbrAppCore/components~mbrAppCore:removeComponent\n * @listens module:mbrAppCore/components-load~mbrAppCore:clearBlocks\n * @listens module:mbrAppCore/plugins/media-editor~mbrAppCore:showedPopup\n * @listens module:assets/rivets/extended-mbr~mbrAppCore:rivetsBlur\n */\n(function ($, Core) {\n    'use strict';\n\n    var timeout;\n    var EDITABLE_SELECTOR = '[data-app-edit=\"content\"], [data-app-edit=\"full\"], [data-app-btn]'; // selector for editable items\n    var initedSummernote;\n\n    var triggerPopoverUpdate = true;\n\n    Core.regExtension({\n        name: 'plugin-summernote',\n        /** @lends module:mbrAppCore/plugins/summernote */\n        global: {\n            /**\n             * Initialize summernote\n             * @param {jQuery} $context\n             */\n            initSummernote: function ($context) {\n                var _this = this;\n\n                $context = $context || _this.$template;\n                var $editable = $context.is(EDITABLE_SELECTOR) ? $context : $context.find(EDITABLE_SELECTOR);\n\n                $editable.attr('contenteditable', true);\n\n                clearTimeout(timeout);\n\n                timeout = setTimeout(function () {\n\n                    /**\n                     * @filter mbrAppCore->summernoteEditableItems\n                     * @param {jQuery} $editable - jQuery item\n                     * @param {jQuery} $context - jQuery context\n                     * @param {Bool} - destroy bool\n                     */\n                    $editable = _this.applyFilter('summernoteEditableItems', $editable, $context, false);\n\n                    initedSummernote = $editable.get(0);\n\n                    $editable.filter(':not(.note-air-editor)').each(function () {\n                        if ($(this).is('.note-air-editor')) {\n                            return;\n                        }\n\n                        // prepare toolbar options for buttons\n                        var isBtn = $(this).is('[data-app-btn]');\n                        if (isBtn) {\n                            var toolbar = $(this).parents('[data-app-edit]:eq(0)').attr('data-toolbar') || false;\n                            if (toolbar) {\n                                $(this).attr('data-toolbar', toolbar);\n                            }\n                        }\n\n                        // full editor toolbar\n                        var popover;\n                        var isFull = $(this).is('[data-app-edit=\"full\"]');\n                        if (isFull) {\n                            popover = [\n                                ['font', ['bold', 'italic']],\n                                ['mbrLink', ['mbrLink']],\n                                ['mbrFonts', ['mbrColor'], { optional: ['mbrFonts', 'mbrFontSize'] }],\n                                ['mbrAlign', ['mbrAlign']]\n                            ];\n                        }\n\n                        // default editor toolbar\n                        else {\n                            popover = [\n                                ['font', ['bold', 'italic']],\n                                ['mbrLink', ['mbrLink']],\n                                ['mbrFonts', ['mbrColor'], { optional: ['mbrFonts', 'mbrFontSize'] }],\n                                ['mbrAlign', ['mbrAlign']]\n                            ];\n                        }\n\n                        /**\n                         * Modificate popover on summernote button init\n                         * @param {Array} popover\n                         * @param {String} popover.1 - group\n                         * @param {String[]} popover.2 - buttons\n                         * @param {jQuery} $editable - target element\n                         */\n                        popover = _this.applyFilter('summernoteMakePopover', popover, $editable);\n\n                        // init summernote\n                        $(this).summernote(_this.applyFilter('summernoteOptions', {\n                            airMode: true,\n                            styleWithSpan: false,\n                            focus: true,\n                            airPopover: popover,\n                            onFocus: function (e) {\n                                // hide params block\n                                _this.APP.hideComponentParams();\n\n                                /**\n                                 * @event mbrAppCore:summernoteFocus\n                                 * @param {DomNode} node - current editing element\n                                 * @param event\n                                 */\n                                if(e.target.innerText.length === 0 && e.target.innerHTML.length !== 0) {\n                                    e.target.innerHTML = e.target.getAttribute('data-app-placeholder') + e.target.innerHTML;\n                                }\n                                _this.fire('summernoteFocus', this, e);\n                            },\n                            onBlur: function (e) {\n                                /**\n                                 * @event mbrAppCore:summernoteBlur\n                                 * @param {DomNode} node - current editing element\n                                 * @param event\n                                 */\n                                _this.fire('summernoteBlur', this, e);\n                            },\n                            // remove text formatting\n                            onPaste: function (e) {\n                                var bufferText = ((e.originalEvent || e).clipboardData || window.clipboardData).getData('text/plain');\n                                var insertText = true;\n\n                                // replace all new lines to <br> when editor is inline tag\n                                if ($(this).is('p, span, a, .btn, button, strong, b, em, i, small, code, label')) {\n                                    bufferText = bufferText.replace(/\\n/g, '<br>');\n                                    insertText = false;\n                                }\n\n                                e.preventDefault();\n\n                                /**\n                                 * @filter mbrAppCore->summernotePaste\n                                 * @param {String} bufferText\n                                 */\n                                bufferText = _this.applyFilter('summernotePaste', bufferText);\n\n                                document.execCommand(insertText ? 'insertText' : 'insertHTML', false, bufferText);\n                            },\n                            onKeydown: function (e) {\n                                // fix for bootstrap carousel + spacebar\n                                if (e.keyCode == 32) {\n                                    e.stopPropagation();\n                                }\n                                /**\n                                 * @event mbrAppCore:summernoteKeydown\n                                 * @param {DomNode} node - current editing element\n                                 * @param event\n                                 */\n                                _this.fire('summernoteKeydown', this, e);\n                            }\n                        }, $editable));\n                        /**\n                         * @event mbrAppCore:summernoteInited\n                         * @param {DomNode} node - current editing element\n                         */\n                        _this.fire('summernoteInited', this);\n                    });\n                }, 100);\n            },\n\n            /**\n             * Destroy summernote\n             * @param {jQuery} $context\n             */\n            destroySummernote: function ($context) {\n                $context = $context || this.$template;\n                var $editable = $context.is(EDITABLE_SELECTOR) ? $context : $context.find(EDITABLE_SELECTOR);\n                $editable = this.applyFilter('summernoteEditableItems', $editable, $context, true);\n                $editable.filter('[contenteditable]').destroy();\n                initedSummernote = undefined;\n            },\n\n            /**\n             * Fire when editor content changed\n             * @param {jQuery} $item\n             */\n            changeSummernote: function ($item) {\n                // check if item - is button\n                if ($item.is('[data-app-btn]') && !$item.attr('data-app-edit')) {\n                    $item = $item.parents('[data-app-edit]:eq(0)');\n\n                    if (!$item.length) {\n                        return;\n                    }\n                }\n                var self = this;\n                var componentID = $item.parents('.app-component').attr('data-app-component-id');\n                setTimeout(function () {\n                    self.updateGlobalComponents(componentID, function (current, global) {\n                        for (var k in global) {\n                            if (k === '_customHTML' || typeof global[k] !== 'object' && typeof global[k] !== 'function' && !/^_/g.test(k)) {\n                                global[k] = current[k];\n                            }\n                        }\n                    });\n                }, 0);\n            }\n        },\n        events: {\n            load: function () {\n                var _this = this;\n\n                Core.$template.on('mousedown', function (e) {\n                    let $editable = $(e.target);\n                    if (!$editable.is(EDITABLE_SELECTOR))\n                        $editable = $editable.parents(EDITABLE_SELECTOR);\n\n                    if (initedSummernote && (initedSummernote != $editable[0])) {\n                        _this.destroySummernote();\n                    }\n\n                    if (!$editable[0]) return;\n\n                    // open \"icon dialog\" when click on icon\n                    if ($(e.target).is('.mbr-iconfont')) {\n                        var $icon = $(e.target);\n                        Core.summernoteIconRequest(e.target, $editable[0], function (node) {\n                            if (!arguments.length) return;\n                            if (node) {\n                                if ($editable.is('[data-app-btn]')) { // for button insert to the begining\n                                    $editable.prepend(node);\n                                } else {\n                                    $icon.after(node);\n                                }\n                            }\n                            $icon.remove();\n                            $editable.blur();\n                        });\n                        return false;\n                    }\n                    _this.initSummernote($editable);\n                });\n\n                Core.APP.on('showedPopup', function () {\n                    this.$body.find('.note-popover > *').attr('style', 'display: none;');\n                });\n\n                // attach to popover.update\n                wrapFunc($.summernote.eventHandler.modules.popover, 'update', function ($popover, styleInfo, isAirMode) {\n                    setTimeout(function () {\n\n                        var $context = $(styleInfo.range.sc);\n                        var $editable = $context.closest(EDITABLE_SELECTOR);\n\n                        /**\n                         * @event mbrAppCore:summernotePopoverUpdate\n                         * @param {DomNode} popover\n                         * @param {DomNode} editable\n                         * @param styleInfo\n                         */\n                        _this.fire('summernotePopoverUpdate', $popover.children(':visible').get(0), $editable.get(0), styleInfo); // extract visible popover version\n\n                    }, 0);\n                });\n            },\n            rendered: function () { },\n            changedComponentParams: function (id) {\n                var component = $(Core.getComponentBlock(id));\n                this.destroySummernote(component);\n            },\n            removeComponent: function (id, $component) {\n                this.destroySummernote($component);\n            },\n            clearBlocks: function () {\n                this.destroySummernote();\n            },\n\n            // called when rivets contenteditable on blur or delete event\n            rivetsBlur: function (item) {\n                this.changeSummernote($(item));\n                // this.initSummernote($(item).parents('.app-component'));\n            },\n\n            // hide summernote-popover on media-popover show\n            showedPopover: function () {\n                this.destroySummernote();\n            },\n\n            summernotePopoverUpdate: function (popover, editable) {\n                if (triggerPopoverUpdate) {\n                    triggerPopoverUpdate = false;\n\n                    setTimeout(function () {\n                        triggerPopoverUpdate = true;\n                    }, 0);\n\n                    var hiddenBtns = [];\n                    var $popoverContent = $(popover).find('.popover-content');\n\n                    while ($popoverContent.width() > window.innerWidth) {\n                        var hiddenBtn = $popoverContent.find('> .btn-group:visible:last > *:visible').parent().hide();\n\n                        hiddenBtns.push(hiddenBtn);\n                    }\n\n                    var $shownBtns = $popoverContent.find('> .btn-group:visible > *:visible').closest('.btn-group');\n\n                    var expandBtnHtml =\n                        '<div class=\"btn-group note-show-more\">' +\n                        '<button data-toggle=\"tooltip\" type=\"button\" class=\"btn btn-default btn-sm\" title=\"\" tabindex=\"-1\" data-original-title=\"Insert icon\">' +\n                        '<i class=\"mbr-icon-more-horizontal\"></i>' +\n                        '</button>' +\n                        '</div>';\n\n                    if (hiddenBtns.length > 0) {\n                        $popoverContent.append(expandBtnHtml);\n\n                        $popoverContent.find('.note-show-more').click(function (e) {\n                            if ($popoverContent.find('.note-show-more').is(':first-child')) {\n                                $popoverContent.hide('slide', { direction: 'right' }, 700, function () {\n                                    $shownBtns.show();\n\n                                    hiddenBtns.forEach(function ($item) {\n                                        $item.hide();\n                                    });\n\n                                    $popoverContent.find('.note-show-more').appendTo($popoverContent);\n\n                                    $popoverContent.show('slide', { direction: 'left' }, 700, function () { });\n                                });\n                            } else {\n                                $popoverContent.hide('slide', { direction: 'left' }, 700, function () {\n                                    $shownBtns.hide();\n\n                                    hiddenBtns.forEach(function ($item) {\n                                        $item.show();\n                                    });\n\n                                    $popoverContent.find('.note-show-more').prependTo($popoverContent);\n\n                                    $popoverContent.show('slide', { direction: 'right' }, 700, function () { });\n                                });\n\n                            }\n                        });\n                    }\n                }\n            }\n        }\n    });\n\n    // simple wrap\n    function wrapFunc(obj, funcName, callback) {\n        var func = obj[funcName];\n        obj[funcName] = function () {\n            var args = Array.prototype.slice.call(arguments);\n            func.apply(this, args);\n\n            try {\n                callback.apply(this, args);\n            } catch (e) { }\n        };\n    }\n}(jQuery, mbrAppCore));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tc3VtbWVybm90ZS5qcz8zMTVkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0dBQWdHO0FBQ2hHOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSwrQkFBK0IsT0FBTztBQUN0QywrQkFBK0IsT0FBTztBQUN0QywrQkFBK0IsS0FBSztBQUNwQztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsd0NBQXdDO0FBQ3BHO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHdDQUF3QztBQUNwRztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQyxNQUFNO0FBQ3pDLG1DQUFtQyxPQUFPO0FBQzFDLG1DQUFtQyxTQUFTO0FBQzVDLG1DQUFtQyxPQUFPO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQ0FBMkMsUUFBUTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFFBQVE7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsUUFBUTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQSxzRkFBc0Y7QUFDdEYsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0MsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBLGlJQUFpSTs7QUFFakkscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsbUNBQW1DLEVBQUU7QUFDckM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUI7O0FBRXJCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrREFBK0QscUJBQXFCO0FBQ3BGOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUM7O0FBRXJDOztBQUVBLG1FQUFtRSxvQkFBb0Isb0JBQW9CLEVBQUU7QUFDN0csaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QiwrREFBK0Qsb0JBQW9CO0FBQ25GOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUM7O0FBRXJDOztBQUVBLG1FQUFtRSxxQkFBcUIsb0JBQW9CLEVBQUU7QUFDOUcsaUNBQWlDOztBQUVqQztBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekI7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tc3VtbWVybm90ZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG1vZHVsZSBtYnJBcHBDb3JlL3BsdWdpbnMvc3VtbWVybm90ZVxuICogQGRlc2NyaXB0aW9uICBzdW1tZXJub3RlIHBsdWdpblxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvY29tcG9uZW50cy1sb2Fkfm1ickFwcENvcmU6bG9hZFxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvY29tcG9uZW50cy1sb2Fkfm1ickFwcENvcmU6cmVuZGVyZWRcbiAqIEBsaXN0ZW5zIG1vZHVsZTptYnJBcHBDb3JlL2NvbXBvbmVudHN+bWJyQXBwQ29yZTpjaGFuZ2VkQ29tcG9uZW50UGFyYW1zXG4gKiBAbGlzdGVucyBtb2R1bGU6bWJyQXBwQ29yZS9jb21wb25lbnRzfm1ickFwcENvcmU6cmVtb3ZlQ29tcG9uZW50XG4gKiBAbGlzdGVucyBtb2R1bGU6bWJyQXBwQ29yZS9jb21wb25lbnRzLWxvYWR+bWJyQXBwQ29yZTpjbGVhckJsb2Nrc1xuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvcGx1Z2lucy9tZWRpYS1lZGl0b3J+bWJyQXBwQ29yZTpzaG93ZWRQb3B1cFxuICogQGxpc3RlbnMgbW9kdWxlOmFzc2V0cy9yaXZldHMvZXh0ZW5kZWQtbWJyfm1ickFwcENvcmU6cml2ZXRzQmx1clxuICovXG4oZnVuY3Rpb24gKCQsIENvcmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgdGltZW91dDtcbiAgICB2YXIgRURJVEFCTEVfU0VMRUNUT1IgPSAnW2RhdGEtYXBwLWVkaXQ9XCJjb250ZW50XCJdLCBbZGF0YS1hcHAtZWRpdD1cImZ1bGxcIl0sIFtkYXRhLWFwcC1idG5dJzsgLy8gc2VsZWN0b3IgZm9yIGVkaXRhYmxlIGl0ZW1zXG4gICAgdmFyIGluaXRlZFN1bW1lcm5vdGU7XG5cbiAgICB2YXIgdHJpZ2dlclBvcG92ZXJVcGRhdGUgPSB0cnVlO1xuXG4gICAgQ29yZS5yZWdFeHRlbnNpb24oe1xuICAgICAgICBuYW1lOiAncGx1Z2luLXN1bW1lcm5vdGUnLFxuICAgICAgICAvKiogQGxlbmRzIG1vZHVsZTptYnJBcHBDb3JlL3BsdWdpbnMvc3VtbWVybm90ZSAqL1xuICAgICAgICBnbG9iYWw6IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW5pdGlhbGl6ZSBzdW1tZXJub3RlXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGNvbnRleHRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5pdFN1bW1lcm5vdGU6IGZ1bmN0aW9uICgkY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAkY29udGV4dCA9ICRjb250ZXh0IHx8IF90aGlzLiR0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB2YXIgJGVkaXRhYmxlID0gJGNvbnRleHQuaXMoRURJVEFCTEVfU0VMRUNUT1IpID8gJGNvbnRleHQgOiAkY29udGV4dC5maW5kKEVESVRBQkxFX1NFTEVDVE9SKTtcblxuICAgICAgICAgICAgICAgICRlZGl0YWJsZS5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5zdW1tZXJub3RlRWRpdGFibGVJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlIC0galF1ZXJ5IGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRjb250ZXh0IC0galF1ZXJ5IGNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtCb29sfSAtIGRlc3Ryb3kgYm9vbFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgJGVkaXRhYmxlID0gX3RoaXMuYXBwbHlGaWx0ZXIoJ3N1bW1lcm5vdGVFZGl0YWJsZUl0ZW1zJywgJGVkaXRhYmxlLCAkY29udGV4dCwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIGluaXRlZFN1bW1lcm5vdGUgPSAkZWRpdGFibGUuZ2V0KDApO1xuXG4gICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5maWx0ZXIoJzpub3QoLm5vdGUtYWlyLWVkaXRvciknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCcubm90ZS1haXItZWRpdG9yJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgdG9vbGJhciBvcHRpb25zIGZvciBidXR0b25zXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNCdG4gPSAkKHRoaXMpLmlzKCdbZGF0YS1hcHAtYnRuXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQnRuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2xiYXIgPSAkKHRoaXMpLnBhcmVudHMoJ1tkYXRhLWFwcC1lZGl0XTplcSgwKScpLmF0dHIoJ2RhdGEtdG9vbGJhcicpIHx8IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS10b29sYmFyJywgdG9vbGJhcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmdWxsIGVkaXRvciB0b29sYmFyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9wb3ZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0Z1bGwgPSAkKHRoaXMpLmlzKCdbZGF0YS1hcHAtZWRpdD1cImZ1bGxcIl0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3BvdmVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2ZvbnQnLCBbJ2JvbGQnLCAnaXRhbGljJ11dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ21ickxpbmsnLCBbJ21ickxpbmsnXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnbWJyRm9udHMnLCBbJ21ickNvbG9yJ10sIHsgb3B0aW9uYWw6IFsnbWJyRm9udHMnLCAnbWJyRm9udFNpemUnXSB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydtYnJBbGlnbicsIFsnbWJyQWxpZ24nXV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IGVkaXRvciB0b29sYmFyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3BvdmVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ2ZvbnQnLCBbJ2JvbGQnLCAnaXRhbGljJ11dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ21ickxpbmsnLCBbJ21ickxpbmsnXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnbWJyRm9udHMnLCBbJ21ickNvbG9yJ10sIHsgb3B0aW9uYWw6IFsnbWJyRm9udHMnLCAnbWJyRm9udFNpemUnXSB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydtYnJBbGlnbicsIFsnbWJyQWxpZ24nXV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIE1vZGlmaWNhdGUgcG9wb3ZlciBvbiBzdW1tZXJub3RlIGJ1dHRvbiBpbml0XG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBwb3BvdmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcG9wb3Zlci4xIC0gZ3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nW119IHBvcG92ZXIuMiAtIGJ1dHRvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGUgLSB0YXJnZXQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3BvdmVyID0gX3RoaXMuYXBwbHlGaWx0ZXIoJ3N1bW1lcm5vdGVNYWtlUG9wb3ZlcicsIHBvcG92ZXIsICRlZGl0YWJsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXQgc3VtbWVybm90ZVxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zdW1tZXJub3RlKF90aGlzLmFwcGx5RmlsdGVyKCdzdW1tZXJub3RlT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaXJNb2RlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlV2l0aFNwYW46IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFpclBvcG92ZXI6IHBvcG92ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Gb2N1czogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZSBwYXJhbXMgYmxvY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuQVBQLmhpZGVDb21wb25lbnRQYXJhbXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c3VtbWVybm90ZUZvY3VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RG9tTm9kZX0gbm9kZSAtIGN1cnJlbnQgZWRpdGluZyBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS50YXJnZXQuaW5uZXJUZXh0Lmxlbmd0aCA9PT0gMCAmJiBlLnRhcmdldC5pbm5lckhUTUwubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5pbm5lckhUTUwgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYXBwLXBsYWNlaG9sZGVyJykgKyBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlyZSgnc3VtbWVybm90ZUZvY3VzJywgdGhpcywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJsdXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZXZlbnQgbWJyQXBwQ29yZTpzdW1tZXJub3RlQmx1clxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0RvbU5vZGV9IG5vZGUgLSBjdXJyZW50IGVkaXRpbmcgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZpcmUoJ3N1bW1lcm5vdGVCbHVyJywgdGhpcywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGV4dCBmb3JtYXR0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QYXN0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1ZmZlclRleHQgPSAoKGUub3JpZ2luYWxFdmVudCB8fCBlKS5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhKS5nZXREYXRhKCd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnNlcnRUZXh0ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlIGFsbCBuZXcgbGluZXMgdG8gPGJyPiB3aGVuIGVkaXRvciBpcyBpbmxpbmUgdGFnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCdwLCBzcGFuLCBhLCAuYnRuLCBidXR0b24sIHN0cm9uZywgYiwgZW0sIGksIHNtYWxsLCBjb2RlLCBsYWJlbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJUZXh0ID0gYnVmZmVyVGV4dC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydFRleHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGZpbHRlciBtYnJBcHBDb3JlLT5zdW1tZXJub3RlUGFzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGJ1ZmZlclRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlclRleHQgPSBfdGhpcy5hcHBseUZpbHRlcignc3VtbWVybm90ZVBhc3RlJywgYnVmZmVyVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoaW5zZXJ0VGV4dCA/ICdpbnNlcnRUZXh0JyA6ICdpbnNlcnRIVE1MJywgZmFsc2UsIGJ1ZmZlclRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlkb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXggZm9yIGJvb3RzdHJhcCBjYXJvdXNlbCArIHNwYWNlYmFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMzIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnN1bW1lcm5vdGVLZXlkb3duXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RG9tTm9kZX0gbm9kZSAtIGN1cnJlbnQgZWRpdGluZyBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlyZSgnc3VtbWVybm90ZUtleWRvd24nLCB0aGlzLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAkZWRpdGFibGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcENvcmU6c3VtbWVybm90ZUluaXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtEb21Ob2RlfSBub2RlIC0gY3VycmVudCBlZGl0aW5nIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlyZSgnc3VtbWVybm90ZUluaXRlZCcsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZXN0cm95IHN1bW1lcm5vdGVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkY29udGV4dFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZXN0cm95U3VtbWVybm90ZTogZnVuY3Rpb24gKCRjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgJGNvbnRleHQgPSAkY29udGV4dCB8fCB0aGlzLiR0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICB2YXIgJGVkaXRhYmxlID0gJGNvbnRleHQuaXMoRURJVEFCTEVfU0VMRUNUT1IpID8gJGNvbnRleHQgOiAkY29udGV4dC5maW5kKEVESVRBQkxFX1NFTEVDVE9SKTtcbiAgICAgICAgICAgICAgICAkZWRpdGFibGUgPSB0aGlzLmFwcGx5RmlsdGVyKCdzdW1tZXJub3RlRWRpdGFibGVJdGVtcycsICRlZGl0YWJsZSwgJGNvbnRleHQsIHRydWUpO1xuICAgICAgICAgICAgICAgICRlZGl0YWJsZS5maWx0ZXIoJ1tjb250ZW50ZWRpdGFibGVdJykuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIGluaXRlZFN1bW1lcm5vdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEZpcmUgd2hlbiBlZGl0b3IgY29udGVudCBjaGFuZ2VkXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGl0ZW1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2hhbmdlU3VtbWVybm90ZTogZnVuY3Rpb24gKCRpdGVtKSB7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgaXRlbSAtIGlzIGJ1dHRvblxuICAgICAgICAgICAgICAgIGlmICgkaXRlbS5pcygnW2RhdGEtYXBwLWJ0bl0nKSAmJiAhJGl0ZW0uYXR0cignZGF0YS1hcHAtZWRpdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICRpdGVtID0gJGl0ZW0ucGFyZW50cygnW2RhdGEtYXBwLWVkaXRdOmVxKDApJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkaXRlbS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudElEID0gJGl0ZW0ucGFyZW50cygnLmFwcC1jb21wb25lbnQnKS5hdHRyKCdkYXRhLWFwcC1jb21wb25lbnQtaWQnKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51cGRhdGVHbG9iYWxDb21wb25lbnRzKGNvbXBvbmVudElELCBmdW5jdGlvbiAoY3VycmVudCwgZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIGdsb2JhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrID09PSAnX2N1c3RvbUhUTUwnIHx8IHR5cGVvZiBnbG9iYWxba10gIT09ICdvYmplY3QnICYmIHR5cGVvZiBnbG9iYWxba10gIT09ICdmdW5jdGlvbicgJiYgIS9eXy9nLnRlc3QoaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsW2tdID0gY3VycmVudFtrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgQ29yZS4kdGVtcGxhdGUub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCAkZWRpdGFibGUgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZWRpdGFibGUuaXMoRURJVEFCTEVfU0VMRUNUT1IpKVxuICAgICAgICAgICAgICAgICAgICAgICAgJGVkaXRhYmxlID0gJGVkaXRhYmxlLnBhcmVudHMoRURJVEFCTEVfU0VMRUNUT1IpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbml0ZWRTdW1tZXJub3RlICYmIChpbml0ZWRTdW1tZXJub3RlICE9ICRlZGl0YWJsZVswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3Ryb3lTdW1tZXJub3RlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoISRlZGl0YWJsZVswXSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIG9wZW4gXCJpY29uIGRpYWxvZ1wiIHdoZW4gY2xpY2sgb24gaWNvblxuICAgICAgICAgICAgICAgICAgICBpZiAoJChlLnRhcmdldCkuaXMoJy5tYnItaWNvbmZvbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpY29uID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBDb3JlLnN1bW1lcm5vdGVJY29uUmVxdWVzdChlLnRhcmdldCwgJGVkaXRhYmxlWzBdLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZWRpdGFibGUuaXMoJ1tkYXRhLWFwcC1idG5dJykpIHsgLy8gZm9yIGJ1dHRvbiBpbnNlcnQgdG8gdGhlIGJlZ2luaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGUucHJlcGVuZChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpY29uLmFmdGVyKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpY29uLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5pbml0U3VtbWVybm90ZSgkZWRpdGFibGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgQ29yZS5BUFAub24oJ3Nob3dlZFBvcHVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRib2R5LmZpbmQoJy5ub3RlLXBvcG92ZXIgPiAqJykuYXR0cignc3R5bGUnLCAnZGlzcGxheTogbm9uZTsnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGF0dGFjaCB0byBwb3BvdmVyLnVwZGF0ZVxuICAgICAgICAgICAgICAgIHdyYXBGdW5jKCQuc3VtbWVybm90ZS5ldmVudEhhbmRsZXIubW9kdWxlcy5wb3BvdmVyLCAndXBkYXRlJywgZnVuY3Rpb24gKCRwb3BvdmVyLCBzdHlsZUluZm8sIGlzQWlyTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRjb250ZXh0ID0gJChzdHlsZUluZm8ucmFuZ2Uuc2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlZGl0YWJsZSA9ICRjb250ZXh0LmNsb3Nlc3QoRURJVEFCTEVfU0VMRUNUT1IpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBldmVudCBtYnJBcHBDb3JlOnN1bW1lcm5vdGVQb3BvdmVyVXBkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0RvbU5vZGV9IHBvcG92ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RG9tTm9kZX0gZWRpdGFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBzdHlsZUluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlyZSgnc3VtbWVybm90ZVBvcG92ZXJVcGRhdGUnLCAkcG9wb3Zlci5jaGlsZHJlbignOnZpc2libGUnKS5nZXQoMCksICRlZGl0YWJsZS5nZXQoMCksIHN0eWxlSW5mbyk7IC8vIGV4dHJhY3QgdmlzaWJsZSBwb3BvdmVyIHZlcnNpb25cblxuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW5kZXJlZDogZnVuY3Rpb24gKCkgeyB9LFxuICAgICAgICAgICAgY2hhbmdlZENvbXBvbmVudFBhcmFtczogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBvbmVudCA9ICQoQ29yZS5nZXRDb21wb25lbnRCbG9jayhpZCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVN1bW1lcm5vdGUoY29tcG9uZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChpZCwgJGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVN1bW1lcm5vdGUoJGNvbXBvbmVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXJCbG9ja3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lTdW1tZXJub3RlKCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBjYWxsZWQgd2hlbiByaXZldHMgY29udGVudGVkaXRhYmxlIG9uIGJsdXIgb3IgZGVsZXRlIGV2ZW50XG4gICAgICAgICAgICByaXZldHNCbHVyOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlU3VtbWVybm90ZSgkKGl0ZW0pKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmluaXRTdW1tZXJub3RlKCQoaXRlbSkucGFyZW50cygnLmFwcC1jb21wb25lbnQnKSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBoaWRlIHN1bW1lcm5vdGUtcG9wb3ZlciBvbiBtZWRpYS1wb3BvdmVyIHNob3dcbiAgICAgICAgICAgIHNob3dlZFBvcG92ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lTdW1tZXJub3RlKCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzdW1tZXJub3RlUG9wb3ZlclVwZGF0ZTogZnVuY3Rpb24gKHBvcG92ZXIsIGVkaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyaWdnZXJQb3BvdmVyVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJQb3BvdmVyVXBkYXRlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyUG9wb3ZlclVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBoaWRkZW5CdG5zID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciAkcG9wb3ZlckNvbnRlbnQgPSAkKHBvcG92ZXIpLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQnKTtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoJHBvcG92ZXJDb250ZW50LndpZHRoKCkgPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhpZGRlbkJ0biA9ICRwb3BvdmVyQ29udGVudC5maW5kKCc+IC5idG4tZ3JvdXA6dmlzaWJsZTpsYXN0ID4gKjp2aXNpYmxlJykucGFyZW50KCkuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW5CdG5zLnB1c2goaGlkZGVuQnRuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciAkc2hvd25CdG5zID0gJHBvcG92ZXJDb250ZW50LmZpbmQoJz4gLmJ0bi1ncm91cDp2aXNpYmxlID4gKjp2aXNpYmxlJykuY2xvc2VzdCgnLmJ0bi1ncm91cCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBleHBhbmRCdG5IdG1sID1cbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwIG5vdGUtc2hvdy1tb3JlXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgdGl0bGU9XCJcIiB0YWJpbmRleD1cIi0xXCIgZGF0YS1vcmlnaW5hbC10aXRsZT1cIkluc2VydCBpY29uXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJtYnItaWNvbi1tb3JlLWhvcml6b250YWxcIj48L2k+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaGlkZGVuQnRucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcG9wb3ZlckNvbnRlbnQuYXBwZW5kKGV4cGFuZEJ0bkh0bWwpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkcG9wb3ZlckNvbnRlbnQuZmluZCgnLm5vdGUtc2hvdy1tb3JlJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHBvcG92ZXJDb250ZW50LmZpbmQoJy5ub3RlLXNob3ctbW9yZScpLmlzKCc6Zmlyc3QtY2hpbGQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcG9wb3ZlckNvbnRlbnQuaGlkZSgnc2xpZGUnLCB7IGRpcmVjdGlvbjogJ3JpZ2h0JyB9LCA3MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaG93bkJ0bnMuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW5CdG5zLmZvckVhY2goZnVuY3Rpb24gKCRpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwb3BvdmVyQ29udGVudC5maW5kKCcubm90ZS1zaG93LW1vcmUnKS5hcHBlbmRUbygkcG9wb3ZlckNvbnRlbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcG9wb3ZlckNvbnRlbnQuc2hvdygnc2xpZGUnLCB7IGRpcmVjdGlvbjogJ2xlZnQnIH0sIDcwMCwgZnVuY3Rpb24gKCkgeyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBvcG92ZXJDb250ZW50LmhpZGUoJ3NsaWRlJywgeyBkaXJlY3Rpb246ICdsZWZ0JyB9LCA3MDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaG93bkJ0bnMuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRkZW5CdG5zLmZvckVhY2goZnVuY3Rpb24gKCRpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0uc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwb3BvdmVyQ29udGVudC5maW5kKCcubm90ZS1zaG93LW1vcmUnKS5wcmVwZW5kVG8oJHBvcG92ZXJDb250ZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBvcG92ZXJDb250ZW50LnNob3coJ3NsaWRlJywgeyBkaXJlY3Rpb246ICdyaWdodCcgfSwgNzAwLCBmdW5jdGlvbiAoKSB7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBzaW1wbGUgd3JhcFxuICAgIGZ1bmN0aW9uIHdyYXBGdW5jKG9iaiwgZnVuY05hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBmdW5jID0gb2JqW2Z1bmNOYW1lXTtcbiAgICAgICAgb2JqW2Z1bmNOYW1lXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IH1cbiAgICAgICAgfTtcbiAgICB9XG59KGpRdWVyeSwgbWJyQXBwQ29yZSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-plugin-summernote.js\n")},"./web/app/builder/js/builder-plugin-tooltips.js":
/*!*******************************************************!*\
  !*** ./web/app/builder/js/builder-plugin-tooltips.js ***!
  \*******************************************************/
/*! no static exports found */function(module,exports){eval("/**\n * @module mbrAppCore/plugins/tooltips\n *\n * @description tooltips\n *\n * @listens module:mbrAppCore/components~mbrAppCore:addedComponent\n * @listens module:mbrAppCore/components-load~mbrAppCore:rendered\n * @listens module:mbrAppCore/components~mbrAppCore:removeComponent\n * @listens module:mbrAppCore/pages~mbrAppCore:removePage\n * @listens module:mbrAppCore/pages~mbrAppCore:switchPage\n */\n(function($, CORE) {\n    'use strict';\n\n    CORE.regExtension({\n        name: 'plugin-tooltips',\n        /** @lends module:mbrAppCore/plugins/tooltips */\n        global: {\n           /**\n            * Initialize tooltips\n            */\n            initTooltips: function() {\n                if($.fn.tooltip) {\n                    this.$template.find('[data-tooltipster]:not(.tooltipstered), [data-toggle=\"tooltip\"]:not(.tooltipstered)').each(function() {\n                        $(this).tooltipster({\n                            delay: 0,\n                            speed: 100,\n                            position: $(this).attr('data-tooltipster') || $(this).attr('data-placement') || 'bottom'\n                        });\n                    });\n                }\n            },\n\n            /**\n            * Destroy tooltips\n            * @param {jQuery} $context\n            */\n            destroyTooltips: function( $context ) {\n                if($.fn.tooltip) {\n                    $context = $context || this.$template;\n                    $context.find('[data-tooltipster].tooltipstered').tooltipster('destroy');\n                }\n            }\n        },\n        events: {\n            addedComponent: function() {\n                this.initTooltips();\n            },\n            rendered: function() {\n                this.initTooltips();\n            },\n            removeComponent: function(id, $component) {\n                this.destroyTooltips($component);\n            },\n            removePage: function() {\n                this.destroyTooltips();\n            },\n            switchPage: function() {\n                this.destroyTooltips();\n            }\n        }\n    });\n}(jQuery, mbrAppCore));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci1wbHVnaW4tdG9vbHRpcHMuanM/YjI0OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6Ii4vd2ViL2FwcC9idWlsZGVyL2pzL2J1aWxkZXItcGx1Z2luLXRvb2x0aXBzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIG1ickFwcENvcmUvcGx1Z2lucy90b29sdGlwc1xuICpcbiAqIEBkZXNjcmlwdGlvbiB0b29sdGlwc1xuICpcbiAqIEBsaXN0ZW5zIG1vZHVsZTptYnJBcHBDb3JlL2NvbXBvbmVudHN+bWJyQXBwQ29yZTphZGRlZENvbXBvbmVudFxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvY29tcG9uZW50cy1sb2Fkfm1ickFwcENvcmU6cmVuZGVyZWRcbiAqIEBsaXN0ZW5zIG1vZHVsZTptYnJBcHBDb3JlL2NvbXBvbmVudHN+bWJyQXBwQ29yZTpyZW1vdmVDb21wb25lbnRcbiAqIEBsaXN0ZW5zIG1vZHVsZTptYnJBcHBDb3JlL3BhZ2Vzfm1ickFwcENvcmU6cmVtb3ZlUGFnZVxuICogQGxpc3RlbnMgbW9kdWxlOm1ickFwcENvcmUvcGFnZXN+bWJyQXBwQ29yZTpzd2l0Y2hQYWdlXG4gKi9cbihmdW5jdGlvbigkLCBDT1JFKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgQ09SRS5yZWdFeHRlbnNpb24oe1xuICAgICAgICBuYW1lOiAncGx1Z2luLXRvb2x0aXBzJyxcbiAgICAgICAgLyoqIEBsZW5kcyBtb2R1bGU6bWJyQXBwQ29yZS9wbHVnaW5zL3Rvb2x0aXBzICovXG4gICAgICAgIGdsb2JhbDoge1xuICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogSW5pdGlhbGl6ZSB0b29sdGlwc1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGluaXRUb29sdGlwczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYoJC5mbi50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHRlbXBsYXRlLmZpbmQoJ1tkYXRhLXRvb2x0aXBzdGVyXTpub3QoLnRvb2x0aXBzdGVyZWQpLCBbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdOm5vdCgudG9vbHRpcHN0ZXJlZCknKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50b29sdGlwc3Rlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJCh0aGlzKS5hdHRyKCdkYXRhLXRvb2x0aXBzdGVyJykgfHwgJCh0aGlzKS5hdHRyKCdkYXRhLXBsYWNlbWVudCcpIHx8ICdib3R0b20nXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAqIERlc3Ryb3kgdG9vbHRpcHNcbiAgICAgICAgICAgICogQHBhcmFtIHtqUXVlcnl9ICRjb250ZXh0XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGVzdHJveVRvb2x0aXBzOiBmdW5jdGlvbiggJGNvbnRleHQgKSB7XG4gICAgICAgICAgICAgICAgaWYoJC5mbi50b29sdGlwKSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250ZXh0ID0gJGNvbnRleHQgfHwgdGhpcy4kdGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgICAgICRjb250ZXh0LmZpbmQoJ1tkYXRhLXRvb2x0aXBzdGVyXS50b29sdGlwc3RlcmVkJykudG9vbHRpcHN0ZXIoJ2Rlc3Ryb3knKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgYWRkZWRDb21wb25lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFRvb2x0aXBzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVuZGVyZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFRvb2x0aXBzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlQ29tcG9uZW50OiBmdW5jdGlvbihpZCwgJGNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVRvb2x0aXBzKCRjb21wb25lbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbW92ZVBhZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVRvb2x0aXBzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3dpdGNoUGFnZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95VG9vbHRpcHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufShqUXVlcnksIG1ickFwcENvcmUpKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder-plugin-tooltips.js\n")},"./web/app/builder/js/builder.js":
/*!***************************************!*\
  !*** ./web/app/builder/js/builder.js ***!
  \***************************************/
/*! no static exports found */function(module,exports){eval("/**\n *\n *  APP Core Instance\n *  @module mbrAppCore\n *\n */\n(function($) {\n    var CORE = function() {\n        var _this = this;\n\n        this.$body = $('body');\n        this.$window = $(window);\n        this.$document = $(document);\n        this.$template = $('.template > div');\n\n        // list with default app components\n        this.components = {};\n\n        // current page\n        this.currentPage = 'index.html';\n\n        // list with result params\n        this.resultJSON = {\n            \"index.html\": {\n                settings: {\n                    main: true, // prevent removing page\n                    title: 'Home',\n                    meta_descr: '',\n                    header_custom: '',\n                    footer_custom: '',\n                    html_before: ''\n                },\n                components: []\n            }\n        };\n\n        // is mobile\n        this.isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobirise-webview/i.test(navigator.userAgent.toLowerCase());\n\n        if (this.isMobile) {\n            $('html').addClass('device');\n        }\n    }\n\n    // return unique number\n    // not saving, regenerate every project loading\n    var uniqNum_ = 0;\n    CORE.prototype.uniqNum = function() {\n        return uniqNum_++;\n    }\n    CORE.prototype.resetUniqNum = function() {\n        uniqNum_ = 0;\n    }\n\n    // unique name, saved to project\n    this.uniqCompNum = 0;\n    CORE.prototype.getUniqCompName = function() {\n        return (this.uniqCompNum++).toString(36); // 0..1,a..z\n    }\n\n    /* * * * * * * * * *\n     * EVENTS\n     * * * * * * * * * */\n    // Available events:\n    //\n    // *** ../../interface/app.js\n    //    load\n    //\n    // *** builder-components-load.js\n    //    clearBlocks\n    //    clearedBlocks\n    //    loadComponent    [component, isPublish, context]\n    //    loadedComponent  [component, isPublish, context]\n    //    loadedComponentTemplates\n    //    render           [id]\n    //    rendered         [id]\n    //\n    // *** builder-components.js\n    //    addComponent              [name]\n    //    addedComponent            [id]\n    //    removeComponent           [id]\n    //    removedComponent          [id]\n    //    changedComponentPosition  [id, oldId]\n    //    changeComponentParams     [id, name, value]\n    //    changedComponentParams    [id, name, value]\n    //\n    // *** builder-pages.js\n    //    addPage\n    //    addedPage            [name]\n    //    changePageSettings   [name]\n    //    changedPageSettings  [settingName, name]\n    //    removePage           [name]\n    //    removedPage          [name]\n    //    switchPage           [name]\n    //    switchedPage         [name]\n    //\n    // *** builder-plugin-media-editor.js\n    //    clickOnMediaItem        [eventName, component, jQuery popover]\n    //    showMediaPopover        [jQuery popover]\n    //    showedMediaPopover      [jQuery popover]\n    //    hideMediaPopover        [jQuery popover]\n    //    hiddenMediaPopover      [jQuery popover]\n    //\n    // *** builder-plugin-sortable.js\n    //    changeComponentPosition  [id, newPrevId, prevId]\n    //\n    // *** builder-plugin-summernote.js\n    //    summernoteInited     [dom item]\n    //    summernoteFocus      [dom item, event]\n    //    summernoteBlur       [dom item, event]\n    //    summernoteKeydown    [dom item, event]\n    //\n    // *** rivets\n    //    rivetsBlur   [element]\n    //\n    var userEventsList = {};\n    var onceEvents = {};\n\n    /**\n     * @method on\n     * @param  {string}   name\n     * @param  {Function} callback\n     * @description\n     * example:\n     * mbrAppCore.on('myEvent', function(someParams) { console.log(someParams); })\n     * mbrAppCore.fire('myEvent', someParams)\n     *\n     * If you need to load event once use this example:\n     * mbrAppCore.fireOnce('myEvent', someParams)\n     *\n     * Event will be fired once and then new event subscribers will be fired automatically\n     *\n     */\n    CORE.prototype.on = function(name, callback) {\n        if ($.isArray(name)) {\n            for (var k in name) {\n                this.on(name[k], callback);\n            }\n            return;\n        }\n\n        // check if in once list\n        if (onceEvents[name]) {\n            if (callback)\n                callback.apply(this, onceEvents[name]);\n            return;\n        }\n\n\n        // add new callback in events list\n        (userEventsList[name] || (userEventsList[name] = [])).push(callback);\n    }\n    /**\n     * @method off\n     * @param  {string}   name\n     * @param  {Function} callback\n     * @return {bool}\n     */\n    CORE.prototype.off = function(name, callback) {\n        if (!userEventsList[name]) {\n            return false;\n        }\n\n        if (!callback) {\n            delete userEventsList[name];\n        } else {\n            for (var k = 0; k < userEventsList[name].length; k++) {\n                if (userEventsList[name][k] === callback) {\n                    userEventsList[name][k] = undefined;\n                }\n            }\n        }\n    }\n    /**\n     * Event fire function\n     * @method fire\n     * @param  {string} name [description]\n     * @param  {Any} args\n     */\n    CORE.prototype.fire = function(name) {\n        var args = [].slice.call(arguments, 1);\n        if (typeof userEventsList[name] !== 'undefined') {\n            for (var k in userEventsList[name]) {\n                // call with all arguments\n                if (userEventsList[name][k])\n                    try {\n                        userEventsList[name][k].apply(this, args);\n                    }\n                catch (e) {\n                    console.error(\"Error in event handler mbrAppCore::\" + name);\n                    console.log(e);\n                }\n            }\n        }\n    }\n\n    /**\n     * Event fire function once at app session.\n     * Event will be fired once and then new event subscribers will be fired automatically\n     * @method fireOnce\n     * @param  {string} name [description]\n     * @param  {Any} args\n     */\n    CORE.prototype.fireOnce = function(name) {\n        // already In Once List\n        if (name in onceEvents) return;\n\n        var args = [].slice.call(arguments, 1);\n        onceEvents[name] = args;\n\n        // run already added callbacks and destroy one's\n        for (var k in userEventsList[name]) {\n            // call with all arguments\n            if (userEventsList[name][k])\n                try {\n                    userEventsList[name][k].apply(this, args);\n                    userEventsList[name][k] = undefined;\n                }\n            catch (e) {\n                console.error(\"Error in event handler mbrAppCore::\" + name, e);\n            }\n        }\n    }\n\n\n    /* * * * * * * * * *\n     * FILTERS\n     * * * * * * * * * */\n    // Available filters:\n    // *** builder.js\n    //    getResultHTMLcomponent  [html, component]\n    //\n    // *** builder-cleaners.js\n    //    cleanHTMLplease  [jQuery item]\n    //\n    // *** builder-components.js\n    //    replaceSystemVariables      [str, component]\n    //    addComponent                [component]\n    //    getComponent                [result, component id, page, clone]\n    //    getNextComponent            [result, component id, page]\n    //    getPrevComponent            [result, component id, page]\n    //    addComponentStyles          [styles, component, jQuery changed item, property, value, googleLink]\n    //    getComponentStyles          [styles, component]\n    //    preventComponentStylesSave  [bool, component, jQuery changed item, property, value, google link]\n    //    beforeRenderStyles          [result, components, deploy, page, googleLinks]\n    //    afterRenderStyles           [result, components, deploy, page, googleLinks]\n    //    getComponentParams          [params]\n    //    changeComponentParams       [value, param name, params]\n    //    getComponentsAnchorList     [list, default href]\n    //\n    // *** builder-components-load.js\n    //    prepareComponent      [componentStringSkeleton, component]\n    //    loadComponentTemplate [template, component]\n    //\n    // *** builder-pages.js\n    //    getPages              [pages]\n    //    getUniquePageName     [page name, unique number]\n    //    getPageComponents     [components, page name]\n    //    addPage               [page, page name]\n    //    changePageSettings    [value, setting name, page]\n    //    getPagesList          [pages list, default href]\n    //\n    // *** builder-plugin-summernote.js\n    //    summernoteEditableItems   [jQuery item, jQuery context, destroy bool]\n    //    summernotePaste           [text]\n    //\n    var filtersList = {};\n    /**\n     * example:\n     * mbrAppCore.addFilter('myFilter', function(val) { return 'Name: ' + val; })\n     *\n     * var name = 'John';\n     * name = mbrAppCore.applyFilter('myFilter', name);\n     * console.log(name);\n     *\n     * @method addFilter\n     * @param {String} name\n     * @param {Function} filter\n     */\n    CORE.prototype.addFilter = function(name, filter) {\n        (filtersList[name] || (filtersList[name] = [])).push(filter);\n    }\n    CORE.prototype.applyFilter = function(name) {\n        var args = [].slice.call(arguments, 1);\n        if (filtersList[name]) {\n            var filters = filtersList[name];\n            for (var i = 0, len = filters.length; i < len; i++) {\n                args[0] = filters[i].apply(this, args);\n                if (typeof args[0] == \"undefined\")\n                    console.warn(\"handle of \" + name + \" filter return undefined: \", filters[i]);\n            }\n        }\n        return args[0];\n    }\n\n\n    /* * * * * * * * * *\n     * CORE EXTENSIONS\n     * * * * * * * * * */\n    var extensionsList = {};\n    /**\n     * register extension\n     * @method regExtension\n     * @param   list\n     */\n    /**\n     * register extension\n     * @method registerExtension\n     * @param   list\n     */\n    CORE.prototype.regExtension = CORE.prototype.registerExtension = function(list) {\n        if (!list.name || typeof extensionsList[list.name] !== 'undefined') {\n            return false;\n        }\n\n        // add ext to the list\n        extensionsList[name] = list;\n\n        // extend global functions\n        if (list.global) {\n            for (var e in list.global) {\n                if (!(e in this))\n                    this[e] = list.global[e];\n                else\n                    console.error(\"Error re-definition method mbrAppCore.\" + e + \" by module \" + list.name);\n            }\n        }\n\n        // events\n        if (list.events) {\n            for (var k in list.events) {\n                this.on(k, list.events[k]);\n            }\n        }\n\n        return true;\n    }\n\n\n    /* * * * * * * * * *\n     * EXPORT / IMPORT METHODS\n     * * * * * * * * * */\n\n    /**\n     * return result project file\n     * @method getResultProject\n     * @return {object} project json\n     */\n    CORE.prototype.getResultProject = function() {\n        var pages = $.extend(true, {}, this.resultJSON);\n        for (var pageName in pages) {\n            var page = pages[pageName],\n                components = page.components;\n\n            let globalMenu = components.findIndex(el => el._name.includes('menu') && el._once && el._global);\n            if (globalMenu !== -1 && globalMenu) components.unshift(components.splice(globalMenu, 1)[0]);\n\n            delete page.components;\n            page = this.cleanJSONPlease(page);\n            page.components = components;\n            for (var i = 0; i < components.length; i++) {\n                if (this.isSecondaryComponent(components[i])) {\n                    components[i] = this.transformSecondaryComponentForProject(components[i]);\n                } else {\n                    components[i] = this.cleanJSONPlease(components[i]);\n                }\n            }\n        }\n        // return project json\n        return {\n            settings: {\n                currentPage: this.currentPage,\n                uniqCompNum: this.uniqCompNum\n            },\n            pages: pages\n        };\n    }\n\n    /**\n     * Return full html of page\n     * ID - return only selected block ID\n     * @method getResultHTML\n     * @param  {String} page\n     * @param  {String} ID  - component id\n     * @return {Promise}\n     */\n    CORE.prototype.getResultHTML = function(page, ID) {\n        let _this = this;\n        if (!_this.resultJSON[page] || !_this.resultJSON[page].components)\n            return false;\n        if (typeof ID !== 'undefined') {\n            // prepare component\n            let component = _this.getComponent(ID, page);\n            let preparedComponentHtml = _this.prepareComponent(component);\n\n            let tempPage = $('<div>').append(preparedComponentHtml);\n\n            // load component's content\n            _this.loadEachComponent(component, tempPage, _this.resultJSON[page], page, true);\n\n            // transform secondary component to primary (Rivets-compatible)\n            if (_this.isSecondaryComponent(component)) {\n                _this.getSecondaryComponent(component);\n            }\n\n            return $.Deferred().resolve(tempPage.find('[data-app-component-id=' + ID + '] .app-component-content'));\n        }\n        // prepare component blocks\n        let components = _this.resultJSON[page].components;\n        let preparedHtml = _this.prepareAllComponents(components);\n\n        let tempPage = $('<div>').append(preparedHtml);\n\n        for (let k in components) {\n            // load each component content\n            _this.loadEachComponent(components[k], tempPage, _this.resultJSON[page], page, true);\n\n            // transform all secondary components to primary (Rivets-compatible)\n            if (_this.isSecondaryComponent(components[k])) {\n                _this.getSecondaryComponent(components[k]);\n            }\n        }\n        return (function() {\n            let components = tempPage.find('[data-app-component-id]'),\n                d = $.Deferred(),\n                result = '';\n\n            function _componentProcessing(index) {\n                let id, component;\n\n                if (index < components.length) {\n                    id = $(components[index]).attr('data-app-component-id');\n                    component = _this.getComponent(id, page);\n\n                    /**\n                     * @filter mbrAppCore->getResultComponent\n                     * @param {jQuery} $content - component content, $(.app-component-content) contains generated object\n                     * @param {Object} component - component params\n                     * @param {String} page_name (since v2.12)\n                     */\n                    _this.applyFilter('getResultComponent', $.Deferred().resolve($(components[index]).find('.app-component-content'), component, page))\n                        .then(function ($component, component, page) {\n                            let html = _this.cleanHTMLplease($component.html());\n\n                            /**\n                             * @filter mbrAppCore->getResultHTMLcomponent\n                             * @param {String} html - result html of component\n                             * @param {Object} component - component params\n                             * @param {String} page_name (since v2.12)\n                             */\n                            html = _this.applyFilter('getResultHTMLcomponent', html, component, page);\n                            result += html + '\\n\\n';\n\n                            _componentProcessing(++index);\n                        }, function(rej) {\n                            APP.showError(rej)\n                        });\n                } else {\n                    d.resolve(result);\n                }\n            }\n\n            _componentProcessing(0);\n\n            return d.promise();\n        }());\n\n        // tempPage.find('[data-app-component-id]').each(function () {\n        //     var id = $(this).attr('data-app-component-id');\n        //     var component = _this.getComponent(id, page);\n        //     /**\n        //      * @filter mbrAppCore->getResultComponent\n        //      * @param {jQuery} $content - component content, $(.app-component-content) contains generated object\n        //      * @param {Object} component - component params\n        //      * @param {String} page_name (since v2.12)\n        //      */\n        //     _this.applyFilter('getResultComponent', $.Deferred().resolve($(this).find('.app-component-content'), component, page)).then(function ($component) {\n        //         var html = _this.cleanHTMLplease($component.html());\n        //         /**\n        //          * @filter mbrAppCore->getResultHTMLcomponent\n        //          * @param {String} html - result html of component\n        //          * @param {Object} component - component params\n        //          * @param {String} page_name (since v2.12)\n        //          */\n        //         html = _this.applyFilter('getResultHTMLcomponent', html, component, page);\n        //         result += html + '\\n\\n';\n        //     });\n        // });\n\n    };\n\n    /**\n     * load project file\n     * if some error in file - return false\n     * @method loadProject\n     * @param  project\n     * @return {Bool} - ok result\n     */\n    CORE.prototype.loadProject = function(project) {\n\n        var self = this;\n\n        if (!project || !project.pages || typeof project.pages != 'object') {\n            console.error(\"Error: project has no pages\");\n            return false;\n        }\n\n        // init unique number before all\n        this.uniqCompNum = project.settings.uniqCompNum || 0;\n\n        return this.loadPage(project.settings.currentPage, project).always(function() {\n            self.resultJSON = project && project.pages || {};\n            self.currentPage = project && project.settings && project.settings.currentPage || \"\";\n        }).then(function() {\n            self.fire('projectLoaded');\n            self.render();\n        });\n    }\n\n\n    /**\n     * show extenal dialog - redirect to mbrApp.showDialog\n     * @method showDialog\n     * @see mbrApp/common.showDialog\n     * @param  {Map} params\n     * @return modal instance\n     */\n    CORE.prototype.showDialog = function(params) {\n\n        if (this.APP && this.APP.showDialog)\n            return this.APP.showDialog(params);\n        else {\n            console.warn(\"Error: mbrApp is not accessible\");\n\n            // convert to bootbox - tempory solution\n            params.buttons = {\n                success: {\n                    label: 'Ok',\n                    className: \"btn-primary\",\n                    callback: params.success\n                },\n\n                cancel: {\n                    label: 'Cancel',\n                    className: 'btn-default',\n                    callback: params.cancel\n                }\n            }\n            params.message = params.body;\n            return bootbox.dialog(params);\n        }\n    }\n\n\n    // global init\n    window.mbrAppCore = new CORE();\n}(jQuery));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvanMvYnVpbGRlci5qcz83NzcxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQSxzREFBc0QseUJBQXlCLEVBQUU7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixPQUFPO0FBQ3ZC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QUFPO0FBQ2pDLDBCQUEwQixPQUFPO0FBQ2pDLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsT0FBTztBQUNyQyw4QkFBOEIsT0FBTztBQUNyQyw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsWUFBWTs7QUFFWjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLEtBQUs7QUFDckI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixJQUFJO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9qcy9idWlsZGVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICogIEFQUCBDb3JlIEluc3RhbmNlXG4gKiAgQG1vZHVsZSBtYnJBcHBDb3JlXG4gKlxuICovXG4oZnVuY3Rpb24oJCkge1xuICAgIHZhciBDT1JFID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy4kYm9keSA9ICQoJ2JvZHknKTtcbiAgICAgICAgdGhpcy4kd2luZG93ID0gJCh3aW5kb3cpO1xuICAgICAgICB0aGlzLiRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLiR0ZW1wbGF0ZSA9ICQoJy50ZW1wbGF0ZSA+IGRpdicpO1xuXG4gICAgICAgIC8vIGxpc3Qgd2l0aCBkZWZhdWx0IGFwcCBjb21wb25lbnRzXG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IHt9O1xuXG4gICAgICAgIC8vIGN1cnJlbnQgcGFnZVxuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gJ2luZGV4Lmh0bWwnO1xuXG4gICAgICAgIC8vIGxpc3Qgd2l0aCByZXN1bHQgcGFyYW1zXG4gICAgICAgIHRoaXMucmVzdWx0SlNPTiA9IHtcbiAgICAgICAgICAgIFwiaW5kZXguaHRtbFwiOiB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbWFpbjogdHJ1ZSwgLy8gcHJldmVudCByZW1vdmluZyBwYWdlXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnSG9tZScsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFfZGVzY3I6ICcnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJfY3VzdG9tOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZm9vdGVyX2N1c3RvbTogJycsXG4gICAgICAgICAgICAgICAgICAgIGh0bWxfYmVmb3JlOiAnJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBpcyBtb2JpbGVcbiAgICAgICAgdGhpcy5pc01vYmlsZSA9IC9hbmRyb2lkfHdlYm9zfGlwaG9uZXxpcGFkfGlwb2R8YmxhY2tiZXJyeXxpZW1vYmlsZXxvcGVyYSBtaW5pfG1vYmlyaXNlLXdlYnZpZXcvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNNb2JpbGUpIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnZGV2aWNlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyByZXR1cm4gdW5pcXVlIG51bWJlclxuICAgIC8vIG5vdCBzYXZpbmcsIHJlZ2VuZXJhdGUgZXZlcnkgcHJvamVjdCBsb2FkaW5nXG4gICAgdmFyIHVuaXFOdW1fID0gMDtcbiAgICBDT1JFLnByb3RvdHlwZS51bmlxTnVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB1bmlxTnVtXysrO1xuICAgIH1cbiAgICBDT1JFLnByb3RvdHlwZS5yZXNldFVuaXFOdW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdW5pcU51bV8gPSAwO1xuICAgIH1cblxuICAgIC8vIHVuaXF1ZSBuYW1lLCBzYXZlZCB0byBwcm9qZWN0XG4gICAgdGhpcy51bmlxQ29tcE51bSA9IDA7XG4gICAgQ09SRS5wcm90b3R5cGUuZ2V0VW5pcUNvbXBOYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAodGhpcy51bmlxQ29tcE51bSsrKS50b1N0cmluZygzNik7IC8vIDAuLjEsYS4uelxuICAgIH1cblxuICAgIC8qICogKiAqICogKiAqICogKiAqXG4gICAgICogRVZFTlRTXG4gICAgICogKiAqICogKiAqICogKiAqICovXG4gICAgLy8gQXZhaWxhYmxlIGV2ZW50czpcbiAgICAvL1xuICAgIC8vICoqKiAuLi8uLi9pbnRlcmZhY2UvYXBwLmpzXG4gICAgLy8gICAgbG9hZFxuICAgIC8vXG4gICAgLy8gKioqIGJ1aWxkZXItY29tcG9uZW50cy1sb2FkLmpzXG4gICAgLy8gICAgY2xlYXJCbG9ja3NcbiAgICAvLyAgICBjbGVhcmVkQmxvY2tzXG4gICAgLy8gICAgbG9hZENvbXBvbmVudCAgICBbY29tcG9uZW50LCBpc1B1Ymxpc2gsIGNvbnRleHRdXG4gICAgLy8gICAgbG9hZGVkQ29tcG9uZW50ICBbY29tcG9uZW50LCBpc1B1Ymxpc2gsIGNvbnRleHRdXG4gICAgLy8gICAgbG9hZGVkQ29tcG9uZW50VGVtcGxhdGVzXG4gICAgLy8gICAgcmVuZGVyICAgICAgICAgICBbaWRdXG4gICAgLy8gICAgcmVuZGVyZWQgICAgICAgICBbaWRdXG4gICAgLy9cbiAgICAvLyAqKiogYnVpbGRlci1jb21wb25lbnRzLmpzXG4gICAgLy8gICAgYWRkQ29tcG9uZW50ICAgICAgICAgICAgICBbbmFtZV1cbiAgICAvLyAgICBhZGRlZENvbXBvbmVudCAgICAgICAgICAgIFtpZF1cbiAgICAvLyAgICByZW1vdmVDb21wb25lbnQgICAgICAgICAgIFtpZF1cbiAgICAvLyAgICByZW1vdmVkQ29tcG9uZW50ICAgICAgICAgIFtpZF1cbiAgICAvLyAgICBjaGFuZ2VkQ29tcG9uZW50UG9zaXRpb24gIFtpZCwgb2xkSWRdXG4gICAgLy8gICAgY2hhbmdlQ29tcG9uZW50UGFyYW1zICAgICBbaWQsIG5hbWUsIHZhbHVlXVxuICAgIC8vICAgIGNoYW5nZWRDb21wb25lbnRQYXJhbXMgICAgW2lkLCBuYW1lLCB2YWx1ZV1cbiAgICAvL1xuICAgIC8vICoqKiBidWlsZGVyLXBhZ2VzLmpzXG4gICAgLy8gICAgYWRkUGFnZVxuICAgIC8vICAgIGFkZGVkUGFnZSAgICAgICAgICAgIFtuYW1lXVxuICAgIC8vICAgIGNoYW5nZVBhZ2VTZXR0aW5ncyAgIFtuYW1lXVxuICAgIC8vICAgIGNoYW5nZWRQYWdlU2V0dGluZ3MgIFtzZXR0aW5nTmFtZSwgbmFtZV1cbiAgICAvLyAgICByZW1vdmVQYWdlICAgICAgICAgICBbbmFtZV1cbiAgICAvLyAgICByZW1vdmVkUGFnZSAgICAgICAgICBbbmFtZV1cbiAgICAvLyAgICBzd2l0Y2hQYWdlICAgICAgICAgICBbbmFtZV1cbiAgICAvLyAgICBzd2l0Y2hlZFBhZ2UgICAgICAgICBbbmFtZV1cbiAgICAvL1xuICAgIC8vICoqKiBidWlsZGVyLXBsdWdpbi1tZWRpYS1lZGl0b3IuanNcbiAgICAvLyAgICBjbGlja09uTWVkaWFJdGVtICAgICAgICBbZXZlbnROYW1lLCBjb21wb25lbnQsIGpRdWVyeSBwb3BvdmVyXVxuICAgIC8vICAgIHNob3dNZWRpYVBvcG92ZXIgICAgICAgIFtqUXVlcnkgcG9wb3Zlcl1cbiAgICAvLyAgICBzaG93ZWRNZWRpYVBvcG92ZXIgICAgICBbalF1ZXJ5IHBvcG92ZXJdXG4gICAgLy8gICAgaGlkZU1lZGlhUG9wb3ZlciAgICAgICAgW2pRdWVyeSBwb3BvdmVyXVxuICAgIC8vICAgIGhpZGRlbk1lZGlhUG9wb3ZlciAgICAgIFtqUXVlcnkgcG9wb3Zlcl1cbiAgICAvL1xuICAgIC8vICoqKiBidWlsZGVyLXBsdWdpbi1zb3J0YWJsZS5qc1xuICAgIC8vICAgIGNoYW5nZUNvbXBvbmVudFBvc2l0aW9uICBbaWQsIG5ld1ByZXZJZCwgcHJldklkXVxuICAgIC8vXG4gICAgLy8gKioqIGJ1aWxkZXItcGx1Z2luLXN1bW1lcm5vdGUuanNcbiAgICAvLyAgICBzdW1tZXJub3RlSW5pdGVkICAgICBbZG9tIGl0ZW1dXG4gICAgLy8gICAgc3VtbWVybm90ZUZvY3VzICAgICAgW2RvbSBpdGVtLCBldmVudF1cbiAgICAvLyAgICBzdW1tZXJub3RlQmx1ciAgICAgICBbZG9tIGl0ZW0sIGV2ZW50XVxuICAgIC8vICAgIHN1bW1lcm5vdGVLZXlkb3duICAgIFtkb20gaXRlbSwgZXZlbnRdXG4gICAgLy9cbiAgICAvLyAqKiogcml2ZXRzXG4gICAgLy8gICAgcml2ZXRzQmx1ciAgIFtlbGVtZW50XVxuICAgIC8vXG4gICAgdmFyIHVzZXJFdmVudHNMaXN0ID0ge307XG4gICAgdmFyIG9uY2VFdmVudHMgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgb25cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbmFtZVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqIEBkZXNjcmlwdGlvblxuICAgICAqIGV4YW1wbGU6XG4gICAgICogbWJyQXBwQ29yZS5vbignbXlFdmVudCcsIGZ1bmN0aW9uKHNvbWVQYXJhbXMpIHsgY29uc29sZS5sb2coc29tZVBhcmFtcyk7IH0pXG4gICAgICogbWJyQXBwQ29yZS5maXJlKCdteUV2ZW50Jywgc29tZVBhcmFtcylcbiAgICAgKlxuICAgICAqIElmIHlvdSBuZWVkIHRvIGxvYWQgZXZlbnQgb25jZSB1c2UgdGhpcyBleGFtcGxlOlxuICAgICAqIG1ickFwcENvcmUuZmlyZU9uY2UoJ215RXZlbnQnLCBzb21lUGFyYW1zKVxuICAgICAqXG4gICAgICogRXZlbnQgd2lsbCBiZSBmaXJlZCBvbmNlIGFuZCB0aGVuIG5ldyBldmVudCBzdWJzY3JpYmVycyB3aWxsIGJlIGZpcmVkIGF1dG9tYXRpY2FsbHlcbiAgICAgKlxuICAgICAqL1xuICAgIENPUkUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCQuaXNBcnJheShuYW1lKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBuYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbihuYW1lW2tdLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGVjayBpZiBpbiBvbmNlIGxpc3RcbiAgICAgICAgaWYgKG9uY2VFdmVudHNbbmFtZV0pIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaylcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBvbmNlRXZlbnRzW25hbWVdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gYWRkIG5ldyBjYWxsYmFjayBpbiBldmVudHMgbGlzdFxuICAgICAgICAodXNlckV2ZW50c0xpc3RbbmFtZV0gfHwgKHVzZXJFdmVudHNMaXN0W25hbWVdID0gW10pKS5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBvZmZcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgbmFtZVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqIEByZXR1cm4ge2Jvb2x9XG4gICAgICovXG4gICAgQ09SRS5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF1c2VyRXZlbnRzTGlzdFtuYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgICAgZGVsZXRlIHVzZXJFdmVudHNMaXN0W25hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB1c2VyRXZlbnRzTGlzdFtuYW1lXS5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmICh1c2VyRXZlbnRzTGlzdFtuYW1lXVtrXSA9PT0gY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlckV2ZW50c0xpc3RbbmFtZV1ba10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2ZW50IGZpcmUgZnVuY3Rpb25cbiAgICAgKiBAbWV0aG9kIGZpcmVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgW2Rlc2NyaXB0aW9uXVxuICAgICAqIEBwYXJhbSAge0FueX0gYXJnc1xuICAgICAqL1xuICAgIENPUkUucHJvdG90eXBlLmZpcmUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBpZiAodHlwZW9mIHVzZXJFdmVudHNMaXN0W25hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiB1c2VyRXZlbnRzTGlzdFtuYW1lXSkge1xuICAgICAgICAgICAgICAgIC8vIGNhbGwgd2l0aCBhbGwgYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJFdmVudHNMaXN0W25hbWVdW2tdKVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckV2ZW50c0xpc3RbbmFtZV1ba10uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZXZlbnQgaGFuZGxlciBtYnJBcHBDb3JlOjpcIiArIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBmaXJlIGZ1bmN0aW9uIG9uY2UgYXQgYXBwIHNlc3Npb24uXG4gICAgICogRXZlbnQgd2lsbCBiZSBmaXJlZCBvbmNlIGFuZCB0aGVuIG5ldyBldmVudCBzdWJzY3JpYmVycyB3aWxsIGJlIGZpcmVkIGF1dG9tYXRpY2FsbHlcbiAgICAgKiBAbWV0aG9kIGZpcmVPbmNlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIFtkZXNjcmlwdGlvbl1cbiAgICAgKiBAcGFyYW0gIHtBbnl9IGFyZ3NcbiAgICAgKi9cbiAgICBDT1JFLnByb3RvdHlwZS5maXJlT25jZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgLy8gYWxyZWFkeSBJbiBPbmNlIExpc3RcbiAgICAgICAgaWYgKG5hbWUgaW4gb25jZUV2ZW50cykgcmV0dXJuO1xuXG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBvbmNlRXZlbnRzW25hbWVdID0gYXJncztcblxuICAgICAgICAvLyBydW4gYWxyZWFkeSBhZGRlZCBjYWxsYmFja3MgYW5kIGRlc3Ryb3kgb25lJ3NcbiAgICAgICAgZm9yICh2YXIgayBpbiB1c2VyRXZlbnRzTGlzdFtuYW1lXSkge1xuICAgICAgICAgICAgLy8gY2FsbCB3aXRoIGFsbCBhcmd1bWVudHNcbiAgICAgICAgICAgIGlmICh1c2VyRXZlbnRzTGlzdFtuYW1lXVtrXSlcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB1c2VyRXZlbnRzTGlzdFtuYW1lXVtrXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdXNlckV2ZW50c0xpc3RbbmFtZV1ba10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZXZlbnQgaGFuZGxlciBtYnJBcHBDb3JlOjpcIiArIG5hbWUsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKiAqICogKiAqICogKiAqICogKlxuICAgICAqIEZJTFRFUlNcbiAgICAgKiAqICogKiAqICogKiAqICogKi9cbiAgICAvLyBBdmFpbGFibGUgZmlsdGVyczpcbiAgICAvLyAqKiogYnVpbGRlci5qc1xuICAgIC8vICAgIGdldFJlc3VsdEhUTUxjb21wb25lbnQgIFtodG1sLCBjb21wb25lbnRdXG4gICAgLy9cbiAgICAvLyAqKiogYnVpbGRlci1jbGVhbmVycy5qc1xuICAgIC8vICAgIGNsZWFuSFRNTHBsZWFzZSAgW2pRdWVyeSBpdGVtXVxuICAgIC8vXG4gICAgLy8gKioqIGJ1aWxkZXItY29tcG9uZW50cy5qc1xuICAgIC8vICAgIHJlcGxhY2VTeXN0ZW1WYXJpYWJsZXMgICAgICBbc3RyLCBjb21wb25lbnRdXG4gICAgLy8gICAgYWRkQ29tcG9uZW50ICAgICAgICAgICAgICAgIFtjb21wb25lbnRdXG4gICAgLy8gICAgZ2V0Q29tcG9uZW50ICAgICAgICAgICAgICAgIFtyZXN1bHQsIGNvbXBvbmVudCBpZCwgcGFnZSwgY2xvbmVdXG4gICAgLy8gICAgZ2V0TmV4dENvbXBvbmVudCAgICAgICAgICAgIFtyZXN1bHQsIGNvbXBvbmVudCBpZCwgcGFnZV1cbiAgICAvLyAgICBnZXRQcmV2Q29tcG9uZW50ICAgICAgICAgICAgW3Jlc3VsdCwgY29tcG9uZW50IGlkLCBwYWdlXVxuICAgIC8vICAgIGFkZENvbXBvbmVudFN0eWxlcyAgICAgICAgICBbc3R5bGVzLCBjb21wb25lbnQsIGpRdWVyeSBjaGFuZ2VkIGl0ZW0sIHByb3BlcnR5LCB2YWx1ZSwgZ29vZ2xlTGlua11cbiAgICAvLyAgICBnZXRDb21wb25lbnRTdHlsZXMgICAgICAgICAgW3N0eWxlcywgY29tcG9uZW50XVxuICAgIC8vICAgIHByZXZlbnRDb21wb25lbnRTdHlsZXNTYXZlICBbYm9vbCwgY29tcG9uZW50LCBqUXVlcnkgY2hhbmdlZCBpdGVtLCBwcm9wZXJ0eSwgdmFsdWUsIGdvb2dsZSBsaW5rXVxuICAgIC8vICAgIGJlZm9yZVJlbmRlclN0eWxlcyAgICAgICAgICBbcmVzdWx0LCBjb21wb25lbnRzLCBkZXBsb3ksIHBhZ2UsIGdvb2dsZUxpbmtzXVxuICAgIC8vICAgIGFmdGVyUmVuZGVyU3R5bGVzICAgICAgICAgICBbcmVzdWx0LCBjb21wb25lbnRzLCBkZXBsb3ksIHBhZ2UsIGdvb2dsZUxpbmtzXVxuICAgIC8vICAgIGdldENvbXBvbmVudFBhcmFtcyAgICAgICAgICBbcGFyYW1zXVxuICAgIC8vICAgIGNoYW5nZUNvbXBvbmVudFBhcmFtcyAgICAgICBbdmFsdWUsIHBhcmFtIG5hbWUsIHBhcmFtc11cbiAgICAvLyAgICBnZXRDb21wb25lbnRzQW5jaG9yTGlzdCAgICAgW2xpc3QsIGRlZmF1bHQgaHJlZl1cbiAgICAvL1xuICAgIC8vICoqKiBidWlsZGVyLWNvbXBvbmVudHMtbG9hZC5qc1xuICAgIC8vICAgIHByZXBhcmVDb21wb25lbnQgICAgICBbY29tcG9uZW50U3RyaW5nU2tlbGV0b24sIGNvbXBvbmVudF1cbiAgICAvLyAgICBsb2FkQ29tcG9uZW50VGVtcGxhdGUgW3RlbXBsYXRlLCBjb21wb25lbnRdXG4gICAgLy9cbiAgICAvLyAqKiogYnVpbGRlci1wYWdlcy5qc1xuICAgIC8vICAgIGdldFBhZ2VzICAgICAgICAgICAgICBbcGFnZXNdXG4gICAgLy8gICAgZ2V0VW5pcXVlUGFnZU5hbWUgICAgIFtwYWdlIG5hbWUsIHVuaXF1ZSBudW1iZXJdXG4gICAgLy8gICAgZ2V0UGFnZUNvbXBvbmVudHMgICAgIFtjb21wb25lbnRzLCBwYWdlIG5hbWVdXG4gICAgLy8gICAgYWRkUGFnZSAgICAgICAgICAgICAgIFtwYWdlLCBwYWdlIG5hbWVdXG4gICAgLy8gICAgY2hhbmdlUGFnZVNldHRpbmdzICAgIFt2YWx1ZSwgc2V0dGluZyBuYW1lLCBwYWdlXVxuICAgIC8vICAgIGdldFBhZ2VzTGlzdCAgICAgICAgICBbcGFnZXMgbGlzdCwgZGVmYXVsdCBocmVmXVxuICAgIC8vXG4gICAgLy8gKioqIGJ1aWxkZXItcGx1Z2luLXN1bW1lcm5vdGUuanNcbiAgICAvLyAgICBzdW1tZXJub3RlRWRpdGFibGVJdGVtcyAgIFtqUXVlcnkgaXRlbSwgalF1ZXJ5IGNvbnRleHQsIGRlc3Ryb3kgYm9vbF1cbiAgICAvLyAgICBzdW1tZXJub3RlUGFzdGUgICAgICAgICAgIFt0ZXh0XVxuICAgIC8vXG4gICAgdmFyIGZpbHRlcnNMaXN0ID0ge307XG4gICAgLyoqXG4gICAgICogZXhhbXBsZTpcbiAgICAgKiBtYnJBcHBDb3JlLmFkZEZpbHRlcignbXlGaWx0ZXInLCBmdW5jdGlvbih2YWwpIHsgcmV0dXJuICdOYW1lOiAnICsgdmFsOyB9KVxuICAgICAqXG4gICAgICogdmFyIG5hbWUgPSAnSm9obic7XG4gICAgICogbmFtZSA9IG1ickFwcENvcmUuYXBwbHlGaWx0ZXIoJ215RmlsdGVyJywgbmFtZSk7XG4gICAgICogY29uc29sZS5sb2cobmFtZSk7XG4gICAgICpcbiAgICAgKiBAbWV0aG9kIGFkZEZpbHRlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmlsdGVyXG4gICAgICovXG4gICAgQ09SRS5wcm90b3R5cGUuYWRkRmlsdGVyID0gZnVuY3Rpb24obmFtZSwgZmlsdGVyKSB7XG4gICAgICAgIChmaWx0ZXJzTGlzdFtuYW1lXSB8fCAoZmlsdGVyc0xpc3RbbmFtZV0gPSBbXSkpLnB1c2goZmlsdGVyKTtcbiAgICB9XG4gICAgQ09SRS5wcm90b3R5cGUuYXBwbHlGaWx0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBpZiAoZmlsdGVyc0xpc3RbbmFtZV0pIHtcbiAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gZmlsdGVyc0xpc3RbbmFtZV07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbMF0gPSBmaWx0ZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJoYW5kbGUgb2YgXCIgKyBuYW1lICsgXCIgZmlsdGVyIHJldHVybiB1bmRlZmluZWQ6IFwiLCBmaWx0ZXJzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJnc1swXTtcbiAgICB9XG5cblxuICAgIC8qICogKiAqICogKiAqICogKiAqXG4gICAgICogQ09SRSBFWFRFTlNJT05TXG4gICAgICogKiAqICogKiAqICogKiAqICovXG4gICAgdmFyIGV4dGVuc2lvbnNMaXN0ID0ge307XG4gICAgLyoqXG4gICAgICogcmVnaXN0ZXIgZXh0ZW5zaW9uXG4gICAgICogQG1ldGhvZCByZWdFeHRlbnNpb25cbiAgICAgKiBAcGFyYW0gICBsaXN0XG4gICAgICovXG4gICAgLyoqXG4gICAgICogcmVnaXN0ZXIgZXh0ZW5zaW9uXG4gICAgICogQG1ldGhvZCByZWdpc3RlckV4dGVuc2lvblxuICAgICAqIEBwYXJhbSAgIGxpc3RcbiAgICAgKi9cbiAgICBDT1JFLnByb3RvdHlwZS5yZWdFeHRlbnNpb24gPSBDT1JFLnByb3RvdHlwZS5yZWdpc3RlckV4dGVuc2lvbiA9IGZ1bmN0aW9uKGxpc3QpIHtcbiAgICAgICAgaWYgKCFsaXN0Lm5hbWUgfHwgdHlwZW9mIGV4dGVuc2lvbnNMaXN0W2xpc3QubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhZGQgZXh0IHRvIHRoZSBsaXN0XG4gICAgICAgIGV4dGVuc2lvbnNMaXN0W25hbWVdID0gbGlzdDtcblxuICAgICAgICAvLyBleHRlbmQgZ2xvYmFsIGZ1bmN0aW9uc1xuICAgICAgICBpZiAobGlzdC5nbG9iYWwpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGUgaW4gbGlzdC5nbG9iYWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShlIGluIHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzW2VdID0gbGlzdC5nbG9iYWxbZV07XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmUtZGVmaW5pdGlvbiBtZXRob2QgbWJyQXBwQ29yZS5cIiArIGUgKyBcIiBieSBtb2R1bGUgXCIgKyBsaXN0Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXZlbnRzXG4gICAgICAgIGlmIChsaXN0LmV2ZW50cykge1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBsaXN0LmV2ZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMub24oaywgbGlzdC5ldmVudHNba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG5cbiAgICAvKiAqICogKiAqICogKiAqICogKlxuICAgICAqIEVYUE9SVCAvIElNUE9SVCBNRVRIT0RTXG4gICAgICogKiAqICogKiAqICogKiAqICovXG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gcmVzdWx0IHByb2plY3QgZmlsZVxuICAgICAqIEBtZXRob2QgZ2V0UmVzdWx0UHJvamVjdFxuICAgICAqIEByZXR1cm4ge29iamVjdH0gcHJvamVjdCBqc29uXG4gICAgICovXG4gICAgQ09SRS5wcm90b3R5cGUuZ2V0UmVzdWx0UHJvamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGFnZXMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgdGhpcy5yZXN1bHRKU09OKTtcbiAgICAgICAgZm9yICh2YXIgcGFnZU5hbWUgaW4gcGFnZXMpIHtcbiAgICAgICAgICAgIHZhciBwYWdlID0gcGFnZXNbcGFnZU5hbWVdLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHMgPSBwYWdlLmNvbXBvbmVudHM7XG5cbiAgICAgICAgICAgIGxldCBnbG9iYWxNZW51ID0gY29tcG9uZW50cy5maW5kSW5kZXgoZWwgPT4gZWwuX25hbWUuaW5jbHVkZXMoJ21lbnUnKSAmJiBlbC5fb25jZSAmJiBlbC5fZ2xvYmFsKTtcbiAgICAgICAgICAgIGlmIChnbG9iYWxNZW51ICE9PSAtMSAmJiBnbG9iYWxNZW51KSBjb21wb25lbnRzLnVuc2hpZnQoY29tcG9uZW50cy5zcGxpY2UoZ2xvYmFsTWVudSwgMSlbMF0pO1xuXG4gICAgICAgICAgICBkZWxldGUgcGFnZS5jb21wb25lbnRzO1xuICAgICAgICAgICAgcGFnZSA9IHRoaXMuY2xlYW5KU09OUGxlYXNlKHBhZ2UpO1xuICAgICAgICAgICAgcGFnZS5jb21wb25lbnRzID0gY29tcG9uZW50cztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzU2Vjb25kYXJ5Q29tcG9uZW50KGNvbXBvbmVudHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHNbaV0gPSB0aGlzLnRyYW5zZm9ybVNlY29uZGFyeUNvbXBvbmVudEZvclByb2plY3QoY29tcG9uZW50c1tpXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50c1tpXSA9IHRoaXMuY2xlYW5KU09OUGxlYXNlKGNvbXBvbmVudHNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gcHJvamVjdCBqc29uXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiB0aGlzLmN1cnJlbnRQYWdlLFxuICAgICAgICAgICAgICAgIHVuaXFDb21wTnVtOiB0aGlzLnVuaXFDb21wTnVtXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFnZXM6IHBhZ2VzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGZ1bGwgaHRtbCBvZiBwYWdlXG4gICAgICogSUQgLSByZXR1cm4gb25seSBzZWxlY3RlZCBibG9jayBJRFxuICAgICAqIEBtZXRob2QgZ2V0UmVzdWx0SFRNTFxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gcGFnZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gSUQgIC0gY29tcG9uZW50IGlkXG4gICAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICAgKi9cbiAgICBDT1JFLnByb3RvdHlwZS5nZXRSZXN1bHRIVE1MID0gZnVuY3Rpb24ocGFnZSwgSUQpIHtcbiAgICAgICAgbGV0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFfdGhpcy5yZXN1bHRKU09OW3BhZ2VdIHx8ICFfdGhpcy5yZXN1bHRKU09OW3BhZ2VdLmNvbXBvbmVudHMpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgSUQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAvLyBwcmVwYXJlIGNvbXBvbmVudFxuICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IF90aGlzLmdldENvbXBvbmVudChJRCwgcGFnZSk7XG4gICAgICAgICAgICBsZXQgcHJlcGFyZWRDb21wb25lbnRIdG1sID0gX3RoaXMucHJlcGFyZUNvbXBvbmVudChjb21wb25lbnQpO1xuXG4gICAgICAgICAgICBsZXQgdGVtcFBhZ2UgPSAkKCc8ZGl2PicpLmFwcGVuZChwcmVwYXJlZENvbXBvbmVudEh0bWwpO1xuXG4gICAgICAgICAgICAvLyBsb2FkIGNvbXBvbmVudCdzIGNvbnRlbnRcbiAgICAgICAgICAgIF90aGlzLmxvYWRFYWNoQ29tcG9uZW50KGNvbXBvbmVudCwgdGVtcFBhZ2UsIF90aGlzLnJlc3VsdEpTT05bcGFnZV0sIHBhZ2UsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm0gc2Vjb25kYXJ5IGNvbXBvbmVudCB0byBwcmltYXJ5IChSaXZldHMtY29tcGF0aWJsZSlcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1NlY29uZGFyeUNvbXBvbmVudChjb21wb25lbnQpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0U2Vjb25kYXJ5Q29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAkLkRlZmVycmVkKCkucmVzb2x2ZSh0ZW1wUGFnZS5maW5kKCdbZGF0YS1hcHAtY29tcG9uZW50LWlkPScgKyBJRCArICddIC5hcHAtY29tcG9uZW50LWNvbnRlbnQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJlcGFyZSBjb21wb25lbnQgYmxvY2tzXG4gICAgICAgIGxldCBjb21wb25lbnRzID0gX3RoaXMucmVzdWx0SlNPTltwYWdlXS5jb21wb25lbnRzO1xuICAgICAgICBsZXQgcHJlcGFyZWRIdG1sID0gX3RoaXMucHJlcGFyZUFsbENvbXBvbmVudHMoY29tcG9uZW50cyk7XG5cbiAgICAgICAgbGV0IHRlbXBQYWdlID0gJCgnPGRpdj4nKS5hcHBlbmQocHJlcGFyZWRIdG1sKTtcblxuICAgICAgICBmb3IgKGxldCBrIGluIGNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgIC8vIGxvYWQgZWFjaCBjb21wb25lbnQgY29udGVudFxuICAgICAgICAgICAgX3RoaXMubG9hZEVhY2hDb21wb25lbnQoY29tcG9uZW50c1trXSwgdGVtcFBhZ2UsIF90aGlzLnJlc3VsdEpTT05bcGFnZV0sIHBhZ2UsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm0gYWxsIHNlY29uZGFyeSBjb21wb25lbnRzIHRvIHByaW1hcnkgKFJpdmV0cy1jb21wYXRpYmxlKVxuICAgICAgICAgICAgaWYgKF90aGlzLmlzU2Vjb25kYXJ5Q29tcG9uZW50KGNvbXBvbmVudHNba10pKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ2V0U2Vjb25kYXJ5Q29tcG9uZW50KGNvbXBvbmVudHNba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgY29tcG9uZW50cyA9IHRlbXBQYWdlLmZpbmQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWRdJyksXG4gICAgICAgICAgICAgICAgZCA9ICQuRGVmZXJyZWQoKSxcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAnJztcblxuICAgICAgICAgICAgZnVuY3Rpb24gX2NvbXBvbmVudFByb2Nlc3NpbmcoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaWQsIGNvbXBvbmVudDtcblxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IGNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkID0gJChjb21wb25lbnRzW2luZGV4XSkuYXR0cignZGF0YS1hcHAtY29tcG9uZW50LWlkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IF90aGlzLmdldENvbXBvbmVudChpZCwgcGFnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Z2V0UmVzdWx0Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkY29udGVudCAtIGNvbXBvbmVudCBjb250ZW50LCAkKC5hcHAtY29tcG9uZW50LWNvbnRlbnQpIGNvbnRhaW5zIGdlbmVyYXRlZCBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudCAtIGNvbXBvbmVudCBwYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhZ2VfbmFtZSAoc2luY2UgdjIuMTIpXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hcHBseUZpbHRlcignZ2V0UmVzdWx0Q29tcG9uZW50JywgJC5EZWZlcnJlZCgpLnJlc29sdmUoJChjb21wb25lbnRzW2luZGV4XSkuZmluZCgnLmFwcC1jb21wb25lbnQtY29udGVudCcpLCBjb21wb25lbnQsIHBhZ2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCRjb21wb25lbnQsIGNvbXBvbmVudCwgcGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBodG1sID0gX3RoaXMuY2xlYW5IVE1McGxlYXNlKCRjb21wb25lbnQuaHRtbCgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Z2V0UmVzdWx0SFRNTGNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIC0gcmVzdWx0IGh0bWwgb2YgY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNvbXBvbmVudCAtIGNvbXBvbmVudCBwYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFnZV9uYW1lIChzaW5jZSB2Mi4xMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gX3RoaXMuYXBwbHlGaWx0ZXIoJ2dldFJlc3VsdEhUTUxjb21wb25lbnQnLCBodG1sLCBjb21wb25lbnQsIHBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBodG1sICsgJ1xcblxcbic7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29tcG9uZW50UHJvY2Vzc2luZygrK2luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFQUC5zaG93RXJyb3IocmVqKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfY29tcG9uZW50UHJvY2Vzc2luZygwKTtcblxuICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZSgpO1xuICAgICAgICB9KCkpO1xuXG4gICAgICAgIC8vIHRlbXBQYWdlLmZpbmQoJ1tkYXRhLWFwcC1jb21wb25lbnQtaWRdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vICAgICB2YXIgaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtYXBwLWNvbXBvbmVudC1pZCcpO1xuICAgICAgICAvLyAgICAgdmFyIGNvbXBvbmVudCA9IF90aGlzLmdldENvbXBvbmVudChpZCwgcGFnZSk7XG4gICAgICAgIC8vICAgICAvKipcbiAgICAgICAgLy8gICAgICAqIEBmaWx0ZXIgbWJyQXBwQ29yZS0+Z2V0UmVzdWx0Q29tcG9uZW50XG4gICAgICAgIC8vICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGNvbnRlbnQgLSBjb21wb25lbnQgY29udGVudCwgJCguYXBwLWNvbXBvbmVudC1jb250ZW50KSBjb250YWlucyBnZW5lcmF0ZWQgb2JqZWN0XG4gICAgICAgIC8vICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29tcG9uZW50IC0gY29tcG9uZW50IHBhcmFtc1xuICAgICAgICAvLyAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhZ2VfbmFtZSAoc2luY2UgdjIuMTIpXG4gICAgICAgIC8vICAgICAgKi9cbiAgICAgICAgLy8gICAgIF90aGlzLmFwcGx5RmlsdGVyKCdnZXRSZXN1bHRDb21wb25lbnQnLCAkLkRlZmVycmVkKCkucmVzb2x2ZSgkKHRoaXMpLmZpbmQoJy5hcHAtY29tcG9uZW50LWNvbnRlbnQnKSwgY29tcG9uZW50LCBwYWdlKSkudGhlbihmdW5jdGlvbiAoJGNvbXBvbmVudCkge1xuICAgICAgICAvLyAgICAgICAgIHZhciBodG1sID0gX3RoaXMuY2xlYW5IVE1McGxlYXNlKCRjb21wb25lbnQuaHRtbCgpKTtcbiAgICAgICAgLy8gICAgICAgICAvKipcbiAgICAgICAgLy8gICAgICAgICAgKiBAZmlsdGVyIG1ickFwcENvcmUtPmdldFJlc3VsdEhUTUxjb21wb25lbnRcbiAgICAgICAgLy8gICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gaHRtbCAtIHJlc3VsdCBodG1sIG9mIGNvbXBvbmVudFxuICAgICAgICAvLyAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb21wb25lbnQgLSBjb21wb25lbnQgcGFyYW1zXG4gICAgICAgIC8vICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhZ2VfbmFtZSAoc2luY2UgdjIuMTIpXG4gICAgICAgIC8vICAgICAgICAgICovXG4gICAgICAgIC8vICAgICAgICAgaHRtbCA9IF90aGlzLmFwcGx5RmlsdGVyKCdnZXRSZXN1bHRIVE1MY29tcG9uZW50JywgaHRtbCwgY29tcG9uZW50LCBwYWdlKTtcbiAgICAgICAgLy8gICAgICAgICByZXN1bHQgKz0gaHRtbCArICdcXG5cXG4nO1xuICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGxvYWQgcHJvamVjdCBmaWxlXG4gICAgICogaWYgc29tZSBlcnJvciBpbiBmaWxlIC0gcmV0dXJuIGZhbHNlXG4gICAgICogQG1ldGhvZCBsb2FkUHJvamVjdFxuICAgICAqIEBwYXJhbSAgcHJvamVjdFxuICAgICAqIEByZXR1cm4ge0Jvb2x9IC0gb2sgcmVzdWx0XG4gICAgICovXG4gICAgQ09SRS5wcm90b3R5cGUubG9hZFByb2plY3QgPSBmdW5jdGlvbihwcm9qZWN0KSB7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmICghcHJvamVjdCB8fCAhcHJvamVjdC5wYWdlcyB8fCB0eXBlb2YgcHJvamVjdC5wYWdlcyAhPSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBwcm9qZWN0IGhhcyBubyBwYWdlc1wiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluaXQgdW5pcXVlIG51bWJlciBiZWZvcmUgYWxsXG4gICAgICAgIHRoaXMudW5pcUNvbXBOdW0gPSBwcm9qZWN0LnNldHRpbmdzLnVuaXFDb21wTnVtIHx8IDA7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFBhZ2UocHJvamVjdC5zZXR0aW5ncy5jdXJyZW50UGFnZSwgcHJvamVjdCkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5yZXN1bHRKU09OID0gcHJvamVjdCAmJiBwcm9qZWN0LnBhZ2VzIHx8IHt9O1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50UGFnZSA9IHByb2plY3QgJiYgcHJvamVjdC5zZXR0aW5ncyAmJiBwcm9qZWN0LnNldHRpbmdzLmN1cnJlbnRQYWdlIHx8IFwiXCI7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmZpcmUoJ3Byb2plY3RMb2FkZWQnKTtcbiAgICAgICAgICAgIHNlbGYucmVuZGVyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogc2hvdyBleHRlbmFsIGRpYWxvZyAtIHJlZGlyZWN0IHRvIG1ickFwcC5zaG93RGlhbG9nXG4gICAgICogQG1ldGhvZCBzaG93RGlhbG9nXG4gICAgICogQHNlZSBtYnJBcHAvY29tbW9uLnNob3dEaWFsb2dcbiAgICAgKiBAcGFyYW0gIHtNYXB9IHBhcmFtc1xuICAgICAqIEByZXR1cm4gbW9kYWwgaW5zdGFuY2VcbiAgICAgKi9cbiAgICBDT1JFLnByb3RvdHlwZS5zaG93RGlhbG9nID0gZnVuY3Rpb24ocGFyYW1zKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuQVBQICYmIHRoaXMuQVBQLnNob3dEaWFsb2cpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5BUFAuc2hvd0RpYWxvZyhwYXJhbXMpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yOiBtYnJBcHAgaXMgbm90IGFjY2Vzc2libGVcIik7XG5cbiAgICAgICAgICAgIC8vIGNvbnZlcnQgdG8gYm9vdGJveCAtIHRlbXBvcnkgc29sdXRpb25cbiAgICAgICAgICAgIHBhcmFtcy5idXR0b25zID0ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdPaycsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJidG4tcHJpbWFyeVwiLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogcGFyYW1zLnN1Y2Nlc3NcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnYnRuLWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogcGFyYW1zLmNhbmNlbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcy5tZXNzYWdlID0gcGFyYW1zLmJvZHk7XG4gICAgICAgICAgICByZXR1cm4gYm9vdGJveC5kaWFsb2cocGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy8gZ2xvYmFsIGluaXRcbiAgICB3aW5kb3cubWJyQXBwQ29yZSA9IG5ldyBDT1JFKCk7XG59KGpRdWVyeSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/js/builder.js\n")},"./web/app/builder/summernote/lang/en-US.js":
/*!**************************************************!*\
  !*** ./web/app/builder/summernote/lang/en-US.js ***!
  \**************************************************/
/*! no static exports found */function(module,exports){eval("$.extend($.summernote.lang, {\n  'en-US': {\n    font: {\n      bold: 'Bold',\n      italic: 'Italic',\n      underline: 'Underline',\n      clear: 'Remove Font Style',\n      height: 'Line Height',\n      name: 'Font Family',\n      strikethrough: 'Strikethrough',\n      subscript: 'Subscript',\n      superscript: 'Superscript',\n      size: 'Font Size'\n    },\n    image: {\n      image: 'Picture',\n      insert: 'Insert Image',\n      resizeFull: 'Resize Full',\n      resizeHalf: 'Resize Half',\n      resizeQuarter: 'Resize Quarter',\n      floatLeft: 'Float Left',\n      floatRight: 'Float Right',\n      floatNone: 'Float None',\n      shapeRounded: 'Shape: Rounded',\n      shapeCircle: 'Shape: Circle',\n      shapeThumbnail: 'Shape: Thumbnail',\n      shapeNone: 'Shape: None',\n      dragImageHere: 'Drag image or text here',\n      dropImage: 'Drop image or Text',\n      selectFromFiles: 'Select from files',\n      maximumFileSize: 'Maximum file size',\n      maximumFileSizeError: 'Maximum file size exceeded.',\n      url: 'Image URL',\n      remove: 'Remove Image'\n    },\n    link: {\n      link: 'Link',\n      insert: 'Insert Link',\n      unlink: 'Unlink',\n      edit: 'Edit',\n      textToDisplay: 'Text to display',\n      url: 'To what URL should this link go?',\n      openInNewWindow: 'Open in new window'\n    },\n    table: {\n      table: 'Table'\n    },\n    hr: {\n      insert: 'Insert Horizontal Rule'\n    },\n    style: {\n      style: 'Style',\n      normal: 'Normal',\n      blockquote: 'Quote',\n      pre: 'Code',\n      h1: 'H1',\n      h2: 'H2',\n      h3: 'H3',\n      h4: 'H4',\n      h5: 'H5',\n      h6: 'H6'\n    },\n    lists: {\n      unordered: 'Unordered list',\n      ordered: 'Ordered list'\n    },\n    options: {\n      help: 'Help',\n      fullscreen: 'Full Screen',\n      codeview: 'Code View'\n    },\n    paragraph: {\n      paragraph: 'Paragraph',\n      outdent: 'Outdent',\n      indent: 'Indent',\n      left: 'Align left',\n      center: 'Align center',\n      right: 'Align right',\n      justify: 'Justify full'\n    },\n    color: {\n      recent: 'Recent Color',\n      more: 'More Color',\n      background: 'Background Color',\n      foreground: 'Foreground Color',\n      transparent: 'Transparent',\n      setTransparent: 'Set transparent',\n      reset: 'Reset',\n      resetToDefault: 'Reset to default'\n    },\n    shortcut: {\n      shortcuts: 'Keyboard shortcuts',\n      close: 'Close',\n      textFormatting: 'Text formatting',\n      action: 'Action',\n      paragraphFormatting: 'Paragraph formatting',\n      documentStyle: 'Document Style',\n      extraKeys: 'Extra keys'\n    },\n    history: {\n      undo: 'Undo',\n      redo: 'Redo'\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9sYW5nL2VuLVVTLmpzPzBmMGYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6Ii4vd2ViL2FwcC9idWlsZGVyL3N1bW1lcm5vdGUvbGFuZy9lbi1VUy5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQuZXh0ZW5kKCQuc3VtbWVybm90ZS5sYW5nLCB7XG4gICdlbi1VUyc6IHtcbiAgICBmb250OiB7XG4gICAgICBib2xkOiAnQm9sZCcsXG4gICAgICBpdGFsaWM6ICdJdGFsaWMnLFxuICAgICAgdW5kZXJsaW5lOiAnVW5kZXJsaW5lJyxcbiAgICAgIGNsZWFyOiAnUmVtb3ZlIEZvbnQgU3R5bGUnLFxuICAgICAgaGVpZ2h0OiAnTGluZSBIZWlnaHQnLFxuICAgICAgbmFtZTogJ0ZvbnQgRmFtaWx5JyxcbiAgICAgIHN0cmlrZXRocm91Z2g6ICdTdHJpa2V0aHJvdWdoJyxcbiAgICAgIHN1YnNjcmlwdDogJ1N1YnNjcmlwdCcsXG4gICAgICBzdXBlcnNjcmlwdDogJ1N1cGVyc2NyaXB0JyxcbiAgICAgIHNpemU6ICdGb250IFNpemUnXG4gICAgfSxcbiAgICBpbWFnZToge1xuICAgICAgaW1hZ2U6ICdQaWN0dXJlJyxcbiAgICAgIGluc2VydDogJ0luc2VydCBJbWFnZScsXG4gICAgICByZXNpemVGdWxsOiAnUmVzaXplIEZ1bGwnLFxuICAgICAgcmVzaXplSGFsZjogJ1Jlc2l6ZSBIYWxmJyxcbiAgICAgIHJlc2l6ZVF1YXJ0ZXI6ICdSZXNpemUgUXVhcnRlcicsXG4gICAgICBmbG9hdExlZnQ6ICdGbG9hdCBMZWZ0JyxcbiAgICAgIGZsb2F0UmlnaHQ6ICdGbG9hdCBSaWdodCcsXG4gICAgICBmbG9hdE5vbmU6ICdGbG9hdCBOb25lJyxcbiAgICAgIHNoYXBlUm91bmRlZDogJ1NoYXBlOiBSb3VuZGVkJyxcbiAgICAgIHNoYXBlQ2lyY2xlOiAnU2hhcGU6IENpcmNsZScsXG4gICAgICBzaGFwZVRodW1ibmFpbDogJ1NoYXBlOiBUaHVtYm5haWwnLFxuICAgICAgc2hhcGVOb25lOiAnU2hhcGU6IE5vbmUnLFxuICAgICAgZHJhZ0ltYWdlSGVyZTogJ0RyYWcgaW1hZ2Ugb3IgdGV4dCBoZXJlJyxcbiAgICAgIGRyb3BJbWFnZTogJ0Ryb3AgaW1hZ2Ugb3IgVGV4dCcsXG4gICAgICBzZWxlY3RGcm9tRmlsZXM6ICdTZWxlY3QgZnJvbSBmaWxlcycsXG4gICAgICBtYXhpbXVtRmlsZVNpemU6ICdNYXhpbXVtIGZpbGUgc2l6ZScsXG4gICAgICBtYXhpbXVtRmlsZVNpemVFcnJvcjogJ01heGltdW0gZmlsZSBzaXplIGV4Y2VlZGVkLicsXG4gICAgICB1cmw6ICdJbWFnZSBVUkwnLFxuICAgICAgcmVtb3ZlOiAnUmVtb3ZlIEltYWdlJ1xuICAgIH0sXG4gICAgbGluazoge1xuICAgICAgbGluazogJ0xpbmsnLFxuICAgICAgaW5zZXJ0OiAnSW5zZXJ0IExpbmsnLFxuICAgICAgdW5saW5rOiAnVW5saW5rJyxcbiAgICAgIGVkaXQ6ICdFZGl0JyxcbiAgICAgIHRleHRUb0Rpc3BsYXk6ICdUZXh0IHRvIGRpc3BsYXknLFxuICAgICAgdXJsOiAnVG8gd2hhdCBVUkwgc2hvdWxkIHRoaXMgbGluayBnbz8nLFxuICAgICAgb3BlbkluTmV3V2luZG93OiAnT3BlbiBpbiBuZXcgd2luZG93J1xuICAgIH0sXG4gICAgdGFibGU6IHtcbiAgICAgIHRhYmxlOiAnVGFibGUnXG4gICAgfSxcbiAgICBocjoge1xuICAgICAgaW5zZXJ0OiAnSW5zZXJ0IEhvcml6b250YWwgUnVsZSdcbiAgICB9LFxuICAgIHN0eWxlOiB7XG4gICAgICBzdHlsZTogJ1N0eWxlJyxcbiAgICAgIG5vcm1hbDogJ05vcm1hbCcsXG4gICAgICBibG9ja3F1b3RlOiAnUXVvdGUnLFxuICAgICAgcHJlOiAnQ29kZScsXG4gICAgICBoMTogJ0gxJyxcbiAgICAgIGgyOiAnSDInLFxuICAgICAgaDM6ICdIMycsXG4gICAgICBoNDogJ0g0JyxcbiAgICAgIGg1OiAnSDUnLFxuICAgICAgaDY6ICdINidcbiAgICB9LFxuICAgIGxpc3RzOiB7XG4gICAgICB1bm9yZGVyZWQ6ICdVbm9yZGVyZWQgbGlzdCcsXG4gICAgICBvcmRlcmVkOiAnT3JkZXJlZCBsaXN0J1xuICAgIH0sXG4gICAgb3B0aW9uczoge1xuICAgICAgaGVscDogJ0hlbHAnLFxuICAgICAgZnVsbHNjcmVlbjogJ0Z1bGwgU2NyZWVuJyxcbiAgICAgIGNvZGV2aWV3OiAnQ29kZSBWaWV3J1xuICAgIH0sXG4gICAgcGFyYWdyYXBoOiB7XG4gICAgICBwYXJhZ3JhcGg6ICdQYXJhZ3JhcGgnLFxuICAgICAgb3V0ZGVudDogJ091dGRlbnQnLFxuICAgICAgaW5kZW50OiAnSW5kZW50JyxcbiAgICAgIGxlZnQ6ICdBbGlnbiBsZWZ0JyxcbiAgICAgIGNlbnRlcjogJ0FsaWduIGNlbnRlcicsXG4gICAgICByaWdodDogJ0FsaWduIHJpZ2h0JyxcbiAgICAgIGp1c3RpZnk6ICdKdXN0aWZ5IGZ1bGwnXG4gICAgfSxcbiAgICBjb2xvcjoge1xuICAgICAgcmVjZW50OiAnUmVjZW50IENvbG9yJyxcbiAgICAgIG1vcmU6ICdNb3JlIENvbG9yJyxcbiAgICAgIGJhY2tncm91bmQ6ICdCYWNrZ3JvdW5kIENvbG9yJyxcbiAgICAgIGZvcmVncm91bmQ6ICdGb3JlZ3JvdW5kIENvbG9yJyxcbiAgICAgIHRyYW5zcGFyZW50OiAnVHJhbnNwYXJlbnQnLFxuICAgICAgc2V0VHJhbnNwYXJlbnQ6ICdTZXQgdHJhbnNwYXJlbnQnLFxuICAgICAgcmVzZXQ6ICdSZXNldCcsXG4gICAgICByZXNldFRvRGVmYXVsdDogJ1Jlc2V0IHRvIGRlZmF1bHQnXG4gICAgfSxcbiAgICBzaG9ydGN1dDoge1xuICAgICAgc2hvcnRjdXRzOiAnS2V5Ym9hcmQgc2hvcnRjdXRzJyxcbiAgICAgIGNsb3NlOiAnQ2xvc2UnLFxuICAgICAgdGV4dEZvcm1hdHRpbmc6ICdUZXh0IGZvcm1hdHRpbmcnLFxuICAgICAgYWN0aW9uOiAnQWN0aW9uJyxcbiAgICAgIHBhcmFncmFwaEZvcm1hdHRpbmc6ICdQYXJhZ3JhcGggZm9ybWF0dGluZycsXG4gICAgICBkb2N1bWVudFN0eWxlOiAnRG9jdW1lbnQgU3R5bGUnLFxuICAgICAgZXh0cmFLZXlzOiAnRXh0cmEga2V5cydcbiAgICB9LFxuICAgIGhpc3Rvcnk6IHtcbiAgICAgIHVuZG86ICdVbmRvJyxcbiAgICAgIHJlZG86ICdSZWRvJ1xuICAgIH1cbiAgfVxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/lang/en-US.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-align.js":
/*!***********************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-align.js ***!
  \***********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  @module\n */\n(function (factory) {\n  /* global define */\n  if (true) {\n    // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(function ($) {\n  // template\n  var tmpl = $.summernote.renderer.getTemplate();\n  // var editor = $.summernote.eventHandler.getEditor();\n\n  // return ancestor to accept font styles\n  function getAncestor(ancestors) {\n    var item;\n\n    // check if some of alloved tags\n    for (var k in ancestors) {\n      if (/\\bP\\b|DIV|UL|H1|H2|H3|H4|H5|H6/g.test(ancestors[k].tagName)) {\n        item = ancestors[k];\n        continue;\n      }\n    }\n\n    return item || $(ancestors[ancestors.length - 1]).parent()[0];\n  }\n\n  function changeProps(item, prop, value) {\n    if (window.mbrAppCore) {\n      window.mbrAppCore.addComponentStyles($(item), prop, value);\n    } else {\n      $(item).css(prop, value);\n    }\n  }\n\n  /**\n   * @class plugin.mbr_btn \n   * \n   * Hello Plugin  \n   */\n  $.summernote.addPlugin({\n    /** @property {String} name name of plugin */\n    name: 'mbrAlign',\n\n    langs: {\n        'en-US': {\n            'mbrAlign': {\n                'mbrAlign': 'Align'\n            }\n        }\n    },\n    \n    /** \n     * @property {Object} buttons \n     * @property {Function} buttons.hello   function to make button\n     * @property {Function} buttons.helloDropdown   function to make button\n     * @property {Function} buttons.helloImage   function to make button\n     */\n    buttons: { // buttons\n      mbrAlign: function (lang, options) {\n        return tmpl.iconButton('fa fa-align-left', {\n          event: 'mbrAlign',\n          name: 'mbrAlign',\n          title: lang.mbrAlign.mbrAlign,\n          className: 'mbrAlign',\n          hide: false\n        });\n      }\n    },\n\n    /**\n     * @property {Object} events \n     * @property {Function} events.hello  run function when button that has a 'hello' event name  fires click\n     * @property {Function} events.helloDropdown run function when button that has a 'helloDropdown' event name  fires click\n     * @property {Function} events.helloImage run function when button that has a 'helloImage' event name  fires click\n     */\n    events: { // events\n      mbrAlign: function (event, editor, layoutInfo) {\n        event.stopPropagation();\n        var $editable = layoutInfo.editable();\n        var style = editor.currentStyle();\n        var item = getAncestor(style.ancestors);\n\n        switch (style['text-align']) {\n          case 'left':\n          case 'start':\n            if (window.mbrAppCore) {\n              changeProps(item, 'text-align', 'center');\n            } else {\n              editor.justifyCenter($editable);\n            }\n            break;\n          case 'right':\n            // editor.justifyFull($editable);\n            if (window.mbrAppCore) {\n              changeProps(item, 'text-align', 'left');\n            } else {\n              editor.justifyLeft($editable);\n            }\n            break;\n          case 'center':\n            if (window.mbrAppCore) {\n              changeProps(item, 'text-align', 'right');\n            } else {\n              editor.justifyRight($editable);\n            }\n            break;\n          // case 'justify':\n          //   editor.justifyLeft($editable);\n          //   break;\n        }\n      }\n    }\n  });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWFsaWduLmpzP2RmYmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBMEM7QUFDaEQ7QUFDQSxJQUFJLGlDQUFPLENBQUMsMkNBQVEsQ0FBQyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQy9CLEdBQUcsTUFBTSxFQUdOO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxrQkFBa0IsT0FBTztBQUN6QixrQkFBa0IsU0FBUztBQUMzQixrQkFBa0IsU0FBUztBQUMzQixrQkFBa0IsU0FBUztBQUMzQjtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7O0FBRUw7QUFDQSxrQkFBa0IsT0FBTztBQUN6QixrQkFBa0IsU0FBUztBQUMzQixrQkFBa0IsU0FBUztBQUMzQixrQkFBa0IsU0FBUztBQUMzQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDIiwiZmlsZSI6Ii4vd2ViL2FwcC9idWlsZGVyL3N1bW1lcm5vdGUvcGx1Z2luL3N1bW1lcm5vdGUtZXh0LW1ici1hbGlnbi5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzOiBqUXVlcnlcbiAgICBmYWN0b3J5KHdpbmRvdy5qUXVlcnkpO1xuICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gIC8vIHRlbXBsYXRlXG4gIHZhciB0bXBsID0gJC5zdW1tZXJub3RlLnJlbmRlcmVyLmdldFRlbXBsYXRlKCk7XG4gIC8vIHZhciBlZGl0b3IgPSAkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyLmdldEVkaXRvcigpO1xuXG4gIC8vIHJldHVybiBhbmNlc3RvciB0byBhY2NlcHQgZm9udCBzdHlsZXNcbiAgZnVuY3Rpb24gZ2V0QW5jZXN0b3IoYW5jZXN0b3JzKSB7XG4gICAgdmFyIGl0ZW07XG5cbiAgICAvLyBjaGVjayBpZiBzb21lIG9mIGFsbG92ZWQgdGFnc1xuICAgIGZvciAodmFyIGsgaW4gYW5jZXN0b3JzKSB7XG4gICAgICBpZiAoL1xcYlBcXGJ8RElWfFVMfEgxfEgyfEgzfEg0fEg1fEg2L2cudGVzdChhbmNlc3RvcnNba10udGFnTmFtZSkpIHtcbiAgICAgICAgaXRlbSA9IGFuY2VzdG9yc1trXTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW0gfHwgJChhbmNlc3RvcnNbYW5jZXN0b3JzLmxlbmd0aCAtIDFdKS5wYXJlbnQoKVswXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYW5nZVByb3BzKGl0ZW0sIHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHdpbmRvdy5tYnJBcHBDb3JlKSB7XG4gICAgICB3aW5kb3cubWJyQXBwQ29yZS5hZGRDb21wb25lbnRTdHlsZXMoJChpdGVtKSwgcHJvcCwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKGl0ZW0pLmNzcyhwcm9wLCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBwbHVnaW4ubWJyX2J0biBcbiAgICogXG4gICAqIEhlbGxvIFBsdWdpbiAgXG4gICAqL1xuICAkLnN1bW1lcm5vdGUuYWRkUGx1Z2luKHtcbiAgICAvKiogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgbmFtZSBvZiBwbHVnaW4gKi9cbiAgICBuYW1lOiAnbWJyQWxpZ24nLFxuXG4gICAgbGFuZ3M6IHtcbiAgICAgICAgJ2VuLVVTJzoge1xuICAgICAgICAgICAgJ21ickFsaWduJzoge1xuICAgICAgICAgICAgICAgICdtYnJBbGlnbic6ICdBbGlnbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLyoqIFxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBidXR0b25zIFxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG8gICBmdW5jdGlvbiB0byBtYWtlIGJ1dHRvblxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG9Ecm9wZG93biAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYnV0dG9ucy5oZWxsb0ltYWdlICAgZnVuY3Rpb24gdG8gbWFrZSBidXR0b25cbiAgICAgKi9cbiAgICBidXR0b25zOiB7IC8vIGJ1dHRvbnNcbiAgICAgIG1ickFsaWduOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdG1wbC5pY29uQnV0dG9uKCdmYSBmYS1hbGlnbi1sZWZ0Jywge1xuICAgICAgICAgIGV2ZW50OiAnbWJyQWxpZ24nLFxuICAgICAgICAgIG5hbWU6ICdtYnJBbGlnbicsXG4gICAgICAgICAgdGl0bGU6IGxhbmcubWJyQWxpZ24ubWJyQWxpZ24sXG4gICAgICAgICAgY2xhc3NOYW1lOiAnbWJyQWxpZ24nLFxuICAgICAgICAgIGhpZGU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gZXZlbnRzIFxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV2ZW50cy5oZWxsbyAgcnVuIGZ1bmN0aW9uIHdoZW4gYnV0dG9uIHRoYXQgaGFzIGEgJ2hlbGxvJyBldmVudCBuYW1lICBmaXJlcyBjbGlja1xuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV2ZW50cy5oZWxsb0Ryb3Bkb3duIHJ1biBmdW5jdGlvbiB3aGVuIGJ1dHRvbiB0aGF0IGhhcyBhICdoZWxsb0Ryb3Bkb3duJyBldmVudCBuYW1lICBmaXJlcyBjbGlja1xuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV2ZW50cy5oZWxsb0ltYWdlIHJ1biBmdW5jdGlvbiB3aGVuIGJ1dHRvbiB0aGF0IGhhcyBhICdoZWxsb0ltYWdlJyBldmVudCBuYW1lICBmaXJlcyBjbGlja1xuICAgICAqL1xuICAgIGV2ZW50czogeyAvLyBldmVudHNcbiAgICAgIG1ickFsaWduOiBmdW5jdGlvbiAoZXZlbnQsIGVkaXRvciwgbGF5b3V0SW5mbykge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyICRlZGl0YWJsZSA9IGxheW91dEluZm8uZWRpdGFibGUoKTtcbiAgICAgICAgdmFyIHN0eWxlID0gZWRpdG9yLmN1cnJlbnRTdHlsZSgpO1xuICAgICAgICB2YXIgaXRlbSA9IGdldEFuY2VzdG9yKHN0eWxlLmFuY2VzdG9ycyk7XG5cbiAgICAgICAgc3dpdGNoIChzdHlsZVsndGV4dC1hbGlnbiddKSB7XG4gICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYnJBcHBDb3JlKSB7XG4gICAgICAgICAgICAgIGNoYW5nZVByb3BzKGl0ZW0sICd0ZXh0LWFsaWduJywgJ2NlbnRlcicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWRpdG9yLmp1c3RpZnlDZW50ZXIoJGVkaXRhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgIC8vIGVkaXRvci5qdXN0aWZ5RnVsbCgkZWRpdGFibGUpO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYnJBcHBDb3JlKSB7XG4gICAgICAgICAgICAgIGNoYW5nZVByb3BzKGl0ZW0sICd0ZXh0LWFsaWduJywgJ2xlZnQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVkaXRvci5qdXN0aWZ5TGVmdCgkZWRpdGFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWJyQXBwQ29yZSkge1xuICAgICAgICAgICAgICBjaGFuZ2VQcm9wcyhpdGVtLCAndGV4dC1hbGlnbicsICdyaWdodCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWRpdG9yLmp1c3RpZnlSaWdodCgkZWRpdGFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgLy8gY2FzZSAnanVzdGlmeSc6XG4gICAgICAgICAgLy8gICBlZGl0b3IuanVzdGlmeUxlZnQoJGVkaXRhYmxlKTtcbiAgICAgICAgICAvLyAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-align.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-button.js":
/*!************************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-button.js ***!
  \************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  summernote plugin for extends functionality\n *\n *  @link module: summernote\n *  @link module: bootbox\n *  @module\n */\n(function (factory) {\n    /* global define */\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(function ($) {\n    // template\n    var tmpl = $.summernote.renderer.getTemplate();\n\n    var defaultButtonColors = {\n        'btn-default': '#e6e6e6',\n        'btn-primary': '#286090',\n        'btn-success': '#449d44',\n        'btn-info': '#31b0d5',\n        'btn-warning': '#ec971f',\n        'btn-danger': '#c9302c',\n    };\n    var defaultLinkColors = {\n        'text-muted': '#777',\n        'text-primary': '#337ab7',\n        'text-success': '#3c763d',\n        'text-info': '#31708f',\n        'text-warning': '#8a6d3b',\n        'text-danger': '#a94442'\n    };\n\n    var getMbrApp = function () {\n        return mbrAppCore && mbrAppCore.APP;\n    }\n\n    // .btn.component-params\n\n    var mbrAppFire = function () {\n        var mbrApp = getMbrApp();\n        if (mbrApp && mbrApp.fire)\n            return mbrApp.fire.apply(mbrApp, arguments);\n    }\n\n    var buttonColors = function () {\n        var mbrApp = getMbrApp();\n        if (mbrApp && mbrApp.getThemeButtonColors && mbrApp.getThemeButtonColors()) {\n            return mbrApp.getThemeButtonColors();\n        }\n        return defaultButtonColors;\n    };\n    var hasButtonOutlineColors = function () {\n        var mbrApp = getMbrApp();\n        return mbrApp && mbrApp.hasButtonOutlineColors && mbrApp.hasButtonOutlineColors();\n    };\n    var linkColors = function () {\n        var mbrApp = getMbrApp();\n        if (mbrApp && mbrApp.getThemeLinkColors && mbrApp.getThemeLinkColors()) {\n            return mbrApp.getThemeLinkColors();\n        }\n        return defaultLinkColors;\n    };\n\n    var editSiteStylesButton = function () {\n        var mbrApp = getMbrApp();\n        if (mbrApp && mbrApp.getThemeButtonColors) {\n            return '<li class=\"link-change-style\">' +\n                // filter needed for translation\n                mbrApp.applyFilter('buttonColorSiteStyleIcon', '') +\n                '</li>';\n        }\n\n        return '';\n    };\n\n    /**\n     * @class plugin.mbr_btn\n     *\n     * Hello Plugin\n     */\n    $.summernote.addPlugin({\n        /** @property {String} name name of plugin */\n        name: 'mbrBtn',\n\n        langs: {\n            'en-US': {\n                mbrBtn: {\n                    mbrBtnAdd: 'Add',\n                    mbrBtnMove: 'Move Left',\n                    mbrBtnRemove: 'Remove',\n                    mbrBtnColor: 'Color',\n                    mbrBtnExtendedColor: 'Color'\n                }\n            }\n        },\n\n        /**\n         * @property {Object} buttons\n         * @property {Function} buttons.hello   function to make button\n         * @property {Function} buttons.helloDropdown   function to make button\n         * @property {Function} buttons.helloImage   function to make button\n         */\n        buttons: { // buttons\n            mbrBtnRemove: function (lang, options) {\n                return tmpl.iconButton('mbr-icon-trash', {\n                    event: 'mbrBtnRemove',\n                    name: 'mbrBtnRemove',\n                    title: lang.mbrBtn.mbrBtnRemove,\n                    hide: true\n                });\n            },\n            mbrBtnAdd: function (lang, options) {\n                return tmpl.iconButton('mbr-icon-plus', {\n                    event: 'mbrBtnAdd',\n                    name: 'mbrBtnAdd',\n                    title: lang.mbrBtn.mbrBtnAdd,\n                    hide: false\n                });\n            },\n            mbrBtnMove: function (lang, options) {\n                return tmpl.iconButton('mbr-icon-arrow-left', {\n                    event: 'mbrBtnMove',\n                    name: 'mbrBtnMove',\n                    title: lang.mbrBtn.mbrBtnMove,\n                    hide: false\n                });\n            },\n            mbrBtnColor: function (lang, options) {\n                var items = '', colors = buttonColors();\n                for (var k in colors) {\n                    items += '<li><a data-event=\"mbrBtnColor\" href=\"javascript:void(0);\" data-value=\"' + k + '\">' +\n                        '<i class=\"mbr-icon-check\"></i>' +\n                        '<span style=\"width:25px;height:25px;border-radius:100px;' +\n                        'vertical-align: bottom;margin-left: 5px;' +\n                        'display: inline-block;background:' + $.summernote.adaptColorForBg(colors[k]) + ';\">' +\n                        '</span>' +\n                        '</a></li>';\n                }\n\n                var label = '<span class=\"note-current-mbrBtnColor\"></span>';\n                var dropdown = '<ul class=\"dropdown-menu note-check\">' + items + '</ul>';\n\n                return tmpl.button(label, {\n                    title: lang.mbrBtn.mbrBtnColor,\n                    name: 'mbrBtnColor',\n                    event: 'mbrBtnColorPrevent',\n                    hide: true,\n                    className: 'note-mbrBtnColor',\n                    dropdown: dropdown,\n                    nocaret: true\n                });\n            },\n            mbrBtnExtendedColor: function (lang, options) {\n                var items = '', colors = buttonColors();\n                for (var k in colors) {\n                    items += '<li><a data-event=\"mbrBtnColor\" href=\"javascript:void(0);\" data-value=\"' + k + '\">' +\n                        '<i class=\"mbr-icon-check\"></i>' +\n                        '<span style=\"width:25px;height:25px;border-radius:100px;' +\n                        'vertical-align: bottom;margin-left: 5px;' +\n                        'display: inline-block;background:' + $.summernote.adaptColorForBg(colors[k]) + ';\">' +\n                        '</span>' +\n                        '</a></li>';\n                }\n                if (hasButtonOutlineColors()) {\n                    for (var k in colors) {\n                        items += '<li><a data-event=\"mbrBtnColor\" href=\"javascript:void(0);\" data-value=\"' + k + '-outline\">' +\n                            '<i class=\"mbr-icon-check\"></i>' +\n                            '<span style=\"width:25px;height:25px;border-radius:100px;' +\n                            'vertical-align: bottom;margin-left: 5px;' +\n                            'display: inline-block;background: none;border: 3px solid ' + $.summernote.adaptColorForBg(colors[k]) + ';\">' +\n                            '</span>' +\n                            '</a></li>';\n                    }\n                }\n\n                var label = '<span class=\"note-current-mbrBtnColor\"></span>';\n                var dropdown = '<ul class=\"dropdown-menu note-check\">' + items + editSiteStylesButton() + '</ul>';\n\n                return tmpl.button(label, {\n                    title: lang.mbrBtn.mbrBtnExtendedColor,\n                    name: 'mbrBtnColor',\n                    event: 'mbrBtnColorPrevent',\n                    hide: !options.isSecondaryComponent,\n                    className: 'note-mbrBtnColor',\n                    dropdown: dropdown,\n                    nocaret: true\n                });\n            },\n            mbrLinkColor: function (lang, options) {\n                var items = '', colors = linkColors();\n                for (var k in colors) {\n                    items += '<li><a data-event=\"mbrLinkColor\" href=\"javascript:void(0);\" data-value=\"' + k + '\">' +\n                        '<i class=\"mbr-icon-check\"></i>' +\n                        '<span style=\"width:25px;height:25px;border-radius:100px;' +\n                        'vertical-align: bottom;margin-left: 5px;' +\n                        'display: inline-block;background:' + $.summernote.adaptColorForBg(colors[k]) + ';\">' +\n                        '</span>' +\n                        '</a></li>';\n                }\n\n                var label = '<span class=\"note-current-mbrLinkColor\"></span>';\n                var dropdown = '<ul class=\"dropdown-menu note-check\">' + items + editSiteStylesButton() + '</ul>';\n\n                return tmpl.button(label, {\n                    title: 'Color',\n                    name: 'mbrLinkColor',\n                    event: 'mbrBtnColorPrevent',\n                    hide: !options.isSecondaryComponent,\n                    className: 'note-mbrLinkColor',\n                    dropdown: dropdown,\n                    nocaret: true\n                });\n            }\n        },\n\n        init: function (layoutInfo) {\n\n            var groups = [\n                ['insert2', ['mbrBtnExtendedColor']],\n                ['insert3', ['mbrBtnAdd', 'mbrBtnMove', 'mbrBtnRemove']]\n            ];\n\n            if (typeof mbrAppCore != 'undefined') {\n\n                /**\n                 * Modificate groups on summernote button init\n                 * @param {Array} groups\n                 * @param {String} groups.1 - group\n                 * @param {String[]} groups.2 - buttons\n                 * @param {jQuery} $editable - target element\n                 */\n                groups = mbrAppCore.applyFilter('summernoteMakePopover', groups, layoutInfo.editable());\n\n            }\n\n            var options = layoutInfo.editor().data('options');\n\n            for (var k in groups) {\n\n                var group = groups[k];\n\n                if (options.customToolbar) {\n                    for (var key in options.customToolbar) {\n                        if (options.customToolbar[key] != 'off') continue;\n                        var index = group[1].indexOf(key);\n                        if (index < 0) continue;\n                        group[1].splice(index, 1);\n                    }\n                }\n\n                if (group[1].length) {\n                    var selector = group[1].concat('mbrShowSiteColors').map(function (btnName) {\n                        if (btnName == 'mbrBtnExtendedColor') btnName = 'mbrBtnColorPrevent';\n                        else if (btnName == 'mbrBtnColor') btnName += 'Prevent';\n                        return '[data-event=\"' + btnName + '\"]';\n                    }).join(',');\n                    layoutInfo.editable().summernote('popover.addGroup', group, 'button');\n                    layoutInfo.popover().find(selector).tooltip({\n                        container: 'body',\n                        trigger: 'hover',\n                        placement: 'top'\n                    }).on('click', function () {\n                        $(this).tooltip('hide');\n                    });\n                }\n\n            }\n\n        },\n\n        /**\n         * @property {Object} events\n         * @property {Function} events.hello  run function when button that has a 'hello' event name  fires click\n         * @property {Function} events.helloDropdown run function when button that has a 'helloDropdown' event name  fires click\n         * @property {Function} events.helloImage run function when button that has a 'helloImage' event name  fires click\n         */\n        events: { // events\n            mbrShowSiteColors: function (event, editor, layoutInfo) {\n                setTimeout(function () { // prevent to close on iframe click\n                    var mbrApp = getMbrApp();\n                    mbrApp.openThemeSettings();\n                    mbrApp.ToogleThemeSettings.target.$elm // highlight colors in #theme-settings\n                        .find('[data-group-name=\"colors\"]')\n                        .addClass('selected');\n                }, 100);\n            },\n            mbrBtnRemove: function (event, editor, layoutInfo) {\n                // Get current editable node\n                var $editable = layoutInfo.editable();\n                var isMenu = $editable.hasClass('mbr-menu-item') ||\n                    $editable.hasClass('mbr-editable-menu-item');\n                var useParent = isMenu ||\n                    $editable.attr('data-app-btn') === 'parent';\n                var $sibling = useParent ?\n                    $editable.parent().siblings('li:eq(0)').find('> a')\n                    : $editable.siblings('[data-app-btn]:eq(0)');\n                var $parent = useParent ?\n                    $editable.parents('[data-app-edit]:eq(0)')\n                    : $editable.parent();\n\n                // copied from summernote.js\n                var mbrBtnRemoveSiblings = useParent ?\n                    $editable.parent().siblings('li').find('> a')\n                    : $editable.siblings('btn, [data-app-btn]');\n\n                if (!isMenu && !mbrBtnRemoveSiblings.length) {\n                    $editable.blur();\n                    /**\n                     * Event for trying to remove last button in buttons list\n                     * @event mbrApp#removeLastButton\n                     */\n                    mbrAppFire(\"removeLastButton\");\n                    return;\n                }\n\n\n                if (useParent) {\n                    $editable.destroy().parent().remove();\n                } else {\n                    $editable.destroy().remove();\n                }\n\n                if ($parent.is('[data-app-edit]')) {\n                    // remove from mobirise core\n                    $parent.trigger('delete.rivets');\n                }\n\n\n            },\n            mbrBtnAdd: function (event, editor, layoutInfo) {\n                // Get current editable node\n                var $editable = layoutInfo.editable();\n                var $oldBtn = $editable;\n                var useParent = $editable.hasClass('mbr-menu-item') ||\n                    $editable.hasClass('mbr-editable-menu-item') ||\n                    $editable.attr('data-app-btn') === 'parent';\n\n                if (useParent) {\n                    $oldBtn = $editable.parent();\n                }\n\n                // clone current button\n                var $newBtn = $oldBtn.clone();\n\n                // insert clone after current button\n                $oldBtn.after($newBtn);\n                $oldBtn.after(' '); // space between buttons\n\n                if (useParent) {\n                    $newBtn = $newBtn.find('> a');\n                    $oldBtn = $oldBtn.find('> a');\n                }\n\n                // remove all classes and attributes from cloned button\n                $newBtn\n                    .removeClass('summernote-air note-air-editor note-editable')\n                    .removeAttr('id contenteditable');\n\n                // init new button\n                $newBtn.trigger('mousedown');\n\n            },\n            mbrBtnMove: function (event, editor, layoutInfo) {\n                // Get current editable node\n                var $editable = layoutInfo.editable();\n                var $curBtn = $editable;\n\n                var useParent = $editable.hasClass('mbr-menu-item') ||\n                    $editable.hasClass('mbr-editable-menu-item') ||\n                    $editable.attr('data-app-btn') === 'parent';\n\n                if (useParent) {\n                    $curBtn = $editable.parent();\n                }\n\n                // get previous button\n                var $prevBtn = $curBtn.prev(useParent ? undefined : '.btn');\n                if (!$prevBtn[0]) {\n                    $prevBtn = $curBtn.prev('[data-app-btn]');\n                }\n                if (!$prevBtn[0]) {\n                    return;\n                }\n\n                // move current button before prevous\n                $prevBtn.before($curBtn);\n                $prevBtn.before(' '); // space between buttons\n\n                editor.afterCommand($editable);\n                $editable.focus();\n            },\n            mbrBtnColor: function (event, editor, layoutInfo, value) {\n                // Get current editable node\n                var $editable = layoutInfo.editable();\n\n                // remove all color classes\n                var removeClasses = '';\n                var hasOutlineColors = hasButtonOutlineColors();\n                for (var k in buttonColors()) {\n                    removeClasses += ' ' + k;\n                    if (hasOutlineColors) {\n                        removeClasses += ' ' + k + '-outline';\n                    }\n                }\n\n                $editable.removeClass(removeClasses).addClass(value);\n                // editor.fontSize(layoutInfo.editable(), value);\n\n                var mbrApp = getMbrApp();\n                if (mbrApp) {\n                    $editable\n                        .trigger($.Event('change-button-color', {\n                            removedClasses: removeClasses,\n                            addedClass: value\n                        }))\n                        .closest('.app-component-content').find('> *').trigger(\n                        'changeButtonColor.cards',\n                        $editable[0], value, removeClasses\n                    );\n                }\n\n                editor.afterCommand($editable);\n\n                // emulation of \"onChange\" event for saving in project\n                layoutInfo.editable().trigger('blur');\n            },\n            mbrLinkColor: function (event, editor, layoutInfo, value) {\n                var $editable = layoutInfo.editable(),\n                    $link = $(editor.createRange($editable).commonAncestor().parentNode);\n\n                if ($link.is('a')) {\n                    // remove all color classes\n                    var removeClasses = '';\n                    for (var k in linkColors()) {\n                        removeClasses += ' ' + k;\n                    }\n\n                    $link\n                        .add($link.closest('[data-app-modern-menu]').find('a'))\n                        .removeClass(removeClasses).addClass(value);\n                    // editor.fontSize(layoutInfo.editable(), value);\n\n                    editor.afterCommand($editable);\n                }\n            },\n            mbrBtnColorPrevent: function (event) {\n                event.preventDefault();\n            }\n        }\n    });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWJ1dHRvbi5qcz82YmI1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsSUFBMEM7QUFDbEQ7QUFDQSxRQUFRLGlDQUFPLENBQUMsMkNBQVEsQ0FBQyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQ25DLEtBQUssTUFBTSxFQUdOO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTztBQUM5Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxzQkFBc0IsT0FBTztBQUM3QixzQkFBc0IsU0FBUztBQUMvQixzQkFBc0IsU0FBUztBQUMvQixzQkFBc0IsU0FBUztBQUMvQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFD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eUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9zdW1tZXJub3RlL3BsdWdpbi9zdW1tZXJub3RlLWV4dC1tYnItYnV0dG9uLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgc3VtbWVybm90ZSBwbHVnaW4gZm9yIGV4dGVuZHMgZnVuY3Rpb25hbGl0eVxuICpcbiAqICBAbGluayBtb2R1bGU6IHN1bW1lcm5vdGVcbiAqICBAbGluayBtb2R1bGU6IGJvb3Rib3hcbiAqICBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsczogalF1ZXJ5XG4gICAgICAgIGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbiAoJCkge1xuICAgIC8vIHRlbXBsYXRlXG4gICAgdmFyIHRtcGwgPSAkLnN1bW1lcm5vdGUucmVuZGVyZXIuZ2V0VGVtcGxhdGUoKTtcblxuICAgIHZhciBkZWZhdWx0QnV0dG9uQ29sb3JzID0ge1xuICAgICAgICAnYnRuLWRlZmF1bHQnOiAnI2U2ZTZlNicsXG4gICAgICAgICdidG4tcHJpbWFyeSc6ICcjMjg2MDkwJyxcbiAgICAgICAgJ2J0bi1zdWNjZXNzJzogJyM0NDlkNDQnLFxuICAgICAgICAnYnRuLWluZm8nOiAnIzMxYjBkNScsXG4gICAgICAgICdidG4td2FybmluZyc6ICcjZWM5NzFmJyxcbiAgICAgICAgJ2J0bi1kYW5nZXInOiAnI2M5MzAyYycsXG4gICAgfTtcbiAgICB2YXIgZGVmYXVsdExpbmtDb2xvcnMgPSB7XG4gICAgICAgICd0ZXh0LW11dGVkJzogJyM3NzcnLFxuICAgICAgICAndGV4dC1wcmltYXJ5JzogJyMzMzdhYjcnLFxuICAgICAgICAndGV4dC1zdWNjZXNzJzogJyMzYzc2M2QnLFxuICAgICAgICAndGV4dC1pbmZvJzogJyMzMTcwOGYnLFxuICAgICAgICAndGV4dC13YXJuaW5nJzogJyM4YTZkM2InLFxuICAgICAgICAndGV4dC1kYW5nZXInOiAnI2E5NDQ0MidcbiAgICB9O1xuXG4gICAgdmFyIGdldE1ickFwcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1ickFwcENvcmUgJiYgbWJyQXBwQ29yZS5BUFA7XG4gICAgfVxuXG4gICAgLy8gLmJ0bi5jb21wb25lbnQtcGFyYW1zXG5cbiAgICB2YXIgbWJyQXBwRmlyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1ickFwcCA9IGdldE1ickFwcCgpO1xuICAgICAgICBpZiAobWJyQXBwICYmIG1ickFwcC5maXJlKVxuICAgICAgICAgICAgcmV0dXJuIG1ickFwcC5maXJlLmFwcGx5KG1ickFwcCwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICB2YXIgYnV0dG9uQ29sb3JzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWJyQXBwID0gZ2V0TWJyQXBwKCk7XG4gICAgICAgIGlmIChtYnJBcHAgJiYgbWJyQXBwLmdldFRoZW1lQnV0dG9uQ29sb3JzICYmIG1ickFwcC5nZXRUaGVtZUJ1dHRvbkNvbG9ycygpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWJyQXBwLmdldFRoZW1lQnV0dG9uQ29sb3JzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRCdXR0b25Db2xvcnM7XG4gICAgfTtcbiAgICB2YXIgaGFzQnV0dG9uT3V0bGluZUNvbG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1ickFwcCA9IGdldE1ickFwcCgpO1xuICAgICAgICByZXR1cm4gbWJyQXBwICYmIG1ickFwcC5oYXNCdXR0b25PdXRsaW5lQ29sb3JzICYmIG1ickFwcC5oYXNCdXR0b25PdXRsaW5lQ29sb3JzKCk7XG4gICAgfTtcbiAgICB2YXIgbGlua0NvbG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1ickFwcCA9IGdldE1ickFwcCgpO1xuICAgICAgICBpZiAobWJyQXBwICYmIG1ickFwcC5nZXRUaGVtZUxpbmtDb2xvcnMgJiYgbWJyQXBwLmdldFRoZW1lTGlua0NvbG9ycygpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWJyQXBwLmdldFRoZW1lTGlua0NvbG9ycygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZhdWx0TGlua0NvbG9ycztcbiAgICB9O1xuXG4gICAgdmFyIGVkaXRTaXRlU3R5bGVzQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWJyQXBwID0gZ2V0TWJyQXBwKCk7XG4gICAgICAgIGlmIChtYnJBcHAgJiYgbWJyQXBwLmdldFRoZW1lQnV0dG9uQ29sb3JzKSB7XG4gICAgICAgICAgICByZXR1cm4gJzxsaSBjbGFzcz1cImxpbmstY2hhbmdlLXN0eWxlXCI+JyArXG4gICAgICAgICAgICAgICAgLy8gZmlsdGVyIG5lZWRlZCBmb3IgdHJhbnNsYXRpb25cbiAgICAgICAgICAgICAgICBtYnJBcHAuYXBwbHlGaWx0ZXIoJ2J1dHRvbkNvbG9yU2l0ZVN0eWxlSWNvbicsICcnKSArXG4gICAgICAgICAgICAgICAgJzwvbGk+JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnJztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIHBsdWdpbi5tYnJfYnRuXG4gICAgICpcbiAgICAgKiBIZWxsbyBQbHVnaW5cbiAgICAgKi9cbiAgICAkLnN1bW1lcm5vdGUuYWRkUGx1Z2luKHtcbiAgICAgICAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgcGx1Z2luICovXG4gICAgICAgIG5hbWU6ICdtYnJCdG4nLFxuXG4gICAgICAgIGxhbmdzOiB7XG4gICAgICAgICAgICAnZW4tVVMnOiB7XG4gICAgICAgICAgICAgICAgbWJyQnRuOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ickJ0bkFkZDogJ0FkZCcsXG4gICAgICAgICAgICAgICAgICAgIG1ickJ0bk1vdmU6ICdNb3ZlIExlZnQnLFxuICAgICAgICAgICAgICAgICAgICBtYnJCdG5SZW1vdmU6ICdSZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICBtYnJCdG5Db2xvcjogJ0NvbG9yJyxcbiAgICAgICAgICAgICAgICAgICAgbWJyQnRuRXh0ZW5kZWRDb2xvcjogJ0NvbG9yJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IGJ1dHRvbnNcbiAgICAgICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYnV0dG9ucy5oZWxsbyAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG9Ecm9wZG93biAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG9JbWFnZSAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBidXR0b25zOiB7IC8vIGJ1dHRvbnNcbiAgICAgICAgICAgIG1ickJ0blJlbW92ZTogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wbC5pY29uQnV0dG9uKCdtYnItaWNvbi10cmFzaCcsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtYnJCdG5SZW1vdmUnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWJyQnRuUmVtb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGxhbmcubWJyQnRuLm1ickJ0blJlbW92ZSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ickJ0bkFkZDogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wbC5pY29uQnV0dG9uKCdtYnItaWNvbi1wbHVzJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ21ickJ0bkFkZCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYnJCdG5BZGQnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGFuZy5tYnJCdG4ubWJyQnRuQWRkLFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ickJ0bk1vdmU6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRtcGwuaWNvbkJ1dHRvbignbWJyLWljb24tYXJyb3ctbGVmdCcsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtYnJCdG5Nb3ZlJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21ickJ0bk1vdmUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGFuZy5tYnJCdG4ubWJyQnRuTW92ZSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYnJCdG5Db2xvcjogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSAnJywgY29sb3JzID0gYnV0dG9uQ29sb3JzKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBjb2xvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgKz0gJzxsaT48YSBkYXRhLWV2ZW50PVwibWJyQnRuQ29sb3JcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiIGRhdGEtdmFsdWU9XCInICsgayArICdcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cIm1ici1pY29uLWNoZWNrXCI+PC9pPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIHN0eWxlPVwid2lkdGg6MjVweDtoZWlnaHQ6MjVweDtib3JkZXItcmFkaXVzOjEwMHB4OycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZlcnRpY2FsLWFsaWduOiBib3R0b207bWFyZ2luLWxlZnQ6IDVweDsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7YmFja2dyb3VuZDonICsgJC5zdW1tZXJub3RlLmFkYXB0Q29sb3JGb3JCZyhjb2xvcnNba10pICsgJztcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSAnPHNwYW4gY2xhc3M9XCJub3RlLWN1cnJlbnQtbWJyQnRuQ29sb3JcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgZHJvcGRvd24gPSAnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBub3RlLWNoZWNrXCI+JyArIGl0ZW1zICsgJzwvdWw+JztcblxuICAgICAgICAgICAgICAgIHJldHVybiB0bXBsLmJ1dHRvbihsYWJlbCwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGFuZy5tYnJCdG4ubWJyQnRuQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYnJCdG5Db2xvcicsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbWJyQnRuQ29sb3JQcmV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1tYnJCdG5Db2xvcicsXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duOiBkcm9wZG93bixcbiAgICAgICAgICAgICAgICAgICAgbm9jYXJldDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ickJ0bkV4dGVuZGVkQ29sb3I6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gJycsIGNvbG9ycyA9IGJ1dHRvbkNvbG9ycygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gY29sb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICs9ICc8bGk+PGEgZGF0YS1ldmVudD1cIm1ickJ0bkNvbG9yXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBkYXRhLXZhbHVlPVwiJyArIGsgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJtYnItaWNvbi1jaGVja1wiPjwvaT4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBzdHlsZT1cIndpZHRoOjI1cHg7aGVpZ2h0OjI1cHg7Ym9yZGVyLXJhZGl1czoxMDBweDsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO21hcmdpbi1sZWZ0OiA1cHg7JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGlzcGxheTogaW5saW5lLWJsb2NrO2JhY2tncm91bmQ6JyArICQuc3VtbWVybm90ZS5hZGFwdENvbG9yRm9yQmcoY29sb3JzW2tdKSArICc7XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT48L2xpPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChoYXNCdXR0b25PdXRsaW5lQ29sb3JzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBjb2xvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zICs9ICc8bGk+PGEgZGF0YS1ldmVudD1cIm1ickJ0bkNvbG9yXCIgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBkYXRhLXZhbHVlPVwiJyArIGsgKyAnLW91dGxpbmVcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJtYnItaWNvbi1jaGVja1wiPjwvaT4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gc3R5bGU9XCJ3aWR0aDoyNXB4O2hlaWdodDoyNXB4O2JvcmRlci1yYWRpdXM6MTAwcHg7JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZlcnRpY2FsLWFsaWduOiBib3R0b207bWFyZ2luLWxlZnQ6IDVweDsnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGlzcGxheTogaW5saW5lLWJsb2NrO2JhY2tncm91bmQ6IG5vbmU7Ym9yZGVyOiAzcHggc29saWQgJyArICQuc3VtbWVybm90ZS5hZGFwdENvbG9yRm9yQmcoY29sb3JzW2tdKSArICc7XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9hPjwvbGk+JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9ICc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1tYnJCdG5Db2xvclwiPjwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgIHZhciBkcm9wZG93biA9ICc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51IG5vdGUtY2hlY2tcIj4nICsgaXRlbXMgKyBlZGl0U2l0ZVN0eWxlc0J1dHRvbigpICsgJzwvdWw+JztcblxuICAgICAgICAgICAgICAgIHJldHVybiB0bXBsLmJ1dHRvbihsYWJlbCwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGFuZy5tYnJCdG4ubWJyQnRuRXh0ZW5kZWRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21ickJ0bkNvbG9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtYnJCdG5Db2xvclByZXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiAhb3B0aW9ucy5pc1NlY29uZGFyeUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1tYnJCdG5Db2xvcicsXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duOiBkcm9wZG93bixcbiAgICAgICAgICAgICAgICAgICAgbm9jYXJldDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ickxpbmtDb2xvcjogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSAnJywgY29sb3JzID0gbGlua0NvbG9ycygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gY29sb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICs9ICc8bGk+PGEgZGF0YS1ldmVudD1cIm1ickxpbmtDb2xvclwiIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgZGF0YS12YWx1ZT1cIicgKyBrICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxpIGNsYXNzPVwibWJyLWljb24tY2hlY2tcIj48L2k+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gc3R5bGU9XCJ3aWR0aDoyNXB4O2hlaWdodDoyNXB4O2JvcmRlci1yYWRpdXM6MTAwcHg7JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAndmVydGljYWwtYWxpZ246IGJvdHRvbTttYXJnaW4tbGVmdDogNXB4OycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXk6IGlubGluZS1ibG9jaztiYWNrZ3JvdW5kOicgKyAkLnN1bW1lcm5vdGUuYWRhcHRDb2xvckZvckJnKGNvbG9yc1trXSkgKyAnO1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2E+PC9saT4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9ICc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1tYnJMaW5rQ29sb3JcIj48L3NwYW4+JztcbiAgICAgICAgICAgICAgICB2YXIgZHJvcGRvd24gPSAnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBub3RlLWNoZWNrXCI+JyArIGl0ZW1zICsgZWRpdFNpdGVTdHlsZXNCdXR0b24oKSArICc8L3VsPic7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wbC5idXR0b24obGFiZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDb2xvcicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYnJMaW5rQ29sb3InLFxuICAgICAgICAgICAgICAgICAgICBldmVudDogJ21ickJ0bkNvbG9yUHJldmVudCcsXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6ICFvcHRpb25zLmlzU2Vjb25kYXJ5Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdub3RlLW1ickxpbmtDb2xvcicsXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duOiBkcm9wZG93bixcbiAgICAgICAgICAgICAgICAgICAgbm9jYXJldDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChsYXlvdXRJbmZvKSB7XG5cbiAgICAgICAgICAgIHZhciBncm91cHMgPSBbXG4gICAgICAgICAgICAgICAgWydpbnNlcnQyJywgWydtYnJCdG5FeHRlbmRlZENvbG9yJ11dLFxuICAgICAgICAgICAgICAgIFsnaW5zZXJ0MycsIFsnbWJyQnRuQWRkJywgJ21ickJ0bk1vdmUnLCAnbWJyQnRuUmVtb3ZlJ11dXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1ickFwcENvcmUgIT0gJ3VuZGVmaW5lZCcpIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIE1vZGlmaWNhdGUgZ3JvdXBzIG9uIHN1bW1lcm5vdGUgYnV0dG9uIGluaXRcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBncm91cHNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZ3JvdXBzLjEgLSBncm91cFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nW119IGdyb3Vwcy4yIC0gYnV0dG9uc1xuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGUgLSB0YXJnZXQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGdyb3VwcyA9IG1ickFwcENvcmUuYXBwbHlGaWx0ZXIoJ3N1bW1lcm5vdGVNYWtlUG9wb3ZlcicsIGdyb3VwcywgbGF5b3V0SW5mby5lZGl0YWJsZSgpKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGxheW91dEluZm8uZWRpdG9yKCkuZGF0YSgnb3B0aW9ucycpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBrIGluIGdyb3Vwcykge1xuXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gZ3JvdXBzW2tdO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY3VzdG9tVG9vbGJhcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5jdXN0b21Ub29sYmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jdXN0b21Ub29sYmFyW2tleV0gIT0gJ29mZicpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ3JvdXBbMV0uaW5kZXhPZihrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgMCkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cFsxXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwWzFdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBncm91cFsxXS5jb25jYXQoJ21iclNob3dTaXRlQ29sb3JzJykubWFwKGZ1bmN0aW9uIChidG5OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnRuTmFtZSA9PSAnbWJyQnRuRXh0ZW5kZWRDb2xvcicpIGJ0bk5hbWUgPSAnbWJyQnRuQ29sb3JQcmV2ZW50JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ0bk5hbWUgPT0gJ21ickJ0bkNvbG9yJykgYnRuTmFtZSArPSAnUHJldmVudCc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1tkYXRhLWV2ZW50PVwiJyArIGJ0bk5hbWUgKyAnXCJdJztcbiAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCcpO1xuICAgICAgICAgICAgICAgICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkuc3VtbWVybm90ZSgncG9wb3Zlci5hZGRHcm91cCcsIGdyb3VwLCAnYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dEluZm8ucG9wb3ZlcigpLmZpbmQoc2VsZWN0b3IpLnRvb2x0aXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiAnYm9keScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnaG92ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50OiAndG9wJ1xuICAgICAgICAgICAgICAgICAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRvb2x0aXAoJ2hpZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IGV2ZW50c1xuICAgICAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBldmVudHMuaGVsbG8gIHJ1biBmdW5jdGlvbiB3aGVuIGJ1dHRvbiB0aGF0IGhhcyBhICdoZWxsbycgZXZlbnQgbmFtZSAgZmlyZXMgY2xpY2tcbiAgICAgICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZXZlbnRzLmhlbGxvRHJvcGRvd24gcnVuIGZ1bmN0aW9uIHdoZW4gYnV0dG9uIHRoYXQgaGFzIGEgJ2hlbGxvRHJvcGRvd24nIGV2ZW50IG5hbWUgIGZpcmVzIGNsaWNrXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV2ZW50cy5oZWxsb0ltYWdlIHJ1biBmdW5jdGlvbiB3aGVuIGJ1dHRvbiB0aGF0IGhhcyBhICdoZWxsb0ltYWdlJyBldmVudCBuYW1lICBmaXJlcyBjbGlja1xuICAgICAgICAgKi9cbiAgICAgICAgZXZlbnRzOiB7IC8vIGV2ZW50c1xuICAgICAgICAgICAgbWJyU2hvd1NpdGVDb2xvcnM6IGZ1bmN0aW9uIChldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IC8vIHByZXZlbnQgdG8gY2xvc2Ugb24gaWZyYW1lIGNsaWNrXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYnJBcHAgPSBnZXRNYnJBcHAoKTtcbiAgICAgICAgICAgICAgICAgICAgbWJyQXBwLm9wZW5UaGVtZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIG1ickFwcC5Ub29nbGVUaGVtZVNldHRpbmdzLnRhcmdldC4kZWxtIC8vIGhpZ2hsaWdodCBjb2xvcnMgaW4gI3RoZW1lLXNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnW2RhdGEtZ3JvdXAtbmFtZT1cImNvbG9yc1wiXScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYnJCdG5SZW1vdmU6IGZ1bmN0aW9uIChldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgZWRpdGFibGUgbm9kZVxuICAgICAgICAgICAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGlzTWVudSA9ICRlZGl0YWJsZS5oYXNDbGFzcygnbWJyLW1lbnUtaXRlbScpIHx8XG4gICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5oYXNDbGFzcygnbWJyLWVkaXRhYmxlLW1lbnUtaXRlbScpO1xuICAgICAgICAgICAgICAgIHZhciB1c2VQYXJlbnQgPSBpc01lbnUgfHxcbiAgICAgICAgICAgICAgICAgICAgJGVkaXRhYmxlLmF0dHIoJ2RhdGEtYXBwLWJ0bicpID09PSAncGFyZW50JztcbiAgICAgICAgICAgICAgICB2YXIgJHNpYmxpbmcgPSB1c2VQYXJlbnQgP1xuICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGUucGFyZW50KCkuc2libGluZ3MoJ2xpOmVxKDApJykuZmluZCgnPiBhJylcbiAgICAgICAgICAgICAgICAgICAgOiAkZWRpdGFibGUuc2libGluZ3MoJ1tkYXRhLWFwcC1idG5dOmVxKDApJyk7XG4gICAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSB1c2VQYXJlbnQgP1xuICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGUucGFyZW50cygnW2RhdGEtYXBwLWVkaXRdOmVxKDApJylcbiAgICAgICAgICAgICAgICAgICAgOiAkZWRpdGFibGUucGFyZW50KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb3BpZWQgZnJvbSBzdW1tZXJub3RlLmpzXG4gICAgICAgICAgICAgICAgdmFyIG1ickJ0blJlbW92ZVNpYmxpbmdzID0gdXNlUGFyZW50ID9cbiAgICAgICAgICAgICAgICAgICAgJGVkaXRhYmxlLnBhcmVudCgpLnNpYmxpbmdzKCdsaScpLmZpbmQoJz4gYScpXG4gICAgICAgICAgICAgICAgICAgIDogJGVkaXRhYmxlLnNpYmxpbmdzKCdidG4sIFtkYXRhLWFwcC1idG5dJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzTWVudSAmJiAhbWJyQnRuUmVtb3ZlU2libGluZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBFdmVudCBmb3IgdHJ5aW5nIHRvIHJlbW92ZSBsYXN0IGJ1dHRvbiBpbiBidXR0b25zIGxpc3RcbiAgICAgICAgICAgICAgICAgICAgICogQGV2ZW50IG1ickFwcCNyZW1vdmVMYXN0QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBtYnJBcHBGaXJlKFwicmVtb3ZlTGFzdEJ1dHRvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgaWYgKHVzZVBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGUuZGVzdHJveSgpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5kZXN0cm95KCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCRwYXJlbnQuaXMoJ1tkYXRhLWFwcC1lZGl0XScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIG1vYmlyaXNlIGNvcmVcbiAgICAgICAgICAgICAgICAgICAgJHBhcmVudC50cmlnZ2VyKCdkZWxldGUucml2ZXRzJyk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYnJCdG5BZGQ6IGZ1bmN0aW9uIChldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgZWRpdGFibGUgbm9kZVxuICAgICAgICAgICAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG4gICAgICAgICAgICAgICAgdmFyICRvbGRCdG4gPSAkZWRpdGFibGU7XG4gICAgICAgICAgICAgICAgdmFyIHVzZVBhcmVudCA9ICRlZGl0YWJsZS5oYXNDbGFzcygnbWJyLW1lbnUtaXRlbScpIHx8XG4gICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5oYXNDbGFzcygnbWJyLWVkaXRhYmxlLW1lbnUtaXRlbScpIHx8XG4gICAgICAgICAgICAgICAgICAgICRlZGl0YWJsZS5hdHRyKCdkYXRhLWFwcC1idG4nKSA9PT0gJ3BhcmVudCc7XG5cbiAgICAgICAgICAgICAgICBpZiAodXNlUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICRvbGRCdG4gPSAkZWRpdGFibGUucGFyZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gY2xvbmUgY3VycmVudCBidXR0b25cbiAgICAgICAgICAgICAgICB2YXIgJG5ld0J0biA9ICRvbGRCdG4uY2xvbmUoKTtcblxuICAgICAgICAgICAgICAgIC8vIGluc2VydCBjbG9uZSBhZnRlciBjdXJyZW50IGJ1dHRvblxuICAgICAgICAgICAgICAgICRvbGRCdG4uYWZ0ZXIoJG5ld0J0bik7XG4gICAgICAgICAgICAgICAgJG9sZEJ0bi5hZnRlcignICcpOyAvLyBzcGFjZSBiZXR3ZWVuIGJ1dHRvbnNcblxuICAgICAgICAgICAgICAgIGlmICh1c2VQYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgJG5ld0J0biA9ICRuZXdCdG4uZmluZCgnPiBhJyk7XG4gICAgICAgICAgICAgICAgICAgICRvbGRCdG4gPSAkb2xkQnRuLmZpbmQoJz4gYScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgY2xhc3NlcyBhbmQgYXR0cmlidXRlcyBmcm9tIGNsb25lZCBidXR0b25cbiAgICAgICAgICAgICAgICAkbmV3QnRuXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc3VtbWVybm90ZS1haXIgbm90ZS1haXItZWRpdG9yIG5vdGUtZWRpdGFibGUnKVxuICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignaWQgY29udGVudGVkaXRhYmxlJyk7XG5cbiAgICAgICAgICAgICAgICAvLyBpbml0IG5ldyBidXR0b25cbiAgICAgICAgICAgICAgICAkbmV3QnRuLnRyaWdnZXIoJ21vdXNlZG93bicpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWJyQnRuTW92ZTogZnVuY3Rpb24gKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8pIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgY3VycmVudCBlZGl0YWJsZSBub2RlXG4gICAgICAgICAgICAgICAgdmFyICRlZGl0YWJsZSA9IGxheW91dEluZm8uZWRpdGFibGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgJGN1ckJ0biA9ICRlZGl0YWJsZTtcblxuICAgICAgICAgICAgICAgIHZhciB1c2VQYXJlbnQgPSAkZWRpdGFibGUuaGFzQ2xhc3MoJ21ici1tZW51LWl0ZW0nKSB8fFxuICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGUuaGFzQ2xhc3MoJ21ici1lZGl0YWJsZS1tZW51LWl0ZW0nKSB8fFxuICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGUuYXR0cignZGF0YS1hcHAtYnRuJykgPT09ICdwYXJlbnQnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHVzZVBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAkY3VyQnRuID0gJGVkaXRhYmxlLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGdldCBwcmV2aW91cyBidXR0b25cbiAgICAgICAgICAgICAgICB2YXIgJHByZXZCdG4gPSAkY3VyQnRuLnByZXYodXNlUGFyZW50ID8gdW5kZWZpbmVkIDogJy5idG4nKTtcbiAgICAgICAgICAgICAgICBpZiAoISRwcmV2QnRuWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICRwcmV2QnRuID0gJGN1ckJ0bi5wcmV2KCdbZGF0YS1hcHAtYnRuXScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoISRwcmV2QnRuWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBtb3ZlIGN1cnJlbnQgYnV0dG9uIGJlZm9yZSBwcmV2b3VzXG4gICAgICAgICAgICAgICAgJHByZXZCdG4uYmVmb3JlKCRjdXJCdG4pO1xuICAgICAgICAgICAgICAgICRwcmV2QnRuLmJlZm9yZSgnICcpOyAvLyBzcGFjZSBiZXR3ZWVuIGJ1dHRvbnNcblxuICAgICAgICAgICAgICAgIGVkaXRvci5hZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICAgICAgICAgICAgICAkZWRpdGFibGUuZm9jdXMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYnJCdG5Db2xvcjogZnVuY3Rpb24gKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8sIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgZWRpdGFibGUgbm9kZVxuICAgICAgICAgICAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgYWxsIGNvbG9yIGNsYXNzZXNcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3NlcyA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBoYXNPdXRsaW5lQ29sb3JzID0gaGFzQnV0dG9uT3V0bGluZUNvbG9ycygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gYnV0dG9uQ29sb3JzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3NlcyArPSAnICcgKyBrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3V0bGluZUNvbG9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3NlcyArPSAnICcgKyBrICsgJy1vdXRsaW5lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRlZGl0YWJsZS5yZW1vdmVDbGFzcyhyZW1vdmVDbGFzc2VzKS5hZGRDbGFzcyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgLy8gZWRpdG9yLmZvbnRTaXplKGxheW91dEluZm8uZWRpdGFibGUoKSwgdmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1ickFwcCA9IGdldE1ickFwcCgpO1xuICAgICAgICAgICAgICAgIGlmIChtYnJBcHApIHtcbiAgICAgICAgICAgICAgICAgICAgJGVkaXRhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJpZ2dlcigkLkV2ZW50KCdjaGFuZ2UtYnV0dG9uLWNvbG9yJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRDbGFzc2VzOiByZW1vdmVDbGFzc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkQ2xhc3M6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jbG9zZXN0KCcuYXBwLWNvbXBvbmVudC1jb250ZW50JykuZmluZCgnPiAqJykudHJpZ2dlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICdjaGFuZ2VCdXR0b25Db2xvci5jYXJkcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWRpdGFibGVbMF0sIHZhbHVlLCByZW1vdmVDbGFzc2VzXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWRpdG9yLmFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICAgICAgICAgICAgLy8gZW11bGF0aW9uIG9mIFwib25DaGFuZ2VcIiBldmVudCBmb3Igc2F2aW5nIGluIHByb2plY3RcbiAgICAgICAgICAgICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkudHJpZ2dlcignYmx1cicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ickxpbmtDb2xvcjogZnVuY3Rpb24gKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8sIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyICRlZGl0YWJsZSA9IGxheW91dEluZm8uZWRpdGFibGUoKSxcbiAgICAgICAgICAgICAgICAgICAgJGxpbmsgPSAkKGVkaXRvci5jcmVhdGVSYW5nZSgkZWRpdGFibGUpLmNvbW1vbkFuY2VzdG9yKCkucGFyZW50Tm9kZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJGxpbmsuaXMoJ2EnKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYWxsIGNvbG9yIGNsYXNzZXNcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW92ZUNsYXNzZXMgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayBpbiBsaW5rQ29sb3JzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzZXMgKz0gJyAnICsgaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkKCRsaW5rLmNsb3Nlc3QoJ1tkYXRhLWFwcC1tb2Rlcm4tbWVudV0nKS5maW5kKCdhJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MocmVtb3ZlQ2xhc3NlcykuYWRkQ2xhc3ModmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlZGl0b3IuZm9udFNpemUobGF5b3V0SW5mby5lZGl0YWJsZSgpLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYnJCdG5Db2xvclByZXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-button.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-color.js":
/*!***********************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-color.js ***!
  \***********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  @module\n */\n(function (factory) {\n    /* global define */\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(function ($) {\n    if (typeof $.fn.spectrum === 'undefined') {\n        return false;\n    }\n\n    // template\n    var tmpl = $.summernote.renderer.getTemplate();\n\n    var $changedItem;\n    var $editable;\n    var changedEditor;\n    var $changedToolbar;\n\n    function colorChanged(color) {\n        changedEditor.beforeCommand($editable);\n\n        if ($changedItem && $changedItem.css) {\n            var prop = 'color';\n            if (window.mbrAppCore) {\n                window.mbrAppCore.addComponentStyles($changedItem, prop, color);\n            } else {\n                $changedItem.css(prop, color);\n            }\n\n            // restore range (focus summernote block and )\n            changedEditor.restoreRange($editable);\n        }\n        if ($changedToolbar && $changedToolbar.length) {\n            $changedToolbar.find('[data-name=mbrColor] .curTextColor').css('background', $.summernote.adaptColorForBg(color));\n        }\n\n        changedEditor.afterCommand($editable);\n    }\n\n    var $pickerDefault = $('<input type=\"text\" />').css({\n        display: 'none'\n    }).appendTo('body');\n    var $picker;\n\n    function initSpectrum() {\n        var APP;\n        var spectTimeout;\n        var palette = false;\n        if (mbrAppCore && mbrAppCore.APP) {\n            palette = mbrAppCore.APP.getThemeColorsSet(7);\n        }\n\n        var notInArray = function (el, arr) {\n            arr = arr.map(function (el) {\n                return el.toUpperCase()\n            });\n            if (arr.indexOf(el.toUpperCase()) == -1) return true;\n        };\n\n        (mbrAppCore && mbrAppCore.APP) && (APP = mbrAppCore.APP);\n        if (!APP) return;\n\n        $pickerDefault.spectrum('destroy').spectrum({\n            showButtons: false,\n            preferredFormat: 'hex',\n            showInput: true,\n            showPaletteOnly: true,\n            togglePaletteOnly: true,\n            togglePaletteMoreText: 'More >',\n            togglePaletteLessText: 'Less <',\n            maxSelectionSize: 1,\n            palette: palette,\n            move: function (color) {\n                (function (color) {\n                    clearTimeout(spectTimeout);\n                    spectTimeout = setTimeout(function () {\n                        colorChanged(color);\n                    }, 150);\n                }(color.toHexString()));\n            },\n            hide: function (color) {\n                if (!color) return;\n                var projColors;\n                if (projColors = APP.projectSettings.theme.additionalSetColors) {\n                    if (notInArray(color.toHexString(), projColors) && notInArray(color.toHexString(), APP.getThemeColorsSet(7)[0])) {\n                        if (projColors.length < 7) {\n                            projColors.push(color.toHexString());\n                        } else {\n                            projColors.unshift(color.toHexString());\n                            projColors.pop();\n                        }\n                    }\n                } else {\n                    if (notInArray(color.toHexString(), APP.getThemeColorsSet(7)[0])) {\n                        APP.projectSettings.theme.additionalSetColors = [color.toHexString()];\n                    } else {\n                        APP.projectSettings.theme.additionalSetColors = [];\n                    }\n                }\n                ;\n            }\n        });\n\n        $picker = $pickerDefault.next('.sp-replacer');\n        $picker.css({\n            position: 'absolute',\n            visibility: 'hidden',\n            opacity: 0,\n            width: 0,\n            height: 0,\n            overflow: 'hidden',\n            zIndex: -1000000\n        });\n        mbrAppCore.spectrumPicker = $picker;\n    }\n\n    /**\n     * @class plugin.mbr_btn\n     *\n     * Hello Plugin\n     */\n    $.summernote.addPlugin({\n        /** @property {String} name name of plugin */\n        name: 'mbrColor',\n\n        langs: {\n            'en-US': {\n                'mbrColor': {\n                    'mbrColor': 'Color'\n                }\n            }\n        },\n\n        /**\n         * @property {Object} buttons\n         * @property {Function} buttons.hello   function to make button\n         * @property {Function} buttons.helloDropdown   function to make button\n         * @property {Function} buttons.helloImage   function to make button\n         */\n        buttons: { // buttons\n            mbrColor: function (lang, options) {\n                return tmpl.button('<span class=\"curTextColor\"' +\n                    'style=\"border-radius: 100px;background: #000;' +\n                    'width: 25px;height: 25px;float: left;\"><span>', {\n                    event: 'mbrColor',\n                    name: 'mbrColor',\n                    title: lang.mbrColor.mbrColor,\n                    hide: false\n                });\n            }\n        },\n\n        /**\n         * @property {Object} events\n         * @property {Function} events.hello  run function when button that has a 'hello' event name  fires click\n         * @property {Function} events.helloDropdown run function when button that has a 'helloDropdown' event name  fires click\n         * @property {Function} events.helloImage run function when button that has a 'helloImage' event name  fires click\n         */\n        events: { // events\n            mbrColor: function (event, editor, layoutInfo) {\n\n                // Show colors\n                initSpectrum();\n\n                event.stopPropagation();\n                event.preventDefault();\n\n                changedEditor = editor;\n                $editable = layoutInfo.editable();\n\n                let $target = $(event.target);\n                editor.saveRange($editable);\n\n                // Get style of item to change color\n                let style = editor.currentStyle();\n\n                // Get element\n                for (let k in style.ancestors) {\n                    if (style.ancestors.hasOwnProperty(k)) {\n                        if (/P|DIV|UL|H1|H2|H3|H4|H5|H6|LABEL|TH|TD/g.test(style.ancestors[k].parentNode.tagName)) {\n                            $changedItem = $(style.ancestors[k].parentNode);\n                        }\n                    }\n                }\n\n                if (!$changedItem) {\n                    for (let n in style.ancestors) {\n                        if (style.ancestors.hasOwnProperty(n)) {\n                            if (style.ancestors[n].parentNode.tagName === 'A') {\n                                $changedItem = $(style.ancestors[n].parentNode);\n                            }\n                        }\n                    }\n                }\n\n                // check if menu item\n                if (!$changedItem) {\n                    $changedItem = $(style.ancestors[0]).parent();\n                }\n\n                if (!$changedItem) {\n                    return;\n                }\n\n                $changedToolbar = layoutInfo.popover();\n\n                // show Spectrum\n                let offsetPicker = $target.offset(),\n                    heightPicker = $target.outerHeight(true),\n                    widthPicker = $target.outerWidth(true);\n\n                $picker.css({\n                    top: offsetPicker.top,\n                    left: offsetPicker.left,\n                    height: heightPicker,\n                    width: widthPicker\n                });\n\n                let $curColor = $changedItem.css('color');\n\n                // change default spectrum color\n                $pickerDefault.spectrum('set', $curColor);\n\n                // show spectrum\n                $pickerDefault.spectrum('toggle');\n            }\n        }\n    });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWNvbG9yLmpzPzMwMzMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsSUFBMEM7QUFDbEQ7QUFDQSxRQUFRLGlDQUFPLENBQUMsMkNBQVEsQ0FBQyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQ25DLEtBQUssTUFBTSxFQUdOO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsT0FBTztBQUM5Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0Isc0JBQXNCLFNBQVM7QUFDL0Isc0JBQXNCLFNBQVM7QUFDL0Isc0JBQXNCLFNBQVM7QUFDL0I7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGlEQUFpRCxpQkFBaUI7QUFDbEUsaUNBQWlDLGFBQWEsWUFBWTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7O0FBRVQ7QUFDQSxzQkFBc0IsT0FBTztBQUM3QixzQkFBc0IsU0FBUztBQUMvQixzQkFBc0IsU0FBUztBQUMvQixzQkFBc0IsU0FBUztBQUMvQjtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9zdW1tZXJub3RlL3BsdWdpbi9zdW1tZXJub3RlLWV4dC1tYnItY29sb3IuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqICBAbW9kdWxlXG4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICAgIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsczogalF1ZXJ5XG4gICAgICAgIGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbiAoJCkge1xuICAgIGlmICh0eXBlb2YgJC5mbi5zcGVjdHJ1bSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIHRlbXBsYXRlXG4gICAgdmFyIHRtcGwgPSAkLnN1bW1lcm5vdGUucmVuZGVyZXIuZ2V0VGVtcGxhdGUoKTtcblxuICAgIHZhciAkY2hhbmdlZEl0ZW07XG4gICAgdmFyICRlZGl0YWJsZTtcbiAgICB2YXIgY2hhbmdlZEVkaXRvcjtcbiAgICB2YXIgJGNoYW5nZWRUb29sYmFyO1xuXG4gICAgZnVuY3Rpb24gY29sb3JDaGFuZ2VkKGNvbG9yKSB7XG4gICAgICAgIGNoYW5nZWRFZGl0b3IuYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICAgIGlmICgkY2hhbmdlZEl0ZW0gJiYgJGNoYW5nZWRJdGVtLmNzcykge1xuICAgICAgICAgICAgdmFyIHByb3AgPSAnY29sb3InO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYnJBcHBDb3JlKSB7XG4gICAgICAgICAgICAgICAgd2luZG93Lm1ickFwcENvcmUuYWRkQ29tcG9uZW50U3R5bGVzKCRjaGFuZ2VkSXRlbSwgcHJvcCwgY29sb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkY2hhbmdlZEl0ZW0uY3NzKHByb3AsIGNvbG9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcmVzdG9yZSByYW5nZSAoZm9jdXMgc3VtbWVybm90ZSBibG9jayBhbmQgKVxuICAgICAgICAgICAgY2hhbmdlZEVkaXRvci5yZXN0b3JlUmFuZ2UoJGVkaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGNoYW5nZWRUb29sYmFyICYmICRjaGFuZ2VkVG9vbGJhci5sZW5ndGgpIHtcbiAgICAgICAgICAgICRjaGFuZ2VkVG9vbGJhci5maW5kKCdbZGF0YS1uYW1lPW1ickNvbG9yXSAuY3VyVGV4dENvbG9yJykuY3NzKCdiYWNrZ3JvdW5kJywgJC5zdW1tZXJub3RlLmFkYXB0Q29sb3JGb3JCZyhjb2xvcikpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hhbmdlZEVkaXRvci5hZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9XG5cbiAgICB2YXIgJHBpY2tlckRlZmF1bHQgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiAvPicpLmNzcyh7XG4gICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgIH0pLmFwcGVuZFRvKCdib2R5Jyk7XG4gICAgdmFyICRwaWNrZXI7XG5cbiAgICBmdW5jdGlvbiBpbml0U3BlY3RydW0oKSB7XG4gICAgICAgIHZhciBBUFA7XG4gICAgICAgIHZhciBzcGVjdFRpbWVvdXQ7XG4gICAgICAgIHZhciBwYWxldHRlID0gZmFsc2U7XG4gICAgICAgIGlmIChtYnJBcHBDb3JlICYmIG1ickFwcENvcmUuQVBQKSB7XG4gICAgICAgICAgICBwYWxldHRlID0gbWJyQXBwQ29yZS5BUFAuZ2V0VGhlbWVDb2xvcnNTZXQoNyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbm90SW5BcnJheSA9IGZ1bmN0aW9uIChlbCwgYXJyKSB7XG4gICAgICAgICAgICBhcnIgPSBhcnIubWFwKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcnIuaW5kZXhPZihlbC50b1VwcGVyQ2FzZSgpKSA9PSAtMSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgKG1ickFwcENvcmUgJiYgbWJyQXBwQ29yZS5BUFApICYmIChBUFAgPSBtYnJBcHBDb3JlLkFQUCk7XG4gICAgICAgIGlmICghQVBQKSByZXR1cm47XG5cbiAgICAgICAgJHBpY2tlckRlZmF1bHQuc3BlY3RydW0oJ2Rlc3Ryb3knKS5zcGVjdHJ1bSh7XG4gICAgICAgICAgICBzaG93QnV0dG9uczogZmFsc2UsXG4gICAgICAgICAgICBwcmVmZXJyZWRGb3JtYXQ6ICdoZXgnLFxuICAgICAgICAgICAgc2hvd0lucHV0OiB0cnVlLFxuICAgICAgICAgICAgc2hvd1BhbGV0dGVPbmx5OiB0cnVlLFxuICAgICAgICAgICAgdG9nZ2xlUGFsZXR0ZU9ubHk6IHRydWUsXG4gICAgICAgICAgICB0b2dnbGVQYWxldHRlTW9yZVRleHQ6ICdNb3JlID4nLFxuICAgICAgICAgICAgdG9nZ2xlUGFsZXR0ZUxlc3NUZXh0OiAnTGVzcyA8JyxcbiAgICAgICAgICAgIG1heFNlbGVjdGlvblNpemU6IDEsXG4gICAgICAgICAgICBwYWxldHRlOiBwYWxldHRlLFxuICAgICAgICAgICAgbW92ZTogZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc3BlY3RUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgc3BlY3RUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckNoYW5nZWQoY29sb3IpO1xuICAgICAgICAgICAgICAgICAgICB9LCAxNTApO1xuICAgICAgICAgICAgICAgIH0oY29sb3IudG9IZXhTdHJpbmcoKSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICAgICAgICAgIGlmICghY29sb3IpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgcHJvakNvbG9ycztcbiAgICAgICAgICAgICAgICBpZiAocHJvakNvbG9ycyA9IEFQUC5wcm9qZWN0U2V0dGluZ3MudGhlbWUuYWRkaXRpb25hbFNldENvbG9ycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobm90SW5BcnJheShjb2xvci50b0hleFN0cmluZygpLCBwcm9qQ29sb3JzKSAmJiBub3RJbkFycmF5KGNvbG9yLnRvSGV4U3RyaW5nKCksIEFQUC5nZXRUaGVtZUNvbG9yc1NldCg3KVswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9qQ29sb3JzLmxlbmd0aCA8IDcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qQ29sb3JzLnB1c2goY29sb3IudG9IZXhTdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2pDb2xvcnMudW5zaGlmdChjb2xvci50b0hleFN0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qQ29sb3JzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdEluQXJyYXkoY29sb3IudG9IZXhTdHJpbmcoKSwgQVBQLmdldFRoZW1lQ29sb3JzU2V0KDcpWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBQLnByb2plY3RTZXR0aW5ncy50aGVtZS5hZGRpdGlvbmFsU2V0Q29sb3JzID0gW2NvbG9yLnRvSGV4U3RyaW5nKCldO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBQLnByb2plY3RTZXR0aW5ncy50aGVtZS5hZGRpdGlvbmFsU2V0Q29sb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAkcGlja2VyID0gJHBpY2tlckRlZmF1bHQubmV4dCgnLnNwLXJlcGxhY2VyJyk7XG4gICAgICAgICRwaWNrZXIuY3NzKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICB6SW5kZXg6IC0xMDAwMDAwXG4gICAgICAgIH0pO1xuICAgICAgICBtYnJBcHBDb3JlLnNwZWN0cnVtUGlja2VyID0gJHBpY2tlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAY2xhc3MgcGx1Z2luLm1icl9idG5cbiAgICAgKlxuICAgICAqIEhlbGxvIFBsdWdpblxuICAgICAqL1xuICAgICQuc3VtbWVybm90ZS5hZGRQbHVnaW4oe1xuICAgICAgICAvKiogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgbmFtZSBvZiBwbHVnaW4gKi9cbiAgICAgICAgbmFtZTogJ21ickNvbG9yJyxcblxuICAgICAgICBsYW5nczoge1xuICAgICAgICAgICAgJ2VuLVVTJzoge1xuICAgICAgICAgICAgICAgICdtYnJDb2xvcic6IHtcbiAgICAgICAgICAgICAgICAgICAgJ21ickNvbG9yJzogJ0NvbG9yJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3BlcnR5IHtPYmplY3R9IGJ1dHRvbnNcbiAgICAgICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gYnV0dG9ucy5oZWxsbyAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG9Ecm9wZG93biAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG9JbWFnZSAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBidXR0b25zOiB7IC8vIGJ1dHRvbnNcbiAgICAgICAgICAgIG1ickNvbG9yOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0bXBsLmJ1dHRvbignPHNwYW4gY2xhc3M9XCJjdXJUZXh0Q29sb3JcIicgK1xuICAgICAgICAgICAgICAgICAgICAnc3R5bGU9XCJib3JkZXItcmFkaXVzOiAxMDBweDtiYWNrZ3JvdW5kOiAjMDAwOycgK1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGg6IDI1cHg7aGVpZ2h0OiAyNXB4O2Zsb2F0OiBsZWZ0O1wiPjxzcGFuPicsIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdtYnJDb2xvcicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYnJDb2xvcicsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBsYW5nLm1ickNvbG9yLm1ickNvbG9yLFxuICAgICAgICAgICAgICAgICAgICBoaWRlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gZXZlbnRzXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGV2ZW50cy5oZWxsbyAgcnVuIGZ1bmN0aW9uIHdoZW4gYnV0dG9uIHRoYXQgaGFzIGEgJ2hlbGxvJyBldmVudCBuYW1lICBmaXJlcyBjbGlja1xuICAgICAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBldmVudHMuaGVsbG9Ecm9wZG93biBydW4gZnVuY3Rpb24gd2hlbiBidXR0b24gdGhhdCBoYXMgYSAnaGVsbG9Ecm9wZG93bicgZXZlbnQgbmFtZSAgZmlyZXMgY2xpY2tcbiAgICAgICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZXZlbnRzLmhlbGxvSW1hZ2UgcnVuIGZ1bmN0aW9uIHdoZW4gYnV0dG9uIHRoYXQgaGFzIGEgJ2hlbGxvSW1hZ2UnIGV2ZW50IG5hbWUgIGZpcmVzIGNsaWNrXG4gICAgICAgICAqL1xuICAgICAgICBldmVudHM6IHsgLy8gZXZlbnRzXG4gICAgICAgICAgICBtYnJDb2xvcjogZnVuY3Rpb24gKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8pIHtcblxuICAgICAgICAgICAgICAgIC8vIFNob3cgY29sb3JzXG4gICAgICAgICAgICAgICAgaW5pdFNwZWN0cnVtKCk7XG5cbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgY2hhbmdlZEVkaXRvciA9IGVkaXRvcjtcbiAgICAgICAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG5cbiAgICAgICAgICAgICAgICBsZXQgJHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2F2ZVJhbmdlKCRlZGl0YWJsZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgc3R5bGUgb2YgaXRlbSB0byBjaGFuZ2UgY29sb3JcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGUgPSBlZGl0b3IuY3VycmVudFN0eWxlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgZWxlbWVudFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgaW4gc3R5bGUuYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZS5hbmNlc3RvcnMuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgvUHxESVZ8VUx8SDF8SDJ8SDN8SDR8SDV8SDZ8TEFCRUx8VEh8VEQvZy50ZXN0KHN0eWxlLmFuY2VzdG9yc1trXS5wYXJlbnROb2RlLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNoYW5nZWRJdGVtID0gJChzdHlsZS5hbmNlc3RvcnNba10ucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoISRjaGFuZ2VkSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBuIGluIHN0eWxlLmFuY2VzdG9ycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlLmFuY2VzdG9ycy5oYXNPd25Qcm9wZXJ0eShuKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZS5hbmNlc3RvcnNbbl0ucGFyZW50Tm9kZS50YWdOYW1lID09PSAnQScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNoYW5nZWRJdGVtID0gJChzdHlsZS5hbmNlc3RvcnNbbl0ucGFyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgbWVudSBpdGVtXG4gICAgICAgICAgICAgICAgaWYgKCEkY2hhbmdlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgJGNoYW5nZWRJdGVtID0gJChzdHlsZS5hbmNlc3RvcnNbMF0pLnBhcmVudCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghJGNoYW5nZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkY2hhbmdlZFRvb2xiYXIgPSBsYXlvdXRJbmZvLnBvcG92ZXIoKTtcblxuICAgICAgICAgICAgICAgIC8vIHNob3cgU3BlY3RydW1cbiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0UGlja2VyID0gJHRhcmdldC5vZmZzZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UGlja2VyID0gJHRhcmdldC5vdXRlckhlaWdodCh0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGhQaWNrZXIgPSAkdGFyZ2V0Lm91dGVyV2lkdGgodHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAkcGlja2VyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0UGlja2VyLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0UGlja2VyLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0UGlja2VyLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGhQaWNrZXJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGxldCAkY3VyQ29sb3IgPSAkY2hhbmdlZEl0ZW0uY3NzKCdjb2xvcicpO1xuXG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIGRlZmF1bHQgc3BlY3RydW0gY29sb3JcbiAgICAgICAgICAgICAgICAkcGlja2VyRGVmYXVsdC5zcGVjdHJ1bSgnc2V0JywgJGN1ckNvbG9yKTtcblxuICAgICAgICAgICAgICAgIC8vIHNob3cgc3BlY3RydW1cbiAgICAgICAgICAgICAgICAkcGlja2VyRGVmYXVsdC5zcGVjdHJ1bSgndG9nZ2xlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-color.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-fonts.js":
/*!***********************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-fonts.js ***!
  \***********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  @module\n */\n(function (factory) {\n  /* global define */\n  if (true) {\n    // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(function ($) {\n  // template\n  var tmpl = $.summernote.renderer.getTemplate();\n  // var range = $.summernote.core.range;\n  // var editor = $.summernote.eventHandler.getEditor();\n\n  var fontSizes = [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 30, 32, 36, 46, 48, 60, 72, 80, 84, 100];\n\n  // see app-themes.js\n  function getFonts() {\n    if(!mbrAppCore && !mbrAppCore.APP && !mbrAppCore.APP.getAccesibleFonts)\n      return [];\n\n    return mbrAppCore.APP.getAccesibleFonts() ||[];\n  }\n\n\n  // return ancestor to accept font styles\n  function getAncestor(ancestors) {\n    var item;\n\n    // check if some of alloved tags\n    for (var k in ancestors) {\n      if (/P|DIV|UL|H1|H2|H3|H4|H5|H6/g.test(ancestors[k].tagName)) {\n        item = ancestors[k];\n        continue;\n      }\n    }\n    if (!item) {\n      for (var n in ancestors) {\n        if (ancestors[n].tagName === 'A') {\n          item = ancestors[n];\n          continue;\n        }\n      }\n    }\n\n    return item || $(ancestors[0]).parent()[0];\n  }\n\n\n  function changeProps(item, prop, value, googleLink) {\n    if (window.mbrAppCore) {\n      window.mbrAppCore.addComponentStyles($(item), prop, value, googleLink);\n    } else {\n      $(item).css(prop, value);\n    }\n  }\n\n  /**\n   * @class plugin.mbr_btn\n   *\n   * Hello Plugin\n   */\n  $.summernote.addPlugin({\n    /** @property {String} name name of plugin */\n    name: 'mbrFonts',\n\n    /**\n     * @property {Object} buttons\n     * @property {Function} buttons.hello   function to make button\n     * @property {Function} buttons.helloDropdown   function to make button\n     * @property {Function} buttons.helloImage   function to make button\n     */\n    buttons: {\n      mbrFonts: function () {\n        // Google Fonts\n        var items = '';\n        var fonts = getFonts();\n        for (var k = 0; k < fonts.length; k++) {\n          items += '<li><a data-event=\"mbrFonts\" href=\"javascript:void(0);\"' +\n                      'data-value=\"' + fonts[k].name + '\" ' +\n                      'data-css=\"' + fonts[k].css + '\" ' +\n                      'data-url=\"' + fonts[k].url + '\" ' +\n                      'data-slug=\"' + k + '\" ' +\n                      'style=\"font-family: ' + fonts[k].css + ';\">' +\n                      '<i class=\"mbr-icon-check\"></i> ' + fonts[k].name +\n                    '</a></li>';\n        }\n\n        var label = '<span class=\"note-current-mbrFonts\">Roboto</span>';\n        var dropdown = '<ul class=\"dropdown-menu note-check\">' + items + '</ul>';\n\n        return tmpl.button(label, {\n          title: 'Fonts',\n          hide: true,\n          dropdown : dropdown,\n          event: 'mbrFontsPrevent',\n          name: 'mbrFonts'\n        });\n      },\n      mbrFontSize: function () {\n        var items = '';\n        for (var k in fontSizes) {\n          items += '<li><a data-event=\"mbrFontSize\" href=\"javascript:void(0);\"' +\n                      'data-value=\"' + fontSizes[k] + '\">' +\n                      '<i class=\"mbr-icon-check\"></i> ' + fontSizes[k] +\n                    '</a></li>';\n        }\n\n        var label = '<span class=\"note-current-mbrFontSize\">11</span>';\n        var dropdown = '<ul class=\"dropdown-menu note-check\" style=\"min-width: 105px;\"> ' + items + ' </ul>';\n\n        return tmpl.button(label, {\n          title: 'Font Size',\n          hide: true,\n          dropdown : dropdown,\n          event: 'mbrFontsPrevent',\n          name: 'mbrFontSize'\n        });\n      }\n    },\n\n    /**\n     * @property {Object} events\n     * @property {Function} events.hello  run function when button that has a 'hello' event name  fires click\n     * @property {Function} events.helloDropdown run function when button that has a 'helloDropdown' event name  fires click\n     * @property {Function} events.helloImage run function when button that has a 'helloImage' event name  fires click\n     */\n    events: { // events\n      mbrFonts: function (event, editor, layoutInfo) {\n\n        // focus recovery (fix for dropdown)\n        layoutInfo.editable().focus();\n\n        var style = editor.currentStyle();\n        var newFont = $(event.target).attr('data-css');\n        var googleLink = $(event.target).attr('data-url');\n        var item = getAncestor(style.ancestors);\n\n        if (item) {\n          changeProps(item, 'font-family', newFont, googleLink);\n        }\n      },\n      mbrFontSize: function (event, editor, layoutInfo) {\n\n        // focus recovery (fix for dropdown)\n        layoutInfo.editable().focus();\n\n        var style = editor.currentStyle();\n        var newFontSize = $(event.target).attr('data-value');\n        var item = getAncestor(style.ancestors);\n\n        if (item) {\n          changeProps(item, 'font-size', newFontSize + 'px');\n        }\n      },\n      mbrFontsPrevent: function (event) {\n        event.preventDefault();\n      }\n    }\n  });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWZvbnRzLmpzPzVkNTMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sSUFBMEM7QUFDaEQ7QUFDQSxJQUFJLGlDQUFPLENBQUMsMkNBQVEsQ0FBQyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQy9CLEdBQUcsTUFBTSxFQUdOO0FBQ0gsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjs7QUFFQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCLGtCQUFrQixTQUFTO0FBQzNCLGtCQUFrQixTQUFTO0FBQzNCLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQkFBa0I7QUFDekMsMEVBQTBFO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUZBQXFGOztBQUVyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLOztBQUVMO0FBQ0Esa0JBQWtCLE9BQU87QUFDekIsa0JBQWtCLFNBQVM7QUFDM0Isa0JBQWtCLFNBQVM7QUFDM0Isa0JBQWtCLFNBQVM7QUFDM0I7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUMiLCJmaWxlIjoiLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWZvbnRzLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQG1vZHVsZVxuICovXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgLyogZ2xvYmFsIGRlZmluZSAqL1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHM6IGpRdWVyeVxuICAgIGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gIH1cbn0oZnVuY3Rpb24gKCQpIHtcbiAgLy8gdGVtcGxhdGVcbiAgdmFyIHRtcGwgPSAkLnN1bW1lcm5vdGUucmVuZGVyZXIuZ2V0VGVtcGxhdGUoKTtcbiAgLy8gdmFyIHJhbmdlID0gJC5zdW1tZXJub3RlLmNvcmUucmFuZ2U7XG4gIC8vIHZhciBlZGl0b3IgPSAkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyLmdldEVkaXRvcigpO1xuXG4gIHZhciBmb250U2l6ZXMgPSBbOCwgOSwgMTAsIDExLCAxMiwgMTMsIDE0LCAxNSwgMTYsIDE3LCAxOCwgMTksIDIwLCAyMSwgMjIsIDIzLCAyNCwgMjUsIDMwLCAzMiwgMzYsIDQ2LCA0OCwgNjAsIDcyLCA4MCwgODQsIDEwMF07XG5cbiAgLy8gc2VlIGFwcC10aGVtZXMuanNcbiAgZnVuY3Rpb24gZ2V0Rm9udHMoKSB7XG4gICAgaWYoIW1ickFwcENvcmUgJiYgIW1ickFwcENvcmUuQVBQICYmICFtYnJBcHBDb3JlLkFQUC5nZXRBY2Nlc2libGVGb250cylcbiAgICAgIHJldHVybiBbXTtcblxuICAgIHJldHVybiBtYnJBcHBDb3JlLkFQUC5nZXRBY2Nlc2libGVGb250cygpIHx8W107XG4gIH1cblxuXG4gIC8vIHJldHVybiBhbmNlc3RvciB0byBhY2NlcHQgZm9udCBzdHlsZXNcbiAgZnVuY3Rpb24gZ2V0QW5jZXN0b3IoYW5jZXN0b3JzKSB7XG4gICAgdmFyIGl0ZW07XG5cbiAgICAvLyBjaGVjayBpZiBzb21lIG9mIGFsbG92ZWQgdGFnc1xuICAgIGZvciAodmFyIGsgaW4gYW5jZXN0b3JzKSB7XG4gICAgICBpZiAoL1B8RElWfFVMfEgxfEgyfEgzfEg0fEg1fEg2L2cudGVzdChhbmNlc3RvcnNba10udGFnTmFtZSkpIHtcbiAgICAgICAgaXRlbSA9IGFuY2VzdG9yc1trXTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghaXRlbSkge1xuICAgICAgZm9yICh2YXIgbiBpbiBhbmNlc3RvcnMpIHtcbiAgICAgICAgaWYgKGFuY2VzdG9yc1tuXS50YWdOYW1lID09PSAnQScpIHtcbiAgICAgICAgICBpdGVtID0gYW5jZXN0b3JzW25dO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW0gfHwgJChhbmNlc3RvcnNbMF0pLnBhcmVudCgpWzBdO1xuICB9XG5cblxuICBmdW5jdGlvbiBjaGFuZ2VQcm9wcyhpdGVtLCBwcm9wLCB2YWx1ZSwgZ29vZ2xlTGluaykge1xuICAgIGlmICh3aW5kb3cubWJyQXBwQ29yZSkge1xuICAgICAgd2luZG93Lm1ickFwcENvcmUuYWRkQ29tcG9uZW50U3R5bGVzKCQoaXRlbSksIHByb3AsIHZhbHVlLCBnb29nbGVMaW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJChpdGVtKS5jc3MocHJvcCwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAY2xhc3MgcGx1Z2luLm1icl9idG5cbiAgICpcbiAgICogSGVsbG8gUGx1Z2luXG4gICAqL1xuICAkLnN1bW1lcm5vdGUuYWRkUGx1Z2luKHtcbiAgICAvKiogQHByb3BlcnR5IHtTdHJpbmd9IG5hbWUgbmFtZSBvZiBwbHVnaW4gKi9cbiAgICBuYW1lOiAnbWJyRm9udHMnLFxuXG4gICAgLyoqXG4gICAgICogQHByb3BlcnR5IHtPYmplY3R9IGJ1dHRvbnNcbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBidXR0b25zLmhlbGxvICAgZnVuY3Rpb24gdG8gbWFrZSBidXR0b25cbiAgICAgKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBidXR0b25zLmhlbGxvRHJvcGRvd24gICBmdW5jdGlvbiB0byBtYWtlIGJ1dHRvblxuICAgICAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IGJ1dHRvbnMuaGVsbG9JbWFnZSAgIGZ1bmN0aW9uIHRvIG1ha2UgYnV0dG9uXG4gICAgICovXG4gICAgYnV0dG9uczoge1xuICAgICAgbWJyRm9udHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gR29vZ2xlIEZvbnRzXG4gICAgICAgIHZhciBpdGVtcyA9ICcnO1xuICAgICAgICB2YXIgZm9udHMgPSBnZXRGb250cygpO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGZvbnRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgaXRlbXMgKz0gJzxsaT48YSBkYXRhLWV2ZW50PVwibWJyRm9udHNcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdmFsdWU9XCInICsgZm9udHNba10ubmFtZSArICdcIiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1jc3M9XCInICsgZm9udHNba10uY3NzICsgJ1wiICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXVybD1cIicgKyBmb250c1trXS51cmwgKyAnXCIgJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtc2x1Zz1cIicgKyBrICsgJ1wiICcgK1xuICAgICAgICAgICAgICAgICAgICAgICdzdHlsZT1cImZvbnQtZmFtaWx5OiAnICsgZm9udHNba10uY3NzICsgJztcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCJtYnItaWNvbi1jaGVja1wiPjwvaT4gJyArIGZvbnRzW2tdLm5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAnPC9hPjwvbGk+JztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsYWJlbCA9ICc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1tYnJGb250c1wiPlJvYm90bzwvc3Bhbj4nO1xuICAgICAgICB2YXIgZHJvcGRvd24gPSAnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBub3RlLWNoZWNrXCI+JyArIGl0ZW1zICsgJzwvdWw+JztcblxuICAgICAgICByZXR1cm4gdG1wbC5idXR0b24obGFiZWwsIHtcbiAgICAgICAgICB0aXRsZTogJ0ZvbnRzJyxcbiAgICAgICAgICBoaWRlOiB0cnVlLFxuICAgICAgICAgIGRyb3Bkb3duIDogZHJvcGRvd24sXG4gICAgICAgICAgZXZlbnQ6ICdtYnJGb250c1ByZXZlbnQnLFxuICAgICAgICAgIG5hbWU6ICdtYnJGb250cydcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgbWJyRm9udFNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gJyc7XG4gICAgICAgIGZvciAodmFyIGsgaW4gZm9udFNpemVzKSB7XG4gICAgICAgICAgaXRlbXMgKz0gJzxsaT48YSBkYXRhLWV2ZW50PVwibWJyRm9udFNpemVcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiJyArXG4gICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtdmFsdWU9XCInICsgZm9udFNpemVzW2tdICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cIm1ici1pY29uLWNoZWNrXCI+PC9pPiAnICsgZm9udFNpemVzW2tdICtcbiAgICAgICAgICAgICAgICAgICAgJzwvYT48L2xpPic7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGFiZWwgPSAnPHNwYW4gY2xhc3M9XCJub3RlLWN1cnJlbnQtbWJyRm9udFNpemVcIj4xMTwvc3Bhbj4nO1xuICAgICAgICB2YXIgZHJvcGRvd24gPSAnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBub3RlLWNoZWNrXCIgc3R5bGU9XCJtaW4td2lkdGg6IDEwNXB4O1wiPiAnICsgaXRlbXMgKyAnIDwvdWw+JztcblxuICAgICAgICByZXR1cm4gdG1wbC5idXR0b24obGFiZWwsIHtcbiAgICAgICAgICB0aXRsZTogJ0ZvbnQgU2l6ZScsXG4gICAgICAgICAgaGlkZTogdHJ1ZSxcbiAgICAgICAgICBkcm9wZG93biA6IGRyb3Bkb3duLFxuICAgICAgICAgIGV2ZW50OiAnbWJyRm9udHNQcmV2ZW50JyxcbiAgICAgICAgICBuYW1lOiAnbWJyRm9udFNpemUnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gZXZlbnRzXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZXZlbnRzLmhlbGxvICBydW4gZnVuY3Rpb24gd2hlbiBidXR0b24gdGhhdCBoYXMgYSAnaGVsbG8nIGV2ZW50IG5hbWUgIGZpcmVzIGNsaWNrXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZXZlbnRzLmhlbGxvRHJvcGRvd24gcnVuIGZ1bmN0aW9uIHdoZW4gYnV0dG9uIHRoYXQgaGFzIGEgJ2hlbGxvRHJvcGRvd24nIGV2ZW50IG5hbWUgIGZpcmVzIGNsaWNrXG4gICAgICogQHByb3BlcnR5IHtGdW5jdGlvbn0gZXZlbnRzLmhlbGxvSW1hZ2UgcnVuIGZ1bmN0aW9uIHdoZW4gYnV0dG9uIHRoYXQgaGFzIGEgJ2hlbGxvSW1hZ2UnIGV2ZW50IG5hbWUgIGZpcmVzIGNsaWNrXG4gICAgICovXG4gICAgZXZlbnRzOiB7IC8vIGV2ZW50c1xuICAgICAgbWJyRm9udHM6IGZ1bmN0aW9uIChldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7XG5cbiAgICAgICAgLy8gZm9jdXMgcmVjb3ZlcnkgKGZpeCBmb3IgZHJvcGRvd24pXG4gICAgICAgIGxheW91dEluZm8uZWRpdGFibGUoKS5mb2N1cygpO1xuXG4gICAgICAgIHZhciBzdHlsZSA9IGVkaXRvci5jdXJyZW50U3R5bGUoKTtcbiAgICAgICAgdmFyIG5ld0ZvbnQgPSAkKGV2ZW50LnRhcmdldCkuYXR0cignZGF0YS1jc3MnKTtcbiAgICAgICAgdmFyIGdvb2dsZUxpbmsgPSAkKGV2ZW50LnRhcmdldCkuYXR0cignZGF0YS11cmwnKTtcbiAgICAgICAgdmFyIGl0ZW0gPSBnZXRBbmNlc3RvcihzdHlsZS5hbmNlc3RvcnMpO1xuXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgY2hhbmdlUHJvcHMoaXRlbSwgJ2ZvbnQtZmFtaWx5JywgbmV3Rm9udCwgZ29vZ2xlTGluayk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtYnJGb250U2l6ZTogZnVuY3Rpb24gKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8pIHtcblxuICAgICAgICAvLyBmb2N1cyByZWNvdmVyeSAoZml4IGZvciBkcm9wZG93bilcbiAgICAgICAgbGF5b3V0SW5mby5lZGl0YWJsZSgpLmZvY3VzKCk7XG5cbiAgICAgICAgdmFyIHN0eWxlID0gZWRpdG9yLmN1cnJlbnRTdHlsZSgpO1xuICAgICAgICB2YXIgbmV3Rm9udFNpemUgPSAkKGV2ZW50LnRhcmdldCkuYXR0cignZGF0YS12YWx1ZScpO1xuICAgICAgICB2YXIgaXRlbSA9IGdldEFuY2VzdG9yKHN0eWxlLmFuY2VzdG9ycyk7XG5cbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBjaGFuZ2VQcm9wcyhpdGVtLCAnZm9udC1zaXplJywgbmV3Rm9udFNpemUgKyAncHgnKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1ickZvbnRzUHJldmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-fonts.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-iconfont.js":
/*!**************************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-iconfont.js ***!
  \**************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\r\n/**\r\n * @class plugin.iconFont\r\n *\r\n * Icon Font plugin for Summernote\r\n *\r\n * ### use a plugin in toolbar\r\n * ```\r\n *\t$("#editor").summernote({\r\n *\t...\r\n *\ttoolbar : [\r\n *\t\t["insert", ["iconFont"]]\r\n *\t]\r\n *\t...\r\n *\t});\r\n * ```\r\n */\r\n\r\n(function (factory) {\r\n\t/* global define */\r\n\tif (true) {\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "jquery")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t} else {}\r\n}(function ($) {\r\n\t\'use strict\';\r\n\r\n\r\n\r\n\t// core functions: range, dom, template\r\n\tvar tmpl = $.summernote.renderer.getTemplate();\r\n\tvar range = $.summernote.core.range;\r\n\tvar dom = $.summernote.core.dom;\r\n\tvar modules = $.summernote.eventHandler.modules;\r\n\tvar handler = $.summernote.eventHandler;\r\n\r\n\t$.extend($.summernote.options.icons,{\r\n\t\ticonFont:{\r\n\t\t\ticonFont: "sun" // Font icon name\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tfunction summernoteIconRequest(node, parent, callback_node){\r\n\t\tif (window.mbrAppCore && window.mbrAppCore.summernoteIconRequest) {\r\n\t\t\twindow.mbrAppCore.summernoteIconRequest(node, parent, callback_node);\r\n\t\t}\r\n        else {\r\n        \tconsole.log("Error: no summernoteIconRequest handler");\r\n        \tif (callback_node) callback_node();\r\n        }\r\n\t}\r\n\r\n\r\n\t$.summernote.addPlugin({\r\n\r\n\t\t// @property {String} name name of plugin\r\n\t\tname: "iconFont",\r\n\r\n\t\tlangs:{\r\n\t\t\t"en-US":{\r\n\t\t\t\ticonFont:{\r\n\t\t\t\t\ticonFont: "Insert icon"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t// @property {Object} buttons\r\n\t\t// @property {function(object): string} buttons.iconFont\r\n\t\tbuttons: {\r\n\t\t\ticonFont: function (lang, options) {\r\n\t\t\t\treturn tmpl.iconButton(options.iconPrefix + options.icons.iconFont.iconFont, {\r\n\t\t\t\t\tevent: "insertIconFontDialog",\r\n\t\t\t\t\ttitle: lang.iconFont.iconFont,\r\n\t\t\t\t\thide: true\r\n\t\t\t\t}).replace("<button",\'<button data-toggle="tooltip"\');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t// @property {Object} events\r\n\t\t// @property {Function} events.insertIconFontDialog\r\n\t\tevents: {\r\n\r\n\t\t\tinsertIconFontDialog: function (event, editor, layoutInfo) { // console.log("insertIconFontDialog (layoutInfo, editable):", layoutInfo, layoutInfo.editable());\r\n\r\n\t\t\t\t// try to hide popover\r\n\t\t\t\tlayoutInfo.popover().hide();\r\n\r\n\t\t\t\tsetTimeout(function(){ // tempory fix for first time fail insertation\r\n\r\n\t\t\t\t\tvar $editor = layoutInfo.editor(),\r\n\t\t\t\t\t\t$dialog = layoutInfo.dialog(),\r\n\t\t\t\t\t\t$editable = layoutInfo.editable(), // editable block\r\n\t\t\t\t\t\tlinkInfo = editor.getLinkInfo($editable),\r\n\t\t\t\t\t\toptions = $editor.data(\'options\');\r\n\r\n\t\t\t\t\tif (!$("#" + $editable.attr("id")).length) return;\r\n\t\t\t\t\t//console.log($editable);\r\n\r\n\r\n\t\t\t\t\t// save current range\r\n\t\t\t\t\t$editable.focus();\r\n\t\t\t\t\teditor.saveRange($editable);\r\n\r\n\t\t\t\t\tvar rng = range.create();\r\n\t\t\t\t\tvar currentIcon = rng.ec; // * @param {Node} sc - start container // * @param {Number} so - start offset // * @param {Node} ec - end container // * @param {Number} eo - end offset\r\n\t\t\t\t\tif (!currentIcon.tagName)\r\n\t\t\t\t\t\tcurrentIcon = currentIcon.parentNode;\r\n\r\n\t\t\t\t\tvar toBegin = $editable.attr("data-app-btn");\r\n\t\t\t\t\tif (toBegin){\r\n\t\t\t\t\t\tcurrentIcon = $editable.children().get(0); // get first childen as previous node\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsummernoteIconRequest(currentIcon, $editable.get(0), function(node){\r\n\r\n\t\t\t\t\t\t// restore range\r\n\t\t\t\t\t\teditor.restoreRange($editable);\r\n\r\n\t\t\t\t\t\t// restore popover\r\n\t\t\t\t\t\tlayoutInfo.popover().show();\r\n\r\n\t\t\t\t\t\tif (!arguments.length)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t// apply node\r\n\t\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\t\t// for button insert to the begining\r\n\t\t\t\t\t\t\tif (toBegin){\r\n\t\t\t\t\t\t\t\teditor.prependNode($editable, node);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// for ordinary text insert at the cursor\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t// console.log("insertNode:", node, rng, $editable, currentIcon);\r\n\t\t\t\t\t\t\t\tif (currentIcon)\r\n\t\t\t\t\t\t\t\t\teditor.insertAfter($editable, node, currentIcon);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\teditor.insertAtCursor($editable, node);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// if old node is iconfont-node then remove\r\n\t\t\t\t\t\tif (currentIcon)\r\n\t\t\t\t\t\t\t$(currentIcon).remove();\r\n\r\n\r\n\t\t\t\t\t\t// $editable blur\r\n\t\t\t\t\t\t$editable.blur(); // need to re-init editor, fix bug with repeat insert\r\n\r\n\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t},100);\r\n\r\n\t\t\t} // insertIconFontDialog\r\n\t\t} // events\r\n\t}); // $.summernote.addPlugin\r\n\r\n}));\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWljb25mb250LmpzP2Y5ZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUssSUFBMEM7QUFDL0M7QUFDQSxFQUFFLGlDQUFPLENBQUMsMkNBQVEsQ0FBQyxvQ0FBRSxPQUFPO0FBQUE7QUFBQTtBQUFBLG9HQUFDO0FBQzdCLEVBQUUsTUFBTSxFQUdOO0FBQ0YsQ0FBQztBQUNEOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQSxnQkFBZ0IsT0FBTztBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOzs7QUFHSCxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7OztBQUdILGdCQUFnQixPQUFPO0FBQ3ZCLGdCQUFnQixTQUFTO0FBQ3pCOztBQUVBLCtEQUErRDs7QUFFL0Q7QUFDQTs7QUFFQSwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLGNBQWMsS0FBSyxtQ0FBbUMsT0FBTyxnQ0FBZ0MsS0FBSyxpQ0FBaUMsT0FBTztBQUN4SztBQUNBOztBQUVBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0EsdUJBQXVCOztBQUV2QixNQUFNOzs7QUFHTixLQUFLOztBQUVMLElBQUk7QUFDSixHQUFHO0FBQ0gsRUFBRSxFQUFFOztBQUVKLENBQUMiLCJmaWxlIjoiLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWljb25mb250LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8qKlxyXG4gKiBAY2xhc3MgcGx1Z2luLmljb25Gb250XHJcbiAqXHJcbiAqIEljb24gRm9udCBwbHVnaW4gZm9yIFN1bW1lcm5vdGVcclxuICpcclxuICogIyMjIHVzZSBhIHBsdWdpbiBpbiB0b29sYmFyXHJcbiAqIGBgYFxyXG4gKlx0JChcIiNlZGl0b3JcIikuc3VtbWVybm90ZSh7XHJcbiAqXHQuLi5cclxuICpcdHRvb2xiYXIgOiBbXHJcbiAqXHRcdFtcImluc2VydFwiLCBbXCJpY29uRm9udFwiXV1cclxuICpcdF1cclxuICpcdC4uLlxyXG4gKlx0fSk7XHJcbiAqIGBgYFxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG5cdC8qIGdsb2JhbCBkZWZpbmUgKi9cclxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcclxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuXHRcdGRlZmluZShbXCJqcXVlcnlcIl0sIGZhY3RvcnkpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBCcm93c2VyIGdsb2JhbHM6IGpRdWVyeVxyXG5cdFx0ZmFjdG9yeSh3aW5kb3cualF1ZXJ5KTtcclxuXHR9XHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cclxuXHJcblx0Ly8gY29yZSBmdW5jdGlvbnM6IHJhbmdlLCBkb20sIHRlbXBsYXRlXHJcblx0dmFyIHRtcGwgPSAkLnN1bW1lcm5vdGUucmVuZGVyZXIuZ2V0VGVtcGxhdGUoKTtcclxuXHR2YXIgcmFuZ2UgPSAkLnN1bW1lcm5vdGUuY29yZS5yYW5nZTtcclxuXHR2YXIgZG9tID0gJC5zdW1tZXJub3RlLmNvcmUuZG9tO1xyXG5cdHZhciBtb2R1bGVzID0gJC5zdW1tZXJub3RlLmV2ZW50SGFuZGxlci5tb2R1bGVzO1xyXG5cdHZhciBoYW5kbGVyID0gJC5zdW1tZXJub3RlLmV2ZW50SGFuZGxlcjtcclxuXHJcblx0JC5leHRlbmQoJC5zdW1tZXJub3RlLm9wdGlvbnMuaWNvbnMse1xyXG5cdFx0aWNvbkZvbnQ6e1xyXG5cdFx0XHRpY29uRm9udDogXCJzdW5cIiAvLyBGb250IGljb24gbmFtZVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHJcblx0ZnVuY3Rpb24gc3VtbWVybm90ZUljb25SZXF1ZXN0KG5vZGUsIHBhcmVudCwgY2FsbGJhY2tfbm9kZSl7XHJcblx0XHRpZiAod2luZG93Lm1ickFwcENvcmUgJiYgd2luZG93Lm1ickFwcENvcmUuc3VtbWVybm90ZUljb25SZXF1ZXN0KSB7XHJcblx0XHRcdHdpbmRvdy5tYnJBcHBDb3JlLnN1bW1lcm5vdGVJY29uUmVxdWVzdChub2RlLCBwYXJlbnQsIGNhbGxiYWNrX25vZGUpO1xyXG5cdFx0fVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgIFx0Y29uc29sZS5sb2coXCJFcnJvcjogbm8gc3VtbWVybm90ZUljb25SZXF1ZXN0IGhhbmRsZXJcIik7XHJcbiAgICAgICAgXHRpZiAoY2FsbGJhY2tfbm9kZSkgY2FsbGJhY2tfbm9kZSgpO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG5cclxuXHQkLnN1bW1lcm5vdGUuYWRkUGx1Z2luKHtcclxuXHJcblx0XHQvLyBAcHJvcGVydHkge1N0cmluZ30gbmFtZSBuYW1lIG9mIHBsdWdpblxyXG5cdFx0bmFtZTogXCJpY29uRm9udFwiLFxyXG5cclxuXHRcdGxhbmdzOntcclxuXHRcdFx0XCJlbi1VU1wiOntcclxuXHRcdFx0XHRpY29uRm9udDp7XHJcblx0XHRcdFx0XHRpY29uRm9udDogXCJJbnNlcnQgaWNvblwiXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvLyBAcHJvcGVydHkge09iamVjdH0gYnV0dG9uc1xyXG5cdFx0Ly8gQHByb3BlcnR5IHtmdW5jdGlvbihvYmplY3QpOiBzdHJpbmd9IGJ1dHRvbnMuaWNvbkZvbnRcclxuXHRcdGJ1dHRvbnM6IHtcclxuXHRcdFx0aWNvbkZvbnQ6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRtcGwuaWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmljb25Gb250Lmljb25Gb250LCB7XHJcblx0XHRcdFx0XHRldmVudDogXCJpbnNlcnRJY29uRm9udERpYWxvZ1wiLFxyXG5cdFx0XHRcdFx0dGl0bGU6IGxhbmcuaWNvbkZvbnQuaWNvbkZvbnQsXHJcblx0XHRcdFx0XHRoaWRlOiB0cnVlXHJcblx0XHRcdFx0fSkucmVwbGFjZShcIjxidXR0b25cIiwnPGJ1dHRvbiBkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIicpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvLyBAcHJvcGVydHkge09iamVjdH0gZXZlbnRzXHJcblx0XHQvLyBAcHJvcGVydHkge0Z1bmN0aW9ufSBldmVudHMuaW5zZXJ0SWNvbkZvbnREaWFsb2dcclxuXHRcdGV2ZW50czoge1xyXG5cclxuXHRcdFx0aW5zZXJ0SWNvbkZvbnREaWFsb2c6IGZ1bmN0aW9uIChldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7IC8vIGNvbnNvbGUubG9nKFwiaW5zZXJ0SWNvbkZvbnREaWFsb2cgKGxheW91dEluZm8sIGVkaXRhYmxlKTpcIiwgbGF5b3V0SW5mbywgbGF5b3V0SW5mby5lZGl0YWJsZSgpKTtcclxuXHJcblx0XHRcdFx0Ly8gdHJ5IHRvIGhpZGUgcG9wb3ZlclxyXG5cdFx0XHRcdGxheW91dEluZm8ucG9wb3ZlcigpLmhpZGUoKTtcclxuXHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpeyAvLyB0ZW1wb3J5IGZpeCBmb3IgZmlyc3QgdGltZSBmYWlsIGluc2VydGF0aW9uXHJcblxyXG5cdFx0XHRcdFx0dmFyICRlZGl0b3IgPSBsYXlvdXRJbmZvLmVkaXRvcigpLFxyXG5cdFx0XHRcdFx0XHQkZGlhbG9nID0gbGF5b3V0SW5mby5kaWFsb2coKSxcclxuXHRcdFx0XHRcdFx0JGVkaXRhYmxlID0gbGF5b3V0SW5mby5lZGl0YWJsZSgpLCAvLyBlZGl0YWJsZSBibG9ja1xyXG5cdFx0XHRcdFx0XHRsaW5rSW5mbyA9IGVkaXRvci5nZXRMaW5rSW5mbygkZWRpdGFibGUpLFxyXG5cdFx0XHRcdFx0XHRvcHRpb25zID0gJGVkaXRvci5kYXRhKCdvcHRpb25zJyk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCEkKFwiI1wiICsgJGVkaXRhYmxlLmF0dHIoXCJpZFwiKSkubGVuZ3RoKSByZXR1cm47XHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCRlZGl0YWJsZSk7XHJcblxyXG5cclxuXHRcdFx0XHRcdC8vIHNhdmUgY3VycmVudCByYW5nZVxyXG5cdFx0XHRcdFx0JGVkaXRhYmxlLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRlZGl0b3Iuc2F2ZVJhbmdlKCRlZGl0YWJsZSk7XHJcblxyXG5cdFx0XHRcdFx0dmFyIHJuZyA9IHJhbmdlLmNyZWF0ZSgpO1xyXG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRJY29uID0gcm5nLmVjOyAvLyAqIEBwYXJhbSB7Tm9kZX0gc2MgLSBzdGFydCBjb250YWluZXIgLy8gKiBAcGFyYW0ge051bWJlcn0gc28gLSBzdGFydCBvZmZzZXQgLy8gKiBAcGFyYW0ge05vZGV9IGVjIC0gZW5kIGNvbnRhaW5lciAvLyAqIEBwYXJhbSB7TnVtYmVyfSBlbyAtIGVuZCBvZmZzZXRcclxuXHRcdFx0XHRcdGlmICghY3VycmVudEljb24udGFnTmFtZSlcclxuXHRcdFx0XHRcdFx0Y3VycmVudEljb24gPSBjdXJyZW50SWNvbi5wYXJlbnROb2RlO1xyXG5cclxuXHRcdFx0XHRcdHZhciB0b0JlZ2luID0gJGVkaXRhYmxlLmF0dHIoXCJkYXRhLWFwcC1idG5cIik7XHJcblx0XHRcdFx0XHRpZiAodG9CZWdpbil7XHJcblx0XHRcdFx0XHRcdGN1cnJlbnRJY29uID0gJGVkaXRhYmxlLmNoaWxkcmVuKCkuZ2V0KDApOyAvLyBnZXQgZmlyc3QgY2hpbGRlbiBhcyBwcmV2aW91cyBub2RlXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c3VtbWVybm90ZUljb25SZXF1ZXN0KGN1cnJlbnRJY29uLCAkZWRpdGFibGUuZ2V0KDApLCBmdW5jdGlvbihub2RlKXtcclxuXHJcblx0XHRcdFx0XHRcdC8vIHJlc3RvcmUgcmFuZ2VcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnJlc3RvcmVSYW5nZSgkZWRpdGFibGUpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gcmVzdG9yZSBwb3BvdmVyXHJcblx0XHRcdFx0XHRcdGxheW91dEluZm8ucG9wb3ZlcigpLnNob3coKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aClcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBhcHBseSBub2RlXHJcblx0XHRcdFx0XHRcdGlmIChub2RlKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gZm9yIGJ1dHRvbiBpbnNlcnQgdG8gdGhlIGJlZ2luaW5nXHJcblx0XHRcdFx0XHRcdFx0aWYgKHRvQmVnaW4pe1xyXG5cdFx0XHRcdFx0XHRcdFx0ZWRpdG9yLnByZXBlbmROb2RlKCRlZGl0YWJsZSwgbm9kZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBmb3Igb3JkaW5hcnkgdGV4dCBpbnNlcnQgYXQgdGhlIGN1cnNvclxyXG5cdFx0XHRcdFx0XHRcdGVsc2V7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcImluc2VydE5vZGU6XCIsIG5vZGUsIHJuZywgJGVkaXRhYmxlLCBjdXJyZW50SWNvbik7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY3VycmVudEljb24pXHJcblx0XHRcdFx0XHRcdFx0XHRcdGVkaXRvci5pbnNlcnRBZnRlcigkZWRpdGFibGUsIG5vZGUsIGN1cnJlbnRJY29uKTtcclxuXHRcdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWRpdG9yLmluc2VydEF0Q3Vyc29yKCRlZGl0YWJsZSwgbm9kZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBpZiBvbGQgbm9kZSBpcyBpY29uZm9udC1ub2RlIHRoZW4gcmVtb3ZlXHJcblx0XHRcdFx0XHRcdGlmIChjdXJyZW50SWNvbilcclxuXHRcdFx0XHRcdFx0XHQkKGN1cnJlbnRJY29uKS5yZW1vdmUoKTtcclxuXHJcblxyXG5cdFx0XHRcdFx0XHQvLyAkZWRpdGFibGUgYmx1clxyXG5cdFx0XHRcdFx0XHQkZWRpdGFibGUuYmx1cigpOyAvLyBuZWVkIHRvIHJlLWluaXQgZWRpdG9yLCBmaXggYnVnIHdpdGggcmVwZWF0IGluc2VydFxyXG5cclxuXHRcdFx0XHRcdH0pXHJcblxyXG5cclxuXHRcdFx0XHR9LDEwMCk7XHJcblxyXG5cdFx0XHR9IC8vIGluc2VydEljb25Gb250RGlhbG9nXHJcblx0XHR9IC8vIGV2ZW50c1xyXG5cdH0pOyAvLyAkLnN1bW1lcm5vdGUuYWRkUGx1Z2luXHJcblxyXG59KSk7XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-iconfont.js\n')},"./web/app/builder/summernote/plugin/summernote-ext-mbr-link.js":
/*!**********************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-link.js ***!
  \**********************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  @module\n */\n(function(factory) {\n    /* global define */\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(function($) {\n    // template\n    var tmpl = $.summernote.renderer.getTemplate();\n    var range = $.summernote.core.range;\n    var list = $.summernote.core.list;\n    var dom = $.summernote.core.dom;\n\n    /**\n     * @class plugin.mbrLink\n     */\n    $.summernote.addPlugin({\n        /** @property {String} name name of plugin */\n        name: 'mbrLink',\n        \n        langs: {\n            'en-US': {\n                'mbrLink': {\n                    'mbrLink': 'Link'\n                }\n            }\n        },\n\n        buttons: { // buttons\n            mbrLink: function(lang, options) {\n                return tmpl.iconButton('mbr-icon-link', {\n                    event: 'showMbrLinkDialog',\n                    name: 'mbrLink',\n                    title: lang.mbrLink.mbrLink,\n                    hide: true\n                });\n            }\n        },\n\n        events: {\n            showMbrLinkDialog: function(event, editor, layoutInfo) {\n                var linkParams = {\n                    'editor': editor,\n                    'layoutInfo': layoutInfo,\n                    'range': range,\n                    'list': list,\n                    'dom': dom\n                };\n\n                window.mbrAppCore.APP.showMbrLinkDialog(linkParams);\n            }\n        }\n    });\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLWxpbmsuanM/ZDdiOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxJQUEwQztBQUNsRDtBQUNBLFFBQVEsaUNBQU8sQ0FBQywyQ0FBUSxDQUFDLG9DQUFFLE9BQU87QUFBQTtBQUFBO0FBQUEsb0dBQUM7QUFDbkMsS0FBSyxNQUFNLEVBR047QUFDTCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixPQUFPO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDIiwiZmlsZSI6Ii4vd2ViL2FwcC9idWlsZGVyL3N1bW1lcm5vdGUvcGx1Z2luL3N1bW1lcm5vdGUtZXh0LW1ici1saW5rLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQG1vZHVsZVxuICovXG4oZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsczogalF1ZXJ5XG4gICAgICAgIGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbigkKSB7XG4gICAgLy8gdGVtcGxhdGVcbiAgICB2YXIgdG1wbCA9ICQuc3VtbWVybm90ZS5yZW5kZXJlci5nZXRUZW1wbGF0ZSgpO1xuICAgIHZhciByYW5nZSA9ICQuc3VtbWVybm90ZS5jb3JlLnJhbmdlO1xuICAgIHZhciBsaXN0ID0gJC5zdW1tZXJub3RlLmNvcmUubGlzdDtcbiAgICB2YXIgZG9tID0gJC5zdW1tZXJub3RlLmNvcmUuZG9tO1xuXG4gICAgLyoqXG4gICAgICogQGNsYXNzIHBsdWdpbi5tYnJMaW5rXG4gICAgICovXG4gICAgJC5zdW1tZXJub3RlLmFkZFBsdWdpbih7XG4gICAgICAgIC8qKiBAcHJvcGVydHkge1N0cmluZ30gbmFtZSBuYW1lIG9mIHBsdWdpbiAqL1xuICAgICAgICBuYW1lOiAnbWJyTGluaycsXG4gICAgICAgIFxuICAgICAgICBsYW5nczoge1xuICAgICAgICAgICAgJ2VuLVVTJzoge1xuICAgICAgICAgICAgICAgICdtYnJMaW5rJzoge1xuICAgICAgICAgICAgICAgICAgICAnbWJyTGluayc6ICdMaW5rJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBidXR0b25zOiB7IC8vIGJ1dHRvbnNcbiAgICAgICAgICAgIG1ickxpbms6IGZ1bmN0aW9uKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wbC5pY29uQnV0dG9uKCdtYnItaWNvbi1saW5rJywge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogJ3Nob3dNYnJMaW5rRGlhbG9nJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21ickxpbmsnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGFuZy5tYnJMaW5rLm1ickxpbmssXG4gICAgICAgICAgICAgICAgICAgIGhpZGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICAgIHNob3dNYnJMaW5rRGlhbG9nOiBmdW5jdGlvbihldmVudCwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmtQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICdlZGl0b3InOiBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgICdsYXlvdXRJbmZvJzogbGF5b3V0SW5mbyxcbiAgICAgICAgICAgICAgICAgICAgJ3JhbmdlJzogcmFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICdsaXN0JzogbGlzdCxcbiAgICAgICAgICAgICAgICAgICAgJ2RvbSc6IGRvbVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB3aW5kb3cubWJyQXBwQ29yZS5BUFAuc2hvd01ickxpbmtEaWFsb2cobGlua1BhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-link.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-multiline.js":
/*!***************************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-multiline.js ***!
  \***************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  @module\n */\n(function (factory) {\n  /* global define */\n  if (true) {\n    // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(function ($) {\n  \n  // core functions: range, dom\n  var range = $.summernote.core.range;\n  var dom = $.summernote.core.dom;\n\n  /**\n   * @class plugin.multiline\n   * \n   * Multiline Plugin.\n   * Disables the addition of new paragraphs if \"data-multiline\" attribute for node editor is not set.\n   */\n  $.summernote.addPlugin({\n    /** @property {String} name name of plugin */\n    name: 'mbrMultiline',\n    events: {\n      \n      ENTER: function (e, editor, layoutInfo) {\n\n        var $editor = layoutInfo.editor();\n        var isInlineBlock = $editor.is('p, span, a, .btn, button, strong, b, em, i, small, code, label');\n        var isMultilineContent = $editor.data('multiline') || '' === $editor.data('multiline');\n        \n        if (isMultilineContent && !isInlineBlock) {\n          // apply default enter key\n          layoutInfo.holder().summernote('insertParagraph');\n        } else {\n\n          var $editable = layoutInfo.editable();\n          editor.beforeCommand($editable);\n\n          var rng = range.create().deleteContents();\n          var info = dom.splitPoint(rng.getStartPoint(), false);\n          var node = dom.create('br');\n\n          if (info.rightNode) {\n            info.rightNode.parentNode.insertBefore(node, info.rightNode);\n          } else {\n            info.container.appendChild(node);\n            // bug fix: sometimes insertion is not working when cursor located at the end point of editor\n            if ($editor[0] === info.container) {\n              info.container.appendChild(dom.create('br'));\n            }\n          }\n\n          rng.normalize();\n\n          (function (node) {\n          \n            var ec = node;\n            var eo = dom.nodeLength(ec);\n\n            if (dom.isVoid(ec)) {\n              eo = dom.listPrev(ec).length;\n              ec = ec.parentNode;\n            }\n\n            return range.create(ec, eo, ec, eo);\n\n          })(node).select();\n\n          editor.afterCommand($editable);\n\n        }\n\n        // prevent ENTER key\n        return true;\n\n      }\n    \n    },\n\n    // HACK FOR OLD CORE!!!\n    // TODO: remove it after core updated to qwebengine\n    init: function (layoutInfo) {\n      var $note = layoutInfo.holder();\n\n      function removeBR(e) {\n        var deleteKey = e.keyCode === 8 || e.keyCode === 46;\n        if (deleteKey && $note.text().length === 0) {\n          var br = $note.find('br');\n          if (br.length === 1) {\n            br.remove();\n          }\n          var p = $note.find('p');\n          if (p.length === 1) {\n            p.remove();\n          }\n        }\n      }\n\n      $note.on('keyup.summernote', removeBR);\n      removeBR({\n        keyCode: 8\n      });\n    }\n\n  });\n\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLW11bHRpbGluZS5qcz8wZjJjIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQTBDO0FBQ2hEO0FBQ0EsSUFBSSxpQ0FBTyxDQUFDLDJDQUFRLENBQUMsb0NBQUUsT0FBTztBQUFBO0FBQUE7QUFBQSxvR0FBQztBQUMvQixHQUFHLE1BQU0sRUFHTjtBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFdBQVc7O0FBRVg7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHOztBQUVILENBQUMiLCJmaWxlIjoiLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLW11bHRpbGluZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzOiBqUXVlcnlcbiAgICBmYWN0b3J5KHdpbmRvdy5qUXVlcnkpO1xuICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gIFxuICAvLyBjb3JlIGZ1bmN0aW9uczogcmFuZ2UsIGRvbVxuICB2YXIgcmFuZ2UgPSAkLnN1bW1lcm5vdGUuY29yZS5yYW5nZTtcbiAgdmFyIGRvbSA9ICQuc3VtbWVybm90ZS5jb3JlLmRvbTtcblxuICAvKipcbiAgICogQGNsYXNzIHBsdWdpbi5tdWx0aWxpbmVcbiAgICogXG4gICAqIE11bHRpbGluZSBQbHVnaW4uXG4gICAqIERpc2FibGVzIHRoZSBhZGRpdGlvbiBvZiBuZXcgcGFyYWdyYXBocyBpZiBcImRhdGEtbXVsdGlsaW5lXCIgYXR0cmlidXRlIGZvciBub2RlIGVkaXRvciBpcyBub3Qgc2V0LlxuICAgKi9cbiAgJC5zdW1tZXJub3RlLmFkZFBsdWdpbih7XG4gICAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgcGx1Z2luICovXG4gICAgbmFtZTogJ21ick11bHRpbGluZScsXG4gICAgZXZlbnRzOiB7XG4gICAgICBcbiAgICAgIEVOVEVSOiBmdW5jdGlvbiAoZSwgZWRpdG9yLCBsYXlvdXRJbmZvKSB7XG5cbiAgICAgICAgdmFyICRlZGl0b3IgPSBsYXlvdXRJbmZvLmVkaXRvcigpO1xuICAgICAgICB2YXIgaXNJbmxpbmVCbG9jayA9ICRlZGl0b3IuaXMoJ3AsIHNwYW4sIGEsIC5idG4sIGJ1dHRvbiwgc3Ryb25nLCBiLCBlbSwgaSwgc21hbGwsIGNvZGUsIGxhYmVsJyk7XG4gICAgICAgIHZhciBpc011bHRpbGluZUNvbnRlbnQgPSAkZWRpdG9yLmRhdGEoJ211bHRpbGluZScpIHx8ICcnID09PSAkZWRpdG9yLmRhdGEoJ211bHRpbGluZScpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzTXVsdGlsaW5lQ29udGVudCAmJiAhaXNJbmxpbmVCbG9jaykge1xuICAgICAgICAgIC8vIGFwcGx5IGRlZmF1bHQgZW50ZXIga2V5XG4gICAgICAgICAgbGF5b3V0SW5mby5ob2xkZXIoKS5zdW1tZXJub3RlKCdpbnNlcnRQYXJhZ3JhcGgnKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG4gICAgICAgICAgZWRpdG9yLmJlZm9yZUNvbW1hbmQoJGVkaXRhYmxlKTtcblxuICAgICAgICAgIHZhciBybmcgPSByYW5nZS5jcmVhdGUoKS5kZWxldGVDb250ZW50cygpO1xuICAgICAgICAgIHZhciBpbmZvID0gZG9tLnNwbGl0UG9pbnQocm5nLmdldFN0YXJ0UG9pbnQoKSwgZmFsc2UpO1xuICAgICAgICAgIHZhciBub2RlID0gZG9tLmNyZWF0ZSgnYnInKTtcblxuICAgICAgICAgIGlmIChpbmZvLnJpZ2h0Tm9kZSkge1xuICAgICAgICAgICAgaW5mby5yaWdodE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgaW5mby5yaWdodE5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmZvLmNvbnRhaW5lci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIC8vIGJ1ZyBmaXg6IHNvbWV0aW1lcyBpbnNlcnRpb24gaXMgbm90IHdvcmtpbmcgd2hlbiBjdXJzb3IgbG9jYXRlZCBhdCB0aGUgZW5kIHBvaW50IG9mIGVkaXRvclxuICAgICAgICAgICAgaWYgKCRlZGl0b3JbMF0gPT09IGluZm8uY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgIGluZm8uY29udGFpbmVyLmFwcGVuZENoaWxkKGRvbS5jcmVhdGUoJ2JyJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJuZy5ub3JtYWxpemUoKTtcblxuICAgICAgICAgIChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGVjID0gbm9kZTtcbiAgICAgICAgICAgIHZhciBlbyA9IGRvbS5ub2RlTGVuZ3RoKGVjKTtcblxuICAgICAgICAgICAgaWYgKGRvbS5pc1ZvaWQoZWMpKSB7XG4gICAgICAgICAgICAgIGVvID0gZG9tLmxpc3RQcmV2KGVjKS5sZW5ndGg7XG4gICAgICAgICAgICAgIGVjID0gZWMucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJhbmdlLmNyZWF0ZShlYywgZW8sIGVjLCBlbyk7XG5cbiAgICAgICAgICB9KShub2RlKS5zZWxlY3QoKTtcblxuICAgICAgICAgIGVkaXRvci5hZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gcHJldmVudCBFTlRFUiBrZXlcbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgIH1cbiAgICBcbiAgICB9LFxuXG4gICAgLy8gSEFDSyBGT1IgT0xEIENPUkUhISFcbiAgICAvLyBUT0RPOiByZW1vdmUgaXQgYWZ0ZXIgY29yZSB1cGRhdGVkIHRvIHF3ZWJlbmdpbmVcbiAgICBpbml0OiBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgdmFyICRub3RlID0gbGF5b3V0SW5mby5ob2xkZXIoKTtcblxuICAgICAgZnVuY3Rpb24gcmVtb3ZlQlIoZSkge1xuICAgICAgICB2YXIgZGVsZXRlS2V5ID0gZS5rZXlDb2RlID09PSA4IHx8IGUua2V5Q29kZSA9PT0gNDY7XG4gICAgICAgIGlmIChkZWxldGVLZXkgJiYgJG5vdGUudGV4dCgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHZhciBiciA9ICRub3RlLmZpbmQoJ2JyJyk7XG4gICAgICAgICAgaWYgKGJyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgYnIucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBwID0gJG5vdGUuZmluZCgncCcpO1xuICAgICAgICAgIGlmIChwLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcC5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJG5vdGUub24oJ2tleXVwLnN1bW1lcm5vdGUnLCByZW1vdmVCUik7XG4gICAgICByZW1vdmVCUih7XG4gICAgICAgIGtleUNvZGU6IDhcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxufSkpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-multiline.js\n")},"./web/app/builder/summernote/plugin/summernote-ext-mbr-short-mode.js":
/*!****************************************************************************!*\
  !*** ./web/app/builder/summernote/plugin/summernote-ext-mbr-short-mode.js ***!
  \****************************************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n *  @module\n */\n(function(factory){\n    /* global define */\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}(function($){\n\n    'use strict';\n\n    var isShortMode = true;\n\n    function decorator(obj, key, callback) {\n        var func = obj[key];\n        obj[key] = function() {\n            var args = Array.prototype.slice.call(arguments);\n            args.unshift(func, arguments);\n            return callback.apply(this, args);\n        };\n    }\n\n    function getSelectorForOptionalButtons(airPopover) {\n        var items = [];\n        for (var i = 0; i < airPopover.length; i++) {\n            var group = airPopover[i];\n            if (!group[2] || !group[2].optional) continue;\n            var optional = group[2].optional;\n            if (typeof optional == 'boolean') {\n                items.push('.note-' + group[0]);\n            } else {\n                for (var j = 0; j < optional.length; j++) {\n                    items.push('[data-name=\"' + optional[j] + '\"]');\n                }\n            }\n        }\n        return items.join(',');\n    }\n\n    function update(layoutInfo) {\n\n        var options = layoutInfo.editor().data('options'),\n            $popover = layoutInfo.popover(),\n            $editable = layoutInfo.editable(),\n            styleInfo = $.summernote.eventHandler.modules.editor.currentStyle($editable);\n\n        if (options.shortMode) {\n\n            var items = getSelectorForOptionalButtons(options.airPopover);\n            if (!items) return;\n\n            var $button = $popover.find('[data-name=\"mbrShortModeMore\"]');\n\n            if (!$button.length) {\n                $editable.summernote('popover.addGroup', ['mbrShortModeMore', ['mbrShortModeMore']]);\n                $button = $popover.find('[data-name=\"mbrShortModeMore\"]').tooltip({\n                    container: 'body',\n                    trigger: 'hover',\n                    placement: 'top'\n                });\n            }\n\n            if (isShortMode) {\n                $button.find('i').removeClass('mbr-icon-angle-left').addClass('mbr-icon-angle-right');\n                $button.attr('data-original-title', 'More');\n                $popover.find(items).addClass('hidden');\n            } else {\n                $button.find('i').removeClass('mbr-icon-angle-right').addClass('mbr-icon-angle-left');\n                $button.attr('data-original-title', 'Less');\n                $popover.find(items).removeClass('hidden');\n            }\n\n        }\n\n        $.summernote.eventHandler.updateStyleInfo(styleInfo, layoutInfo);\n\n    }\n\n    // decorator for $.summernote.eventHandler.modules.popover.addGroup\n    decorator($.summernote.eventHandler.modules.popover, 'addGroup', function(func, args, $holder, group, types, index){\n\n        var options = $holder.data('options');\n        options.airPopover = options.airPopover || [];\n        options.airPopover.push(group);\n\n        var $popover = $('#note-popover-' + $holder.attr('id').replace('note-editor-', ''));\n\n        if (group[0] == 'dropdownMenu') {\n            var items = getSelectorForOptionalButtons(options.airPopover);\n            if ($holder.is('[data-button]')) {\n                $popover.find('.note-mbrShortModeMore').show();\n                if (items && options.shortMode && isShortMode) {\n                    $popover.find(items).addClass('hidden');\n                }\n            } /*else {\n                $popover.find('.note-mbrShortModeMore').hide();\n                if (items) {\n                    $popover.find(items).removeClass('hidden');\n                }\n            }*/\n        }\n\n        (types || 'link,image,button,air').split(',').forEach(function(type){\n            var index = $popover.find('.note-' + type + '-popover .note-mbrShortModeMore').prevAll().length;\n            func.call(this, $holder, group, type, index || -1);\n        }, this);\n\n        if (options.shortMode && isShortMode && group[2] && group[2].optional) {\n            var items = getSelectorForOptionalButtons([group]);\n            if (items) {\n                $popover.find(items).addClass('hidden');\n            }\n        }\n\n    });\n\n    // decorator for $.summernote.eventHandler.updateStyleInfo\n    decorator($.summernote.eventHandler, 'updateStyleInfo', function(func, args, styleInfo, layoutInfo){\n\n        func.apply(this, args);\n\n        var isBtnPopover = styleInfo.anchor && /btn|mbr-menu-item|mbr-editable-menu-item/g.test(styleInfo.anchor.className);\n        if (!isBtnPopover && styleInfo.anchor) {\n            isBtnPopover = !!$(styleInfo.anchor).attr('data-app-btn');\n        }\n\n        var $group = layoutInfo.popover().find('.note-mbrShortModeMore');\n\n        if (isBtnPopover) {\n            $group.removeClass('hidden');\n            return;\n        }\n\n        var isCollapsed = styleInfo.range && styleInfo.range.isCollapsed();\n        var isLink = isCollapsed && styleInfo.anchor;\n\n        if (!isCollapsed || isLink) {\n            $group.addClass('hidden');\n        } else {\n            $group.removeClass('hidden');\n        }\n\n    });\n\n\n\n    var PLUGIN_NAME;\n\n    // core functions: template\n    var tmpl = $.summernote.renderer.getTemplate();\n\n    $.summernote.addPlugin((function(plugin){\n\n        if (!plugin.name) {\n            throw new Error('Plugin name not found.');\n        }\n\n        PLUGIN_NAME = plugin.name;\n\n        var langs   = plugin.langs || {},\n            options = $.summernote.options,\n            buttons = {};\n\n        langs['en-US'] = langs['en-US'] || {};\n        options.icons[PLUGIN_NAME] = {};\n        plugin.events = plugin.events || {};\n        plugin.buttons = plugin.buttons || {};\n\n        var button = function(btnName, eventName){\n            return function (lang, options) {\n                return tmpl.iconButton(options.iconPrefix + options.icons[PLUGIN_NAME][btnName], {\n                    event: eventName,\n                    title: lang[PLUGIN_NAME][btnName],\n                    hide: true\n                }).replace('<button','<button data-toggle=\"tooltip\"');\n            };\n        };\n\n        $.each(plugin.buttons, function(btnName){\n\n            var globalBtnName = PLUGIN_NAME + btnName.charAt(0).toUpperCase() + btnName.substr(1);\n\n            buttons[globalBtnName] = button(btnName, globalBtnName);\n            plugin.events[globalBtnName] = this.click;\n\n            langs['en-US'][btnName] = this.title || '';\n            options.icons[PLUGIN_NAME][btnName] = this.icon || '';\n\n        });\n\n        plugin.langs = {};\n        for (var name in langs) {\n            plugin.langs[name] = {};\n            plugin.langs[name][PLUGIN_NAME] = {};\n            for (var key in langs[name]) {\n                plugin.langs[name][PLUGIN_NAME][key] = langs[name][key];\n            }\n        }\n\n        plugin.buttons = buttons;\n\n        return plugin;\n\n    })({\n\n        name: 'mbrShortMode',\n\n        /*\n        langs: {\n            'de-DE': {\n                addItem: '...',\n                addSubItem: '...',\n                ...\n            }\n        },\n        */\n\n        init: function(layoutInfo) {\n            isShortMode = true;\n            update(layoutInfo);\n        },\n\n        buttons: {\n\n            more: {\n\n                title : 'More',\n                icon  : 'angle-right',\n                click : function (event, editor, layoutInfo) {\n                    event.stopPropagation();\n                    isShortMode = !isShortMode;\n                    update(layoutInfo);\n                }\n\n            }\n\n        }\n\n    }));\n\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9wbHVnaW4vc3VtbWVybm90ZS1leHQtbWJyLXNob3J0LW1vZGUuanM/YmQyOSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxJQUEwQztBQUNsRDtBQUNBLFFBQVEsaUNBQU8sQ0FBQywyQ0FBUSxDQUFDLG9DQUFFLE9BQU87QUFBQTtBQUFBO0FBQUEsb0dBQUM7QUFDbkMsS0FBSyxNQUFNLEVBR047QUFDTCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiwrQkFBK0IscUJBQXFCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsS0FBSzs7OztBQUlMOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLHdDQUF3QztBQUN4QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLEtBQUs7O0FBRUwsQ0FBQyIsImZpbGUiOiIuL3dlYi9hcHAvYnVpbGRlci9zdW1tZXJub3RlL3BsdWdpbi9zdW1tZXJub3RlLWV4dC1tYnItc2hvcnQtbW9kZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogIEBtb2R1bGVcbiAqL1xuKGZ1bmN0aW9uKGZhY3Rvcnkpe1xuICAgIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsczogalF1ZXJ5XG4gICAgICAgIGZhY3Rvcnkod2luZG93LmpRdWVyeSk7XG4gICAgfVxufShmdW5jdGlvbigkKXtcblxuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBpc1Nob3J0TW9kZSA9IHRydWU7XG5cbiAgICBmdW5jdGlvbiBkZWNvcmF0b3Iob2JqLCBrZXksIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBmdW5jID0gb2JqW2tleV07XG4gICAgICAgIG9ialtrZXldID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBhcmdzLnVuc2hpZnQoZnVuYywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRTZWxlY3RvckZvck9wdGlvbmFsQnV0dG9ucyhhaXJQb3BvdmVyKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFpclBvcG92ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGFpclBvcG92ZXJbaV07XG4gICAgICAgICAgICBpZiAoIWdyb3VwWzJdIHx8ICFncm91cFsyXS5vcHRpb25hbCkgY29udGludWU7XG4gICAgICAgICAgICB2YXIgb3B0aW9uYWwgPSBncm91cFsyXS5vcHRpb25hbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uYWwgPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaCgnLm5vdGUtJyArIGdyb3VwWzBdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvcHRpb25hbC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKCdbZGF0YS1uYW1lPVwiJyArIG9wdGlvbmFsW2pdICsgJ1wiXScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbXMuam9pbignLCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZShsYXlvdXRJbmZvKSB7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXlvdXRJbmZvLmVkaXRvcigpLmRhdGEoJ29wdGlvbnMnKSxcbiAgICAgICAgICAgICRwb3BvdmVyID0gbGF5b3V0SW5mby5wb3BvdmVyKCksXG4gICAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCksXG4gICAgICAgICAgICBzdHlsZUluZm8gPSAkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyLm1vZHVsZXMuZWRpdG9yLmN1cnJlbnRTdHlsZSgkZWRpdGFibGUpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnNob3J0TW9kZSkge1xuXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBnZXRTZWxlY3RvckZvck9wdGlvbmFsQnV0dG9ucyhvcHRpb25zLmFpclBvcG92ZXIpO1xuICAgICAgICAgICAgaWYgKCFpdGVtcykgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgJGJ1dHRvbiA9ICRwb3BvdmVyLmZpbmQoJ1tkYXRhLW5hbWU9XCJtYnJTaG9ydE1vZGVNb3JlXCJdJyk7XG5cbiAgICAgICAgICAgIGlmICghJGJ1dHRvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkZWRpdGFibGUuc3VtbWVybm90ZSgncG9wb3Zlci5hZGRHcm91cCcsIFsnbWJyU2hvcnRNb2RlTW9yZScsIFsnbWJyU2hvcnRNb2RlTW9yZSddXSk7XG4gICAgICAgICAgICAgICAgJGJ1dHRvbiA9ICRwb3BvdmVyLmZpbmQoJ1tkYXRhLW5hbWU9XCJtYnJTaG9ydE1vZGVNb3JlXCJdJykudG9vbHRpcCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJ2JvZHknLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnaG92ZXInLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6ICd0b3AnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1Nob3J0TW9kZSkge1xuICAgICAgICAgICAgICAgICRidXR0b24uZmluZCgnaScpLnJlbW92ZUNsYXNzKCdtYnItaWNvbi1hbmdsZS1sZWZ0JykuYWRkQ2xhc3MoJ21ici1pY29uLWFuZ2xlLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgJGJ1dHRvbi5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgJ01vcmUnKTtcbiAgICAgICAgICAgICAgICAkcG9wb3Zlci5maW5kKGl0ZW1zKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRidXR0b24uZmluZCgnaScpLnJlbW92ZUNsYXNzKCdtYnItaWNvbi1hbmdsZS1yaWdodCcpLmFkZENsYXNzKCdtYnItaWNvbi1hbmdsZS1sZWZ0Jyk7XG4gICAgICAgICAgICAgICAgJGJ1dHRvbi5hdHRyKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgJ0xlc3MnKTtcbiAgICAgICAgICAgICAgICAkcG9wb3Zlci5maW5kKGl0ZW1zKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgICQuc3VtbWVybm90ZS5ldmVudEhhbmRsZXIudXBkYXRlU3R5bGVJbmZvKHN0eWxlSW5mbywgbGF5b3V0SW5mbyk7XG5cbiAgICB9XG5cbiAgICAvLyBkZWNvcmF0b3IgZm9yICQuc3VtbWVybm90ZS5ldmVudEhhbmRsZXIubW9kdWxlcy5wb3BvdmVyLmFkZEdyb3VwXG4gICAgZGVjb3JhdG9yKCQuc3VtbWVybm90ZS5ldmVudEhhbmRsZXIubW9kdWxlcy5wb3BvdmVyLCAnYWRkR3JvdXAnLCBmdW5jdGlvbihmdW5jLCBhcmdzLCAkaG9sZGVyLCBncm91cCwgdHlwZXMsIGluZGV4KXtcblxuICAgICAgICB2YXIgb3B0aW9ucyA9ICRob2xkZXIuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgICBvcHRpb25zLmFpclBvcG92ZXIgPSBvcHRpb25zLmFpclBvcG92ZXIgfHwgW107XG4gICAgICAgIG9wdGlvbnMuYWlyUG9wb3Zlci5wdXNoKGdyb3VwKTtcblxuICAgICAgICB2YXIgJHBvcG92ZXIgPSAkKCcjbm90ZS1wb3BvdmVyLScgKyAkaG9sZGVyLmF0dHIoJ2lkJykucmVwbGFjZSgnbm90ZS1lZGl0b3ItJywgJycpKTtcblxuICAgICAgICBpZiAoZ3JvdXBbMF0gPT0gJ2Ryb3Bkb3duTWVudScpIHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGdldFNlbGVjdG9yRm9yT3B0aW9uYWxCdXR0b25zKG9wdGlvbnMuYWlyUG9wb3Zlcik7XG4gICAgICAgICAgICBpZiAoJGhvbGRlci5pcygnW2RhdGEtYnV0dG9uXScpKSB7XG4gICAgICAgICAgICAgICAgJHBvcG92ZXIuZmluZCgnLm5vdGUtbWJyU2hvcnRNb2RlTW9yZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbXMgJiYgb3B0aW9ucy5zaG9ydE1vZGUgJiYgaXNTaG9ydE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHBvcG92ZXIuZmluZChpdGVtcykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gLyplbHNlIHtcbiAgICAgICAgICAgICAgICAkcG9wb3Zlci5maW5kKCcubm90ZS1tYnJTaG9ydE1vZGVNb3JlJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtcykge1xuICAgICAgICAgICAgICAgICAgICAkcG9wb3Zlci5maW5kKGl0ZW1zKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSovXG4gICAgICAgIH1cblxuICAgICAgICAodHlwZXMgfHwgJ2xpbmssaW1hZ2UsYnV0dG9uLGFpcicpLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbih0eXBlKXtcbiAgICAgICAgICAgIHZhciBpbmRleCA9ICRwb3BvdmVyLmZpbmQoJy5ub3RlLScgKyB0eXBlICsgJy1wb3BvdmVyIC5ub3RlLW1iclNob3J0TW9kZU1vcmUnKS5wcmV2QWxsKCkubGVuZ3RoO1xuICAgICAgICAgICAgZnVuYy5jYWxsKHRoaXMsICRob2xkZXIsIGdyb3VwLCB0eXBlLCBpbmRleCB8fCAtMSk7XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnNob3J0TW9kZSAmJiBpc1Nob3J0TW9kZSAmJiBncm91cFsyXSAmJiBncm91cFsyXS5vcHRpb25hbCkge1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gZ2V0U2VsZWN0b3JGb3JPcHRpb25hbEJ1dHRvbnMoW2dyb3VwXSk7XG4gICAgICAgICAgICBpZiAoaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAkcG9wb3Zlci5maW5kKGl0ZW1zKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgLy8gZGVjb3JhdG9yIGZvciAkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyLnVwZGF0ZVN0eWxlSW5mb1xuICAgIGRlY29yYXRvcigkLnN1bW1lcm5vdGUuZXZlbnRIYW5kbGVyLCAndXBkYXRlU3R5bGVJbmZvJywgZnVuY3Rpb24oZnVuYywgYXJncywgc3R5bGVJbmZvLCBsYXlvdXRJbmZvKXtcblxuICAgICAgICBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXG4gICAgICAgIHZhciBpc0J0blBvcG92ZXIgPSBzdHlsZUluZm8uYW5jaG9yICYmIC9idG58bWJyLW1lbnUtaXRlbXxtYnItZWRpdGFibGUtbWVudS1pdGVtL2cudGVzdChzdHlsZUluZm8uYW5jaG9yLmNsYXNzTmFtZSk7XG4gICAgICAgIGlmICghaXNCdG5Qb3BvdmVyICYmIHN0eWxlSW5mby5hbmNob3IpIHtcbiAgICAgICAgICAgIGlzQnRuUG9wb3ZlciA9ICEhJChzdHlsZUluZm8uYW5jaG9yKS5hdHRyKCdkYXRhLWFwcC1idG4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkZ3JvdXAgPSBsYXlvdXRJbmZvLnBvcG92ZXIoKS5maW5kKCcubm90ZS1tYnJTaG9ydE1vZGVNb3JlJyk7XG5cbiAgICAgICAgaWYgKGlzQnRuUG9wb3Zlcikge1xuICAgICAgICAgICAgJGdyb3VwLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc0NvbGxhcHNlZCA9IHN0eWxlSW5mby5yYW5nZSAmJiBzdHlsZUluZm8ucmFuZ2UuaXNDb2xsYXBzZWQoKTtcbiAgICAgICAgdmFyIGlzTGluayA9IGlzQ29sbGFwc2VkICYmIHN0eWxlSW5mby5hbmNob3I7XG5cbiAgICAgICAgaWYgKCFpc0NvbGxhcHNlZCB8fCBpc0xpbmspIHtcbiAgICAgICAgICAgICRncm91cC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkZ3JvdXAucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuXG5cbiAgICB2YXIgUExVR0lOX05BTUU7XG5cbiAgICAvLyBjb3JlIGZ1bmN0aW9uczogdGVtcGxhdGVcbiAgICB2YXIgdG1wbCA9ICQuc3VtbWVybm90ZS5yZW5kZXJlci5nZXRUZW1wbGF0ZSgpO1xuXG4gICAgJC5zdW1tZXJub3RlLmFkZFBsdWdpbigoZnVuY3Rpb24ocGx1Z2luKXtcblxuICAgICAgICBpZiAoIXBsdWdpbi5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsdWdpbiBuYW1lIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIFBMVUdJTl9OQU1FID0gcGx1Z2luLm5hbWU7XG5cbiAgICAgICAgdmFyIGxhbmdzICAgPSBwbHVnaW4ubGFuZ3MgfHwge30sXG4gICAgICAgICAgICBvcHRpb25zID0gJC5zdW1tZXJub3RlLm9wdGlvbnMsXG4gICAgICAgICAgICBidXR0b25zID0ge307XG5cbiAgICAgICAgbGFuZ3NbJ2VuLVVTJ10gPSBsYW5nc1snZW4tVVMnXSB8fCB7fTtcbiAgICAgICAgb3B0aW9ucy5pY29uc1tQTFVHSU5fTkFNRV0gPSB7fTtcbiAgICAgICAgcGx1Z2luLmV2ZW50cyA9IHBsdWdpbi5ldmVudHMgfHwge307XG4gICAgICAgIHBsdWdpbi5idXR0b25zID0gcGx1Z2luLmJ1dHRvbnMgfHwge307XG5cbiAgICAgICAgdmFyIGJ1dHRvbiA9IGZ1bmN0aW9uKGJ0bk5hbWUsIGV2ZW50TmFtZSl7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wbC5pY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnNbUExVR0lOX05BTUVdW2J0bk5hbWVdLCB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBsYW5nW1BMVUdJTl9OQU1FXVtidG5OYW1lXSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLnJlcGxhY2UoJzxidXR0b24nLCc8YnV0dG9uIGRhdGEtdG9nZ2xlPVwidG9vbHRpcFwiJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgICQuZWFjaChwbHVnaW4uYnV0dG9ucywgZnVuY3Rpb24oYnRuTmFtZSl7XG5cbiAgICAgICAgICAgIHZhciBnbG9iYWxCdG5OYW1lID0gUExVR0lOX05BTUUgKyBidG5OYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYnRuTmFtZS5zdWJzdHIoMSk7XG5cbiAgICAgICAgICAgIGJ1dHRvbnNbZ2xvYmFsQnRuTmFtZV0gPSBidXR0b24oYnRuTmFtZSwgZ2xvYmFsQnRuTmFtZSk7XG4gICAgICAgICAgICBwbHVnaW4uZXZlbnRzW2dsb2JhbEJ0bk5hbWVdID0gdGhpcy5jbGljaztcblxuICAgICAgICAgICAgbGFuZ3NbJ2VuLVVTJ11bYnRuTmFtZV0gPSB0aGlzLnRpdGxlIHx8ICcnO1xuICAgICAgICAgICAgb3B0aW9ucy5pY29uc1tQTFVHSU5fTkFNRV1bYnRuTmFtZV0gPSB0aGlzLmljb24gfHwgJyc7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGx1Z2luLmxhbmdzID0ge307XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gbGFuZ3MpIHtcbiAgICAgICAgICAgIHBsdWdpbi5sYW5nc1tuYW1lXSA9IHt9O1xuICAgICAgICAgICAgcGx1Z2luLmxhbmdzW25hbWVdW1BMVUdJTl9OQU1FXSA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGxhbmdzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLmxhbmdzW25hbWVdW1BMVUdJTl9OQU1FXVtrZXldID0gbGFuZ3NbbmFtZV1ba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBsdWdpbi5idXR0b25zID0gYnV0dG9ucztcblxuICAgICAgICByZXR1cm4gcGx1Z2luO1xuXG4gICAgfSkoe1xuXG4gICAgICAgIG5hbWU6ICdtYnJTaG9ydE1vZGUnLFxuXG4gICAgICAgIC8qXG4gICAgICAgIGxhbmdzOiB7XG4gICAgICAgICAgICAnZGUtREUnOiB7XG4gICAgICAgICAgICAgICAgYWRkSXRlbTogJy4uLicsXG4gICAgICAgICAgICAgICAgYWRkU3ViSXRlbTogJy4uLicsXG4gICAgICAgICAgICAgICAgLi4uXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICovXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24obGF5b3V0SW5mbykge1xuICAgICAgICAgICAgaXNTaG9ydE1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgdXBkYXRlKGxheW91dEluZm8pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJ1dHRvbnM6IHtcblxuICAgICAgICAgICAgbW9yZToge1xuXG4gICAgICAgICAgICAgICAgdGl0bGUgOiAnTW9yZScsXG4gICAgICAgICAgICAgICAgaWNvbiAgOiAnYW5nbGUtcmlnaHQnLFxuICAgICAgICAgICAgICAgIGNsaWNrIDogZnVuY3Rpb24gKGV2ZW50LCBlZGl0b3IsIGxheW91dEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGlzU2hvcnRNb2RlID0gIWlzU2hvcnRNb2RlO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGUobGF5b3V0SW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgfSkpO1xuXG59KSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/plugin/summernote-ext-mbr-short-mode.js\n")},"./web/app/builder/summernote/summernote.js":
/*!**************************************************!*\
  !*** ./web/app/builder/summernote/summernote.js ***!
  \**************************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * Super simple wysiwyg editor on Bootstrap v0.6.17\n * http://summernote.org/\n *\n * summernote.js\n * Copyright 2013-2015 Alan Hong. and other contributors\n * summernote may be freely distributed under the MIT license./\n *\n * Date: 2015-11-11T13:12Z\n * Modified by Mobirise.com\n */\n(function (factory) {\n  /* global define */\n  if (true) {\n    // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(function ($) {\n  if (!Array.prototype.reduce) {\n    /**\n     * Array.prototype.reduce polyfill\n     *\n     * @param {Function} callback\n     * @param {Value} [initialValue]\n     * @return {Value}\n     *\n     * @see http://goo.gl/WNriQD\n     */\n    Array.prototype.reduce = function (callback) {\n      var t = Object(this), len = t.length >>> 0, k = 0, value;\n      if (arguments.length === 2) {\n        value = arguments[1];\n      } else {\n        while (k < len && !(k in t)) {\n          k++;\n        }\n        if (k >= len) {\n          throw new TypeError('Reduce of empty array with no initial value');\n        }\n        value = t[k++];\n      }\n      for (; k < len; k++) {\n        if (k in t) {\n          value = callback(value, t[k], k, t);\n        }\n      }\n      return value;\n    };\n  }\n\n  if ('function' !== typeof Array.prototype.filter) {\n    /**\n     * Array.prototype.filter polyfill\n     *\n     * @param {Function} func\n     * @return {Array}\n     *\n     * @see http://goo.gl/T1KFnq\n     */\n    Array.prototype.filter = function (func) {\n      var t = Object(this), len = t.length >>> 0;\n\n      var res = [];\n      var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n      for (var i = 0; i < len; i++) {\n        if (i in t) {\n          var val = t[i];\n          if (func.call(thisArg, val, i, t)) {\n            res.push(val);\n          }\n        }\n      }\n\n      return res;\n    };\n  }\n\n  if (!Array.prototype.map) {\n    /**\n     * Array.prototype.map polyfill\n     *\n     * @param {Function} callback\n     * @return {Array}\n     *\n     * @see https://goo.gl/SMWaMK\n     */\n    Array.prototype.map = function (callback, thisArg) {\n      var T, A, k;\n      if (this === null) {\n        throw new TypeError(' this is null or not defined');\n      }\n\n      var O = Object(this);\n      var len = O.length >>> 0;\n      if (typeof callback !== 'function') {\n        throw new TypeError(callback + ' is not a function');\n      }\n\n      if (arguments.length > 1) {\n        T = thisArg;\n      }\n\n      A = new Array(len);\n      k = 0;\n\n      while (k < len) {\n        var kValue, mappedValue;\n        if (k in O) {\n          kValue = O[k];\n          mappedValue = callback.call(T, kValue, k, O);\n          A[k] = mappedValue;\n        }\n        k++;\n      }\n      return A;\n    };\n  }\n\n  var isSupportAmd = false;//typeof define === 'function' && define.amd;\n\n  /**\n   * returns whether font is installed or not.\n   *\n   * @param {String} fontName\n   * @return {Boolean}\n   */\n  var isFontInstalled = function (fontName) {\n    var testFontName = fontName === 'Comic Sans MS' ? 'Courier New' : 'Comic Sans MS';\n    var $tester = $('<div>').css({\n      position: 'absolute',\n      left: '-9999px',\n      top: '-9999px',\n      fontSize: '200px'\n    }).text('mmmmmmmmmwwwwwww').appendTo(document.body);\n\n    var originalWidth = $tester.css('fontFamily', testFontName).width();\n    var width = $tester.css('fontFamily', fontName + ',' + testFontName).width();\n\n    $tester.remove();\n\n    return originalWidth !== width;\n  };\n\n  var userAgent = navigator.userAgent;\n  var isMSIE = /MSIE|Trident/i.test(userAgent);\n  var browserVersion;\n  if (isMSIE) {\n    var matches = /MSIE (\\d+[.]\\d+)/.exec(userAgent);\n    if (matches) {\n      browserVersion = parseFloat(matches[1]);\n    }\n    matches = /Trident\\/.*rv:([0-9]{1,}[\\.0-9]{0,})/.exec(userAgent);\n    if (matches) {\n      browserVersion = parseFloat(matches[1]);\n    }\n  }\n\n  /**\n   * @class core.agent\n   *\n   * Object which check platform and agent\n   *\n   * @singleton\n   * @alternateClassName agent\n   */\n  var agent = {\n    /** @property {Boolean} [isMac=false] true if this agent is Mac  */\n    isMac: navigator.appVersion.indexOf('Mac') > -1,\n    /** @property {Boolean} [isMSIE=false] true if this agent is a Internet Explorer  */\n    isMSIE: isMSIE,\n    /** @property {Boolean} [isFF=false] true if this agent is a Firefox  */\n    isFF: /firefox/i.test(userAgent),\n    isWebkit: /webkit/i.test(userAgent),\n    /** @property {Boolean} [isSafari=false] true if this agent is a Safari  */\n    isSafari: /safari/i.test(userAgent),\n    /** @property {Float} browserVersion current browser version  */\n    browserVersion: browserVersion,\n    /** @property {String} jqueryVersion current jQuery version string  */\n    jqueryVersion: parseFloat($.fn.jquery),\n    isSupportAmd: isSupportAmd,\n    hasCodeMirror: /*isSupportAmd ? require.specified('CodeMirror') :*/ !!window.CodeMirror,\n    isFontInstalled: isFontInstalled,\n    isW3CRangeSupport: !!document.createRange\n  };\n\n  /**\n   * @class core.func\n   *\n   * func utils (for high-order func's arg)\n   *\n   * @singleton\n   * @alternateClassName func\n   */\n  var func = (function () {\n    var eq = function (itemA) {\n      return function (itemB) {\n        return itemA === itemB;\n      };\n    };\n\n    var eq2 = function (itemA, itemB) {\n      return itemA === itemB;\n    };\n\n    var peq2 = function (propName) {\n      return function (itemA, itemB) {\n        return itemA[propName] === itemB[propName];\n      };\n    };\n\n    var ok = function () {\n      return true;\n    };\n\n    var fail = function () {\n      return false;\n    };\n\n    var not = function (f) {\n      return function () {\n        return !f.apply(f, arguments);\n      };\n    };\n\n    var and = function (fA, fB) {\n      return function (item) {\n        return fA(item) && fB(item);\n      };\n    };\n\n    var self = function (a) {\n      return a;\n    };\n\n    var idCounter = 0;\n\n    /**\n     * generate a globally-unique id\n     *\n     * @param {String} [prefix]\n     */\n    var uniqueId = function (prefix) {\n      var id = ++idCounter + '';\n      return prefix ? prefix + id : id;\n    };\n\n    /**\n     * returns bnd (bounds) from rect\n     *\n     * - IE Compatability Issue: http://goo.gl/sRLOAo\n     * - Scroll Issue: http://goo.gl/sNjUc\n     *\n     * @param {Rect} rect\n     * @return {Object} bounds\n     * @return {Number} bounds.top\n     * @return {Number} bounds.left\n     * @return {Number} bounds.width\n     * @return {Number} bounds.height\n     */\n    var rect2bnd = function (rect) {\n      var $document = $(document);\n      return {\n        top: rect.top + $document.scrollTop(),\n        left: rect.left + $document.scrollLeft(),\n        width: rect.right - rect.left,\n        height: rect.bottom - rect.top\n      };\n    };\n\n    /**\n     * returns a copy of the object where the keys have become the values and the values the keys.\n     * @param {Object} obj\n     * @return {Object}\n     */\n    var invertObject = function (obj) {\n      var inverted = {};\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          inverted[obj[key]] = key;\n        }\n      }\n      return inverted;\n    };\n\n    /**\n     * @param {String} namespace\n     * @param {String} [prefix]\n     * @return {String}\n     */\n    var namespaceToCamel = function (namespace, prefix) {\n      prefix = prefix || '';\n      return prefix + namespace.split('.').map(function (name) {\n        return name.substring(0, 1).toUpperCase() + name.substring(1);\n      }).join('');\n    };\n\n    return {\n      eq: eq,\n      eq2: eq2,\n      peq2: peq2,\n      ok: ok,\n      fail: fail,\n      self: self,\n      not: not,\n      and: and,\n      uniqueId: uniqueId,\n      rect2bnd: rect2bnd,\n      invertObject: invertObject,\n      namespaceToCamel: namespaceToCamel\n    };\n  })();\n\n  /**\n   * @class core.list\n   *\n   * list utils\n   *\n   * @singleton\n   * @alternateClassName list\n   */\n  var list = (function () {\n    /**\n     * returns the first item of an array.\n     *\n     * @param {Array} array\n     */\n    var head = function (array) {\n      return array[0];\n    };\n\n    /**\n     * returns the last item of an array.\n     *\n     * @param {Array} array\n     */\n    var last = function (array) {\n      return array[array.length - 1];\n    };\n\n    /**\n     * returns everything but the last entry of the array.\n     *\n     * @param {Array} array\n     */\n    var initial = function (array) {\n      return array.slice(0, array.length - 1);\n    };\n\n    /**\n     * returns the rest of the items in an array.\n     *\n     * @param {Array} array\n     */\n    var tail = function (array) {\n      return array.slice(1);\n    };\n\n    /**\n     * returns item of array\n     */\n    var find = function (array, pred) {\n      for (var idx = 0, len = array.length; idx < len; idx ++) {\n        var item = array[idx];\n        if (pred(item)) {\n          return item;\n        }\n      }\n    };\n\n    /**\n     * returns true if all of the values in the array pass the predicate truth test.\n     */\n    var all = function (array, pred) {\n      for (var idx = 0, len = array.length; idx < len; idx ++) {\n        if (!pred(array[idx])) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    /**\n     * returns index of item\n     */\n    var indexOf = function (array, item) {\n      return $.inArray(item, array);\n    };\n\n    /**\n     * returns true if the value is present in the list.\n     */\n    var contains = function (array, item) {\n      return indexOf(array, item) !== -1;\n    };\n\n    /**\n     * get sum from a list\n     *\n     * @param {Array} array - array\n     * @param {Function} fn - iterator\n     */\n    var sum = function (array, fn) {\n      fn = fn || func.self;\n      return array.reduce(function (memo, v) {\n        return memo + fn(v);\n      }, 0);\n    };\n\n    /**\n     * returns a copy of the collection with array type.\n     * @param {Collection} collection - collection eg) node.childNodes, ...\n     */\n    var from = function (collection) {\n      var result = [], idx = -1, length = collection.length;\n      while (++idx < length) {\n        result[idx] = collection[idx];\n      }\n      return result;\n    };\n\n    /**\n     * cluster elements by predicate function.\n     *\n     * @param {Array} array - array\n     * @param {Function} fn - predicate function for cluster rule\n     * @param {Array[]}\n     */\n    var clusterBy = function (array, fn) {\n      if (!array.length) { return []; }\n      var aTail = tail(array);\n      return aTail.reduce(function (memo, v) {\n        var aLast = last(memo);\n        if (fn(last(aLast), v)) {\n          aLast[aLast.length] = v;\n        } else {\n          memo[memo.length] = [v];\n        }\n        return memo;\n      }, [[head(array)]]);\n    };\n\n    /**\n     * returns a copy of the array with all falsy values removed\n     *\n     * @param {Array} array - array\n     * @param {Function} fn - predicate function for cluster rule\n     */\n    var compact = function (array) {\n      var aResult = [];\n      for (var idx = 0, len = array.length; idx < len; idx ++) {\n        if (array[idx]) { aResult.push(array[idx]); }\n      }\n      return aResult;\n    };\n\n    /**\n     * produces a duplicate-free version of the array\n     *\n     * @param {Array} array\n     */\n    var unique = function (array) {\n      var results = [];\n\n      for (var idx = 0, len = array.length; idx < len; idx ++) {\n        if (!contains(results, array[idx])) {\n          results.push(array[idx]);\n        }\n      }\n\n      return results;\n    };\n\n    /**\n     * returns next item.\n     * @param {Array} array\n     */\n    var next = function (array, item) {\n      var idx = indexOf(array, item);\n      if (idx === -1) { return null; }\n\n      return array[idx + 1];\n    };\n\n    /**\n     * returns prev item.\n     * @param {Array} array\n     */\n    var prev = function (array, item) {\n      var idx = indexOf(array, item);\n      if (idx === -1) { return null; }\n\n      return array[idx - 1];\n    };\n\n    return { head: head, last: last, initial: initial, tail: tail,\n             prev: prev, next: next, find: find, contains: contains,\n             all: all, sum: sum, from: from,\n             clusterBy: clusterBy, compact: compact, unique: unique };\n  })();\n\n\n  var NBSP_CHAR = String.fromCharCode(160);\n  var ZERO_WIDTH_NBSP_CHAR = '\\ufeff';\n\n  /**\n   * @class core.dom\n   *\n   * Dom functions\n   *\n   * @singleton\n   * @alternateClassName dom\n   */\n  var dom = (function () {\n    /**\n     * @method isEditable\n     *\n     * returns whether node is `note-editable` or not.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n    var isEditable = function (node) {\n      return node && $(node).hasClass('note-editable');\n    };\n\n    /**\n     * @method isControlSizing\n     *\n     * returns whether node is `note-control-sizing` or not.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n    var isControlSizing = function (node) {\n      return node && $(node).hasClass('note-control-sizing');\n    };\n\n    /**\n     * @method  buildLayoutInfo\n     *\n     * build layoutInfo from $editor(.note-editor)\n     *\n     * @param {jQuery} $editor\n     * @return {Object}\n     * @return {Function} return.editor\n     * @return {Node} return.dropzone\n     * @return {Node} return.toolbar\n     * @return {Node} return.editable\n     * @return {Node} return.codable\n     * @return {Node} return.popover\n     * @return {Node} return.handle\n     * @return {Node} return.dialog\n     */\n    var buildLayoutInfo = function ($editor) {\n      var makeFinder;\n\n      // air mode\n      if ($editor.hasClass('note-air-editor')) {\n        var id = list.last($editor.attr('id').split('-'));\n        makeFinder = function (sIdPrefix) {\n          return function () { return $(sIdPrefix + id); };\n        };\n\n        return {\n          editor: function () { return $editor; },\n          holder : function () { return $editor.data('holder'); },\n          editable: function () { return $editor; },\n          popover: makeFinder('#note-popover-'),\n          handle: makeFinder('#note-handle-'),\n          dialog: makeFinder('#note-dialog-')\n        };\n\n        // frame mode\n      } else {\n        makeFinder = function (className, $base) {\n          $base = $base || $editor;\n          return function () { return $base.find(className); };\n        };\n\n        var options = $editor.data('options');\n        var $dialogHolder = (options && options.dialogsInBody) ? $(document.body) : null;\n\n        return {\n          editor: function () { return $editor; },\n          holder : function () { return $editor.data('holder'); },\n          dropzone: makeFinder('.note-dropzone'),\n          toolbar: makeFinder('.note-toolbar'),\n          editable: makeFinder('.note-editable'),\n          codable: makeFinder('.note-codable'),\n          statusbar: makeFinder('.note-statusbar'),\n          popover: makeFinder('.note-popover'),\n          handle: makeFinder('.note-handle'),\n          dialog: makeFinder('.note-dialog', $dialogHolder)\n        };\n      }\n    };\n\n    /**\n     * returns makeLayoutInfo from editor's descendant node.\n     *\n     * @private\n     * @param {Node} descendant\n     * @return {Object}\n     */\n    var makeLayoutInfo = function (descendant) {\n      var $target = $(descendant).closest('.note-editor, .note-air-editor, .note-air-layout');\n\n      if (!$target.length) {\n        return null;\n      }\n\n      var $editor;\n      if ($target.is('.note-editor, .note-air-editor')) {\n        $editor = $target;\n      } else {\n        $editor = $('#note-editor-' + list.last($target.attr('id').split('-')));\n      }\n\n      return buildLayoutInfo($editor);\n    };\n\n    /**\n     * @method makePredByNodeName\n     *\n     * returns predicate which judge whether nodeName is same\n     *\n     * @param {String} nodeName\n     * @return {Function}\n     */\n    var makePredByNodeName = function (nodeName) {\n      nodeName = nodeName.toUpperCase();\n      return function (node) {\n        return node && node.nodeName && node.nodeName.toUpperCase() === nodeName;\n      };\n    };\n\n    /**\n     * @method isText\n     *\n     *\n     *\n     * @param {Node} node\n     * @return {Boolean} true if node's type is text(3)\n     */\n    var isText = function (node) {\n      return node && node.nodeType === 3;\n    };\n\n    /**\n     * ex) br, col, embed, hr, img, input, ...\n     * @see http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\n     */\n    var isVoid = function (node) {\n      return node && /^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(node.nodeName.toUpperCase());\n    };\n\n    var isPara = function (node) {\n      if (isEditable(node)) {\n        return false;\n      }\n\n      // Chrome(v31.0), FF(v25.0.1) use DIV for paragraph\n      return node && /^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase());\n    };\n\n    var isLi = makePredByNodeName('LI');\n\n    var isPurePara = function (node) {\n      return isPara(node) && !isLi(node);\n    };\n\n    var isTable = makePredByNodeName('TABLE');\n\n    var isInline = function (node) {\n      return !isBodyContainer(node) &&\n             !isList(node) &&\n             !isHr(node) &&\n             !isPara(node) &&\n             !isTable(node) &&\n             !isBlockquote(node);\n    };\n\n    var isList = function (node) {\n      return node && /^UL|^OL/.test(node.nodeName.toUpperCase());\n    };\n\n    var isHr = makePredByNodeName('HR');\n\n    var isCell = function (node) {\n      return node && /^TD|^TH/.test(node.nodeName.toUpperCase());\n    };\n\n    var isBlockquote = makePredByNodeName('BLOCKQUOTE');\n\n    var isBodyContainer = function (node) {\n      return isCell(node) || isBlockquote(node) || isEditable(node);\n    };\n\n    var isAnchor = makePredByNodeName('A');\n\n    var isParaInline = function (node) {\n      return isInline(node) && !!ancestor(node, isPara);\n    };\n\n    var isBodyInline = function (node) {\n      return isInline(node) && !ancestor(node, isPara);\n    };\n\n    var isBody = makePredByNodeName('BODY');\n\n    /**\n     * returns whether nodeB is closest sibling of nodeA\n     *\n     * @param {Node} nodeA\n     * @param {Node} nodeB\n     * @return {Boolean}\n     */\n    var isClosestSibling = function (nodeA, nodeB) {\n      return nodeA.nextSibling === nodeB ||\n             nodeA.previousSibling === nodeB;\n    };\n\n    /**\n     * returns array of closest siblings with node\n     *\n     * @param {Node} node\n     * @param {function} [pred] - predicate function\n     * @return {Node[]}\n     */\n    var withClosestSiblings = function (node, pred) {\n      pred = pred || func.ok;\n\n      var siblings = [];\n      if (node.previousSibling && pred(node.previousSibling)) {\n        siblings.push(node.previousSibling);\n      }\n      siblings.push(node);\n      if (node.nextSibling && pred(node.nextSibling)) {\n        siblings.push(node.nextSibling);\n      }\n      return siblings;\n    };\n\n    /**\n     * blank HTML for cursor position\n     * - [workaround] old IE only works with &nbsp;\n     * - [workaround] IE11 and other browser works with bogus br\n     */\n    var blankHTML = agent.isMSIE && agent.browserVersion < 11 ? '&nbsp;' : '<br>';\n\n    /**\n     * @method nodeLength\n     *\n     * returns #text's text size or element's childNodes size\n     *\n     * @param {Node} node\n     */\n    var nodeLength = function (node) {\n      if (isText(node)) {\n        return node.nodeValue.length;\n      }\n\n      return node.childNodes.length;\n    };\n\n    /**\n     * returns whether node is empty or not.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n    var isEmpty = function (node) {\n      var len = nodeLength(node);\n\n      if (len === 0) {\n        return true;\n      } else if (!isText(node) && len === 1 && node.innerHTML === blankHTML) {\n        // ex) <p><br></p>, <span><br></span>\n        return true;\n      } else if (list.all(node.childNodes, isText) && node.innerHTML === '') {\n        // ex) <p></p>, <span></span>\n        return true;\n      }\n\n      return false;\n    };\n\n    /**\n     * padding blankHTML if node is empty (for cursor position)\n     */\n    var paddingBlankHTML = function (node) {\n      if (!isVoid(node) && !nodeLength(node)) {\n        node.innerHTML = blankHTML;\n      }\n    };\n\n    /**\n     * find nearest ancestor predicate hit\n     *\n     * @param {Node} node\n     * @param {Function} pred - predicate function\n     */\n    var ancestor = function (node, pred) {\n      while (node) {\n        if (pred(node)) { return node; }\n        if (isEditable(node)) { break; }\n\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    /**\n     * find nearest ancestor only single child blood line and predicate hit\n     *\n     * @param {Node} node\n     * @param {Function} pred - predicate function\n     */\n    var singleChildAncestor = function (node, pred) {\n      node = node.parentNode;\n\n      while (node) {\n        if (nodeLength(node) !== 1) { break; }\n        if (pred(node)) { return node; }\n        if (isEditable(node)) { break; }\n\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    /**\n     * returns new array of ancestor nodes (until predicate hit).\n     *\n     * @param {Node} node\n     * @param {Function} [optional] pred - predicate function\n     */\n    var listAncestor = function (node, pred) {\n      pred = pred || func.fail;\n\n      var ancestors = [];\n      ancestor(node, function (el) {\n        if (!isEditable(el)) {\n          ancestors.push(el);\n        }\n\n        return pred(el);\n      });\n      return ancestors;\n    };\n\n    /**\n     * find farthest ancestor predicate hit\n     */\n    var lastAncestor = function (node, pred) {\n      var ancestors = listAncestor(node);\n      return list.last(ancestors.filter(pred));\n    };\n\n    /**\n     * returns common ancestor node between two nodes.\n     *\n     * @param {Node} nodeA\n     * @param {Node} nodeB\n     */\n    var commonAncestor = function (nodeA, nodeB) {\n      var ancestors = listAncestor(nodeA);\n      for (var n = nodeB; n; n = n.parentNode) {\n        if ($.inArray(n, ancestors) > -1) { return n; }\n      }\n      return null; // difference document area\n    };\n\n    /**\n     * listing all previous siblings (until predicate hit).\n     *\n     * @param {Node} node\n     * @param {Function} [optional] pred - predicate function\n     */\n    var listPrev = function (node, pred) {\n      pred = pred || func.fail;\n\n      var nodes = [];\n      while (node) {\n        if (pred(node)) { break; }\n        nodes.push(node);\n        node = node.previousSibling;\n      }\n      return nodes;\n    };\n\n    /**\n     * listing next siblings (until predicate hit).\n     *\n     * @param {Node} node\n     * @param {Function} [pred] - predicate function\n     */\n    var listNext = function (node, pred) {\n      pred = pred || func.fail;\n\n      var nodes = [];\n      while (node) {\n        if (pred(node)) { break; }\n        nodes.push(node);\n        node = node.nextSibling;\n      }\n      return nodes;\n    };\n\n    /**\n     * listing descendant nodes\n     *\n     * @param {Node} node\n     * @param {Function} [pred] - predicate function\n     */\n    var listDescendant = function (node, pred) {\n      var descendents = [];\n      pred = pred || func.ok;\n\n      // start DFS(depth first search) with node\n      (function fnWalk(current) {\n        if (node !== current && pred(current)) {\n          descendents.push(current);\n        }\n        for (var idx = 0, len = current.childNodes.length; idx < len; idx++) {\n          fnWalk(current.childNodes[idx]);\n        }\n      })(node);\n\n      return descendents;\n    };\n\n    /**\n     * wrap node with new tag.\n     *\n     * @param {Node} node\n     * @param {Node} tagName of wrapper\n     * @return {Node} - wrapper\n     */\n    var wrap = function (node, wrapperName) {\n      var parent = node.parentNode;\n      var wrapper = $('<' + wrapperName + '>')[0];\n\n      parent.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n\n      return wrapper;\n    };\n\n    /**\n     * insert node after preceding\n     *\n     * @param {Node} node\n     * @param {Node} preceding - predicate function\n     */\n    var insertAfter = function (node, preceding) {\n      var next = preceding.nextSibling, parent = preceding.parentNode;\n      if (next) {\n        parent.insertBefore(node, next);\n      } else {\n        parent.appendChild(node);\n      }\n      return node;\n    };\n\n    /**\n     * append elements.\n     *\n     * @param {Node} node\n     * @param {Collection} aChild\n     */\n    var appendChildNodes = function (node, aChild) {\n      $.each(aChild, function (idx, child) {\n        node.appendChild(child);\n      });\n      return node;\n    };\n\n    /**\n     * returns whether boundaryPoint is left edge or not.\n     *\n     * @param {BoundaryPoint} point\n     * @return {Boolean}\n     */\n    var isLeftEdgePoint = function (point) {\n      return point.offset === 0;\n    };\n\n    /**\n     * returns whether boundaryPoint is right edge or not.\n     *\n     * @param {BoundaryPoint} point\n     * @return {Boolean}\n     */\n    var isRightEdgePoint = function (point) {\n      return point.offset === nodeLength(point.node);\n    };\n\n    /**\n     * returns whether boundaryPoint is edge or not.\n     *\n     * @param {BoundaryPoint} point\n     * @return {Boolean}\n     */\n    var isEdgePoint = function (point) {\n      return isLeftEdgePoint(point) || isRightEdgePoint(point);\n    };\n\n    /**\n     * returns wheter node is left edge of ancestor or not.\n     *\n     * @param {Node} node\n     * @param {Node} ancestor\n     * @return {Boolean}\n     */\n    var isLeftEdgeOf = function (node, ancestor) {\n      while (node && node !== ancestor) {\n        if (position(node) !== 0) {\n          return false;\n        }\n        node = node.parentNode;\n      }\n\n      return true;\n    };\n\n    /**\n     * returns whether node is right edge of ancestor or not.\n     *\n     * @param {Node} node\n     * @param {Node} ancestor\n     * @return {Boolean}\n     */\n    var isRightEdgeOf = function (node, ancestor) {\n      while (node && node !== ancestor) {\n        if (position(node) !== nodeLength(node.parentNode) - 1) {\n          return false;\n        }\n        node = node.parentNode;\n      }\n\n      return true;\n    };\n\n    /**\n     * returns whether point is left edge of ancestor or not.\n     * @param {BoundaryPoint} point\n     * @param {Node} ancestor\n     * @return {Boolean}\n     */\n    var isLeftEdgePointOf = function (point, ancestor) {\n      return isLeftEdgePoint(point) && isLeftEdgeOf(point.node, ancestor);\n    };\n\n    /**\n     * returns whether point is right edge of ancestor or not.\n     * @param {BoundaryPoint} point\n     * @param {Node} ancestor\n     * @return {Boolean}\n     */\n    var isRightEdgePointOf = function (point, ancestor) {\n      return isRightEdgePoint(point) && isRightEdgeOf(point.node, ancestor);\n    };\n\n    /**\n     * returns offset from parent.\n     *\n     * @param {Node} node\n     */\n    var position = function (node) {\n      var offset = 0;\n      while ((node = node.previousSibling)) {\n        offset += 1;\n      }\n      return offset;\n    };\n\n    var hasChildren = function (node) {\n      return !!(node && node.childNodes && node.childNodes.length);\n    };\n\n    /**\n     * returns previous boundaryPoint\n     *\n     * @param {BoundaryPoint} point\n     * @param {Boolean} isSkipInnerOffset\n     * @return {BoundaryPoint}\n     */\n    var prevPoint = function (point, isSkipInnerOffset) {\n      var node, offset;\n\n      if (point.offset === 0) {\n        if (isEditable(point.node)) {\n          return null;\n        }\n\n        node = point.node.parentNode;\n        offset = position(point.node);\n      } else if (hasChildren(point.node)) {\n        node = point.node.childNodes[point.offset - 1];\n        offset = nodeLength(node);\n      } else {\n        node = point.node;\n        offset = isSkipInnerOffset ? 0 : point.offset - 1;\n      }\n\n      return {\n        node: node,\n        offset: offset\n      };\n    };\n\n    /**\n     * returns next boundaryPoint\n     *\n     * @param {BoundaryPoint} point\n     * @param {Boolean} isSkipInnerOffset\n     * @return {BoundaryPoint}\n     */\n    var nextPoint = function (point, isSkipInnerOffset) {\n      var node, offset;\n\n      if (nodeLength(point.node) === point.offset) {\n        if (isEditable(point.node)) {\n          return null;\n        }\n\n        node = point.node.parentNode;\n        offset = position(point.node) + 1;\n      } else if (hasChildren(point.node)) {\n        node = point.node.childNodes[point.offset];\n        offset = 0;\n      } else {\n        node = point.node;\n        offset = isSkipInnerOffset ? nodeLength(point.node) : point.offset + 1;\n      }\n\n      return {\n        node: node,\n        offset: offset\n      };\n    };\n\n    /**\n     * returns whether pointA and pointB is same or not.\n     *\n     * @param {BoundaryPoint} pointA\n     * @param {BoundaryPoint} pointB\n     * @return {Boolean}\n     */\n    var isSamePoint = function (pointA, pointB) {\n      return pointA.node === pointB.node && pointA.offset === pointB.offset;\n    };\n\n    /**\n     * returns whether point is visible (can set cursor) or not.\n     *\n     * @param {BoundaryPoint} point\n     * @return {Boolean}\n     */\n    var isVisiblePoint = function (point) {\n      if (isText(point.node) || !hasChildren(point.node) || isEmpty(point.node)) {\n        return true;\n      }\n\n      var leftNode = point.node.childNodes[point.offset - 1];\n      var rightNode = point.node.childNodes[point.offset];\n      if ((!leftNode || isVoid(leftNode)) && (!rightNode || isVoid(rightNode))) {\n        return true;\n      }\n\n      return false;\n    };\n\n    /**\n     * @method prevPointUtil\n     *\n     * @param {BoundaryPoint} point\n     * @param {Function} pred\n     * @return {BoundaryPoint}\n     */\n    var prevPointUntil = function (point, pred) {\n      while (point) {\n        if (pred(point)) {\n          return point;\n        }\n\n        point = prevPoint(point);\n      }\n\n      return null;\n    };\n\n    /**\n     * @method nextPointUntil\n     *\n     * @param {BoundaryPoint} point\n     * @param {Function} pred\n     * @return {BoundaryPoint}\n     */\n    var nextPointUntil = function (point, pred) {\n      while (point) {\n        if (pred(point)) {\n          return point;\n        }\n\n        point = nextPoint(point);\n      }\n\n      return null;\n    };\n\n    /**\n     * returns whether point has character or not.\n     *\n     * @param {Point} point\n     * @return {Boolean}\n     */\n    var isCharPoint = function (point) {\n      if (!isText(point.node)) {\n        return false;\n      }\n\n      var ch = point.node.nodeValue.charAt(point.offset - 1);\n      return ch && (ch !== ' ' && ch !== NBSP_CHAR);\n    };\n\n    /**\n     * @method walkPoint\n     *\n     * @param {BoundaryPoint} startPoint\n     * @param {BoundaryPoint} endPoint\n     * @param {Function} handler\n     * @param {Boolean} isSkipInnerOffset\n     */\n    var walkPoint = function (startPoint, endPoint, handler, isSkipInnerOffset) {\n      var point = startPoint;\n\n      while (point) {\n        handler(point);\n\n        if (isSamePoint(point, endPoint)) {\n          break;\n        }\n\n        var isSkipOffset = isSkipInnerOffset &&\n                           startPoint.node !== point.node &&\n                           endPoint.node !== point.node;\n        point = nextPoint(point, isSkipOffset);\n      }\n    };\n\n    /**\n     * @method makeOffsetPath\n     *\n     * return offsetPath(array of offset) from ancestor\n     *\n     * @param {Node} ancestor - ancestor node\n     * @param {Node} node\n     */\n    var makeOffsetPath = function (ancestor, node) {\n      var ancestors = listAncestor(node, func.eq(ancestor));\n      return ancestors.map(position).reverse();\n    };\n\n    /**\n     * @method fromOffsetPath\n     *\n     * return element from offsetPath(array of offset)\n     *\n     * @param {Node} ancestor - ancestor node\n     * @param {array} offsets - offsetPath\n     */\n    var fromOffsetPath = function (ancestor, offsets) {\n      var current = ancestor;\n      for (var i = 0, len = offsets.length; i < len; i++) {\n        if (current.childNodes.length <= offsets[i]) {\n          current = current.childNodes[current.childNodes.length - 1];\n        } else {\n          current = current.childNodes[offsets[i]];\n        }\n      }\n      return current;\n    };\n\n    /**\n     * @method splitNode\n     *\n     * split element or #text\n     *\n     * @param {BoundaryPoint} point\n     * @param {Object} [options]\n     * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\n     * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\n     * @return {Node} right node of boundaryPoint\n     */\n    var splitNode = function (point, options) {\n      var isSkipPaddingBlankHTML = options && options.isSkipPaddingBlankHTML;\n      var isNotSplitEdgePoint = options && options.isNotSplitEdgePoint;\n\n      // edge case\n      if (isEdgePoint(point) && (isText(point.node) || isNotSplitEdgePoint)) {\n        if (isLeftEdgePoint(point)) {\n          return point.node;\n        } else if (isRightEdgePoint(point)) {\n          return point.node.nextSibling;\n        }\n      }\n\n      // split #text\n      if (isText(point.node)) {\n        return point.node.splitText(point.offset);\n      } else {\n        var childNode = point.node.childNodes[point.offset];\n        var clone = insertAfter(point.node.cloneNode(false), point.node);\n        appendChildNodes(clone, listNext(childNode));\n\n        if (!isSkipPaddingBlankHTML) {\n          paddingBlankHTML(point.node);\n          paddingBlankHTML(clone);\n        }\n\n        return clone;\n      }\n    };\n\n    /**\n     * @method splitTree\n     *\n     * split tree by point\n     *\n     * @param {Node} root - split root\n     * @param {BoundaryPoint} point\n     * @param {Object} [options]\n     * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\n     * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\n     * @return {Node} right node of boundaryPoint\n     */\n    var splitTree = function (root, point, options) {\n      // ex) [#text, <span>, <p>]\n      var ancestors = listAncestor(point.node, func.eq(root));\n\n      if (!ancestors.length) {\n        return null;\n      } else if (ancestors.length === 1) {\n        return splitNode(point, options);\n      }\n\n      return ancestors.reduce(function (node, parent) {\n        if (node === point.node) {\n          node = splitNode(point, options);\n        }\n\n        return splitNode({\n          node: parent,\n          offset: node ? dom.position(node) : nodeLength(parent)\n        }, options);\n      });\n    };\n\n    /**\n     * split point\n     *\n     * @param {Point} point\n     * @param {Boolean} isInline\n     * @return {Object}\n     */\n    var splitPoint = function (point, isInline) {\n      // find splitRoot, container\n      //  - inline: splitRoot is a child of paragraph\n      //  - block: splitRoot is a child of bodyContainer\n      var pred = isInline ? isPara : isBodyContainer;\n      var ancestors = listAncestor(point.node, pred);\n      var topAncestor = list.last(ancestors) || point.node;\n\n      var splitRoot, container;\n      if (pred(topAncestor)) {\n        splitRoot = ancestors[ancestors.length - 2];\n        container = topAncestor;\n      } else {\n        splitRoot = topAncestor;\n        container = splitRoot.parentNode;\n      }\n\n      // if splitRoot is exists, split with splitTree\n      var pivot = splitRoot && splitTree(splitRoot, point, {\n        isSkipPaddingBlankHTML: isInline,\n        isNotSplitEdgePoint: isInline\n      });\n\n      // if container is point.node, find pivot with point.offset\n      if (!pivot && container === point.node) {\n        pivot = point.node.childNodes[point.offset];\n      }\n\n      return {\n        rightNode: pivot,\n        container: container\n      };\n    };\n\n    var create = function (nodeName) {\n      return document.createElement(nodeName);\n    };\n\n    var createText = function (text) {\n      return document.createTextNode(text);\n    };\n\n    /**\n     * @method remove\n     *\n     * remove node, (isRemoveChild: remove child or not)\n     *\n     * @param {Node} node\n     * @param {Boolean} isRemoveChild\n     */\n    var remove = function (node, isRemoveChild) {\n      if (!node || !node.parentNode) { return; }\n      if (node.removeNode) { return node.removeNode(isRemoveChild); }\n\n      var parent = node.parentNode;\n      if (!isRemoveChild) {\n        var nodes = [];\n        var i, len;\n        for (i = 0, len = node.childNodes.length; i < len; i++) {\n          nodes.push(node.childNodes[i]);\n        }\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n          parent.insertBefore(nodes[i], node);\n        }\n      }\n\n      parent.removeChild(node);\n    };\n\n    /**\n     * @method removeWhile\n     *\n     * @param {Node} node\n     * @param {Function} pred\n     */\n    var removeWhile = function (node, pred) {\n      while (node) {\n        if (isEditable(node) || !pred(node)) {\n          break;\n        }\n\n        var parent = node.parentNode;\n        remove(node);\n        node = parent;\n      }\n    };\n\n    /**\n     * @method replace\n     *\n     * replace node with provided nodeName\n     *\n     * @param {Node} node\n     * @param {String} nodeName\n     * @return {Node} - new node\n     */\n    var replace = function (node, nodeName) {\n      if (node.nodeName.toUpperCase() === nodeName.toUpperCase()) {\n        return node;\n      }\n\n      var newNode = create(nodeName);\n\n      if (node.style.cssText) {\n        newNode.style.cssText = node.style.cssText;\n      }\n\n      appendChildNodes(newNode, list.from(node.childNodes));\n      insertAfter(newNode, node);\n      remove(node);\n\n      return newNode;\n    };\n\n    var isTextarea = makePredByNodeName('TEXTAREA');\n\n    /**\n     * @param {jQuery} $node\n     * @param {Boolean} [stripLinebreaks] - default: false\n     */\n    var value = function ($node, stripLinebreaks) {\n      var val = isTextarea($node[0]) ? $node.val() : $node.html();\n      if (stripLinebreaks) {\n        return val.replace(/[\\n\\r]/g, '');\n      }\n      return val;\n    };\n\n    /**\n     * @method html\n     *\n     * get the HTML contents of node\n     *\n     * @param {jQuery} $node\n     * @param {Boolean} [isNewlineOnBlock]\n     */\n    var html = function ($node, isNewlineOnBlock) {\n      var markup = value($node);\n\n      if (isNewlineOnBlock) {\n        var regexTag = /<(\\/?)(\\b(?!!)[^>\\s]*)(.*?)(\\s*\\/?>)/g;\n        markup = markup.replace(regexTag, function (match, endSlash, name) {\n          name = name.toUpperCase();\n          var isEndOfInlineContainer = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name) &&\n                                       !!endSlash;\n          var isBlockNode = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name);\n\n          return match + ((isEndOfInlineContainer || isBlockNode) ? '\\n' : '');\n        });\n        markup = $.trim(markup);\n      }\n\n      return markup;\n    };\n\n    return {\n      /** @property {String} NBSP_CHAR */\n      NBSP_CHAR: NBSP_CHAR,\n      /** @property {String} ZERO_WIDTH_NBSP_CHAR */\n      ZERO_WIDTH_NBSP_CHAR: ZERO_WIDTH_NBSP_CHAR,\n      /** @property {String} blank */\n      blank: blankHTML,\n      /** @property {String} emptyPara */\n      emptyPara: '<p>' + blankHTML + '</p>',\n      makePredByNodeName: makePredByNodeName,\n      isEditable: isEditable,\n      isControlSizing: isControlSizing,\n      buildLayoutInfo: buildLayoutInfo,\n      makeLayoutInfo: makeLayoutInfo,\n      isText: isText,\n      isVoid: isVoid,\n      isPara: isPara,\n      isPurePara: isPurePara,\n      isInline: isInline,\n      isBlock: func.not(isInline),\n      isBodyInline: isBodyInline,\n      isBody: isBody,\n      isParaInline: isParaInline,\n      isList: isList,\n      isTable: isTable,\n      isCell: isCell,\n      isBlockquote: isBlockquote,\n      isBodyContainer: isBodyContainer,\n      isAnchor: isAnchor,\n      isDiv: makePredByNodeName('DIV'),\n      isLi: isLi,\n      isBR: makePredByNodeName('BR'),\n      isSpan: makePredByNodeName('SPAN'),\n      isB: makePredByNodeName('B'),\n      isU: makePredByNodeName('U'),\n      isS: makePredByNodeName('S'),\n      isI: makePredByNodeName('I'),\n      isImg: makePredByNodeName('IMG'),\n      isTextarea: isTextarea,\n      isEmpty: isEmpty,\n      isEmptyAnchor: func.and(isAnchor, isEmpty),\n      isClosestSibling: isClosestSibling,\n      withClosestSiblings: withClosestSiblings,\n      nodeLength: nodeLength,\n      isLeftEdgePoint: isLeftEdgePoint,\n      isRightEdgePoint: isRightEdgePoint,\n      isEdgePoint: isEdgePoint,\n      isLeftEdgeOf: isLeftEdgeOf,\n      isRightEdgeOf: isRightEdgeOf,\n      isLeftEdgePointOf: isLeftEdgePointOf,\n      isRightEdgePointOf: isRightEdgePointOf,\n      prevPoint: prevPoint,\n      nextPoint: nextPoint,\n      isSamePoint: isSamePoint,\n      isVisiblePoint: isVisiblePoint,\n      prevPointUntil: prevPointUntil,\n      nextPointUntil: nextPointUntil,\n      isCharPoint: isCharPoint,\n      walkPoint: walkPoint,\n      ancestor: ancestor,\n      singleChildAncestor: singleChildAncestor,\n      listAncestor: listAncestor,\n      lastAncestor: lastAncestor,\n      listNext: listNext,\n      listPrev: listPrev,\n      listDescendant: listDescendant,\n      commonAncestor: commonAncestor,\n      wrap: wrap,\n      insertAfter: insertAfter,\n      appendChildNodes: appendChildNodes,\n      position: position,\n      hasChildren: hasChildren,\n      makeOffsetPath: makeOffsetPath,\n      fromOffsetPath: fromOffsetPath,\n      splitTree: splitTree,\n      splitPoint: splitPoint,\n      create: create,\n      createText: createText,\n      remove: remove,\n      removeWhile: removeWhile,\n      replace: replace,\n      html: html,\n      value: value\n    };\n  })();\n\n\n  var range = (function () {\n\n    /**\n     * return boundaryPoint from TextRange, inspired by Andy Na's HuskyRange.js\n     *\n     * @param {TextRange} textRange\n     * @param {Boolean} isStart\n     * @return {BoundaryPoint}\n     *\n     * @see http://msdn.microsoft.com/en-us/library/ie/ms535872(v=vs.85).aspx\n     */\n    var textRangeToPoint = function (textRange, isStart) {\n      var container = textRange.parentElement(), offset;\n\n      var tester = document.body.createTextRange(), prevContainer;\n      var childNodes = list.from(container.childNodes);\n      for (offset = 0; offset < childNodes.length; offset++) {\n        if (dom.isText(childNodes[offset])) {\n          continue;\n        }\n        tester.moveToElementText(childNodes[offset]);\n        if (tester.compareEndPoints('StartToStart', textRange) >= 0) {\n          break;\n        }\n        prevContainer = childNodes[offset];\n      }\n\n      if (offset !== 0 && dom.isText(childNodes[offset - 1])) {\n        var textRangeStart = document.body.createTextRange(), curTextNode = null;\n        textRangeStart.moveToElementText(prevContainer || container);\n        textRangeStart.collapse(!prevContainer);\n        curTextNode = prevContainer ? prevContainer.nextSibling : container.firstChild;\n\n        var pointTester = textRange.duplicate();\n        pointTester.setEndPoint('StartToStart', textRangeStart);\n        var textCount = pointTester.text.replace(/[\\r\\n]/g, '').length;\n\n        while (textCount > curTextNode.nodeValue.length && curTextNode.nextSibling) {\n          textCount -= curTextNode.nodeValue.length;\n          curTextNode = curTextNode.nextSibling;\n        }\n\n        /* jshint ignore:start */\n        var dummy = curTextNode.nodeValue; // enforce IE to re-reference curTextNode, hack\n        /* jshint ignore:end */\n\n        if (isStart && curTextNode.nextSibling && dom.isText(curTextNode.nextSibling) &&\n            textCount === curTextNode.nodeValue.length) {\n          textCount -= curTextNode.nodeValue.length;\n          curTextNode = curTextNode.nextSibling;\n        }\n\n        container = curTextNode;\n        offset = textCount;\n      }\n\n      return {\n        cont: container,\n        offset: offset\n      };\n    };\n\n    /**\n     * return TextRange from boundary point (inspired by google closure-library)\n     * @param {BoundaryPoint} point\n     * @return {TextRange}\n     */\n    var pointToTextRange = function (point) {\n      var textRangeInfo = function (container, offset) {\n        var node, isCollapseToStart;\n\n        if (dom.isText(container)) {\n          var prevTextNodes = dom.listPrev(container, func.not(dom.isText));\n          var prevContainer = list.last(prevTextNodes).previousSibling;\n          node =  prevContainer || container.parentNode;\n          offset += list.sum(list.tail(prevTextNodes), dom.nodeLength);\n          isCollapseToStart = !prevContainer;\n        } else {\n          node = container.childNodes[offset] || container;\n          if (dom.isText(node)) {\n            return textRangeInfo(node, 0);\n          }\n\n          offset = 0;\n          isCollapseToStart = false;\n        }\n\n        return {\n          node: node,\n          collapseToStart: isCollapseToStart,\n          offset: offset\n        };\n      };\n\n      var textRange = document.body.createTextRange();\n      var info = textRangeInfo(point.node, point.offset);\n\n      textRange.moveToElementText(info.node);\n      textRange.collapse(info.collapseToStart);\n      textRange.moveStart('character', info.offset);\n      return textRange;\n    };\n\n    /**\n     * Wrapped Range\n     *\n     * @constructor\n     * @param {Node} sc - start container\n     * @param {Number} so - start offset\n     * @param {Node} ec - end container\n     * @param {Number} eo - end offset\n     */\n    var WrappedRange = function (sc, so, ec, eo) {\n      this.sc = sc;\n      this.so = so;\n      this.ec = ec;\n      this.eo = eo;\n\n      // nativeRange: get nativeRange from sc, so, ec, eo\n      var nativeRange = function () {\n        if (agent.isW3CRangeSupport) {\n          var w3cRange = document.createRange();\n          w3cRange.setStart(sc, so);\n          w3cRange.setEnd(ec, eo);\n\n          return w3cRange;\n        } else {\n          var textRange = pointToTextRange({\n            node: sc,\n            offset: so\n          });\n\n          textRange.setEndPoint('EndToEnd', pointToTextRange({\n            node: ec,\n            offset: eo\n          }));\n\n          return textRange;\n        }\n      };\n\n      this.getPoints = function () {\n        return {\n          sc: sc,\n          so: so,\n          ec: ec,\n          eo: eo\n        };\n      };\n\n      this.getStartPoint = function () {\n        return {\n          node: sc,\n          offset: so\n        };\n      };\n\n      this.getEndPoint = function () {\n        return {\n          node: ec,\n          offset: eo\n        };\n      };\n\n      /**\n       * select update visible range\n       */\n      this.select = function () {\n        var nativeRng = nativeRange();\n        if (agent.isW3CRangeSupport) {\n          var selection = document.getSelection();\n          if (selection.rangeCount > 0) {\n            selection.removeAllRanges();\n          }\n          selection.addRange(nativeRng);\n        } else {\n          nativeRng.select();\n        }\n\n        return this;\n      };\n\n      /**\n       * @return {WrappedRange}\n       */\n      this.normalize = function () {\n\n        /**\n         * @param {BoundaryPoint} point\n         * @param {Boolean} isLeftToRight\n         * @return {BoundaryPoint}\n         */\n        var getVisiblePoint = function (point, isLeftToRight) {\n          if ((dom.isVisiblePoint(point) && !dom.isEdgePoint(point)) ||\n              (dom.isVisiblePoint(point) && dom.isRightEdgePoint(point) && !isLeftToRight) ||\n              (dom.isVisiblePoint(point) && dom.isLeftEdgePoint(point) && isLeftToRight) ||\n              (dom.isVisiblePoint(point) && dom.isBlock(point.node) && dom.isEmpty(point.node))) {\n            return point;\n          }\n\n          // point on block's edge\n          var block = dom.ancestor(point.node, dom.isBlock);\n          if (((dom.isLeftEdgePointOf(point, block) || dom.isVoid(dom.prevPoint(point).node)) && !isLeftToRight) ||\n              ((dom.isRightEdgePointOf(point, block) || dom.isVoid(dom.nextPoint(point).node)) && isLeftToRight)) {\n\n            // returns point already on visible point\n            if (dom.isVisiblePoint(point)) {\n              return point;\n            }\n            // reverse direction\n            isLeftToRight = !isLeftToRight;\n          }\n\n          var nextPoint = isLeftToRight ? dom.nextPointUntil(dom.nextPoint(point), dom.isVisiblePoint) :\n                                          dom.prevPointUntil(dom.prevPoint(point), dom.isVisiblePoint);\n          return nextPoint || point;\n        };\n\n        var endPoint = getVisiblePoint(this.getEndPoint(), false);\n        var startPoint = this.isCollapsed() ? endPoint : getVisiblePoint(this.getStartPoint(), true);\n\n        return new WrappedRange(\n          startPoint.node,\n          startPoint.offset,\n          endPoint.node,\n          endPoint.offset\n        );\n      };\n\n      /**\n       * returns matched nodes on range\n       *\n       * @param {Function} [pred] - predicate function\n       * @param {Object} [options]\n       * @param {Boolean} [options.includeAncestor]\n       * @param {Boolean} [options.fullyContains]\n       * @return {Node[]}\n       */\n      this.nodes = function (pred, options) {\n        pred = pred || func.ok;\n\n        var includeAncestor = options && options.includeAncestor;\n        var fullyContains = options && options.fullyContains;\n\n        // TODO compare points and sort\n        var startPoint = this.getStartPoint();\n        var endPoint = this.getEndPoint();\n\n        var nodes = [];\n        var leftEdgeNodes = [];\n\n        dom.walkPoint(startPoint, endPoint, function (point) {\n          if (dom.isEditable(point.node)) {\n            return;\n          }\n\n          var node;\n          if (fullyContains) {\n            if (dom.isLeftEdgePoint(point)) {\n              leftEdgeNodes.push(point.node);\n            }\n            if (dom.isRightEdgePoint(point) && list.contains(leftEdgeNodes, point.node)) {\n              node = point.node;\n            }\n          } else if (includeAncestor) {\n            node = dom.ancestor(point.node, pred);\n          } else {\n            node = point.node;\n          }\n\n          if (node && pred(node)) {\n            nodes.push(node);\n          }\n        }, true);\n\n        return list.unique(nodes);\n      };\n\n      /**\n       * returns commonAncestor of range\n       * @return {Element} - commonAncestor\n       */\n      this.commonAncestor = function () {\n        return dom.commonAncestor(sc, ec);\n      };\n\n      /**\n       * returns expanded range by pred\n       *\n       * @param {Function} pred - predicate function\n       * @return {WrappedRange}\n       */\n      this.expand = function (pred) {\n        var startAncestor = dom.ancestor(sc, pred);\n        var endAncestor = dom.ancestor(ec, pred);\n\n        if (!startAncestor && !endAncestor) {\n          return new WrappedRange(sc, so, ec, eo);\n        }\n\n        var boundaryPoints = this.getPoints();\n\n        if (startAncestor) {\n          boundaryPoints.sc = startAncestor;\n          boundaryPoints.so = 0;\n        }\n\n        if (endAncestor) {\n          boundaryPoints.ec = endAncestor;\n          boundaryPoints.eo = dom.nodeLength(endAncestor);\n        }\n\n        return new WrappedRange(\n          boundaryPoints.sc,\n          boundaryPoints.so,\n          boundaryPoints.ec,\n          boundaryPoints.eo\n        );\n      };\n\n      /**\n       * @param {Boolean} isCollapseToStart\n       * @return {WrappedRange}\n       */\n      this.collapse = function (isCollapseToStart) {\n        if (isCollapseToStart) {\n          return new WrappedRange(sc, so, sc, so);\n        } else {\n          return new WrappedRange(ec, eo, ec, eo);\n        }\n      };\n\n      /**\n       * splitText on range\n       */\n      this.splitText = function () {\n        var isSameContainer = sc === ec;\n        var boundaryPoints = this.getPoints();\n\n        if (dom.isText(ec) && !dom.isEdgePoint(this.getEndPoint())) {\n          ec.splitText(eo);\n        }\n\n        if (dom.isText(sc) && !dom.isEdgePoint(this.getStartPoint())) {\n          boundaryPoints.sc = sc.splitText(so);\n          boundaryPoints.so = 0;\n\n          if (isSameContainer) {\n            boundaryPoints.ec = boundaryPoints.sc;\n            boundaryPoints.eo = eo - so;\n          }\n        }\n\n        return new WrappedRange(\n          boundaryPoints.sc,\n          boundaryPoints.so,\n          boundaryPoints.ec,\n          boundaryPoints.eo\n        );\n      };\n\n      /**\n       * delete contents on range\n       * @return {WrappedRange}\n       */\n      this.deleteContents = function () {\n        if (this.isCollapsed()) {\n          return this;\n        }\n\n        var rng = this.splitText();\n        var nodes = rng.nodes(null, {\n          fullyContains: true\n        });\n\n        // find new cursor point\n        var point = dom.prevPointUntil(rng.getStartPoint(), function (point) {\n          return !list.contains(nodes, point.node);\n        });\n\n        var emptyParents = [];\n        $.each(nodes, function (idx, node) {\n          // find empty parents\n          var parent = node.parentNode;\n          if (point.node !== parent && dom.nodeLength(parent) === 1) {\n            emptyParents.push(parent);\n          }\n          dom.remove(node, false);\n        });\n\n        // remove empty parents\n        $.each(emptyParents, function (idx, node) {\n          dom.remove(node, false);\n        });\n\n        return new WrappedRange(\n          point.node,\n          point.offset,\n          point.node,\n          point.offset\n        ).normalize();\n      };\n\n      /**\n       * makeIsOn: return isOn(pred) function\n       */\n      var makeIsOn = function (pred) {\n        return function () {\n          var ancestor = dom.ancestor(sc, pred);\n          return !!ancestor && (ancestor === dom.ancestor(ec, pred));\n        };\n      };\n\n      // isOnEditable: judge whether range is on editable or not\n      this.isOnEditable = makeIsOn(dom.isEditable);\n      // isOnList: judge whether range is on list node or not\n      this.isOnList = makeIsOn(dom.isList);\n      // isOnAnchor: judge whether range is on anchor node or not\n      this.isOnAnchor = makeIsOn(dom.isAnchor);\n      // isOnAnchor: judge whether range is on cell node or not\n      this.isOnCell = makeIsOn(dom.isCell);\n\n      /**\n       * @param {Function} pred\n       * @return {Boolean}\n       */\n      this.isLeftEdgeOf = function (pred) {\n        if (!dom.isLeftEdgePoint(this.getStartPoint())) {\n          return false;\n        }\n\n        var node = dom.ancestor(this.sc, pred);\n        return node && dom.isLeftEdgeOf(this.sc, node);\n      };\n\n      /**\n       * returns whether range was collapsed or not\n       */\n      this.isCollapsed = function () {\n        return sc === ec && so === eo;\n      };\n\n      /**\n       * wrap inline nodes which children of body with paragraph\n       *\n       * @return {WrappedRange}\n       */\n      this.wrapBodyInlineWithPara = function () {\n        if (dom.isBodyContainer(sc) && dom.isEmpty(sc)) {\n          sc.innerHTML = dom.emptyPara;\n          return new WrappedRange(sc.firstChild, 0, sc.firstChild, 0);\n        }\n\n        /**\n         * [workaround] firefox often create range on not visible point. so normalize here.\n         *  - firefox: |<p>text</p>|\n         *  - chrome: <p>|text|</p>\n         */\n        var rng = this.normalize();\n        if (dom.isParaInline(sc) || dom.isPara(sc)) {\n          return rng;\n        }\n\n        // find inline top ancestor\n        var topAncestor;\n        if (dom.isInline(rng.sc)) {\n          var ancestors = dom.listAncestor(rng.sc, func.not(dom.isInline));\n          topAncestor = list.last(ancestors);\n          if (!dom.isInline(topAncestor)) {\n            topAncestor = ancestors[ancestors.length - 2] || rng.sc.childNodes[rng.so];\n          }\n        } else {\n          topAncestor = rng.sc.childNodes[rng.so > 0 ? rng.so - 1 : 0];\n        }\n\n        // siblings not in paragraph\n        var inlineSiblings = dom.listPrev(topAncestor, dom.isParaInline).reverse();\n        inlineSiblings = inlineSiblings.concat(dom.listNext(topAncestor.nextSibling, dom.isParaInline));\n\n        // wrap with paragraph\n        if (inlineSiblings.length) {\n          var para = dom.wrap(list.head(inlineSiblings), 'p');\n          dom.appendChildNodes(para, list.tail(inlineSiblings));\n        }\n\n        return this.normalize();\n      };\n\n      /**\n       * insert node at current cursor\n       *\n       * @param {Node} node\n       * @return {Node}\n       */\n      this.insertNode = function (node) {\n        var rng = this.wrapBodyInlineWithPara().deleteContents();\n        var info = dom.splitPoint(rng.getStartPoint(), dom.isInline(node));\n\n        if (info.rightNode) {\n          info.rightNode.parentNode.insertBefore(node, info.rightNode);\n        } else {\n          info.container.appendChild(node);\n        }\n\n        return node;\n      };\n\n      /**\n       * insert html at current cursor\n       */\n      this.pasteHTML = function (markup) {\n        var contentsContainer = $('<div></div>').html(markup)[0];\n        var childNodes = list.from(contentsContainer.childNodes);\n\n        var rng = this.wrapBodyInlineWithPara().deleteContents();\n\n        return childNodes.reverse().map(function (childNode) {\n          return rng.insertNode(childNode);\n        }).reverse();\n      };\n\n      /**\n       * returns text in range\n       *\n       * @return {String}\n       */\n      this.toString = function () {\n        var nativeRng = nativeRange();\n        return agent.isW3CRangeSupport ? nativeRng.toString() : nativeRng.text;\n      };\n\n      /**\n       * returns range for word before cursor\n       *\n       * @param {Boolean} [findAfter] - find after cursor, default: false\n       * @return {WrappedRange}\n       */\n      this.getWordRange = function (findAfter) {\n        var endPoint = this.getEndPoint();\n\n        if (!dom.isCharPoint(endPoint)) {\n          return this;\n        }\n\n        var startPoint = dom.prevPointUntil(endPoint, function (point) {\n          return !dom.isCharPoint(point);\n        });\n\n        if (findAfter) {\n          endPoint = dom.nextPointUntil(endPoint, function (point) {\n            return !dom.isCharPoint(point);\n          });\n        }\n\n        return new WrappedRange(\n          startPoint.node,\n          startPoint.offset,\n          endPoint.node,\n          endPoint.offset\n        );\n      };\n\n      /**\n       * create offsetPath bookmark\n       *\n       * @param {Node} editable\n       */\n      this.bookmark = function (editable) {\n        return {\n          s: {\n            path: dom.makeOffsetPath(editable, sc),\n            offset: so\n          },\n          e: {\n            path: dom.makeOffsetPath(editable, ec),\n            offset: eo\n          }\n        };\n      };\n\n      /**\n       * create offsetPath bookmark base on paragraph\n       *\n       * @param {Node[]} paras\n       */\n      this.paraBookmark = function (paras) {\n        return {\n          s: {\n            path: list.tail(dom.makeOffsetPath(list.head(paras), sc)),\n            offset: so\n          },\n          e: {\n            path: list.tail(dom.makeOffsetPath(list.last(paras), ec)),\n            offset: eo\n          }\n        };\n      };\n\n      /**\n       * getClientRects\n       * @return {Rect[]}\n       */\n      this.getClientRects = function () {\n        var nativeRng = nativeRange();\n        return nativeRng.getClientRects();\n      };\n    };\n\n  /**\n   * @class core.range\n   *\n   * Data structure\n   *  * BoundaryPoint: a point of dom tree\n   *  * BoundaryPoints: two boundaryPoints corresponding to the start and the end of the Range\n   *\n   * See to http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Position\n   *\n   * @singleton\n   * @alternateClassName range\n   */\n    return {\n      /**\n       * @method\n       *\n       * create Range Object From arguments or Browser Selection\n       *\n       * @param {Node} sc - start container\n       * @param {Number} so - start offset\n       * @param {Node} ec - end container\n       * @param {Number} eo - end offset\n       * @return {WrappedRange}\n       */\n      create : function (sc, so, ec, eo) {\n        if (!arguments.length) { // from Browser Selection\n          if (agent.isW3CRangeSupport) {\n            var selection = document.getSelection();\n            if (!selection || selection.rangeCount === 0) {\n              return null;\n            } else if (dom.isBody(selection.anchorNode)) {\n              // Firefox: returns entire body as range on initialization. We won't never need it.\n              return null;\n            }\n\n            var nativeRng = selection.getRangeAt(0);\n            sc = nativeRng.startContainer;\n            so = nativeRng.startOffset;\n            ec = nativeRng.endContainer;\n            eo = nativeRng.endOffset;\n          } else { // IE8: TextRange\n            var textRange = document.selection.createRange();\n            var textRangeEnd = textRange.duplicate();\n            textRangeEnd.collapse(false);\n            var textRangeStart = textRange;\n            textRangeStart.collapse(true);\n\n            var startPoint = textRangeToPoint(textRangeStart, true),\n            endPoint = textRangeToPoint(textRangeEnd, false);\n\n            // same visible point case: range was collapsed.\n            if (dom.isText(startPoint.node) && dom.isLeftEdgePoint(startPoint) &&\n                dom.isTextNode(endPoint.node) && dom.isRightEdgePoint(endPoint) &&\n                endPoint.node.nextSibling === startPoint.node) {\n              startPoint = endPoint;\n            }\n\n            sc = startPoint.cont;\n            so = startPoint.offset;\n            ec = endPoint.cont;\n            eo = endPoint.offset;\n          }\n        } else if (arguments.length === 2) { //collapsed\n          ec = sc;\n          eo = so;\n        }\n        return new WrappedRange(sc, so, ec, eo);\n      },\n\n      /**\n       * @method\n       *\n       * create WrappedRange from node\n       *\n       * @param {Node} node\n       * @return {WrappedRange}\n       */\n      createFromNode: function (node) {\n        var sc = node;\n        var so = 0;\n        var ec = node;\n        var eo = dom.nodeLength(ec);\n\n        // browsers can't target a picture or void node\n        if (dom.isVoid(sc)) {\n          so = dom.listPrev(sc).length - 1;\n          sc = sc.parentNode;\n        }\n        if (dom.isBR(ec)) {\n          eo = dom.listPrev(ec).length - 1;\n          ec = ec.parentNode;\n        } else if (dom.isVoid(ec)) {\n          eo = dom.listPrev(ec).length;\n          ec = ec.parentNode;\n        }\n\n        return this.create(sc, so, ec, eo);\n      },\n\n      /**\n       * create WrappedRange from node after position\n       *\n       * @param {Node} node\n       * @return {WrappedRange}\n       */\n      createFromNodeBefore: function (node) {\n        return this.createFromNode(node).collapse(true);\n      },\n\n      /**\n       * create WrappedRange from node after position\n       *\n       * @param {Node} node\n       * @return {WrappedRange}\n       */\n      createFromNodeAfter: function (node) {\n        return this.createFromNode(node).collapse();\n      },\n\n      /**\n       * @method\n       *\n       * create WrappedRange from bookmark\n       *\n       * @param {Node} editable\n       * @param {Object} bookmark\n       * @return {WrappedRange}\n       */\n      createFromBookmark : function (editable, bookmark) {\n        var sc = dom.fromOffsetPath(editable, bookmark.s.path);\n        var so = bookmark.s.offset;\n        var ec = dom.fromOffsetPath(editable, bookmark.e.path);\n        var eo = bookmark.e.offset;\n        return new WrappedRange(sc, so, ec, eo);\n      },\n\n      /**\n       * @method\n       *\n       * create WrappedRange from paraBookmark\n       *\n       * @param {Object} bookmark\n       * @param {Node[]} paras\n       * @return {WrappedRange}\n       */\n      createFromParaBookmark: function (bookmark, paras) {\n        var so = bookmark.s.offset;\n        var eo = bookmark.e.offset;\n        var sc = dom.fromOffsetPath(list.head(paras), bookmark.s.path);\n        var ec = dom.fromOffsetPath(list.last(paras), bookmark.e.path);\n\n        return new WrappedRange(sc, so, ec, eo);\n      }\n    };\n  })();\n\n  /**\n   * @class defaults\n   *\n   * @singleton\n   */\n  var defaults = {\n    /** @property */\n    version: '0.6.17',\n\n    /**\n     *\n     * for event options, reference to EventHandler.attach\n     *\n     * @property {Object} options\n     * @property {String/Number} [options.width=null] set editor width\n     * @property {String/Number} [options.height=null] set editor height, ex) 300\n     * @property {String/Number} options.minHeight set minimum height of editor\n     * @property {String/Number} options.maxHeight\n     * @property {String/Number} options.focus\n     * @property {Number} options.tabsize\n     * @property {Boolean} options.styleWithSpan\n     * @property {Object} options.codemirror\n     * @property {Object} [options.codemirror.mode='text/html']\n     * @property {Object} [options.codemirror.htmlMode=true]\n     * @property {Object} [options.codemirror.lineNumbers=true]\n     * @property {String} [options.lang=en-US] language 'en-US', 'ko-KR', ...\n     * @property {String} [options.direction=null] text direction, ex) 'rtl'\n     * @property {Array} [options.toolbar]\n     * @property {Boolean} [options.airMode=false]\n     * @property {Array} [options.airPopover]\n     * @property {Fucntion} [options.onInit] initialize\n     * @property {Fucntion} [options.onsubmit]\n     */\n    options: {\n      width: null,                  // set editor width\n      height: null,                 // set editor height, ex) 300\n\n      minHeight: null,              // set minimum height of editor\n      maxHeight: null,              // set maximum height of editor\n\n      focus: false,                 // set focus to editable area after initializing summernote\n\n      tabsize: 4,                   // size of tab ex) 2 or 4\n      styleWithSpan: true,          // style with span (Chrome and FF only)\n\n      disableLinkTarget: false,     // hide link Target Checkbox\n      disableDragAndDrop: false,    // disable drag and drop event\n      disableResizeEditor: false,   // disable resizing editor\n      disableResizeImage: false,    // disable resizing image\n\n      shortcuts: true,              // enable keyboard shortcuts\n\n      placeholder: false,           // enable placeholder text\n      prettifyHtml: true,           // enable prettifying html while toggling codeview\n\n      iconPrefix: 'mbr-icon-',         // prefix for css icon classes\n\n      icons: {\n        font: {\n          bold: 'bold',\n          italic: 'italic',\n          underline: 'underline',\n          clear: 'eraser',\n          height: 'text-height',\n          strikethrough: 'strikethrough',\n          superscript: 'superscript',\n          subscript: 'subscript'\n        },\n        image: {\n          image: 'picture-o',\n          floatLeft: 'align-left',\n          floatRight: 'align-right',\n          floatNone: 'align-justify',\n          shapeRounded: 'square',\n          shapeCircle: 'circle-o',\n          shapeThumbnail: 'picture-o',\n          shapeNone: 'times',\n          remove: 'trash-o'\n        },\n        link: {\n          link: 'link',\n          unlink: 'unlink',\n          edit: 'edit2'\n        },\n        table: {\n          table: 'table'\n        },\n        hr: {\n          insert: 'minus'\n        },\n        style: {\n          style: 'magic-stick'\n        },\n        lists: {\n          unordered: 'bulleted-list',\n          ordered: 'numbered-list'\n        },\n        options: {\n          help: 'question',\n          fullscreen: 'arrows-alt',\n          codeview: 'code'\n        },\n        paragraph: {\n          paragraph: 'align-left',\n          outdent: 'outdent',\n          indent: 'indent',\n          left: 'align-left',\n          center: 'align-center',\n          right: 'align-right',\n          justify: 'align-justify'\n        },\n        color: {\n          recent: 'font'\n        },\n        history: {\n          undo: 'undo',\n          redo: 'repeat'\n        },\n        misc: {\n          check: 'check'\n        }\n      },\n\n      dialogsInBody: false,          // false will add dialogs into editor\n\n      codemirror: {                 // codemirror options\n        mode: 'text/html',\n        htmlMode: true,\n        lineNumbers: true\n      },\n\n      // language\n      lang: 'en-US',                // language 'en-US', 'ko-KR', ...\n      direction: null,              // text direction, ex) 'rtl'\n\n      // toolbar\n      toolbar: [\n        ['style', ['style']],\n        ['font', ['bold', 'italic', 'underline', 'clear']],\n        // ['font', ['bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript', 'clear']],\n        ['fontname', ['fontname']],\n        ['fontsize', ['fontsize']],\n        ['color', ['color']],\n        ['para', ['ul', 'ol', 'paragraph']],\n        ['height', ['height']],\n        ['table', ['table']],\n        ['insert', ['link', 'picture', 'hr']],\n        ['view', ['fullscreen', 'codeview']],\n        ['help', ['help']]\n      ],\n\n      plugin : { },\n\n      // air mode: inline editor\n      airMode: false,\n      // airPopover: [\n      //   ['style', ['style']],\n      //   ['font', ['bold', 'italic', 'underline', 'clear']],\n      //   ['fontname', ['fontname']],\n      //   ['color', ['color']],\n      //   ['para', ['ul', 'ol', 'paragraph']],\n      //   ['height', ['height']],\n      //   ['table', ['table']],\n      //   ['insert', ['link', 'picture']],\n      //   ['help', ['help']]\n      // ],\n      airPopover: [\n        ['color', ['color']],\n        ['font', ['bold', 'underline', 'clear']],\n        ['para', ['ul', 'paragraph']],\n        ['table', ['table']],\n        ['insert', ['link', 'picture']]\n      ],\n\n      // style tag\n      styleTags: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4'],\n\n      // default fontName\n      defaultFontName: 'Helvetica Neue',\n\n      // fontName\n      fontNames: [\n        'Arial', 'Arial Black', 'Comic Sans MS', 'Courier New',\n        'Helvetica Neue', 'Helvetica', 'Impact', 'Lucida Grande',\n        'Tahoma', 'Times New Roman', 'Verdana'\n      ],\n      fontNamesIgnoreCheck: [],\n\n      fontSizes: ['8', '9', '10', '11', '12', '14', '18', '24', '36'],\n\n      // pallete colors(n x n)\n      colors: [\n        ['#000000', '#424242', '#636363', '#9C9C94', '#CEC6CE', '#EFEFEF', '#F7F7F7', '#FFFFFF'],\n        ['#FF0000', '#FF9C00', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#9C00FF', '#FF00FF'],\n        ['#F7C6CE', '#FFE7CE', '#FFEFC6', '#D6EFD6', '#CEDEE7', '#CEE7F7', '#D6D6E7', '#E7D6DE'],\n        ['#E79C9C', '#FFC69C', '#FFE79C', '#B5D6A5', '#A5C6CE', '#9CC6EF', '#B5A5D6', '#D6A5BD'],\n        ['#E76363', '#F7AD6B', '#FFD663', '#94BD7B', '#73A5AD', '#6BADDE', '#8C7BC6', '#C67BA5'],\n        ['#CE0000', '#E79439', '#EFC631', '#6BA54A', '#4A7B8C', '#3984C6', '#634AA5', '#A54A7B'],\n        ['#9C0000', '#B56308', '#BD9400', '#397B21', '#104A5A', '#085294', '#311873', '#731842'],\n        ['#630000', '#7B3900', '#846300', '#295218', '#083139', '#003163', '#21104A', '#4A1031']\n      ],\n\n      // lineHeight\n      lineHeights: ['1.0', '1.2', '1.4', '1.5', '1.6', '1.8', '2.0', '3.0'],\n\n      // insertTable max size\n      insertTableMaxSize: {\n        col: 10,\n        row: 10\n      },\n\n      // image\n      maximumImageFileSize: null, // size in bytes, null = no limit\n\n      // callbacks\n      oninit: null,             // initialize\n      onfocus: null,            // editable has focus\n      onblur: null,             // editable out of focus\n      onenter: null,            // enter key pressed\n      onkeyup: null,            // keyup\n      onkeydown: null,          // keydown\n      onImageUpload: null,      // imageUpload\n      onImageUploadError: null, // imageUploadError\n      onMediaDelete: null,      // media delete\n      onToolbarClick: null,\n      onsubmit: null,\n\n      /**\n       * manipulate link address when user create link\n       * @param {String} sLinkUrl\n       * @return {String}\n       */\n      onCreateLink: function (sLinkUrl) {\n        if (sLinkUrl.indexOf('@') !== -1 && sLinkUrl.indexOf(':') === -1) {\n          sLinkUrl =  'mailto:' + sLinkUrl;\n        }\n\n        return sLinkUrl;\n      },\n\n      keyMap: {\n        pc: {\n          'ENTER': 'insertParagraph',\n          'CTRL+Z': 'undo',\n          'CTRL+Y': 'redo',\n          'TAB': 'tab',\n          'SHIFT+TAB': 'untab',\n          'CTRL+B': 'bold',\n          'CTRL+I': 'italic',\n          'CTRL+U': 'underline',\n          'CTRL+SHIFT+S': 'strikethrough',\n          'CTRL+BACKSLASH': 'removeFormat',\n          'CTRL+SHIFT+L': 'justifyLeft',\n          'CTRL+SHIFT+E': 'justifyCenter',\n          'CTRL+SHIFT+R': 'justifyRight',\n          'CTRL+SHIFT+J': 'justifyFull',\n          'CTRL+SHIFT+NUM7': 'insertUnorderedList',\n          'CTRL+SHIFT+NUM8': 'insertOrderedList',\n          'CTRL+LEFTBRACKET': 'outdent',\n          'CTRL+RIGHTBRACKET': 'indent',\n          'CTRL+ENTER': 'insertHorizontalRule'\n        },\n\n        mac: {\n          'ENTER': 'insertParagraph',\n          'CMD+Z': 'undo',\n          'CMD+SHIFT+Z': 'redo',\n          'TAB': 'tab',\n          'SHIFT+TAB': 'untab',\n          'CMD+B': 'bold',\n          'CMD+I': 'italic',\n          'CMD+U': 'underline',\n          'CMD+SHIFT+S': 'strikethrough',\n          'CMD+BACKSLASH': 'removeFormat',\n          'CMD+SHIFT+L': 'justifyLeft',\n          'CMD+SHIFT+E': 'justifyCenter',\n          'CMD+SHIFT+R': 'justifyRight',\n          'CMD+SHIFT+J': 'justifyFull',\n          'CMD+SHIFT+NUM7': 'insertUnorderedList',\n          'CMD+SHIFT+NUM8': 'insertOrderedList',\n          'CMD+LEFTBRACKET': 'outdent',\n          'CMD+RIGHTBRACKET': 'indent',\n          'CMD+ENTER': 'insertHorizontalRule',\n          'CMD+V': 'paste'\n        }\n      }\n    },\n\n    // default language: en-US\n    lang: {\n      'en-US': {\n        font: {\n          bold: 'Bold',\n          italic: 'Italic',\n          underline: 'Underline',\n          clear: 'Remove Font Style',\n          height: 'Line Height',\n          name: 'Font Family',\n          strikethrough: 'Strikethrough',\n          subscript: 'Subscript',\n          superscript: 'Superscript',\n          size: 'Font Size'\n        },\n        image: {\n          image: 'Picture',\n          insert: 'Insert Image',\n          resizeFull: 'Resize Full',\n          resizeHalf: 'Resize Half',\n          resizeQuarter: 'Resize Quarter',\n          floatLeft: 'Float Left',\n          floatRight: 'Float Right',\n          floatNone: 'Float None',\n          shapeRounded: 'Shape: Rounded',\n          shapeCircle: 'Shape: Circle',\n          shapeThumbnail: 'Shape: Thumbnail',\n          shapeNone: 'Shape: None',\n          dragImageHere: 'Drag image or text here',\n          dropImage: 'Drop image or Text',\n          selectFromFiles: 'Select from files',\n          maximumFileSize: 'Maximum file size',\n          maximumFileSizeError: 'Maximum file size exceeded.',\n          url: 'Image URL',\n          remove: 'Remove Image'\n        },\n        link: {\n          link: 'Link',\n          insert: 'Insert Link',\n          unlink: 'Unlink',\n          edit: 'Edit',\n          textToDisplay: 'Text to display',\n          url: 'To what URL should this link go?',\n          openInNewWindow: 'Open in new window'\n        },\n        table: {\n          table: 'Table'\n        },\n        hr: {\n          insert: 'Insert Horizontal Rule'\n        },\n        style: {\n          style: 'Style',\n          normal: 'Normal',\n          blockquote: 'Quote',\n          pre: 'Code',\n          h1: 'Header 1',\n          h2: 'Header 2',\n          h3: 'Header 3',\n          h4: 'Header 4',\n          h5: 'Header 5',\n          h6: 'Header 6'\n        },\n        lists: {\n          unordered: 'Unordered list',\n          ordered: 'Ordered list'\n        },\n        options: {\n          help: 'Help',\n          fullscreen: 'Full Screen',\n          codeview: 'Code View'\n        },\n        paragraph: {\n          paragraph: 'Paragraph',\n          outdent: 'Outdent',\n          indent: 'Indent',\n          left: 'Align left',\n          center: 'Align center',\n          right: 'Align right',\n          justify: 'Justify full'\n        },\n        color: {\n          recent: 'Recent Color',\n          more: 'More Color',\n          background: 'Background Color',\n          foreground: 'Foreground Color',\n          transparent: 'Transparent',\n          setTransparent: 'Set transparent',\n          reset: 'Reset',\n          resetToDefault: 'Reset to default'\n        },\n        shortcut: {\n          shortcuts: 'Keyboard shortcuts',\n          close: 'Close',\n          textFormatting: 'Text formatting',\n          action: 'Action',\n          paragraphFormatting: 'Paragraph formatting',\n          documentStyle: 'Document Style',\n          extraKeys: 'Extra keys'\n        },\n        history: {\n          undo: 'Undo',\n          redo: 'Redo'\n        }\n      }\n    }\n  };\n\n  /**\n   * @class core.async\n   *\n   * Async functions which returns `Promise`\n   *\n   * @singleton\n   * @alternateClassName async\n   */\n  var async = (function () {\n    /**\n     * @method readFileAsDataURL\n     *\n     * read contents of file as representing URL\n     *\n     * @param {File} file\n     * @return {Promise} - then: sDataUrl\n     */\n    var readFileAsDataURL = function (file) {\n      return $.Deferred(function (deferred) {\n        $.extend(new FileReader(), {\n          onload: function (e) {\n            var sDataURL = e.target.result;\n            deferred.resolve(sDataURL);\n          },\n          onerror: function () {\n            deferred.reject(this);\n          }\n        }).readAsDataURL(file);\n      }).promise();\n    };\n\n    /**\n     * @method createImage\n     *\n     * create `<image>` from url string\n     *\n     * @param {String} sUrl\n     * @param {String} filename\n     * @return {Promise} - then: $image\n     */\n    var createImage = function (sUrl, filename) {\n      return $.Deferred(function (deferred) {\n        var $img = $('<img>');\n\n        $img.one('load', function () {\n          $img.off('error abort');\n          deferred.resolve($img);\n        }).one('error abort', function () {\n          $img.off('load').detach();\n          deferred.reject($img);\n        }).css({\n          display: 'none'\n        }).appendTo(document.body).attr({\n          'src': sUrl,\n          'data-filename': filename\n        });\n      }).promise();\n    };\n\n    return {\n      readFileAsDataURL: readFileAsDataURL,\n      createImage: createImage\n    };\n  })();\n\n  /**\n   * @class core.key\n   *\n   * Object for keycodes.\n   *\n   * @singleton\n   * @alternateClassName key\n   */\n  var key = (function () {\n    var keyMap = {\n      'BACKSPACE': 8,\n      'TAB': 9,\n      'ENTER': 13,\n      'SPACE': 32,\n\n      // Arrow\n      'LEFT': 37,\n      'UP': 38,\n      'RIGHT': 39,\n      'DOWN': 40,\n\n      // Number: 0-9\n      'NUM0': 48,\n      'NUM1': 49,\n      'NUM2': 50,\n      'NUM3': 51,\n      'NUM4': 52,\n      'NUM5': 53,\n      'NUM6': 54,\n      'NUM7': 55,\n      'NUM8': 56,\n\n      // Alphabet: a-z\n      'B': 66,\n      'E': 69,\n      'I': 73,\n      'J': 74,\n      'K': 75,\n      'L': 76,\n      'R': 82,\n      'S': 83,\n      'U': 85,\n      'V': 86,\n      'Y': 89,\n      'Z': 90,\n\n      'SLASH': 191,\n      'LEFTBRACKET': 219,\n      'BACKSLASH': 220,\n      'RIGHTBRACKET': 221\n    };\n\n    return {\n      /**\n       * @method isEdit\n       *\n       * @param {Number} keyCode\n       * @return {Boolean}\n       */\n      isEdit: function (keyCode) {\n        return list.contains([\n          keyMap.BACKSPACE,\n          keyMap.TAB,\n          keyMap.ENTER,\n          keyMap.SPACe\n        ], keyCode);\n      },\n      /**\n       * @method isMove\n       *\n       * @param {Number} keyCode\n       * @return {Boolean}\n       */\n      isMove: function (keyCode) {\n        return list.contains([\n          keyMap.LEFT,\n          keyMap.UP,\n          keyMap.RIGHT,\n          keyMap.DOWN\n        ], keyCode);\n      },\n      /**\n       * @property {Object} nameFromCode\n       * @property {String} nameFromCode.8 \"BACKSPACE\"\n       */\n      nameFromCode: func.invertObject(keyMap),\n      code: keyMap\n    };\n  })();\n\n  /**\n   * @class editing.History\n   *\n   * Editor History\n   *\n   */\n  var History = function ($editable) {\n    var stack = [], stackOffset = -1;\n    var editable = $editable[0];\n\n    var makeSnapshot = function () {\n      var rng = range.create();\n      var emptyBookmark = {s: {path: [], offset: 0}, e: {path: [], offset: 0}};\n\n      return {\n        contents: $editable.html(),\n        bookmark: (rng ? rng.bookmark(editable) : emptyBookmark)\n      };\n    };\n\n    var applySnapshot = function (snapshot) {\n      if (snapshot.contents !== null) {\n        $editable.html(snapshot.contents);\n      }\n      if (snapshot.bookmark !== null) {\n        range.createFromBookmark(editable, snapshot.bookmark).select();\n      }\n    };\n\n    /**\n     * undo\n     */\n    this.undo = function () {\n      // Create snap shot if not yet recorded\n      if ($editable.html() !== stack[stackOffset].contents) {\n        this.recordUndo();\n      }\n\n      if (0 < stackOffset) {\n        stackOffset--;\n        applySnapshot(stack[stackOffset]);\n      }\n    };\n\n    /**\n     * redo\n     */\n    this.redo = function () {\n      if (stack.length - 1 > stackOffset) {\n        stackOffset++;\n        applySnapshot(stack[stackOffset]);\n      }\n    };\n\n    /**\n     * recorded undo\n     */\n    this.recordUndo = function () {\n      stackOffset++;\n\n      // Wash out stack after stackOffset\n      if (stack.length > stackOffset) {\n        stack = stack.slice(0, stackOffset);\n      }\n\n      // Create new snapshot and push it to the end\n      stack.push(makeSnapshot());\n    };\n\n    // Create first undo stack\n    this.recordUndo();\n  };\n\n  /**\n   * @class editing.Style\n   *\n   * Style\n   *\n   */\n  var Style = function () {\n    /**\n     * @method jQueryCSS\n     *\n     * [workaround] for old jQuery\n     * passing an array of style properties to .css()\n     * will result in an object of property-value pairs.\n     * (compability with version < 1.9)\n     *\n     * @private\n     * @param  {jQuery} $obj\n     * @param  {Array} propertyNames - An array of one or more CSS properties.\n     * @return {Object}\n     */\n    var jQueryCSS = function ($obj, propertyNames) {\n      if (agent.jqueryVersion < 1.9) {\n        var result = {};\n        $.each(propertyNames, function (idx, propertyName) {\n          result[propertyName] = $obj.css(propertyName);\n        });\n        return result;\n      }\n      return $obj.css.call($obj, propertyNames);\n    };\n\n    /**\n     * returns style object from node\n     *\n     * @param {jQuery} $node\n     * @return {Object}\n     */\n    this.fromNode = function ($node) {\n      var properties = ['font-family', 'font-size', 'text-align', 'list-style-type', 'line-height'];\n      var styleInfo = jQueryCSS($node, properties) || {};\n      styleInfo['font-size'] = parseInt(styleInfo['font-size'], 10);\n      return styleInfo;\n    };\n\n    /**\n     * paragraph level style\n     *\n     * @param {WrappedRange} rng\n     * @param {Object} styleInfo\n     */\n    this.stylePara = function (rng, styleInfo) {\n      $.each(rng.nodes(dom.isPara, {\n        includeAncestor: true\n      }), function (idx, para) {\n        $(para).css(styleInfo);\n      });\n    };\n\n    /**\n     * insert and returns styleNodes on range.\n     *\n     * @param {WrappedRange} rng\n     * @param {Object} [options] - options for styleNodes\n     * @param {String} [options.nodeName] - default: `SPAN`\n     * @param {Boolean} [options.expandClosestSibling] - default: `false`\n     * @param {Boolean} [options.onlyPartialContains] - default: `false`\n     * @return {Node[]}\n     */\n    this.styleNodes = function (rng, options) {\n      rng = rng.splitText();\n\n      var nodeName = options && options.nodeName || 'SPAN';\n      var expandClosestSibling = !!(options && options.expandClosestSibling);\n      var onlyPartialContains = !!(options && options.onlyPartialContains);\n\n      if (rng.isCollapsed()) {\n        return [rng.insertNode(dom.create(nodeName))];\n      }\n\n      var pred = dom.makePredByNodeName(nodeName);\n      var nodes = rng.nodes(dom.isText, {\n        fullyContains: true\n      }).map(function (text) {\n        return dom.singleChildAncestor(text, pred) || dom.wrap(text, nodeName);\n      });\n\n      if (expandClosestSibling) {\n        if (onlyPartialContains) {\n          var nodesInRange = rng.nodes();\n          // compose with partial contains predication\n          pred = func.and(pred, function (node) {\n            return list.contains(nodesInRange, node);\n          });\n        }\n\n        return nodes.map(function (node) {\n          var siblings = dom.withClosestSiblings(node, pred);\n          var head = list.head(siblings);\n          var tails = list.tail(siblings);\n          $.each(tails, function (idx, elem) {\n            dom.appendChildNodes(head, elem.childNodes);\n            dom.remove(elem);\n          });\n          return list.head(siblings);\n        });\n      } else {\n        return nodes;\n      }\n    };\n\n    /**\n     * get current style on cursor\n     *\n     * @param {WrappedRange} rng\n     * @return {Object} - object contains style properties.\n     */\n    this.current = function (rng) {\n      var $cont = $(dom.isText(rng.sc) ? rng.sc.parentNode : rng.sc);\n      var styleInfo = this.fromNode($cont);\n\n      // document.queryCommandState for toggle state\n      styleInfo['font-bold'] = document.queryCommandState('bold') ? 'bold' : 'normal';\n      styleInfo['font-italic'] = document.queryCommandState('italic') ? 'italic' : 'normal';\n      styleInfo['font-underline'] = document.queryCommandState('underline') ? 'underline' : 'normal';\n      styleInfo['font-strikethrough'] = document.queryCommandState('strikeThrough') ? 'strikethrough' : 'normal';\n      styleInfo['font-superscript'] = document.queryCommandState('superscript') ? 'superscript' : 'normal';\n      styleInfo['font-subscript'] = document.queryCommandState('subscript') ? 'subscript' : 'normal';\n\n      // list-style-type to list-style(unordered, ordered)\n      if (!rng.isOnList()) {\n        styleInfo['list-style'] = 'none';\n      } else {\n        var aOrderedType = ['circle', 'disc', 'disc-leading-zero', 'square'];\n        var isUnordered = $.inArray(styleInfo['list-style-type'], aOrderedType) > -1;\n        styleInfo['list-style'] = isUnordered ? 'unordered' : 'ordered';\n      }\n\n      var para = dom.ancestor(rng.sc, dom.isPara);\n      if (para && para.style['line-height']) {\n        styleInfo['line-height'] = para.style.lineHeight;\n      } else {\n        var lineHeight = parseInt(styleInfo['line-height'], 10) / parseInt(styleInfo['font-size'], 10);\n        styleInfo['line-height'] = lineHeight.toFixed(1);\n      }\n\n      styleInfo.anchor = rng.isOnAnchor() && dom.ancestor(rng.sc, dom.isAnchor);\n      styleInfo.ancestors = dom.listAncestor(rng.sc, dom.isEditable);\n      styleInfo.range = rng;\n\n      return styleInfo;\n    };\n  };\n\n\n  /**\n   * @class editing.Bullet\n   *\n   * @alternateClassName Bullet\n   */\n  var Bullet = function () {\n    /**\n     * @method insertOrderedList\n     *\n     * toggle ordered list\n     *\n     * @type command\n     */\n    this.insertOrderedList = function () {\n      this.toggleList('OL');\n    };\n\n    /**\n     * @method insertUnorderedList\n     *\n     * toggle unordered list\n     *\n     * @type command\n     */\n    this.insertUnorderedList = function () {\n      this.toggleList('UL');\n    };\n\n    /**\n     * @method indent\n     *\n     * indent\n     *\n     * @type command\n     */\n    this.indent = function () {\n      var self = this;\n      var rng = range.create().wrapBodyInlineWithPara();\n\n      var paras = rng.nodes(dom.isPara, { includeAncestor: true });\n      var clustereds = list.clusterBy(paras, func.peq2('parentNode'));\n\n      $.each(clustereds, function (idx, paras) {\n        var head = list.head(paras);\n        if (dom.isLi(head)) {\n          self.wrapList(paras, head.parentNode.nodeName);\n        } else {\n          $.each(paras, function (idx, para) {\n            $(para).css('marginLeft', function (idx, val) {\n              return (parseInt(val, 10) || 0) + 25;\n            });\n          });\n        }\n      });\n\n      rng.select();\n    };\n\n    /**\n     * @method outdent\n     *\n     * outdent\n     *\n     * @type command\n     */\n    this.outdent = function () {\n      var self = this;\n      var rng = range.create().wrapBodyInlineWithPara();\n\n      var paras = rng.nodes(dom.isPara, { includeAncestor: true });\n      var clustereds = list.clusterBy(paras, func.peq2('parentNode'));\n\n      $.each(clustereds, function (idx, paras) {\n        var head = list.head(paras);\n        if (dom.isLi(head)) {\n          self.releaseList([paras]);\n        } else {\n          $.each(paras, function (idx, para) {\n            $(para).css('marginLeft', function (idx, val) {\n              val = (parseInt(val, 10) || 0);\n              return val > 25 ? val - 25 : '';\n            });\n          });\n        }\n      });\n\n      rng.select();\n    };\n\n    /**\n     * @method toggleList\n     *\n     * toggle list\n     *\n     * @param {String} listName - OL or UL\n     */\n    this.toggleList = function (listName) {\n      var self = this;\n      var rng = range.create().wrapBodyInlineWithPara();\n\n      var paras = rng.nodes(dom.isPara, { includeAncestor: true });\n      var bookmark = rng.paraBookmark(paras);\n      var clustereds = list.clusterBy(paras, func.peq2('parentNode'));\n\n      // paragraph to list\n      if (list.find(paras, dom.isPurePara)) {\n        var wrappedParas = [];\n        $.each(clustereds, function (idx, paras) {\n          wrappedParas = wrappedParas.concat(self.wrapList(paras, listName));\n        });\n        paras = wrappedParas;\n      // list to paragraph or change list style\n      } else {\n        var diffLists = rng.nodes(dom.isList, {\n          includeAncestor: true\n        }).filter(function (listNode) {\n          return !$.nodeName(listNode, listName);\n        });\n\n        if (diffLists.length) {\n          $.each(diffLists, function (idx, listNode) {\n            dom.replace(listNode, listName);\n          });\n        } else {\n          paras = this.releaseList(clustereds, true);\n        }\n      }\n\n      range.createFromParaBookmark(bookmark, paras).select();\n    };\n\n    /**\n     * @method wrapList\n     *\n     * @param {Node[]} paras\n     * @param {String} listName\n     * @return {Node[]}\n     */\n    this.wrapList = function (paras, listName) {\n      var head = list.head(paras);\n      var last = list.last(paras);\n\n      var prevList = dom.isList(head.previousSibling) && head.previousSibling;\n      var nextList = dom.isList(last.nextSibling) && last.nextSibling;\n\n      var listNode = prevList || dom.insertAfter(dom.create(listName || 'UL'), last);\n\n      // P to LI\n      paras = paras.map(function (para) {\n        return dom.isPurePara(para) ? dom.replace(para, 'LI') : para;\n      });\n\n      // append to list(<ul>, <ol>)\n      dom.appendChildNodes(listNode, paras);\n\n      if (nextList) {\n        dom.appendChildNodes(listNode, list.from(nextList.childNodes));\n        dom.remove(nextList);\n      }\n\n      return paras;\n    };\n\n    /**\n     * @method releaseList\n     *\n     * @param {Array[]} clustereds\n     * @param {Boolean} isEscapseToBody\n     * @return {Node[]}\n     */\n    this.releaseList = function (clustereds, isEscapseToBody) {\n      var releasedParas = [];\n\n      $.each(clustereds, function (idx, paras) {\n        var head = list.head(paras);\n        var last = list.last(paras);\n\n        var headList = isEscapseToBody ? dom.lastAncestor(head, dom.isList) :\n                                         head.parentNode;\n        var lastList = headList.childNodes.length > 1 ? dom.splitTree(headList, {\n          node: last.parentNode,\n          offset: dom.position(last) + 1\n        }, {\n          isSkipPaddingBlankHTML: true\n        }) : null;\n\n        var middleList = dom.splitTree(headList, {\n          node: head.parentNode,\n          offset: dom.position(head)\n        }, {\n          isSkipPaddingBlankHTML: true\n        });\n\n        paras = isEscapseToBody ? dom.listDescendant(middleList, dom.isLi) :\n                                  list.from(middleList.childNodes).filter(dom.isLi);\n\n        // LI to P\n        if (isEscapseToBody || !dom.isList(headList.parentNode)) {\n          paras = paras.map(function (para) {\n            return dom.replace(para, 'P');\n          });\n        }\n\n        $.each(list.from(paras).reverse(), function (idx, para) {\n          dom.insertAfter(para, headList);\n        });\n\n        // remove empty lists\n        var rootLists = list.compact([headList, middleList, lastList]);\n        $.each(rootLists, function (idx, rootList) {\n          var listNodes = [rootList].concat(dom.listDescendant(rootList, dom.isList));\n          $.each(listNodes.reverse(), function (idx, listNode) {\n            if (!dom.nodeLength(listNode)) {\n              dom.remove(listNode, true);\n            }\n          });\n        });\n\n        releasedParas = releasedParas.concat(paras);\n      });\n\n      return releasedParas;\n    };\n  };\n\n\n  /**\n   * @class editing.Typing\n   *\n   * Typing\n   *\n   */\n  var Typing = function () {\n\n    // a Bullet instance to toggle lists off\n    var bullet = new Bullet();\n\n    /**\n     * insert tab\n     *\n     * @param {jQuery} $editable\n     * @param {WrappedRange} rng\n     * @param {Number} tabsize\n     */\n    this.insertTab = function ($editable, rng, tabsize) {\n      var tab = dom.createText(new Array(tabsize + 1).join(dom.NBSP_CHAR));\n      rng = rng.deleteContents();\n      rng.insertNode(tab, true);\n\n      rng = range.create(tab, tabsize);\n      rng.select();\n    };\n\n    /**\n     * insert paragraph\n     */\n    this.insertParagraph = function () {\n      var rng = range.create();\n\n      // deleteContents on range.\n      rng = rng.deleteContents();\n\n      // Wrap range if it needs to be wrapped by paragraph\n      rng = rng.wrapBodyInlineWithPara();\n\n      // finding paragraph\n      var splitRoot = dom.ancestor(rng.sc, dom.isPara);\n\n      var nextPara;\n      // on paragraph: split paragraph\n      if (splitRoot) {\n        // if it is an empty line with li\n        if (dom.isEmpty(splitRoot) && dom.isLi(splitRoot)) {\n          // disable UL/OL and escape!\n          bullet.toggleList(splitRoot.parentNode.nodeName);\n          return;\n        // if new line has content (not a line break)\n        } else {\n          nextPara = dom.splitTree(splitRoot, rng.getStartPoint());\n\n          var emptyAnchors = dom.listDescendant(splitRoot, dom.isEmptyAnchor);\n          emptyAnchors = emptyAnchors.concat(dom.listDescendant(nextPara, dom.isEmptyAnchor));\n\n          $.each(emptyAnchors, function (idx, anchor) {\n            dom.remove(anchor);\n          });\n        }\n      // no paragraph: insert empty paragraph\n      } else {\n        var next = rng.sc.childNodes[rng.so];\n        nextPara = $(dom.emptyPara)[0];\n        if (next) {\n          rng.sc.insertBefore(nextPara, next);\n        } else {\n          rng.sc.appendChild(nextPara);\n        }\n      }\n\n      range.create(nextPara, 0).normalize().select();\n\n    };\n\n  };\n\n  /**\n   * @class editing.Table\n   *\n   * Table\n   *\n   */\n  var Table = function () {\n    /**\n     * handle tab key\n     *\n     * @param {WrappedRange} rng\n     * @param {Boolean} isShift\n     */\n    this.tab = function (rng, isShift) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\n      var table = dom.ancestor(cell, dom.isTable);\n      var cells = dom.listDescendant(table, dom.isCell);\n\n      var nextCell = list[isShift ? 'prev' : 'next'](cells, cell);\n      if (nextCell) {\n        range.create(nextCell, 0).select();\n      }\n    };\n\n    /**\n     * create empty table element\n     *\n     * @param {Number} rowCount\n     * @param {Number} colCount\n     * @return {Node}\n     */\n    this.createTable = function (colCount, rowCount) {\n      var tds = [], tdHTML;\n      for (var idxCol = 0; idxCol < colCount; idxCol++) {\n        tds.push('<td>' + dom.blank + '</td>');\n      }\n      tdHTML = tds.join('');\n\n      var trs = [], trHTML;\n      for (var idxRow = 0; idxRow < rowCount; idxRow++) {\n        trs.push('<tr>' + tdHTML + '</tr>');\n      }\n      trHTML = trs.join('');\n      return $('<table class=\"table table-bordered\">' + trHTML + '</table>')[0];\n    };\n  };\n\n\n  var KEY_BOGUS = 'bogus';\n\n  /**\n   * @class editing.Editor\n   *\n   * Editor\n   *\n   */\n  var Editor = function (handler) {\n\n    var self = this;\n    var style = new Style();\n    var table = new Table();\n    var typing = new Typing();\n    var bullet = new Bullet();\n\n    /**\n     * @method createRange\n     *\n     * create range\n     *\n     * @param {jQuery} $editable\n     * @return {WrappedRange}\n     */\n    this.createRange = function ($editable) {\n      this.focus($editable);\n      return range.create();\n    };\n\n    /**\n     * @method saveRange\n     *\n     * save current range\n     *\n     * @param {jQuery} $editable\n     * @param {Boolean} [thenCollapse=false]\n     */\n    this.saveRange = function ($editable, thenCollapse) {\n      this.focus($editable);\n      $editable.data('range', range.create());\n      if (thenCollapse) {\n        range.create().collapse().select();\n      }\n    };\n\n    /**\n     * @method saveRange\n     *\n     * save current node list to $editable.data('childNodes')\n     *\n     * @param {jQuery} $editable\n     */\n    this.saveNode = function ($editable) {\n      // copy child node reference\n      var copy = [];\n      for (var key  = 0, len = $editable[0].childNodes.length; key < len; key++) {\n        copy.push($editable[0].childNodes[key]);\n      }\n      $editable.data('childNodes', copy);\n    };\n\n    /**\n     * @method restoreRange\n     *\n     * restore lately range\n     *\n     * @param {jQuery} $editable\n     */\n    this.restoreRange = function ($editable) {\n      var rng = $editable.data('range');\n      if (rng) {\n        rng.select();\n        this.focus($editable);\n      }\n    };\n\n    /**\n     * @method restoreNode\n     *\n     * restore lately node list\n     *\n     * @param {jQuery} $editable\n     */\n    this.restoreNode = function ($editable) {\n      $editable.html('');\n      var child = $editable.data('childNodes');\n      for (var index = 0, len = child.length; index < len; index++) {\n        $editable[0].appendChild(child[index]);\n      }\n    };\n\n    /**\n     * @method currentStyle\n     *\n     * current style\n     *\n     * @param {Node} target\n     * @return {Object|Boolean} unfocus\n     */\n    this.currentStyle = function (target) {\n      var rng = range.create(); // init original editable range\n\n      // if no range found, then create range from target\n      if (!rng || !rng.isOnEditable()){\n          var domTarget = $(target).get(0);\n          rng = range.create(domTarget,0, domTarget,0);\n      }\n\n      var styleInfo =  rng && rng.isOnEditable() ? style.current(rng.normalize()) : {};\n      if (dom.isImg(target)) {\n        styleInfo.image = target;\n      }\n      return styleInfo;\n    };\n\n    /**\n     * style from node\n     *\n     * @param {jQuery} $node\n     * @return {Object}\n     */\n    this.styleFromNode = function ($node) {\n      return style.fromNode($node);\n    };\n\n    var triggerOnBeforeChange = function ($editable) {\n      var $holder = dom.makeLayoutInfo($editable).holder();\n      handler.bindCustomEvent(\n        $holder, $editable.data('callbacks'), 'before.command'\n      )($editable.html(), $editable);\n    };\n\n    var triggerOnChange = function ($editable) {\n      var $holder = dom.makeLayoutInfo($editable).holder();\n      handler.bindCustomEvent(\n        $holder, $editable.data('callbacks'), 'change'\n      )($editable.html(), $editable);\n    };\n\n    /**\n     * @method undo\n     * undo\n     * @param {jQuery} $editable\n     */\n    this.undo = function ($editable) {\n      triggerOnBeforeChange($editable);\n      $editable.data('NoteHistory').undo();\n      triggerOnChange($editable);\n    };\n\n    /**\n     * @method redo\n     * redo\n     * @param {jQuery} $editable\n     */\n    this.redo = function ($editable) {\n      triggerOnBeforeChange($editable);\n      $editable.data('NoteHistory').redo();\n      triggerOnChange($editable);\n    };\n\n    /**\n     * @method beforeCommand\n     * before command\n     * @param {jQuery} $editable\n     */\n    var beforeCommand = this.beforeCommand = function ($editable) {\n      triggerOnBeforeChange($editable);\n      // keep focus on editable before command execution\n      self.focus($editable);\n    };\n\n    /**\n     * @method afterCommand\n     * after command\n     * @param {jQuery} $editable\n     * @param {Boolean} isPreventTrigger\n     */\n    var afterCommand = this.afterCommand = function ($editable, isPreventTrigger) {\n      $editable.data('NoteHistory').recordUndo();\n      if (!isPreventTrigger) {\n        triggerOnChange($editable);\n      }\n    };\n\n    /**\n     * @method bold\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method italic\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method underline\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method strikethrough\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method formatBlock\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method superscript\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method subscript\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method justifyLeft\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method justifyCenter\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method justifyRight\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method justifyFull\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method formatBlock\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method removeFormat\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method backColor\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method foreColor\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method insertHorizontalRule\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /**\n     * @method fontName\n     *\n     * change font name\n     *\n     * @param {jQuery} $editable\n     * @param {Mixed} value\n     */\n\n    /* jshint ignore:start */\n    // native commands(with execCommand), generate function for execCommand\n    var commands = ['bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript',\n                    'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull',\n                    'formatBlock', 'removeFormat',\n                    'backColor', 'foreColor', 'fontName'];\n\n    for (var idx = 0, len = commands.length; idx < len; idx ++) {\n      this[commands[idx]] = (function (sCmd) {\n        return function ($editable, value) {\n          beforeCommand($editable);\n\n          document.execCommand(sCmd, false, value);\n\n          afterCommand($editable, true);\n        };\n      })(commands[idx]);\n    }\n    /* jshint ignore:end */\n\n    /**\n     * @method tab\n     *\n     * handle tab key\n     *\n     * @param {jQuery} $editable\n     * @param {Object} options\n     */\n    this.tab = function ($editable, options) {\n      var rng = this.createRange($editable);\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        table.tab(rng);\n      } else {\n        beforeCommand($editable);\n        typing.insertTab($editable, rng, options.tabsize);\n        afterCommand($editable);\n      }\n    };\n\n    /**\n     * @method untab\n     *\n     * handle shift+tab key\n     *\n     */\n    this.untab = function ($editable) {\n      var rng = this.createRange($editable);\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        table.tab(rng, true);\n      }\n    };\n\n    /**\n     * @method insertParagraph\n     *\n     * insert paragraph\n     *\n     * @param {Node} $editable\n     */\n    this.insertParagraph = function ($editable) {\n      beforeCommand($editable);\n      typing.insertParagraph($editable);\n      afterCommand($editable);\n    };\n\n    /**\n     * @method insertOrderedList\n     *\n     * @param {jQuery} $editable\n     */\n    this.insertOrderedList = function ($editable) {\n      beforeCommand($editable);\n      bullet.insertOrderedList($editable);\n      afterCommand($editable);\n    };\n\n    /**\n     * @param {jQuery} $editable\n     */\n    this.insertUnorderedList = function ($editable) {\n      beforeCommand($editable);\n      bullet.insertUnorderedList($editable);\n      afterCommand($editable);\n    };\n\n    /**\n     * @param {jQuery} $editable\n     */\n    this.indent = function ($editable) {\n      beforeCommand($editable);\n      bullet.indent($editable);\n      afterCommand($editable);\n    };\n\n    /**\n     * @param {jQuery} $editable\n     */\n    this.outdent = function ($editable) {\n      beforeCommand($editable);\n      bullet.outdent($editable);\n      afterCommand($editable);\n    };\n\n    /**\n     * insert image\n     *\n     * @param {jQuery} $editable\n     * @param {String} sUrl\n     */\n    this.insertImage = function ($editable, sUrl, filename) {\n      async.createImage(sUrl, filename).then(function ($image) {\n        beforeCommand($editable);\n        $image.css({\n          display: '',\n          width: Math.min($editable.width(), $image.width())\n        });\n        range.create().insertNode($image[0]);\n        range.createFromNodeAfter($image[0]).select();\n        afterCommand($editable);\n      }).fail(function () {\n        var $holder = dom.makeLayoutInfo($editable).holder();\n        handler.bindCustomEvent(\n          $holder, $editable.data('callbacks'), 'image.upload.error'\n        )();\n      });\n    };\n\n    /**\n     * @method insertNode\n     * insert node\n     * @param {Node} $editable\n     * @param {Node} node\n     */\n    this.insertNode = function ($editable, node) {\n      beforeCommand($editable);\n      range.create().insertNode(node);\n      range.createFromNodeAfter(node).select();\n      afterCommand($editable);\n    };\n\n\t// prepend node, cloned from summernote.Editor.insertNode\n\tthis.prependNode = function($editable, node){\n\t\tbeforeCommand($editable);\n\t\t$editable.prepend(node);\n\t\trange.createFromNodeAfter(node).select();\n\t\tafterCommand($editable);\n\t}\n\n\tthis.insertAfter = function($editable, node, after){\n\t\tbeforeCommand($editable);\n\t\t$(after).after(node);\n\t\trange.createFromNodeAfter(node).select();\n\t\tafterCommand($editable);\n\t}\n\n\t// == insertNode with fixes for insert into paragraph\n\tthis.insertAtCursor = function($editable, node){\n\t\tbeforeCommand($editable);\n\t\tinsertNodeAtCursor(node);\n\t\trange.createFromNodeAfter(node).select();\n\t\tafterCommand($editable);\n\t}\n\n\tfunction insertNodeAtCursor(node){\n\t\tvar sel, range, html;\n\t\tif (window.getSelection) {\n\t\t\tsel = window.getSelection();\n\t\t\tif (sel.getRangeAt && sel.rangeCount) {\n\t\t\t\trange = sel.getRangeAt(0);\n\t\t\t\trange.deleteContents();\n\t\t\t\trange.insertNode(node);\n\t\t\t}\n\t\t// for ie<9\n\t\t} else if (document.selection && document.selection.createRange) {\n\t\t\tdocument.selection.createRange().text = node.outerHTML;\n\t\t}\n\t}\n\n    /**\n     * insert text\n     * @param {Node} $editable\n     * @param {String} text\n     */\n    this.insertText = function ($editable, text) {\n      beforeCommand($editable);\n      var textNode = range.create().insertNode(dom.createText(text));\n      range.create(textNode, dom.nodeLength(textNode)).select();\n      afterCommand($editable);\n    };\n\n    /**\n     * paste HTML\n     * @param {Node} $editable\n     * @param {String} markup\n     */\n    this.pasteHTML = function ($editable, markup) {\n      beforeCommand($editable);\n      var contents = range.create().pasteHTML(markup);\n      range.createFromNodeAfter(list.last(contents)).select();\n      afterCommand($editable);\n    };\n\n    /**\n     * formatBlock\n     *\n     * @param {jQuery} $editable\n     * @param {String} tagName\n     */\n    this.formatBlock = function ($editable, tagName) {\n      beforeCommand($editable);\n      // [workaround] for MSIE, IE need `<`\n      tagName = agent.isMSIE ? '<' + tagName + '>' : tagName;\n      document.execCommand('FormatBlock', false, tagName);\n      afterCommand($editable);\n    };\n\n    this.formatPara = function ($editable) {\n      beforeCommand($editable);\n      this.formatBlock($editable, 'P');\n      afterCommand($editable);\n    };\n\n    /* jshint ignore:start */\n    for (var idx = 1; idx <= 6; idx ++) {\n      this['formatH' + idx] = function (idx) {\n        return function ($editable) {\n          this.formatBlock($editable, 'H' + idx);\n        };\n      }(idx);\n    };\n    /* jshint ignore:end */\n\n    /**\n     * fontSize\n     *\n     * @param {jQuery} $editable\n     * @param {String} value - px\n     */\n    this.fontSize = function ($editable, value) {\n      var rng = range.create();\n\n      if (rng.isCollapsed()) {\n        var spans = style.styleNodes(rng);\n        var firstSpan = list.head(spans);\n\n        $(spans).css({\n          'font-size': value + 'px'\n        });\n\n        // [workaround] added styled bogus span for style\n        //  - also bogus character needed for cursor position\n        if (firstSpan && !dom.nodeLength(firstSpan)) {\n          firstSpan.innerHTML = dom.ZERO_WIDTH_NBSP_CHAR;\n          range.createFromNodeAfter(firstSpan.firstChild).select();\n          $editable.data(KEY_BOGUS, firstSpan);\n        }\n      } else {\n        beforeCommand($editable);\n        $(style.styleNodes(rng)).css({\n          'font-size': value + 'px'\n        });\n        afterCommand($editable);\n      }\n    };\n\n    /**\n     * insert horizontal rule\n     * @param {jQuery} $editable\n     */\n    this.insertHorizontalRule = function ($editable) {\n      beforeCommand($editable);\n\n      var rng = range.create();\n      var hrNode = rng.insertNode($('<HR/>')[0]);\n      if (hrNode.nextSibling) {\n        range.create(hrNode.nextSibling, 0).normalize().select();\n      }\n\n      afterCommand($editable);\n    };\n\n    /**\n     * remove bogus node and character\n     */\n    this.removeBogus = function ($editable) {\n      var bogusNode = $editable.data(KEY_BOGUS);\n      if (!bogusNode) {\n        return;\n      }\n\n      var textNode = list.find(list.from(bogusNode.childNodes), dom.isText);\n\n      var bogusCharIdx = textNode.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);\n      if (bogusCharIdx !== -1) {\n        textNode.deleteData(bogusCharIdx, 1);\n      }\n\n      if (dom.isEmpty(bogusNode)) {\n        dom.remove(bogusNode);\n      }\n\n      $editable.removeData(KEY_BOGUS);\n    };\n\n    /**\n     * lineHeight\n     * @param {jQuery} $editable\n     * @param {String} value\n     */\n    this.lineHeight = function ($editable, value) {\n      beforeCommand($editable);\n      style.stylePara(range.create(), {\n        lineHeight: value\n      });\n      afterCommand($editable);\n    };\n\n    /**\n     * unlink\n     *\n     * @type command\n     *\n     * @param {jQuery} $editable\n     */\n    this.unlink = function ($editable) {\n      var rng = this.createRange($editable);\n      if (rng.isOnAnchor()) {\n        var anchor = dom.ancestor(rng.sc, dom.isAnchor);\n        rng = range.createFromNode(anchor);\n        rng.select();\n\n        beforeCommand($editable);\n        document.execCommand('unlink');\n        afterCommand($editable);\n      }\n    };\n\n    /**\n     * create link (command)\n     *\n     * @param {jQuery} $editable\n     * @param {Object} linkInfo\n     * @param {Object} options\n     */\n    this.createLink = function ($editable, linkInfo, options) {\n      var linkUrl = linkInfo.url;\n      var linkText = linkInfo.text;\n      var isNewWindow = linkInfo.isNewWindow;\n      var rng = linkInfo.range || this.createRange($editable);\n      var isTextChanged = rng.toString() !== linkText;\n\n      options = options || dom.makeLayoutInfo($editable).editor().data('options');\n\n      beforeCommand($editable);\n\n      if (options.onCreateLink) {\n        linkUrl = options.onCreateLink(linkUrl);\n      }\n\n      var anchors = [];\n      if (isTextChanged) {\n        // Create a new link when text changed.\n        var anchor = rng.insertNode($('<A>' + linkText + '</A>')[0]);\n        anchors.push(anchor);\n      } else {\n        anchors = style.styleNodes(rng, {\n          nodeName: 'A',\n          expandClosestSibling: true,\n          onlyPartialContains: true\n        });\n      }\n\n      $.each(anchors, function (idx, anchor) {\n        $(anchor).attr('href', linkUrl);\n        if (isNewWindow) {\n          $(anchor).attr('target', '_blank');\n        } else {\n          $(anchor).removeAttr('target');\n        }\n      });\n\n      var startRange = range.createFromNodeBefore(list.head(anchors));\n      var startPoint = startRange.getStartPoint();\n      var endRange = range.createFromNodeAfter(list.last(anchors));\n      var endPoint = endRange.getEndPoint();\n\n      range.create(\n        startPoint.node,\n        startPoint.offset,\n        endPoint.node,\n        endPoint.offset\n      ).select();\n\n      afterCommand($editable);\n    };\n\n    /**\n     * returns link info\n     *\n     * @return {Object}\n     * @return {WrappedRange} return.range\n     * @return {String} return.text\n     * @return {Boolean} [return.isNewWindow=true]\n     * @return {String} [return.url=\"\"]\n     */\n    this.getLinkInfo = function ($editable) {\n      this.focus($editable);\n\n      var rng = range.create().expand(dom.isAnchor);\n\n      // Get the first anchor on range(for edit).\n      var $anchor = $editable.is('a') ? $editable: $(list.head(rng.nodes(dom.isAnchor)));\n      var text = $anchor.is('a') ? $anchor.html() : rng.toString();\n\n      return {\n        range: rng,\n        text: text,\n        isNewWindow: $anchor.length ? $anchor.attr('target') === '_blank' : false,\n        url: $anchor.length ? $anchor.attr('href') : ''\n      };\n    };\n\n    /**\n     * setting color\n     *\n     * @param {Node} $editable\n     * @param {Object} sObjColor  color code\n     * @param {String} sObjColor.foreColor foreground color\n     * @param {String} sObjColor.backColor background color\n     */\n    this.color = function ($editable, sObjColor) {\n      var oColor = JSON.parse(sObjColor);\n      var foreColor = oColor.foreColor, backColor = oColor.backColor;\n\n      beforeCommand($editable);\n\n      if (foreColor) { document.execCommand('foreColor', false, foreColor); }\n      if (backColor) { document.execCommand('backColor', false, backColor); }\n\n      afterCommand($editable);\n    };\n\n    /**\n     * insert Table\n     *\n     * @param {Node} $editable\n     * @param {String} sDim dimension of table (ex : \"5x5\")\n     */\n    this.insertTable = function ($editable, sDim) {\n      var dimension = sDim.split('x');\n      beforeCommand($editable);\n\n      var rng = range.create().deleteContents();\n      rng.insertNode(table.createTable(dimension[0], dimension[1]));\n      afterCommand($editable);\n    };\n\n    /**\n     * float me\n     *\n     * @param {jQuery} $editable\n     * @param {String} value\n     * @param {jQuery} $target\n     */\n    this.floatMe = function ($editable, value, $target) {\n      beforeCommand($editable);\n      $target.css('float', value);\n      afterCommand($editable);\n    };\n\n    /**\n     * change image shape\n     *\n     * @param {jQuery} $editable\n     * @param {String} value css class\n     * @param {Node} $target\n     */\n    this.imageShape = function ($editable, value, $target) {\n      beforeCommand($editable);\n\n      $target.removeClass('img-rounded img-circle img-thumbnail');\n\n      if (value) {\n        $target.addClass(value);\n      }\n\n      afterCommand($editable);\n    };\n\n    /**\n     * resize overlay element\n     * @param {jQuery} $editable\n     * @param {String} value\n     * @param {jQuery} $target - target element\n     */\n    this.resize = function ($editable, value, $target) {\n      beforeCommand($editable);\n\n      $target.css({\n        width: value * 100 + '%',\n        height: ''\n      });\n\n      afterCommand($editable);\n    };\n\n    /**\n     * @param {Position} pos\n     * @param {jQuery} $target - target element\n     * @param {Boolean} [bKeepRatio] - keep ratio\n     */\n    this.resizeTo = function (pos, $target, bKeepRatio) {\n      var imageSize;\n      if (bKeepRatio) {\n        var newRatio = pos.y / pos.x;\n        var ratio = $target.data('ratio');\n        imageSize = {\n          width: ratio > newRatio ? pos.x : pos.y / ratio,\n          height: ratio > newRatio ? pos.x * ratio : pos.y\n        };\n      } else {\n        imageSize = {\n          width: pos.x,\n          height: pos.y\n        };\n      }\n\n      $target.css(imageSize);\n    };\n\n    /**\n     * remove media object\n     *\n     * @param {jQuery} $editable\n     * @param {String} value - dummy argument (for keep interface)\n     * @param {jQuery} $target - target element\n     */\n    this.removeMedia = function ($editable, value, $target) {\n      beforeCommand($editable);\n      $target.detach();\n\n      handler.bindCustomEvent(\n        $(), $editable.data('callbacks'), 'media.delete'\n      )($target, $editable);\n\n      afterCommand($editable);\n    };\n\n    /**\n     * set focus\n     *\n     * @param $editable\n     */\n    this.focus = function ($editable) {\n      $editable.focus();\n\n      // [workaround] for firefox bug http://goo.gl/lVfAaI\n      if (agent.isFF) {\n        var rng = range.create();\n        if (!rng || rng.isOnEditable()) {\n          return;\n        }\n        range.createFromNode($editable[0])\n             .normalize()\n             .collapse()\n             .select();\n      }\n    };\n\n    /**\n     * returns whether contents is empty or not.\n     *\n     * @param {jQuery} $editable\n     * @return {Boolean}\n     */\n    this.isEmpty = function ($editable) {\n      return dom.isEmpty($editable[0]) || dom.emptyPara === $editable.html();\n    };\n  };\n\n  /**\n   * @class module.Button\n   *\n   * Button\n   */\n  var Button = function () {\n    /**\n     * update button status\n     *\n     * @param {jQuery} $container\n     * @param {Object} styleInfo\n     */\n    this.update = function ($container, styleInfo) {\n      /**\n       * handle dropdown's check mark (for fontname, fontsize, lineHeight).\n       * @param {jQuery} $btn\n       * @param {Number} value\n       */\n      var checkDropdownMenu = function ($btn, value) {\n        $btn.find('.dropdown-menu li a').each(function () {\n          var isChecked;\n          if (typeof value === 'function') {\n            isChecked = value($(this));\n          } else {\n            // always compare string to avoid creating another func.\n            isChecked = ($(this).data('value') + '') === (value + '');\n          }\n\n          this.className = isChecked ? 'checked' : '';\n        });\n      };\n\n      /**\n       * update button state(active or not).\n       *\n       * @private\n       * @param {String} selector\n       * @param {Function} pred\n       */\n      var btnState = function (selector, pred) {\n        var $btn = $container.find(selector);\n        $btn.toggleClass('active', pred());\n      };\n\n      if (styleInfo.image) {\n        var $img = $(styleInfo.image);\n\n        btnState('button[data-event=\"imageShape\"][data-value=\"img-rounded\"]', function () {\n          return $img.hasClass('img-rounded');\n        });\n        btnState('button[data-event=\"imageShape\"][data-value=\"img-circle\"]', function () {\n          return $img.hasClass('img-circle');\n        });\n        btnState('button[data-event=\"imageShape\"][data-value=\"img-thumbnail\"]', function () {\n          return $img.hasClass('img-thumbnail');\n        });\n        btnState('button[data-event=\"imageShape\"]:not([data-value])', function () {\n          return !$img.is('.img-rounded, .img-circle, .img-thumbnail');\n        });\n\n        var imgFloat = $img.css('float');\n        btnState('button[data-event=\"floatMe\"][data-value=\"left\"]', function () {\n          return imgFloat === 'left';\n        });\n        btnState('button[data-event=\"floatMe\"][data-value=\"right\"]', function () {\n          return imgFloat === 'right';\n        });\n        btnState('button[data-event=\"floatMe\"][data-value=\"none\"]', function () {\n          return imgFloat !== 'left' && imgFloat !== 'right';\n        });\n\n        var style = $img.attr('style');\n        btnState('button[data-event=\"resize\"][data-value=\"1\"]', function () {\n          return !!/(^|\\s)(max-)?width\\s*:\\s*100%/.test(style);\n        });\n        btnState('button[data-event=\"resize\"][data-value=\"0.5\"]', function () {\n          return !!/(^|\\s)(max-)?width\\s*:\\s*50%/.test(style);\n        });\n        btnState('button[data-event=\"resize\"][data-value=\"0.25\"]', function () {\n          return !!/(^|\\s)(max-)?width\\s*:\\s*25%/.test(style);\n        });\n        return;\n      }\n\n      // fontname\n      var $fontname = $container.find('.note-fontname');\n      if ($fontname.length) {\n        var selectedFont = styleInfo['font-family'];\n        if (!!selectedFont) {\n\n          var list = selectedFont.split(',');\n          for (var i = 0, len = list.length; i < len; i++) {\n            selectedFont = list[i].replace(/[\\'\\\"]/g, '').replace(/\\s+$/, '').replace(/^\\s+/, '');\n            if (agent.isFontInstalled(selectedFont)) {\n              break;\n            }\n          }\n\n          $fontname.find('.note-current-fontname').text(selectedFont);\n          checkDropdownMenu($fontname, selectedFont);\n\n        }\n      }\n\n      // fontsize\n      var $fontsize = $container.find('.note-fontsize');\n      $fontsize.find('.note-current-fontsize').text(styleInfo['font-size']);\n      checkDropdownMenu($fontsize, parseFloat(styleInfo['font-size']));\n\n      // lineheight\n      var $lineHeight = $container.find('.note-height');\n      checkDropdownMenu($lineHeight, parseFloat(styleInfo['line-height']));\n\n      btnState('button[data-event=\"bold\"]', function () {\n        return styleInfo['font-bold'] === 'bold';\n      });\n      btnState('button[data-event=\"italic\"]', function () {\n        return styleInfo['font-italic'] === 'italic';\n      });\n      btnState('button[data-event=\"underline\"]', function () {\n        return styleInfo['font-underline'] === 'underline';\n      });\n      btnState('button[data-event=\"strikethrough\"]', function () {\n        return styleInfo['font-strikethrough'] === 'strikethrough';\n      });\n      btnState('button[data-event=\"superscript\"]', function () {\n        return styleInfo['font-superscript'] === 'superscript';\n      });\n      btnState('button[data-event=\"subscript\"]', function () {\n        return styleInfo['font-subscript'] === 'subscript';\n      });\n      btnState('button[data-event=\"justifyLeft\"]', function () {\n        return styleInfo['text-align'] === 'left' || styleInfo['text-align'] === 'start';\n      });\n      btnState('button[data-event=\"justifyCenter\"]', function () {\n        return styleInfo['text-align'] === 'center';\n      });\n      btnState('button[data-event=\"justifyRight\"]', function () {\n        return styleInfo['text-align'] === 'right';\n      });\n      btnState('button[data-event=\"justifyFull\"]', function () {\n        return styleInfo['text-align'] === 'justify';\n      });\n      btnState('button[data-event=\"insertUnorderedList\"]', function () {\n        return styleInfo['list-style'] === 'unordered';\n      });\n      btnState('button[data-event=\"insertOrderedList\"]', function () {\n        return styleInfo['list-style'] === 'ordered';\n      });\n\n\n      // mbrBtnColor\n      var isModernMenu = !!$(styleInfo.anchor).closest('[data-app-modern-menu]').length;\n      var $mbrBtnColor = $container.find('.note-mbrBtnColor');\n      var $mbrLinkColor = $container.find('.note-mbrLinkColor');\n      if ($(styleInfo.anchor).is('.btn:not(.mbr-menu-item, .mbr-editable-menu-item)')) {\n        $mbrLinkColor.hide();\n        $mbrBtnColor.parent().css('display', ''); // .show();\n        checkDropdownMenu($mbrBtnColor, function ($item) {\n          var checked = $(styleInfo.anchor).hasClass($item.data('value'));\n\n          // if checked - change label on button\n          if (checked) {\n            var label = $item.find('> span').clone().css('margin-left', 0);\n            $mbrBtnColor.find('button > .note-current-mbrBtnColor').html(label);\n          }\n\n          return checked;\n        });\n        // menu item\n      } else if ($(styleInfo.anchor).is('.nav-link[data-app-btn], .dropdown-item[data-app-btn]') && !isModernMenu) {\n        $mbrBtnColor.parent().hide();\n        $mbrLinkColor.hide();\n      } else {\n        $mbrBtnColor.parent().hide();\n        $mbrLinkColor.show();\n\n        // links\n        if ($(styleInfo.anchor).is('a')) {\n          checkDropdownMenu($mbrLinkColor, function ($item) {\n            var checked = $(styleInfo.anchor).hasClass($item.data('value'));\n\n            // if no specific link classes - add 'text-link' classname styles\n            if ($item.data('value') === 'text-primary' && !$(styleInfo.anchor).is('.text-primary,' +\n              '.text-success,' +\n              '.text-info,' +\n              '.text-warning,' +\n              '.text-danger,' +\n              '.text-white,' +\n              '.text-black,' +\n              '.text-gray')) {\n              checked = true;\n            }\n\n            // if checked - change label on button\n            if (checked) {\n              var label = $item.find('> span').clone().css('margin-left', 0);\n              $mbrLinkColor.find('button > .note-current-mbrLinkColor').html(label);\n            }\n\n            return checked;\n          });\n        }\n      }\n\n\n      // mbrBtnRemove\n      var $mbrBtnRemove = $container.find('.btn[data-name=\"mbrBtnRemove\"]');\n      if ($mbrBtnRemove.length) {\n        var isMenu = $(styleInfo.anchor).hasClass('mbr-menu-item') ||\n              $(styleInfo.anchor).hasClass('mbr-editable-menu-item');\n        var useParent = isMenu ||\n              $(styleInfo.anchor).attr('data-app-btn') === 'parent';\n        var mbrBtnRemoveSiblings = useParent ?\n              $(styleInfo.anchor).parent().siblings('li').find('> a')\n              : $(styleInfo.anchor).siblings('btn, [data-app-btn]');\n\n        // disable mbrBtnRemove only for menu item\n        if (isMenu) {\n          if (!mbrBtnRemoveSiblings.length) {\n            $mbrBtnRemove.attr('disabled', 'disabled');\n          } else {\n            $mbrBtnRemove.removeAttr('disabled');\n          }\n        }\n      }\n\n      // mbrFontSize\n      var $mbrFontsize = $container.find('.note-mbrFonts > [data-name=mbrFontSize]');\n      $mbrFontsize.find('.note-current-mbrFontSize').text(styleInfo['font-size']);\n      checkDropdownMenu($mbrFontsize, parseFloat(styleInfo['font-size']));\n\n      // mbrFontName\n      var $mbrFontname = $container.find('.note-mbrFonts > [data-name=mbrFonts]');\n      if ($mbrFontname.length) {\n        var selectedMbrFont = styleInfo['font-family'];\n        if (!!selectedMbrFont) {\n\n          var mbrFontsList = selectedMbrFont.split(',');\n          for (var k = 0, klen = mbrFontsList.length; k < klen; k++) {\n            selectedMbrFont = mbrFontsList[k].replace(/[\\'\\\"]/g, '').replace(/\\s+$/, '').replace(/^\\s+/, '');\n            if (agent.isFontInstalled(selectedMbrFont)) {\n              break;\n            }\n          }\n\n          $mbrFontname.find('.note-current-mbrFonts')\n            .css('font-family', '\\'' + selectedMbrFont + '\\'')\n            .text(selectedMbrFont);\n          checkDropdownMenu($mbrFontname, selectedMbrFont);\n\n        }\n      }\n\n      // mbrColor\n      var $mbrColorBtn = $container.find('[data-name=mbrColor] .curTextColor');\n\n      if (styleInfo.ancestors) {\n        var $editable = $(styleInfo.ancestors[0]).parent();\n        var options = $editable.data('options');\n\n        var removeMbrColorBtn = $(styleInfo.anchor).hasClass('btn') ||\n              $(styleInfo.anchor).is('[data-app-btn]:not(.mbr-menu-item, .mbr-editable-menu-item, .nav-link, .dropdown-item)');\n        if (options && options.customToolbar && options.customToolbar.mbrColor === 'on') {\n          removeMbrColorBtn = false;\n        }\n\n        if (removeMbrColorBtn) {\n          $mbrColorBtn.parent().remove();\n        } else {\n          var $currentColor;\n          for (var n in styleInfo.ancestors) {\n            if (/P|DIV|UL|H1|H2|H3|H4|H5|H6/g.test(styleInfo.ancestors[n].tagName)) {\n              $currentColor = $(styleInfo.ancestors[n]).css('color');\n              continue;\n            }\n          }\n          if (!$currentColor) {\n            var $parent = $(styleInfo.ancestors[0]).parent();\n            $currentColor = $parent.css('color');\n          }\n          $mbrColorBtn.css({\n            background: $.summernote.adaptColorForBg($currentColor || '#000')\n          });\n        }\n      }\n\n\n      // mbrAlign\n      var $mbrAlignBtn = $container.find('[data-name=mbrAlign]');\n      var $mbrAlignBtnIcon = $mbrAlignBtn.find('> i');\n      switch (styleInfo['text-align']) {\n        case 'left':\n        case 'start':\n          $mbrAlignBtnIcon.attr('class', 'mbr-icon-align-left');\n          // $mbrAlignBtn.attr('data-event', 'justifyCenter');\n          break;\n        case 'right':\n          $mbrAlignBtnIcon.attr('class', 'mbr-icon-align-right');\n          // $mbrAlignBtn.attr('data-event', 'justifyFull');\n          break;\n        case 'center':\n          $mbrAlignBtnIcon.attr('class', 'mbr-icon-align-center');\n          // $mbrAlignBtn.attr('data-event', 'justifyRight');\n          break;\n        case 'justify':\n          $mbrAlignBtnIcon.attr('class', 'mbr-icon-align-justify');\n          // $mbrAlignBtn.attr('data-event', 'justifyLeft');\n          break;\n      }\n    };\n\n    /**\n     * update recent color\n     *\n     * @param {Node} button\n     * @param {String} eventName\n     * @param {Mixed} value\n     */\n    this.updateRecentColor = function (button, eventName, value) {\n      var $color = $(button).closest('.note-color');\n      var $recentColor = $color.find('.note-recent-color');\n      var colorInfo = JSON.parse($recentColor.attr('data-value'));\n      colorInfo[eventName] = value;\n      $recentColor.attr('data-value', JSON.stringify(colorInfo));\n      var sKey = eventName === 'backColor' ? 'background-color' : 'color';\n      $recentColor.find('i').css(sKey, value);\n    };\n  };\n\n  /**\n   * @class module.Toolbar\n   *\n   * Toolbar\n   */\n  var Toolbar = function () {\n    var button = new Button();\n\n    this.update = function ($toolbar, styleInfo) {\n      button.update($toolbar, styleInfo);\n    };\n\n    /**\n     * @param {Node} button\n     * @param {String} eventName\n     * @param {String} value\n     */\n    this.updateRecentColor = function (buttonNode, eventName, value) {\n      button.updateRecentColor(buttonNode, eventName, value);\n    };\n\n    /**\n     * activate buttons exclude codeview\n     * @param {jQuery} $toolbar\n     */\n    this.activate = function ($toolbar) {\n      $toolbar.find('button')\n              .not('button[data-event=\"codeview\"]')\n              .removeClass('disabled');\n    };\n\n    /**\n     * deactivate buttons exclude codeview\n     * @param {jQuery} $toolbar\n     */\n    this.deactivate = function ($toolbar) {\n      $toolbar.find('button')\n              .not('button[data-event=\"codeview\"]')\n              .addClass('disabled');\n    };\n\n    /**\n     * @param {jQuery} $container\n     * @param {Boolean} [bFullscreen=false]\n     */\n    this.updateFullscreen = function ($container, bFullscreen) {\n      var $btn = $container.find('button[data-event=\"fullscreen\"]');\n      $btn.toggleClass('active', bFullscreen);\n    };\n\n    /**\n     * @param {jQuery} $container\n     * @param {Boolean} [isCodeview=false]\n     */\n    this.updateCodeview = function ($container, isCodeview) {\n      var $btn = $container.find('button[data-event=\"codeview\"]');\n      $btn.toggleClass('active', isCodeview);\n\n      if (isCodeview) {\n        this.deactivate($container);\n      } else {\n        this.activate($container);\n      }\n    };\n\n    /**\n     * get button in toolbar\n     *\n     * @param {jQuery} $editable\n     * @param {String} name\n     * @return {jQuery}\n     */\n    this.get = function ($editable, name) {\n      var $toolbar = dom.makeLayoutInfo($editable).toolbar();\n\n      return $toolbar.find('[data-name=' + name + ']');\n    };\n\n    /**\n     * set button state\n     * @param {jQuery} $editable\n     * @param {String} name\n     * @param {Boolean} [isActive=true]\n     */\n    this.setButtonState = function ($editable, name, isActive) {\n      isActive = (isActive === false) ? false : true;\n\n      var $button = this.get($editable, name);\n      $button.toggleClass('active', isActive);\n    };\n  };\n\n  var EDITABLE_PADDING = 24;\n\n  var Statusbar = function () {\n    var $document = $(document);\n\n    this.attach = function (layoutInfo, options) {\n      if (!options.disableResizeEditor) {\n        layoutInfo.statusbar().on('mousedown', hStatusbarMousedown);\n      }\n    };\n\n    /**\n     * `mousedown` event handler on statusbar\n     *\n     * @param {MouseEvent} event\n     */\n    var hStatusbarMousedown = function (event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var $editable = dom.makeLayoutInfo(event.target).editable();\n      var editableTop = $editable.offset().top - $document.scrollTop();\n\n      var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\n      var options = layoutInfo.editor().data('options');\n\n      $document.on('mousemove.summernote', function (event) {\n        var nHeight = event.clientY - (editableTop + EDITABLE_PADDING);\n\n        nHeight = (options.minHeight > 0) ? Math.max(nHeight, options.minHeight) : nHeight;\n        nHeight = (options.maxHeight > 0) ? Math.min(nHeight, options.maxHeight) : nHeight;\n\n        $editable.height(nHeight);\n      }).one('mouseup.summernote', function () {\n        $document.off('mousemove.summernote');\n      });\n    };\n  };\n\n  /**\n   * @class module.Popover\n   *\n   * Popover (http://getbootstrap.com/javascript/#popovers)\n   *\n   */\n  var Popover = function () {\n    var button = new Button();\n\n    var PX_POPOVER_ARROW_OFFSET_X = -11;\n    var POPOVER_MAX_L_OFFSET = 5;\n    var POPOVER_MAX_R_OFFSET = 5;\n    var POPOVER_MAX_T_OFFSET = 20;\n    // when popover top offset < MAX_TOP_OFFSET - show dropdown, else - dropup\n    var DROPDOWN_MAX_TOP_OFFSET = 200;\n\n    /**\n     * returns position from placeholder\n     *\n     * @private\n     * @param {Node} placeholder\n     * @param {Boolean} isAirMode\n     * @return {Object}\n     * @return {Number} return.left\n     * @return {Number} return.top\n     */\n    var posFromPlaceholder = function (placeholder, isAirMode, styleInfo) {\n      var $placeholder = $(placeholder);\n      var pos = isAirMode ? $placeholder.offset() : $placeholder.position();\n      var width = $placeholder.outerWidth(true); // include margin\n\n      // popover below placeholder.\n      return {\n        left: pos.left + width / 2,\n        top: pos.top,\n        lineHeight: styleInfo.ancestors[0] ? $(styleInfo.ancestors[0].parentNode).outerHeight() : ''\n      };\n    };\n\n    /**\n     * Regenerate Position of Popover\n     *\n     * @private\n     * @param {jQuery} popover\n     * @param {Position} pos\n     */\n    var regeneratePosition = function ($popover, pos) {\n      var wndWidth = $(window).width();\n\n      // get popover sizes\n      $popover.css({\n        display: 'block',\n        left: POPOVER_MAX_L_OFFSET,\n        top: POPOVER_MAX_T_OFFSET\n      });\n      var popoverWidth = $popover.outerWidth();\n      var popoverHeight = $popover.outerHeight();\n      $popover.css('display', 'none');\n\n      // set new position\n      pos.left = pos.left - popoverWidth / 2;\n\n      // when popover top < POPOVER_MAX_T_OFFSET - regenerate position\n      if (pos.top - popoverHeight < POPOVER_MAX_T_OFFSET) {\n        $popover.removeClass('top').addClass('bottom');\n        pos.top = pos.top + parseFloat(pos.lineHeight);\n      } else {\n        $popover.removeClass('bottom').addClass('top');\n        pos.top = pos.top - popoverHeight;\n      }\n\n      // when popover left < 0 and right > window width - regenerate position\n      var oldLeft = pos.left;\n      if (pos.left < POPOVER_MAX_L_OFFSET) {\n        pos.left = POPOVER_MAX_L_OFFSET;\n      } else if (pos.left + popoverWidth > (wndWidth - POPOVER_MAX_R_OFFSET * 2)) {\n        pos.left = (wndWidth - POPOVER_MAX_R_OFFSET * 2) - popoverWidth;\n      }\n\n      // fix dropdowns\n      var $dropdowns = $popover.find('.dropdown-menu').parent('.btn-group');\n      if (pos.top < DROPDOWN_MAX_TOP_OFFSET) {\n        $dropdowns.removeClass('dropup');\n      } else {\n        $dropdowns.addClass('dropup');\n      }\n\n      // fix arrow position\n      var arrowMarginLeft = PX_POPOVER_ARROW_OFFSET_X + oldLeft - pos.left;\n      $popover.find('> .arrow').css('margin-left', arrowMarginLeft);\n      return pos;\n    };\n\n    /**\n     * show popover\n     *\n     * @private\n     * @param {jQuery} popover\n     * @param {Position} pos\n     */\n    var showPopover = function($popover, pos) {\n      pos = regeneratePosition($popover, pos);\n\n      $popover.css({\n          display: 'block',\n          left: pos.left,\n          top: pos.top\n      });\n    };\n\n\tthis.addGroup = renderer.addGroup;\n\n    /**\n     * update current state\n     * @param {jQuery} $popover - popover container\n     * @param {Object} styleInfo - style object\n     * @param {Boolean} isAirMode\n     */\n    this.update = function ($popover, styleInfo, isAirMode) {\n      button.update($popover, styleInfo);\n      var isBtnPopover = styleInfo.anchor && /btn|mbr-menu-item|mbr-editable-menu-item/g.test(styleInfo.anchor.className);\n      if (!isBtnPopover && styleInfo.anchor) {\n        isBtnPopover = !!$(styleInfo.anchor).attr('data-app-btn');\n      }\n\n      var isCollapsed = styleInfo.range && styleInfo.range.isCollapsed();\n      var isLink = isCollapsed && styleInfo.anchor && !isBtnPopover;\n\n      var $linkPopover = $popover.find('.note-link-popover');\n      if (isLink) {\n        var $anchor = $linkPopover.find('a:eq(0)');\n        var href = $(styleInfo.anchor).attr('href');\n        var target = $(styleInfo.anchor).attr('target');\n        $anchor.html(href);\n        if (!target) {\n          $anchor.removeAttr('target');\n        } else {\n          $anchor.attr('target', '_blank');\n        }\n        setTimeout(function () {\n            showPopover($linkPopover, posFromPlaceholder(styleInfo.anchor, isAirMode, styleInfo), styleInfo);\n        }, 0);\n      } else {\n        $linkPopover.hide();\n      }\n\n      var $buttonPopover = $popover.find('.note-button-popover');\n      if (isBtnPopover) {\n        var btnPos = posFromPlaceholder(styleInfo.anchor, isAirMode, styleInfo);\n        setTimeout(function() { // fixed bug with Summernote's blinking; sometimes I have to do bad things\n          showPopover($buttonPopover, btnPos);\n        }, 0);\n      } else {\n        $buttonPopover.hide();\n      }\n\n      var $imagePopover = $popover.find('.note-image-popover');\n      if (styleInfo.image) {\n        showPopover($imagePopover, posFromPlaceholder(styleInfo.image, isAirMode, styleInfo), styleInfo);\n      } else {\n        $imagePopover.hide();\n      }\n\n      var $airPopover = $popover.find('.note-air-popover');\n      if (isAirMode && styleInfo.range && !isBtnPopover && !isLink) {\n        var rect = styleInfo.range.getClientRects();\n\n        if (rect[0]) {\n          // fix rect result\n          var fixedWidthResult = 0;\n          var fixedRightResult = 0;\n          for (var k in rect) {\n            if (typeof rect[k] === 'object') {\n              if (rect[k].top === rect[0].top) {\n                fixedWidthResult += rect[k].width;\n                fixedRightResult = rect[k].right;\n              } else {\n                continue;\n              }\n            }\n          }\n          rect = {\n            bottom: rect[0].bottom,\n            height: rect[0].height,\n            left: rect[0].left,\n            top: rect[0].top,\n            right: fixedRightResult,\n            width: fixedWidthResult\n          };\n\n          var $font = $airPopover.find('.note-font');\n          var $lists = $airPopover.find('.note-para');\n          var $style = $airPopover.find('.note-style');\n          var $mbrLink = $airPopover.find('.note-mbrLink');\n          var $mbrFonts = $airPopover.find('.note-mbrFonts');\n          var $mbrAlign = $airPopover.find('button[data-name=mbrAlign]');\n\n          var pos;\n\n          // when selected text\n          if (isCollapsed) {\n            // hide LINK, B and I buttons\n            $font.hide();\n            $mbrLink.hide();\n            // show lists, style, fonts, colors and align buttons\n            $lists.show();\n            $style.show();\n            $mbrFonts.show();\n            $mbrAlign.show();\n\n            var changedItem;\n            for (var n in styleInfo.ancestors) {\n              if (/P|DIV|UL|H1|H2|H3|H4|H5|H6/g.test(styleInfo.ancestors[n].tagName)) {\n                changedItem = styleInfo.ancestors[n];\n                continue;\n              }\n            }\n            if (!changedItem) {\n              changedItem = $(styleInfo.ancestors[0]).parent()[0];\n            }\n            if (!changedItem) {\n              return;\n            }\n            pos = posFromPlaceholder(changedItem, isAirMode, styleInfo);\n          }\n          // wneh none selection\n          else {\n            // show LINK, B and I buttons\n            $font.show();\n            $mbrLink.show();\n            // hide lists, style, fonts, colors and align buttons\n            $lists.hide();\n            $style.hide();\n            $mbrFonts.hide();\n            $mbrAlign.hide();\n\n            var bnd = func.rect2bnd(rect);\n            pos = {\n              left: Math.max(bnd.left + bnd.width / 2, 0),\n              top: bnd.top,\n              lineHeight: styleInfo.ancestors[0] ? $(styleInfo.ancestors[0].parentNode).outerHeight() : ''\n            };\n          }\n\n          setTimeout(function () {\n              showPopover($airPopover, pos);\n          }, 0);\n        }\n      } else {\n        $airPopover.hide();\n      }\n    };\n\n    /**\n     * @param {Node} button\n     * @param {String} eventName\n     * @param {String} value\n     */\n    this.updateRecentColor = function (button, eventName, value) {\n      button.updateRecentColor(button, eventName, value);\n    };\n\n    /**\n     * hide all popovers\n     * @param {jQuery} $popover - popover container\n     */\n    this.hide = function ($popover) {\n      $popover.children().hide();\n    };\n  };\n\n  /**\n   * @class module.Handle\n   *\n   * Handle\n   */\n  var Handle = function (handler) {\n    var $document = $(document);\n\n    /**\n     * `mousedown` event handler on $handle\n     *  - controlSizing: resize image\n     *\n     * @param {MouseEvent} event\n     */\n    var hHandleMousedown = function (event) {\n      if (dom.isControlSizing(event.target)) {\n        event.preventDefault();\n        event.stopPropagation();\n\n        var layoutInfo = dom.makeLayoutInfo(event.target),\n            $handle = layoutInfo.handle(),\n            $popover = layoutInfo.popover(),\n            $editable = layoutInfo.editable(),\n            $editor = layoutInfo.editor();\n\n        var target = $handle.find('.note-control-selection').data('target'),\n            $target = $(target), posStart = $target.offset(),\n            scrollTop = $document.scrollTop();\n\n        var isAirMode = $editor.data('options').airMode;\n\n        $document.on('mousemove.summernote', function (event) {\n          handler.invoke('editor.resizeTo', {\n            x: event.clientX - posStart.left,\n            y: event.clientY - (posStart.top - scrollTop)\n          }, $target, !event.shiftKey);\n\n          handler.invoke('handle.update', $handle, {image: target}, isAirMode);\n          handler.invoke('popover.update', $popover, {image: target}, isAirMode);\n        }).one('mouseup', function () {\n          $document.off('mousemove.summernote');\n          handler.invoke('editor.afterCommand', $editable);\n        });\n\n        if (!$target.data('ratio')) { // original ratio.\n          $target.data('ratio', $target.height() / $target.width());\n        }\n      }\n    };\n\n    this.attach = function (layoutInfo) {\n      layoutInfo.handle().on('mousedown.summernote', hHandleMousedown);\n    };\n\n    /**\n     * update handle\n     * @param {jQuery} $handle\n     * @param {Object} styleInfo\n     * @param {Boolean} isAirMode\n     */\n    this.update = function ($handle, styleInfo, isAirMode) {\n      var $selection = $handle.find('.note-control-selection');\n      if (styleInfo.image) {\n        var $image = $(styleInfo.image);\n        var pos = isAirMode ? $image.offset() : $image.position();\n\n        // include margin\n        var imageSize = {\n          w: $image.outerWidth(true),\n          h: $image.outerHeight(true)\n        };\n\n        $selection.css({\n          display: 'block',\n          left: pos.left,\n          top: pos.top,\n          width: imageSize.w,\n          height: imageSize.h\n        }).data('target', styleInfo.image); // save current image element.\n        var sizingText = imageSize.w + 'x' + imageSize.h;\n        $selection.find('.note-control-selection-info').text(sizingText);\n      } else {\n        $selection.hide();\n      }\n    };\n\n    /**\n     * hide\n     *\n     * @param {jQuery} $handle\n     */\n    this.hide = function ($handle) {\n      $handle.children().hide();\n    };\n  };\n\n  var Fullscreen = function (handler) {\n    var $window = $(window);\n    var $scrollbar = $('html, body');\n\n    /**\n     * toggle fullscreen\n     *\n     * @param {Object} layoutInfo\n     */\n    this.toggle = function (layoutInfo) {\n\n      var $editor = layoutInfo.editor(),\n          $toolbar = layoutInfo.toolbar(),\n          $editable = layoutInfo.editable(),\n          $codable = layoutInfo.codable();\n\n      var resize = function (size) {\n        $editable.css('height', size.h);\n        $codable.css('height', size.h);\n        if ($codable.data('cmeditor')) {\n          $codable.data('cmeditor').setsize(null, size.h);\n        }\n      };\n\n      $editor.toggleClass('fullscreen');\n      var isFullscreen = $editor.hasClass('fullscreen');\n      if (isFullscreen) {\n        $editable.data('orgheight', $editable.css('height'));\n\n        $window.on('resize.summernote', function () {\n          resize({\n            h: $window.height() - $toolbar.outerHeight()\n          });\n        }).trigger('resize');\n\n        $scrollbar.css('overflow', 'hidden');\n      } else {\n        $window.off('resize.summernote');\n        resize({\n          h: $editable.data('orgheight')\n        });\n        $scrollbar.css('overflow', 'visible');\n      }\n\n      handler.invoke('toolbar.updateFullscreen', $toolbar, isFullscreen);\n    };\n  };\n\n\n  var CodeMirror;\n  if (agent.hasCodeMirror) {\n    if (agent.isSupportAmd) {\n      Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! CodeMirror */ \"CodeMirror\")]; (function (cm) {\n        CodeMirror = cm;\n      }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe);\n    } else {\n      CodeMirror = window.CodeMirror;\n    }\n  }\n\n  /**\n   * @class Codeview\n   */\n  var Codeview = function (handler) {\n\n    this.sync = function (layoutInfo) {\n      var isCodeview = handler.invoke('codeview.isActivated', layoutInfo);\n      if (isCodeview && agent.hasCodeMirror) {\n        layoutInfo.codable().data('cmEditor').save();\n      }\n    };\n\n    /**\n     * @param {Object} layoutInfo\n     * @return {Boolean}\n     */\n    this.isActivated = function (layoutInfo) {\n      var $editor = layoutInfo.editor();\n      return $editor.hasClass('codeview');\n    };\n\n    /**\n     * toggle codeview\n     *\n     * @param {Object} layoutInfo\n     */\n    this.toggle = function (layoutInfo) {\n      if (this.isActivated(layoutInfo)) {\n        this.deactivate(layoutInfo);\n      } else {\n        this.activate(layoutInfo);\n      }\n    };\n\n    /**\n     * activate code view\n     *\n     * @param {Object} layoutInfo\n     */\n    this.activate = function (layoutInfo) {\n      var $editor = layoutInfo.editor(),\n          $toolbar = layoutInfo.toolbar(),\n          $editable = layoutInfo.editable(),\n          $codable = layoutInfo.codable(),\n          $popover = layoutInfo.popover(),\n          $handle = layoutInfo.handle();\n\n      var options = $editor.data('options');\n\n      $codable.val(dom.html($editable, options.prettifyHtml));\n      $codable.height($editable.height());\n\n      handler.invoke('toolbar.updateCodeview', $toolbar, true);\n      handler.invoke('popover.hide', $popover);\n      handler.invoke('handle.hide', $handle);\n\n      $editor.addClass('codeview');\n\n      $codable.focus();\n\n      // activate CodeMirror as codable\n      if (agent.hasCodeMirror) {\n        var cmEditor = CodeMirror.fromTextArea($codable[0], options.codemirror);\n\n        // CodeMirror TernServer\n        if (options.codemirror.tern) {\n          var server = new CodeMirror.TernServer(options.codemirror.tern);\n          cmEditor.ternServer = server;\n          cmEditor.on('cursorActivity.summernote', function (cm) {\n            server.updateArgHints(cm);\n          });\n        }\n\n        // CodeMirror hasn't Padding.\n        cmEditor.setSize(null, $editable.outerHeight());\n        $codable.data('cmEditor', cmEditor);\n      }\n    };\n\n    /**\n     * deactivate code view\n     *\n     * @param {Object} layoutInfo\n     */\n    this.deactivate = function (layoutInfo) {\n      var $holder = layoutInfo.holder(),\n          $editor = layoutInfo.editor(),\n          $toolbar = layoutInfo.toolbar(),\n          $editable = layoutInfo.editable(),\n          $codable = layoutInfo.codable();\n\n      var options = $editor.data('options');\n\n      // deactivate CodeMirror as codable\n      if (agent.hasCodeMirror) {\n        var cmEditor = $codable.data('cmEditor');\n        $codable.val(cmEditor.getValue());\n        cmEditor.toTextArea();\n      }\n\n      var value = dom.value($codable, options.prettifyHtml) || dom.emptyPara;\n      var isChange = $editable.html() !== value;\n\n      $editable.html(value);\n      $editable.height(options.height ? $codable.height() : 'auto');\n      $editor.removeClass('codeview');\n\n      if (isChange) {\n        handler.bindCustomEvent(\n          $holder, $editable.data('callbacks'), 'change'\n        )($editable.html(), $editable);\n      }\n\n      $editable.focus();\n\n      handler.invoke('toolbar.updateCodeview', $toolbar, false);\n    };\n  };\n\n  var DragAndDrop = function (handler) {\n    var $document = $(document);\n\n    /**\n     * attach Drag and Drop Events\n     *\n     * @param {Object} layoutInfo - layout Informations\n     * @param {Object} options\n     */\n    this.attach = function (layoutInfo, options) {\n      if (options.airMode || options.disableDragAndDrop) {\n        // prevent default drop event\n        $document.on('drop.summernote', function (e) {\n          e.preventDefault();\n        });\n      } else {\n        this.attachDragAndDropEvent(layoutInfo, options);\n      }\n    };\n\n    /**\n     * attach Drag and Drop Events\n     *\n     * @param {Object} layoutInfo - layout Informations\n     * @param {Object} options\n     */\n    this.attachDragAndDropEvent = function (layoutInfo, options) {\n      var collection = $(),\n          $editor = layoutInfo.editor(),\n          $dropzone = layoutInfo.dropzone(),\n          $dropzoneMessage = $dropzone.find('.note-dropzone-message');\n\n      // show dropzone on dragenter when dragging a object to document\n      // -but only if the editor is visible, i.e. has a positive width and height\n      $document.on('dragenter.summernote', function (e) {\n        var isCodeview = handler.invoke('codeview.isActivated', layoutInfo);\n        var hasEditorSize = $editor.width() > 0 && $editor.height() > 0;\n        if (!isCodeview && !collection.length && hasEditorSize) {\n          $editor.addClass('dragover');\n          $dropzone.width($editor.width());\n          $dropzone.height($editor.height());\n          $dropzoneMessage.text(options.langInfo.image.dragImageHere);\n        }\n        collection = collection.add(e.target);\n      }).on('dragleave', function (e) {\n        collection = collection.not(e.target);\n        if (!collection.length) {\n          $editor.removeClass('dragover');\n        }\n      }).on('drop', function () {\n        collection = $();\n        $editor.removeClass('dragover');\n      });\n\n      // change dropzone's message on hover.\n      $dropzone.on('dragenter.summernote', function () {\n        $dropzone.addClass('hover');\n        $dropzoneMessage.text(options.langInfo.image.dropImage);\n      }).on('dragleave', function () {\n        $dropzone.removeClass('hover');\n        $dropzoneMessage.text(options.langInfo.image.dragImageHere);\n      });\n\n      // attach dropImage\n      $dropzone.on('drop.summernote', function (event) {\n\n        var dataTransfer = event.originalEvent.dataTransfer;\n        var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\n\n        if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\n          event.preventDefault();\n          layoutInfo.editable().focus();\n          handler.insertImages(layoutInfo, dataTransfer.files);\n        } else {\n          var insertNodefunc = function () {\n            layoutInfo.holder().summernote('insertNode', this);\n          };\n\n          for (var i = 0, len = dataTransfer.types.length; i < len; i++) {\n            var type = dataTransfer.types[i];\n            var content = dataTransfer.getData(type);\n\n            if (type.toLowerCase().indexOf('text') > -1) {\n              layoutInfo.holder().summernote('pasteHTML', content);\n            } else {\n              $(content).each(insertNodefunc);\n            }\n          }\n        }\n      }).on('dragover', false); // prevent default dragover event\n    };\n  };\n\n  var Clipboard = function (handler) {\n    var $paste;\n\n    this.attach = function (layoutInfo) {\n      // [workaround] getting image from clipboard\n      //  - IE11 and Firefox: CTRL+v hook\n      //  - Webkit: event.clipboardData\n      if ((agent.isMSIE && agent.browserVersion > 10) || agent.isFF) {\n        $paste = $('<div />').attr('contenteditable', true).css({\n          position : 'absolute',\n          left : -100000,\n          opacity : 0\n        });\n\n        layoutInfo.editable().on('keydown.summernote', function (e) {\n          if (e.ctrlKey && e.keyCode === key.code.V) {\n            handler.invoke('saveRange', layoutInfo.editable());\n            $paste.focus();\n\n            setTimeout(function () {\n              pasteByHook(layoutInfo);\n            }, 0);\n          }\n        });\n\n        layoutInfo.editable().before($paste);\n      } else {\n        layoutInfo.editable().on('paste.summernote', pasteByEvent);\n      }\n    };\n\n    var pasteByHook = function (layoutInfo) {\n      var $editable = layoutInfo.editable();\n      var node = $paste[0].firstChild;\n\n      if (dom.isImg(node)) {\n        var dataURI = node.src;\n        var decodedData = atob(dataURI.split(',')[1]);\n        var array = new Uint8Array(decodedData.length);\n        for (var i = 0; i < decodedData.length; i++) {\n          array[i] = decodedData.charCodeAt(i);\n        }\n\n        var blob = new Blob([array], { type : 'image/png' });\n        blob.name = 'clipboard.png';\n\n        handler.invoke('restoreRange', $editable);\n        handler.invoke('focus', $editable);\n        handler.insertImages(layoutInfo, [blob]);\n      } else {\n        var pasteContent = $('<div />').html($paste.html()).html();\n        handler.invoke('restoreRange', $editable);\n        handler.invoke('focus', $editable);\n\n        if (pasteContent) {\n          handler.invoke('pasteHTML', $editable, pasteContent);\n        }\n      }\n\n      $paste.empty();\n    };\n\n    /**\n     * paste by clipboard event\n     *\n     * @param {Event} event\n     */\n    var pasteByEvent = function (event) {\n      var clipboardData = event.originalEvent.clipboardData;\n      var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\n      var $editable = layoutInfo.editable();\n\n      if (clipboardData && clipboardData.items && clipboardData.items.length) {\n        var item = list.head(clipboardData.items);\n        if (item.kind === 'file' && item.type.indexOf('image/') !== -1) {\n          handler.insertImages(layoutInfo, [item.getAsFile()]);\n        }\n        handler.invoke('editor.afterCommand', $editable);\n      }\n    };\n  };\n\n  var LinkDialog = function (handler) {\n\n    /**\n     * toggle button status\n     *\n     * @private\n     * @param {jQuery} $btn\n     * @param {Boolean} isEnable\n     */\n    var toggleBtn = function ($btn, isEnable) {\n      $btn.toggleClass('disabled', !isEnable);\n      $btn.attr('disabled', !isEnable);\n    };\n\n    /**\n     * bind enter key\n     *\n     * @private\n     * @param {jQuery} $input\n     * @param {jQuery} $btn\n     */\n    var bindEnterKey = function ($input, $btn) {\n      $input.on('keypress.summernote', function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          $btn.trigger('click');\n        }\n      });\n    };\n\n    /**\n     * Show link dialog and set event handlers on dialog controls.\n     *\n     * @param {jQuery} $editable\n     * @param {jQuery} $dialog\n     * @param {Object} linkInfo\n     * @return {Promise}\n     */\n    this.showLinkDialog = function ($editable, $dialog, linkInfo) {\n      return $.Deferred(function (deferred) {\n        var $linkDialog = $dialog.find('.note-link-dialog');\n\n        var $linkText = $linkDialog.find('.note-link-text'),\n        $linkUrl = $linkDialog.find('.note-link-url'),\n        $linkBtn = $linkDialog.find('.note-link-btn'),\n        $openInNewWindow = $linkDialog.find('input[type=checkbox]');\n\n        $linkDialog.one('shown.bs.modal', function () {\n          $linkText.val(linkInfo.text);\n\n          $linkText.on('input', function () {\n            toggleBtn($linkBtn, $linkText.val() && $linkUrl.val());\n            // if linktext was modified by keyup,\n            // stop cloning text from linkUrl\n            linkInfo.text = $linkText.val();\n          });\n\n          // if no url was given, copy text to url\n          if (!linkInfo.url) {\n            linkInfo.url = linkInfo.text || 'http://';\n            toggleBtn($linkBtn, linkInfo.text);\n          }\n\n          $linkUrl.on('input', function () {\n            toggleBtn($linkBtn, $linkText.val() && $linkUrl.val());\n            // display same link on `Text to display` input\n            // when create a new link\n            if (!linkInfo.text) {\n              $linkText.val($linkUrl.val());\n            }\n          }).val(linkInfo.url).trigger('focus').trigger('select');\n\n          bindEnterKey($linkUrl, $linkBtn);\n          bindEnterKey($linkText, $linkBtn);\n\n          $openInNewWindow.prop('checked', linkInfo.isNewWindow);\n\n          $linkBtn.one('click', function (event) {\n            event.preventDefault();\n\n            deferred.resolve({\n              range: linkInfo.range,\n              url: $linkUrl.val(),\n              text: $linkText.val(),\n              isNewWindow: $openInNewWindow.is(':checked')\n            });\n            $linkDialog.modal('hide');\n          });\n        }).one('hidden.bs.modal', function () {\n          // detach events\n          $linkText.off('input keypress');\n          $linkUrl.off('input keypress');\n          $linkBtn.off('click');\n\n          if (deferred.state() === 'pending') {\n            deferred.reject();\n          }\n        }).modal('show');\n      }).promise();\n    };\n\n    /**\n     * @param {Object} layoutInfo\n     */\n    this.show = function (layoutInfo) {\n      var $editor = layoutInfo.editor(),\n          $dialog = layoutInfo.dialog(),\n          $editable = layoutInfo.editable(),\n          $popover = layoutInfo.popover(),\n          linkInfo = handler.invoke('editor.getLinkInfo', $editable);\n\n      var options = $editor.data('options');\n\n      handler.invoke('editor.saveRange', $editable);\n      this.showLinkDialog($editable, $dialog, linkInfo).then(function (linkInfo) {\n        handler.invoke('editor.restoreRange', $editable);\n        handler.invoke('editor.createLink', $editable, linkInfo, options);\n        // hide popover after creating link\n        handler.invoke('popover.hide', $popover);\n      }).fail(function () {\n        handler.invoke('editor.restoreRange', $editable);\n      });\n    };\n  };\n\n  var ImageDialog = function (handler) {\n    /**\n     * toggle button status\n     *\n     * @private\n     * @param {jQuery} $btn\n     * @param {Boolean} isEnable\n     */\n    var toggleBtn = function ($btn, isEnable) {\n      $btn.toggleClass('disabled', !isEnable);\n      $btn.attr('disabled', !isEnable);\n    };\n\n    /**\n     * bind enter key\n     *\n     * @private\n     * @param {jQuery} $input\n     * @param {jQuery} $btn\n     */\n    var bindEnterKey = function ($input, $btn) {\n      $input.on('keypress.summernote', function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          $btn.trigger('click');\n        }\n      });\n    };\n\n    this.show = function (layoutInfo) {\n      var $dialog = layoutInfo.dialog(),\n          $editable = layoutInfo.editable();\n\n      handler.invoke('editor.saveRange', $editable);\n      this.showImageDialog($editable, $dialog).then(function (data) {\n        handler.invoke('editor.restoreRange', $editable);\n\n        if (typeof data === 'string') {\n          // image url\n          handler.invoke('editor.insertImage', $editable, data);\n        } else {\n          // array of files\n          handler.insertImages(layoutInfo, data);\n        }\n      }).fail(function () {\n        handler.invoke('editor.restoreRange', $editable);\n      });\n    };\n\n    /**\n     * show image dialog\n     *\n     * @param {jQuery} $editable\n     * @param {jQuery} $dialog\n     * @return {Promise}\n     */\n    this.showImageDialog = function ($editable, $dialog) {\n      return $.Deferred(function (deferred) {\n        var $imageDialog = $dialog.find('.note-image-dialog');\n\n        var $imageInput = $dialog.find('.note-image-input'),\n            $imageUrl = $dialog.find('.note-image-url'),\n            $imageBtn = $dialog.find('.note-image-btn');\n\n        $imageDialog.one('shown.bs.modal', function () {\n          // Cloning imageInput to clear element.\n          $imageInput.replaceWith($imageInput.clone()\n            .on('change', function () {\n              deferred.resolve(this.files || this.value);\n              $imageDialog.modal('hide');\n            })\n            .val('')\n          );\n\n          $imageBtn.click(function (event) {\n            event.preventDefault();\n\n            deferred.resolve($imageUrl.val());\n            $imageDialog.modal('hide');\n          });\n\n          $imageUrl.on('keyup paste', function (event) {\n            var url;\n\n            if (event.type === 'paste') {\n              url = event.originalEvent.clipboardData.getData('text');\n            } else {\n              url = $imageUrl.val();\n            }\n\n            toggleBtn($imageBtn, url);\n          }).val('').trigger('focus');\n          bindEnterKey($imageUrl, $imageBtn);\n        }).one('hidden.bs.modal', function () {\n          $imageInput.off('change');\n          $imageUrl.off('keyup paste keypress');\n          $imageBtn.off('click');\n\n          if (deferred.state() === 'pending') {\n            deferred.reject();\n          }\n        }).modal('show');\n      });\n    };\n  };\n\n  var HelpDialog = function (handler) {\n    /**\n     * show help dialog\n     *\n     * @param {jQuery} $editable\n     * @param {jQuery} $dialog\n     * @return {Promise}\n     */\n    this.showHelpDialog = function ($editable, $dialog) {\n      return $.Deferred(function (deferred) {\n        var $helpDialog = $dialog.find('.note-help-dialog');\n\n        $helpDialog.one('hidden.bs.modal', function () {\n          deferred.resolve();\n        }).modal('show');\n      }).promise();\n    };\n\n    /**\n     * @param {Object} layoutInfo\n     */\n    this.show = function (layoutInfo) {\n      var $dialog = layoutInfo.dialog(),\n          $editable = layoutInfo.editable();\n\n      handler.invoke('editor.saveRange', $editable, true);\n      this.showHelpDialog($editable, $dialog).then(function () {\n        handler.invoke('editor.restoreRange', $editable);\n      });\n    };\n  };\n\n\n  /**\n   * @class EventHandler\n   *\n   * EventHandler\n   *  - TODO: new instance per a editor\n   */\n  var EventHandler = function () {\n    var self = this;\n\n    /**\n     * Modules\n     */\n    var modules = this.modules = {\n      editor: new Editor(this),\n      toolbar: new Toolbar(this),\n      statusbar: new Statusbar(this),\n      popover: new Popover(this),\n      handle: new Handle(this),\n      fullscreen: new Fullscreen(this),\n      codeview: new Codeview(this),\n      dragAndDrop: new DragAndDrop(this),\n      clipboard: new Clipboard(this),\n      linkDialog: new LinkDialog(this),\n      imageDialog: new ImageDialog(this),\n      helpDialog: new HelpDialog(this)\n    };\n\n    /**\n     * invoke module's method\n     *\n     * @param {String} moduleAndMethod - ex) 'editor.redo'\n     * @param {...*} arguments - arguments of method\n     * @return {*}\n     */\n    this.invoke = function () {\n      var moduleAndMethod = list.head(list.from(arguments));\n      var args = list.tail(list.from(arguments));\n\n      var splits = moduleAndMethod.split('.');\n      var hasSeparator = splits.length > 1;\n      var moduleName = hasSeparator && list.head(splits);\n      var methodName = hasSeparator ? list.last(splits) : list.head(splits);\n\n      var module = this.getModule(moduleName);\n      var method = module[methodName];\n\n      return method && method.apply(module, args);\n    };\n\n    /**\n     * returns module\n     *\n     * @param {String} moduleName - name of module\n     * @return {Module} - defaults is editor\n     */\n    this.getModule = function (moduleName) {\n      return this.modules[moduleName] || this.modules.editor;\n    };\n\n    /**\n     * @param {jQuery} $holder\n     * @param {Object} callbacks\n     * @param {String} eventNamespace\n     * @returns {Function}\n     */\n    var bindCustomEvent = this.bindCustomEvent = function ($holder, callbacks, eventNamespace) {\n      return function () {\n        var callback = callbacks[func.namespaceToCamel(eventNamespace, 'on')];\n        if (callback) {\n          callback.apply($holder[0], arguments);\n        }\n        return $holder.trigger('summernote.' + eventNamespace, arguments);\n      };\n    };\n\n    /**\n     * insert Images from file array.\n     *\n     * @private\n     * @param {Object} layoutInfo\n     * @param {File[]} files\n     */\n    this.insertImages = function (layoutInfo, files) {\n      var $editor = layoutInfo.editor(),\n          $editable = layoutInfo.editable(),\n          $holder = layoutInfo.holder();\n\n      var callbacks = $editable.data('callbacks');\n      var options = $editor.data('options');\n\n      // If onImageUpload options setted\n      if (callbacks.onImageUpload) {\n        bindCustomEvent($holder, callbacks, 'image.upload')(files);\n      // else insert Image as dataURL\n      } else {\n        $.each(files, function (idx, file) {\n          var filename = file.name;\n          if (options.maximumImageFileSize && options.maximumImageFileSize < file.size) {\n            bindCustomEvent($holder, callbacks, 'image.upload.error')(options.langInfo.image.maximumFileSizeError);\n          } else {\n            async.readFileAsDataURL(file).then(function (sDataURL) {\n              modules.editor.insertImage($editable, sDataURL, filename);\n            }).fail(function () {\n              bindCustomEvent($holder, callbacks, 'image.upload.error')(options.langInfo.image.maximumFileSizeError);\n            });\n          }\n        });\n      }\n    };\n\n    var commands = {\n      /**\n       * @param {Object} layoutInfo\n       */\n      showLinkDialog: function (layoutInfo) {\n        modules.linkDialog.show(layoutInfo);\n      },\n\n      /**\n       * @param {Object} layoutInfo\n       */\n      showImageDialog: function (layoutInfo) {\n        modules.imageDialog.show(layoutInfo);\n      },\n\n      /**\n       * @param {Object} layoutInfo\n       */\n      showHelpDialog: function (layoutInfo) {\n        modules.helpDialog.show(layoutInfo);\n      },\n\n      /**\n       * @param {Object} layoutInfo\n       */\n      fullscreen: function (layoutInfo) {\n        modules.fullscreen.toggle(layoutInfo);\n      },\n\n      /**\n       * @param {Object} layoutInfo\n       */\n      codeview: function (layoutInfo) {\n        modules.codeview.toggle(layoutInfo);\n      }\n    };\n\n    var hMousedown = function (event) {\n      //preventDefault Selection for FF, IE8+\n      if (dom.isImg(event.target)) {\n        event.preventDefault();\n      }\n    };\n\n    var hKeyupAndMouseup = function (event) {\n      var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\n      modules.editor.removeBogus(layoutInfo.editable());\n      hToolbarAndPopoverUpdate(event);\n    };\n\n    /**\n     * update sytle info\n     * @param {Object} styleInfo\n     * @param {Object} layoutInfo\n     */\n    this.updateStyleInfo = function (styleInfo, layoutInfo) {\n      if (!styleInfo || !layoutInfo.popover().length) { // ignore, if is not there already\n        return;\n      }\n      var isAirMode = layoutInfo.editor().data('options').airMode;\n      if (!isAirMode) {\n        modules.toolbar.update(layoutInfo.toolbar(), styleInfo);\n      }\n\n      modules.popover.update(layoutInfo.popover(), styleInfo, isAirMode);\n      modules.handle.update(layoutInfo.handle(), styleInfo, isAirMode);\n    };\n\n    var hToolbarAndPopoverUpdate = function (event) {\n      var target = event.target;\n\n      // delay for range after mouseup\n      setTimeout(function () {\n        var layoutInfo = dom.makeLayoutInfo(target);\n        var styleInfo = modules.editor.currentStyle(target);\n        self.updateStyleInfo(styleInfo, layoutInfo);\n      }, 0);\n    };\n\n    var hScroll = function (event) {\n      var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\n      //hide popover and handle when scrolled\n      modules.popover.hide(layoutInfo.popover());\n      modules.handle.hide(layoutInfo.handle());\n    };\n\n    var hToolbarAndPopoverMousedown = function (event) {\n      // prevent default event when insertTable (FF, Webkit)\n      var $btn = $(event.target).closest('[data-event]');\n      if ($btn.length) {\n        event.preventDefault();\n      }\n    };\n\n    var hToolbarAndPopoverClick = function (event) {\n      var $btn = $(event.target).closest('[data-event]');\n\n      if (!$btn.length) {\n        return;\n      }\n      var eventName = $btn.attr('data-event'),\n          value = $btn.attr('data-value'),\n          hide = $btn.attr('data-hide');\n\n      var layoutInfo = dom.makeLayoutInfo(event.target);\n\n      // before command: detect control selection element($target)\n      var $target;\n      if ($.inArray(eventName, ['resize', 'floatMe', 'removeMedia', 'imageShape']) !== -1) {\n        var $selection = layoutInfo.handle().find('.note-control-selection');\n        $target = $($selection.data('target'));\n      }\n\n      // If requested, hide the popover when the button is clicked.\n      // Useful for things like showHelpDialog.\n      if (hide) {\n        $btn.parents('.popover').hide();\n      }\n\n      if ($.isFunction($.summernote.pluginEvents[eventName])) {\n        $.summernote.pluginEvents[eventName](event, modules.editor, layoutInfo, value);\n      } else if (modules.editor[eventName]) { // on command\n        var $editable = layoutInfo.editable();\n        $editable.focus();\n        modules.editor[eventName]($editable, value, $target);\n        event.preventDefault();\n      } else if (commands[eventName]) {\n        commands[eventName].call(this, layoutInfo);\n        event.preventDefault();\n      }\n\n      // after command\n      if ($.inArray(eventName, ['backColor', 'foreColor']) !== -1) {\n        var options = layoutInfo.editor().data('options', options);\n        var module = options.airMode ? modules.popover : modules.toolbar;\n        module.updateRecentColor(list.head($btn), eventName, value);\n      }\n\n      // dirty hack for bootstrap 5 support\n      if ($btn.attr('data-bs-original-title')) {\n        var dropDown = $btn.siblings('ul.dropdown-menu');\n        $btn.toggleClass('show');\n        if (dropDown.length) {\n          dropDown.toggleClass('show');\n          dropDown.css('z-index', 1002);\n          dropDown.css('transform', 'translateY(40px)');\n        }\n      }\n\n      hToolbarAndPopoverUpdate(event);\n    };\n\n    var PX_PER_EM = 18;\n    var hDimensionPickerMove = function (event, options) {\n      var $picker = $(event.target.parentNode); // target is mousecatcher\n      var $dimensionDisplay = $picker.next();\n      var $catcher = $picker.find('.note-dimension-picker-mousecatcher');\n      var $highlighted = $picker.find('.note-dimension-picker-highlighted');\n      var $unhighlighted = $picker.find('.note-dimension-picker-unhighlighted');\n\n      var posOffset;\n      // HTML5 with jQuery - e.offsetX is undefined in Firefox\n      if (event.offsetX === undefined) {\n        var posCatcher = $(event.target).offset();\n        posOffset = {\n          x: event.pageX - posCatcher.left,\n          y: event.pageY - posCatcher.top\n        };\n      } else {\n        posOffset = {\n          x: event.offsetX,\n          y: event.offsetY\n        };\n      }\n\n      var dim = {\n        c: Math.ceil(posOffset.x / PX_PER_EM) || 1,\n        r: Math.ceil(posOffset.y / PX_PER_EM) || 1\n      };\n\n      $highlighted.css({ width: dim.c + 'em', height: dim.r + 'em' });\n      $catcher.attr('data-value', dim.c + 'x' + dim.r);\n\n      if (3 < dim.c && dim.c < options.insertTableMaxSize.col) {\n        $unhighlighted.css({ width: dim.c + 1 + 'em'});\n      }\n\n      if (3 < dim.r && dim.r < options.insertTableMaxSize.row) {\n        $unhighlighted.css({ height: dim.r + 1 + 'em'});\n      }\n\n      $dimensionDisplay.html(dim.c + ' x ' + dim.r);\n    };\n\n    /**\n     * bind KeyMap on keydown\n     *\n     * @param {Object} layoutInfo\n     * @param {Object} keyMap\n     */\n    this.bindKeyMap = function (layoutInfo, keyMap) {\n      var $editor = layoutInfo.editor();\n      var $editable = layoutInfo.editable();\n\n      $editable.on('keydown.summernote', function (event) {\n        var keys = [];\n\n        // modifier\n        if (event.metaKey) { keys.push('CMD'); }\n        if (event.ctrlKey && !event.altKey) { keys.push('CTRL'); }\n        if (event.shiftKey) { keys.push('SHIFT'); }\n\n        // keycode\n        var keyName = key.nameFromCode[event.keyCode];\n        if (keyName) {\n          keys.push(keyName);\n        }\n\n        var pluginEvent;\n        var keyString = keys.join('+');\n        var eventName = keyMap[keyString];\n        if (eventName) {\n          // FIXME Summernote doesn't support event pipeline yet.\n          //  - Plugin -> Base Code\n          pluginEvent = $.summernote.pluginEvents[keyString];\n          if ($.isFunction(pluginEvent)) {\n            if (pluginEvent(event, modules.editor, layoutInfo)) {\n              return false;\n            }\n          }\n\n          pluginEvent = $.summernote.pluginEvents[eventName];\n\n          if ($.isFunction(pluginEvent)) {\n            pluginEvent(event, modules.editor, layoutInfo);\n          } else if (modules.editor[eventName]) {\n            modules.editor[eventName]($editable, $editor.data('options'));\n            event.preventDefault();\n          } else if (commands[eventName]) {\n            commands[eventName].call(this, layoutInfo);\n            event.preventDefault();\n          }\n        } else if (key.isEdit(event.keyCode)) {\n          modules.editor.afterCommand($editable);\n        }\n      });\n    };\n\n    /**\n     * attach eventhandler\n     *\n     * @param {Object} layoutInfo - layout Informations\n     * @param {Object} options - user options include custom event handlers\n     */\n    this.attach = function (layoutInfo, options) {\n      // handlers for editable\n      if (options.shortcuts) {\n        this.bindKeyMap(layoutInfo, options.keyMap[agent.isMac ? 'mac' : 'pc']);\n      }\n      layoutInfo.editable().on('mousedown.summernote', hMousedown);\n      layoutInfo.editable().on('keyup.summernote', hKeyupAndMouseup);\n      layoutInfo.editable().on('mouseup.summernote', function (e) {\n        if (e.which === 1) {\n          hKeyupAndMouseup(e);\n        }\n      });\n      layoutInfo.editable().on('scroll.summernote', hScroll);\n\n      // handler for clipboard\n      modules.clipboard.attach(layoutInfo, options);\n\n      // handler for handle and popover\n      modules.handle.attach(layoutInfo, options);\n      layoutInfo.popover().on('click', hToolbarAndPopoverClick);\n      layoutInfo.popover().on('mousedown', hToolbarAndPopoverMousedown);\n\n      // hide popover on window resize\n      var wndResizeTimeout;\n        $(window).on('resize', function() {\n            clearTimeout(wndResizeTimeout);\n            wndResizeTimeout = setTimeout(function() {\n                modules.popover.hide(layoutInfo.popover());\n            }, 50);\n        });\n\n      // handler for drag and drop\n      modules.dragAndDrop.attach(layoutInfo, options);\n\n      // handlers for frame mode (toolbar, statusbar)\n      if (!options.airMode) {\n        // handler for toolbar\n        layoutInfo.toolbar().on('click', hToolbarAndPopoverClick);\n        layoutInfo.toolbar().on('mousedown', hToolbarAndPopoverMousedown);\n\n        // handler for statusbar\n        modules.statusbar.attach(layoutInfo, options);\n      }\n\n      // handler for table dimension\n      var $catcherContainer = options.airMode ? layoutInfo.popover() :\n                                                layoutInfo.toolbar();\n      var $catcher = $catcherContainer.find('.note-dimension-picker-mousecatcher');\n      $catcher.css({\n        width: options.insertTableMaxSize.col + 'em',\n        height: options.insertTableMaxSize.row + 'em'\n      }).on('mousemove', function (event) {\n        hDimensionPickerMove(event, options);\n      });\n\n      // save options on editor\n      layoutInfo.editor().data('options', options);\n\n      // ret styleWithCSS for backColor / foreColor clearing with 'inherit'.\n      if (!agent.isMSIE) {\n        // [workaround] for Firefox\n        //  - protect FF Error: NS_ERROR_FAILURE: Failure\n        setTimeout(function () {\n          document.execCommand('styleWithCSS', 0, options.styleWithSpan);\n        }, 0);\n      }\n\n      // History\n      var history = new History(layoutInfo.editable());\n      layoutInfo.editable().data('NoteHistory', history);\n\n      // All editor status will be saved on editable with jquery's data\n      // for support multiple editor with singleton object.\n      layoutInfo.editable().data('callbacks', {\n        onInit: options.onInit,\n        onFocus: options.onFocus,\n        onBlur: options.onBlur,\n        onKeydown: options.onKeydown,\n        onKeyup: options.onKeyup,\n        onMousedown: options.onMousedown,\n        onEnter: options.onEnter,\n        onPaste: options.onPaste,\n        onBeforeCommand: options.onBeforeCommand,\n        onChange: options.onChange,\n        onImageUpload: options.onImageUpload,\n        onImageUploadError: options.onImageUploadError,\n        onMediaDelete: options.onMediaDelete,\n        onToolbarClick: options.onToolbarClick\n      });\n\n      //var styleInfo = modules.editor.styleFromNode(layoutInfo.editable()); // original code\n      var styleInfo = modules.editor.currentStyle(layoutInfo.editable());\n      this.updateStyleInfo(styleInfo, layoutInfo);\n    };\n\n    /**\n     * attach jquery custom event\n     *\n     * @param {Object} layoutInfo - layout Informations\n     */\n    this.attachCustomEvent = function (layoutInfo, options) {\n      var $holder = layoutInfo.holder();\n      var $editable = layoutInfo.editable();\n      var callbacks = $editable.data('callbacks');\n\n      $editable.on('focus.summernote', bindCustomEvent($holder, callbacks, 'focus'));\n      $editable.on('blur.summernote', bindCustomEvent($holder, callbacks, 'blur'));\n\n      $editable.keydown(function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          bindCustomEvent($holder, callbacks, 'enter').call(this, event);\n        }\n        bindCustomEvent($holder, callbacks, 'keydown').call(this, event);\n      });\n      $editable.keyup(bindCustomEvent($holder, callbacks, 'keyup'));\n\n      $editable.on('mousedown.summernote', bindCustomEvent($holder, callbacks, 'mousedown'));\n      $editable.on('mouseup.summernote', bindCustomEvent($holder, callbacks, 'mouseup'));\n      $editable.on('scroll.summernote', bindCustomEvent($holder, callbacks, 'scroll'));\n\n      $editable.on('paste.summernote', bindCustomEvent($holder, callbacks, 'paste'));\n\n      // [workaround] IE doesn't have input events for contentEditable\n      //  - see: https://goo.gl/4bfIvA\n      var changeEventName = agent.isMSIE ? 'DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted' : 'input';\n      $editable.on(changeEventName+\".summernote\", function () {\n        bindCustomEvent($holder, callbacks, 'change')($editable.html(), $editable);\n      });\n\n      if (!options.airMode) {\n        layoutInfo.toolbar().click(bindCustomEvent($holder, callbacks, 'toolbar.click'));\n        layoutInfo.popover().click(bindCustomEvent($holder, callbacks, 'popover.click'));\n      }\n\n      // Textarea: auto filling the code before form submit.\n      if (dom.isTextarea(list.head($holder))) {\n        $holder.closest('form').submit(function (e) {\n          layoutInfo.holder().val(layoutInfo.holder().code());\n          bindCustomEvent($holder, callbacks, 'submit').call(this, e, $holder.code());\n        });\n      }\n\n      // fire init event\n      bindCustomEvent($holder, callbacks, 'init')(layoutInfo);\n\n      // fire plugin init event\n      for (var i = 0, len = $.summernote.plugins.length; i < len; i++) {\n        if ($.isFunction($.summernote.plugins[i].init)) {\n          $.summernote.plugins[i].init(layoutInfo);\n        }\n      }\n    };\n\n    this.detach = function (layoutInfo, options) {\n      layoutInfo.holder().off(\".summernote\");\n      layoutInfo.editable().off(\".summernote\");\n\n      layoutInfo.popover().off(\".summernote\");\n      layoutInfo.handle().off(\".summernote\");\n      layoutInfo.dialog().off();\n\n      if (!options.airMode) {\n        layoutInfo.dropzone().off();\n        layoutInfo.toolbar().off();\n        layoutInfo.statusbar().off();\n      }\n    };\n  };\n\n  /**\n   * @class Renderer\n   *\n   * renderer\n   *\n   * rendering toolbar and editable\n   */\n  var Renderer = function () {\n\n    /**\n     * bootstrap button template\n     * @private\n     * @param {String} label button name\n     * @param {Object} [options] button options\n     * @param {String} [options.event] data-event\n     * @param {String} [options.className] button's class name\n     * @param {String} [options.value] data-value\n     * @param {String} [options.title] button's title for popup\n     * @param {String} [options.dropdown] dropdown html\n     * @param {String} [options.hide] data-hide\n     */\n    var tplButton = function (label, options) {\n      var event = options.event;\n      var value = options.value;\n      var title = options.title;\n      var name = options.name;\n      var className = options.className;\n      var dropdown = options.dropdown;\n      var nocaret = options.nocaret;\n      var hide = options.hide;\n\n      return (dropdown ? '<div class=\"btn-group dropup' +\n               (className ? ' ' + className : '') + '\"' +\n               (name ? ' data-name=\"' + name + '\"' : '') +\n              '>' : '') +\n               '<button type=\"button\"' +\n                 ' class=\"btn btn-default btn-sm' +\n                   ((!dropdown && className) ? ' ' + className : '') +\n                   (dropdown ? ' dropdown-toggle' : '') +\n                 '\"' +\n                 (dropdown ? ' data-toggle=\"dropdown\"' : '') +\n                 (title ? ' title=\"' + title + '\"' : '') +\n                 (event ? ' data-event=\"' + event + '\"' : '') +\n                 (name && !dropdown ? ' data-name=\"' + name + '\"' : '') +\n                 (value ? ' data-value=\\'' + value + '\\'' : '') +\n                 (hide ? ' data-hide=\\'' + hide + '\\'' : '') +\n                 (dropdown ? ' style=\"z-index: 1001;\"' : '') + // fix for old safari click on dropdown\n                 ' tabindex=\"-1\">' +\n                 label +\n                 (dropdown && !nocaret ? ' <span class=\"caret\"></span>' : '') +\n               '</button>' +\n               (dropdown || '') +\n             (dropdown ? '</div>' : '');\n    };\n\n    /**\n     * bootstrap icon button template\n     * @private\n     * @param {String} iconClassName\n     * @param {Object} [options]\n     * @param {String} [options.event]\n     * @param {String} [options.value]\n     * @param {String} [options.title]\n     * @param {String} [options.dropdown]\n     */\n    var tplIconButton = function (iconClassName, options) {\n      var label = '<i class=\"' + iconClassName + '\"></i>';\n      return tplButton(label, options);\n    };\n\n    /**\n     * bootstrap popover template\n     * @private\n     * @param {String} className\n     * @param {String} content\n     */\n    var tplPopover = function (className, content) {\n      var $popover = $('<div class=\"' + className + ' popover top in\" style=\"display: none;\">' +\n               '<div class=\"arrow\"></div>' +\n               '<div class=\"popover-content\">' +\n               '</div>' +\n             '</div>');\n\n      $popover.find('.popover-content').append(content);\n      return $popover;\n    };\n\n    /**\n     * bootstrap dialog template\n     *\n     * @param {String} className\n     * @param {String} [title='']\n     * @param {String} body\n     * @param {String} [footer='']\n     */\n    var tplDialog = function (className, title, body, footer) {\n      return '<div class=\"' + className + ' modal\" aria-hidden=\"false\">' +\n               '<div class=\"modal-dialog\">' +\n                 '<div class=\"modal-content\">' +\n                   (title ?\n                   '<div class=\"modal-header\">' +\n                     '<button type=\"button\" class=\"close\" aria-hidden=\"true\" tabindex=\"-1\">&times;</button>' +\n                     '<h4 class=\"modal-title\">' + title + '</h4>' +\n                   '</div>' : ''\n                   ) +\n                   '<div class=\"modal-body\">' + body + '</div>' +\n                   (footer ?\n                   '<div class=\"modal-footer\">' + footer + '</div>' : ''\n                   ) +\n                 '</div>' +\n               '</div>' +\n             '</div>';\n    };\n\n    /**\n     * bootstrap dropdown template\n     *\n     * @param {String|String[]} contents\n     * @param {String} [className='']\n     * @param {String} [nodeName='']\n     */\n    var tplDropdown = function (contents, className, nodeName) {\n      var classes = 'dropdown-menu' + (className ? ' ' + className : '');\n      nodeName = nodeName || 'ul';\n      if (contents instanceof Array) {\n        contents = contents.join('');\n      }\n\n      return '<' + nodeName + ' class=\"' + classes + '\">' + contents + '</' + nodeName + '>';\n    };\n\n    var tplButtonInfo = {\n      picture: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.image.image, {\n          event: 'showImageDialog',\n          title: lang.image.image,\n          hide: true\n        });\n      },\n      link: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.link.link, {\n          event: 'showLinkDialog',\n          title: lang.link.link,\n          hide: true\n        });\n      },\n      table: function (lang, options) {\n        var dropdown = [\n          '<div class=\"note-dimension-picker\">',\n          '<div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"></div>',\n          '<div class=\"note-dimension-picker-highlighted\"></div>',\n          '<div class=\"note-dimension-picker-unhighlighted\"></div>',\n          '</div>',\n          '<div class=\"note-dimension-display\"> 1 x 1 </div>'\n        ];\n        return tplIconButton(options.iconPrefix + options.icons.table.table, {\n          title: lang.table.table,\n          dropdown: tplDropdown(dropdown, 'note-table')\n        });\n      },\n      style: function (lang, options) {\n        var items = options.styleTags.reduce(function (memo, v) {\n          var label = lang.style[v === 'p' ? 'normal' : v];\n          return memo + '<li><a data-event=\"formatBlock\" href=\"#\" data-value=\"' + v + '\">' +\n                   label +\n                 '</a></li>';\n        }, '');\n\n        return tplIconButton(options.iconPrefix + options.icons.style.style, {\n          title: lang.style.style,\n          dropdown: tplDropdown(items)\n        });\n      },\n      fontname: function (lang, options) {\n        var realFontList = [];\n        var items = options.fontNames.reduce(function (memo, v) {\n          if (!agent.isFontInstalled(v) && !list.contains(options.fontNamesIgnoreCheck, v)) {\n            return memo;\n          }\n          realFontList.push(v);\n          console.log(v)\n          return memo + '<li><a data-event=\"fontName\" href=\"#\" data-value=\"' + v + '\">' +\n                          '<i class=\"' + options.iconPrefix + 'check\"></i> <span style=\"font-family:\\'' + v + '\\'\">' + v +\n                        '</span></a></li>';\n        }, '');\n\n        var hasDefaultFont = agent.isFontInstalled(options.defaultFontName);\n        var defaultFontName = (hasDefaultFont) ? options.defaultFontName : realFontList[0];\n\n        var label = '<span class=\"note-current-fontname\">' +\n                        defaultFontName +\n                     '</span>';\n        return tplButton(label, {\n          title: lang.font.name,\n          className: 'note-fontname',\n          dropdown: tplDropdown(items, 'note-check')\n        });\n      },\n      fontsize: function (lang, options) {\n        var items = options.fontSizes.reduce(function (memo, v) {\n          return memo + '<li><a data-event=\"fontSize\" href=\"#\" data-value=\"' + v + '\">' +\n                          '<i class=\"' + options.iconPrefix + options.icons.misc.check + '\"></i> ' + v +\n                        '</a></li>';\n        }, '');\n\n        var label = '<span class=\"note-current-fontsize\">11</span>';\n        return tplButton(label, {\n          title: lang.font.size,\n          className: 'note-fontsize',\n          dropdown: tplDropdown(items, 'note-check')\n        });\n      },\n      color: function (lang, options) {\n        var colorButtonLabel = '<i class=\"' +\n                                  options.iconPrefix + options.icons.color.recent +\n                                '\" style=\"color:black;background-color:yellow;\"></i>';\n\n        var colorButton = tplButton(colorButtonLabel, {\n          className: 'note-recent-color',\n          title: lang.color.recent,\n          event: 'color',\n          value: '{\"backColor\":\"yellow\"}'\n        });\n\n        var items = [\n          '<li><div class=\"btn-group\">',\n          '<div class=\"note-palette-title\">' + lang.color.background + '</div>',\n          '<div class=\"note-color-reset\" data-event=\"backColor\"',\n          ' data-value=\"inherit\" title=\"' + lang.color.transparent + '\">' + lang.color.setTransparent + '</div>',\n          '<div class=\"note-color-palette\" data-target-event=\"backColor\"></div>',\n          '</div><div class=\"btn-group\">',\n          '<div class=\"note-palette-title\">' + lang.color.foreground + '</div>',\n          '<div class=\"note-color-reset\" data-event=\"foreColor\" data-value=\"inherit\" title=\"' + lang.color.reset + '\">',\n          lang.color.resetToDefault,\n          '</div>',\n          '<div class=\"note-color-palette\" data-target-event=\"foreColor\"></div>',\n          '</div></li>'\n        ];\n\n        var moreButton = tplButton('', {\n          title: lang.color.more,\n          dropdown: tplDropdown(items)\n        });\n\n        return colorButton + moreButton;\n      },\n      bold: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.bold, {\n          event: 'bold',\n          title: lang.font.bold\n        });\n      },\n      italic: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.italic, {\n          event: 'italic',\n          title: lang.font.italic\n        });\n      },\n      underline: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.underline, {\n          event: 'underline',\n          title: lang.font.underline\n        });\n      },\n      strikethrough: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.strikethrough, {\n          event: 'strikethrough',\n          title: lang.font.strikethrough\n        });\n      },\n      superscript: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.superscript, {\n          event: 'superscript',\n          title: lang.font.superscript\n        });\n      },\n      subscript: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.subscript, {\n          event: 'subscript',\n          title: lang.font.subscript\n        });\n      },\n      clear: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.font.clear, {\n          event: 'removeFormat',\n          title: lang.font.clear\n        });\n      },\n      ul: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.lists.unordered, {\n          event: 'insertUnorderedList',\n          title: lang.lists.unordered\n        });\n      },\n      ol: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.lists.ordered, {\n          event: 'insertOrderedList',\n          title: lang.lists.ordered\n        });\n      },\n      paragraph: function (lang, options) {\n        var leftButton = tplIconButton(options.iconPrefix + options.icons.paragraph.left, {\n          title: lang.paragraph.left,\n          event: 'justifyLeft'\n        });\n        var centerButton = tplIconButton(options.iconPrefix + options.icons.paragraph.center, {\n          title: lang.paragraph.center,\n          event: 'justifyCenter'\n        });\n        var rightButton = tplIconButton(options.iconPrefix + options.icons.paragraph.right, {\n          title: lang.paragraph.right,\n          event: 'justifyRight'\n        });\n        var justifyButton = tplIconButton(options.iconPrefix + options.icons.paragraph.justify, {\n          title: lang.paragraph.justify,\n          event: 'justifyFull'\n        });\n\n        var outdentButton = tplIconButton(options.iconPrefix + options.icons.paragraph.outdent, {\n          title: lang.paragraph.outdent,\n          event: 'outdent'\n        });\n        var indentButton = tplIconButton(options.iconPrefix + options.icons.paragraph.indent, {\n          title: lang.paragraph.indent,\n          event: 'indent'\n        });\n\n        var dropdown = [\n          '<div class=\"note-align btn-group\">',\n          leftButton + centerButton + rightButton + justifyButton,\n          '</div><div class=\"note-list btn-group\">',\n          indentButton + outdentButton,\n          '</div>'\n        ];\n\n        return tplIconButton(options.iconPrefix + options.icons.paragraph.paragraph, {\n          title: lang.paragraph.paragraph,\n          dropdown: tplDropdown(dropdown, '', 'div')\n        });\n      },\n      height: function (lang, options) {\n        var items = options.lineHeights.reduce(function (memo, v) {\n          return memo + '<li><a data-event=\"lineHeight\" href=\"#\" data-value=\"' + parseFloat(v) + '\">' +\n                          '<i class=\"' + options.iconPrefix + options.icons.misc.check + '\"></i> ' + v +\n                        '</a></li>';\n        }, '');\n\n        return tplIconButton(options.iconPrefix + options.icons.font.height, {\n          title: lang.font.height,\n          dropdown: tplDropdown(items, 'note-check')\n        });\n\n      },\n      help: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.options.help, {\n          event: 'showHelpDialog',\n          title: lang.options.help,\n          hide: true\n        });\n      },\n      fullscreen: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.options.fullscreen, {\n          event: 'fullscreen',\n          title: lang.options.fullscreen\n        });\n      },\n      codeview: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.options.codeview, {\n          event: 'codeview',\n          title: lang.options.codeview\n        });\n      },\n      undo: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.history.undo, {\n          event: 'undo',\n          title: lang.history.undo\n        });\n      },\n      redo: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.history.redo, {\n          event: 'redo',\n          title: lang.history.redo\n        });\n      },\n      hr: function (lang, options) {\n        return tplIconButton(options.iconPrefix + options.icons.hr.insert, {\n          event: 'insertHorizontalRule',\n          title: lang.hr.insert\n        });\n      }\n    };\n\n    var tplPopovers = function (lang, options) {\n      // link popover\n      var tplLinkPopover = function () {\n        var linkButton = tplIconButton(options.iconPrefix + options.icons.link.link, {\n          title: lang.link.link,\n          event: 'showMbrLinkDialog',\n          hide: true\n        });\n        var mbrLinkColor = tplButtonInfo.mbrLinkColor(lang, options);\n        var content = '<a href=\"javascript:void(0)\" style=\"display:none !important\" target=\"_blank\">www.google.com</a>' +\n                      '<div class=\"note-insert btn-group\">' +\n                        linkButton + mbrLinkColor +\n                      '</div>';\n        return tplPopover('note-link-popover', content);\n      };\n\n      // buttons popover\n      var tplButtonPopover = function () {\n        var mbrLink = tplButtonInfo.mbrLink(lang, options);\n        var mbrFonts = tplButtonInfo.mbrFonts(lang, options);\n        var mbrLinkColor = tplButtonInfo.mbrLinkColor(lang, options);\n        var mbrFontSize = tplButtonInfo.mbrFontSize(lang, options);\n\n        // Check for custom toolbar options\n        var tb = options.customToolbar;\n        if (tb) {\n          if (tb.mbrLink === 'off') {\n            mbrLink = '';\n          }\n          if (tb.mbrFonts === 'off') {\n            mbrFonts = '';\n          }\n          if (tb.mbrLinkColor === 'off') {\n            mbrLinkColor = '';\n          }\n          if (tb.mbrFontSize === 'off') {\n            mbrFontSize = '';\n          }\n        }\n\n        var content = '<div class=\"note-insert btn-group\">' +\n                        mbrLink +\n                      '</div>' +\n                      '<div class=\"note-mbrFonts btn-group\">' +\n                        mbrFonts + mbrFontSize + mbrLinkColor +\n                      '</div>';\n\n        return tplPopover('note-button-popover', content);\n      };\n\n      // image popover\n      var tplImagePopover = function () {\n        var fullButton = tplButton('<span class=\"note-fontsize-10\">100%</span>', {\n          title: lang.image.resizeFull,\n          event: 'resize',\n          value: '1'\n        });\n        var halfButton = tplButton('<span class=\"note-fontsize-10\">50%</span>', {\n          title: lang.image.resizeHalf,\n          event: 'resize',\n          value: '0.5'\n        });\n        var quarterButton = tplButton('<span class=\"note-fontsize-10\">25%</span>', {\n          title: lang.image.resizeQuarter,\n          event: 'resize',\n          value: '0.25'\n        });\n\n        var leftButton = tplIconButton(options.iconPrefix + options.icons.image.floatLeft, {\n          title: lang.image.floatLeft,\n          event: 'floatMe',\n          value: 'left'\n        });\n        var rightButton = tplIconButton(options.iconPrefix + options.icons.image.floatRight, {\n          title: lang.image.floatRight,\n          event: 'floatMe',\n          value: 'right'\n        });\n        var justifyButton = tplIconButton(options.iconPrefix + options.icons.image.floatNone, {\n          title: lang.image.floatNone,\n          event: 'floatMe',\n          value: 'none'\n        });\n\n        var roundedButton = tplIconButton(options.iconPrefix + options.icons.image.shapeRounded, {\n          title: lang.image.shapeRounded,\n          event: 'imageShape',\n          value: 'img-rounded'\n        });\n        var circleButton = tplIconButton(options.iconPrefix + options.icons.image.shapeCircle, {\n          title: lang.image.shapeCircle,\n          event: 'imageShape',\n          value: 'img-circle'\n        });\n        var thumbnailButton = tplIconButton(options.iconPrefix + options.icons.image.shapeThumbnail, {\n          title: lang.image.shapeThumbnail,\n          event: 'imageShape',\n          value: 'img-thumbnail'\n        });\n        var noneButton = tplIconButton(options.iconPrefix + options.icons.image.shapeNone, {\n          title: lang.image.shapeNone,\n          event: 'imageShape',\n          value: ''\n        });\n\n        var removeButton = tplIconButton(options.iconPrefix + options.icons.image.remove, {\n          title: lang.image.remove,\n          event: 'removeMedia',\n          value: 'none'\n        });\n\n        var content = (options.disableResizeImage ? '' : '<div class=\"btn-group\">' + fullButton + halfButton + quarterButton + '</div>') +\n                      '<div class=\"btn-group\">' + leftButton + rightButton + justifyButton + '</div><br>' +\n                      '<div class=\"btn-group\">' + roundedButton + circleButton + thumbnailButton + noneButton + '</div>' +\n                      '<div class=\"btn-group\">' + removeButton + '</div>';\n        return tplPopover('note-image-popover', content);\n      };\n\n\n      // air popover\n      var tplAirPopover = function () {\n        var $content = $('<div />');\n        for (var idx = 0, len = options.airPopover.length; idx < len; idx ++) {\n          var group = options.airPopover[idx];\n          $content.append(newGroup(group, lang, options));\n        }\n\n        return tplPopover('note-air-popover', $content.children());\n      };\n\n\n      var $notePopover = $('<div class=\"note-popover\" />');\n\n      $notePopover.append(tplLinkPopover());\n      $notePopover.append(tplImagePopover());\n      $notePopover.append(tplButtonPopover());\n\n      if (options.airMode) {\n        $notePopover.append(tplAirPopover());\n      }\n\n      return $notePopover;\n    };\n\n\n\tvar newGroup = function(group, lang, options){\n\t\t  var $group = $('<div class=\"btn-group\">');\n\t\t  $group.addClass('note-' + group[0]);\n\n\t\t  for (var i = 0, lenGroup = group[1].length; i < lenGroup; i++) {\n\t\t\tvar $button = $(tplButtonInfo[group[1][i]](lang, options));\n\n\t\t\t$button.attr('data-name', group[1][i]);\n\n\t\t\t$group.append($button);\n\t\t  }\n\n\t\t  return $group;\n\t}\n\n\n    var tplHandles = function (options) {\n      return '<div class=\"note-handle\">' +\n               '<div class=\"note-control-selection\">' +\n                 '<div class=\"note-control-selection-bg\"></div>' +\n                 '<div class=\"note-control-holder note-control-nw\"></div>' +\n                 '<div class=\"note-control-holder note-control-ne\"></div>' +\n                 '<div class=\"note-control-holder note-control-sw\"></div>' +\n                 '<div class=\"' +\n                 (options.disableResizeImage ? 'note-control-holder' : 'note-control-sizing') +\n                 ' note-control-se\"></div>' +\n                 (options.disableResizeImage ? '' : '<div class=\"note-control-selection-info\"></div>') +\n               '</div>' +\n             '</div>';\n    };\n\n    /**\n     * shortcut table template\n     * @param {String} title\n     * @param {String} body\n     */\n    var tplShortcut = function (title, keys) {\n      var keyClass = 'note-shortcut-col col-xs-6 note-shortcut-';\n      var body = [];\n\n      for (var i in keys) {\n        if (keys.hasOwnProperty(i)) {\n          body.push(\n            '<div class=\"' + keyClass + 'key\">' + keys[i].kbd + '</div>' +\n            '<div class=\"' + keyClass + 'name\">' + keys[i].text + '</div>'\n            );\n        }\n      }\n\n      return '<div class=\"note-shortcut-row row\"><div class=\"' + keyClass + 'title col-xs-offset-6\">' + title + '</div></div>' +\n             '<div class=\"note-shortcut-row row\">' + body.join('</div><div class=\"note-shortcut-row row\">') + '</div>';\n    };\n\n    var tplShortcutText = function (lang) {\n      var keys = [\n        { kbd: '⌘ + B', text: lang.font.bold },\n        { kbd: '⌘ + I', text: lang.font.italic },\n        { kbd: '⌘ + U', text: lang.font.underline },\n        { kbd: '⌘ + \\\\', text: lang.font.clear }\n      ];\n\n      return tplShortcut(lang.shortcut.textFormatting, keys);\n    };\n\n    var tplShortcutAction = function (lang) {\n      var keys = [\n        { kbd: '⌘ + Z', text: lang.history.undo },\n        { kbd: '⌘ + ⇧ + Z', text: lang.history.redo },\n        { kbd: '⌘ + ]', text: lang.paragraph.indent },\n        { kbd: '⌘ + [', text: lang.paragraph.outdent },\n        { kbd: '⌘ + ENTER', text: lang.hr.insert }\n      ];\n\n      return tplShortcut(lang.shortcut.action, keys);\n    };\n\n    var tplShortcutPara = function (lang) {\n      var keys = [\n        { kbd: '⌘ + ⇧ + L', text: lang.paragraph.left },\n        { kbd: '⌘ + ⇧ + E', text: lang.paragraph.center },\n        { kbd: '⌘ + ⇧ + R', text: lang.paragraph.right },\n        { kbd: '⌘ + ⇧ + J', text: lang.paragraph.justify },\n        { kbd: '⌘ + ⇧ + NUM7', text: lang.lists.ordered },\n        { kbd: '⌘ + ⇧ + NUM8', text: lang.lists.unordered }\n      ];\n\n      return tplShortcut(lang.shortcut.paragraphFormatting, keys);\n    };\n\n    var tplShortcutStyle = function (lang) {\n      var keys = [\n        { kbd: '⌘ + NUM0', text: lang.style.normal },\n        { kbd: '⌘ + NUM1', text: lang.style.h1 },\n        { kbd: '⌘ + NUM2', text: lang.style.h2 },\n        { kbd: '⌘ + NUM3', text: lang.style.h3 },\n        { kbd: '⌘ + NUM4', text: lang.style.h4 },\n        { kbd: '⌘ + NUM5', text: lang.style.h5 },\n        { kbd: '⌘ + NUM6', text: lang.style.h6 }\n      ];\n\n      return tplShortcut(lang.shortcut.documentStyle, keys);\n    };\n\n    var tplExtraShortcuts = function (lang, options) {\n      var extraKeys = options.extraKeys;\n      var keys = [];\n\n      for (var key in extraKeys) {\n        if (extraKeys.hasOwnProperty(key)) {\n          keys.push({ kbd: key, text: extraKeys[key] });\n        }\n      }\n\n      return tplShortcut(lang.shortcut.extraKeys, keys);\n    };\n\n    var tplShortcutTable = function (lang, options) {\n      var colClass = 'class=\"note-shortcut note-shortcut-col col-sm-6 col-xs-12\"';\n      var template = [\n        '<div ' + colClass + '>' + tplShortcutAction(lang, options) + '</div>' +\n        '<div ' + colClass + '>' + tplShortcutText(lang, options) + '</div>',\n        '<div ' + colClass + '>' + tplShortcutStyle(lang, options) + '</div>' +\n        '<div ' + colClass + '>' + tplShortcutPara(lang, options) + '</div>'\n      ];\n\n      if (options.extraKeys) {\n        template.push('<div ' + colClass + '>' + tplExtraShortcuts(lang, options) + '</div>');\n      }\n\n      return '<div class=\"note-shortcut-row row\">' +\n               template.join('</div><div class=\"note-shortcut-row row\">') +\n             '</div>';\n    };\n\n    var replaceMacKeys = function (sHtml) {\n      return sHtml.replace(/⌘/g, 'Ctrl').replace(/⇧/g, 'Shift');\n    };\n\n    var tplDialogInfo = {\n      image: function (lang, options) {\n        var imageLimitation = '';\n        if (options.maximumImageFileSize) {\n          var unit = Math.floor(Math.log(options.maximumImageFileSize) / Math.log(1024));\n          var readableSize = (options.maximumImageFileSize / Math.pow(1024, unit)).toFixed(2) * 1 +\n                             ' ' + ' KMGTP'[unit] + 'B';\n          imageLimitation = '<small>' + lang.image.maximumFileSize + ' : ' + readableSize + '</small>';\n        }\n\n        var body = '<div class=\"form-group row note-group-select-from-files\">' +\n                     '<label>' + lang.image.selectFromFiles + '</label>' +\n                     '<input class=\"note-image-input\" type=\"file\" name=\"files\" accept=\"image/*\" multiple=\"multiple\" />' +\n                     imageLimitation +\n                   '</div>' +\n                   '<div class=\"form-group row\">' +\n                     '<label>' + lang.image.url + '</label>' +\n                     '<input class=\"note-image-url form-control col-md-12\" type=\"text\" />' +\n                   '</div>';\n        var footer = '<button href=\"#\" class=\"btn btn-primary note-image-btn disabled\" disabled>' + lang.image.insert + '</button>';\n        return tplDialog('note-image-dialog', lang.image.insert, body, footer);\n      },\n\n      link: function (lang, options) {\n        var body = '<div class=\"form-group row\">' +\n                     '<label>' + lang.link.textToDisplay + '</label>' +\n                     '<input class=\"note-link-text form-control col-md-12\" type=\"text\" />' +\n                   '</div>' +\n                   '<div class=\"form-group row\">' +\n                     '<label>' + lang.link.url + '</label>' +\n                     '<input class=\"note-link-url form-control col-md-12\" type=\"text\" value=\"http://\" />' +\n                   '</div>' +\n                   (!options.disableLinkTarget ?\n                     '<div class=\"checkbox\">' +\n                       '<label>' + '<input type=\"checkbox\" checked> ' +\n                         lang.link.openInNewWindow +\n                       '</label>' +\n                     '</div>' : ''\n                   );\n        var footer = '<button href=\"#\" class=\"btn btn-primary note-link-btn disabled\" disabled>' + lang.link.insert + '</button>';\n        return tplDialog('note-link-dialog', lang.link.insert, body, footer);\n      },\n\n      help: function (lang, options) {\n        var body = '<a class=\"modal-close pull-right\" aria-hidden=\"true\" tabindex=\"-1\">' + lang.shortcut.close + '</a>' +\n                   '<div class=\"title\">' + lang.shortcut.shortcuts + '</div>' +\n                   (agent.isMac ? tplShortcutTable(lang, options) : replaceMacKeys(tplShortcutTable(lang, options))) +\n                   '<p class=\"text-center\">' +\n                     '<a href=\"//summernote.org/\" target=\"_blank\">Summernote 0.6.17</a> · ' +\n                     '<a href=\"//github.com/summernote/summernote\" target=\"_blank\">Project</a> · ' +\n                     '<a href=\"//github.com/summernote/summernote/issues\" target=\"_blank\">Issues</a>' +\n                   '</p>';\n        return tplDialog('note-help-dialog', '', body, '');\n      }\n    };\n\n    var tplDialogs = function (lang, options) {\n      var dialogs = '';\n\n      $.each(tplDialogInfo, function (idx, tplDialog) {\n        dialogs += tplDialog(lang, options);\n      });\n\n      return '<div class=\"note-dialog\">' + dialogs + '</div>';\n    };\n\n    var tplStatusbar = function () {\n      return '<div class=\"note-resizebar\">' +\n               '<div class=\"note-icon-bar\"></div>' +\n               '<div class=\"note-icon-bar\"></div>' +\n               '<div class=\"note-icon-bar\"></div>' +\n             '</div>';\n    };\n\n    var representShortcut = function (str) {\n      if (agent.isMac) {\n        str = str.replace('CMD', '⌘').replace('SHIFT', '⇧');\n      }\n\n      return str.replace('BACKSLASH', '\\\\')\n                .replace('SLASH', '/')\n                .replace('LEFTBRACKET', '[')\n                .replace('RIGHTBRACKET', ']');\n    };\n\n    // decorator for $.fn.tooltip to disable animations\n    var disableAnimationForTooltips = function () {\n      if (!disableAnimationForTooltips.isExecuted) {\n        disableAnimationForTooltips.isExecuted = true;\n        var fun = $.fn.tooltip;\n        $.fn.tooltip = function(options) {\n          if (typeof options == 'object') {\n            options.animation = false;\n          }\n          return fun.apply(this, arguments);\n        };\n        $.fn.tooltip.__proto__ = fun;\n      }\n    };\n\n    /**\n     * createTooltip\n     *\n     * @param {jQuery} $container\n     * @param {Object} keyMap\n     * @param {String} [sPlacement]\n     */\n    var createTooltip = function ($container, keyMap, sPlacement) {\n      var invertedKeyMap = func.invertObject(keyMap);\n      var $buttons = $container.find('button');\n\n      disableAnimationForTooltips();\n\n      $buttons.each(function (i, elBtn) {\n        // uncomment to enable shortcuts in tooltips\n        /*\n        var $btn = $(elBtn);\n        var sShortcut = invertedKeyMap[$btn.data('event')];\n        if (sShortcut) {\n          $btn.attr('title', function (i, v) {\n            return v + ' (' + representShortcut(sShortcut) + ')';\n          });\n        }\n        */\n      // bootstrap tooltip on btn-group bug\n      // https://github.com/twbs/bootstrap/issues/5687\n      }).tooltip({\n        container: 'body',\n        trigger: 'hover',\n        placement: sPlacement || 'top'\n      }).on('click', function () {\n        $(this).tooltip('hide');\n      });\n    };\n\n    /**\n     * destroyTooltip\n     *\n     * @param {jQuery} $container\n     */\n    var destroyTooltip = function ($container) {\n      $container.find('[data-original-title]').tooltip(\n        parseInt($.fn.tooltip.Constructor.VERSION) > 3 ? 'dispose' : 'destroy'\n      );\n    };\n\n    // createPalette\n    var createPalette = function ($container, options) {\n      var colorInfo = options.colors;\n      $container.find('.note-color-palette').each(function () {\n        var $palette = $(this), eventName = $palette.attr('data-target-event');\n        var paletteContents = [];\n        for (var row = 0, lenRow = colorInfo.length; row < lenRow; row++) {\n          var colors = colorInfo[row];\n          var buttons = [];\n          for (var col = 0, lenCol = colors.length; col < lenCol; col++) {\n            var color = colors[col];\n            buttons.push(['<button type=\"button\" class=\"note-color-btn\" style=\"background-color:', color,\n                           ';\" data-event=\"', eventName,\n                           '\" data-value=\"', color,\n                           '\" title=\"', color,\n                           '\" data-toggle=\"button\" tabindex=\"-1\"></button>'].join(''));\n          }\n          paletteContents.push('<div class=\"note-color-row\">' + buttons.join('') + '</div>');\n        }\n        $palette.html(paletteContents.join(''));\n      });\n    };\n\n    /**\n     * create summernote layout (air mode)\n     *\n     * @param {jQuery} $holder\n     * @param {Object} options\n     */\n    this.createLayoutByAirMode = function ($holder, options) {\n      var langInfo = options.langInfo;\n      var keyMap = options.keyMap[agent.isMac ? 'mac' : 'pc'];\n      var id = func.uniqueId();\n\n      $holder.addClass('note-air-editor note-editable');\n      $holder.attr({\n        'id': 'note-editor-' + id,\n        'contentEditable': true\n      });\n\n      var body = document.body;\n\n      // create Popover\n      var $popover = $(tplPopovers(langInfo, options));\n      $popover.addClass('note-air-layout');\n      $popover.attr('id', 'note-popover-' + id);\n      $popover.appendTo(body);\n      createTooltip($popover, keyMap);\n      createPalette($popover, options);\n\n      // create Handle\n      var $handle = $(tplHandles(options));\n      $handle.addClass('note-air-layout');\n      $handle.attr('id', 'note-handle-' + id);\n      $handle.appendTo(body);\n\n      // create Dialog\n      var $dialog = $(tplDialogs(langInfo, options));\n      $dialog.addClass('note-air-layout');\n      $dialog.attr('id', 'note-dialog-' + id);\n      $dialog.find('button.close, a.modal-close').click(function () {\n        $(this).closest('.modal').modal('hide');\n      });\n      $dialog.appendTo(body);\n    };\n\n\n\t/**\n\t *  add AirPopover buttons\n\t *  @$holder #note-editor-... element\n\t *  @group - button group description [\"group-name\",[\"buttonType\"]]\n\t *  @types - object types = \"link,image,button,air\", all by default\n\t *  @index - index insert to\n\t *  see this.createLayoutByAirMode too\n\t */\n\tthis.addGroup = function($holder, group, types, index){\n\t\ttypes = types || \"link,image,button,air\";\n\n\t\t// create new bottons group\n\t\tvar options = $holder.data(\"options\");\n\t\tvar langInfo = options.langInfo;\n\t\tvar group = newGroup(group, langInfo, options);\n\n\t\t// calc type-button panels class\n\t\ttypes = types.split(\",\");\n\t\tvar classes = \"\";\n\t\tfor (var i=0; i<types.length; i++)\n\t\t\tclasses += (classes?\",\":\"\") + \".note-\" + types[i] + \"-popover\";\n\n\t\tvar id = $holder.attr(\"id\").replace(\"note-editor-\",\"\");\n\t\tvar popoverContent = $(\"#note-popover-\"+id)\n\t\t\t\t.find(classes)\n\t\t\t\t.find(\".popover-content\");\n\t\t// insert at index\n\t\tif (index === 0)\n            popoverContent.prepend(group);\n        else if (index>0)\n            popoverContent.children().eq(index - 1).after(group);\n        else\n\t\t\tgroup.appendTo(popoverContent);\n\t}\n\n\n    /**\n     * create summernote layout (normal mode)\n     *\n     * @param {jQuery} $holder\n     * @param {Object} options\n     */\n    this.createLayoutByFrame = function ($holder, options) {\n      var langInfo = options.langInfo;\n\n      //01. create Editor\n      var $editor = $('<div class=\"note-editor panel panel-default\" />');\n      if (options.width) {\n        $editor.width(options.width);\n      }\n\n      //02. statusbar (resizebar)\n      if (options.height > 0) {\n        $('<div class=\"note-statusbar\">' + (options.disableResizeEditor ? '' : tplStatusbar()) + '</div>').prependTo($editor);\n      }\n\n      //03 editing area\n      var $editingArea = $('<div class=\"note-editing-area\" />');\n      //03. create editable\n      var isContentEditable = !$holder.is(':disabled');\n      var $editable = $('<div class=\"note-editable panel-body\" contentEditable=\"' + isContentEditable + '\"></div>').prependTo($editingArea);\n      if (options.height) {\n        $editable.height(options.height);\n      }\n      if (options.direction) {\n        $editable.attr('dir', options.direction);\n      }\n      var placeholder = $holder.attr('placeholder') || options.placeholder;\n      if (placeholder) {\n        $editable.attr('data-placeholder', placeholder);\n      }\n\n      $editable.html(dom.html($holder) || dom.emptyPara);\n\n      //031. create codable\n      $('<textarea class=\"note-codable\"></textarea>').prependTo($editingArea);\n\n      //04. create Popover\n      var $popover = $(tplPopovers(langInfo, options)).prependTo($editingArea);\n      createPalette($popover, options);\n      createTooltip($popover, keyMap);\n\n      //05. handle(control selection, ...)\n      $(tplHandles(options)).prependTo($editingArea);\n\n      $editingArea.prependTo($editor);\n\n      //06. create Toolbar\n      var $toolbar = $('<div class=\"note-toolbar panel-heading\" />');\n      for (var idx = 0, len = options.toolbar.length; idx < len; idx ++) {\n        var groupName = options.toolbar[idx][0];\n        var groupButtons = options.toolbar[idx][1];\n\n        var $group = $('<div class=\"note-' + groupName + ' btn-group\" />');\n        for (var i = 0, btnLength = groupButtons.length; i < btnLength; i++) {\n          var buttonInfo = tplButtonInfo[groupButtons[i]];\n          // continue creating toolbar even if a button doesn't exist\n          if (!$.isFunction(buttonInfo)) { continue; }\n\n          var $button = $(buttonInfo(langInfo, options));\n          $button.attr('data-name', groupButtons[i]);  // set button's alias, becuase to get button element from $toolbar\n          $group.append($button);\n        }\n        $toolbar.append($group);\n      }\n\n      var keyMap = options.keyMap[agent.isMac ? 'mac' : 'pc'];\n      createPalette($toolbar, options);\n      createTooltip($toolbar, keyMap, 'bottom');\n      $toolbar.prependTo($editor);\n\n      //07. create Dropzone\n      $('<div class=\"note-dropzone\"><div class=\"note-dropzone-message\"></div></div>').prependTo($editor);\n\n      //08. create Dialog\n      var $dialogContainer = options.dialogsInBody ? $(document.body) : $editor;\n      var $dialog = $(tplDialogs(langInfo, options)).prependTo($dialogContainer);\n      $dialog.find('button.close, a.modal-close').click(function () {\n        $(this).closest('.modal').modal('hide');\n      });\n\n      //09. Editor/Holder switch\n      $editor.insertAfter($holder);\n      $holder.hide();\n    };\n\n    this.hasNoteEditor = function ($holder) {\n      return this.noteEditorFromHolder($holder).length > 0;\n    };\n\n    this.noteEditorFromHolder = function ($holder) {\n      if ($holder.hasClass('note-air-editor')) {\n        return $holder;\n      } else if ($holder.next().hasClass('note-editor')) {\n        return $holder.next();\n      } else {\n        return $();\n      }\n    };\n\n    /**\n     * create summernote layout\n     *\n     * @param {jQuery} $holder\n     * @param {Object} options\n     */\n    this.createLayout = function ($holder, options) {\n      if (options.airMode) {\n        this.createLayoutByAirMode($holder, options);\n      } else {\n        this.createLayoutByFrame($holder, options);\n      }\n    };\n\n    /**\n     * returns layoutInfo from holder\n     *\n     * @param {jQuery} $holder - placeholder\n     * @return {Object}\n     */\n    this.layoutInfoFromHolder = function ($holder) {\n      var $editor = this.noteEditorFromHolder($holder);\n      if (!$editor.length) {\n        return;\n      }\n\n      // connect $holder to $editor\n      $editor.data('holder', $holder);\n\n      return dom.buildLayoutInfo($editor);\n    };\n\n    /**\n     * removeLayout\n     *\n     * @param {jQuery} $holder - placeholder\n     * @param {Object} layoutInfo\n     * @param {Object} options\n     *\n     */\n    this.removeLayout = function ($holder, layoutInfo, options) {\n\n      destroyTooltip(layoutInfo.popover());\n\n      if (options.airMode) {\n        $holder.removeClass('note-air-editor note-editable')\n               .removeAttr('id contentEditable');\n\n        layoutInfo.popover().remove();\n        layoutInfo.handle().remove();\n        layoutInfo.dialog().remove();\n      } else {\n        $holder.html(layoutInfo.editable().html());\n\n        if (options.dialogsInBody) {\n          layoutInfo.dialog().remove();\n        }\n        layoutInfo.editor().remove();\n        $holder.show();\n      }\n    };\n\n    /**\n     *\n     * @return {Object}\n     * @return {function(label, options=):string} return.button {@link #tplButton function to make text button}\n     * @return {function(iconClass, options=):string} return.iconButton {@link #tplIconButton function to make icon button}\n     * @return {function(className, title=, body=, footer=):string} return.dialog {@link #tplDialog function to make dialog}\n     */\n    this.getTemplate = function () {\n      return {\n        button: tplButton,\n        iconButton: tplIconButton,\n        dialog: tplDialog\n      };\n    };\n\n    /**\n     * add button information\n     *\n     * @param {String} name button name\n     * @param {Function} buttonInfo function to make button, reference to {@link #tplButton},{@link #tplIconButton}\n     */\n    this.addButtonInfo = function (name, buttonInfo) {\n      tplButtonInfo[name] = buttonInfo;\n    };\n\n    /**\n     *\n     * @param {String} name\n     * @param {Function} dialogInfo function to make dialog, reference to {@link #tplDialog}\n     */\n    this.addDialogInfo = function (name, dialogInfo) {\n      tplDialogInfo[name] = dialogInfo;\n    };\n  };\n\n\n  // jQuery namespace for summernote\n  /**\n   * @class $.summernote\n   *\n   * summernote attribute\n   *\n   * @mixin defaults\n   * @singleton\n   *\n   */\n  $.summernote = $.summernote || {};\n\n  // extends default settings\n  //  - $.summernote.version\n  //  - $.summernote.options\n  //  - $.summernote.lang\n  $.extend($.summernote, defaults);\n\n  var renderer = new Renderer();\n  var eventHandler = new EventHandler();\n\n  $.extend($.summernote, {\n    /** @property {Renderer} */\n    renderer: renderer,\n    /** @property {EventHandler} */\n    eventHandler: eventHandler,\n    /**\n     * @property {Object} core\n     * @property {core.agent} core.agent\n     * @property {core.dom} core.dom\n     * @property {core.range} core.range\n     */\n    core: {\n      agent: agent,\n      list : list,\n      dom: dom,\n      range: range\n    },\n    /**\n     * @property {Object}\n     * pluginEvents event list for plugins\n     * event has name and callback function.\n     *\n     * ```\n     * $.summernote.addPlugin({\n     *     events : {\n     *          'hello' : function(layoutInfo, value, $target) {\n     *              console.log('event name is hello, value is ' + value );\n     *          }\n     *     }\n     * })\n     * ```\n     *\n     * * event name is data-event property.\n     * * layoutInfo is a summernote layout information.\n     * * value is data-value property.\n     */\n    pluginEvents: {},\n\n    plugins : []\n  });\n\n  /**\n   * @method addPlugin\n   *\n   * add Plugin in Summernote\n   *\n   * Summernote can make a own plugin.\n   *\n   * ### Define plugin\n   * ```\n   * // get template function\n   * var tmpl = $.summernote.renderer.getTemplate();\n   *\n   * // add a button\n   * $.summernote.addPlugin({\n   *     buttons : {\n   *        // \"hello\"  is button's namespace.\n   *        \"hello\" : function(lang, options) {\n   *            // make icon button by template function\n   *            return tmpl.iconButton('fa fa-header', {\n   *                // callback function name when button clicked\n   *                event : 'hello',\n   *                // set data-value property\n   *                value : 'hello',\n   *                hide : true\n   *            });\n   *        }\n   *\n   *     },\n   *\n   *     events : {\n   *        \"hello\" : function(layoutInfo, value) {\n   *            // here is event code\n   *        }\n   *     }\n   * });\n   * ```\n   * ### Use a plugin in toolbar\n   *\n   * ```\n   *    $(\"#editor\").summernote({\n   *    ...\n   *    toolbar : [\n   *        // display hello plugin in toolbar\n   *        ['group', [ 'hello' ]]\n   *    ]\n   *    ...\n   *    });\n   * ```\n   *\n   *\n   * @param {Object} plugin\n   * @param {Object} [plugin.buttons] define plugin button. for detail, see to Renderer.addButtonInfo\n   * @param {Object} [plugin.dialogs] define plugin dialog. for detail, see to Renderer.addDialogInfo\n   * @param {Object} [plugin.events] add event in $.summernote.pluginEvents\n   * @param {Object} [plugin.langs] update $.summernote.lang\n   * @param {Object} [plugin.options] update $.summernote.options\n   */\n  $.summernote.addPlugin = function (plugin) {\n\n    // save plugin list\n    $.summernote.plugins.push(plugin);\n\n    if (plugin.buttons) {\n      $.each(plugin.buttons, function (name, button) {\n        renderer.addButtonInfo(name, button);\n      });\n    }\n\n    if (plugin.dialogs) {\n      $.each(plugin.dialogs, function (name, dialog) {\n        renderer.addDialogInfo(name, dialog);\n      });\n    }\n\n    if (plugin.events) {\n      $.each(plugin.events, function (name, event) {\n        $.summernote.pluginEvents[name] = event;\n      });\n    }\n\n    if (plugin.langs) {\n      $.each(plugin.langs, function (locale, lang) {\n        if ($.summernote.lang[locale]) {\n          $.extend($.summernote.lang[locale], lang);\n        }\n      });\n    }\n\n    if (plugin.options) {\n      $.extend($.summernote.options, plugin.options);\n    }\n  };\n\n  /*\n   * Adaptation of color for background\n   */\n  $.summernote.adaptColorForBg = function(color) {\n    return tinycolor(color).toHex() == 'ffffff' ? '#efefef' : color;\n  };\n\n  /*\n   * extend $.fn\n   */\n  $.fn.extend({\n    /**\n     * @method\n     * Initialize summernote\n     *  - create editor layout and attach Mouse and keyboard events.\n     *\n     * ```\n     * $(\"#summernote\").summernote( { options ..} );\n     * ```\n     *\n     * @member $.fn\n     * @param {Object|String} options reference to $.summernote.options\n     * @return {this}\n     */\n    summernote: function () {\n      // check first argument's type\n      //  - {String}: External API call {{module}}.{{method}}\n      //  - {Object}: init options\n      var type = $.type(list.head(arguments));\n      var isExternalAPICalled = type === 'string';\n      var hasInitOptions = type === 'object';\n\n      // extend default options with custom user options\n      var options = hasInitOptions ? list.head(arguments) : {};\n\n      options = $.extend({}, $.summernote.options, options);\n      options.icons = $.extend({}, $.summernote.options.icons, options.icons);\n\n      // Include langInfo in options for later use, e.g. for image drag-n-drop\n      // Setup language info with en-US as default\n      options.langInfo = $.extend(true, {}, $.summernote.lang['en-US'], $.summernote.lang[options.lang]);\n\n      // override plugin options\n      if (!isExternalAPICalled && hasInitOptions) {\n        for (var i = 0, len = $.summernote.plugins.length; i < len; i++) {\n          var plugin = $.summernote.plugins[i];\n\n          if (options.plugin[plugin.name]) {\n            $.summernote.plugins[i] = $.extend(true, plugin, options.plugin[plugin.name]);\n          }\n        }\n      }\n\n      this.each(function (idx, holder) {\n        var $holder = $(holder);\n        var currentOptions = $.extend(true, {}, options);\n\n        // add or remove custom buttons to toolbar\n        var customToolbar = $holder.attr('data-toolbar');\n        if (customToolbar) {\n          if (!currentOptions.customToolbar) {\n            currentOptions.customToolbar = {};\n          }\n\n          // parse string\n          // example:\n          //    in : \"-mbrBtnAdd,mbrBtnRemove,-mbrBtnColor\"\n          //    out: {mbrBtnAdd: 'off', mbrBtnRemove: 'on', mbrBtnColor: 'off'}\n          var customBtns = customToolbar.split(/,\\s|,/g);\n          for (var k in customBtns) {\n            if (/^-/g.test(customBtns[k])) {\n              currentOptions.customToolbar[customBtns[k].replace(/^-/g, '')] = 'off';\n            } else {\n              currentOptions.customToolbar[customBtns[k]] = 'on';\n            }\n          }\n\n          // remove buttons from air popover\n          /* jshint ignore:start */\n          for (var x in currentOptions.airPopover) {\n            for (var y in currentOptions.airPopover[x]) {\n              if (y > 1) continue;\n              var listBtns = currentOptions.airPopover[x][y];\n              if (typeof listBtns === 'object') {\n                // each button check and remove if need\n                for (var z in listBtns) {\n                  var name = listBtns[z];\n                  if (currentOptions.customToolbar[name] === 'off') {\n                    currentOptions.airPopover[x][y].splice(z, 1);\n                  }\n                }\n\n                // check if empty array\n                if (!listBtns.length) {\n                  currentOptions.airPopover[x].splice(y, 1);\n                }\n              }\n            }\n            if (currentOptions.airPopover[x].length === 1) {\n              currentOptions.airPopover.splice(x, 1);\n            }\n          }\n          /* jshint ignore:end */\n        }\n\n        // if layout isn't created yet, createLayout and attach events\n        if (!renderer.hasNoteEditor($holder)) {\n          renderer.createLayout($holder, currentOptions);\n\n          var layoutInfo = renderer.layoutInfoFromHolder($holder);\n          $holder.data('layoutInfo', layoutInfo);\n\n          eventHandler.attach(layoutInfo, currentOptions);\n          eventHandler.attachCustomEvent(layoutInfo, currentOptions);\n        }\n      });\n\n      var $first = this.first();\n      if ($first.length) {\n        var layoutInfo = renderer.layoutInfoFromHolder($first);\n\n        // external API\n        if (isExternalAPICalled) {\n          var moduleAndMethod = list.head(list.from(arguments));\n          var args = list.tail(list.from(arguments));\n\n          // TODO now external API only works for editor\n          var params = [moduleAndMethod, layoutInfo.editable()].concat(args);\n          return eventHandler.invoke.apply(eventHandler, params);\n        } else if (options.focus) {\n          // focus on first editable element for initialize editor\n          layoutInfo.editable().focus();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * @method\n     *\n     * get the HTML contents of note or set the HTML contents of note.\n     *\n     * * get contents\n     * ```\n     * var content = $(\"#summernote\").code();\n     * ```\n     * * set contents\n     *\n     * ```\n     * $(\"#summernote\").code(html);\n     * ```\n     *\n     * @member $.fn\n     * @param {String} [html] - HTML contents(optional, set)\n     * @return {this|String} - context(set) or HTML contents of note(get).\n     */\n    code: function (html) {\n      // get the HTML contents of note\n      if (html === undefined) {\n        var $holder = this.first();\n        if (!$holder.length) {\n          return;\n        }\n\n        var layoutInfo = renderer.layoutInfoFromHolder($holder);\n        var $editable = layoutInfo && layoutInfo.editable();\n\n        if ($editable && $editable.length) {\n          var isCodeview = eventHandler.invoke('codeview.isActivated', layoutInfo);\n          eventHandler.invoke('codeview.sync', layoutInfo);\n          return isCodeview ? layoutInfo.codable().val() :\n                              layoutInfo.editable().html();\n        }\n        return dom.value($holder);\n      }\n\n      // set the HTML contents of note\n      this.each(function (i, holder) {\n        var layoutInfo = renderer.layoutInfoFromHolder($(holder));\n        var $editable = layoutInfo && layoutInfo.editable();\n        if ($editable) {\n          $editable.html(html);\n        }\n      });\n\n      return this;\n    },\n\n    /**\n     * @method\n     *\n     * destroy Editor Layout and detach Key and Mouse Event\n     *\n     * @member $.fn\n     * @return {this}\n     */\n    destroy: function () {\n      this.each(function (idx, holder) {\n        var $holder = $(holder);\n\n        if (!renderer.hasNoteEditor($holder)) {\n          return;\n        }\n\n        var info = renderer.layoutInfoFromHolder($holder);\n        var options = info.editor().data('options');\n\n        eventHandler.detach(info, options);\n        renderer.removeLayout($holder, info, options);\n      });\n\n      return this;\n    }\n\n  });\n\n\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXBwL2J1aWxkZXIvc3VtbWVybm90ZS9zdW1tZXJub3RlLmpzPzQ2MmUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLElBQTBDO0FBQ2hEO0FBQ0EsSUFBSSxpQ0FBTyxDQUFDLDJDQUFRLENBQUMsb0NBQUUsT0FBTztBQUFBO0FBQUE7QUFBQSxvR0FBQztBQUMvQixHQUFHLE1BQU0sRUFHTjtBQUNILENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixlQUFlLE1BQU07QUFDckIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwyQkFBMkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNw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Q2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFF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TztBQUN6QixrQkFBa0IsT0FBTztBQUN6QixrQkFBa0IsT0FBTztBQUN6QixrQkFBa0IsT0FBTztBQUN6QixrQkFBa0IsTUFBTTtBQUN4QixrQkFBa0IsUUFBUTtBQUMxQixrQkFBa0IsTUFBTTtBQUN4QixrQkFBa0IsU0FBUztBQUMzQixrQkFBa0IsU0FBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCLEVBQUU7O0FBRWxCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFD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QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNENBQTRDLFdBQVc7QUFDdkQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEMsU0FBUztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPOzs7QUFHUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFEQUFxRCxVQUFVO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsTUFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsS0FBSztBQUNwQixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0I7QUFDaEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7O0FBRWhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5Q0FBeUM7QUFDeEU7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYLG9EQUFvRCxjQUFjO0FBQ2xFLHNEQUFzRCxjQUFjO0FBQ3BFLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVCxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtDQUFrQztBQUMzQztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7O0FBRVQ7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHNEQUFRLHFDQUFDLG1EQUFZLENBQUMsR0FBRTtBQUM5QjtBQUNBLE9BQU8sNkVBQUM7QUFDUixLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSwwREFBMEQsU0FBUztBQUNuRTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLHdCQUF3QjtBQUMvQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdCQUF3QjtBQUMvQztBQUNBOztBQUVBLHNDQUFzQyxxQkFBcUI7QUFDM0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsTUFBTTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQOztBQUVBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVB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QUNiLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQLDRFQUE0RTtBQUM1RTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx3REFBd0QsU0FBUztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBLDJGQUEyRjtBQUMzRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0dBQWtHO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0IsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHdCQUF3Qjs7QUFFOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIscUJBQXFCO0FBQ3hDLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELFdBQVc7QUFDckU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBLCtDQUErQyxjQUFjO0FBQzdEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxxQ0FBcUM7QUFDOUMsU0FBUyx1Q0FBdUM7QUFDaEQsU0FBUywwQ0FBMEM7QUFDbkQsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVMsd0NBQXdDO0FBQ2pELFNBQVMsNENBQTRDO0FBQ3JELFNBQVMsNENBQTRDO0FBQ3JELFNBQVMsNkNBQTZDO0FBQ3RELFNBQVM7QUFDVDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLDhDQUE4QztBQUN2RCxTQUFTLGdEQUFnRDtBQUN6RCxTQUFTLCtDQUErQztBQUN4RCxTQUFTLGlEQUFpRDtBQUMxRCxTQUFTLGdEQUFnRDtBQUN6RCxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUywyQ0FBMkM7QUFDcEQsU0FBUyx1Q0FBdUM7QUFDaEQsU0FBUyx1Q0FBdUM7QUFDaEQsU0FBUyx1Q0FBdUM7QUFDaEQsU0FBUyx1Q0FBdUM7QUFDaEQsU0FBUyx1Q0FBdUM7QUFDaEQsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsaUNBQWlDO0FBQ3REO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxPQUFPO0FBQ3RCLGVBQWUsT0FBTztBQUN0QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9B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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZ0JBQWdCLFlBQVk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTs7QUFFQSxHQUFHOzs7QUFHSCxDQUFDIiwiZmlsZSI6Ii4vd2ViL2FwcC9idWlsZGVyL3N1bW1lcm5vdGUvc3VtbWVybm90ZS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3VwZXIgc2ltcGxlIHd5c2l3eWcgZWRpdG9yIG9uIEJvb3RzdHJhcCB2MC42LjE3XG4gKiBodHRwOi8vc3VtbWVybm90ZS5vcmcvXG4gKlxuICogc3VtbWVybm90ZS5qc1xuICogQ29weXJpZ2h0IDIwMTMtMjAxNSBBbGFuIEhvbmcuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIHN1bW1lcm5vdGUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuL1xuICpcbiAqIERhdGU6IDIwMTUtMTEtMTFUMTM6MTJaXG4gKiBNb2RpZmllZCBieSBNb2JpcmlzZS5jb21cbiAqL1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIC8qIGdsb2JhbCBkZWZpbmUgKi9cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzOiBqUXVlcnlcbiAgICBmYWN0b3J5KHdpbmRvdy5qUXVlcnkpO1xuICB9XG59KGZ1bmN0aW9uICgkKSB7XG4gIGlmICghQXJyYXkucHJvdG90eXBlLnJlZHVjZSkge1xuICAgIC8qKlxuICAgICAqIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UgcG9seWZpbGxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtWYWx1ZX0gW2luaXRpYWxWYWx1ZV1cbiAgICAgKiBAcmV0dXJuIHtWYWx1ZX1cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cDovL2dvby5nbC9XTnJpUURcbiAgICAgKi9cbiAgICBBcnJheS5wcm90b3R5cGUucmVkdWNlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdCA9IE9iamVjdCh0aGlzKSwgbGVuID0gdC5sZW5ndGggPj4+IDAsIGsgPSAwLCB2YWx1ZTtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHZhbHVlID0gYXJndW1lbnRzWzFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKGsgPCBsZW4gJiYgIShrIGluIHQpKSB7XG4gICAgICAgICAgaysrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID49IGxlbikge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUnKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRbaysrXTtcbiAgICAgIH1cbiAgICAgIGZvciAoOyBrIDwgbGVuOyBrKyspIHtcbiAgICAgICAgaWYgKGsgaW4gdCkge1xuICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2sodmFsdWUsIHRba10sIGssIHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2YgQXJyYXkucHJvdG90eXBlLmZpbHRlcikge1xuICAgIC8qKlxuICAgICAqIEFycmF5LnByb3RvdHlwZS5maWx0ZXIgcG9seWZpbGxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKlxuICAgICAqIEBzZWUgaHR0cDovL2dvby5nbC9UMUtGbnFcbiAgICAgKi9cbiAgICBBcnJheS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgIHZhciB0ID0gT2JqZWN0KHRoaXMpLCBsZW4gPSB0Lmxlbmd0aCA+Pj4gMDtcblxuICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHMubGVuZ3RoID49IDIgPyBhcmd1bWVudHNbMV0gOiB2b2lkIDA7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChpIGluIHQpIHtcbiAgICAgICAgICB2YXIgdmFsID0gdFtpXTtcbiAgICAgICAgICBpZiAoZnVuYy5jYWxsKHRoaXNBcmcsIHZhbCwgaSwgdCkpIHtcbiAgICAgICAgICAgIHJlcy5wdXNoKHZhbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghQXJyYXkucHJvdG90eXBlLm1hcCkge1xuICAgIC8qKlxuICAgICAqIEFycmF5LnByb3RvdHlwZS5tYXAgcG9seWZpbGxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICpcbiAgICAgKiBAc2VlIGh0dHBzOi8vZ29vLmdsL1NNV2FNS1xuICAgICAqL1xuICAgIEFycmF5LnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICAgIHZhciBULCBBLCBrO1xuICAgICAgaWYgKHRoaXMgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignIHRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgTyA9IE9iamVjdCh0aGlzKTtcbiAgICAgIHZhciBsZW4gPSBPLmxlbmd0aCA+Pj4gMDtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihjYWxsYmFjayArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIFQgPSB0aGlzQXJnO1xuICAgICAgfVxuXG4gICAgICBBID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBrID0gMDtcblxuICAgICAgd2hpbGUgKGsgPCBsZW4pIHtcbiAgICAgICAgdmFyIGtWYWx1ZSwgbWFwcGVkVmFsdWU7XG4gICAgICAgIGlmIChrIGluIE8pIHtcbiAgICAgICAgICBrVmFsdWUgPSBPW2tdO1xuICAgICAgICAgIG1hcHBlZFZhbHVlID0gY2FsbGJhY2suY2FsbChULCBrVmFsdWUsIGssIE8pO1xuICAgICAgICAgIEFba10gPSBtYXBwZWRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBrKys7XG4gICAgICB9XG4gICAgICByZXR1cm4gQTtcbiAgICB9O1xuICB9XG5cbiAgdmFyIGlzU3VwcG9ydEFtZCA9IGZhbHNlOy8vdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kO1xuXG4gIC8qKlxuICAgKiByZXR1cm5zIHdoZXRoZXIgZm9udCBpcyBpbnN0YWxsZWQgb3Igbm90LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZm9udE5hbWVcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIHZhciBpc0ZvbnRJbnN0YWxsZWQgPSBmdW5jdGlvbiAoZm9udE5hbWUpIHtcbiAgICB2YXIgdGVzdEZvbnROYW1lID0gZm9udE5hbWUgPT09ICdDb21pYyBTYW5zIE1TJyA/ICdDb3VyaWVyIE5ldycgOiAnQ29taWMgU2FucyBNUyc7XG4gICAgdmFyICR0ZXN0ZXIgPSAkKCc8ZGl2PicpLmNzcyh7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGxlZnQ6ICctOTk5OXB4JyxcbiAgICAgIHRvcDogJy05OTk5cHgnLFxuICAgICAgZm9udFNpemU6ICcyMDBweCdcbiAgICB9KS50ZXh0KCdtbW1tbW1tbW13d3d3d3d3JykuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XG5cbiAgICB2YXIgb3JpZ2luYWxXaWR0aCA9ICR0ZXN0ZXIuY3NzKCdmb250RmFtaWx5JywgdGVzdEZvbnROYW1lKS53aWR0aCgpO1xuICAgIHZhciB3aWR0aCA9ICR0ZXN0ZXIuY3NzKCdmb250RmFtaWx5JywgZm9udE5hbWUgKyAnLCcgKyB0ZXN0Rm9udE5hbWUpLndpZHRoKCk7XG5cbiAgICAkdGVzdGVyLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIG9yaWdpbmFsV2lkdGggIT09IHdpZHRoO1xuICB9O1xuXG4gIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICB2YXIgaXNNU0lFID0gL01TSUV8VHJpZGVudC9pLnRlc3QodXNlckFnZW50KTtcbiAgdmFyIGJyb3dzZXJWZXJzaW9uO1xuICBpZiAoaXNNU0lFKSB7XG4gICAgdmFyIG1hdGNoZXMgPSAvTVNJRSAoXFxkK1suXVxcZCspLy5leGVjKHVzZXJBZ2VudCk7XG4gICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgIGJyb3dzZXJWZXJzaW9uID0gcGFyc2VGbG9hdChtYXRjaGVzWzFdKTtcbiAgICB9XG4gICAgbWF0Y2hlcyA9IC9UcmlkZW50XFwvLipydjooWzAtOV17MSx9W1xcLjAtOV17MCx9KS8uZXhlYyh1c2VyQWdlbnQpO1xuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICBicm93c2VyVmVyc2lvbiA9IHBhcnNlRmxvYXQobWF0Y2hlc1sxXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBjb3JlLmFnZW50XG4gICAqXG4gICAqIE9iamVjdCB3aGljaCBjaGVjayBwbGF0Zm9ybSBhbmQgYWdlbnRcbiAgICpcbiAgICogQHNpbmdsZXRvblxuICAgKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIGFnZW50XG4gICAqL1xuICB2YXIgYWdlbnQgPSB7XG4gICAgLyoqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gW2lzTWFjPWZhbHNlXSB0cnVlIGlmIHRoaXMgYWdlbnQgaXMgTWFjICAqL1xuICAgIGlzTWFjOiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdNYWMnKSA+IC0xLFxuICAgIC8qKiBAcHJvcGVydHkge0Jvb2xlYW59IFtpc01TSUU9ZmFsc2VdIHRydWUgaWYgdGhpcyBhZ2VudCBpcyBhIEludGVybmV0IEV4cGxvcmVyICAqL1xuICAgIGlzTVNJRTogaXNNU0lFLFxuICAgIC8qKiBAcHJvcGVydHkge0Jvb2xlYW59IFtpc0ZGPWZhbHNlXSB0cnVlIGlmIHRoaXMgYWdlbnQgaXMgYSBGaXJlZm94ICAqL1xuICAgIGlzRkY6IC9maXJlZm94L2kudGVzdCh1c2VyQWdlbnQpLFxuICAgIGlzV2Via2l0OiAvd2Via2l0L2kudGVzdCh1c2VyQWdlbnQpLFxuICAgIC8qKiBAcHJvcGVydHkge0Jvb2xlYW59IFtpc1NhZmFyaT1mYWxzZV0gdHJ1ZSBpZiB0aGlzIGFnZW50IGlzIGEgU2FmYXJpICAqL1xuICAgIGlzU2FmYXJpOiAvc2FmYXJpL2kudGVzdCh1c2VyQWdlbnQpLFxuICAgIC8qKiBAcHJvcGVydHkge0Zsb2F0fSBicm93c2VyVmVyc2lvbiBjdXJyZW50IGJyb3dzZXIgdmVyc2lvbiAgKi9cbiAgICBicm93c2VyVmVyc2lvbjogYnJvd3NlclZlcnNpb24sXG4gICAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBqcXVlcnlWZXJzaW9uIGN1cnJlbnQgalF1ZXJ5IHZlcnNpb24gc3RyaW5nICAqL1xuICAgIGpxdWVyeVZlcnNpb246IHBhcnNlRmxvYXQoJC5mbi5qcXVlcnkpLFxuICAgIGlzU3VwcG9ydEFtZDogaXNTdXBwb3J0QW1kLFxuICAgIGhhc0NvZGVNaXJyb3I6IC8qaXNTdXBwb3J0QW1kID8gcmVxdWlyZS5zcGVjaWZpZWQoJ0NvZGVNaXJyb3InKSA6Ki8gISF3aW5kb3cuQ29kZU1pcnJvcixcbiAgICBpc0ZvbnRJbnN0YWxsZWQ6IGlzRm9udEluc3RhbGxlZCxcbiAgICBpc1czQ1JhbmdlU3VwcG9ydDogISFkb2N1bWVudC5jcmVhdGVSYW5nZVxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgY29yZS5mdW5jXG4gICAqXG4gICAqIGZ1bmMgdXRpbHMgKGZvciBoaWdoLW9yZGVyIGZ1bmMncyBhcmcpXG4gICAqXG4gICAqIEBzaW5nbGV0b25cbiAgICogQGFsdGVybmF0ZUNsYXNzTmFtZSBmdW5jXG4gICAqL1xuICB2YXIgZnVuYyA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVxID0gZnVuY3Rpb24gKGl0ZW1BKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW1CKSB7XG4gICAgICAgIHJldHVybiBpdGVtQSA9PT0gaXRlbUI7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgZXEyID0gZnVuY3Rpb24gKGl0ZW1BLCBpdGVtQikge1xuICAgICAgcmV0dXJuIGl0ZW1BID09PSBpdGVtQjtcbiAgICB9O1xuXG4gICAgdmFyIHBlcTIgPSBmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbUEsIGl0ZW1CKSB7XG4gICAgICAgIHJldHVybiBpdGVtQVtwcm9wTmFtZV0gPT09IGl0ZW1CW3Byb3BOYW1lXTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBvayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICB2YXIgZmFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdmFyIG5vdCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIWYuYXBwbHkoZiwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBhbmQgPSBmdW5jdGlvbiAoZkEsIGZCKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGZBKGl0ZW0pICYmIGZCKGl0ZW0pO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIHNlbGYgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfTtcblxuICAgIHZhciBpZENvdW50ZXIgPSAwO1xuXG4gICAgLyoqXG4gICAgICogZ2VuZXJhdGUgYSBnbG9iYWxseS11bmlxdWUgaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcHJlZml4XVxuICAgICAqL1xuICAgIHZhciB1bmlxdWVJZCA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICAgIHZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7XG4gICAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBibmQgKGJvdW5kcykgZnJvbSByZWN0XG4gICAgICpcbiAgICAgKiAtIElFIENvbXBhdGFiaWxpdHkgSXNzdWU6IGh0dHA6Ly9nb28uZ2wvc1JMT0FvXG4gICAgICogLSBTY3JvbGwgSXNzdWU6IGh0dHA6Ly9nb28uZ2wvc05qVWNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVjdH0gcmVjdFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gYm91bmRzXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMudG9wXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMubGVmdFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gYm91bmRzLndpZHRoXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMuaGVpZ2h0XG4gICAgICovXG4gICAgdmFyIHJlY3QyYm5kID0gZnVuY3Rpb24gKHJlY3QpIHtcbiAgICAgIHZhciAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogcmVjdC50b3AgKyAkZG9jdW1lbnQuc2Nyb2xsVG9wKCksXG4gICAgICAgIGxlZnQ6IHJlY3QubGVmdCArICRkb2N1bWVudC5zY3JvbGxMZWZ0KCksXG4gICAgICAgIHdpZHRoOiByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LFxuICAgICAgICBoZWlnaHQ6IHJlY3QuYm90dG9tIC0gcmVjdC50b3BcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2hlcmUgdGhlIGtleXMgaGF2ZSBiZWNvbWUgdGhlIHZhbHVlcyBhbmQgdGhlIHZhbHVlcyB0aGUga2V5cy5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqL1xuICAgIHZhciBpbnZlcnRPYmplY3QgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICB2YXIgaW52ZXJ0ZWQgPSB7fTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgaW52ZXJ0ZWRbb2JqW2tleV1dID0ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gaW52ZXJ0ZWQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3ByZWZpeF1cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG4gICAgdmFyIG5hbWVzcGFjZVRvQ2FtZWwgPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBwcmVmaXgpIHtcbiAgICAgIHByZWZpeCA9IHByZWZpeCB8fCAnJztcbiAgICAgIHJldHVybiBwcmVmaXggKyBuYW1lc3BhY2Uuc3BsaXQoJy4nKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5hbWUuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cmluZygxKTtcbiAgICAgIH0pLmpvaW4oJycpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgZXE6IGVxLFxuICAgICAgZXEyOiBlcTIsXG4gICAgICBwZXEyOiBwZXEyLFxuICAgICAgb2s6IG9rLFxuICAgICAgZmFpbDogZmFpbCxcbiAgICAgIHNlbGY6IHNlbGYsXG4gICAgICBub3Q6IG5vdCxcbiAgICAgIGFuZDogYW5kLFxuICAgICAgdW5pcXVlSWQ6IHVuaXF1ZUlkLFxuICAgICAgcmVjdDJibmQ6IHJlY3QyYm5kLFxuICAgICAgaW52ZXJ0T2JqZWN0OiBpbnZlcnRPYmplY3QsXG4gICAgICBuYW1lc3BhY2VUb0NhbWVsOiBuYW1lc3BhY2VUb0NhbWVsXG4gICAgfTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogQGNsYXNzIGNvcmUubGlzdFxuICAgKlxuICAgKiBsaXN0IHV0aWxzXG4gICAqXG4gICAqIEBzaW5nbGV0b25cbiAgICogQGFsdGVybmF0ZUNsYXNzTmFtZSBsaXN0XG4gICAqL1xuICB2YXIgbGlzdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgZmlyc3QgaXRlbSBvZiBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICovXG4gICAgdmFyIGhlYWQgPSBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgIHJldHVybiBhcnJheVswXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgbGFzdCBpdGVtIG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAgICAgKi9cbiAgICB2YXIgbGFzdCA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICovXG4gICAgdmFyIGluaXRpYWwgPSBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgIHJldHVybiBhcnJheS5zbGljZSgwLCBhcnJheS5sZW5ndGggLSAxKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB0aGUgcmVzdCBvZiB0aGUgaXRlbXMgaW4gYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICAgICAqL1xuICAgIHZhciB0YWlsID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICByZXR1cm4gYXJyYXkuc2xpY2UoMSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgaXRlbSBvZiBhcnJheVxuICAgICAqL1xuICAgIHZhciBmaW5kID0gZnVuY3Rpb24gKGFycmF5LCBwcmVkKSB7XG4gICAgICBmb3IgKHZhciBpZHggPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4ICsrKSB7XG4gICAgICAgIHZhciBpdGVtID0gYXJyYXlbaWR4XTtcbiAgICAgICAgaWYgKHByZWQoaXRlbSkpIHtcbiAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRydWUgaWYgYWxsIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIGFycmF5IHBhc3MgdGhlIHByZWRpY2F0ZSB0cnV0aCB0ZXN0LlxuICAgICAqL1xuICAgIHZhciBhbGwgPSBmdW5jdGlvbiAoYXJyYXksIHByZWQpIHtcbiAgICAgIGZvciAodmFyIGlkeCA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaWR4IDwgbGVuOyBpZHggKyspIHtcbiAgICAgICAgaWYgKCFwcmVkKGFycmF5W2lkeF0pKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBpbmRleCBvZiBpdGVtXG4gICAgICovXG4gICAgdmFyIGluZGV4T2YgPSBmdW5jdGlvbiAoYXJyYXksIGl0ZW0pIHtcbiAgICAgIHJldHVybiAkLmluQXJyYXkoaXRlbSwgYXJyYXkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIGlzIHByZXNlbnQgaW4gdGhlIGxpc3QuXG4gICAgICovXG4gICAgdmFyIGNvbnRhaW5zID0gZnVuY3Rpb24gKGFycmF5LCBpdGVtKSB7XG4gICAgICByZXR1cm4gaW5kZXhPZihhcnJheSwgaXRlbSkgIT09IC0xO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBnZXQgc3VtIGZyb20gYSBsaXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSAtIGFycmF5XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBpdGVyYXRvclxuICAgICAqL1xuICAgIHZhciBzdW0gPSBmdW5jdGlvbiAoYXJyYXksIGZuKSB7XG4gICAgICBmbiA9IGZuIHx8IGZ1bmMuc2VsZjtcbiAgICAgIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHYpIHtcbiAgICAgICAgcmV0dXJuIG1lbW8gKyBmbih2KTtcbiAgICAgIH0sIDApO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGEgY29weSBvZiB0aGUgY29sbGVjdGlvbiB3aXRoIGFycmF5IHR5cGUuXG4gICAgICogQHBhcmFtIHtDb2xsZWN0aW9ufSBjb2xsZWN0aW9uIC0gY29sbGVjdGlvbiBlZykgbm9kZS5jaGlsZE5vZGVzLCAuLi5cbiAgICAgKi9cbiAgICB2YXIgZnJvbSA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gW10sIGlkeCA9IC0xLCBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgICAgIHdoaWxlICgrK2lkeCA8IGxlbmd0aCkge1xuICAgICAgICByZXN1bHRbaWR4XSA9IGNvbGxlY3Rpb25baWR4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGNsdXN0ZXIgZWxlbWVudHMgYnkgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBhcnJheVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gcHJlZGljYXRlIGZ1bmN0aW9uIGZvciBjbHVzdGVyIHJ1bGVcbiAgICAgKiBAcGFyYW0ge0FycmF5W119XG4gICAgICovXG4gICAgdmFyIGNsdXN0ZXJCeSA9IGZ1bmN0aW9uIChhcnJheSwgZm4pIHtcbiAgICAgIGlmICghYXJyYXkubGVuZ3RoKSB7IHJldHVybiBbXTsgfVxuICAgICAgdmFyIGFUYWlsID0gdGFpbChhcnJheSk7XG4gICAgICByZXR1cm4gYVRhaWwucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCB2KSB7XG4gICAgICAgIHZhciBhTGFzdCA9IGxhc3QobWVtbyk7XG4gICAgICAgIGlmIChmbihsYXN0KGFMYXN0KSwgdikpIHtcbiAgICAgICAgICBhTGFzdFthTGFzdC5sZW5ndGhdID0gdjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZW1vW21lbW8ubGVuZ3RoXSA9IFt2XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgIH0sIFtbaGVhZChhcnJheSldXSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYSBjb3B5IG9mIHRoZSBhcnJheSB3aXRoIGFsbCBmYWxzeSB2YWx1ZXMgcmVtb3ZlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBhcnJheVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gcHJlZGljYXRlIGZ1bmN0aW9uIGZvciBjbHVzdGVyIHJ1bGVcbiAgICAgKi9cbiAgICB2YXIgY29tcGFjdCA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgdmFyIGFSZXN1bHQgPSBbXTtcbiAgICAgIGZvciAodmFyIGlkeCA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaWR4IDwgbGVuOyBpZHggKyspIHtcbiAgICAgICAgaWYgKGFycmF5W2lkeF0pIHsgYVJlc3VsdC5wdXNoKGFycmF5W2lkeF0pOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYVJlc3VsdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcHJvZHVjZXMgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheVxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAgICAgKi9cbiAgICB2YXIgdW5pcXVlID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpZHggPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4ICsrKSB7XG4gICAgICAgIGlmICghY29udGFpbnMocmVzdWx0cywgYXJyYXlbaWR4XSkpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goYXJyYXlbaWR4XSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgbmV4dCBpdGVtLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICovXG4gICAgdmFyIG5leHQgPSBmdW5jdGlvbiAoYXJyYXksIGl0ZW0pIHtcbiAgICAgIHZhciBpZHggPSBpbmRleE9mKGFycmF5LCBpdGVtKTtcbiAgICAgIGlmIChpZHggPT09IC0xKSB7IHJldHVybiBudWxsOyB9XG5cbiAgICAgIHJldHVybiBhcnJheVtpZHggKyAxXTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBwcmV2IGl0ZW0uXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAgICAgKi9cbiAgICB2YXIgcHJldiA9IGZ1bmN0aW9uIChhcnJheSwgaXRlbSkge1xuICAgICAgdmFyIGlkeCA9IGluZGV4T2YoYXJyYXksIGl0ZW0pO1xuICAgICAgaWYgKGlkeCA9PT0gLTEpIHsgcmV0dXJuIG51bGw7IH1cblxuICAgICAgcmV0dXJuIGFycmF5W2lkeCAtIDFdO1xuICAgIH07XG5cbiAgICByZXR1cm4geyBoZWFkOiBoZWFkLCBsYXN0OiBsYXN0LCBpbml0aWFsOiBpbml0aWFsLCB0YWlsOiB0YWlsLFxuICAgICAgICAgICAgIHByZXY6IHByZXYsIG5leHQ6IG5leHQsIGZpbmQ6IGZpbmQsIGNvbnRhaW5zOiBjb250YWlucyxcbiAgICAgICAgICAgICBhbGw6IGFsbCwgc3VtOiBzdW0sIGZyb206IGZyb20sXG4gICAgICAgICAgICAgY2x1c3RlckJ5OiBjbHVzdGVyQnksIGNvbXBhY3Q6IGNvbXBhY3QsIHVuaXF1ZTogdW5pcXVlIH07XG4gIH0pKCk7XG5cblxuICB2YXIgTkJTUF9DSEFSID0gU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApO1xuICB2YXIgWkVST19XSURUSF9OQlNQX0NIQVIgPSAnXFx1ZmVmZic7XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBjb3JlLmRvbVxuICAgKlxuICAgKiBEb20gZnVuY3Rpb25zXG4gICAqXG4gICAqIEBzaW5nbGV0b25cbiAgICogQGFsdGVybmF0ZUNsYXNzTmFtZSBkb21cbiAgICovXG4gIHZhciBkb20gPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgaXNFZGl0YWJsZVxuICAgICAqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIG5vZGUgaXMgYG5vdGUtZWRpdGFibGVgIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgdmFyIGlzRWRpdGFibGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUgJiYgJChub2RlKS5oYXNDbGFzcygnbm90ZS1lZGl0YWJsZScpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGlzQ29udHJvbFNpemluZ1xuICAgICAqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIG5vZGUgaXMgYG5vdGUtY29udHJvbC1zaXppbmdgIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgdmFyIGlzQ29udHJvbFNpemluZyA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZSAmJiAkKG5vZGUpLmhhc0NsYXNzKCdub3RlLWNvbnRyb2wtc2l6aW5nJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgIGJ1aWxkTGF5b3V0SW5mb1xuICAgICAqXG4gICAgICogYnVpbGQgbGF5b3V0SW5mbyBmcm9tICRlZGl0b3IoLm5vdGUtZWRpdG9yKVxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0b3JcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IHJldHVybi5lZGl0b3JcbiAgICAgKiBAcmV0dXJuIHtOb2RlfSByZXR1cm4uZHJvcHpvbmVcbiAgICAgKiBAcmV0dXJuIHtOb2RlfSByZXR1cm4udG9vbGJhclxuICAgICAqIEByZXR1cm4ge05vZGV9IHJldHVybi5lZGl0YWJsZVxuICAgICAqIEByZXR1cm4ge05vZGV9IHJldHVybi5jb2RhYmxlXG4gICAgICogQHJldHVybiB7Tm9kZX0gcmV0dXJuLnBvcG92ZXJcbiAgICAgKiBAcmV0dXJuIHtOb2RlfSByZXR1cm4uaGFuZGxlXG4gICAgICogQHJldHVybiB7Tm9kZX0gcmV0dXJuLmRpYWxvZ1xuICAgICAqL1xuICAgIHZhciBidWlsZExheW91dEluZm8gPSBmdW5jdGlvbiAoJGVkaXRvcikge1xuICAgICAgdmFyIG1ha2VGaW5kZXI7XG5cbiAgICAgIC8vIGFpciBtb2RlXG4gICAgICBpZiAoJGVkaXRvci5oYXNDbGFzcygnbm90ZS1haXItZWRpdG9yJykpIHtcbiAgICAgICAgdmFyIGlkID0gbGlzdC5sYXN0KCRlZGl0b3IuYXR0cignaWQnKS5zcGxpdCgnLScpKTtcbiAgICAgICAgbWFrZUZpbmRlciA9IGZ1bmN0aW9uIChzSWRQcmVmaXgpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gJChzSWRQcmVmaXggKyBpZCk7IH07XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlZGl0b3I6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICRlZGl0b3I7IH0sXG4gICAgICAgICAgaG9sZGVyIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gJGVkaXRvci5kYXRhKCdob2xkZXInKTsgfSxcbiAgICAgICAgICBlZGl0YWJsZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJGVkaXRvcjsgfSxcbiAgICAgICAgICBwb3BvdmVyOiBtYWtlRmluZGVyKCcjbm90ZS1wb3BvdmVyLScpLFxuICAgICAgICAgIGhhbmRsZTogbWFrZUZpbmRlcignI25vdGUtaGFuZGxlLScpLFxuICAgICAgICAgIGRpYWxvZzogbWFrZUZpbmRlcignI25vdGUtZGlhbG9nLScpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZnJhbWUgbW9kZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWFrZUZpbmRlciA9IGZ1bmN0aW9uIChjbGFzc05hbWUsICRiYXNlKSB7XG4gICAgICAgICAgJGJhc2UgPSAkYmFzZSB8fCAkZWRpdG9yO1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiAkYmFzZS5maW5kKGNsYXNzTmFtZSk7IH07XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSAkZWRpdG9yLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgICAgdmFyICRkaWFsb2dIb2xkZXIgPSAob3B0aW9ucyAmJiBvcHRpb25zLmRpYWxvZ3NJbkJvZHkpID8gJChkb2N1bWVudC5ib2R5KSA6IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlZGl0b3I6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICRlZGl0b3I7IH0sXG4gICAgICAgICAgaG9sZGVyIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gJGVkaXRvci5kYXRhKCdob2xkZXInKTsgfSxcbiAgICAgICAgICBkcm9wem9uZTogbWFrZUZpbmRlcignLm5vdGUtZHJvcHpvbmUnKSxcbiAgICAgICAgICB0b29sYmFyOiBtYWtlRmluZGVyKCcubm90ZS10b29sYmFyJyksXG4gICAgICAgICAgZWRpdGFibGU6IG1ha2VGaW5kZXIoJy5ub3RlLWVkaXRhYmxlJyksXG4gICAgICAgICAgY29kYWJsZTogbWFrZUZpbmRlcignLm5vdGUtY29kYWJsZScpLFxuICAgICAgICAgIHN0YXR1c2JhcjogbWFrZUZpbmRlcignLm5vdGUtc3RhdHVzYmFyJyksXG4gICAgICAgICAgcG9wb3ZlcjogbWFrZUZpbmRlcignLm5vdGUtcG9wb3ZlcicpLFxuICAgICAgICAgIGhhbmRsZTogbWFrZUZpbmRlcignLm5vdGUtaGFuZGxlJyksXG4gICAgICAgICAgZGlhbG9nOiBtYWtlRmluZGVyKCcubm90ZS1kaWFsb2cnLCAkZGlhbG9nSG9sZGVyKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIG1ha2VMYXlvdXRJbmZvIGZyb20gZWRpdG9yJ3MgZGVzY2VuZGFudCBub2RlLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge05vZGV9IGRlc2NlbmRhbnRcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG4gICAgdmFyIG1ha2VMYXlvdXRJbmZvID0gZnVuY3Rpb24gKGRlc2NlbmRhbnQpIHtcbiAgICAgIHZhciAkdGFyZ2V0ID0gJChkZXNjZW5kYW50KS5jbG9zZXN0KCcubm90ZS1lZGl0b3IsIC5ub3RlLWFpci1lZGl0b3IsIC5ub3RlLWFpci1sYXlvdXQnKTtcblxuICAgICAgaWYgKCEkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyICRlZGl0b3I7XG4gICAgICBpZiAoJHRhcmdldC5pcygnLm5vdGUtZWRpdG9yLCAubm90ZS1haXItZWRpdG9yJykpIHtcbiAgICAgICAgJGVkaXRvciA9ICR0YXJnZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkZWRpdG9yID0gJCgnI25vdGUtZWRpdG9yLScgKyBsaXN0Lmxhc3QoJHRhcmdldC5hdHRyKCdpZCcpLnNwbGl0KCctJykpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJ1aWxkTGF5b3V0SW5mbygkZWRpdG9yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBtYWtlUHJlZEJ5Tm9kZU5hbWVcbiAgICAgKlxuICAgICAqIHJldHVybnMgcHJlZGljYXRlIHdoaWNoIGp1ZGdlIHdoZXRoZXIgbm9kZU5hbWUgaXMgc2FtZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICovXG4gICAgdmFyIG1ha2VQcmVkQnlOb2RlTmFtZSA9IGZ1bmN0aW9uIChub2RlTmFtZSkge1xuICAgICAgbm9kZU5hbWUgPSBub2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZU5hbWUgJiYgbm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBub2RlTmFtZTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgaXNUZXh0XG4gICAgICpcbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBub2RlJ3MgdHlwZSBpcyB0ZXh0KDMpXG4gICAgICovXG4gICAgdmFyIGlzVGV4dCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBleCkgYnIsIGNvbCwgZW1iZWQsIGhyLCBpbWcsIGlucHV0LCAuLi5cbiAgICAgKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL3N5bnRheC5odG1sI3ZvaWQtZWxlbWVudHNcbiAgICAgKi9cbiAgICB2YXIgaXNWb2lkID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlICYmIC9eQlJ8XklNR3xeSFJ8XklGUkFNRXxeQlVUVE9OLy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgfTtcblxuICAgIHZhciBpc1BhcmEgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKGlzRWRpdGFibGUobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaHJvbWUodjMxLjApLCBGRih2MjUuMC4xKSB1c2UgRElWIGZvciBwYXJhZ3JhcGhcbiAgICAgIHJldHVybiBub2RlICYmIC9eRElWfF5QfF5MSXxeSFsxLTddLy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgfTtcblxuICAgIHZhciBpc0xpID0gbWFrZVByZWRCeU5vZGVOYW1lKCdMSScpO1xuXG4gICAgdmFyIGlzUHVyZVBhcmEgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgcmV0dXJuIGlzUGFyYShub2RlKSAmJiAhaXNMaShub2RlKTtcbiAgICB9O1xuXG4gICAgdmFyIGlzVGFibGUgPSBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ1RBQkxFJyk7XG5cbiAgICB2YXIgaXNJbmxpbmUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgcmV0dXJuICFpc0JvZHlDb250YWluZXIobm9kZSkgJiZcbiAgICAgICAgICAgICAhaXNMaXN0KG5vZGUpICYmXG4gICAgICAgICAgICAgIWlzSHIobm9kZSkgJiZcbiAgICAgICAgICAgICAhaXNQYXJhKG5vZGUpICYmXG4gICAgICAgICAgICAgIWlzVGFibGUobm9kZSkgJiZcbiAgICAgICAgICAgICAhaXNCbG9ja3F1b3RlKG5vZGUpO1xuICAgIH07XG5cbiAgICB2YXIgaXNMaXN0ID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlICYmIC9eVUx8Xk9MLy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgfTtcblxuICAgIHZhciBpc0hyID0gbWFrZVByZWRCeU5vZGVOYW1lKCdIUicpO1xuXG4gICAgdmFyIGlzQ2VsbCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZSAmJiAvXlREfF5USC8udGVzdChub2RlLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkpO1xuICAgIH07XG5cbiAgICB2YXIgaXNCbG9ja3F1b3RlID0gbWFrZVByZWRCeU5vZGVOYW1lKCdCTE9DS1FVT1RFJyk7XG5cbiAgICB2YXIgaXNCb2R5Q29udGFpbmVyID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHJldHVybiBpc0NlbGwobm9kZSkgfHwgaXNCbG9ja3F1b3RlKG5vZGUpIHx8IGlzRWRpdGFibGUobm9kZSk7XG4gICAgfTtcblxuICAgIHZhciBpc0FuY2hvciA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnQScpO1xuXG4gICAgdmFyIGlzUGFyYUlubGluZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gaXNJbmxpbmUobm9kZSkgJiYgISFhbmNlc3Rvcihub2RlLCBpc1BhcmEpO1xuICAgIH07XG5cbiAgICB2YXIgaXNCb2R5SW5saW5lID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHJldHVybiBpc0lubGluZShub2RlKSAmJiAhYW5jZXN0b3Iobm9kZSwgaXNQYXJhKTtcbiAgICB9O1xuXG4gICAgdmFyIGlzQm9keSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnQk9EWScpO1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIG5vZGVCIGlzIGNsb3Nlc3Qgc2libGluZyBvZiBub2RlQVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlQVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZUJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBpc0Nsb3Nlc3RTaWJsaW5nID0gZnVuY3Rpb24gKG5vZGVBLCBub2RlQikge1xuICAgICAgcmV0dXJuIG5vZGVBLm5leHRTaWJsaW5nID09PSBub2RlQiB8fFxuICAgICAgICAgICAgIG5vZGVBLnByZXZpb3VzU2libGluZyA9PT0gbm9kZUI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYXJyYXkgb2YgY2xvc2VzdCBzaWJsaW5ncyB3aXRoIG5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcmVkXSAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAqIEByZXR1cm4ge05vZGVbXX1cbiAgICAgKi9cbiAgICB2YXIgd2l0aENsb3Nlc3RTaWJsaW5ncyA9IGZ1bmN0aW9uIChub2RlLCBwcmVkKSB7XG4gICAgICBwcmVkID0gcHJlZCB8fCBmdW5jLm9rO1xuXG4gICAgICB2YXIgc2libGluZ3MgPSBbXTtcbiAgICAgIGlmIChub2RlLnByZXZpb3VzU2libGluZyAmJiBwcmVkKG5vZGUucHJldmlvdXNTaWJsaW5nKSkge1xuICAgICAgICBzaWJsaW5ncy5wdXNoKG5vZGUucHJldmlvdXNTaWJsaW5nKTtcbiAgICAgIH1cbiAgICAgIHNpYmxpbmdzLnB1c2gobm9kZSk7XG4gICAgICBpZiAobm9kZS5uZXh0U2libGluZyAmJiBwcmVkKG5vZGUubmV4dFNpYmxpbmcpKSB7XG4gICAgICAgIHNpYmxpbmdzLnB1c2gobm9kZS5uZXh0U2libGluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2libGluZ3M7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGJsYW5rIEhUTUwgZm9yIGN1cnNvciBwb3NpdGlvblxuICAgICAqIC0gW3dvcmthcm91bmRdIG9sZCBJRSBvbmx5IHdvcmtzIHdpdGggJm5ic3A7XG4gICAgICogLSBbd29ya2Fyb3VuZF0gSUUxMSBhbmQgb3RoZXIgYnJvd3NlciB3b3JrcyB3aXRoIGJvZ3VzIGJyXG4gICAgICovXG4gICAgdmFyIGJsYW5rSFRNTCA9IGFnZW50LmlzTVNJRSAmJiBhZ2VudC5icm93c2VyVmVyc2lvbiA8IDExID8gJyZuYnNwOycgOiAnPGJyPic7XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG5vZGVMZW5ndGhcbiAgICAgKlxuICAgICAqIHJldHVybnMgI3RleHQncyB0ZXh0IHNpemUgb3IgZWxlbWVudCdzIGNoaWxkTm9kZXMgc2l6ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICovXG4gICAgdmFyIG5vZGVMZW5ndGggPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKGlzVGV4dChub2RlKSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIG5vZGUgaXMgZW1wdHkgb3Igbm90LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICB2YXIgaXNFbXB0eSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICB2YXIgbGVuID0gbm9kZUxlbmd0aChub2RlKTtcblxuICAgICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzVGV4dChub2RlKSAmJiBsZW4gPT09IDEgJiYgbm9kZS5pbm5lckhUTUwgPT09IGJsYW5rSFRNTCkge1xuICAgICAgICAvLyBleCkgPHA+PGJyPjwvcD4sIDxzcGFuPjxicj48L3NwYW4+XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChsaXN0LmFsbChub2RlLmNoaWxkTm9kZXMsIGlzVGV4dCkgJiYgbm9kZS5pbm5lckhUTUwgPT09ICcnKSB7XG4gICAgICAgIC8vIGV4KSA8cD48L3A+LCA8c3Bhbj48L3NwYW4+XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHBhZGRpbmcgYmxhbmtIVE1MIGlmIG5vZGUgaXMgZW1wdHkgKGZvciBjdXJzb3IgcG9zaXRpb24pXG4gICAgICovXG4gICAgdmFyIHBhZGRpbmdCbGFua0hUTUwgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKCFpc1ZvaWQobm9kZSkgJiYgIW5vZGVMZW5ndGgobm9kZSkpIHtcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBibGFua0hUTUw7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZpbmQgbmVhcmVzdCBhbmNlc3RvciBwcmVkaWNhdGUgaGl0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgdmFyIGFuY2VzdG9yID0gZnVuY3Rpb24gKG5vZGUsIHByZWQpIHtcbiAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChwcmVkKG5vZGUpKSB7IHJldHVybiBub2RlOyB9XG4gICAgICAgIGlmIChpc0VkaXRhYmxlKG5vZGUpKSB7IGJyZWFrOyB9XG5cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBmaW5kIG5lYXJlc3QgYW5jZXN0b3Igb25seSBzaW5nbGUgY2hpbGQgYmxvb2QgbGluZSBhbmQgcHJlZGljYXRlIGhpdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAqL1xuICAgIHZhciBzaW5nbGVDaGlsZEFuY2VzdG9yID0gZnVuY3Rpb24gKG5vZGUsIHByZWQpIHtcbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cbiAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlTGVuZ3RoKG5vZGUpICE9PSAxKSB7IGJyZWFrOyB9XG4gICAgICAgIGlmIChwcmVkKG5vZGUpKSB7IHJldHVybiBub2RlOyB9XG4gICAgICAgIGlmIChpc0VkaXRhYmxlKG5vZGUpKSB7IGJyZWFrOyB9XG5cbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIG5ldyBhcnJheSBvZiBhbmNlc3RvciBub2RlcyAodW50aWwgcHJlZGljYXRlIGhpdCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9uYWxdIHByZWQgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICB2YXIgbGlzdEFuY2VzdG9yID0gZnVuY3Rpb24gKG5vZGUsIHByZWQpIHtcbiAgICAgIHByZWQgPSBwcmVkIHx8IGZ1bmMuZmFpbDtcblxuICAgICAgdmFyIGFuY2VzdG9ycyA9IFtdO1xuICAgICAgYW5jZXN0b3Iobm9kZSwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIGlmICghaXNFZGl0YWJsZShlbCkpIHtcbiAgICAgICAgICBhbmNlc3RvcnMucHVzaChlbCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJlZChlbCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhbmNlc3RvcnM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZpbmQgZmFydGhlc3QgYW5jZXN0b3IgcHJlZGljYXRlIGhpdFxuICAgICAqL1xuICAgIHZhciBsYXN0QW5jZXN0b3IgPSBmdW5jdGlvbiAobm9kZSwgcHJlZCkge1xuICAgICAgdmFyIGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihub2RlKTtcbiAgICAgIHJldHVybiBsaXN0Lmxhc3QoYW5jZXN0b3JzLmZpbHRlcihwcmVkKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgY29tbW9uIGFuY2VzdG9yIG5vZGUgYmV0d2VlbiB0d28gbm9kZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVBXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlQlxuICAgICAqL1xuICAgIHZhciBjb21tb25BbmNlc3RvciA9IGZ1bmN0aW9uIChub2RlQSwgbm9kZUIpIHtcbiAgICAgIHZhciBhbmNlc3RvcnMgPSBsaXN0QW5jZXN0b3Iobm9kZUEpO1xuICAgICAgZm9yICh2YXIgbiA9IG5vZGVCOyBuOyBuID0gbi5wYXJlbnROb2RlKSB7XG4gICAgICAgIGlmICgkLmluQXJyYXkobiwgYW5jZXN0b3JzKSA+IC0xKSB7IHJldHVybiBuOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDsgLy8gZGlmZmVyZW5jZSBkb2N1bWVudCBhcmVhXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGxpc3RpbmcgYWxsIHByZXZpb3VzIHNpYmxpbmdzICh1bnRpbCBwcmVkaWNhdGUgaGl0KS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25hbF0gcHJlZCAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAqL1xuICAgIHZhciBsaXN0UHJldiA9IGZ1bmN0aW9uIChub2RlLCBwcmVkKSB7XG4gICAgICBwcmVkID0gcHJlZCB8fCBmdW5jLmZhaWw7XG5cbiAgICAgIHZhciBub2RlcyA9IFtdO1xuICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgaWYgKHByZWQobm9kZSkpIHsgYnJlYWs7IH1cbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgICAgbm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBsaXN0aW5nIG5leHQgc2libGluZ3MgKHVudGlsIHByZWRpY2F0ZSBoaXQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRdIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICovXG4gICAgdmFyIGxpc3ROZXh0ID0gZnVuY3Rpb24gKG5vZGUsIHByZWQpIHtcbiAgICAgIHByZWQgPSBwcmVkIHx8IGZ1bmMuZmFpbDtcblxuICAgICAgdmFyIG5vZGVzID0gW107XG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAocHJlZChub2RlKSkgeyBicmVhazsgfVxuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogbGlzdGluZyBkZXNjZW5kYW50IG5vZGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZF0gLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICB2YXIgbGlzdERlc2NlbmRhbnQgPSBmdW5jdGlvbiAobm9kZSwgcHJlZCkge1xuICAgICAgdmFyIGRlc2NlbmRlbnRzID0gW107XG4gICAgICBwcmVkID0gcHJlZCB8fCBmdW5jLm9rO1xuXG4gICAgICAvLyBzdGFydCBERlMoZGVwdGggZmlyc3Qgc2VhcmNoKSB3aXRoIG5vZGVcbiAgICAgIChmdW5jdGlvbiBmbldhbGsoY3VycmVudCkge1xuICAgICAgICBpZiAobm9kZSAhPT0gY3VycmVudCAmJiBwcmVkKGN1cnJlbnQpKSB7XG4gICAgICAgICAgZGVzY2VuZGVudHMucHVzaChjdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpZHggPSAwLCBsZW4gPSBjdXJyZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpZHggPCBsZW47IGlkeCsrKSB7XG4gICAgICAgICAgZm5XYWxrKGN1cnJlbnQuY2hpbGROb2Rlc1tpZHhdKTtcbiAgICAgICAgfVxuICAgICAgfSkobm9kZSk7XG5cbiAgICAgIHJldHVybiBkZXNjZW5kZW50cztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogd3JhcCBub2RlIHdpdGggbmV3IHRhZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFnTmFtZSBvZiB3cmFwcGVyXG4gICAgICogQHJldHVybiB7Tm9kZX0gLSB3cmFwcGVyXG4gICAgICovXG4gICAgdmFyIHdyYXAgPSBmdW5jdGlvbiAobm9kZSwgd3JhcHBlck5hbWUpIHtcbiAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICB2YXIgd3JhcHBlciA9ICQoJzwnICsgd3JhcHBlck5hbWUgKyAnPicpWzBdO1xuXG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIG5vZGUpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBub2RlIGFmdGVyIHByZWNlZGluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICogQHBhcmFtIHtOb2RlfSBwcmVjZWRpbmcgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKi9cbiAgICB2YXIgaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbiAobm9kZSwgcHJlY2VkaW5nKSB7XG4gICAgICB2YXIgbmV4dCA9IHByZWNlZGluZy5uZXh0U2libGluZywgcGFyZW50ID0gcHJlY2VkaW5nLnBhcmVudE5vZGU7XG4gICAgICBpZiAobmV4dCkge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGFwcGVuZCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7Q29sbGVjdGlvbn0gYUNoaWxkXG4gICAgICovXG4gICAgdmFyIGFwcGVuZENoaWxkTm9kZXMgPSBmdW5jdGlvbiAobm9kZSwgYUNoaWxkKSB7XG4gICAgICAkLmVhY2goYUNoaWxkLCBmdW5jdGlvbiAoaWR4LCBjaGlsZCkge1xuICAgICAgICBub2RlLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgd2hldGhlciBib3VuZGFyeVBvaW50IGlzIGxlZnQgZWRnZSBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICB2YXIgaXNMZWZ0RWRnZVBvaW50ID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICByZXR1cm4gcG9pbnQub2Zmc2V0ID09PSAwO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHdoZXRoZXIgYm91bmRhcnlQb2ludCBpcyByaWdodCBlZGdlIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBpc1JpZ2h0RWRnZVBvaW50ID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICByZXR1cm4gcG9pbnQub2Zmc2V0ID09PSBub2RlTGVuZ3RoKHBvaW50Lm5vZGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHdoZXRoZXIgYm91bmRhcnlQb2ludCBpcyBlZGdlIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBpc0VkZ2VQb2ludCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgcmV0dXJuIGlzTGVmdEVkZ2VQb2ludChwb2ludCkgfHwgaXNSaWdodEVkZ2VQb2ludChwb2ludCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgd2hldGVyIG5vZGUgaXMgbGVmdCBlZGdlIG9mIGFuY2VzdG9yIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gYW5jZXN0b3JcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBpc0xlZnRFZGdlT2YgPSBmdW5jdGlvbiAobm9kZSwgYW5jZXN0b3IpIHtcbiAgICAgIHdoaWxlIChub2RlICYmIG5vZGUgIT09IGFuY2VzdG9yKSB7XG4gICAgICAgIGlmIChwb3NpdGlvbihub2RlKSAhPT0gMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIG5vZGUgaXMgcmlnaHQgZWRnZSBvZiBhbmNlc3RvciBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICB2YXIgaXNSaWdodEVkZ2VPZiA9IGZ1bmN0aW9uIChub2RlLCBhbmNlc3Rvcikge1xuICAgICAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPT0gYW5jZXN0b3IpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uKG5vZGUpICE9PSBub2RlTGVuZ3RoKG5vZGUucGFyZW50Tm9kZSkgLSAxKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHdoZXRoZXIgcG9pbnQgaXMgbGVmdCBlZGdlIG9mIGFuY2VzdG9yIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gICAgICogQHBhcmFtIHtOb2RlfSBhbmNlc3RvclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgdmFyIGlzTGVmdEVkZ2VQb2ludE9mID0gZnVuY3Rpb24gKHBvaW50LCBhbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIGlzTGVmdEVkZ2VQb2ludChwb2ludCkgJiYgaXNMZWZ0RWRnZU9mKHBvaW50Lm5vZGUsIGFuY2VzdG9yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIHBvaW50IGlzIHJpZ2h0IGVkZ2Ugb2YgYW5jZXN0b3Igb3Igbm90LlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICB2YXIgaXNSaWdodEVkZ2VQb2ludE9mID0gZnVuY3Rpb24gKHBvaW50LCBhbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIGlzUmlnaHRFZGdlUG9pbnQocG9pbnQpICYmIGlzUmlnaHRFZGdlT2YocG9pbnQubm9kZSwgYW5jZXN0b3IpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIG9mZnNldCBmcm9tIHBhcmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqL1xuICAgIHZhciBwb3NpdGlvbiA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgIHdoaWxlICgobm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nKSkge1xuICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfTtcblxuICAgIHZhciBoYXNDaGlsZHJlbiA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gISEobm9kZSAmJiBub2RlLmNoaWxkTm9kZXMgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgcHJldmlvdXMgYm91bmRhcnlQb2ludFxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNTa2lwSW5uZXJPZmZzZXRcbiAgICAgKiBAcmV0dXJuIHtCb3VuZGFyeVBvaW50fVxuICAgICAqL1xuICAgIHZhciBwcmV2UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIGlzU2tpcElubmVyT2Zmc2V0KSB7XG4gICAgICB2YXIgbm9kZSwgb2Zmc2V0O1xuXG4gICAgICBpZiAocG9pbnQub2Zmc2V0ID09PSAwKSB7XG4gICAgICAgIGlmIChpc0VkaXRhYmxlKHBvaW50Lm5vZGUpKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBub2RlID0gcG9pbnQubm9kZS5wYXJlbnROb2RlO1xuICAgICAgICBvZmZzZXQgPSBwb3NpdGlvbihwb2ludC5ub2RlKTtcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2hpbGRyZW4ocG9pbnQubm9kZSkpIHtcbiAgICAgICAgbm9kZSA9IHBvaW50Lm5vZGUuY2hpbGROb2Rlc1twb2ludC5vZmZzZXQgLSAxXTtcbiAgICAgICAgb2Zmc2V0ID0gbm9kZUxlbmd0aChub2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUgPSBwb2ludC5ub2RlO1xuICAgICAgICBvZmZzZXQgPSBpc1NraXBJbm5lck9mZnNldCA/IDAgOiBwb2ludC5vZmZzZXQgLSAxO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICBvZmZzZXQ6IG9mZnNldFxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBuZXh0IGJvdW5kYXJ5UG9pbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzU2tpcElubmVyT2Zmc2V0XG4gICAgICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAgICAgKi9cbiAgICB2YXIgbmV4dFBvaW50ID0gZnVuY3Rpb24gKHBvaW50LCBpc1NraXBJbm5lck9mZnNldCkge1xuICAgICAgdmFyIG5vZGUsIG9mZnNldDtcblxuICAgICAgaWYgKG5vZGVMZW5ndGgocG9pbnQubm9kZSkgPT09IHBvaW50Lm9mZnNldCkge1xuICAgICAgICBpZiAoaXNFZGl0YWJsZShwb2ludC5ub2RlKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZSA9IHBvaW50Lm5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgb2Zmc2V0ID0gcG9zaXRpb24ocG9pbnQubm9kZSkgKyAxO1xuICAgICAgfSBlbHNlIGlmIChoYXNDaGlsZHJlbihwb2ludC5ub2RlKSkge1xuICAgICAgICBub2RlID0gcG9pbnQubm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldF07XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlID0gcG9pbnQubm9kZTtcbiAgICAgICAgb2Zmc2V0ID0gaXNTa2lwSW5uZXJPZmZzZXQgPyBub2RlTGVuZ3RoKHBvaW50Lm5vZGUpIDogcG9pbnQub2Zmc2V0ICsgMTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgb2Zmc2V0OiBvZmZzZXRcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgd2hldGhlciBwb2ludEEgYW5kIHBvaW50QiBpcyBzYW1lIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRBXG4gICAgICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludEJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBpc1NhbWVQb2ludCA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50Qikge1xuICAgICAgcmV0dXJuIHBvaW50QS5ub2RlID09PSBwb2ludEIubm9kZSAmJiBwb2ludEEub2Zmc2V0ID09PSBwb2ludEIub2Zmc2V0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHdoZXRoZXIgcG9pbnQgaXMgdmlzaWJsZSAoY2FuIHNldCBjdXJzb3IpIG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBpc1Zpc2libGVQb2ludCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgaWYgKGlzVGV4dChwb2ludC5ub2RlKSB8fCAhaGFzQ2hpbGRyZW4ocG9pbnQubm9kZSkgfHwgaXNFbXB0eShwb2ludC5ub2RlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxlZnROb2RlID0gcG9pbnQubm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldCAtIDFdO1xuICAgICAgdmFyIHJpZ2h0Tm9kZSA9IHBvaW50Lm5vZGUuY2hpbGROb2Rlc1twb2ludC5vZmZzZXRdO1xuICAgICAgaWYgKCghbGVmdE5vZGUgfHwgaXNWb2lkKGxlZnROb2RlKSkgJiYgKCFyaWdodE5vZGUgfHwgaXNWb2lkKHJpZ2h0Tm9kZSkpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcHJldlBvaW50VXRpbFxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcmV0dXJuIHtCb3VuZGFyeVBvaW50fVxuICAgICAqL1xuICAgIHZhciBwcmV2UG9pbnRVbnRpbCA9IGZ1bmN0aW9uIChwb2ludCwgcHJlZCkge1xuICAgICAgd2hpbGUgKHBvaW50KSB7XG4gICAgICAgIGlmIChwcmVkKHBvaW50KSkge1xuICAgICAgICAgIHJldHVybiBwb2ludDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBvaW50ID0gcHJldlBvaW50KHBvaW50KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgbmV4dFBvaW50VW50aWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkXG4gICAgICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAgICAgKi9cbiAgICB2YXIgbmV4dFBvaW50VW50aWwgPSBmdW5jdGlvbiAocG9pbnQsIHByZWQpIHtcbiAgICAgIHdoaWxlIChwb2ludCkge1xuICAgICAgICBpZiAocHJlZChwb2ludCkpIHtcbiAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBwb2ludCA9IG5leHRQb2ludChwb2ludCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIHdoZXRoZXIgcG9pbnQgaGFzIGNoYXJhY3RlciBvciBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb2ludFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICovXG4gICAgdmFyIGlzQ2hhclBvaW50ID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICBpZiAoIWlzVGV4dChwb2ludC5ub2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaCA9IHBvaW50Lm5vZGUubm9kZVZhbHVlLmNoYXJBdChwb2ludC5vZmZzZXQgLSAxKTtcbiAgICAgIHJldHVybiBjaCAmJiAoY2ggIT09ICcgJyAmJiBjaCAhPT0gTkJTUF9DSEFSKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB3YWxrUG9pbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gc3RhcnRQb2ludFxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gZW5kUG9pbnRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc1NraXBJbm5lck9mZnNldFxuICAgICAqL1xuICAgIHZhciB3YWxrUG9pbnQgPSBmdW5jdGlvbiAoc3RhcnRQb2ludCwgZW5kUG9pbnQsIGhhbmRsZXIsIGlzU2tpcElubmVyT2Zmc2V0KSB7XG4gICAgICB2YXIgcG9pbnQgPSBzdGFydFBvaW50O1xuXG4gICAgICB3aGlsZSAocG9pbnQpIHtcbiAgICAgICAgaGFuZGxlcihwb2ludCk7XG5cbiAgICAgICAgaWYgKGlzU2FtZVBvaW50KHBvaW50LCBlbmRQb2ludCkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc1NraXBPZmZzZXQgPSBpc1NraXBJbm5lck9mZnNldCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRQb2ludC5ub2RlICE9PSBwb2ludC5ub2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludC5ub2RlICE9PSBwb2ludC5ub2RlO1xuICAgICAgICBwb2ludCA9IG5leHRQb2ludChwb2ludCwgaXNTa2lwT2Zmc2V0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBtYWtlT2Zmc2V0UGF0aFxuICAgICAqXG4gICAgICogcmV0dXJuIG9mZnNldFBhdGgoYXJyYXkgb2Ygb2Zmc2V0KSBmcm9tIGFuY2VzdG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yIC0gYW5jZXN0b3Igbm9kZVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqL1xuICAgIHZhciBtYWtlT2Zmc2V0UGF0aCA9IGZ1bmN0aW9uIChhbmNlc3Rvciwgbm9kZSkge1xuICAgICAgdmFyIGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihub2RlLCBmdW5jLmVxKGFuY2VzdG9yKSk7XG4gICAgICByZXR1cm4gYW5jZXN0b3JzLm1hcChwb3NpdGlvbikucmV2ZXJzZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGZyb21PZmZzZXRQYXRoXG4gICAgICpcbiAgICAgKiByZXR1cm4gZWxlbWVudCBmcm9tIG9mZnNldFBhdGgoYXJyYXkgb2Ygb2Zmc2V0KVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBhbmNlc3RvciAtIGFuY2VzdG9yIG5vZGVcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBvZmZzZXRzIC0gb2Zmc2V0UGF0aFxuICAgICAqL1xuICAgIHZhciBmcm9tT2Zmc2V0UGF0aCA9IGZ1bmN0aW9uIChhbmNlc3Rvciwgb2Zmc2V0cykge1xuICAgICAgdmFyIGN1cnJlbnQgPSBhbmNlc3RvcjtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBvZmZzZXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjdXJyZW50LmNoaWxkTm9kZXMubGVuZ3RoIDw9IG9mZnNldHNbaV0pIHtcbiAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGlsZE5vZGVzW2N1cnJlbnQuY2hpbGROb2Rlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGlsZE5vZGVzW29mZnNldHNbaV1dO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBzcGxpdE5vZGVcbiAgICAgKlxuICAgICAqIHNwbGl0IGVsZW1lbnQgb3IgI3RleHRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pc1NraXBQYWRkaW5nQmxhbmtIVE1MXSAtIGRlZmF1bHQ6IGZhbHNlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pc05vdFNwbGl0RWRnZVBvaW50XSAtIGRlZmF1bHQ6IGZhbHNlXG4gICAgICogQHJldHVybiB7Tm9kZX0gcmlnaHQgbm9kZSBvZiBib3VuZGFyeVBvaW50XG4gICAgICovXG4gICAgdmFyIHNwbGl0Tm9kZSA9IGZ1bmN0aW9uIChwb2ludCwgb3B0aW9ucykge1xuICAgICAgdmFyIGlzU2tpcFBhZGRpbmdCbGFua0hUTUwgPSBvcHRpb25zICYmIG9wdGlvbnMuaXNTa2lwUGFkZGluZ0JsYW5rSFRNTDtcbiAgICAgIHZhciBpc05vdFNwbGl0RWRnZVBvaW50ID0gb3B0aW9ucyAmJiBvcHRpb25zLmlzTm90U3BsaXRFZGdlUG9pbnQ7XG5cbiAgICAgIC8vIGVkZ2UgY2FzZVxuICAgICAgaWYgKGlzRWRnZVBvaW50KHBvaW50KSAmJiAoaXNUZXh0KHBvaW50Lm5vZGUpIHx8IGlzTm90U3BsaXRFZGdlUG9pbnQpKSB7XG4gICAgICAgIGlmIChpc0xlZnRFZGdlUG9pbnQocG9pbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIHBvaW50Lm5vZGU7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNSaWdodEVkZ2VQb2ludChwb2ludCkpIHtcbiAgICAgICAgICByZXR1cm4gcG9pbnQubm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBzcGxpdCAjdGV4dFxuICAgICAgaWYgKGlzVGV4dChwb2ludC5ub2RlKSkge1xuICAgICAgICByZXR1cm4gcG9pbnQubm9kZS5zcGxpdFRleHQocG9pbnQub2Zmc2V0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGlsZE5vZGUgPSBwb2ludC5ub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0XTtcbiAgICAgICAgdmFyIGNsb25lID0gaW5zZXJ0QWZ0ZXIocG9pbnQubm9kZS5jbG9uZU5vZGUoZmFsc2UpLCBwb2ludC5ub2RlKTtcbiAgICAgICAgYXBwZW5kQ2hpbGROb2RlcyhjbG9uZSwgbGlzdE5leHQoY2hpbGROb2RlKSk7XG5cbiAgICAgICAgaWYgKCFpc1NraXBQYWRkaW5nQmxhbmtIVE1MKSB7XG4gICAgICAgICAgcGFkZGluZ0JsYW5rSFRNTChwb2ludC5ub2RlKTtcbiAgICAgICAgICBwYWRkaW5nQmxhbmtIVE1MKGNsb25lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBzcGxpdFRyZWVcbiAgICAgKlxuICAgICAqIHNwbGl0IHRyZWUgYnkgcG9pbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gcm9vdCAtIHNwbGl0IHJvb3RcbiAgICAgKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNTa2lwUGFkZGluZ0JsYW5rSFRNTF0gLSBkZWZhdWx0OiBmYWxzZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNOb3RTcGxpdEVkZ2VQb2ludF0gLSBkZWZhdWx0OiBmYWxzZVxuICAgICAqIEByZXR1cm4ge05vZGV9IHJpZ2h0IG5vZGUgb2YgYm91bmRhcnlQb2ludFxuICAgICAqL1xuICAgIHZhciBzcGxpdFRyZWUgPSBmdW5jdGlvbiAocm9vdCwgcG9pbnQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIGV4KSBbI3RleHQsIDxzcGFuPiwgPHA+XVxuICAgICAgdmFyIGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihwb2ludC5ub2RlLCBmdW5jLmVxKHJvb3QpKTtcblxuICAgICAgaWYgKCFhbmNlc3RvcnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmIChhbmNlc3RvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBzcGxpdE5vZGUocG9pbnQsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYW5jZXN0b3JzLnJlZHVjZShmdW5jdGlvbiAobm9kZSwgcGFyZW50KSB7XG4gICAgICAgIGlmIChub2RlID09PSBwb2ludC5ub2RlKSB7XG4gICAgICAgICAgbm9kZSA9IHNwbGl0Tm9kZShwb2ludCwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3BsaXROb2RlKHtcbiAgICAgICAgICBub2RlOiBwYXJlbnQsXG4gICAgICAgICAgb2Zmc2V0OiBub2RlID8gZG9tLnBvc2l0aW9uKG5vZGUpIDogbm9kZUxlbmd0aChwYXJlbnQpXG4gICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHNwbGl0IHBvaW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwb2ludFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNJbmxpbmVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG4gICAgdmFyIHNwbGl0UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIGlzSW5saW5lKSB7XG4gICAgICAvLyBmaW5kIHNwbGl0Um9vdCwgY29udGFpbmVyXG4gICAgICAvLyAgLSBpbmxpbmU6IHNwbGl0Um9vdCBpcyBhIGNoaWxkIG9mIHBhcmFncmFwaFxuICAgICAgLy8gIC0gYmxvY2s6IHNwbGl0Um9vdCBpcyBhIGNoaWxkIG9mIGJvZHlDb250YWluZXJcbiAgICAgIHZhciBwcmVkID0gaXNJbmxpbmUgPyBpc1BhcmEgOiBpc0JvZHlDb250YWluZXI7XG4gICAgICB2YXIgYW5jZXN0b3JzID0gbGlzdEFuY2VzdG9yKHBvaW50Lm5vZGUsIHByZWQpO1xuICAgICAgdmFyIHRvcEFuY2VzdG9yID0gbGlzdC5sYXN0KGFuY2VzdG9ycykgfHwgcG9pbnQubm9kZTtcblxuICAgICAgdmFyIHNwbGl0Um9vdCwgY29udGFpbmVyO1xuICAgICAgaWYgKHByZWQodG9wQW5jZXN0b3IpKSB7XG4gICAgICAgIHNwbGl0Um9vdCA9IGFuY2VzdG9yc1thbmNlc3RvcnMubGVuZ3RoIC0gMl07XG4gICAgICAgIGNvbnRhaW5lciA9IHRvcEFuY2VzdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BsaXRSb290ID0gdG9wQW5jZXN0b3I7XG4gICAgICAgIGNvbnRhaW5lciA9IHNwbGl0Um9vdC5wYXJlbnROb2RlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiBzcGxpdFJvb3QgaXMgZXhpc3RzLCBzcGxpdCB3aXRoIHNwbGl0VHJlZVxuICAgICAgdmFyIHBpdm90ID0gc3BsaXRSb290ICYmIHNwbGl0VHJlZShzcGxpdFJvb3QsIHBvaW50LCB7XG4gICAgICAgIGlzU2tpcFBhZGRpbmdCbGFua0hUTUw6IGlzSW5saW5lLFxuICAgICAgICBpc05vdFNwbGl0RWRnZVBvaW50OiBpc0lubGluZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGlmIGNvbnRhaW5lciBpcyBwb2ludC5ub2RlLCBmaW5kIHBpdm90IHdpdGggcG9pbnQub2Zmc2V0XG4gICAgICBpZiAoIXBpdm90ICYmIGNvbnRhaW5lciA9PT0gcG9pbnQubm9kZSkge1xuICAgICAgICBwaXZvdCA9IHBvaW50Lm5vZGUuY2hpbGROb2Rlc1twb2ludC5vZmZzZXRdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICByaWdodE5vZGU6IHBpdm90LFxuICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lclxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZSA9IGZ1bmN0aW9uIChub2RlTmFtZSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlVGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcmVtb3ZlXG4gICAgICpcbiAgICAgKiByZW1vdmUgbm9kZSwgKGlzUmVtb3ZlQ2hpbGQ6IHJlbW92ZSBjaGlsZCBvciBub3QpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzUmVtb3ZlQ2hpbGRcbiAgICAgKi9cbiAgICB2YXIgcmVtb3ZlID0gZnVuY3Rpb24gKG5vZGUsIGlzUmVtb3ZlQ2hpbGQpIHtcbiAgICAgIGlmICghbm9kZSB8fCAhbm9kZS5wYXJlbnROb2RlKSB7IHJldHVybjsgfVxuICAgICAgaWYgKG5vZGUucmVtb3ZlTm9kZSkgeyByZXR1cm4gbm9kZS5yZW1vdmVOb2RlKGlzUmVtb3ZlQ2hpbGQpOyB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICBpZiAoIWlzUmVtb3ZlQ2hpbGQpIHtcbiAgICAgICAgdmFyIG5vZGVzID0gW107XG4gICAgICAgIHZhciBpLCBsZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZS5jaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2Rlc1tpXSwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHJlbW92ZVdoaWxlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkXG4gICAgICovXG4gICAgdmFyIHJlbW92ZVdoaWxlID0gZnVuY3Rpb24gKG5vZGUsIHByZWQpIHtcbiAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChpc0VkaXRhYmxlKG5vZGUpIHx8ICFwcmVkKG5vZGUpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICByZW1vdmUobm9kZSk7XG4gICAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcmVwbGFjZVxuICAgICAqXG4gICAgICogcmVwbGFjZSBub2RlIHdpdGggcHJvdmlkZWQgbm9kZU5hbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICAgICAqIEByZXR1cm4ge05vZGV9IC0gbmV3IG5vZGVcbiAgICAgKi9cbiAgICB2YXIgcmVwbGFjZSA9IGZ1bmN0aW9uIChub2RlLCBub2RlTmFtZSkge1xuICAgICAgaWYgKG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9kZU5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH1cblxuICAgICAgdmFyIG5ld05vZGUgPSBjcmVhdGUobm9kZU5hbWUpO1xuXG4gICAgICBpZiAobm9kZS5zdHlsZS5jc3NUZXh0KSB7XG4gICAgICAgIG5ld05vZGUuc3R5bGUuY3NzVGV4dCA9IG5vZGUuc3R5bGUuY3NzVGV4dDtcbiAgICAgIH1cblxuICAgICAgYXBwZW5kQ2hpbGROb2RlcyhuZXdOb2RlLCBsaXN0LmZyb20obm9kZS5jaGlsZE5vZGVzKSk7XG4gICAgICBpbnNlcnRBZnRlcihuZXdOb2RlLCBub2RlKTtcbiAgICAgIHJlbW92ZShub2RlKTtcblxuICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfTtcblxuICAgIHZhciBpc1RleHRhcmVhID0gbWFrZVByZWRCeU5vZGVOYW1lKCdURVhUQVJFQScpO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRub2RlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbc3RyaXBMaW5lYnJlYWtzXSAtIGRlZmF1bHQ6IGZhbHNlXG4gICAgICovXG4gICAgdmFyIHZhbHVlID0gZnVuY3Rpb24gKCRub2RlLCBzdHJpcExpbmVicmVha3MpIHtcbiAgICAgIHZhciB2YWwgPSBpc1RleHRhcmVhKCRub2RlWzBdKSA/ICRub2RlLnZhbCgpIDogJG5vZGUuaHRtbCgpO1xuICAgICAgaWYgKHN0cmlwTGluZWJyZWFrcykge1xuICAgICAgICByZXR1cm4gdmFsLnJlcGxhY2UoL1tcXG5cXHJdL2csICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgaHRtbFxuICAgICAqXG4gICAgICogZ2V0IHRoZSBIVE1MIGNvbnRlbnRzIG9mIG5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkbm9kZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2lzTmV3bGluZU9uQmxvY2tdXG4gICAgICovXG4gICAgdmFyIGh0bWwgPSBmdW5jdGlvbiAoJG5vZGUsIGlzTmV3bGluZU9uQmxvY2spIHtcbiAgICAgIHZhciBtYXJrdXAgPSB2YWx1ZSgkbm9kZSk7XG5cbiAgICAgIGlmIChpc05ld2xpbmVPbkJsb2NrKSB7XG4gICAgICAgIHZhciByZWdleFRhZyA9IC88KFxcLz8pKFxcYig/ISEpW14+XFxzXSopKC4qPykoXFxzKlxcLz8+KS9nO1xuICAgICAgICBtYXJrdXAgPSBtYXJrdXAucmVwbGFjZShyZWdleFRhZywgZnVuY3Rpb24gKG1hdGNoLCBlbmRTbGFzaCwgbmFtZSkge1xuICAgICAgICAgIG5hbWUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgdmFyIGlzRW5kT2ZJbmxpbmVDb250YWluZXIgPSAvXkRJVnxeVER8XlRIfF5QfF5MSXxeSFsxLTddLy50ZXN0KG5hbWUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIWVuZFNsYXNoO1xuICAgICAgICAgIHZhciBpc0Jsb2NrTm9kZSA9IC9eQkxPQ0tRVU9URXxeVEFCTEV8XlRCT0RZfF5UUnxeSFJ8XlVMfF5PTC8udGVzdChuYW1lKTtcblxuICAgICAgICAgIHJldHVybiBtYXRjaCArICgoaXNFbmRPZklubGluZUNvbnRhaW5lciB8fCBpc0Jsb2NrTm9kZSkgPyAnXFxuJyA6ICcnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1hcmt1cCA9ICQudHJpbShtYXJrdXApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWFya3VwO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBOQlNQX0NIQVIgKi9cbiAgICAgIE5CU1BfQ0hBUjogTkJTUF9DSEFSLFxuICAgICAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBaRVJPX1dJRFRIX05CU1BfQ0hBUiAqL1xuICAgICAgWkVST19XSURUSF9OQlNQX0NIQVI6IFpFUk9fV0lEVEhfTkJTUF9DSEFSLFxuICAgICAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBibGFuayAqL1xuICAgICAgYmxhbms6IGJsYW5rSFRNTCxcbiAgICAgIC8qKiBAcHJvcGVydHkge1N0cmluZ30gZW1wdHlQYXJhICovXG4gICAgICBlbXB0eVBhcmE6ICc8cD4nICsgYmxhbmtIVE1MICsgJzwvcD4nLFxuICAgICAgbWFrZVByZWRCeU5vZGVOYW1lOiBtYWtlUHJlZEJ5Tm9kZU5hbWUsXG4gICAgICBpc0VkaXRhYmxlOiBpc0VkaXRhYmxlLFxuICAgICAgaXNDb250cm9sU2l6aW5nOiBpc0NvbnRyb2xTaXppbmcsXG4gICAgICBidWlsZExheW91dEluZm86IGJ1aWxkTGF5b3V0SW5mbyxcbiAgICAgIG1ha2VMYXlvdXRJbmZvOiBtYWtlTGF5b3V0SW5mbyxcbiAgICAgIGlzVGV4dDogaXNUZXh0LFxuICAgICAgaXNWb2lkOiBpc1ZvaWQsXG4gICAgICBpc1BhcmE6IGlzUGFyYSxcbiAgICAgIGlzUHVyZVBhcmE6IGlzUHVyZVBhcmEsXG4gICAgICBpc0lubGluZTogaXNJbmxpbmUsXG4gICAgICBpc0Jsb2NrOiBmdW5jLm5vdChpc0lubGluZSksXG4gICAgICBpc0JvZHlJbmxpbmU6IGlzQm9keUlubGluZSxcbiAgICAgIGlzQm9keTogaXNCb2R5LFxuICAgICAgaXNQYXJhSW5saW5lOiBpc1BhcmFJbmxpbmUsXG4gICAgICBpc0xpc3Q6IGlzTGlzdCxcbiAgICAgIGlzVGFibGU6IGlzVGFibGUsXG4gICAgICBpc0NlbGw6IGlzQ2VsbCxcbiAgICAgIGlzQmxvY2txdW90ZTogaXNCbG9ja3F1b3RlLFxuICAgICAgaXNCb2R5Q29udGFpbmVyOiBpc0JvZHlDb250YWluZXIsXG4gICAgICBpc0FuY2hvcjogaXNBbmNob3IsXG4gICAgICBpc0RpdjogbWFrZVByZWRCeU5vZGVOYW1lKCdESVYnKSxcbiAgICAgIGlzTGk6IGlzTGksXG4gICAgICBpc0JSOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0JSJyksXG4gICAgICBpc1NwYW46IG1ha2VQcmVkQnlOb2RlTmFtZSgnU1BBTicpLFxuICAgICAgaXNCOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0InKSxcbiAgICAgIGlzVTogbWFrZVByZWRCeU5vZGVOYW1lKCdVJyksXG4gICAgICBpc1M6IG1ha2VQcmVkQnlOb2RlTmFtZSgnUycpLFxuICAgICAgaXNJOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0knKSxcbiAgICAgIGlzSW1nOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0lNRycpLFxuICAgICAgaXNUZXh0YXJlYTogaXNUZXh0YXJlYSxcbiAgICAgIGlzRW1wdHk6IGlzRW1wdHksXG4gICAgICBpc0VtcHR5QW5jaG9yOiBmdW5jLmFuZChpc0FuY2hvciwgaXNFbXB0eSksXG4gICAgICBpc0Nsb3Nlc3RTaWJsaW5nOiBpc0Nsb3Nlc3RTaWJsaW5nLFxuICAgICAgd2l0aENsb3Nlc3RTaWJsaW5nczogd2l0aENsb3Nlc3RTaWJsaW5ncyxcbiAgICAgIG5vZGVMZW5ndGg6IG5vZGVMZW5ndGgsXG4gICAgICBpc0xlZnRFZGdlUG9pbnQ6IGlzTGVmdEVkZ2VQb2ludCxcbiAgICAgIGlzUmlnaHRFZGdlUG9pbnQ6IGlzUmlnaHRFZGdlUG9pbnQsXG4gICAgICBpc0VkZ2VQb2ludDogaXNFZGdlUG9pbnQsXG4gICAgICBpc0xlZnRFZGdlT2Y6IGlzTGVmdEVkZ2VPZixcbiAgICAgIGlzUmlnaHRFZGdlT2Y6IGlzUmlnaHRFZGdlT2YsXG4gICAgICBpc0xlZnRFZGdlUG9pbnRPZjogaXNMZWZ0RWRnZVBvaW50T2YsXG4gICAgICBpc1JpZ2h0RWRnZVBvaW50T2Y6IGlzUmlnaHRFZGdlUG9pbnRPZixcbiAgICAgIHByZXZQb2ludDogcHJldlBvaW50LFxuICAgICAgbmV4dFBvaW50OiBuZXh0UG9pbnQsXG4gICAgICBpc1NhbWVQb2ludDogaXNTYW1lUG9pbnQsXG4gICAgICBpc1Zpc2libGVQb2ludDogaXNWaXNpYmxlUG9pbnQsXG4gICAgICBwcmV2UG9pbnRVbnRpbDogcHJldlBvaW50VW50aWwsXG4gICAgICBuZXh0UG9pbnRVbnRpbDogbmV4dFBvaW50VW50aWwsXG4gICAgICBpc0NoYXJQb2ludDogaXNDaGFyUG9pbnQsXG4gICAgICB3YWxrUG9pbnQ6IHdhbGtQb2ludCxcbiAgICAgIGFuY2VzdG9yOiBhbmNlc3RvcixcbiAgICAgIHNpbmdsZUNoaWxkQW5jZXN0b3I6IHNpbmdsZUNoaWxkQW5jZXN0b3IsXG4gICAgICBsaXN0QW5jZXN0b3I6IGxpc3RBbmNlc3RvcixcbiAgICAgIGxhc3RBbmNlc3RvcjogbGFzdEFuY2VzdG9yLFxuICAgICAgbGlzdE5leHQ6IGxpc3ROZXh0LFxuICAgICAgbGlzdFByZXY6IGxpc3RQcmV2LFxuICAgICAgbGlzdERlc2NlbmRhbnQ6IGxpc3REZXNjZW5kYW50LFxuICAgICAgY29tbW9uQW5jZXN0b3I6IGNvbW1vbkFuY2VzdG9yLFxuICAgICAgd3JhcDogd3JhcCxcbiAgICAgIGluc2VydEFmdGVyOiBpbnNlcnRBZnRlcixcbiAgICAgIGFwcGVuZENoaWxkTm9kZXM6IGFwcGVuZENoaWxkTm9kZXMsXG4gICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICBoYXNDaGlsZHJlbjogaGFzQ2hpbGRyZW4sXG4gICAgICBtYWtlT2Zmc2V0UGF0aDogbWFrZU9mZnNldFBhdGgsXG4gICAgICBmcm9tT2Zmc2V0UGF0aDogZnJvbU9mZnNldFBhdGgsXG4gICAgICBzcGxpdFRyZWU6IHNwbGl0VHJlZSxcbiAgICAgIHNwbGl0UG9pbnQ6IHNwbGl0UG9pbnQsXG4gICAgICBjcmVhdGU6IGNyZWF0ZSxcbiAgICAgIGNyZWF0ZVRleHQ6IGNyZWF0ZVRleHQsXG4gICAgICByZW1vdmU6IHJlbW92ZSxcbiAgICAgIHJlbW92ZVdoaWxlOiByZW1vdmVXaGlsZSxcbiAgICAgIHJlcGxhY2U6IHJlcGxhY2UsXG4gICAgICBodG1sOiBodG1sLFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfTtcbiAgfSkoKTtcblxuXG4gIHZhciByYW5nZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gYm91bmRhcnlQb2ludCBmcm9tIFRleHRSYW5nZSwgaW5zcGlyZWQgYnkgQW5keSBOYSdzIEh1c2t5UmFuZ2UuanNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGV4dFJhbmdlfSB0ZXh0UmFuZ2VcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzU3RhcnRcbiAgICAgKiBAcmV0dXJuIHtCb3VuZGFyeVBvaW50fVxuICAgICAqXG4gICAgICogQHNlZSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvbXM1MzU4NzIodj12cy44NSkuYXNweFxuICAgICAqL1xuICAgIHZhciB0ZXh0UmFuZ2VUb1BvaW50ID0gZnVuY3Rpb24gKHRleHRSYW5nZSwgaXNTdGFydCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRleHRSYW5nZS5wYXJlbnRFbGVtZW50KCksIG9mZnNldDtcblxuICAgICAgdmFyIHRlc3RlciA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksIHByZXZDb250YWluZXI7XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IGxpc3QuZnJvbShjb250YWluZXIuY2hpbGROb2Rlcyk7XG4gICAgICBmb3IgKG9mZnNldCA9IDA7IG9mZnNldCA8IGNoaWxkTm9kZXMubGVuZ3RoOyBvZmZzZXQrKykge1xuICAgICAgICBpZiAoZG9tLmlzVGV4dChjaGlsZE5vZGVzW29mZnNldF0pKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGVzdGVyLm1vdmVUb0VsZW1lbnRUZXh0KGNoaWxkTm9kZXNbb2Zmc2V0XSk7XG4gICAgICAgIGlmICh0ZXN0ZXIuY29tcGFyZUVuZFBvaW50cygnU3RhcnRUb1N0YXJ0JywgdGV4dFJhbmdlKSA+PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcHJldkNvbnRhaW5lciA9IGNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9mZnNldCAhPT0gMCAmJiBkb20uaXNUZXh0KGNoaWxkTm9kZXNbb2Zmc2V0IC0gMV0pKSB7XG4gICAgICAgIHZhciB0ZXh0UmFuZ2VTdGFydCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCksIGN1clRleHROb2RlID0gbnVsbDtcbiAgICAgICAgdGV4dFJhbmdlU3RhcnQubW92ZVRvRWxlbWVudFRleHQocHJldkNvbnRhaW5lciB8fCBjb250YWluZXIpO1xuICAgICAgICB0ZXh0UmFuZ2VTdGFydC5jb2xsYXBzZSghcHJldkNvbnRhaW5lcik7XG4gICAgICAgIGN1clRleHROb2RlID0gcHJldkNvbnRhaW5lciA/IHByZXZDb250YWluZXIubmV4dFNpYmxpbmcgOiBjb250YWluZXIuZmlyc3RDaGlsZDtcblxuICAgICAgICB2YXIgcG9pbnRUZXN0ZXIgPSB0ZXh0UmFuZ2UuZHVwbGljYXRlKCk7XG4gICAgICAgIHBvaW50VGVzdGVyLnNldEVuZFBvaW50KCdTdGFydFRvU3RhcnQnLCB0ZXh0UmFuZ2VTdGFydCk7XG4gICAgICAgIHZhciB0ZXh0Q291bnQgPSBwb2ludFRlc3Rlci50ZXh0LnJlcGxhY2UoL1tcXHJcXG5dL2csICcnKS5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKHRleHRDb3VudCA+IGN1clRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGggJiYgY3VyVGV4dE5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICB0ZXh0Q291bnQgLT0gY3VyVGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aDtcbiAgICAgICAgICBjdXJUZXh0Tm9kZSA9IGN1clRleHROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAgICAgICB2YXIgZHVtbXkgPSBjdXJUZXh0Tm9kZS5ub2RlVmFsdWU7IC8vIGVuZm9yY2UgSUUgdG8gcmUtcmVmZXJlbmNlIGN1clRleHROb2RlLCBoYWNrXG4gICAgICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgICAgICAgaWYgKGlzU3RhcnQgJiYgY3VyVGV4dE5vZGUubmV4dFNpYmxpbmcgJiYgZG9tLmlzVGV4dChjdXJUZXh0Tm9kZS5uZXh0U2libGluZykgJiZcbiAgICAgICAgICAgIHRleHRDb3VudCA9PT0gY3VyVGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIHRleHRDb3VudCAtPSBjdXJUZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgICAgIGN1clRleHROb2RlID0gY3VyVGV4dE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBjb250YWluZXIgPSBjdXJUZXh0Tm9kZTtcbiAgICAgICAgb2Zmc2V0ID0gdGV4dENvdW50O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb250OiBjb250YWluZXIsXG4gICAgICAgIG9mZnNldDogb2Zmc2V0XG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm4gVGV4dFJhbmdlIGZyb20gYm91bmRhcnkgcG9pbnQgKGluc3BpcmVkIGJ5IGdvb2dsZSBjbG9zdXJlLWxpYnJhcnkpXG4gICAgICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICAgICAqIEByZXR1cm4ge1RleHRSYW5nZX1cbiAgICAgKi9cbiAgICB2YXIgcG9pbnRUb1RleHRSYW5nZSA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgdmFyIHRleHRSYW5nZUluZm8gPSBmdW5jdGlvbiAoY29udGFpbmVyLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIG5vZGUsIGlzQ29sbGFwc2VUb1N0YXJ0O1xuXG4gICAgICAgIGlmIChkb20uaXNUZXh0KGNvbnRhaW5lcikpIHtcbiAgICAgICAgICB2YXIgcHJldlRleHROb2RlcyA9IGRvbS5saXN0UHJldihjb250YWluZXIsIGZ1bmMubm90KGRvbS5pc1RleHQpKTtcbiAgICAgICAgICB2YXIgcHJldkNvbnRhaW5lciA9IGxpc3QubGFzdChwcmV2VGV4dE5vZGVzKS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgbm9kZSA9ICBwcmV2Q29udGFpbmVyIHx8IGNvbnRhaW5lci5wYXJlbnROb2RlO1xuICAgICAgICAgIG9mZnNldCArPSBsaXN0LnN1bShsaXN0LnRhaWwocHJldlRleHROb2RlcyksIGRvbS5ub2RlTGVuZ3RoKTtcbiAgICAgICAgICBpc0NvbGxhcHNlVG9TdGFydCA9ICFwcmV2Q29udGFpbmVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSBjb250YWluZXIuY2hpbGROb2Rlc1tvZmZzZXRdIHx8IGNvbnRhaW5lcjtcbiAgICAgICAgICBpZiAoZG9tLmlzVGV4dChub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHRSYW5nZUluZm8obm9kZSwgMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgICBpc0NvbGxhcHNlVG9TdGFydCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgIGNvbGxhcHNlVG9TdGFydDogaXNDb2xsYXBzZVRvU3RhcnQsXG4gICAgICAgICAgb2Zmc2V0OiBvZmZzZXRcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIHZhciB0ZXh0UmFuZ2UgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xuICAgICAgdmFyIGluZm8gPSB0ZXh0UmFuZ2VJbmZvKHBvaW50Lm5vZGUsIHBvaW50Lm9mZnNldCk7XG5cbiAgICAgIHRleHRSYW5nZS5tb3ZlVG9FbGVtZW50VGV4dChpbmZvLm5vZGUpO1xuICAgICAgdGV4dFJhbmdlLmNvbGxhcHNlKGluZm8uY29sbGFwc2VUb1N0YXJ0KTtcbiAgICAgIHRleHRSYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIGluZm8ub2Zmc2V0KTtcbiAgICAgIHJldHVybiB0ZXh0UmFuZ2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBwZWQgUmFuZ2VcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7Tm9kZX0gc2MgLSBzdGFydCBjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc28gLSBzdGFydCBvZmZzZXRcbiAgICAgKiBAcGFyYW0ge05vZGV9IGVjIC0gZW5kIGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbyAtIGVuZCBvZmZzZXRcbiAgICAgKi9cbiAgICB2YXIgV3JhcHBlZFJhbmdlID0gZnVuY3Rpb24gKHNjLCBzbywgZWMsIGVvKSB7XG4gICAgICB0aGlzLnNjID0gc2M7XG4gICAgICB0aGlzLnNvID0gc287XG4gICAgICB0aGlzLmVjID0gZWM7XG4gICAgICB0aGlzLmVvID0gZW87XG5cbiAgICAgIC8vIG5hdGl2ZVJhbmdlOiBnZXQgbmF0aXZlUmFuZ2UgZnJvbSBzYywgc28sIGVjLCBlb1xuICAgICAgdmFyIG5hdGl2ZVJhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYWdlbnQuaXNXM0NSYW5nZVN1cHBvcnQpIHtcbiAgICAgICAgICB2YXIgdzNjUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgIHczY1JhbmdlLnNldFN0YXJ0KHNjLCBzbyk7XG4gICAgICAgICAgdzNjUmFuZ2Uuc2V0RW5kKGVjLCBlbyk7XG5cbiAgICAgICAgICByZXR1cm4gdzNjUmFuZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRleHRSYW5nZSA9IHBvaW50VG9UZXh0UmFuZ2Uoe1xuICAgICAgICAgICAgbm9kZTogc2MsXG4gICAgICAgICAgICBvZmZzZXQ6IHNvXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0ZXh0UmFuZ2Uuc2V0RW5kUG9pbnQoJ0VuZFRvRW5kJywgcG9pbnRUb1RleHRSYW5nZSh7XG4gICAgICAgICAgICBub2RlOiBlYyxcbiAgICAgICAgICAgIG9mZnNldDogZW9cbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICByZXR1cm4gdGV4dFJhbmdlO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmdldFBvaW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzYzogc2MsXG4gICAgICAgICAgc286IHNvLFxuICAgICAgICAgIGVjOiBlYyxcbiAgICAgICAgICBlbzogZW9cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZ2V0U3RhcnRQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub2RlOiBzYyxcbiAgICAgICAgICBvZmZzZXQ6IHNvXG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmdldEVuZFBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5vZGU6IGVjLFxuICAgICAgICAgIG9mZnNldDogZW9cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogc2VsZWN0IHVwZGF0ZSB2aXNpYmxlIHJhbmdlXG4gICAgICAgKi9cbiAgICAgIHRoaXMuc2VsZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmF0aXZlUm5nID0gbmF0aXZlUmFuZ2UoKTtcbiAgICAgICAgaWYgKGFnZW50LmlzVzNDUmFuZ2VTdXBwb3J0KSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgICAgICAgIGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKG5hdGl2ZVJuZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmF0aXZlUm5nLnNlbGVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICAgICAqL1xuICAgICAgdGhpcy5ub3JtYWxpemUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBpc0xlZnRUb1JpZ2h0XG4gICAgICAgICAqIEByZXR1cm4ge0JvdW5kYXJ5UG9pbnR9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZ2V0VmlzaWJsZVBvaW50ID0gZnVuY3Rpb24gKHBvaW50LCBpc0xlZnRUb1JpZ2h0KSB7XG4gICAgICAgICAgaWYgKChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpICYmICFkb20uaXNFZGdlUG9pbnQocG9pbnQpKSB8fFxuICAgICAgICAgICAgICAoZG9tLmlzVmlzaWJsZVBvaW50KHBvaW50KSAmJiBkb20uaXNSaWdodEVkZ2VQb2ludChwb2ludCkgJiYgIWlzTGVmdFRvUmlnaHQpIHx8XG4gICAgICAgICAgICAgIChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpICYmIGRvbS5pc0xlZnRFZGdlUG9pbnQocG9pbnQpICYmIGlzTGVmdFRvUmlnaHQpIHx8XG4gICAgICAgICAgICAgIChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpICYmIGRvbS5pc0Jsb2NrKHBvaW50Lm5vZGUpICYmIGRvbS5pc0VtcHR5KHBvaW50Lm5vZGUpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHBvaW50IG9uIGJsb2NrJ3MgZWRnZVxuICAgICAgICAgIHZhciBibG9jayA9IGRvbS5hbmNlc3Rvcihwb2ludC5ub2RlLCBkb20uaXNCbG9jayk7XG4gICAgICAgICAgaWYgKCgoZG9tLmlzTGVmdEVkZ2VQb2ludE9mKHBvaW50LCBibG9jaykgfHwgZG9tLmlzVm9pZChkb20ucHJldlBvaW50KHBvaW50KS5ub2RlKSkgJiYgIWlzTGVmdFRvUmlnaHQpIHx8XG4gICAgICAgICAgICAgICgoZG9tLmlzUmlnaHRFZGdlUG9pbnRPZihwb2ludCwgYmxvY2spIHx8IGRvbS5pc1ZvaWQoZG9tLm5leHRQb2ludChwb2ludCkubm9kZSkpICYmIGlzTGVmdFRvUmlnaHQpKSB7XG5cbiAgICAgICAgICAgIC8vIHJldHVybnMgcG9pbnQgYWxyZWFkeSBvbiB2aXNpYmxlIHBvaW50XG4gICAgICAgICAgICBpZiAoZG9tLmlzVmlzaWJsZVBvaW50KHBvaW50KSkge1xuICAgICAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXZlcnNlIGRpcmVjdGlvblxuICAgICAgICAgICAgaXNMZWZ0VG9SaWdodCA9ICFpc0xlZnRUb1JpZ2h0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBuZXh0UG9pbnQgPSBpc0xlZnRUb1JpZ2h0ID8gZG9tLm5leHRQb2ludFVudGlsKGRvbS5uZXh0UG9pbnQocG9pbnQpLCBkb20uaXNWaXNpYmxlUG9pbnQpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbS5wcmV2UG9pbnRVbnRpbChkb20ucHJldlBvaW50KHBvaW50KSwgZG9tLmlzVmlzaWJsZVBvaW50KTtcbiAgICAgICAgICByZXR1cm4gbmV4dFBvaW50IHx8IHBvaW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBlbmRQb2ludCA9IGdldFZpc2libGVQb2ludCh0aGlzLmdldEVuZFBvaW50KCksIGZhbHNlKTtcbiAgICAgICAgdmFyIHN0YXJ0UG9pbnQgPSB0aGlzLmlzQ29sbGFwc2VkKCkgPyBlbmRQb2ludCA6IGdldFZpc2libGVQb2ludCh0aGlzLmdldFN0YXJ0UG9pbnQoKSwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICAgICAgc3RhcnRQb2ludC5ub2RlLFxuICAgICAgICAgIHN0YXJ0UG9pbnQub2Zmc2V0LFxuICAgICAgICAgIGVuZFBvaW50Lm5vZGUsXG4gICAgICAgICAgZW5kUG9pbnQub2Zmc2V0XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIHJldHVybnMgbWF0Y2hlZCBub2RlcyBvbiByYW5nZVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkXSAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pbmNsdWRlQW5jZXN0b3JdXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZ1bGx5Q29udGFpbnNdXG4gICAgICAgKiBAcmV0dXJuIHtOb2RlW119XG4gICAgICAgKi9cbiAgICAgIHRoaXMubm9kZXMgPSBmdW5jdGlvbiAocHJlZCwgb3B0aW9ucykge1xuICAgICAgICBwcmVkID0gcHJlZCB8fCBmdW5jLm9rO1xuXG4gICAgICAgIHZhciBpbmNsdWRlQW5jZXN0b3IgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZUFuY2VzdG9yO1xuICAgICAgICB2YXIgZnVsbHlDb250YWlucyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5mdWxseUNvbnRhaW5zO1xuXG4gICAgICAgIC8vIFRPRE8gY29tcGFyZSBwb2ludHMgYW5kIHNvcnRcbiAgICAgICAgdmFyIHN0YXJ0UG9pbnQgPSB0aGlzLmdldFN0YXJ0UG9pbnQoKTtcbiAgICAgICAgdmFyIGVuZFBvaW50ID0gdGhpcy5nZXRFbmRQb2ludCgpO1xuXG4gICAgICAgIHZhciBub2RlcyA9IFtdO1xuICAgICAgICB2YXIgbGVmdEVkZ2VOb2RlcyA9IFtdO1xuXG4gICAgICAgIGRvbS53YWxrUG9pbnQoc3RhcnRQb2ludCwgZW5kUG9pbnQsIGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgIGlmIChkb20uaXNFZGl0YWJsZShwb2ludC5ub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBub2RlO1xuICAgICAgICAgIGlmIChmdWxseUNvbnRhaW5zKSB7XG4gICAgICAgICAgICBpZiAoZG9tLmlzTGVmdEVkZ2VQb2ludChwb2ludCkpIHtcbiAgICAgICAgICAgICAgbGVmdEVkZ2VOb2Rlcy5wdXNoKHBvaW50Lm5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRvbS5pc1JpZ2h0RWRnZVBvaW50KHBvaW50KSAmJiBsaXN0LmNvbnRhaW5zKGxlZnRFZGdlTm9kZXMsIHBvaW50Lm5vZGUpKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSBwb2ludC5ub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaW5jbHVkZUFuY2VzdG9yKSB7XG4gICAgICAgICAgICBub2RlID0gZG9tLmFuY2VzdG9yKHBvaW50Lm5vZGUsIHByZWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub2RlID0gcG9pbnQubm9kZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobm9kZSAmJiBwcmVkKG5vZGUpKSB7XG4gICAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGxpc3QudW5pcXVlKG5vZGVzKTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogcmV0dXJucyBjb21tb25BbmNlc3RvciBvZiByYW5nZVxuICAgICAgICogQHJldHVybiB7RWxlbWVudH0gLSBjb21tb25BbmNlc3RvclxuICAgICAgICovXG4gICAgICB0aGlzLmNvbW1vbkFuY2VzdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZG9tLmNvbW1vbkFuY2VzdG9yKHNjLCBlYyk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIHJldHVybnMgZXhwYW5kZWQgcmFuZ2UgYnkgcHJlZFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICAgICAqL1xuICAgICAgdGhpcy5leHBhbmQgPSBmdW5jdGlvbiAocHJlZCkge1xuICAgICAgICB2YXIgc3RhcnRBbmNlc3RvciA9IGRvbS5hbmNlc3RvcihzYywgcHJlZCk7XG4gICAgICAgIHZhciBlbmRBbmNlc3RvciA9IGRvbS5hbmNlc3RvcihlYywgcHJlZCk7XG5cbiAgICAgICAgaWYgKCFzdGFydEFuY2VzdG9yICYmICFlbmRBbmNlc3Rvcikge1xuICAgICAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHNjLCBzbywgZWMsIGVvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBib3VuZGFyeVBvaW50cyA9IHRoaXMuZ2V0UG9pbnRzKCk7XG5cbiAgICAgICAgaWYgKHN0YXJ0QW5jZXN0b3IpIHtcbiAgICAgICAgICBib3VuZGFyeVBvaW50cy5zYyA9IHN0YXJ0QW5jZXN0b3I7XG4gICAgICAgICAgYm91bmRhcnlQb2ludHMuc28gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZEFuY2VzdG9yKSB7XG4gICAgICAgICAgYm91bmRhcnlQb2ludHMuZWMgPSBlbmRBbmNlc3RvcjtcbiAgICAgICAgICBib3VuZGFyeVBvaW50cy5lbyA9IGRvbS5ub2RlTGVuZ3RoKGVuZEFuY2VzdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLnNjLFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLnNvLFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLmVjLFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLmVvXG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNDb2xsYXBzZVRvU3RhcnRcbiAgICAgICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICAgICAqL1xuICAgICAgdGhpcy5jb2xsYXBzZSA9IGZ1bmN0aW9uIChpc0NvbGxhcHNlVG9TdGFydCkge1xuICAgICAgICBpZiAoaXNDb2xsYXBzZVRvU3RhcnQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIHNjLCBzbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoZWMsIGVvLCBlYywgZW8pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIHNwbGl0VGV4dCBvbiByYW5nZVxuICAgICAgICovXG4gICAgICB0aGlzLnNwbGl0VGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlzU2FtZUNvbnRhaW5lciA9IHNjID09PSBlYztcbiAgICAgICAgdmFyIGJvdW5kYXJ5UG9pbnRzID0gdGhpcy5nZXRQb2ludHMoKTtcblxuICAgICAgICBpZiAoZG9tLmlzVGV4dChlYykgJiYgIWRvbS5pc0VkZ2VQb2ludCh0aGlzLmdldEVuZFBvaW50KCkpKSB7XG4gICAgICAgICAgZWMuc3BsaXRUZXh0KGVvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb20uaXNUZXh0KHNjKSAmJiAhZG9tLmlzRWRnZVBvaW50KHRoaXMuZ2V0U3RhcnRQb2ludCgpKSkge1xuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLnNjID0gc2Muc3BsaXRUZXh0KHNvKTtcbiAgICAgICAgICBib3VuZGFyeVBvaW50cy5zbyA9IDA7XG5cbiAgICAgICAgICBpZiAoaXNTYW1lQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBib3VuZGFyeVBvaW50cy5lYyA9IGJvdW5kYXJ5UG9pbnRzLnNjO1xuICAgICAgICAgICAgYm91bmRhcnlQb2ludHMuZW8gPSBlbyAtIHNvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLnNjLFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLnNvLFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLmVjLFxuICAgICAgICAgIGJvdW5kYXJ5UG9pbnRzLmVvXG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIGRlbGV0ZSBjb250ZW50cyBvbiByYW5nZVxuICAgICAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgICAgICovXG4gICAgICB0aGlzLmRlbGV0ZUNvbnRlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcm5nID0gdGhpcy5zcGxpdFRleHQoKTtcbiAgICAgICAgdmFyIG5vZGVzID0gcm5nLm5vZGVzKG51bGwsIHtcbiAgICAgICAgICBmdWxseUNvbnRhaW5zOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGZpbmQgbmV3IGN1cnNvciBwb2ludFxuICAgICAgICB2YXIgcG9pbnQgPSBkb20ucHJldlBvaW50VW50aWwocm5nLmdldFN0YXJ0UG9pbnQoKSwgZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgICAgcmV0dXJuICFsaXN0LmNvbnRhaW5zKG5vZGVzLCBwb2ludC5ub2RlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGVtcHR5UGFyZW50cyA9IFtdO1xuICAgICAgICAkLmVhY2gobm9kZXMsIGZ1bmN0aW9uIChpZHgsIG5vZGUpIHtcbiAgICAgICAgICAvLyBmaW5kIGVtcHR5IHBhcmVudHNcbiAgICAgICAgICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICAgIGlmIChwb2ludC5ub2RlICE9PSBwYXJlbnQgJiYgZG9tLm5vZGVMZW5ndGgocGFyZW50KSA9PT0gMSkge1xuICAgICAgICAgICAgZW1wdHlQYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZG9tLnJlbW92ZShub2RlLCBmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlbW92ZSBlbXB0eSBwYXJlbnRzXG4gICAgICAgICQuZWFjaChlbXB0eVBhcmVudHMsIGZ1bmN0aW9uIChpZHgsIG5vZGUpIHtcbiAgICAgICAgICBkb20ucmVtb3ZlKG5vZGUsIGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICAgICAgcG9pbnQubm9kZSxcbiAgICAgICAgICBwb2ludC5vZmZzZXQsXG4gICAgICAgICAgcG9pbnQubm9kZSxcbiAgICAgICAgICBwb2ludC5vZmZzZXRcbiAgICAgICAgKS5ub3JtYWxpemUoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogbWFrZUlzT246IHJldHVybiBpc09uKHByZWQpIGZ1bmN0aW9uXG4gICAgICAgKi9cbiAgICAgIHZhciBtYWtlSXNPbiA9IGZ1bmN0aW9uIChwcmVkKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGFuY2VzdG9yID0gZG9tLmFuY2VzdG9yKHNjLCBwcmVkKTtcbiAgICAgICAgICByZXR1cm4gISFhbmNlc3RvciAmJiAoYW5jZXN0b3IgPT09IGRvbS5hbmNlc3RvcihlYywgcHJlZCkpO1xuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgLy8gaXNPbkVkaXRhYmxlOiBqdWRnZSB3aGV0aGVyIHJhbmdlIGlzIG9uIGVkaXRhYmxlIG9yIG5vdFxuICAgICAgdGhpcy5pc09uRWRpdGFibGUgPSBtYWtlSXNPbihkb20uaXNFZGl0YWJsZSk7XG4gICAgICAvLyBpc09uTGlzdDoganVkZ2Ugd2hldGhlciByYW5nZSBpcyBvbiBsaXN0IG5vZGUgb3Igbm90XG4gICAgICB0aGlzLmlzT25MaXN0ID0gbWFrZUlzT24oZG9tLmlzTGlzdCk7XG4gICAgICAvLyBpc09uQW5jaG9yOiBqdWRnZSB3aGV0aGVyIHJhbmdlIGlzIG9uIGFuY2hvciBub2RlIG9yIG5vdFxuICAgICAgdGhpcy5pc09uQW5jaG9yID0gbWFrZUlzT24oZG9tLmlzQW5jaG9yKTtcbiAgICAgIC8vIGlzT25BbmNob3I6IGp1ZGdlIHdoZXRoZXIgcmFuZ2UgaXMgb24gY2VsbCBub2RlIG9yIG5vdFxuICAgICAgdGhpcy5pc09uQ2VsbCA9IG1ha2VJc09uKGRvbS5pc0NlbGwpO1xuXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIHRoaXMuaXNMZWZ0RWRnZU9mID0gZnVuY3Rpb24gKHByZWQpIHtcbiAgICAgICAgaWYgKCFkb20uaXNMZWZ0RWRnZVBvaW50KHRoaXMuZ2V0U3RhcnRQb2ludCgpKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBub2RlID0gZG9tLmFuY2VzdG9yKHRoaXMuc2MsIHByZWQpO1xuICAgICAgICByZXR1cm4gbm9kZSAmJiBkb20uaXNMZWZ0RWRnZU9mKHRoaXMuc2MsIG5vZGUpO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIHdoZXRoZXIgcmFuZ2Ugd2FzIGNvbGxhcHNlZCBvciBub3RcbiAgICAgICAqL1xuICAgICAgdGhpcy5pc0NvbGxhcHNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNjID09PSBlYyAmJiBzbyA9PT0gZW87XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIHdyYXAgaW5saW5lIG5vZGVzIHdoaWNoIGNoaWxkcmVuIG9mIGJvZHkgd2l0aCBwYXJhZ3JhcGhcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAgICAgKi9cbiAgICAgIHRoaXMud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGRvbS5pc0JvZHlDb250YWluZXIoc2MpICYmIGRvbS5pc0VtcHR5KHNjKSkge1xuICAgICAgICAgIHNjLmlubmVySFRNTCA9IGRvbS5lbXB0eVBhcmE7XG4gICAgICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2Uoc2MuZmlyc3RDaGlsZCwgMCwgc2MuZmlyc3RDaGlsZCwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogW3dvcmthcm91bmRdIGZpcmVmb3ggb2Z0ZW4gY3JlYXRlIHJhbmdlIG9uIG5vdCB2aXNpYmxlIHBvaW50LiBzbyBub3JtYWxpemUgaGVyZS5cbiAgICAgICAgICogIC0gZmlyZWZveDogfDxwPnRleHQ8L3A+fFxuICAgICAgICAgKiAgLSBjaHJvbWU6IDxwPnx0ZXh0fDwvcD5cbiAgICAgICAgICovXG4gICAgICAgIHZhciBybmcgPSB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgICAgICBpZiAoZG9tLmlzUGFyYUlubGluZShzYykgfHwgZG9tLmlzUGFyYShzYykpIHtcbiAgICAgICAgICByZXR1cm4gcm5nO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmluZCBpbmxpbmUgdG9wIGFuY2VzdG9yXG4gICAgICAgIHZhciB0b3BBbmNlc3RvcjtcbiAgICAgICAgaWYgKGRvbS5pc0lubGluZShybmcuc2MpKSB7XG4gICAgICAgICAgdmFyIGFuY2VzdG9ycyA9IGRvbS5saXN0QW5jZXN0b3Iocm5nLnNjLCBmdW5jLm5vdChkb20uaXNJbmxpbmUpKTtcbiAgICAgICAgICB0b3BBbmNlc3RvciA9IGxpc3QubGFzdChhbmNlc3RvcnMpO1xuICAgICAgICAgIGlmICghZG9tLmlzSW5saW5lKHRvcEFuY2VzdG9yKSkge1xuICAgICAgICAgICAgdG9wQW5jZXN0b3IgPSBhbmNlc3RvcnNbYW5jZXN0b3JzLmxlbmd0aCAtIDJdIHx8IHJuZy5zYy5jaGlsZE5vZGVzW3JuZy5zb107XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvcEFuY2VzdG9yID0gcm5nLnNjLmNoaWxkTm9kZXNbcm5nLnNvID4gMCA/IHJuZy5zbyAtIDEgOiAwXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNpYmxpbmdzIG5vdCBpbiBwYXJhZ3JhcGhcbiAgICAgICAgdmFyIGlubGluZVNpYmxpbmdzID0gZG9tLmxpc3RQcmV2KHRvcEFuY2VzdG9yLCBkb20uaXNQYXJhSW5saW5lKS5yZXZlcnNlKCk7XG4gICAgICAgIGlubGluZVNpYmxpbmdzID0gaW5saW5lU2libGluZ3MuY29uY2F0KGRvbS5saXN0TmV4dCh0b3BBbmNlc3Rvci5uZXh0U2libGluZywgZG9tLmlzUGFyYUlubGluZSkpO1xuXG4gICAgICAgIC8vIHdyYXAgd2l0aCBwYXJhZ3JhcGhcbiAgICAgICAgaWYgKGlubGluZVNpYmxpbmdzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBwYXJhID0gZG9tLndyYXAobGlzdC5oZWFkKGlubGluZVNpYmxpbmdzKSwgJ3AnKTtcbiAgICAgICAgICBkb20uYXBwZW5kQ2hpbGROb2RlcyhwYXJhLCBsaXN0LnRhaWwoaW5saW5lU2libGluZ3MpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBpbnNlcnQgbm9kZSBhdCBjdXJyZW50IGN1cnNvclxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAgICogQHJldHVybiB7Tm9kZX1cbiAgICAgICAqL1xuICAgICAgdGhpcy5pbnNlcnROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHJuZyA9IHRoaXMud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgICAgIHZhciBpbmZvID0gZG9tLnNwbGl0UG9pbnQocm5nLmdldFN0YXJ0UG9pbnQoKSwgZG9tLmlzSW5saW5lKG5vZGUpKTtcblxuICAgICAgICBpZiAoaW5mby5yaWdodE5vZGUpIHtcbiAgICAgICAgICBpbmZvLnJpZ2h0Tm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBpbmZvLnJpZ2h0Tm9kZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5mby5jb250YWluZXIuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogaW5zZXJ0IGh0bWwgYXQgY3VycmVudCBjdXJzb3JcbiAgICAgICAqL1xuICAgICAgdGhpcy5wYXN0ZUhUTUwgPSBmdW5jdGlvbiAobWFya3VwKSB7XG4gICAgICAgIHZhciBjb250ZW50c0NvbnRhaW5lciA9ICQoJzxkaXY+PC9kaXY+JykuaHRtbChtYXJrdXApWzBdO1xuICAgICAgICB2YXIgY2hpbGROb2RlcyA9IGxpc3QuZnJvbShjb250ZW50c0NvbnRhaW5lci5jaGlsZE5vZGVzKTtcblxuICAgICAgICB2YXIgcm5nID0gdGhpcy53cmFwQm9keUlubGluZVdpdGhQYXJhKCkuZGVsZXRlQ29udGVudHMoKTtcblxuICAgICAgICByZXR1cm4gY2hpbGROb2Rlcy5yZXZlcnNlKCkubWFwKGZ1bmN0aW9uIChjaGlsZE5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gcm5nLmluc2VydE5vZGUoY2hpbGROb2RlKTtcbiAgICAgICAgfSkucmV2ZXJzZSgpO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIHRleHQgaW4gcmFuZ2VcbiAgICAgICAqXG4gICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICAgKi9cbiAgICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuYXRpdmVSbmcgPSBuYXRpdmVSYW5nZSgpO1xuICAgICAgICByZXR1cm4gYWdlbnQuaXNXM0NSYW5nZVN1cHBvcnQgPyBuYXRpdmVSbmcudG9TdHJpbmcoKSA6IG5hdGl2ZVJuZy50ZXh0O1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiByZXR1cm5zIHJhbmdlIGZvciB3b3JkIGJlZm9yZSBjdXJzb3JcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmaW5kQWZ0ZXJdIC0gZmluZCBhZnRlciBjdXJzb3IsIGRlZmF1bHQ6IGZhbHNlXG4gICAgICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAgICAgKi9cbiAgICAgIHRoaXMuZ2V0V29yZFJhbmdlID0gZnVuY3Rpb24gKGZpbmRBZnRlcikge1xuICAgICAgICB2YXIgZW5kUG9pbnQgPSB0aGlzLmdldEVuZFBvaW50KCk7XG5cbiAgICAgICAgaWYgKCFkb20uaXNDaGFyUG9pbnQoZW5kUG9pbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3RhcnRQb2ludCA9IGRvbS5wcmV2UG9pbnRVbnRpbChlbmRQb2ludCwgZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgICAgcmV0dXJuICFkb20uaXNDaGFyUG9pbnQocG9pbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZmluZEFmdGVyKSB7XG4gICAgICAgICAgZW5kUG9pbnQgPSBkb20ubmV4dFBvaW50VW50aWwoZW5kUG9pbnQsIGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuICFkb20uaXNDaGFyUG9pbnQocG9pbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICAgICAgc3RhcnRQb2ludC5ub2RlLFxuICAgICAgICAgIHN0YXJ0UG9pbnQub2Zmc2V0LFxuICAgICAgICAgIGVuZFBvaW50Lm5vZGUsXG4gICAgICAgICAgZW5kUG9pbnQub2Zmc2V0XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIGNyZWF0ZSBvZmZzZXRQYXRoIGJvb2ttYXJrXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtOb2RlfSBlZGl0YWJsZVxuICAgICAgICovXG4gICAgICB0aGlzLmJvb2ttYXJrID0gZnVuY3Rpb24gKGVkaXRhYmxlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgczoge1xuICAgICAgICAgICAgcGF0aDogZG9tLm1ha2VPZmZzZXRQYXRoKGVkaXRhYmxlLCBzYyksXG4gICAgICAgICAgICBvZmZzZXQ6IHNvXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlOiB7XG4gICAgICAgICAgICBwYXRoOiBkb20ubWFrZU9mZnNldFBhdGgoZWRpdGFibGUsIGVjKSxcbiAgICAgICAgICAgIG9mZnNldDogZW9cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIGNyZWF0ZSBvZmZzZXRQYXRoIGJvb2ttYXJrIGJhc2Ugb24gcGFyYWdyYXBoXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtOb2RlW119IHBhcmFzXG4gICAgICAgKi9cbiAgICAgIHRoaXMucGFyYUJvb2ttYXJrID0gZnVuY3Rpb24gKHBhcmFzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgczoge1xuICAgICAgICAgICAgcGF0aDogbGlzdC50YWlsKGRvbS5tYWtlT2Zmc2V0UGF0aChsaXN0LmhlYWQocGFyYXMpLCBzYykpLFxuICAgICAgICAgICAgb2Zmc2V0OiBzb1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZToge1xuICAgICAgICAgICAgcGF0aDogbGlzdC50YWlsKGRvbS5tYWtlT2Zmc2V0UGF0aChsaXN0Lmxhc3QocGFyYXMpLCBlYykpLFxuICAgICAgICAgICAgb2Zmc2V0OiBlb1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogZ2V0Q2xpZW50UmVjdHNcbiAgICAgICAqIEByZXR1cm4ge1JlY3RbXX1cbiAgICAgICAqL1xuICAgICAgdGhpcy5nZXRDbGllbnRSZWN0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5hdGl2ZVJuZyA9IG5hdGl2ZVJhbmdlKCk7XG4gICAgICAgIHJldHVybiBuYXRpdmVSbmcuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAvKipcbiAgICogQGNsYXNzIGNvcmUucmFuZ2VcbiAgICpcbiAgICogRGF0YSBzdHJ1Y3R1cmVcbiAgICogICogQm91bmRhcnlQb2ludDogYSBwb2ludCBvZiBkb20gdHJlZVxuICAgKiAgKiBCb3VuZGFyeVBvaW50czogdHdvIGJvdW5kYXJ5UG9pbnRzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0YXJ0IGFuZCB0aGUgZW5kIG9mIHRoZSBSYW5nZVxuICAgKlxuICAgKiBTZWUgdG8gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItVHJhdmVyc2FsLVJhbmdlL3Jhbmdlcy5odG1sI0xldmVsLTItUmFuZ2UtUG9zaXRpb25cbiAgICpcbiAgICogQHNpbmdsZXRvblxuICAgKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIHJhbmdlXG4gICAqL1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIEBtZXRob2RcbiAgICAgICAqXG4gICAgICAgKiBjcmVhdGUgUmFuZ2UgT2JqZWN0IEZyb20gYXJndW1lbnRzIG9yIEJyb3dzZXIgU2VsZWN0aW9uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtOb2RlfSBzYyAtIHN0YXJ0IGNvbnRhaW5lclxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHNvIC0gc3RhcnQgb2Zmc2V0XG4gICAgICAgKiBAcGFyYW0ge05vZGV9IGVjIC0gZW5kIGNvbnRhaW5lclxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGVvIC0gZW5kIG9mZnNldFxuICAgICAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgICAgICovXG4gICAgICBjcmVhdGUgOiBmdW5jdGlvbiAoc2MsIHNvLCBlYywgZW8pIHtcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7IC8vIGZyb20gQnJvd3NlciBTZWxlY3Rpb25cbiAgICAgICAgICBpZiAoYWdlbnQuaXNXM0NSYW5nZVN1cHBvcnQpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5yYW5nZUNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkb20uaXNCb2R5KHNlbGVjdGlvbi5hbmNob3JOb2RlKSkge1xuICAgICAgICAgICAgICAvLyBGaXJlZm94OiByZXR1cm5zIGVudGlyZSBib2R5IGFzIHJhbmdlIG9uIGluaXRpYWxpemF0aW9uLiBXZSB3b24ndCBuZXZlciBuZWVkIGl0LlxuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG5hdGl2ZVJuZyA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApO1xuICAgICAgICAgICAgc2MgPSBuYXRpdmVSbmcuc3RhcnRDb250YWluZXI7XG4gICAgICAgICAgICBzbyA9IG5hdGl2ZVJuZy5zdGFydE9mZnNldDtcbiAgICAgICAgICAgIGVjID0gbmF0aXZlUm5nLmVuZENvbnRhaW5lcjtcbiAgICAgICAgICAgIGVvID0gbmF0aXZlUm5nLmVuZE9mZnNldDtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBJRTg6IFRleHRSYW5nZVxuICAgICAgICAgICAgdmFyIHRleHRSYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgICAgICAgdmFyIHRleHRSYW5nZUVuZCA9IHRleHRSYW5nZS5kdXBsaWNhdGUoKTtcbiAgICAgICAgICAgIHRleHRSYW5nZUVuZC5jb2xsYXBzZShmYWxzZSk7XG4gICAgICAgICAgICB2YXIgdGV4dFJhbmdlU3RhcnQgPSB0ZXh0UmFuZ2U7XG4gICAgICAgICAgICB0ZXh0UmFuZ2VTdGFydC5jb2xsYXBzZSh0cnVlKTtcblxuICAgICAgICAgICAgdmFyIHN0YXJ0UG9pbnQgPSB0ZXh0UmFuZ2VUb1BvaW50KHRleHRSYW5nZVN0YXJ0LCB0cnVlKSxcbiAgICAgICAgICAgIGVuZFBvaW50ID0gdGV4dFJhbmdlVG9Qb2ludCh0ZXh0UmFuZ2VFbmQsIGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gc2FtZSB2aXNpYmxlIHBvaW50IGNhc2U6IHJhbmdlIHdhcyBjb2xsYXBzZWQuXG4gICAgICAgICAgICBpZiAoZG9tLmlzVGV4dChzdGFydFBvaW50Lm5vZGUpICYmIGRvbS5pc0xlZnRFZGdlUG9pbnQoc3RhcnRQb2ludCkgJiZcbiAgICAgICAgICAgICAgICBkb20uaXNUZXh0Tm9kZShlbmRQb2ludC5ub2RlKSAmJiBkb20uaXNSaWdodEVkZ2VQb2ludChlbmRQb2ludCkgJiZcbiAgICAgICAgICAgICAgICBlbmRQb2ludC5ub2RlLm5leHRTaWJsaW5nID09PSBzdGFydFBvaW50Lm5vZGUpIHtcbiAgICAgICAgICAgICAgc3RhcnRQb2ludCA9IGVuZFBvaW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzYyA9IHN0YXJ0UG9pbnQuY29udDtcbiAgICAgICAgICAgIHNvID0gc3RhcnRQb2ludC5vZmZzZXQ7XG4gICAgICAgICAgICBlYyA9IGVuZFBvaW50LmNvbnQ7XG4gICAgICAgICAgICBlbyA9IGVuZFBvaW50Lm9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgeyAvL2NvbGxhcHNlZFxuICAgICAgICAgIGVjID0gc2M7XG4gICAgICAgICAgZW8gPSBzbztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZXRob2RcbiAgICAgICAqXG4gICAgICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gbm9kZVxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgICAgICovXG4gICAgICBjcmVhdGVGcm9tTm9kZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHNjID0gbm9kZTtcbiAgICAgICAgdmFyIHNvID0gMDtcbiAgICAgICAgdmFyIGVjID0gbm9kZTtcbiAgICAgICAgdmFyIGVvID0gZG9tLm5vZGVMZW5ndGgoZWMpO1xuXG4gICAgICAgIC8vIGJyb3dzZXJzIGNhbid0IHRhcmdldCBhIHBpY3R1cmUgb3Igdm9pZCBub2RlXG4gICAgICAgIGlmIChkb20uaXNWb2lkKHNjKSkge1xuICAgICAgICAgIHNvID0gZG9tLmxpc3RQcmV2KHNjKS5sZW5ndGggLSAxO1xuICAgICAgICAgIHNjID0gc2MucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9tLmlzQlIoZWMpKSB7XG4gICAgICAgICAgZW8gPSBkb20ubGlzdFByZXYoZWMpLmxlbmd0aCAtIDE7XG4gICAgICAgICAgZWMgPSBlYy5wYXJlbnROb2RlO1xuICAgICAgICB9IGVsc2UgaWYgKGRvbS5pc1ZvaWQoZWMpKSB7XG4gICAgICAgICAgZW8gPSBkb20ubGlzdFByZXYoZWMpLmxlbmd0aDtcbiAgICAgICAgICBlYyA9IGVjLnBhcmVudE5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGUoc2MsIHNvLCBlYywgZW8pO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gbm9kZSBhZnRlciBwb3NpdGlvblxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgICAgICovXG4gICAgICBjcmVhdGVGcm9tTm9kZUJlZm9yZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRnJvbU5vZGUobm9kZSkuY29sbGFwc2UodHJ1ZSk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIGNyZWF0ZSBXcmFwcGVkUmFuZ2UgZnJvbSBub2RlIGFmdGVyIHBvc2l0aW9uXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAgICAgKi9cbiAgICAgIGNyZWF0ZUZyb21Ob2RlQWZ0ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUZyb21Ob2RlKG5vZGUpLmNvbGxhcHNlKCk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZXRob2RcbiAgICAgICAqXG4gICAgICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gYm9va21hcmtcbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0ge05vZGV9IGVkaXRhYmxlXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gYm9va21hcmtcbiAgICAgICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICAgICAqL1xuICAgICAgY3JlYXRlRnJvbUJvb2ttYXJrIDogZnVuY3Rpb24gKGVkaXRhYmxlLCBib29rbWFyaykge1xuICAgICAgICB2YXIgc2MgPSBkb20uZnJvbU9mZnNldFBhdGgoZWRpdGFibGUsIGJvb2ttYXJrLnMucGF0aCk7XG4gICAgICAgIHZhciBzbyA9IGJvb2ttYXJrLnMub2Zmc2V0O1xuICAgICAgICB2YXIgZWMgPSBkb20uZnJvbU9mZnNldFBhdGgoZWRpdGFibGUsIGJvb2ttYXJrLmUucGF0aCk7XG4gICAgICAgIHZhciBlbyA9IGJvb2ttYXJrLmUub2Zmc2V0O1xuICAgICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBtZXRob2RcbiAgICAgICAqXG4gICAgICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gcGFyYUJvb2ttYXJrXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGJvb2ttYXJrXG4gICAgICAgKiBAcGFyYW0ge05vZGVbXX0gcGFyYXNcbiAgICAgICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICAgICAqL1xuICAgICAgY3JlYXRlRnJvbVBhcmFCb29rbWFyazogZnVuY3Rpb24gKGJvb2ttYXJrLCBwYXJhcykge1xuICAgICAgICB2YXIgc28gPSBib29rbWFyay5zLm9mZnNldDtcbiAgICAgICAgdmFyIGVvID0gYm9va21hcmsuZS5vZmZzZXQ7XG4gICAgICAgIHZhciBzYyA9IGRvbS5mcm9tT2Zmc2V0UGF0aChsaXN0LmhlYWQocGFyYXMpLCBib29rbWFyay5zLnBhdGgpO1xuICAgICAgICB2YXIgZWMgPSBkb20uZnJvbU9mZnNldFBhdGgobGlzdC5sYXN0KHBhcmFzKSwgYm9va21hcmsuZS5wYXRoKTtcblxuICAgICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogQGNsYXNzIGRlZmF1bHRzXG4gICAqXG4gICAqIEBzaW5nbGV0b25cbiAgICovXG4gIHZhciBkZWZhdWx0cyA9IHtcbiAgICAvKiogQHByb3BlcnR5ICovXG4gICAgdmVyc2lvbjogJzAuNi4xNycsXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIGZvciBldmVudCBvcHRpb25zLCByZWZlcmVuY2UgdG8gRXZlbnRIYW5kbGVyLmF0dGFjaFxuICAgICAqXG4gICAgICogQHByb3BlcnR5IHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZy9OdW1iZXJ9IFtvcHRpb25zLndpZHRoPW51bGxdIHNldCBlZGl0b3Igd2lkdGhcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZy9OdW1iZXJ9IFtvcHRpb25zLmhlaWdodD1udWxsXSBzZXQgZWRpdG9yIGhlaWdodCwgZXgpIDMwMFxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nL051bWJlcn0gb3B0aW9ucy5taW5IZWlnaHQgc2V0IG1pbmltdW0gaGVpZ2h0IG9mIGVkaXRvclxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nL051bWJlcn0gb3B0aW9ucy5tYXhIZWlnaHRcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZy9OdW1iZXJ9IG9wdGlvbnMuZm9jdXNcbiAgICAgKiBAcHJvcGVydHkge051bWJlcn0gb3B0aW9ucy50YWJzaXplXG4gICAgICogQHByb3BlcnR5IHtCb29sZWFufSBvcHRpb25zLnN0eWxlV2l0aFNwYW5cbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gb3B0aW9ucy5jb2RlbWlycm9yXG4gICAgICogQHByb3BlcnR5IHtPYmplY3R9IFtvcHRpb25zLmNvZGVtaXJyb3IubW9kZT0ndGV4dC9odG1sJ11cbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gW29wdGlvbnMuY29kZW1pcnJvci5odG1sTW9kZT10cnVlXVxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbb3B0aW9ucy5jb2RlbWlycm9yLmxpbmVOdW1iZXJzPXRydWVdXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd9IFtvcHRpb25zLmxhbmc9ZW4tVVNdIGxhbmd1YWdlICdlbi1VUycsICdrby1LUicsIC4uLlxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbb3B0aW9ucy5kaXJlY3Rpb249bnVsbF0gdGV4dCBkaXJlY3Rpb24sIGV4KSAncnRsJ1xuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IFtvcHRpb25zLnRvb2xiYXJdXG4gICAgICogQHByb3BlcnR5IHtCb29sZWFufSBbb3B0aW9ucy5haXJNb2RlPWZhbHNlXVxuICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IFtvcHRpb25zLmFpclBvcG92ZXJdXG4gICAgICogQHByb3BlcnR5IHtGdWNudGlvbn0gW29wdGlvbnMub25Jbml0XSBpbml0aWFsaXplXG4gICAgICogQHByb3BlcnR5IHtGdWNudGlvbn0gW29wdGlvbnMub25zdWJtaXRdXG4gICAgICovXG4gICAgb3B0aW9uczoge1xuICAgICAgd2lkdGg6IG51bGwsICAgICAgICAgICAgICAgICAgLy8gc2V0IGVkaXRvciB3aWR0aFxuICAgICAgaGVpZ2h0OiBudWxsLCAgICAgICAgICAgICAgICAgLy8gc2V0IGVkaXRvciBoZWlnaHQsIGV4KSAzMDBcblxuICAgICAgbWluSGVpZ2h0OiBudWxsLCAgICAgICAgICAgICAgLy8gc2V0IG1pbmltdW0gaGVpZ2h0IG9mIGVkaXRvclxuICAgICAgbWF4SGVpZ2h0OiBudWxsLCAgICAgICAgICAgICAgLy8gc2V0IG1heGltdW0gaGVpZ2h0IG9mIGVkaXRvclxuXG4gICAgICBmb2N1czogZmFsc2UsICAgICAgICAgICAgICAgICAvLyBzZXQgZm9jdXMgdG8gZWRpdGFibGUgYXJlYSBhZnRlciBpbml0aWFsaXppbmcgc3VtbWVybm90ZVxuXG4gICAgICB0YWJzaXplOiA0LCAgICAgICAgICAgICAgICAgICAvLyBzaXplIG9mIHRhYiBleCkgMiBvciA0XG4gICAgICBzdHlsZVdpdGhTcGFuOiB0cnVlLCAgICAgICAgICAvLyBzdHlsZSB3aXRoIHNwYW4gKENocm9tZSBhbmQgRkYgb25seSlcblxuICAgICAgZGlzYWJsZUxpbmtUYXJnZXQ6IGZhbHNlLCAgICAgLy8gaGlkZSBsaW5rIFRhcmdldCBDaGVja2JveFxuICAgICAgZGlzYWJsZURyYWdBbmREcm9wOiBmYWxzZSwgICAgLy8gZGlzYWJsZSBkcmFnIGFuZCBkcm9wIGV2ZW50XG4gICAgICBkaXNhYmxlUmVzaXplRWRpdG9yOiBmYWxzZSwgICAvLyBkaXNhYmxlIHJlc2l6aW5nIGVkaXRvclxuICAgICAgZGlzYWJsZVJlc2l6ZUltYWdlOiBmYWxzZSwgICAgLy8gZGlzYWJsZSByZXNpemluZyBpbWFnZVxuXG4gICAgICBzaG9ydGN1dHM6IHRydWUsICAgICAgICAgICAgICAvLyBlbmFibGUga2V5Ym9hcmQgc2hvcnRjdXRzXG5cbiAgICAgIHBsYWNlaG9sZGVyOiBmYWxzZSwgICAgICAgICAgIC8vIGVuYWJsZSBwbGFjZWhvbGRlciB0ZXh0XG4gICAgICBwcmV0dGlmeUh0bWw6IHRydWUsICAgICAgICAgICAvLyBlbmFibGUgcHJldHRpZnlpbmcgaHRtbCB3aGlsZSB0b2dnbGluZyBjb2Rldmlld1xuXG4gICAgICBpY29uUHJlZml4OiAnbWJyLWljb24tJywgICAgICAgICAvLyBwcmVmaXggZm9yIGNzcyBpY29uIGNsYXNzZXNcblxuICAgICAgaWNvbnM6IHtcbiAgICAgICAgZm9udDoge1xuICAgICAgICAgIGJvbGQ6ICdib2xkJyxcbiAgICAgICAgICBpdGFsaWM6ICdpdGFsaWMnLFxuICAgICAgICAgIHVuZGVybGluZTogJ3VuZGVybGluZScsXG4gICAgICAgICAgY2xlYXI6ICdlcmFzZXInLFxuICAgICAgICAgIGhlaWdodDogJ3RleHQtaGVpZ2h0JyxcbiAgICAgICAgICBzdHJpa2V0aHJvdWdoOiAnc3RyaWtldGhyb3VnaCcsXG4gICAgICAgICAgc3VwZXJzY3JpcHQ6ICdzdXBlcnNjcmlwdCcsXG4gICAgICAgICAgc3Vic2NyaXB0OiAnc3Vic2NyaXB0J1xuICAgICAgICB9LFxuICAgICAgICBpbWFnZToge1xuICAgICAgICAgIGltYWdlOiAncGljdHVyZS1vJyxcbiAgICAgICAgICBmbG9hdExlZnQ6ICdhbGlnbi1sZWZ0JyxcbiAgICAgICAgICBmbG9hdFJpZ2h0OiAnYWxpZ24tcmlnaHQnLFxuICAgICAgICAgIGZsb2F0Tm9uZTogJ2FsaWduLWp1c3RpZnknLFxuICAgICAgICAgIHNoYXBlUm91bmRlZDogJ3NxdWFyZScsXG4gICAgICAgICAgc2hhcGVDaXJjbGU6ICdjaXJjbGUtbycsXG4gICAgICAgICAgc2hhcGVUaHVtYm5haWw6ICdwaWN0dXJlLW8nLFxuICAgICAgICAgIHNoYXBlTm9uZTogJ3RpbWVzJyxcbiAgICAgICAgICByZW1vdmU6ICd0cmFzaC1vJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiB7XG4gICAgICAgICAgbGluazogJ2xpbmsnLFxuICAgICAgICAgIHVubGluazogJ3VubGluaycsXG4gICAgICAgICAgZWRpdDogJ2VkaXQyJ1xuICAgICAgICB9LFxuICAgICAgICB0YWJsZToge1xuICAgICAgICAgIHRhYmxlOiAndGFibGUnXG4gICAgICAgIH0sXG4gICAgICAgIGhyOiB7XG4gICAgICAgICAgaW5zZXJ0OiAnbWludXMnXG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgc3R5bGU6ICdtYWdpYy1zdGljaydcbiAgICAgICAgfSxcbiAgICAgICAgbGlzdHM6IHtcbiAgICAgICAgICB1bm9yZGVyZWQ6ICdidWxsZXRlZC1saXN0JyxcbiAgICAgICAgICBvcmRlcmVkOiAnbnVtYmVyZWQtbGlzdCdcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGhlbHA6ICdxdWVzdGlvbicsXG4gICAgICAgICAgZnVsbHNjcmVlbjogJ2Fycm93cy1hbHQnLFxuICAgICAgICAgIGNvZGV2aWV3OiAnY29kZSdcbiAgICAgICAgfSxcbiAgICAgICAgcGFyYWdyYXBoOiB7XG4gICAgICAgICAgcGFyYWdyYXBoOiAnYWxpZ24tbGVmdCcsXG4gICAgICAgICAgb3V0ZGVudDogJ291dGRlbnQnLFxuICAgICAgICAgIGluZGVudDogJ2luZGVudCcsXG4gICAgICAgICAgbGVmdDogJ2FsaWduLWxlZnQnLFxuICAgICAgICAgIGNlbnRlcjogJ2FsaWduLWNlbnRlcicsXG4gICAgICAgICAgcmlnaHQ6ICdhbGlnbi1yaWdodCcsXG4gICAgICAgICAganVzdGlmeTogJ2FsaWduLWp1c3RpZnknXG4gICAgICAgIH0sXG4gICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgcmVjZW50OiAnZm9udCdcbiAgICAgICAgfSxcbiAgICAgICAgaGlzdG9yeToge1xuICAgICAgICAgIHVuZG86ICd1bmRvJyxcbiAgICAgICAgICByZWRvOiAncmVwZWF0J1xuICAgICAgICB9LFxuICAgICAgICBtaXNjOiB7XG4gICAgICAgICAgY2hlY2s6ICdjaGVjaydcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgZGlhbG9nc0luQm9keTogZmFsc2UsICAgICAgICAgIC8vIGZhbHNlIHdpbGwgYWRkIGRpYWxvZ3MgaW50byBlZGl0b3JcblxuICAgICAgY29kZW1pcnJvcjogeyAgICAgICAgICAgICAgICAgLy8gY29kZW1pcnJvciBvcHRpb25zXG4gICAgICAgIG1vZGU6ICd0ZXh0L2h0bWwnLFxuICAgICAgICBodG1sTW9kZTogdHJ1ZSxcbiAgICAgICAgbGluZU51bWJlcnM6IHRydWVcbiAgICAgIH0sXG5cbiAgICAgIC8vIGxhbmd1YWdlXG4gICAgICBsYW5nOiAnZW4tVVMnLCAgICAgICAgICAgICAgICAvLyBsYW5ndWFnZSAnZW4tVVMnLCAna28tS1InLCAuLi5cbiAgICAgIGRpcmVjdGlvbjogbnVsbCwgICAgICAgICAgICAgIC8vIHRleHQgZGlyZWN0aW9uLCBleCkgJ3J0bCdcblxuICAgICAgLy8gdG9vbGJhclxuICAgICAgdG9vbGJhcjogW1xuICAgICAgICBbJ3N0eWxlJywgWydzdHlsZSddXSxcbiAgICAgICAgWydmb250JywgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnY2xlYXInXV0sXG4gICAgICAgIC8vIFsnZm9udCcsIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ3N0cmlrZXRocm91Z2gnLCAnc3VwZXJzY3JpcHQnLCAnc3Vic2NyaXB0JywgJ2NsZWFyJ11dLFxuICAgICAgICBbJ2ZvbnRuYW1lJywgWydmb250bmFtZSddXSxcbiAgICAgICAgWydmb250c2l6ZScsIFsnZm9udHNpemUnXV0sXG4gICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICBbJ3BhcmEnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCddXSxcbiAgICAgICAgWydoZWlnaHQnLCBbJ2hlaWdodCddXSxcbiAgICAgICAgWyd0YWJsZScsIFsndGFibGUnXV0sXG4gICAgICAgIFsnaW5zZXJ0JywgWydsaW5rJywgJ3BpY3R1cmUnLCAnaHInXV0sXG4gICAgICAgIFsndmlldycsIFsnZnVsbHNjcmVlbicsICdjb2RldmlldyddXSxcbiAgICAgICAgWydoZWxwJywgWydoZWxwJ11dXG4gICAgICBdLFxuXG4gICAgICBwbHVnaW4gOiB7IH0sXG5cbiAgICAgIC8vIGFpciBtb2RlOiBpbmxpbmUgZWRpdG9yXG4gICAgICBhaXJNb2RlOiBmYWxzZSxcbiAgICAgIC8vIGFpclBvcG92ZXI6IFtcbiAgICAgIC8vICAgWydzdHlsZScsIFsnc3R5bGUnXV0sXG4gICAgICAvLyAgIFsnZm9udCcsIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dLFxuICAgICAgLy8gICBbJ2ZvbnRuYW1lJywgWydmb250bmFtZSddXSxcbiAgICAgIC8vICAgWydjb2xvcicsIFsnY29sb3InXV0sXG4gICAgICAvLyAgIFsncGFyYScsIFsndWwnLCAnb2wnLCAncGFyYWdyYXBoJ11dLFxuICAgICAgLy8gICBbJ2hlaWdodCcsIFsnaGVpZ2h0J11dLFxuICAgICAgLy8gICBbJ3RhYmxlJywgWyd0YWJsZSddXSxcbiAgICAgIC8vICAgWydpbnNlcnQnLCBbJ2xpbmsnLCAncGljdHVyZSddXSxcbiAgICAgIC8vICAgWydoZWxwJywgWydoZWxwJ11dXG4gICAgICAvLyBdLFxuICAgICAgYWlyUG9wb3ZlcjogW1xuICAgICAgICBbJ2NvbG9yJywgWydjb2xvciddXSxcbiAgICAgICAgWydmb250JywgWydib2xkJywgJ3VuZGVybGluZScsICdjbGVhciddXSxcbiAgICAgICAgWydwYXJhJywgWyd1bCcsICdwYXJhZ3JhcGgnXV0sXG4gICAgICAgIFsndGFibGUnLCBbJ3RhYmxlJ11dLFxuICAgICAgICBbJ2luc2VydCcsIFsnbGluaycsICdwaWN0dXJlJ11dXG4gICAgICBdLFxuXG4gICAgICAvLyBzdHlsZSB0YWdcbiAgICAgIHN0eWxlVGFnczogWydwJywgJ2Jsb2NrcXVvdGUnLCAncHJlJywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0J10sXG5cbiAgICAgIC8vIGRlZmF1bHQgZm9udE5hbWVcbiAgICAgIGRlZmF1bHRGb250TmFtZTogJ0hlbHZldGljYSBOZXVlJyxcblxuICAgICAgLy8gZm9udE5hbWVcbiAgICAgIGZvbnROYW1lczogW1xuICAgICAgICAnQXJpYWwnLCAnQXJpYWwgQmxhY2snLCAnQ29taWMgU2FucyBNUycsICdDb3VyaWVyIE5ldycsXG4gICAgICAgICdIZWx2ZXRpY2EgTmV1ZScsICdIZWx2ZXRpY2EnLCAnSW1wYWN0JywgJ0x1Y2lkYSBHcmFuZGUnLFxuICAgICAgICAnVGFob21hJywgJ1RpbWVzIE5ldyBSb21hbicsICdWZXJkYW5hJ1xuICAgICAgXSxcbiAgICAgIGZvbnROYW1lc0lnbm9yZUNoZWNrOiBbXSxcblxuICAgICAgZm9udFNpemVzOiBbJzgnLCAnOScsICcxMCcsICcxMScsICcxMicsICcxNCcsICcxOCcsICcyNCcsICczNiddLFxuXG4gICAgICAvLyBwYWxsZXRlIGNvbG9ycyhuIHggbilcbiAgICAgIGNvbG9yczogW1xuICAgICAgICBbJyMwMDAwMDAnLCAnIzQyNDI0MicsICcjNjM2MzYzJywgJyM5QzlDOTQnLCAnI0NFQzZDRScsICcjRUZFRkVGJywgJyNGN0Y3RjcnLCAnI0ZGRkZGRiddLFxuICAgICAgICBbJyNGRjAwMDAnLCAnI0ZGOUMwMCcsICcjRkZGRjAwJywgJyMwMEZGMDAnLCAnIzAwRkZGRicsICcjMDAwMEZGJywgJyM5QzAwRkYnLCAnI0ZGMDBGRiddLFxuICAgICAgICBbJyNGN0M2Q0UnLCAnI0ZGRTdDRScsICcjRkZFRkM2JywgJyNENkVGRDYnLCAnI0NFREVFNycsICcjQ0VFN0Y3JywgJyNENkQ2RTcnLCAnI0U3RDZERSddLFxuICAgICAgICBbJyNFNzlDOUMnLCAnI0ZGQzY5QycsICcjRkZFNzlDJywgJyNCNUQ2QTUnLCAnI0E1QzZDRScsICcjOUNDNkVGJywgJyNCNUE1RDYnLCAnI0Q2QTVCRCddLFxuICAgICAgICBbJyNFNzYzNjMnLCAnI0Y3QUQ2QicsICcjRkZENjYzJywgJyM5NEJEN0InLCAnIzczQTVBRCcsICcjNkJBRERFJywgJyM4QzdCQzYnLCAnI0M2N0JBNSddLFxuICAgICAgICBbJyNDRTAwMDAnLCAnI0U3OTQzOScsICcjRUZDNjMxJywgJyM2QkE1NEEnLCAnIzRBN0I4QycsICcjMzk4NEM2JywgJyM2MzRBQTUnLCAnI0E1NEE3QiddLFxuICAgICAgICBbJyM5QzAwMDAnLCAnI0I1NjMwOCcsICcjQkQ5NDAwJywgJyMzOTdCMjEnLCAnIzEwNEE1QScsICcjMDg1Mjk0JywgJyMzMTE4NzMnLCAnIzczMTg0MiddLFxuICAgICAgICBbJyM2MzAwMDAnLCAnIzdCMzkwMCcsICcjODQ2MzAwJywgJyMyOTUyMTgnLCAnIzA4MzEzOScsICcjMDAzMTYzJywgJyMyMTEwNEEnLCAnIzRBMTAzMSddXG4gICAgICBdLFxuXG4gICAgICAvLyBsaW5lSGVpZ2h0XG4gICAgICBsaW5lSGVpZ2h0czogWycxLjAnLCAnMS4yJywgJzEuNCcsICcxLjUnLCAnMS42JywgJzEuOCcsICcyLjAnLCAnMy4wJ10sXG5cbiAgICAgIC8vIGluc2VydFRhYmxlIG1heCBzaXplXG4gICAgICBpbnNlcnRUYWJsZU1heFNpemU6IHtcbiAgICAgICAgY29sOiAxMCxcbiAgICAgICAgcm93OiAxMFxuICAgICAgfSxcblxuICAgICAgLy8gaW1hZ2VcbiAgICAgIG1heGltdW1JbWFnZUZpbGVTaXplOiBudWxsLCAvLyBzaXplIGluIGJ5dGVzLCBudWxsID0gbm8gbGltaXRcblxuICAgICAgLy8gY2FsbGJhY2tzXG4gICAgICBvbmluaXQ6IG51bGwsICAgICAgICAgICAgIC8vIGluaXRpYWxpemVcbiAgICAgIG9uZm9jdXM6IG51bGwsICAgICAgICAgICAgLy8gZWRpdGFibGUgaGFzIGZvY3VzXG4gICAgICBvbmJsdXI6IG51bGwsICAgICAgICAgICAgIC8vIGVkaXRhYmxlIG91dCBvZiBmb2N1c1xuICAgICAgb25lbnRlcjogbnVsbCwgICAgICAgICAgICAvLyBlbnRlciBrZXkgcHJlc3NlZFxuICAgICAgb25rZXl1cDogbnVsbCwgICAgICAgICAgICAvLyBrZXl1cFxuICAgICAgb25rZXlkb3duOiBudWxsLCAgICAgICAgICAvLyBrZXlkb3duXG4gICAgICBvbkltYWdlVXBsb2FkOiBudWxsLCAgICAgIC8vIGltYWdlVXBsb2FkXG4gICAgICBvbkltYWdlVXBsb2FkRXJyb3I6IG51bGwsIC8vIGltYWdlVXBsb2FkRXJyb3JcbiAgICAgIG9uTWVkaWFEZWxldGU6IG51bGwsICAgICAgLy8gbWVkaWEgZGVsZXRlXG4gICAgICBvblRvb2xiYXJDbGljazogbnVsbCxcbiAgICAgIG9uc3VibWl0OiBudWxsLFxuXG4gICAgICAvKipcbiAgICAgICAqIG1hbmlwdWxhdGUgbGluayBhZGRyZXNzIHdoZW4gdXNlciBjcmVhdGUgbGlua1xuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHNMaW5rVXJsXG4gICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICAgKi9cbiAgICAgIG9uQ3JlYXRlTGluazogZnVuY3Rpb24gKHNMaW5rVXJsKSB7XG4gICAgICAgIGlmIChzTGlua1VybC5pbmRleE9mKCdAJykgIT09IC0xICYmIHNMaW5rVXJsLmluZGV4T2YoJzonKSA9PT0gLTEpIHtcbiAgICAgICAgICBzTGlua1VybCA9ICAnbWFpbHRvOicgKyBzTGlua1VybDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzTGlua1VybDtcbiAgICAgIH0sXG5cbiAgICAgIGtleU1hcDoge1xuICAgICAgICBwYzoge1xuICAgICAgICAgICdFTlRFUic6ICdpbnNlcnRQYXJhZ3JhcGgnLFxuICAgICAgICAgICdDVFJMK1onOiAndW5kbycsXG4gICAgICAgICAgJ0NUUkwrWSc6ICdyZWRvJyxcbiAgICAgICAgICAnVEFCJzogJ3RhYicsXG4gICAgICAgICAgJ1NISUZUK1RBQic6ICd1bnRhYicsXG4gICAgICAgICAgJ0NUUkwrQic6ICdib2xkJyxcbiAgICAgICAgICAnQ1RSTCtJJzogJ2l0YWxpYycsXG4gICAgICAgICAgJ0NUUkwrVSc6ICd1bmRlcmxpbmUnLFxuICAgICAgICAgICdDVFJMK1NISUZUK1MnOiAnc3RyaWtldGhyb3VnaCcsXG4gICAgICAgICAgJ0NUUkwrQkFDS1NMQVNIJzogJ3JlbW92ZUZvcm1hdCcsXG4gICAgICAgICAgJ0NUUkwrU0hJRlQrTCc6ICdqdXN0aWZ5TGVmdCcsXG4gICAgICAgICAgJ0NUUkwrU0hJRlQrRSc6ICdqdXN0aWZ5Q2VudGVyJyxcbiAgICAgICAgICAnQ1RSTCtTSElGVCtSJzogJ2p1c3RpZnlSaWdodCcsXG4gICAgICAgICAgJ0NUUkwrU0hJRlQrSic6ICdqdXN0aWZ5RnVsbCcsXG4gICAgICAgICAgJ0NUUkwrU0hJRlQrTlVNNyc6ICdpbnNlcnRVbm9yZGVyZWRMaXN0JyxcbiAgICAgICAgICAnQ1RSTCtTSElGVCtOVU04JzogJ2luc2VydE9yZGVyZWRMaXN0JyxcbiAgICAgICAgICAnQ1RSTCtMRUZUQlJBQ0tFVCc6ICdvdXRkZW50JyxcbiAgICAgICAgICAnQ1RSTCtSSUdIVEJSQUNLRVQnOiAnaW5kZW50JyxcbiAgICAgICAgICAnQ1RSTCtFTlRFUic6ICdpbnNlcnRIb3Jpem9udGFsUnVsZSdcbiAgICAgICAgfSxcblxuICAgICAgICBtYWM6IHtcbiAgICAgICAgICAnRU5URVInOiAnaW5zZXJ0UGFyYWdyYXBoJyxcbiAgICAgICAgICAnQ01EK1onOiAndW5kbycsXG4gICAgICAgICAgJ0NNRCtTSElGVCtaJzogJ3JlZG8nLFxuICAgICAgICAgICdUQUInOiAndGFiJyxcbiAgICAgICAgICAnU0hJRlQrVEFCJzogJ3VudGFiJyxcbiAgICAgICAgICAnQ01EK0InOiAnYm9sZCcsXG4gICAgICAgICAgJ0NNRCtJJzogJ2l0YWxpYycsXG4gICAgICAgICAgJ0NNRCtVJzogJ3VuZGVybGluZScsXG4gICAgICAgICAgJ0NNRCtTSElGVCtTJzogJ3N0cmlrZXRocm91Z2gnLFxuICAgICAgICAgICdDTUQrQkFDS1NMQVNIJzogJ3JlbW92ZUZvcm1hdCcsXG4gICAgICAgICAgJ0NNRCtTSElGVCtMJzogJ2p1c3RpZnlMZWZ0JyxcbiAgICAgICAgICAnQ01EK1NISUZUK0UnOiAnanVzdGlmeUNlbnRlcicsXG4gICAgICAgICAgJ0NNRCtTSElGVCtSJzogJ2p1c3RpZnlSaWdodCcsXG4gICAgICAgICAgJ0NNRCtTSElGVCtKJzogJ2p1c3RpZnlGdWxsJyxcbiAgICAgICAgICAnQ01EK1NISUZUK05VTTcnOiAnaW5zZXJ0VW5vcmRlcmVkTGlzdCcsXG4gICAgICAgICAgJ0NNRCtTSElGVCtOVU04JzogJ2luc2VydE9yZGVyZWRMaXN0JyxcbiAgICAgICAgICAnQ01EK0xFRlRCUkFDS0VUJzogJ291dGRlbnQnLFxuICAgICAgICAgICdDTUQrUklHSFRCUkFDS0VUJzogJ2luZGVudCcsXG4gICAgICAgICAgJ0NNRCtFTlRFUic6ICdpbnNlcnRIb3Jpem9udGFsUnVsZScsXG4gICAgICAgICAgJ0NNRCtWJzogJ3Bhc3RlJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIGRlZmF1bHQgbGFuZ3VhZ2U6IGVuLVVTXG4gICAgbGFuZzoge1xuICAgICAgJ2VuLVVTJzoge1xuICAgICAgICBmb250OiB7XG4gICAgICAgICAgYm9sZDogJ0JvbGQnLFxuICAgICAgICAgIGl0YWxpYzogJ0l0YWxpYycsXG4gICAgICAgICAgdW5kZXJsaW5lOiAnVW5kZXJsaW5lJyxcbiAgICAgICAgICBjbGVhcjogJ1JlbW92ZSBGb250IFN0eWxlJyxcbiAgICAgICAgICBoZWlnaHQ6ICdMaW5lIEhlaWdodCcsXG4gICAgICAgICAgbmFtZTogJ0ZvbnQgRmFtaWx5JyxcbiAgICAgICAgICBzdHJpa2V0aHJvdWdoOiAnU3RyaWtldGhyb3VnaCcsXG4gICAgICAgICAgc3Vic2NyaXB0OiAnU3Vic2NyaXB0JyxcbiAgICAgICAgICBzdXBlcnNjcmlwdDogJ1N1cGVyc2NyaXB0JyxcbiAgICAgICAgICBzaXplOiAnRm9udCBTaXplJ1xuICAgICAgICB9LFxuICAgICAgICBpbWFnZToge1xuICAgICAgICAgIGltYWdlOiAnUGljdHVyZScsXG4gICAgICAgICAgaW5zZXJ0OiAnSW5zZXJ0IEltYWdlJyxcbiAgICAgICAgICByZXNpemVGdWxsOiAnUmVzaXplIEZ1bGwnLFxuICAgICAgICAgIHJlc2l6ZUhhbGY6ICdSZXNpemUgSGFsZicsXG4gICAgICAgICAgcmVzaXplUXVhcnRlcjogJ1Jlc2l6ZSBRdWFydGVyJyxcbiAgICAgICAgICBmbG9hdExlZnQ6ICdGbG9hdCBMZWZ0JyxcbiAgICAgICAgICBmbG9hdFJpZ2h0OiAnRmxvYXQgUmlnaHQnLFxuICAgICAgICAgIGZsb2F0Tm9uZTogJ0Zsb2F0IE5vbmUnLFxuICAgICAgICAgIHNoYXBlUm91bmRlZDogJ1NoYXBlOiBSb3VuZGVkJyxcbiAgICAgICAgICBzaGFwZUNpcmNsZTogJ1NoYXBlOiBDaXJjbGUnLFxuICAgICAgICAgIHNoYXBlVGh1bWJuYWlsOiAnU2hhcGU6IFRodW1ibmFpbCcsXG4gICAgICAgICAgc2hhcGVOb25lOiAnU2hhcGU6IE5vbmUnLFxuICAgICAgICAgIGRyYWdJbWFnZUhlcmU6ICdEcmFnIGltYWdlIG9yIHRleHQgaGVyZScsXG4gICAgICAgICAgZHJvcEltYWdlOiAnRHJvcCBpbWFnZSBvciBUZXh0JyxcbiAgICAgICAgICBzZWxlY3RGcm9tRmlsZXM6ICdTZWxlY3QgZnJvbSBmaWxlcycsXG4gICAgICAgICAgbWF4aW11bUZpbGVTaXplOiAnTWF4aW11bSBmaWxlIHNpemUnLFxuICAgICAgICAgIG1heGltdW1GaWxlU2l6ZUVycm9yOiAnTWF4aW11bSBmaWxlIHNpemUgZXhjZWVkZWQuJyxcbiAgICAgICAgICB1cmw6ICdJbWFnZSBVUkwnLFxuICAgICAgICAgIHJlbW92ZTogJ1JlbW92ZSBJbWFnZSdcbiAgICAgICAgfSxcbiAgICAgICAgbGluazoge1xuICAgICAgICAgIGxpbms6ICdMaW5rJyxcbiAgICAgICAgICBpbnNlcnQ6ICdJbnNlcnQgTGluaycsXG4gICAgICAgICAgdW5saW5rOiAnVW5saW5rJyxcbiAgICAgICAgICBlZGl0OiAnRWRpdCcsXG4gICAgICAgICAgdGV4dFRvRGlzcGxheTogJ1RleHQgdG8gZGlzcGxheScsXG4gICAgICAgICAgdXJsOiAnVG8gd2hhdCBVUkwgc2hvdWxkIHRoaXMgbGluayBnbz8nLFxuICAgICAgICAgIG9wZW5Jbk5ld1dpbmRvdzogJ09wZW4gaW4gbmV3IHdpbmRvdydcbiAgICAgICAgfSxcbiAgICAgICAgdGFibGU6IHtcbiAgICAgICAgICB0YWJsZTogJ1RhYmxlJ1xuICAgICAgICB9LFxuICAgICAgICBocjoge1xuICAgICAgICAgIGluc2VydDogJ0luc2VydCBIb3Jpem9udGFsIFJ1bGUnXG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgc3R5bGU6ICdTdHlsZScsXG4gICAgICAgICAgbm9ybWFsOiAnTm9ybWFsJyxcbiAgICAgICAgICBibG9ja3F1b3RlOiAnUXVvdGUnLFxuICAgICAgICAgIHByZTogJ0NvZGUnLFxuICAgICAgICAgIGgxOiAnSGVhZGVyIDEnLFxuICAgICAgICAgIGgyOiAnSGVhZGVyIDInLFxuICAgICAgICAgIGgzOiAnSGVhZGVyIDMnLFxuICAgICAgICAgIGg0OiAnSGVhZGVyIDQnLFxuICAgICAgICAgIGg1OiAnSGVhZGVyIDUnLFxuICAgICAgICAgIGg2OiAnSGVhZGVyIDYnXG4gICAgICAgIH0sXG4gICAgICAgIGxpc3RzOiB7XG4gICAgICAgICAgdW5vcmRlcmVkOiAnVW5vcmRlcmVkIGxpc3QnLFxuICAgICAgICAgIG9yZGVyZWQ6ICdPcmRlcmVkIGxpc3QnXG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBoZWxwOiAnSGVscCcsXG4gICAgICAgICAgZnVsbHNjcmVlbjogJ0Z1bGwgU2NyZWVuJyxcbiAgICAgICAgICBjb2RldmlldzogJ0NvZGUgVmlldydcbiAgICAgICAgfSxcbiAgICAgICAgcGFyYWdyYXBoOiB7XG4gICAgICAgICAgcGFyYWdyYXBoOiAnUGFyYWdyYXBoJyxcbiAgICAgICAgICBvdXRkZW50OiAnT3V0ZGVudCcsXG4gICAgICAgICAgaW5kZW50OiAnSW5kZW50JyxcbiAgICAgICAgICBsZWZ0OiAnQWxpZ24gbGVmdCcsXG4gICAgICAgICAgY2VudGVyOiAnQWxpZ24gY2VudGVyJyxcbiAgICAgICAgICByaWdodDogJ0FsaWduIHJpZ2h0JyxcbiAgICAgICAgICBqdXN0aWZ5OiAnSnVzdGlmeSBmdWxsJ1xuICAgICAgICB9LFxuICAgICAgICBjb2xvcjoge1xuICAgICAgICAgIHJlY2VudDogJ1JlY2VudCBDb2xvcicsXG4gICAgICAgICAgbW9yZTogJ01vcmUgQ29sb3InLFxuICAgICAgICAgIGJhY2tncm91bmQ6ICdCYWNrZ3JvdW5kIENvbG9yJyxcbiAgICAgICAgICBmb3JlZ3JvdW5kOiAnRm9yZWdyb3VuZCBDb2xvcicsXG4gICAgICAgICAgdHJhbnNwYXJlbnQ6ICdUcmFuc3BhcmVudCcsXG4gICAgICAgICAgc2V0VHJhbnNwYXJlbnQ6ICdTZXQgdHJhbnNwYXJlbnQnLFxuICAgICAgICAgIHJlc2V0OiAnUmVzZXQnLFxuICAgICAgICAgIHJlc2V0VG9EZWZhdWx0OiAnUmVzZXQgdG8gZGVmYXVsdCdcbiAgICAgICAgfSxcbiAgICAgICAgc2hvcnRjdXQ6IHtcbiAgICAgICAgICBzaG9ydGN1dHM6ICdLZXlib2FyZCBzaG9ydGN1dHMnLFxuICAgICAgICAgIGNsb3NlOiAnQ2xvc2UnLFxuICAgICAgICAgIHRleHRGb3JtYXR0aW5nOiAnVGV4dCBmb3JtYXR0aW5nJyxcbiAgICAgICAgICBhY3Rpb246ICdBY3Rpb24nLFxuICAgICAgICAgIHBhcmFncmFwaEZvcm1hdHRpbmc6ICdQYXJhZ3JhcGggZm9ybWF0dGluZycsXG4gICAgICAgICAgZG9jdW1lbnRTdHlsZTogJ0RvY3VtZW50IFN0eWxlJyxcbiAgICAgICAgICBleHRyYUtleXM6ICdFeHRyYSBrZXlzJ1xuICAgICAgICB9LFxuICAgICAgICBoaXN0b3J5OiB7XG4gICAgICAgICAgdW5kbzogJ1VuZG8nLFxuICAgICAgICAgIHJlZG86ICdSZWRvJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgY29yZS5hc3luY1xuICAgKlxuICAgKiBBc3luYyBmdW5jdGlvbnMgd2hpY2ggcmV0dXJucyBgUHJvbWlzZWBcbiAgICpcbiAgICogQHNpbmdsZXRvblxuICAgKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIGFzeW5jXG4gICAqL1xuICB2YXIgYXN5bmMgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcmVhZEZpbGVBc0RhdGFVUkxcbiAgICAgKlxuICAgICAqIHJlYWQgY29udGVudHMgb2YgZmlsZSBhcyByZXByZXNlbnRpbmcgVVJMXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ZpbGV9IGZpbGVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZW46IHNEYXRhVXJsXG4gICAgICovXG4gICAgdmFyIHJlYWRGaWxlQXNEYXRhVVJMID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgIHJldHVybiAkLkRlZmVycmVkKGZ1bmN0aW9uIChkZWZlcnJlZCkge1xuICAgICAgICAkLmV4dGVuZChuZXcgRmlsZVJlYWRlcigpLCB7XG4gICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHNEYXRhVVJMID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShzRGF0YVVSTCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QodGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgICAgfSkucHJvbWlzZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGNyZWF0ZUltYWdlXG4gICAgICpcbiAgICAgKiBjcmVhdGUgYDxpbWFnZT5gIGZyb20gdXJsIHN0cmluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNVcmxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWVcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZW46ICRpbWFnZVxuICAgICAqL1xuICAgIHZhciBjcmVhdGVJbWFnZSA9IGZ1bmN0aW9uIChzVXJsLCBmaWxlbmFtZSkge1xuICAgICAgcmV0dXJuICQuRGVmZXJyZWQoZnVuY3Rpb24gKGRlZmVycmVkKSB7XG4gICAgICAgIHZhciAkaW1nID0gJCgnPGltZz4nKTtcblxuICAgICAgICAkaW1nLm9uZSgnbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkaW1nLm9mZignZXJyb3IgYWJvcnQnKTtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCRpbWcpO1xuICAgICAgICB9KS5vbmUoJ2Vycm9yIGFib3J0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRpbWcub2ZmKCdsb2FkJykuZGV0YWNoKCk7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCRpbWcpO1xuICAgICAgICB9KS5jc3Moe1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5hdHRyKHtcbiAgICAgICAgICAnc3JjJzogc1VybCxcbiAgICAgICAgICAnZGF0YS1maWxlbmFtZSc6IGZpbGVuYW1lXG4gICAgICAgIH0pO1xuICAgICAgfSkucHJvbWlzZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVhZEZpbGVBc0RhdGFVUkw6IHJlYWRGaWxlQXNEYXRhVVJMLFxuICAgICAgY3JlYXRlSW1hZ2U6IGNyZWF0ZUltYWdlXG4gICAgfTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogQGNsYXNzIGNvcmUua2V5XG4gICAqXG4gICAqIE9iamVjdCBmb3Iga2V5Y29kZXMuXG4gICAqXG4gICAqIEBzaW5nbGV0b25cbiAgICogQGFsdGVybmF0ZUNsYXNzTmFtZSBrZXlcbiAgICovXG4gIHZhciBrZXkgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBrZXlNYXAgPSB7XG4gICAgICAnQkFDS1NQQUNFJzogOCxcbiAgICAgICdUQUInOiA5LFxuICAgICAgJ0VOVEVSJzogMTMsXG4gICAgICAnU1BBQ0UnOiAzMixcblxuICAgICAgLy8gQXJyb3dcbiAgICAgICdMRUZUJzogMzcsXG4gICAgICAnVVAnOiAzOCxcbiAgICAgICdSSUdIVCc6IDM5LFxuICAgICAgJ0RPV04nOiA0MCxcblxuICAgICAgLy8gTnVtYmVyOiAwLTlcbiAgICAgICdOVU0wJzogNDgsXG4gICAgICAnTlVNMSc6IDQ5LFxuICAgICAgJ05VTTInOiA1MCxcbiAgICAgICdOVU0zJzogNTEsXG4gICAgICAnTlVNNCc6IDUyLFxuICAgICAgJ05VTTUnOiA1MyxcbiAgICAgICdOVU02JzogNTQsXG4gICAgICAnTlVNNyc6IDU1LFxuICAgICAgJ05VTTgnOiA1NixcblxuICAgICAgLy8gQWxwaGFiZXQ6IGEtelxuICAgICAgJ0InOiA2NixcbiAgICAgICdFJzogNjksXG4gICAgICAnSSc6IDczLFxuICAgICAgJ0onOiA3NCxcbiAgICAgICdLJzogNzUsXG4gICAgICAnTCc6IDc2LFxuICAgICAgJ1InOiA4MixcbiAgICAgICdTJzogODMsXG4gICAgICAnVSc6IDg1LFxuICAgICAgJ1YnOiA4NixcbiAgICAgICdZJzogODksXG4gICAgICAnWic6IDkwLFxuXG4gICAgICAnU0xBU0gnOiAxOTEsXG4gICAgICAnTEVGVEJSQUNLRVQnOiAyMTksXG4gICAgICAnQkFDS1NMQVNIJzogMjIwLFxuICAgICAgJ1JJR0hUQlJBQ0tFVCc6IDIyMVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBAbWV0aG9kIGlzRWRpdFxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBrZXlDb2RlXG4gICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBpc0VkaXQ6IGZ1bmN0aW9uIChrZXlDb2RlKSB7XG4gICAgICAgIHJldHVybiBsaXN0LmNvbnRhaW5zKFtcbiAgICAgICAgICBrZXlNYXAuQkFDS1NQQUNFLFxuICAgICAgICAgIGtleU1hcC5UQUIsXG4gICAgICAgICAga2V5TWFwLkVOVEVSLFxuICAgICAgICAgIGtleU1hcC5TUEFDZVxuICAgICAgICBdLCBrZXlDb2RlKTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEBtZXRob2QgaXNNb3ZlXG4gICAgICAgKlxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGtleUNvZGVcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIGlzTW92ZTogZnVuY3Rpb24gKGtleUNvZGUpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QuY29udGFpbnMoW1xuICAgICAgICAgIGtleU1hcC5MRUZULFxuICAgICAgICAgIGtleU1hcC5VUCxcbiAgICAgICAgICBrZXlNYXAuUklHSFQsXG4gICAgICAgICAga2V5TWFwLkRPV05cbiAgICAgICAgXSwga2V5Q29kZSk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAcHJvcGVydHkge09iamVjdH0gbmFtZUZyb21Db2RlXG4gICAgICAgKiBAcHJvcGVydHkge1N0cmluZ30gbmFtZUZyb21Db2RlLjggXCJCQUNLU1BBQ0VcIlxuICAgICAgICovXG4gICAgICBuYW1lRnJvbUNvZGU6IGZ1bmMuaW52ZXJ0T2JqZWN0KGtleU1hcCksXG4gICAgICBjb2RlOiBrZXlNYXBcbiAgICB9O1xuICB9KSgpO1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgZWRpdGluZy5IaXN0b3J5XG4gICAqXG4gICAqIEVkaXRvciBIaXN0b3J5XG4gICAqXG4gICAqL1xuICB2YXIgSGlzdG9yeSA9IGZ1bmN0aW9uICgkZWRpdGFibGUpIHtcbiAgICB2YXIgc3RhY2sgPSBbXSwgc3RhY2tPZmZzZXQgPSAtMTtcbiAgICB2YXIgZWRpdGFibGUgPSAkZWRpdGFibGVbMF07XG5cbiAgICB2YXIgbWFrZVNuYXBzaG90ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJuZyA9IHJhbmdlLmNyZWF0ZSgpO1xuICAgICAgdmFyIGVtcHR5Qm9va21hcmsgPSB7czoge3BhdGg6IFtdLCBvZmZzZXQ6IDB9LCBlOiB7cGF0aDogW10sIG9mZnNldDogMH19O1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb250ZW50czogJGVkaXRhYmxlLmh0bWwoKSxcbiAgICAgICAgYm9va21hcms6IChybmcgPyBybmcuYm9va21hcmsoZWRpdGFibGUpIDogZW1wdHlCb29rbWFyaylcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBhcHBseVNuYXBzaG90ID0gZnVuY3Rpb24gKHNuYXBzaG90KSB7XG4gICAgICBpZiAoc25hcHNob3QuY29udGVudHMgIT09IG51bGwpIHtcbiAgICAgICAgJGVkaXRhYmxlLmh0bWwoc25hcHNob3QuY29udGVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKHNuYXBzaG90LmJvb2ttYXJrICE9PSBudWxsKSB7XG4gICAgICAgIHJhbmdlLmNyZWF0ZUZyb21Cb29rbWFyayhlZGl0YWJsZSwgc25hcHNob3QuYm9va21hcmspLnNlbGVjdCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiB1bmRvXG4gICAgICovXG4gICAgdGhpcy51bmRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gQ3JlYXRlIHNuYXAgc2hvdCBpZiBub3QgeWV0IHJlY29yZGVkXG4gICAgICBpZiAoJGVkaXRhYmxlLmh0bWwoKSAhPT0gc3RhY2tbc3RhY2tPZmZzZXRdLmNvbnRlbnRzKSB7XG4gICAgICAgIHRoaXMucmVjb3JkVW5kbygpO1xuICAgICAgfVxuXG4gICAgICBpZiAoMCA8IHN0YWNrT2Zmc2V0KSB7XG4gICAgICAgIHN0YWNrT2Zmc2V0LS07XG4gICAgICAgIGFwcGx5U25hcHNob3Qoc3RhY2tbc3RhY2tPZmZzZXRdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmVkb1xuICAgICAqL1xuICAgIHRoaXMucmVkbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzdGFjay5sZW5ndGggLSAxID4gc3RhY2tPZmZzZXQpIHtcbiAgICAgICAgc3RhY2tPZmZzZXQrKztcbiAgICAgICAgYXBwbHlTbmFwc2hvdChzdGFja1tzdGFja09mZnNldF0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZWNvcmRlZCB1bmRvXG4gICAgICovXG4gICAgdGhpcy5yZWNvcmRVbmRvID0gZnVuY3Rpb24gKCkge1xuICAgICAgc3RhY2tPZmZzZXQrKztcblxuICAgICAgLy8gV2FzaCBvdXQgc3RhY2sgYWZ0ZXIgc3RhY2tPZmZzZXRcbiAgICAgIGlmIChzdGFjay5sZW5ndGggPiBzdGFja09mZnNldCkge1xuICAgICAgICBzdGFjayA9IHN0YWNrLnNsaWNlKDAsIHN0YWNrT2Zmc2V0KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIG5ldyBzbmFwc2hvdCBhbmQgcHVzaCBpdCB0byB0aGUgZW5kXG4gICAgICBzdGFjay5wdXNoKG1ha2VTbmFwc2hvdCgpKTtcbiAgICB9O1xuXG4gICAgLy8gQ3JlYXRlIGZpcnN0IHVuZG8gc3RhY2tcbiAgICB0aGlzLnJlY29yZFVuZG8oKTtcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzIGVkaXRpbmcuU3R5bGVcbiAgICpcbiAgICogU3R5bGVcbiAgICpcbiAgICovXG4gIHZhciBTdHlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGpRdWVyeUNTU1xuICAgICAqXG4gICAgICogW3dvcmthcm91bmRdIGZvciBvbGQgalF1ZXJ5XG4gICAgICogcGFzc2luZyBhbiBhcnJheSBvZiBzdHlsZSBwcm9wZXJ0aWVzIHRvIC5jc3MoKVxuICAgICAqIHdpbGwgcmVzdWx0IGluIGFuIG9iamVjdCBvZiBwcm9wZXJ0eS12YWx1ZSBwYWlycy5cbiAgICAgKiAoY29tcGFiaWxpdHkgd2l0aCB2ZXJzaW9uIDwgMS45KVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gIHtqUXVlcnl9ICRvYmpcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gcHJvcGVydHlOYW1lcyAtIEFuIGFycmF5IG9mIG9uZSBvciBtb3JlIENTUyBwcm9wZXJ0aWVzLlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKi9cbiAgICB2YXIgalF1ZXJ5Q1NTID0gZnVuY3Rpb24gKCRvYmosIHByb3BlcnR5TmFtZXMpIHtcbiAgICAgIGlmIChhZ2VudC5qcXVlcnlWZXJzaW9uIDwgMS45KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgJC5lYWNoKHByb3BlcnR5TmFtZXMsIGZ1bmN0aW9uIChpZHgsIHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgIHJlc3VsdFtwcm9wZXJ0eU5hbWVdID0gJG9iai5jc3MocHJvcGVydHlOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gJG9iai5jc3MuY2FsbCgkb2JqLCBwcm9wZXJ0eU5hbWVzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBzdHlsZSBvYmplY3QgZnJvbSBub2RlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJG5vZGVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICovXG4gICAgdGhpcy5mcm9tTm9kZSA9IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyIHByb3BlcnRpZXMgPSBbJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQtc2l6ZScsICd0ZXh0LWFsaWduJywgJ2xpc3Qtc3R5bGUtdHlwZScsICdsaW5lLWhlaWdodCddO1xuICAgICAgdmFyIHN0eWxlSW5mbyA9IGpRdWVyeUNTUygkbm9kZSwgcHJvcGVydGllcykgfHwge307XG4gICAgICBzdHlsZUluZm9bJ2ZvbnQtc2l6ZSddID0gcGFyc2VJbnQoc3R5bGVJbmZvWydmb250LXNpemUnXSwgMTApO1xuICAgICAgcmV0dXJuIHN0eWxlSW5mbztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcGFyYWdyYXBoIGxldmVsIHN0eWxlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlSW5mb1xuICAgICAqL1xuICAgIHRoaXMuc3R5bGVQYXJhID0gZnVuY3Rpb24gKHJuZywgc3R5bGVJbmZvKSB7XG4gICAgICAkLmVhY2gocm5nLm5vZGVzKGRvbS5pc1BhcmEsIHtcbiAgICAgICAgaW5jbHVkZUFuY2VzdG9yOiB0cnVlXG4gICAgICB9KSwgZnVuY3Rpb24gKGlkeCwgcGFyYSkge1xuICAgICAgICAkKHBhcmEpLmNzcyhzdHlsZUluZm8pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBhbmQgcmV0dXJucyBzdHlsZU5vZGVzIG9uIHJhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBvcHRpb25zIGZvciBzdHlsZU5vZGVzXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLm5vZGVOYW1lXSAtIGRlZmF1bHQ6IGBTUEFOYFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZXhwYW5kQ2xvc2VzdFNpYmxpbmddIC0gZGVmYXVsdDogYGZhbHNlYFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMub25seVBhcnRpYWxDb250YWluc10gLSBkZWZhdWx0OiBgZmFsc2VgXG4gICAgICogQHJldHVybiB7Tm9kZVtdfVxuICAgICAqL1xuICAgIHRoaXMuc3R5bGVOb2RlcyA9IGZ1bmN0aW9uIChybmcsIG9wdGlvbnMpIHtcbiAgICAgIHJuZyA9IHJuZy5zcGxpdFRleHQoKTtcblxuICAgICAgdmFyIG5vZGVOYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLm5vZGVOYW1lIHx8ICdTUEFOJztcbiAgICAgIHZhciBleHBhbmRDbG9zZXN0U2libGluZyA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5leHBhbmRDbG9zZXN0U2libGluZyk7XG4gICAgICB2YXIgb25seVBhcnRpYWxDb250YWlucyA9ICEhKG9wdGlvbnMgJiYgb3B0aW9ucy5vbmx5UGFydGlhbENvbnRhaW5zKTtcblxuICAgICAgaWYgKHJuZy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICAgIHJldHVybiBbcm5nLmluc2VydE5vZGUoZG9tLmNyZWF0ZShub2RlTmFtZSkpXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZWQgPSBkb20ubWFrZVByZWRCeU5vZGVOYW1lKG5vZGVOYW1lKTtcbiAgICAgIHZhciBub2RlcyA9IHJuZy5ub2Rlcyhkb20uaXNUZXh0LCB7XG4gICAgICAgIGZ1bGx5Q29udGFpbnM6IHRydWVcbiAgICAgIH0pLm1hcChmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICByZXR1cm4gZG9tLnNpbmdsZUNoaWxkQW5jZXN0b3IodGV4dCwgcHJlZCkgfHwgZG9tLndyYXAodGV4dCwgbm9kZU5hbWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChleHBhbmRDbG9zZXN0U2libGluZykge1xuICAgICAgICBpZiAob25seVBhcnRpYWxDb250YWlucykge1xuICAgICAgICAgIHZhciBub2Rlc0luUmFuZ2UgPSBybmcubm9kZXMoKTtcbiAgICAgICAgICAvLyBjb21wb3NlIHdpdGggcGFydGlhbCBjb250YWlucyBwcmVkaWNhdGlvblxuICAgICAgICAgIHByZWQgPSBmdW5jLmFuZChwcmVkLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3QuY29udGFpbnMobm9kZXNJblJhbmdlLCBub2RlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICB2YXIgc2libGluZ3MgPSBkb20ud2l0aENsb3Nlc3RTaWJsaW5ncyhub2RlLCBwcmVkKTtcbiAgICAgICAgICB2YXIgaGVhZCA9IGxpc3QuaGVhZChzaWJsaW5ncyk7XG4gICAgICAgICAgdmFyIHRhaWxzID0gbGlzdC50YWlsKHNpYmxpbmdzKTtcbiAgICAgICAgICAkLmVhY2godGFpbHMsIGZ1bmN0aW9uIChpZHgsIGVsZW0pIHtcbiAgICAgICAgICAgIGRvbS5hcHBlbmRDaGlsZE5vZGVzKGhlYWQsIGVsZW0uY2hpbGROb2Rlcyk7XG4gICAgICAgICAgICBkb20ucmVtb3ZlKGVsZW0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBsaXN0LmhlYWQoc2libGluZ3MpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBub2RlcztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZ2V0IGN1cnJlbnQgc3R5bGUgb24gY3Vyc29yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAgICogQHJldHVybiB7T2JqZWN0fSAtIG9iamVjdCBjb250YWlucyBzdHlsZSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIHRoaXMuY3VycmVudCA9IGZ1bmN0aW9uIChybmcpIHtcbiAgICAgIHZhciAkY29udCA9ICQoZG9tLmlzVGV4dChybmcuc2MpID8gcm5nLnNjLnBhcmVudE5vZGUgOiBybmcuc2MpO1xuICAgICAgdmFyIHN0eWxlSW5mbyA9IHRoaXMuZnJvbU5vZGUoJGNvbnQpO1xuXG4gICAgICAvLyBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSBmb3IgdG9nZ2xlIHN0YXRlXG4gICAgICBzdHlsZUluZm9bJ2ZvbnQtYm9sZCddID0gZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoJ2JvbGQnKSA/ICdib2xkJyA6ICdub3JtYWwnO1xuICAgICAgc3R5bGVJbmZvWydmb250LWl0YWxpYyddID0gZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoJ2l0YWxpYycpID8gJ2l0YWxpYycgOiAnbm9ybWFsJztcbiAgICAgIHN0eWxlSW5mb1snZm9udC11bmRlcmxpbmUnXSA9IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKCd1bmRlcmxpbmUnKSA/ICd1bmRlcmxpbmUnIDogJ25vcm1hbCc7XG4gICAgICBzdHlsZUluZm9bJ2ZvbnQtc3RyaWtldGhyb3VnaCddID0gZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoJ3N0cmlrZVRocm91Z2gnKSA/ICdzdHJpa2V0aHJvdWdoJyA6ICdub3JtYWwnO1xuICAgICAgc3R5bGVJbmZvWydmb250LXN1cGVyc2NyaXB0J10gPSBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSgnc3VwZXJzY3JpcHQnKSA/ICdzdXBlcnNjcmlwdCcgOiAnbm9ybWFsJztcbiAgICAgIHN0eWxlSW5mb1snZm9udC1zdWJzY3JpcHQnXSA9IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKCdzdWJzY3JpcHQnKSA/ICdzdWJzY3JpcHQnIDogJ25vcm1hbCc7XG5cbiAgICAgIC8vIGxpc3Qtc3R5bGUtdHlwZSB0byBsaXN0LXN0eWxlKHVub3JkZXJlZCwgb3JkZXJlZClcbiAgICAgIGlmICghcm5nLmlzT25MaXN0KCkpIHtcbiAgICAgICAgc3R5bGVJbmZvWydsaXN0LXN0eWxlJ10gPSAnbm9uZSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYU9yZGVyZWRUeXBlID0gWydjaXJjbGUnLCAnZGlzYycsICdkaXNjLWxlYWRpbmctemVybycsICdzcXVhcmUnXTtcbiAgICAgICAgdmFyIGlzVW5vcmRlcmVkID0gJC5pbkFycmF5KHN0eWxlSW5mb1snbGlzdC1zdHlsZS10eXBlJ10sIGFPcmRlcmVkVHlwZSkgPiAtMTtcbiAgICAgICAgc3R5bGVJbmZvWydsaXN0LXN0eWxlJ10gPSBpc1Vub3JkZXJlZCA/ICd1bm9yZGVyZWQnIDogJ29yZGVyZWQnO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFyYSA9IGRvbS5hbmNlc3Rvcihybmcuc2MsIGRvbS5pc1BhcmEpO1xuICAgICAgaWYgKHBhcmEgJiYgcGFyYS5zdHlsZVsnbGluZS1oZWlnaHQnXSkge1xuICAgICAgICBzdHlsZUluZm9bJ2xpbmUtaGVpZ2h0J10gPSBwYXJhLnN0eWxlLmxpbmVIZWlnaHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbGluZUhlaWdodCA9IHBhcnNlSW50KHN0eWxlSW5mb1snbGluZS1oZWlnaHQnXSwgMTApIC8gcGFyc2VJbnQoc3R5bGVJbmZvWydmb250LXNpemUnXSwgMTApO1xuICAgICAgICBzdHlsZUluZm9bJ2xpbmUtaGVpZ2h0J10gPSBsaW5lSGVpZ2h0LnRvRml4ZWQoMSk7XG4gICAgICB9XG5cbiAgICAgIHN0eWxlSW5mby5hbmNob3IgPSBybmcuaXNPbkFuY2hvcigpICYmIGRvbS5hbmNlc3Rvcihybmcuc2MsIGRvbS5pc0FuY2hvcik7XG4gICAgICBzdHlsZUluZm8uYW5jZXN0b3JzID0gZG9tLmxpc3RBbmNlc3Rvcihybmcuc2MsIGRvbS5pc0VkaXRhYmxlKTtcbiAgICAgIHN0eWxlSW5mby5yYW5nZSA9IHJuZztcblxuICAgICAgcmV0dXJuIHN0eWxlSW5mbztcbiAgICB9O1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBjbGFzcyBlZGl0aW5nLkJ1bGxldFxuICAgKlxuICAgKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIEJ1bGxldFxuICAgKi9cbiAgdmFyIEJ1bGxldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGluc2VydE9yZGVyZWRMaXN0XG4gICAgICpcbiAgICAgKiB0b2dnbGUgb3JkZXJlZCBsaXN0XG4gICAgICpcbiAgICAgKiBAdHlwZSBjb21tYW5kXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRPcmRlcmVkTGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMudG9nZ2xlTGlzdCgnT0wnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBpbnNlcnRVbm9yZGVyZWRMaXN0XG4gICAgICpcbiAgICAgKiB0b2dnbGUgdW5vcmRlcmVkIGxpc3RcbiAgICAgKlxuICAgICAqIEB0eXBlIGNvbW1hbmRcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydFVub3JkZXJlZExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnRvZ2dsZUxpc3QoJ1VMJyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgaW5kZW50XG4gICAgICpcbiAgICAgKiBpbmRlbnRcbiAgICAgKlxuICAgICAqIEB0eXBlIGNvbW1hbmRcbiAgICAgKi9cbiAgICB0aGlzLmluZGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBybmcgPSByYW5nZS5jcmVhdGUoKS53cmFwQm9keUlubGluZVdpdGhQYXJhKCk7XG5cbiAgICAgIHZhciBwYXJhcyA9IHJuZy5ub2Rlcyhkb20uaXNQYXJhLCB7IGluY2x1ZGVBbmNlc3RvcjogdHJ1ZSB9KTtcbiAgICAgIHZhciBjbHVzdGVyZWRzID0gbGlzdC5jbHVzdGVyQnkocGFyYXMsIGZ1bmMucGVxMigncGFyZW50Tm9kZScpKTtcblxuICAgICAgJC5lYWNoKGNsdXN0ZXJlZHMsIGZ1bmN0aW9uIChpZHgsIHBhcmFzKSB7XG4gICAgICAgIHZhciBoZWFkID0gbGlzdC5oZWFkKHBhcmFzKTtcbiAgICAgICAgaWYgKGRvbS5pc0xpKGhlYWQpKSB7XG4gICAgICAgICAgc2VsZi53cmFwTGlzdChwYXJhcywgaGVhZC5wYXJlbnROb2RlLm5vZGVOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkLmVhY2gocGFyYXMsIGZ1bmN0aW9uIChpZHgsIHBhcmEpIHtcbiAgICAgICAgICAgICQocGFyYSkuY3NzKCdtYXJnaW5MZWZ0JywgZnVuY3Rpb24gKGlkeCwgdmFsKSB7XG4gICAgICAgICAgICAgIHJldHVybiAocGFyc2VJbnQodmFsLCAxMCkgfHwgMCkgKyAyNTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcm5nLnNlbGVjdCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIG91dGRlbnRcbiAgICAgKlxuICAgICAqIG91dGRlbnRcbiAgICAgKlxuICAgICAqIEB0eXBlIGNvbW1hbmRcbiAgICAgKi9cbiAgICB0aGlzLm91dGRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcm5nID0gcmFuZ2UuY3JlYXRlKCkud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpO1xuXG4gICAgICB2YXIgcGFyYXMgPSBybmcubm9kZXMoZG9tLmlzUGFyYSwgeyBpbmNsdWRlQW5jZXN0b3I6IHRydWUgfSk7XG4gICAgICB2YXIgY2x1c3RlcmVkcyA9IGxpc3QuY2x1c3RlckJ5KHBhcmFzLCBmdW5jLnBlcTIoJ3BhcmVudE5vZGUnKSk7XG5cbiAgICAgICQuZWFjaChjbHVzdGVyZWRzLCBmdW5jdGlvbiAoaWR4LCBwYXJhcykge1xuICAgICAgICB2YXIgaGVhZCA9IGxpc3QuaGVhZChwYXJhcyk7XG4gICAgICAgIGlmIChkb20uaXNMaShoZWFkKSkge1xuICAgICAgICAgIHNlbGYucmVsZWFzZUxpc3QoW3BhcmFzXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJC5lYWNoKHBhcmFzLCBmdW5jdGlvbiAoaWR4LCBwYXJhKSB7XG4gICAgICAgICAgICAkKHBhcmEpLmNzcygnbWFyZ2luTGVmdCcsIGZ1bmN0aW9uIChpZHgsIHZhbCkge1xuICAgICAgICAgICAgICB2YWwgPSAocGFyc2VJbnQodmFsLCAxMCkgfHwgMCk7XG4gICAgICAgICAgICAgIHJldHVybiB2YWwgPiAyNSA/IHZhbCAtIDI1IDogJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJuZy5zZWxlY3QoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB0b2dnbGVMaXN0XG4gICAgICpcbiAgICAgKiB0b2dnbGUgbGlzdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGxpc3ROYW1lIC0gT0wgb3IgVUxcbiAgICAgKi9cbiAgICB0aGlzLnRvZ2dsZUxpc3QgPSBmdW5jdGlvbiAobGlzdE5hbWUpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBybmcgPSByYW5nZS5jcmVhdGUoKS53cmFwQm9keUlubGluZVdpdGhQYXJhKCk7XG5cbiAgICAgIHZhciBwYXJhcyA9IHJuZy5ub2Rlcyhkb20uaXNQYXJhLCB7IGluY2x1ZGVBbmNlc3RvcjogdHJ1ZSB9KTtcbiAgICAgIHZhciBib29rbWFyayA9IHJuZy5wYXJhQm9va21hcmsocGFyYXMpO1xuICAgICAgdmFyIGNsdXN0ZXJlZHMgPSBsaXN0LmNsdXN0ZXJCeShwYXJhcywgZnVuYy5wZXEyKCdwYXJlbnROb2RlJykpO1xuXG4gICAgICAvLyBwYXJhZ3JhcGggdG8gbGlzdFxuICAgICAgaWYgKGxpc3QuZmluZChwYXJhcywgZG9tLmlzUHVyZVBhcmEpKSB7XG4gICAgICAgIHZhciB3cmFwcGVkUGFyYXMgPSBbXTtcbiAgICAgICAgJC5lYWNoKGNsdXN0ZXJlZHMsIGZ1bmN0aW9uIChpZHgsIHBhcmFzKSB7XG4gICAgICAgICAgd3JhcHBlZFBhcmFzID0gd3JhcHBlZFBhcmFzLmNvbmNhdChzZWxmLndyYXBMaXN0KHBhcmFzLCBsaXN0TmFtZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcGFyYXMgPSB3cmFwcGVkUGFyYXM7XG4gICAgICAvLyBsaXN0IHRvIHBhcmFncmFwaCBvciBjaGFuZ2UgbGlzdCBzdHlsZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGRpZmZMaXN0cyA9IHJuZy5ub2Rlcyhkb20uaXNMaXN0LCB7XG4gICAgICAgICAgaW5jbHVkZUFuY2VzdG9yOiB0cnVlXG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAobGlzdE5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gISQubm9kZU5hbWUobGlzdE5vZGUsIGxpc3ROYW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGRpZmZMaXN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAkLmVhY2goZGlmZkxpc3RzLCBmdW5jdGlvbiAoaWR4LCBsaXN0Tm9kZSkge1xuICAgICAgICAgICAgZG9tLnJlcGxhY2UobGlzdE5vZGUsIGxpc3ROYW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJhcyA9IHRoaXMucmVsZWFzZUxpc3QoY2x1c3RlcmVkcywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmFuZ2UuY3JlYXRlRnJvbVBhcmFCb29rbWFyayhib29rbWFyaywgcGFyYXMpLnNlbGVjdCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHdyYXBMaXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGVbXX0gcGFyYXNcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbGlzdE5hbWVcbiAgICAgKiBAcmV0dXJuIHtOb2RlW119XG4gICAgICovXG4gICAgdGhpcy53cmFwTGlzdCA9IGZ1bmN0aW9uIChwYXJhcywgbGlzdE5hbWUpIHtcbiAgICAgIHZhciBoZWFkID0gbGlzdC5oZWFkKHBhcmFzKTtcbiAgICAgIHZhciBsYXN0ID0gbGlzdC5sYXN0KHBhcmFzKTtcblxuICAgICAgdmFyIHByZXZMaXN0ID0gZG9tLmlzTGlzdChoZWFkLnByZXZpb3VzU2libGluZykgJiYgaGVhZC5wcmV2aW91c1NpYmxpbmc7XG4gICAgICB2YXIgbmV4dExpc3QgPSBkb20uaXNMaXN0KGxhc3QubmV4dFNpYmxpbmcpICYmIGxhc3QubmV4dFNpYmxpbmc7XG5cbiAgICAgIHZhciBsaXN0Tm9kZSA9IHByZXZMaXN0IHx8IGRvbS5pbnNlcnRBZnRlcihkb20uY3JlYXRlKGxpc3ROYW1lIHx8ICdVTCcpLCBsYXN0KTtcblxuICAgICAgLy8gUCB0byBMSVxuICAgICAgcGFyYXMgPSBwYXJhcy5tYXAoZnVuY3Rpb24gKHBhcmEpIHtcbiAgICAgICAgcmV0dXJuIGRvbS5pc1B1cmVQYXJhKHBhcmEpID8gZG9tLnJlcGxhY2UocGFyYSwgJ0xJJykgOiBwYXJhO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGFwcGVuZCB0byBsaXN0KDx1bD4sIDxvbD4pXG4gICAgICBkb20uYXBwZW5kQ2hpbGROb2RlcyhsaXN0Tm9kZSwgcGFyYXMpO1xuXG4gICAgICBpZiAobmV4dExpc3QpIHtcbiAgICAgICAgZG9tLmFwcGVuZENoaWxkTm9kZXMobGlzdE5vZGUsIGxpc3QuZnJvbShuZXh0TGlzdC5jaGlsZE5vZGVzKSk7XG4gICAgICAgIGRvbS5yZW1vdmUobmV4dExpc3QpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyYXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcmVsZWFzZUxpc3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXlbXX0gY2x1c3RlcmVkc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNFc2NhcHNlVG9Cb2R5XG4gICAgICogQHJldHVybiB7Tm9kZVtdfVxuICAgICAqL1xuICAgIHRoaXMucmVsZWFzZUxpc3QgPSBmdW5jdGlvbiAoY2x1c3RlcmVkcywgaXNFc2NhcHNlVG9Cb2R5KSB7XG4gICAgICB2YXIgcmVsZWFzZWRQYXJhcyA9IFtdO1xuXG4gICAgICAkLmVhY2goY2x1c3RlcmVkcywgZnVuY3Rpb24gKGlkeCwgcGFyYXMpIHtcbiAgICAgICAgdmFyIGhlYWQgPSBsaXN0LmhlYWQocGFyYXMpO1xuICAgICAgICB2YXIgbGFzdCA9IGxpc3QubGFzdChwYXJhcyk7XG5cbiAgICAgICAgdmFyIGhlYWRMaXN0ID0gaXNFc2NhcHNlVG9Cb2R5ID8gZG9tLmxhc3RBbmNlc3RvcihoZWFkLCBkb20uaXNMaXN0KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQucGFyZW50Tm9kZTtcbiAgICAgICAgdmFyIGxhc3RMaXN0ID0gaGVhZExpc3QuY2hpbGROb2Rlcy5sZW5ndGggPiAxID8gZG9tLnNwbGl0VHJlZShoZWFkTGlzdCwge1xuICAgICAgICAgIG5vZGU6IGxhc3QucGFyZW50Tm9kZSxcbiAgICAgICAgICBvZmZzZXQ6IGRvbS5wb3NpdGlvbihsYXN0KSArIDFcbiAgICAgICAgfSwge1xuICAgICAgICAgIGlzU2tpcFBhZGRpbmdCbGFua0hUTUw6IHRydWVcbiAgICAgICAgfSkgOiBudWxsO1xuXG4gICAgICAgIHZhciBtaWRkbGVMaXN0ID0gZG9tLnNwbGl0VHJlZShoZWFkTGlzdCwge1xuICAgICAgICAgIG5vZGU6IGhlYWQucGFyZW50Tm9kZSxcbiAgICAgICAgICBvZmZzZXQ6IGRvbS5wb3NpdGlvbihoZWFkKVxuICAgICAgICB9LCB7XG4gICAgICAgICAgaXNTa2lwUGFkZGluZ0JsYW5rSFRNTDogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBwYXJhcyA9IGlzRXNjYXBzZVRvQm9keSA/IGRvbS5saXN0RGVzY2VuZGFudChtaWRkbGVMaXN0LCBkb20uaXNMaSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QuZnJvbShtaWRkbGVMaXN0LmNoaWxkTm9kZXMpLmZpbHRlcihkb20uaXNMaSk7XG5cbiAgICAgICAgLy8gTEkgdG8gUFxuICAgICAgICBpZiAoaXNFc2NhcHNlVG9Cb2R5IHx8ICFkb20uaXNMaXN0KGhlYWRMaXN0LnBhcmVudE5vZGUpKSB7XG4gICAgICAgICAgcGFyYXMgPSBwYXJhcy5tYXAoZnVuY3Rpb24gKHBhcmEpIHtcbiAgICAgICAgICAgIHJldHVybiBkb20ucmVwbGFjZShwYXJhLCAnUCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJC5lYWNoKGxpc3QuZnJvbShwYXJhcykucmV2ZXJzZSgpLCBmdW5jdGlvbiAoaWR4LCBwYXJhKSB7XG4gICAgICAgICAgZG9tLmluc2VydEFmdGVyKHBhcmEsIGhlYWRMaXN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGVtcHR5IGxpc3RzXG4gICAgICAgIHZhciByb290TGlzdHMgPSBsaXN0LmNvbXBhY3QoW2hlYWRMaXN0LCBtaWRkbGVMaXN0LCBsYXN0TGlzdF0pO1xuICAgICAgICAkLmVhY2gocm9vdExpc3RzLCBmdW5jdGlvbiAoaWR4LCByb290TGlzdCkge1xuICAgICAgICAgIHZhciBsaXN0Tm9kZXMgPSBbcm9vdExpc3RdLmNvbmNhdChkb20ubGlzdERlc2NlbmRhbnQocm9vdExpc3QsIGRvbS5pc0xpc3QpKTtcbiAgICAgICAgICAkLmVhY2gobGlzdE5vZGVzLnJldmVyc2UoKSwgZnVuY3Rpb24gKGlkeCwgbGlzdE5vZGUpIHtcbiAgICAgICAgICAgIGlmICghZG9tLm5vZGVMZW5ndGgobGlzdE5vZGUpKSB7XG4gICAgICAgICAgICAgIGRvbS5yZW1vdmUobGlzdE5vZGUsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZWxlYXNlZFBhcmFzID0gcmVsZWFzZWRQYXJhcy5jb25jYXQocGFyYXMpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZWxlYXNlZFBhcmFzO1xuICAgIH07XG4gIH07XG5cblxuICAvKipcbiAgICogQGNsYXNzIGVkaXRpbmcuVHlwaW5nXG4gICAqXG4gICAqIFR5cGluZ1xuICAgKlxuICAgKi9cbiAgdmFyIFR5cGluZyA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIGEgQnVsbGV0IGluc3RhbmNlIHRvIHRvZ2dsZSBsaXN0cyBvZmZcbiAgICB2YXIgYnVsbGV0ID0gbmV3IEJ1bGxldCgpO1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IHRhYlxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7V3JhcHBlZFJhbmdlfSBybmdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGFic2l6ZVxuICAgICAqL1xuICAgIHRoaXMuaW5zZXJ0VGFiID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgcm5nLCB0YWJzaXplKSB7XG4gICAgICB2YXIgdGFiID0gZG9tLmNyZWF0ZVRleHQobmV3IEFycmF5KHRhYnNpemUgKyAxKS5qb2luKGRvbS5OQlNQX0NIQVIpKTtcbiAgICAgIHJuZyA9IHJuZy5kZWxldGVDb250ZW50cygpO1xuICAgICAgcm5nLmluc2VydE5vZGUodGFiLCB0cnVlKTtcblxuICAgICAgcm5nID0gcmFuZ2UuY3JlYXRlKHRhYiwgdGFic2l6ZSk7XG4gICAgICBybmcuc2VsZWN0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBwYXJhZ3JhcGhcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydFBhcmFncmFwaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBybmcgPSByYW5nZS5jcmVhdGUoKTtcblxuICAgICAgLy8gZGVsZXRlQ29udGVudHMgb24gcmFuZ2UuXG4gICAgICBybmcgPSBybmcuZGVsZXRlQ29udGVudHMoKTtcblxuICAgICAgLy8gV3JhcCByYW5nZSBpZiBpdCBuZWVkcyB0byBiZSB3cmFwcGVkIGJ5IHBhcmFncmFwaFxuICAgICAgcm5nID0gcm5nLndyYXBCb2R5SW5saW5lV2l0aFBhcmEoKTtcblxuICAgICAgLy8gZmluZGluZyBwYXJhZ3JhcGhcbiAgICAgIHZhciBzcGxpdFJvb3QgPSBkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNQYXJhKTtcblxuICAgICAgdmFyIG5leHRQYXJhO1xuICAgICAgLy8gb24gcGFyYWdyYXBoOiBzcGxpdCBwYXJhZ3JhcGhcbiAgICAgIGlmIChzcGxpdFJvb3QpIHtcbiAgICAgICAgLy8gaWYgaXQgaXMgYW4gZW1wdHkgbGluZSB3aXRoIGxpXG4gICAgICAgIGlmIChkb20uaXNFbXB0eShzcGxpdFJvb3QpICYmIGRvbS5pc0xpKHNwbGl0Um9vdCkpIHtcbiAgICAgICAgICAvLyBkaXNhYmxlIFVML09MIGFuZCBlc2NhcGUhXG4gICAgICAgICAgYnVsbGV0LnRvZ2dsZUxpc3Qoc3BsaXRSb290LnBhcmVudE5vZGUubm9kZU5hbWUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gaWYgbmV3IGxpbmUgaGFzIGNvbnRlbnQgKG5vdCBhIGxpbmUgYnJlYWspXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dFBhcmEgPSBkb20uc3BsaXRUcmVlKHNwbGl0Um9vdCwgcm5nLmdldFN0YXJ0UG9pbnQoKSk7XG5cbiAgICAgICAgICB2YXIgZW1wdHlBbmNob3JzID0gZG9tLmxpc3REZXNjZW5kYW50KHNwbGl0Um9vdCwgZG9tLmlzRW1wdHlBbmNob3IpO1xuICAgICAgICAgIGVtcHR5QW5jaG9ycyA9IGVtcHR5QW5jaG9ycy5jb25jYXQoZG9tLmxpc3REZXNjZW5kYW50KG5leHRQYXJhLCBkb20uaXNFbXB0eUFuY2hvcikpO1xuXG4gICAgICAgICAgJC5lYWNoKGVtcHR5QW5jaG9ycywgZnVuY3Rpb24gKGlkeCwgYW5jaG9yKSB7XG4gICAgICAgICAgICBkb20ucmVtb3ZlKGFuY2hvcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIC8vIG5vIHBhcmFncmFwaDogaW5zZXJ0IGVtcHR5IHBhcmFncmFwaFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG5leHQgPSBybmcuc2MuY2hpbGROb2Rlc1tybmcuc29dO1xuICAgICAgICBuZXh0UGFyYSA9ICQoZG9tLmVtcHR5UGFyYSlbMF07XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgcm5nLnNjLmluc2VydEJlZm9yZShuZXh0UGFyYSwgbmV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm5nLnNjLmFwcGVuZENoaWxkKG5leHRQYXJhKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByYW5nZS5jcmVhdGUobmV4dFBhcmEsIDApLm5vcm1hbGl6ZSgpLnNlbGVjdCgpO1xuXG4gICAgfTtcblxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgZWRpdGluZy5UYWJsZVxuICAgKlxuICAgKiBUYWJsZVxuICAgKlxuICAgKi9cbiAgdmFyIFRhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIGhhbmRsZSB0YWIga2V5XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc1NoaWZ0XG4gICAgICovXG4gICAgdGhpcy50YWIgPSBmdW5jdGlvbiAocm5nLCBpc1NoaWZ0KSB7XG4gICAgICB2YXIgY2VsbCA9IGRvbS5hbmNlc3RvcihybmcuY29tbW9uQW5jZXN0b3IoKSwgZG9tLmlzQ2VsbCk7XG4gICAgICB2YXIgdGFibGUgPSBkb20uYW5jZXN0b3IoY2VsbCwgZG9tLmlzVGFibGUpO1xuICAgICAgdmFyIGNlbGxzID0gZG9tLmxpc3REZXNjZW5kYW50KHRhYmxlLCBkb20uaXNDZWxsKTtcblxuICAgICAgdmFyIG5leHRDZWxsID0gbGlzdFtpc1NoaWZ0ID8gJ3ByZXYnIDogJ25leHQnXShjZWxscywgY2VsbCk7XG4gICAgICBpZiAobmV4dENlbGwpIHtcbiAgICAgICAgcmFuZ2UuY3JlYXRlKG5leHRDZWxsLCAwKS5zZWxlY3QoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIGVtcHR5IHRhYmxlIGVsZW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByb3dDb3VudFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjb2xDb3VudFxuICAgICAqIEByZXR1cm4ge05vZGV9XG4gICAgICovXG4gICAgdGhpcy5jcmVhdGVUYWJsZSA9IGZ1bmN0aW9uIChjb2xDb3VudCwgcm93Q291bnQpIHtcbiAgICAgIHZhciB0ZHMgPSBbXSwgdGRIVE1MO1xuICAgICAgZm9yICh2YXIgaWR4Q29sID0gMDsgaWR4Q29sIDwgY29sQ291bnQ7IGlkeENvbCsrKSB7XG4gICAgICAgIHRkcy5wdXNoKCc8dGQ+JyArIGRvbS5ibGFuayArICc8L3RkPicpO1xuICAgICAgfVxuICAgICAgdGRIVE1MID0gdGRzLmpvaW4oJycpO1xuXG4gICAgICB2YXIgdHJzID0gW10sIHRySFRNTDtcbiAgICAgIGZvciAodmFyIGlkeFJvdyA9IDA7IGlkeFJvdyA8IHJvd0NvdW50OyBpZHhSb3crKykge1xuICAgICAgICB0cnMucHVzaCgnPHRyPicgKyB0ZEhUTUwgKyAnPC90cj4nKTtcbiAgICAgIH1cbiAgICAgIHRySFRNTCA9IHRycy5qb2luKCcnKTtcbiAgICAgIHJldHVybiAkKCc8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1ib3JkZXJlZFwiPicgKyB0ckhUTUwgKyAnPC90YWJsZT4nKVswXTtcbiAgICB9O1xuICB9O1xuXG5cbiAgdmFyIEtFWV9CT0dVUyA9ICdib2d1cyc7XG5cbiAgLyoqXG4gICAqIEBjbGFzcyBlZGl0aW5nLkVkaXRvclxuICAgKlxuICAgKiBFZGl0b3JcbiAgICpcbiAgICovXG4gIHZhciBFZGl0b3IgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBzdHlsZSA9IG5ldyBTdHlsZSgpO1xuICAgIHZhciB0YWJsZSA9IG5ldyBUYWJsZSgpO1xuICAgIHZhciB0eXBpbmcgPSBuZXcgVHlwaW5nKCk7XG4gICAgdmFyIGJ1bGxldCA9IG5ldyBCdWxsZXQoKTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgY3JlYXRlUmFuZ2VcbiAgICAgKlxuICAgICAqIGNyZWF0ZSByYW5nZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICAgKi9cbiAgICB0aGlzLmNyZWF0ZVJhbmdlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgdGhpcy5mb2N1cygkZWRpdGFibGUpO1xuICAgICAgcmV0dXJuIHJhbmdlLmNyZWF0ZSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHNhdmVSYW5nZVxuICAgICAqXG4gICAgICogc2F2ZSBjdXJyZW50IHJhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbdGhlbkNvbGxhcHNlPWZhbHNlXVxuICAgICAqL1xuICAgIHRoaXMuc2F2ZVJhbmdlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgdGhlbkNvbGxhcHNlKSB7XG4gICAgICB0aGlzLmZvY3VzKCRlZGl0YWJsZSk7XG4gICAgICAkZWRpdGFibGUuZGF0YSgncmFuZ2UnLCByYW5nZS5jcmVhdGUoKSk7XG4gICAgICBpZiAodGhlbkNvbGxhcHNlKSB7XG4gICAgICAgIHJhbmdlLmNyZWF0ZSgpLmNvbGxhcHNlKCkuc2VsZWN0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgc2F2ZVJhbmdlXG4gICAgICpcbiAgICAgKiBzYXZlIGN1cnJlbnQgbm9kZSBsaXN0IHRvICRlZGl0YWJsZS5kYXRhKCdjaGlsZE5vZGVzJylcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKi9cbiAgICB0aGlzLnNhdmVOb2RlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgLy8gY29weSBjaGlsZCBub2RlIHJlZmVyZW5jZVxuICAgICAgdmFyIGNvcHkgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSAgPSAwLCBsZW4gPSAkZWRpdGFibGVbMF0uY2hpbGROb2Rlcy5sZW5ndGg7IGtleSA8IGxlbjsga2V5KyspIHtcbiAgICAgICAgY29weS5wdXNoKCRlZGl0YWJsZVswXS5jaGlsZE5vZGVzW2tleV0pO1xuICAgICAgfVxuICAgICAgJGVkaXRhYmxlLmRhdGEoJ2NoaWxkTm9kZXMnLCBjb3B5KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCByZXN0b3JlUmFuZ2VcbiAgICAgKlxuICAgICAqIHJlc3RvcmUgbGF0ZWx5IHJhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICovXG4gICAgdGhpcy5yZXN0b3JlUmFuZ2UgPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICB2YXIgcm5nID0gJGVkaXRhYmxlLmRhdGEoJ3JhbmdlJyk7XG4gICAgICBpZiAocm5nKSB7XG4gICAgICAgIHJuZy5zZWxlY3QoKTtcbiAgICAgICAgdGhpcy5mb2N1cygkZWRpdGFibGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHJlc3RvcmVOb2RlXG4gICAgICpcbiAgICAgKiByZXN0b3JlIGxhdGVseSBub2RlIGxpc3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKi9cbiAgICB0aGlzLnJlc3RvcmVOb2RlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgJGVkaXRhYmxlLmh0bWwoJycpO1xuICAgICAgdmFyIGNoaWxkID0gJGVkaXRhYmxlLmRhdGEoJ2NoaWxkTm9kZXMnKTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMCwgbGVuID0gY2hpbGQubGVuZ3RoOyBpbmRleCA8IGxlbjsgaW5kZXgrKykge1xuICAgICAgICAkZWRpdGFibGVbMF0uYXBwZW5kQ2hpbGQoY2hpbGRbaW5kZXhdKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBjdXJyZW50U3R5bGVcbiAgICAgKlxuICAgICAqIGN1cnJlbnQgc3R5bGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAgICogQHJldHVybiB7T2JqZWN0fEJvb2xlYW59IHVuZm9jdXNcbiAgICAgKi9cbiAgICB0aGlzLmN1cnJlbnRTdHlsZSA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHZhciBybmcgPSByYW5nZS5jcmVhdGUoKTsgLy8gaW5pdCBvcmlnaW5hbCBlZGl0YWJsZSByYW5nZVxuXG4gICAgICAvLyBpZiBubyByYW5nZSBmb3VuZCwgdGhlbiBjcmVhdGUgcmFuZ2UgZnJvbSB0YXJnZXRcbiAgICAgIGlmICghcm5nIHx8ICFybmcuaXNPbkVkaXRhYmxlKCkpe1xuICAgICAgICAgIHZhciBkb21UYXJnZXQgPSAkKHRhcmdldCkuZ2V0KDApO1xuICAgICAgICAgIHJuZyA9IHJhbmdlLmNyZWF0ZShkb21UYXJnZXQsMCwgZG9tVGFyZ2V0LDApO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3R5bGVJbmZvID0gIHJuZyAmJiBybmcuaXNPbkVkaXRhYmxlKCkgPyBzdHlsZS5jdXJyZW50KHJuZy5ub3JtYWxpemUoKSkgOiB7fTtcbiAgICAgIGlmIChkb20uaXNJbWcodGFyZ2V0KSkge1xuICAgICAgICBzdHlsZUluZm8uaW1hZ2UgPSB0YXJnZXQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3R5bGVJbmZvO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBzdHlsZSBmcm9tIG5vZGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkbm9kZVxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLnN0eWxlRnJvbU5vZGUgPSBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHJldHVybiBzdHlsZS5mcm9tTm9kZSgkbm9kZSk7XG4gICAgfTtcblxuICAgIHZhciB0cmlnZ2VyT25CZWZvcmVDaGFuZ2UgPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICB2YXIgJGhvbGRlciA9IGRvbS5tYWtlTGF5b3V0SW5mbygkZWRpdGFibGUpLmhvbGRlcigpO1xuICAgICAgaGFuZGxlci5iaW5kQ3VzdG9tRXZlbnQoXG4gICAgICAgICRob2xkZXIsICRlZGl0YWJsZS5kYXRhKCdjYWxsYmFja3MnKSwgJ2JlZm9yZS5jb21tYW5kJ1xuICAgICAgKSgkZWRpdGFibGUuaHRtbCgpLCAkZWRpdGFibGUpO1xuICAgIH07XG5cbiAgICB2YXIgdHJpZ2dlck9uQ2hhbmdlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgdmFyICRob2xkZXIgPSBkb20ubWFrZUxheW91dEluZm8oJGVkaXRhYmxlKS5ob2xkZXIoKTtcbiAgICAgIGhhbmRsZXIuYmluZEN1c3RvbUV2ZW50KFxuICAgICAgICAkaG9sZGVyLCAkZWRpdGFibGUuZGF0YSgnY2FsbGJhY2tzJyksICdjaGFuZ2UnXG4gICAgICApKCRlZGl0YWJsZS5odG1sKCksICRlZGl0YWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdW5kb1xuICAgICAqIHVuZG9cbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICovXG4gICAgdGhpcy51bmRvID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgdHJpZ2dlck9uQmVmb3JlQ2hhbmdlKCRlZGl0YWJsZSk7XG4gICAgICAkZWRpdGFibGUuZGF0YSgnTm90ZUhpc3RvcnknKS51bmRvKCk7XG4gICAgICB0cmlnZ2VyT25DaGFuZ2UoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCByZWRvXG4gICAgICogcmVkb1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKi9cbiAgICB0aGlzLnJlZG8gPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICB0cmlnZ2VyT25CZWZvcmVDaGFuZ2UoJGVkaXRhYmxlKTtcbiAgICAgICRlZGl0YWJsZS5kYXRhKCdOb3RlSGlzdG9yeScpLnJlZG8oKTtcbiAgICAgIHRyaWdnZXJPbkNoYW5nZSgkZWRpdGFibGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGJlZm9yZUNvbW1hbmRcbiAgICAgKiBiZWZvcmUgY29tbWFuZFxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKi9cbiAgICB2YXIgYmVmb3JlQ29tbWFuZCA9IHRoaXMuYmVmb3JlQ29tbWFuZCA9IGZ1bmN0aW9uICgkZWRpdGFibGUpIHtcbiAgICAgIHRyaWdnZXJPbkJlZm9yZUNoYW5nZSgkZWRpdGFibGUpO1xuICAgICAgLy8ga2VlcCBmb2N1cyBvbiBlZGl0YWJsZSBiZWZvcmUgY29tbWFuZCBleGVjdXRpb25cbiAgICAgIHNlbGYuZm9jdXMoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBhZnRlckNvbW1hbmRcbiAgICAgKiBhZnRlciBjb21tYW5kXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNQcmV2ZW50VHJpZ2dlclxuICAgICAqL1xuICAgIHZhciBhZnRlckNvbW1hbmQgPSB0aGlzLmFmdGVyQ29tbWFuZCA9IGZ1bmN0aW9uICgkZWRpdGFibGUsIGlzUHJldmVudFRyaWdnZXIpIHtcbiAgICAgICRlZGl0YWJsZS5kYXRhKCdOb3RlSGlzdG9yeScpLnJlY29yZFVuZG8oKTtcbiAgICAgIGlmICghaXNQcmV2ZW50VHJpZ2dlcikge1xuICAgICAgICB0cmlnZ2VyT25DaGFuZ2UoJGVkaXRhYmxlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBib2xkXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGl0YWxpY1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCB1bmRlcmxpbmVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2Qgc3RyaWtldGhyb3VnaFxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBmb3JtYXRCbG9ja1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBzdXBlcnNjcmlwdFxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBzdWJzY3JpcHRcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QganVzdGlmeUxlZnRcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QganVzdGlmeUNlbnRlclxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBqdXN0aWZ5UmlnaHRcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QganVzdGlmeUZ1bGxcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZm9ybWF0QmxvY2tcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcmVtb3ZlRm9ybWF0XG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIGJhY2tDb2xvclxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBmb3JlQ29sb3JcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgaW5zZXJ0SG9yaXpvbnRhbFJ1bGVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgZm9udE5hbWVcbiAgICAgKlxuICAgICAqIGNoYW5nZSBmb250IG5hbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZVxuICAgICAqL1xuXG4gICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAgIC8vIG5hdGl2ZSBjb21tYW5kcyh3aXRoIGV4ZWNDb21tYW5kKSwgZ2VuZXJhdGUgZnVuY3Rpb24gZm9yIGV4ZWNDb21tYW5kXG4gICAgdmFyIGNvbW1hbmRzID0gWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtldGhyb3VnaCcsICdzdXBlcnNjcmlwdCcsICdzdWJzY3JpcHQnLFxuICAgICAgICAgICAgICAgICAgICAnanVzdGlmeUxlZnQnLCAnanVzdGlmeUNlbnRlcicsICdqdXN0aWZ5UmlnaHQnLCAnanVzdGlmeUZ1bGwnLFxuICAgICAgICAgICAgICAgICAgICAnZm9ybWF0QmxvY2snLCAncmVtb3ZlRm9ybWF0JyxcbiAgICAgICAgICAgICAgICAgICAgJ2JhY2tDb2xvcicsICdmb3JlQ29sb3InLCAnZm9udE5hbWUnXTtcblxuICAgIGZvciAodmFyIGlkeCA9IDAsIGxlbiA9IGNvbW1hbmRzLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHggKyspIHtcbiAgICAgIHRoaXNbY29tbWFuZHNbaWR4XV0gPSAoZnVuY3Rpb24gKHNDbWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkZWRpdGFibGUsIHZhbHVlKSB7XG4gICAgICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoc0NtZCwgZmFsc2UsIHZhbHVlKTtcblxuICAgICAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUsIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgfSkoY29tbWFuZHNbaWR4XSk7XG4gICAgfVxuICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHRhYlxuICAgICAqXG4gICAgICogaGFuZGxlIHRhYiBrZXlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIHRoaXMudGFiID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgb3B0aW9ucykge1xuICAgICAgdmFyIHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoJGVkaXRhYmxlKTtcbiAgICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgICB0YWJsZS50YWIocm5nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJlZm9yZUNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICAgICAgdHlwaW5nLmluc2VydFRhYigkZWRpdGFibGUsIHJuZywgb3B0aW9ucy50YWJzaXplKTtcbiAgICAgICAgYWZ0ZXJDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgdW50YWJcbiAgICAgKlxuICAgICAqIGhhbmRsZSBzaGlmdCt0YWIga2V5XG4gICAgICpcbiAgICAgKi9cbiAgICB0aGlzLnVudGFiID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgdmFyIHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoJGVkaXRhYmxlKTtcbiAgICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgICB0YWJsZS50YWIocm5nLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBpbnNlcnRQYXJhZ3JhcGhcbiAgICAgKlxuICAgICAqIGluc2VydCBwYXJhZ3JhcGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gJGVkaXRhYmxlXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRQYXJhZ3JhcGggPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICB0eXBpbmcuaW5zZXJ0UGFyYWdyYXBoKCRlZGl0YWJsZSk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZCBpbnNlcnRPcmRlcmVkTGlzdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqL1xuICAgIHRoaXMuaW5zZXJ0T3JkZXJlZExpc3QgPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICBidWxsZXQuaW5zZXJ0T3JkZXJlZExpc3QoJGVkaXRhYmxlKTtcbiAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRVbm9yZGVyZWRMaXN0ID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgYnVsbGV0Lmluc2VydFVub3JkZXJlZExpc3QoJGVkaXRhYmxlKTtcbiAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICovXG4gICAgdGhpcy5pbmRlbnQgPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICBidWxsZXQuaW5kZW50KCRlZGl0YWJsZSk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqL1xuICAgIHRoaXMub3V0ZGVudCA9IGZ1bmN0aW9uICgkZWRpdGFibGUpIHtcbiAgICAgIGJlZm9yZUNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICAgIGJ1bGxldC5vdXRkZW50KCRlZGl0YWJsZSk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IGltYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNVcmxcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydEltYWdlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgc1VybCwgZmlsZW5hbWUpIHtcbiAgICAgIGFzeW5jLmNyZWF0ZUltYWdlKHNVcmwsIGZpbGVuYW1lKS50aGVuKGZ1bmN0aW9uICgkaW1hZ2UpIHtcbiAgICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgICAkaW1hZ2UuY3NzKHtcbiAgICAgICAgICBkaXNwbGF5OiAnJyxcbiAgICAgICAgICB3aWR0aDogTWF0aC5taW4oJGVkaXRhYmxlLndpZHRoKCksICRpbWFnZS53aWR0aCgpKVxuICAgICAgICB9KTtcbiAgICAgICAgcmFuZ2UuY3JlYXRlKCkuaW5zZXJ0Tm9kZSgkaW1hZ2VbMF0pO1xuICAgICAgICByYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKCRpbWFnZVswXSkuc2VsZWN0KCk7XG4gICAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgfSkuZmFpbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkaG9sZGVyID0gZG9tLm1ha2VMYXlvdXRJbmZvKCRlZGl0YWJsZSkuaG9sZGVyKCk7XG4gICAgICAgIGhhbmRsZXIuYmluZEN1c3RvbUV2ZW50KFxuICAgICAgICAgICRob2xkZXIsICRlZGl0YWJsZS5kYXRhKCdjYWxsYmFja3MnKSwgJ2ltYWdlLnVwbG9hZC5lcnJvcidcbiAgICAgICAgKSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgaW5zZXJ0Tm9kZVxuICAgICAqIGluc2VydCBub2RlXG4gICAgICogQHBhcmFtIHtOb2RlfSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydE5vZGUgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCBub2RlKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICByYW5nZS5jcmVhdGUoKS5pbnNlcnROb2RlKG5vZGUpO1xuICAgICAgcmFuZ2UuY3JlYXRlRnJvbU5vZGVBZnRlcihub2RlKS5zZWxlY3QoKTtcbiAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgIH07XG5cblx0Ly8gcHJlcGVuZCBub2RlLCBjbG9uZWQgZnJvbSBzdW1tZXJub3RlLkVkaXRvci5pbnNlcnROb2RlXG5cdHRoaXMucHJlcGVuZE5vZGUgPSBmdW5jdGlvbigkZWRpdGFibGUsIG5vZGUpe1xuXHRcdGJlZm9yZUNvbW1hbmQoJGVkaXRhYmxlKTtcblx0XHQkZWRpdGFibGUucHJlcGVuZChub2RlKTtcblx0XHRyYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKG5vZGUpLnNlbGVjdCgpO1xuXHRcdGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuXHR9XG5cblx0dGhpcy5pbnNlcnRBZnRlciA9IGZ1bmN0aW9uKCRlZGl0YWJsZSwgbm9kZSwgYWZ0ZXIpe1xuXHRcdGJlZm9yZUNvbW1hbmQoJGVkaXRhYmxlKTtcblx0XHQkKGFmdGVyKS5hZnRlcihub2RlKTtcblx0XHRyYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKG5vZGUpLnNlbGVjdCgpO1xuXHRcdGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuXHR9XG5cblx0Ly8gPT0gaW5zZXJ0Tm9kZSB3aXRoIGZpeGVzIGZvciBpbnNlcnQgaW50byBwYXJhZ3JhcGhcblx0dGhpcy5pbnNlcnRBdEN1cnNvciA9IGZ1bmN0aW9uKCRlZGl0YWJsZSwgbm9kZSl7XG5cdFx0YmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXHRcdGluc2VydE5vZGVBdEN1cnNvcihub2RlKTtcblx0XHRyYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKG5vZGUpLnNlbGVjdCgpO1xuXHRcdGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaW5zZXJ0Tm9kZUF0Q3Vyc29yKG5vZGUpe1xuXHRcdHZhciBzZWwsIHJhbmdlLCBodG1sO1xuXHRcdGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XG5cdFx0XHRzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRpZiAoc2VsLmdldFJhbmdlQXQgJiYgc2VsLnJhbmdlQ291bnQpIHtcblx0XHRcdFx0cmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcblx0XHRcdFx0cmFuZ2UuZGVsZXRlQ29udGVudHMoKTtcblx0XHRcdFx0cmFuZ2UuaW5zZXJ0Tm9kZShub2RlKTtcblx0XHRcdH1cblx0XHQvLyBmb3IgaWU8OVxuXHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSkge1xuXHRcdFx0ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dCA9IG5vZGUub3V0ZXJIVE1MO1xuXHRcdH1cblx0fVxuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IHRleHRcbiAgICAgKiBAcGFyYW0ge05vZGV9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRUZXh0ID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgdGV4dCkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgdmFyIHRleHROb2RlID0gcmFuZ2UuY3JlYXRlKCkuaW5zZXJ0Tm9kZShkb20uY3JlYXRlVGV4dCh0ZXh0KSk7XG4gICAgICByYW5nZS5jcmVhdGUodGV4dE5vZGUsIGRvbS5ub2RlTGVuZ3RoKHRleHROb2RlKSkuc2VsZWN0KCk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcGFzdGUgSFRNTFxuICAgICAqIEBwYXJhbSB7Tm9kZX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcmt1cFxuICAgICAqL1xuICAgIHRoaXMucGFzdGVIVE1MID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgbWFya3VwKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICB2YXIgY29udGVudHMgPSByYW5nZS5jcmVhdGUoKS5wYXN0ZUhUTUwobWFya3VwKTtcbiAgICAgIHJhbmdlLmNyZWF0ZUZyb21Ob2RlQWZ0ZXIobGlzdC5sYXN0KGNvbnRlbnRzKSkuc2VsZWN0KCk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogZm9ybWF0QmxvY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGFnTmFtZVxuICAgICAqL1xuICAgIHRoaXMuZm9ybWF0QmxvY2sgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCB0YWdOYW1lKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICAvLyBbd29ya2Fyb3VuZF0gZm9yIE1TSUUsIElFIG5lZWQgYDxgXG4gICAgICB0YWdOYW1lID0gYWdlbnQuaXNNU0lFID8gJzwnICsgdGFnTmFtZSArICc+JyA6IHRhZ05hbWU7XG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnRm9ybWF0QmxvY2snLCBmYWxzZSwgdGFnTmFtZSk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgdGhpcy5mb3JtYXRQYXJhID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgdGhpcy5mb3JtYXRCbG9jaygkZWRpdGFibGUsICdQJyk7XG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAgIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8PSA2OyBpZHggKyspIHtcbiAgICAgIHRoaXNbJ2Zvcm1hdEgnICsgaWR4XSA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkZWRpdGFibGUpIHtcbiAgICAgICAgICB0aGlzLmZvcm1hdEJsb2NrKCRlZGl0YWJsZSwgJ0gnICsgaWR4KTtcbiAgICAgICAgfTtcbiAgICAgIH0oaWR4KTtcbiAgICB9O1xuICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG5cbiAgICAvKipcbiAgICAgKiBmb250U2l6ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAtIHB4XG4gICAgICovXG4gICAgdGhpcy5mb250U2l6ZSA9IGZ1bmN0aW9uICgkZWRpdGFibGUsIHZhbHVlKSB7XG4gICAgICB2YXIgcm5nID0gcmFuZ2UuY3JlYXRlKCk7XG5cbiAgICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgICB2YXIgc3BhbnMgPSBzdHlsZS5zdHlsZU5vZGVzKHJuZyk7XG4gICAgICAgIHZhciBmaXJzdFNwYW4gPSBsaXN0LmhlYWQoc3BhbnMpO1xuXG4gICAgICAgICQoc3BhbnMpLmNzcyh7XG4gICAgICAgICAgJ2ZvbnQtc2l6ZSc6IHZhbHVlICsgJ3B4J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBbd29ya2Fyb3VuZF0gYWRkZWQgc3R5bGVkIGJvZ3VzIHNwYW4gZm9yIHN0eWxlXG4gICAgICAgIC8vICAtIGFsc28gYm9ndXMgY2hhcmFjdGVyIG5lZWRlZCBmb3IgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGlmIChmaXJzdFNwYW4gJiYgIWRvbS5ub2RlTGVuZ3RoKGZpcnN0U3BhbikpIHtcbiAgICAgICAgICBmaXJzdFNwYW4uaW5uZXJIVE1MID0gZG9tLlpFUk9fV0lEVEhfTkJTUF9DSEFSO1xuICAgICAgICAgIHJhbmdlLmNyZWF0ZUZyb21Ob2RlQWZ0ZXIoZmlyc3RTcGFuLmZpcnN0Q2hpbGQpLnNlbGVjdCgpO1xuICAgICAgICAgICRlZGl0YWJsZS5kYXRhKEtFWV9CT0dVUywgZmlyc3RTcGFuKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgICAkKHN0eWxlLnN0eWxlTm9kZXMocm5nKSkuY3NzKHtcbiAgICAgICAgICAnZm9udC1zaXplJzogdmFsdWUgKyAncHgnXG4gICAgICAgIH0pO1xuICAgICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IGhvcml6b250YWwgcnVsZVxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydEhvcml6b250YWxSdWxlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICB2YXIgcm5nID0gcmFuZ2UuY3JlYXRlKCk7XG4gICAgICB2YXIgaHJOb2RlID0gcm5nLmluc2VydE5vZGUoJCgnPEhSLz4nKVswXSk7XG4gICAgICBpZiAoaHJOb2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHJhbmdlLmNyZWF0ZShock5vZGUubmV4dFNpYmxpbmcsIDApLm5vcm1hbGl6ZSgpLnNlbGVjdCgpO1xuICAgICAgfVxuXG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIGJvZ3VzIG5vZGUgYW5kIGNoYXJhY3RlclxuICAgICAqL1xuICAgIHRoaXMucmVtb3ZlQm9ndXMgPSBmdW5jdGlvbiAoJGVkaXRhYmxlKSB7XG4gICAgICB2YXIgYm9ndXNOb2RlID0gJGVkaXRhYmxlLmRhdGEoS0VZX0JPR1VTKTtcbiAgICAgIGlmICghYm9ndXNOb2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHRleHROb2RlID0gbGlzdC5maW5kKGxpc3QuZnJvbShib2d1c05vZGUuY2hpbGROb2RlcyksIGRvbS5pc1RleHQpO1xuXG4gICAgICB2YXIgYm9ndXNDaGFySWR4ID0gdGV4dE5vZGUubm9kZVZhbHVlLmluZGV4T2YoZG9tLlpFUk9fV0lEVEhfTkJTUF9DSEFSKTtcbiAgICAgIGlmIChib2d1c0NoYXJJZHggIT09IC0xKSB7XG4gICAgICAgIHRleHROb2RlLmRlbGV0ZURhdGEoYm9ndXNDaGFySWR4LCAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRvbS5pc0VtcHR5KGJvZ3VzTm9kZSkpIHtcbiAgICAgICAgZG9tLnJlbW92ZShib2d1c05vZGUpO1xuICAgICAgfVxuXG4gICAgICAkZWRpdGFibGUucmVtb3ZlRGF0YShLRVlfQk9HVVMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBsaW5lSGVpZ2h0XG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHRoaXMubGluZUhlaWdodCA9IGZ1bmN0aW9uICgkZWRpdGFibGUsIHZhbHVlKSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICBzdHlsZS5zdHlsZVBhcmEocmFuZ2UuY3JlYXRlKCksIHtcbiAgICAgICAgbGluZUhlaWdodDogdmFsdWVcbiAgICAgIH0pO1xuICAgICAgYWZ0ZXJDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHVubGlua1xuICAgICAqXG4gICAgICogQHR5cGUgY29tbWFuZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqL1xuICAgIHRoaXMudW5saW5rID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgdmFyIHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoJGVkaXRhYmxlKTtcbiAgICAgIGlmIChybmcuaXNPbkFuY2hvcigpKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNBbmNob3IpO1xuICAgICAgICBybmcgPSByYW5nZS5jcmVhdGVGcm9tTm9kZShhbmNob3IpO1xuICAgICAgICBybmcuc2VsZWN0KCk7XG5cbiAgICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgndW5saW5rJyk7XG4gICAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGUgbGluayAoY29tbWFuZClcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbGlua0luZm9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIHRoaXMuY3JlYXRlTGluayA9IGZ1bmN0aW9uICgkZWRpdGFibGUsIGxpbmtJbmZvLCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGlua1VybCA9IGxpbmtJbmZvLnVybDtcbiAgICAgIHZhciBsaW5rVGV4dCA9IGxpbmtJbmZvLnRleHQ7XG4gICAgICB2YXIgaXNOZXdXaW5kb3cgPSBsaW5rSW5mby5pc05ld1dpbmRvdztcbiAgICAgIHZhciBybmcgPSBsaW5rSW5mby5yYW5nZSB8fCB0aGlzLmNyZWF0ZVJhbmdlKCRlZGl0YWJsZSk7XG4gICAgICB2YXIgaXNUZXh0Q2hhbmdlZCA9IHJuZy50b1N0cmluZygpICE9PSBsaW5rVGV4dDtcblxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgZG9tLm1ha2VMYXlvdXRJbmZvKCRlZGl0YWJsZSkuZWRpdG9yKCkuZGF0YSgnb3B0aW9ucycpO1xuXG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG5cbiAgICAgIGlmIChvcHRpb25zLm9uQ3JlYXRlTGluaykge1xuICAgICAgICBsaW5rVXJsID0gb3B0aW9ucy5vbkNyZWF0ZUxpbmsobGlua1VybCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbmNob3JzID0gW107XG4gICAgICBpZiAoaXNUZXh0Q2hhbmdlZCkge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbGluayB3aGVuIHRleHQgY2hhbmdlZC5cbiAgICAgICAgdmFyIGFuY2hvciA9IHJuZy5pbnNlcnROb2RlKCQoJzxBPicgKyBsaW5rVGV4dCArICc8L0E+JylbMF0pO1xuICAgICAgICBhbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuY2hvcnMgPSBzdHlsZS5zdHlsZU5vZGVzKHJuZywge1xuICAgICAgICAgIG5vZGVOYW1lOiAnQScsXG4gICAgICAgICAgZXhwYW5kQ2xvc2VzdFNpYmxpbmc6IHRydWUsXG4gICAgICAgICAgb25seVBhcnRpYWxDb250YWluczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJC5lYWNoKGFuY2hvcnMsIGZ1bmN0aW9uIChpZHgsIGFuY2hvcikge1xuICAgICAgICAkKGFuY2hvcikuYXR0cignaHJlZicsIGxpbmtVcmwpO1xuICAgICAgICBpZiAoaXNOZXdXaW5kb3cpIHtcbiAgICAgICAgICAkKGFuY2hvcikuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoYW5jaG9yKS5yZW1vdmVBdHRyKCd0YXJnZXQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBzdGFydFJhbmdlID0gcmFuZ2UuY3JlYXRlRnJvbU5vZGVCZWZvcmUobGlzdC5oZWFkKGFuY2hvcnMpKTtcbiAgICAgIHZhciBzdGFydFBvaW50ID0gc3RhcnRSYW5nZS5nZXRTdGFydFBvaW50KCk7XG4gICAgICB2YXIgZW5kUmFuZ2UgPSByYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKGxpc3QubGFzdChhbmNob3JzKSk7XG4gICAgICB2YXIgZW5kUG9pbnQgPSBlbmRSYW5nZS5nZXRFbmRQb2ludCgpO1xuXG4gICAgICByYW5nZS5jcmVhdGUoXG4gICAgICAgIHN0YXJ0UG9pbnQubm9kZSxcbiAgICAgICAgc3RhcnRQb2ludC5vZmZzZXQsXG4gICAgICAgIGVuZFBvaW50Lm5vZGUsXG4gICAgICAgIGVuZFBvaW50Lm9mZnNldFxuICAgICAgKS5zZWxlY3QoKTtcblxuICAgICAgYWZ0ZXJDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgbGluayBpbmZvXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfSByZXR1cm4ucmFuZ2VcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHJldHVybi50ZXh0XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gW3JldHVybi5pc05ld1dpbmRvdz10cnVlXVxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gW3JldHVybi51cmw9XCJcIl1cbiAgICAgKi9cbiAgICB0aGlzLmdldExpbmtJbmZvID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgdGhpcy5mb2N1cygkZWRpdGFibGUpO1xuXG4gICAgICB2YXIgcm5nID0gcmFuZ2UuY3JlYXRlKCkuZXhwYW5kKGRvbS5pc0FuY2hvcik7XG5cbiAgICAgIC8vIEdldCB0aGUgZmlyc3QgYW5jaG9yIG9uIHJhbmdlKGZvciBlZGl0KS5cbiAgICAgIHZhciAkYW5jaG9yID0gJGVkaXRhYmxlLmlzKCdhJykgPyAkZWRpdGFibGU6ICQobGlzdC5oZWFkKHJuZy5ub2Rlcyhkb20uaXNBbmNob3IpKSk7XG4gICAgICB2YXIgdGV4dCA9ICRhbmNob3IuaXMoJ2EnKSA/ICRhbmNob3IuaHRtbCgpIDogcm5nLnRvU3RyaW5nKCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJhbmdlOiBybmcsXG4gICAgICAgIHRleHQ6IHRleHQsXG4gICAgICAgIGlzTmV3V2luZG93OiAkYW5jaG9yLmxlbmd0aCA/ICRhbmNob3IuYXR0cigndGFyZ2V0JykgPT09ICdfYmxhbmsnIDogZmFsc2UsXG4gICAgICAgIHVybDogJGFuY2hvci5sZW5ndGggPyAkYW5jaG9yLmF0dHIoJ2hyZWYnKSA6ICcnXG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBzZXR0aW5nIGNvbG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzT2JqQ29sb3IgIGNvbG9yIGNvZGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc09iakNvbG9yLmZvcmVDb2xvciBmb3JlZ3JvdW5kIGNvbG9yXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNPYmpDb2xvci5iYWNrQ29sb3IgYmFja2dyb3VuZCBjb2xvclxuICAgICAqL1xuICAgIHRoaXMuY29sb3IgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCBzT2JqQ29sb3IpIHtcbiAgICAgIHZhciBvQ29sb3IgPSBKU09OLnBhcnNlKHNPYmpDb2xvcik7XG4gICAgICB2YXIgZm9yZUNvbG9yID0gb0NvbG9yLmZvcmVDb2xvciwgYmFja0NvbG9yID0gb0NvbG9yLmJhY2tDb2xvcjtcblxuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICBpZiAoZm9yZUNvbG9yKSB7IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdmb3JlQ29sb3InLCBmYWxzZSwgZm9yZUNvbG9yKTsgfVxuICAgICAgaWYgKGJhY2tDb2xvcikgeyBkb2N1bWVudC5leGVjQ29tbWFuZCgnYmFja0NvbG9yJywgZmFsc2UsIGJhY2tDb2xvcik7IH1cblxuICAgICAgYWZ0ZXJDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBUYWJsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc0RpbSBkaW1lbnNpb24gb2YgdGFibGUgKGV4IDogXCI1eDVcIilcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydFRhYmxlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgc0RpbSkge1xuICAgICAgdmFyIGRpbWVuc2lvbiA9IHNEaW0uc3BsaXQoJ3gnKTtcbiAgICAgIGJlZm9yZUNvbW1hbmQoJGVkaXRhYmxlKTtcblxuICAgICAgdmFyIHJuZyA9IHJhbmdlLmNyZWF0ZSgpLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgICBybmcuaW5zZXJ0Tm9kZSh0YWJsZS5jcmVhdGVUYWJsZShkaW1lbnNpb25bMF0sIGRpbWVuc2lvblsxXSkpO1xuICAgICAgYWZ0ZXJDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGZsb2F0IG1lXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICR0YXJnZXRcbiAgICAgKi9cbiAgICB0aGlzLmZsb2F0TWUgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCB2YWx1ZSwgJHRhcmdldCkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgJHRhcmdldC5jc3MoJ2Zsb2F0JywgdmFsdWUpO1xuICAgICAgYWZ0ZXJDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGNoYW5nZSBpbWFnZSBzaGFwZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBjc3MgY2xhc3NcbiAgICAgKiBAcGFyYW0ge05vZGV9ICR0YXJnZXRcbiAgICAgKi9cbiAgICB0aGlzLmltYWdlU2hhcGUgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCB2YWx1ZSwgJHRhcmdldCkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICAkdGFyZ2V0LnJlbW92ZUNsYXNzKCdpbWctcm91bmRlZCBpbWctY2lyY2xlIGltZy10aHVtYm5haWwnKTtcblxuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICR0YXJnZXQuYWRkQ2xhc3ModmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBhZnRlckNvbW1hbmQoJGVkaXRhYmxlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmVzaXplIG92ZXJsYXkgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHRhcmdldCAtIHRhcmdldCBlbGVtZW50XG4gICAgICovXG4gICAgdGhpcy5yZXNpemUgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCB2YWx1ZSwgJHRhcmdldCkge1xuICAgICAgYmVmb3JlQ29tbWFuZCgkZWRpdGFibGUpO1xuXG4gICAgICAkdGFyZ2V0LmNzcyh7XG4gICAgICAgIHdpZHRoOiB2YWx1ZSAqIDEwMCArICclJyxcbiAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgfSk7XG5cbiAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1Bvc2l0aW9ufSBwb3NcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHRhcmdldCAtIHRhcmdldCBlbGVtZW50XG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbYktlZXBSYXRpb10gLSBrZWVwIHJhdGlvXG4gICAgICovXG4gICAgdGhpcy5yZXNpemVUbyA9IGZ1bmN0aW9uIChwb3MsICR0YXJnZXQsIGJLZWVwUmF0aW8pIHtcbiAgICAgIHZhciBpbWFnZVNpemU7XG4gICAgICBpZiAoYktlZXBSYXRpbykge1xuICAgICAgICB2YXIgbmV3UmF0aW8gPSBwb3MueSAvIHBvcy54O1xuICAgICAgICB2YXIgcmF0aW8gPSAkdGFyZ2V0LmRhdGEoJ3JhdGlvJyk7XG4gICAgICAgIGltYWdlU2l6ZSA9IHtcbiAgICAgICAgICB3aWR0aDogcmF0aW8gPiBuZXdSYXRpbyA/IHBvcy54IDogcG9zLnkgLyByYXRpbyxcbiAgICAgICAgICBoZWlnaHQ6IHJhdGlvID4gbmV3UmF0aW8gPyBwb3MueCAqIHJhdGlvIDogcG9zLnlcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGltYWdlU2l6ZSA9IHtcbiAgICAgICAgICB3aWR0aDogcG9zLngsXG4gICAgICAgICAgaGVpZ2h0OiBwb3MueVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAkdGFyZ2V0LmNzcyhpbWFnZVNpemUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgbWVkaWEgb2JqZWN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIC0gZHVtbXkgYXJndW1lbnQgKGZvciBrZWVwIGludGVyZmFjZSlcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHRhcmdldCAtIHRhcmdldCBlbGVtZW50XG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVNZWRpYSA9IGZ1bmN0aW9uICgkZWRpdGFibGUsIHZhbHVlLCAkdGFyZ2V0KSB7XG4gICAgICBiZWZvcmVDb21tYW5kKCRlZGl0YWJsZSk7XG4gICAgICAkdGFyZ2V0LmRldGFjaCgpO1xuXG4gICAgICBoYW5kbGVyLmJpbmRDdXN0b21FdmVudChcbiAgICAgICAgJCgpLCAkZWRpdGFibGUuZGF0YSgnY2FsbGJhY2tzJyksICdtZWRpYS5kZWxldGUnXG4gICAgICApKCR0YXJnZXQsICRlZGl0YWJsZSk7XG5cbiAgICAgIGFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBzZXQgZm9jdXNcbiAgICAgKlxuICAgICAqIEBwYXJhbSAkZWRpdGFibGVcbiAgICAgKi9cbiAgICB0aGlzLmZvY3VzID0gZnVuY3Rpb24gKCRlZGl0YWJsZSkge1xuICAgICAgJGVkaXRhYmxlLmZvY3VzKCk7XG5cbiAgICAgIC8vIFt3b3JrYXJvdW5kXSBmb3IgZmlyZWZveCBidWcgaHR0cDovL2dvby5nbC9sVmZBYUlcbiAgICAgIGlmIChhZ2VudC5pc0ZGKSB7XG4gICAgICAgIHZhciBybmcgPSByYW5nZS5jcmVhdGUoKTtcbiAgICAgICAgaWYgKCFybmcgfHwgcm5nLmlzT25FZGl0YWJsZSgpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJhbmdlLmNyZWF0ZUZyb21Ob2RlKCRlZGl0YWJsZVswXSlcbiAgICAgICAgICAgICAubm9ybWFsaXplKClcbiAgICAgICAgICAgICAuY29sbGFwc2UoKVxuICAgICAgICAgICAgIC5zZWxlY3QoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyB3aGV0aGVyIGNvbnRlbnRzIGlzIGVtcHR5IG9yIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuaXNFbXB0eSA9IGZ1bmN0aW9uICgkZWRpdGFibGUpIHtcbiAgICAgIHJldHVybiBkb20uaXNFbXB0eSgkZWRpdGFibGVbMF0pIHx8IGRvbS5lbXB0eVBhcmEgPT09ICRlZGl0YWJsZS5odG1sKCk7XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzIG1vZHVsZS5CdXR0b25cbiAgICpcbiAgICogQnV0dG9uXG4gICAqL1xuICB2YXIgQnV0dG9uID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIHVwZGF0ZSBidXR0b24gc3RhdHVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZUluZm9cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgkY29udGFpbmVyLCBzdHlsZUluZm8pIHtcbiAgICAgIC8qKlxuICAgICAgICogaGFuZGxlIGRyb3Bkb3duJ3MgY2hlY2sgbWFyayAoZm9yIGZvbnRuYW1lLCBmb250c2l6ZSwgbGluZUhlaWdodCkuXG4gICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGJ0blxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlXG4gICAgICAgKi9cbiAgICAgIHZhciBjaGVja0Ryb3Bkb3duTWVudSA9IGZ1bmN0aW9uICgkYnRuLCB2YWx1ZSkge1xuICAgICAgICAkYnRuLmZpbmQoJy5kcm9wZG93bi1tZW51IGxpIGEnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgaXNDaGVja2VkO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlzQ2hlY2tlZCA9IHZhbHVlKCQodGhpcykpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhbHdheXMgY29tcGFyZSBzdHJpbmcgdG8gYXZvaWQgY3JlYXRpbmcgYW5vdGhlciBmdW5jLlxuICAgICAgICAgICAgaXNDaGVja2VkID0gKCQodGhpcykuZGF0YSgndmFsdWUnKSArICcnKSA9PT0gKHZhbHVlICsgJycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gaXNDaGVja2VkID8gJ2NoZWNrZWQnIDogJyc7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiB1cGRhdGUgYnV0dG9uIHN0YXRlKGFjdGl2ZSBvciBub3QpLlxuICAgICAgICpcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3JcbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgICAqL1xuICAgICAgdmFyIGJ0blN0YXRlID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBwcmVkKSB7XG4gICAgICAgIHZhciAkYnRuID0gJGNvbnRhaW5lci5maW5kKHNlbGVjdG9yKTtcbiAgICAgICAgJGJ0bi50b2dnbGVDbGFzcygnYWN0aXZlJywgcHJlZCgpKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChzdHlsZUluZm8uaW1hZ2UpIHtcbiAgICAgICAgdmFyICRpbWcgPSAkKHN0eWxlSW5mby5pbWFnZSk7XG5cbiAgICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwiaW1hZ2VTaGFwZVwiXVtkYXRhLXZhbHVlPVwiaW1nLXJvdW5kZWRcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICRpbWcuaGFzQ2xhc3MoJ2ltZy1yb3VuZGVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJpbWFnZVNoYXBlXCJdW2RhdGEtdmFsdWU9XCJpbWctY2lyY2xlXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkaW1nLmhhc0NsYXNzKCdpbWctY2lyY2xlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJpbWFnZVNoYXBlXCJdW2RhdGEtdmFsdWU9XCJpbWctdGh1bWJuYWlsXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAkaW1nLmhhc0NsYXNzKCdpbWctdGh1bWJuYWlsJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJpbWFnZVNoYXBlXCJdOm5vdChbZGF0YS12YWx1ZV0pJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAhJGltZy5pcygnLmltZy1yb3VuZGVkLCAuaW1nLWNpcmNsZSwgLmltZy10aHVtYm5haWwnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGltZ0Zsb2F0ID0gJGltZy5jc3MoJ2Zsb2F0Jyk7XG4gICAgICAgIGJ0blN0YXRlKCdidXR0b25bZGF0YS1ldmVudD1cImZsb2F0TWVcIl1bZGF0YS12YWx1ZT1cImxlZnRcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGltZ0Zsb2F0ID09PSAnbGVmdCc7XG4gICAgICAgIH0pO1xuICAgICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJmbG9hdE1lXCJdW2RhdGEtdmFsdWU9XCJyaWdodFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gaW1nRmxvYXQgPT09ICdyaWdodCc7XG4gICAgICAgIH0pO1xuICAgICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJmbG9hdE1lXCJdW2RhdGEtdmFsdWU9XCJub25lXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBpbWdGbG9hdCAhPT0gJ2xlZnQnICYmIGltZ0Zsb2F0ICE9PSAncmlnaHQnO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgc3R5bGUgPSAkaW1nLmF0dHIoJ3N0eWxlJyk7XG4gICAgICAgIGJ0blN0YXRlKCdidXR0b25bZGF0YS1ldmVudD1cInJlc2l6ZVwiXVtkYXRhLXZhbHVlPVwiMVwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gISEvKF58XFxzKShtYXgtKT93aWR0aFxccyo6XFxzKjEwMCUvLnRlc3Qoc3R5bGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwicmVzaXplXCJdW2RhdGEtdmFsdWU9XCIwLjVcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuICEhLyhefFxccykobWF4LSk/d2lkdGhcXHMqOlxccyo1MCUvLnRlc3Qoc3R5bGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwicmVzaXplXCJdW2RhdGEtdmFsdWU9XCIwLjI1XCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAhIS8oXnxcXHMpKG1heC0pP3dpZHRoXFxzKjpcXHMqMjUlLy50ZXN0KHN0eWxlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gZm9udG5hbWVcbiAgICAgIHZhciAkZm9udG5hbWUgPSAkY29udGFpbmVyLmZpbmQoJy5ub3RlLWZvbnRuYW1lJyk7XG4gICAgICBpZiAoJGZvbnRuYW1lLmxlbmd0aCkge1xuICAgICAgICB2YXIgc2VsZWN0ZWRGb250ID0gc3R5bGVJbmZvWydmb250LWZhbWlseSddO1xuICAgICAgICBpZiAoISFzZWxlY3RlZEZvbnQpIHtcblxuICAgICAgICAgIHZhciBsaXN0ID0gc2VsZWN0ZWRGb250LnNwbGl0KCcsJyk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGxpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGVjdGVkRm9udCA9IGxpc3RbaV0ucmVwbGFjZSgvW1xcJ1xcXCJdL2csICcnKS5yZXBsYWNlKC9cXHMrJC8sICcnKS5yZXBsYWNlKC9eXFxzKy8sICcnKTtcbiAgICAgICAgICAgIGlmIChhZ2VudC5pc0ZvbnRJbnN0YWxsZWQoc2VsZWN0ZWRGb250KSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkZm9udG5hbWUuZmluZCgnLm5vdGUtY3VycmVudC1mb250bmFtZScpLnRleHQoc2VsZWN0ZWRGb250KTtcbiAgICAgICAgICBjaGVja0Ryb3Bkb3duTWVudSgkZm9udG5hbWUsIHNlbGVjdGVkRm9udCk7XG5cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBmb250c2l6ZVxuICAgICAgdmFyICRmb250c2l6ZSA9ICRjb250YWluZXIuZmluZCgnLm5vdGUtZm9udHNpemUnKTtcbiAgICAgICRmb250c2l6ZS5maW5kKCcubm90ZS1jdXJyZW50LWZvbnRzaXplJykudGV4dChzdHlsZUluZm9bJ2ZvbnQtc2l6ZSddKTtcbiAgICAgIGNoZWNrRHJvcGRvd25NZW51KCRmb250c2l6ZSwgcGFyc2VGbG9hdChzdHlsZUluZm9bJ2ZvbnQtc2l6ZSddKSk7XG5cbiAgICAgIC8vIGxpbmVoZWlnaHRcbiAgICAgIHZhciAkbGluZUhlaWdodCA9ICRjb250YWluZXIuZmluZCgnLm5vdGUtaGVpZ2h0Jyk7XG4gICAgICBjaGVja0Ryb3Bkb3duTWVudSgkbGluZUhlaWdodCwgcGFyc2VGbG9hdChzdHlsZUluZm9bJ2xpbmUtaGVpZ2h0J10pKTtcblxuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwiYm9sZFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snZm9udC1ib2xkJ10gPT09ICdib2xkJztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwiaXRhbGljXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LWl0YWxpYyddID09PSAnaXRhbGljJztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwidW5kZXJsaW5lXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXVuZGVybGluZSddID09PSAndW5kZXJsaW5lJztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwic3RyaWtldGhyb3VnaFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snZm9udC1zdHJpa2V0aHJvdWdoJ10gPT09ICdzdHJpa2V0aHJvdWdoJztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwic3VwZXJzY3JpcHRcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdHlsZUluZm9bJ2ZvbnQtc3VwZXJzY3JpcHQnXSA9PT0gJ3N1cGVyc2NyaXB0JztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwic3Vic2NyaXB0XCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN1YnNjcmlwdCddID09PSAnc3Vic2NyaXB0JztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwianVzdGlmeUxlZnRcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdHlsZUluZm9bJ3RleHQtYWxpZ24nXSA9PT0gJ2xlZnQnIHx8IHN0eWxlSW5mb1sndGV4dC1hbGlnbiddID09PSAnc3RhcnQnO1xuICAgICAgfSk7XG4gICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJqdXN0aWZ5Q2VudGVyXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWyd0ZXh0LWFsaWduJ10gPT09ICdjZW50ZXInO1xuICAgICAgfSk7XG4gICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJqdXN0aWZ5UmlnaHRcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdHlsZUluZm9bJ3RleHQtYWxpZ24nXSA9PT0gJ3JpZ2h0JztcbiAgICAgIH0pO1xuICAgICAgYnRuU3RhdGUoJ2J1dHRvbltkYXRhLWV2ZW50PVwianVzdGlmeUZ1bGxcIl0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdHlsZUluZm9bJ3RleHQtYWxpZ24nXSA9PT0gJ2p1c3RpZnknO1xuICAgICAgfSk7XG4gICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJpbnNlcnRVbm9yZGVyZWRMaXN0XCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydsaXN0LXN0eWxlJ10gPT09ICd1bm9yZGVyZWQnO1xuICAgICAgfSk7XG4gICAgICBidG5TdGF0ZSgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJpbnNlcnRPcmRlcmVkTGlzdFwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snbGlzdC1zdHlsZSddID09PSAnb3JkZXJlZCc7XG4gICAgICB9KTtcblxuXG4gICAgICAvLyBtYnJCdG5Db2xvclxuICAgICAgdmFyIGlzTW9kZXJuTWVudSA9ICEhJChzdHlsZUluZm8uYW5jaG9yKS5jbG9zZXN0KCdbZGF0YS1hcHAtbW9kZXJuLW1lbnVdJykubGVuZ3RoO1xuICAgICAgdmFyICRtYnJCdG5Db2xvciA9ICRjb250YWluZXIuZmluZCgnLm5vdGUtbWJyQnRuQ29sb3InKTtcbiAgICAgIHZhciAkbWJyTGlua0NvbG9yID0gJGNvbnRhaW5lci5maW5kKCcubm90ZS1tYnJMaW5rQ29sb3InKTtcbiAgICAgIGlmICgkKHN0eWxlSW5mby5hbmNob3IpLmlzKCcuYnRuOm5vdCgubWJyLW1lbnUtaXRlbSwgLm1ici1lZGl0YWJsZS1tZW51LWl0ZW0pJykpIHtcbiAgICAgICAgJG1ickxpbmtDb2xvci5oaWRlKCk7XG4gICAgICAgICRtYnJCdG5Db2xvci5wYXJlbnQoKS5jc3MoJ2Rpc3BsYXknLCAnJyk7IC8vIC5zaG93KCk7XG4gICAgICAgIGNoZWNrRHJvcGRvd25NZW51KCRtYnJCdG5Db2xvciwgZnVuY3Rpb24gKCRpdGVtKSB7XG4gICAgICAgICAgdmFyIGNoZWNrZWQgPSAkKHN0eWxlSW5mby5hbmNob3IpLmhhc0NsYXNzKCRpdGVtLmRhdGEoJ3ZhbHVlJykpO1xuXG4gICAgICAgICAgLy8gaWYgY2hlY2tlZCAtIGNoYW5nZSBsYWJlbCBvbiBidXR0b25cbiAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gJGl0ZW0uZmluZCgnPiBzcGFuJykuY2xvbmUoKS5jc3MoJ21hcmdpbi1sZWZ0JywgMCk7XG4gICAgICAgICAgICAkbWJyQnRuQ29sb3IuZmluZCgnYnV0dG9uID4gLm5vdGUtY3VycmVudC1tYnJCdG5Db2xvcicpLmh0bWwobGFiZWwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBjaGVja2VkO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gbWVudSBpdGVtXG4gICAgICB9IGVsc2UgaWYgKCQoc3R5bGVJbmZvLmFuY2hvcikuaXMoJy5uYXYtbGlua1tkYXRhLWFwcC1idG5dLCAuZHJvcGRvd24taXRlbVtkYXRhLWFwcC1idG5dJykgJiYgIWlzTW9kZXJuTWVudSkge1xuICAgICAgICAkbWJyQnRuQ29sb3IucGFyZW50KCkuaGlkZSgpO1xuICAgICAgICAkbWJyTGlua0NvbG9yLmhpZGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRtYnJCdG5Db2xvci5wYXJlbnQoKS5oaWRlKCk7XG4gICAgICAgICRtYnJMaW5rQ29sb3Iuc2hvdygpO1xuXG4gICAgICAgIC8vIGxpbmtzXG4gICAgICAgIGlmICgkKHN0eWxlSW5mby5hbmNob3IpLmlzKCdhJykpIHtcbiAgICAgICAgICBjaGVja0Ryb3Bkb3duTWVudSgkbWJyTGlua0NvbG9yLCBmdW5jdGlvbiAoJGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gJChzdHlsZUluZm8uYW5jaG9yKS5oYXNDbGFzcygkaXRlbS5kYXRhKCd2YWx1ZScpKTtcblxuICAgICAgICAgICAgLy8gaWYgbm8gc3BlY2lmaWMgbGluayBjbGFzc2VzIC0gYWRkICd0ZXh0LWxpbmsnIGNsYXNzbmFtZSBzdHlsZXNcbiAgICAgICAgICAgIGlmICgkaXRlbS5kYXRhKCd2YWx1ZScpID09PSAndGV4dC1wcmltYXJ5JyAmJiAhJChzdHlsZUluZm8uYW5jaG9yKS5pcygnLnRleHQtcHJpbWFyeSwnICtcbiAgICAgICAgICAgICAgJy50ZXh0LXN1Y2Nlc3MsJyArXG4gICAgICAgICAgICAgICcudGV4dC1pbmZvLCcgK1xuICAgICAgICAgICAgICAnLnRleHQtd2FybmluZywnICtcbiAgICAgICAgICAgICAgJy50ZXh0LWRhbmdlciwnICtcbiAgICAgICAgICAgICAgJy50ZXh0LXdoaXRlLCcgK1xuICAgICAgICAgICAgICAnLnRleHQtYmxhY2ssJyArXG4gICAgICAgICAgICAgICcudGV4dC1ncmF5JykpIHtcbiAgICAgICAgICAgICAgY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIGNoZWNrZWQgLSBjaGFuZ2UgbGFiZWwgb24gYnV0dG9uXG4gICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICB2YXIgbGFiZWwgPSAkaXRlbS5maW5kKCc+IHNwYW4nKS5jbG9uZSgpLmNzcygnbWFyZ2luLWxlZnQnLCAwKTtcbiAgICAgICAgICAgICAgJG1ickxpbmtDb2xvci5maW5kKCdidXR0b24gPiAubm90ZS1jdXJyZW50LW1ickxpbmtDb2xvcicpLmh0bWwobGFiZWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tlZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cbiAgICAgIC8vIG1ickJ0blJlbW92ZVxuICAgICAgdmFyICRtYnJCdG5SZW1vdmUgPSAkY29udGFpbmVyLmZpbmQoJy5idG5bZGF0YS1uYW1lPVwibWJyQnRuUmVtb3ZlXCJdJyk7XG4gICAgICBpZiAoJG1ickJ0blJlbW92ZS5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGlzTWVudSA9ICQoc3R5bGVJbmZvLmFuY2hvcikuaGFzQ2xhc3MoJ21ici1tZW51LWl0ZW0nKSB8fFxuICAgICAgICAgICAgICAkKHN0eWxlSW5mby5hbmNob3IpLmhhc0NsYXNzKCdtYnItZWRpdGFibGUtbWVudS1pdGVtJyk7XG4gICAgICAgIHZhciB1c2VQYXJlbnQgPSBpc01lbnUgfHxcbiAgICAgICAgICAgICAgJChzdHlsZUluZm8uYW5jaG9yKS5hdHRyKCdkYXRhLWFwcC1idG4nKSA9PT0gJ3BhcmVudCc7XG4gICAgICAgIHZhciBtYnJCdG5SZW1vdmVTaWJsaW5ncyA9IHVzZVBhcmVudCA/XG4gICAgICAgICAgICAgICQoc3R5bGVJbmZvLmFuY2hvcikucGFyZW50KCkuc2libGluZ3MoJ2xpJykuZmluZCgnPiBhJylcbiAgICAgICAgICAgICAgOiAkKHN0eWxlSW5mby5hbmNob3IpLnNpYmxpbmdzKCdidG4sIFtkYXRhLWFwcC1idG5dJyk7XG5cbiAgICAgICAgLy8gZGlzYWJsZSBtYnJCdG5SZW1vdmUgb25seSBmb3IgbWVudSBpdGVtXG4gICAgICAgIGlmIChpc01lbnUpIHtcbiAgICAgICAgICBpZiAoIW1ickJ0blJlbW92ZVNpYmxpbmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgJG1ickJ0blJlbW92ZS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbWJyQnRuUmVtb3ZlLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG1ickZvbnRTaXplXG4gICAgICB2YXIgJG1ickZvbnRzaXplID0gJGNvbnRhaW5lci5maW5kKCcubm90ZS1tYnJGb250cyA+IFtkYXRhLW5hbWU9bWJyRm9udFNpemVdJyk7XG4gICAgICAkbWJyRm9udHNpemUuZmluZCgnLm5vdGUtY3VycmVudC1tYnJGb250U2l6ZScpLnRleHQoc3R5bGVJbmZvWydmb250LXNpemUnXSk7XG4gICAgICBjaGVja0Ryb3Bkb3duTWVudSgkbWJyRm9udHNpemUsIHBhcnNlRmxvYXQoc3R5bGVJbmZvWydmb250LXNpemUnXSkpO1xuXG4gICAgICAvLyBtYnJGb250TmFtZVxuICAgICAgdmFyICRtYnJGb250bmFtZSA9ICRjb250YWluZXIuZmluZCgnLm5vdGUtbWJyRm9udHMgPiBbZGF0YS1uYW1lPW1ickZvbnRzXScpO1xuICAgICAgaWYgKCRtYnJGb250bmFtZS5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkTWJyRm9udCA9IHN0eWxlSW5mb1snZm9udC1mYW1pbHknXTtcbiAgICAgICAgaWYgKCEhc2VsZWN0ZWRNYnJGb250KSB7XG5cbiAgICAgICAgICB2YXIgbWJyRm9udHNMaXN0ID0gc2VsZWN0ZWRNYnJGb250LnNwbGl0KCcsJyk7XG4gICAgICAgICAgZm9yICh2YXIgayA9IDAsIGtsZW4gPSBtYnJGb250c0xpc3QubGVuZ3RoOyBrIDwga2xlbjsgaysrKSB7XG4gICAgICAgICAgICBzZWxlY3RlZE1ickZvbnQgPSBtYnJGb250c0xpc3Rba10ucmVwbGFjZSgvW1xcJ1xcXCJdL2csICcnKS5yZXBsYWNlKC9cXHMrJC8sICcnKS5yZXBsYWNlKC9eXFxzKy8sICcnKTtcbiAgICAgICAgICAgIGlmIChhZ2VudC5pc0ZvbnRJbnN0YWxsZWQoc2VsZWN0ZWRNYnJGb250KSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkbWJyRm9udG5hbWUuZmluZCgnLm5vdGUtY3VycmVudC1tYnJGb250cycpXG4gICAgICAgICAgICAuY3NzKCdmb250LWZhbWlseScsICdcXCcnICsgc2VsZWN0ZWRNYnJGb250ICsgJ1xcJycpXG4gICAgICAgICAgICAudGV4dChzZWxlY3RlZE1ickZvbnQpO1xuICAgICAgICAgIGNoZWNrRHJvcGRvd25NZW51KCRtYnJGb250bmFtZSwgc2VsZWN0ZWRNYnJGb250KTtcblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIG1ickNvbG9yXG4gICAgICB2YXIgJG1ickNvbG9yQnRuID0gJGNvbnRhaW5lci5maW5kKCdbZGF0YS1uYW1lPW1ickNvbG9yXSAuY3VyVGV4dENvbG9yJyk7XG5cbiAgICAgIGlmIChzdHlsZUluZm8uYW5jZXN0b3JzKSB7XG4gICAgICAgIHZhciAkZWRpdGFibGUgPSAkKHN0eWxlSW5mby5hbmNlc3RvcnNbMF0pLnBhcmVudCgpO1xuICAgICAgICB2YXIgb3B0aW9ucyA9ICRlZGl0YWJsZS5kYXRhKCdvcHRpb25zJyk7XG5cbiAgICAgICAgdmFyIHJlbW92ZU1ickNvbG9yQnRuID0gJChzdHlsZUluZm8uYW5jaG9yKS5oYXNDbGFzcygnYnRuJykgfHxcbiAgICAgICAgICAgICAgJChzdHlsZUluZm8uYW5jaG9yKS5pcygnW2RhdGEtYXBwLWJ0bl06bm90KC5tYnItbWVudS1pdGVtLCAubWJyLWVkaXRhYmxlLW1lbnUtaXRlbSwgLm5hdi1saW5rLCAuZHJvcGRvd24taXRlbSknKTtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5jdXN0b21Ub29sYmFyICYmIG9wdGlvbnMuY3VzdG9tVG9vbGJhci5tYnJDb2xvciA9PT0gJ29uJykge1xuICAgICAgICAgIHJlbW92ZU1ickNvbG9yQnRuID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVtb3ZlTWJyQ29sb3JCdG4pIHtcbiAgICAgICAgICAkbWJyQ29sb3JCdG4ucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyICRjdXJyZW50Q29sb3I7XG4gICAgICAgICAgZm9yICh2YXIgbiBpbiBzdHlsZUluZm8uYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICBpZiAoL1B8RElWfFVMfEgxfEgyfEgzfEg0fEg1fEg2L2cudGVzdChzdHlsZUluZm8uYW5jZXN0b3JzW25dLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICRjdXJyZW50Q29sb3IgPSAkKHN0eWxlSW5mby5hbmNlc3RvcnNbbl0pLmNzcygnY29sb3InKTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghJGN1cnJlbnRDb2xvcikge1xuICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkKHN0eWxlSW5mby5hbmNlc3RvcnNbMF0pLnBhcmVudCgpO1xuICAgICAgICAgICAgJGN1cnJlbnRDb2xvciA9ICRwYXJlbnQuY3NzKCdjb2xvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkbWJyQ29sb3JCdG4uY3NzKHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICQuc3VtbWVybm90ZS5hZGFwdENvbG9yRm9yQmcoJGN1cnJlbnRDb2xvciB8fCAnIzAwMCcpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuXG4gICAgICAvLyBtYnJBbGlnblxuICAgICAgdmFyICRtYnJBbGlnbkJ0biA9ICRjb250YWluZXIuZmluZCgnW2RhdGEtbmFtZT1tYnJBbGlnbl0nKTtcbiAgICAgIHZhciAkbWJyQWxpZ25CdG5JY29uID0gJG1ickFsaWduQnRuLmZpbmQoJz4gaScpO1xuICAgICAgc3dpdGNoIChzdHlsZUluZm9bJ3RleHQtYWxpZ24nXSkge1xuICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICRtYnJBbGlnbkJ0bkljb24uYXR0cignY2xhc3MnLCAnbWJyLWljb24tYWxpZ24tbGVmdCcpO1xuICAgICAgICAgIC8vICRtYnJBbGlnbkJ0bi5hdHRyKCdkYXRhLWV2ZW50JywgJ2p1c3RpZnlDZW50ZXInKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICRtYnJBbGlnbkJ0bkljb24uYXR0cignY2xhc3MnLCAnbWJyLWljb24tYWxpZ24tcmlnaHQnKTtcbiAgICAgICAgICAvLyAkbWJyQWxpZ25CdG4uYXR0cignZGF0YS1ldmVudCcsICdqdXN0aWZ5RnVsbCcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAgICRtYnJBbGlnbkJ0bkljb24uYXR0cignY2xhc3MnLCAnbWJyLWljb24tYWxpZ24tY2VudGVyJyk7XG4gICAgICAgICAgLy8gJG1ickFsaWduQnRuLmF0dHIoJ2RhdGEtZXZlbnQnLCAnanVzdGlmeVJpZ2h0Jyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2p1c3RpZnknOlxuICAgICAgICAgICRtYnJBbGlnbkJ0bkljb24uYXR0cignY2xhc3MnLCAnbWJyLWljb24tYWxpZ24tanVzdGlmeScpO1xuICAgICAgICAgIC8vICRtYnJBbGlnbkJ0bi5hdHRyKCdkYXRhLWV2ZW50JywgJ2p1c3RpZnlMZWZ0Jyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHVwZGF0ZSByZWNlbnQgY29sb3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gYnV0dG9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlXG4gICAgICovXG4gICAgdGhpcy51cGRhdGVSZWNlbnRDb2xvciA9IGZ1bmN0aW9uIChidXR0b24sIGV2ZW50TmFtZSwgdmFsdWUpIHtcbiAgICAgIHZhciAkY29sb3IgPSAkKGJ1dHRvbikuY2xvc2VzdCgnLm5vdGUtY29sb3InKTtcbiAgICAgIHZhciAkcmVjZW50Q29sb3IgPSAkY29sb3IuZmluZCgnLm5vdGUtcmVjZW50LWNvbG9yJyk7XG4gICAgICB2YXIgY29sb3JJbmZvID0gSlNPTi5wYXJzZSgkcmVjZW50Q29sb3IuYXR0cignZGF0YS12YWx1ZScpKTtcbiAgICAgIGNvbG9ySW5mb1tldmVudE5hbWVdID0gdmFsdWU7XG4gICAgICAkcmVjZW50Q29sb3IuYXR0cignZGF0YS12YWx1ZScsIEpTT04uc3RyaW5naWZ5KGNvbG9ySW5mbykpO1xuICAgICAgdmFyIHNLZXkgPSBldmVudE5hbWUgPT09ICdiYWNrQ29sb3InID8gJ2JhY2tncm91bmQtY29sb3InIDogJ2NvbG9yJztcbiAgICAgICRyZWNlbnRDb2xvci5maW5kKCdpJykuY3NzKHNLZXksIHZhbHVlKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgbW9kdWxlLlRvb2xiYXJcbiAgICpcbiAgICogVG9vbGJhclxuICAgKi9cbiAgdmFyIFRvb2xiYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGJ1dHRvbiA9IG5ldyBCdXR0b24oKTtcblxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCR0b29sYmFyLCBzdHlsZUluZm8pIHtcbiAgICAgIGJ1dHRvbi51cGRhdGUoJHRvb2xiYXIsIHN0eWxlSW5mbyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Tm9kZX0gYnV0dG9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHRoaXMudXBkYXRlUmVjZW50Q29sb3IgPSBmdW5jdGlvbiAoYnV0dG9uTm9kZSwgZXZlbnROYW1lLCB2YWx1ZSkge1xuICAgICAgYnV0dG9uLnVwZGF0ZVJlY2VudENvbG9yKGJ1dHRvbk5vZGUsIGV2ZW50TmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBhY3RpdmF0ZSBidXR0b25zIGV4Y2x1ZGUgY29kZXZpZXdcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHRvb2xiYXJcbiAgICAgKi9cbiAgICB0aGlzLmFjdGl2YXRlID0gZnVuY3Rpb24gKCR0b29sYmFyKSB7XG4gICAgICAkdG9vbGJhci5maW5kKCdidXR0b24nKVxuICAgICAgICAgICAgICAubm90KCdidXR0b25bZGF0YS1ldmVudD1cImNvZGV2aWV3XCJdJylcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBkZWFjdGl2YXRlIGJ1dHRvbnMgZXhjbHVkZSBjb2Rldmlld1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkdG9vbGJhclxuICAgICAqL1xuICAgIHRoaXMuZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uICgkdG9vbGJhcikge1xuICAgICAgJHRvb2xiYXIuZmluZCgnYnV0dG9uJylcbiAgICAgICAgICAgICAgLm5vdCgnYnV0dG9uW2RhdGEtZXZlbnQ9XCJjb2Rldmlld1wiXScpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtiRnVsbHNjcmVlbj1mYWxzZV1cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZUZ1bGxzY3JlZW4gPSBmdW5jdGlvbiAoJGNvbnRhaW5lciwgYkZ1bGxzY3JlZW4pIHtcbiAgICAgIHZhciAkYnRuID0gJGNvbnRhaW5lci5maW5kKCdidXR0b25bZGF0YS1ldmVudD1cImZ1bGxzY3JlZW5cIl0nKTtcbiAgICAgICRidG4udG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsIGJGdWxsc2NyZWVuKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtpc0NvZGV2aWV3PWZhbHNlXVxuICAgICAqL1xuICAgIHRoaXMudXBkYXRlQ29kZXZpZXcgPSBmdW5jdGlvbiAoJGNvbnRhaW5lciwgaXNDb2Rldmlldykge1xuICAgICAgdmFyICRidG4gPSAkY29udGFpbmVyLmZpbmQoJ2J1dHRvbltkYXRhLWV2ZW50PVwiY29kZXZpZXdcIl0nKTtcbiAgICAgICRidG4udG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsIGlzQ29kZXZpZXcpO1xuXG4gICAgICBpZiAoaXNDb2Rldmlldykge1xuICAgICAgICB0aGlzLmRlYWN0aXZhdGUoJGNvbnRhaW5lcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFjdGl2YXRlKCRjb250YWluZXIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBnZXQgYnV0dG9uIGluIHRvb2xiYXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm4ge2pRdWVyeX1cbiAgICAgKi9cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uICgkZWRpdGFibGUsIG5hbWUpIHtcbiAgICAgIHZhciAkdG9vbGJhciA9IGRvbS5tYWtlTGF5b3V0SW5mbygkZWRpdGFibGUpLnRvb2xiYXIoKTtcblxuICAgICAgcmV0dXJuICR0b29sYmFyLmZpbmQoJ1tkYXRhLW5hbWU9JyArIG5hbWUgKyAnXScpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBzZXQgYnV0dG9uIHN0YXRlXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlZGl0YWJsZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbaXNBY3RpdmU9dHJ1ZV1cbiAgICAgKi9cbiAgICB0aGlzLnNldEJ1dHRvblN0YXRlID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgbmFtZSwgaXNBY3RpdmUpIHtcbiAgICAgIGlzQWN0aXZlID0gKGlzQWN0aXZlID09PSBmYWxzZSkgPyBmYWxzZSA6IHRydWU7XG5cbiAgICAgIHZhciAkYnV0dG9uID0gdGhpcy5nZXQoJGVkaXRhYmxlLCBuYW1lKTtcbiAgICAgICRidXR0b24udG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsIGlzQWN0aXZlKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBFRElUQUJMRV9QQURESU5HID0gMjQ7XG5cbiAgdmFyIFN0YXR1c2JhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG5cbiAgICB0aGlzLmF0dGFjaCA9IGZ1bmN0aW9uIChsYXlvdXRJbmZvLCBvcHRpb25zKSB7XG4gICAgICBpZiAoIW9wdGlvbnMuZGlzYWJsZVJlc2l6ZUVkaXRvcikge1xuICAgICAgICBsYXlvdXRJbmZvLnN0YXR1c2JhcigpLm9uKCdtb3VzZWRvd24nLCBoU3RhdHVzYmFyTW91c2Vkb3duKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYG1vdXNlZG93bmAgZXZlbnQgaGFuZGxlciBvbiBzdGF0dXNiYXJcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnRcbiAgICAgKi9cbiAgICB2YXIgaFN0YXR1c2Jhck1vdXNlZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICB2YXIgJGVkaXRhYmxlID0gZG9tLm1ha2VMYXlvdXRJbmZvKGV2ZW50LnRhcmdldCkuZWRpdGFibGUoKTtcbiAgICAgIHZhciBlZGl0YWJsZVRvcCA9ICRlZGl0YWJsZS5vZmZzZXQoKS50b3AgLSAkZG9jdW1lbnQuc2Nyb2xsVG9wKCk7XG5cbiAgICAgIHZhciBsYXlvdXRJbmZvID0gZG9tLm1ha2VMYXlvdXRJbmZvKGV2ZW50LmN1cnJlbnRUYXJnZXQgfHwgZXZlbnQudGFyZ2V0KTtcbiAgICAgIHZhciBvcHRpb25zID0gbGF5b3V0SW5mby5lZGl0b3IoKS5kYXRhKCdvcHRpb25zJyk7XG5cbiAgICAgICRkb2N1bWVudC5vbignbW91c2Vtb3ZlLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG5IZWlnaHQgPSBldmVudC5jbGllbnRZIC0gKGVkaXRhYmxlVG9wICsgRURJVEFCTEVfUEFERElORyk7XG5cbiAgICAgICAgbkhlaWdodCA9IChvcHRpb25zLm1pbkhlaWdodCA+IDApID8gTWF0aC5tYXgobkhlaWdodCwgb3B0aW9ucy5taW5IZWlnaHQpIDogbkhlaWdodDtcbiAgICAgICAgbkhlaWdodCA9IChvcHRpb25zLm1heEhlaWdodCA+IDApID8gTWF0aC5taW4obkhlaWdodCwgb3B0aW9ucy5tYXhIZWlnaHQpIDogbkhlaWdodDtcblxuICAgICAgICAkZWRpdGFibGUuaGVpZ2h0KG5IZWlnaHQpO1xuICAgICAgfSkub25lKCdtb3VzZXVwLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRkb2N1bWVudC5vZmYoJ21vdXNlbW92ZS5zdW1tZXJub3RlJyk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgbW9kdWxlLlBvcG92ZXJcbiAgICpcbiAgICogUG9wb3ZlciAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jcG9wb3ZlcnMpXG4gICAqXG4gICAqL1xuICB2YXIgUG9wb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYnV0dG9uID0gbmV3IEJ1dHRvbigpO1xuXG4gICAgdmFyIFBYX1BPUE9WRVJfQVJST1dfT0ZGU0VUX1ggPSAtMTE7XG4gICAgdmFyIFBPUE9WRVJfTUFYX0xfT0ZGU0VUID0gNTtcbiAgICB2YXIgUE9QT1ZFUl9NQVhfUl9PRkZTRVQgPSA1O1xuICAgIHZhciBQT1BPVkVSX01BWF9UX09GRlNFVCA9IDIwO1xuICAgIC8vIHdoZW4gcG9wb3ZlciB0b3Agb2Zmc2V0IDwgTUFYX1RPUF9PRkZTRVQgLSBzaG93IGRyb3Bkb3duLCBlbHNlIC0gZHJvcHVwXG4gICAgdmFyIERST1BET1dOX01BWF9UT1BfT0ZGU0VUID0gMjAwO1xuXG4gICAgLyoqXG4gICAgICogcmV0dXJucyBwb3NpdGlvbiBmcm9tIHBsYWNlaG9sZGVyXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gcGxhY2Vob2xkZXJcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQWlyTW9kZVxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHJldHVybi5sZWZ0XG4gICAgICogQHJldHVybiB7TnVtYmVyfSByZXR1cm4udG9wXG4gICAgICovXG4gICAgdmFyIHBvc0Zyb21QbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChwbGFjZWhvbGRlciwgaXNBaXJNb2RlLCBzdHlsZUluZm8pIHtcbiAgICAgIHZhciAkcGxhY2Vob2xkZXIgPSAkKHBsYWNlaG9sZGVyKTtcbiAgICAgIHZhciBwb3MgPSBpc0Fpck1vZGUgPyAkcGxhY2Vob2xkZXIub2Zmc2V0KCkgOiAkcGxhY2Vob2xkZXIucG9zaXRpb24oKTtcbiAgICAgIHZhciB3aWR0aCA9ICRwbGFjZWhvbGRlci5vdXRlcldpZHRoKHRydWUpOyAvLyBpbmNsdWRlIG1hcmdpblxuXG4gICAgICAvLyBwb3BvdmVyIGJlbG93IHBsYWNlaG9sZGVyLlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVmdDogcG9zLmxlZnQgKyB3aWR0aCAvIDIsXG4gICAgICAgIHRvcDogcG9zLnRvcCxcbiAgICAgICAgbGluZUhlaWdodDogc3R5bGVJbmZvLmFuY2VzdG9yc1swXSA/ICQoc3R5bGVJbmZvLmFuY2VzdG9yc1swXS5wYXJlbnROb2RlKS5vdXRlckhlaWdodCgpIDogJydcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2VuZXJhdGUgUG9zaXRpb24gb2YgUG9wb3ZlclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gcG9wb3ZlclxuICAgICAqIEBwYXJhbSB7UG9zaXRpb259IHBvc1xuICAgICAqL1xuICAgIHZhciByZWdlbmVyYXRlUG9zaXRpb24gPSBmdW5jdGlvbiAoJHBvcG92ZXIsIHBvcykge1xuICAgICAgdmFyIHduZFdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cbiAgICAgIC8vIGdldCBwb3BvdmVyIHNpemVzXG4gICAgICAkcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiBQT1BPVkVSX01BWF9MX09GRlNFVCxcbiAgICAgICAgdG9wOiBQT1BPVkVSX01BWF9UX09GRlNFVFxuICAgICAgfSk7XG4gICAgICB2YXIgcG9wb3ZlcldpZHRoID0gJHBvcG92ZXIub3V0ZXJXaWR0aCgpO1xuICAgICAgdmFyIHBvcG92ZXJIZWlnaHQgPSAkcG9wb3Zlci5vdXRlckhlaWdodCgpO1xuICAgICAgJHBvcG92ZXIuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcblxuICAgICAgLy8gc2V0IG5ldyBwb3NpdGlvblxuICAgICAgcG9zLmxlZnQgPSBwb3MubGVmdCAtIHBvcG92ZXJXaWR0aCAvIDI7XG5cbiAgICAgIC8vIHdoZW4gcG9wb3ZlciB0b3AgPCBQT1BPVkVSX01BWF9UX09GRlNFVCAtIHJlZ2VuZXJhdGUgcG9zaXRpb25cbiAgICAgIGlmIChwb3MudG9wIC0gcG9wb3ZlckhlaWdodCA8IFBPUE9WRVJfTUFYX1RfT0ZGU0VUKSB7XG4gICAgICAgICRwb3BvdmVyLnJlbW92ZUNsYXNzKCd0b3AnKS5hZGRDbGFzcygnYm90dG9tJyk7XG4gICAgICAgIHBvcy50b3AgPSBwb3MudG9wICsgcGFyc2VGbG9hdChwb3MubGluZUhlaWdodCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkcG9wb3Zlci5yZW1vdmVDbGFzcygnYm90dG9tJykuYWRkQ2xhc3MoJ3RvcCcpO1xuICAgICAgICBwb3MudG9wID0gcG9zLnRvcCAtIHBvcG92ZXJIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIC8vIHdoZW4gcG9wb3ZlciBsZWZ0IDwgMCBhbmQgcmlnaHQgPiB3aW5kb3cgd2lkdGggLSByZWdlbmVyYXRlIHBvc2l0aW9uXG4gICAgICB2YXIgb2xkTGVmdCA9IHBvcy5sZWZ0O1xuICAgICAgaWYgKHBvcy5sZWZ0IDwgUE9QT1ZFUl9NQVhfTF9PRkZTRVQpIHtcbiAgICAgICAgcG9zLmxlZnQgPSBQT1BPVkVSX01BWF9MX09GRlNFVDtcbiAgICAgIH0gZWxzZSBpZiAocG9zLmxlZnQgKyBwb3BvdmVyV2lkdGggPiAod25kV2lkdGggLSBQT1BPVkVSX01BWF9SX09GRlNFVCAqIDIpKSB7XG4gICAgICAgIHBvcy5sZWZ0ID0gKHduZFdpZHRoIC0gUE9QT1ZFUl9NQVhfUl9PRkZTRVQgKiAyKSAtIHBvcG92ZXJXaWR0aDtcbiAgICAgIH1cblxuICAgICAgLy8gZml4IGRyb3Bkb3duc1xuICAgICAgdmFyICRkcm9wZG93bnMgPSAkcG9wb3Zlci5maW5kKCcuZHJvcGRvd24tbWVudScpLnBhcmVudCgnLmJ0bi1ncm91cCcpO1xuICAgICAgaWYgKHBvcy50b3AgPCBEUk9QRE9XTl9NQVhfVE9QX09GRlNFVCkge1xuICAgICAgICAkZHJvcGRvd25zLnJlbW92ZUNsYXNzKCdkcm9wdXAnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRkcm9wZG93bnMuYWRkQ2xhc3MoJ2Ryb3B1cCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBmaXggYXJyb3cgcG9zaXRpb25cbiAgICAgIHZhciBhcnJvd01hcmdpbkxlZnQgPSBQWF9QT1BPVkVSX0FSUk9XX09GRlNFVF9YICsgb2xkTGVmdCAtIHBvcy5sZWZ0O1xuICAgICAgJHBvcG92ZXIuZmluZCgnPiAuYXJyb3cnKS5jc3MoJ21hcmdpbi1sZWZ0JywgYXJyb3dNYXJnaW5MZWZ0KTtcbiAgICAgIHJldHVybiBwb3M7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHNob3cgcG9wb3ZlclxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gcG9wb3ZlclxuICAgICAqIEBwYXJhbSB7UG9zaXRpb259IHBvc1xuICAgICAqL1xuICAgIHZhciBzaG93UG9wb3ZlciA9IGZ1bmN0aW9uKCRwb3BvdmVyLCBwb3MpIHtcbiAgICAgIHBvcyA9IHJlZ2VuZXJhdGVQb3NpdGlvbigkcG9wb3ZlciwgcG9zKTtcblxuICAgICAgJHBvcG92ZXIuY3NzKHtcbiAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgIGxlZnQ6IHBvcy5sZWZ0LFxuICAgICAgICAgIHRvcDogcG9zLnRvcFxuICAgICAgfSk7XG4gICAgfTtcblxuXHR0aGlzLmFkZEdyb3VwID0gcmVuZGVyZXIuYWRkR3JvdXA7XG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGUgY3VycmVudCBzdGF0ZVxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkcG9wb3ZlciAtIHBvcG92ZXIgY29udGFpbmVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlSW5mbyAtIHN0eWxlIG9iamVjdFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBaXJNb2RlXG4gICAgICovXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoJHBvcG92ZXIsIHN0eWxlSW5mbywgaXNBaXJNb2RlKSB7XG4gICAgICBidXR0b24udXBkYXRlKCRwb3BvdmVyLCBzdHlsZUluZm8pO1xuICAgICAgdmFyIGlzQnRuUG9wb3ZlciA9IHN0eWxlSW5mby5hbmNob3IgJiYgL2J0bnxtYnItbWVudS1pdGVtfG1ici1lZGl0YWJsZS1tZW51LWl0ZW0vZy50ZXN0KHN0eWxlSW5mby5hbmNob3IuY2xhc3NOYW1lKTtcbiAgICAgIGlmICghaXNCdG5Qb3BvdmVyICYmIHN0eWxlSW5mby5hbmNob3IpIHtcbiAgICAgICAgaXNCdG5Qb3BvdmVyID0gISEkKHN0eWxlSW5mby5hbmNob3IpLmF0dHIoJ2RhdGEtYXBwLWJ0bicpO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXNDb2xsYXBzZWQgPSBzdHlsZUluZm8ucmFuZ2UgJiYgc3R5bGVJbmZvLnJhbmdlLmlzQ29sbGFwc2VkKCk7XG4gICAgICB2YXIgaXNMaW5rID0gaXNDb2xsYXBzZWQgJiYgc3R5bGVJbmZvLmFuY2hvciAmJiAhaXNCdG5Qb3BvdmVyO1xuXG4gICAgICB2YXIgJGxpbmtQb3BvdmVyID0gJHBvcG92ZXIuZmluZCgnLm5vdGUtbGluay1wb3BvdmVyJyk7XG4gICAgICBpZiAoaXNMaW5rKSB7XG4gICAgICAgIHZhciAkYW5jaG9yID0gJGxpbmtQb3BvdmVyLmZpbmQoJ2E6ZXEoMCknKTtcbiAgICAgICAgdmFyIGhyZWYgPSAkKHN0eWxlSW5mby5hbmNob3IpLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQoc3R5bGVJbmZvLmFuY2hvcikuYXR0cigndGFyZ2V0Jyk7XG4gICAgICAgICRhbmNob3IuaHRtbChocmVmKTtcbiAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAkYW5jaG9yLnJlbW92ZUF0dHIoJ3RhcmdldCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRhbmNob3IuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICB9XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2hvd1BvcG92ZXIoJGxpbmtQb3BvdmVyLCBwb3NGcm9tUGxhY2Vob2xkZXIoc3R5bGVJbmZvLmFuY2hvciwgaXNBaXJNb2RlLCBzdHlsZUluZm8pLCBzdHlsZUluZm8pO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsaW5rUG9wb3Zlci5oaWRlKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciAkYnV0dG9uUG9wb3ZlciA9ICRwb3BvdmVyLmZpbmQoJy5ub3RlLWJ1dHRvbi1wb3BvdmVyJyk7XG4gICAgICBpZiAoaXNCdG5Qb3BvdmVyKSB7XG4gICAgICAgIHZhciBidG5Qb3MgPSBwb3NGcm9tUGxhY2Vob2xkZXIoc3R5bGVJbmZvLmFuY2hvciwgaXNBaXJNb2RlLCBzdHlsZUluZm8pO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAvLyBmaXhlZCBidWcgd2l0aCBTdW1tZXJub3RlJ3MgYmxpbmtpbmc7IHNvbWV0aW1lcyBJIGhhdmUgdG8gZG8gYmFkIHRoaW5nc1xuICAgICAgICAgIHNob3dQb3BvdmVyKCRidXR0b25Qb3BvdmVyLCBidG5Qb3MpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRidXR0b25Qb3BvdmVyLmhpZGUoKTtcbiAgICAgIH1cblxuICAgICAgdmFyICRpbWFnZVBvcG92ZXIgPSAkcG9wb3Zlci5maW5kKCcubm90ZS1pbWFnZS1wb3BvdmVyJyk7XG4gICAgICBpZiAoc3R5bGVJbmZvLmltYWdlKSB7XG4gICAgICAgIHNob3dQb3BvdmVyKCRpbWFnZVBvcG92ZXIsIHBvc0Zyb21QbGFjZWhvbGRlcihzdHlsZUluZm8uaW1hZ2UsIGlzQWlyTW9kZSwgc3R5bGVJbmZvKSwgc3R5bGVJbmZvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRpbWFnZVBvcG92ZXIuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgJGFpclBvcG92ZXIgPSAkcG9wb3Zlci5maW5kKCcubm90ZS1haXItcG9wb3ZlcicpO1xuICAgICAgaWYgKGlzQWlyTW9kZSAmJiBzdHlsZUluZm8ucmFuZ2UgJiYgIWlzQnRuUG9wb3ZlciAmJiAhaXNMaW5rKSB7XG4gICAgICAgIHZhciByZWN0ID0gc3R5bGVJbmZvLnJhbmdlLmdldENsaWVudFJlY3RzKCk7XG5cbiAgICAgICAgaWYgKHJlY3RbMF0pIHtcbiAgICAgICAgICAvLyBmaXggcmVjdCByZXN1bHRcbiAgICAgICAgICB2YXIgZml4ZWRXaWR0aFJlc3VsdCA9IDA7XG4gICAgICAgICAgdmFyIGZpeGVkUmlnaHRSZXN1bHQgPSAwO1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gcmVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWN0W2tdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICBpZiAocmVjdFtrXS50b3AgPT09IHJlY3RbMF0udG9wKSB7XG4gICAgICAgICAgICAgICAgZml4ZWRXaWR0aFJlc3VsdCArPSByZWN0W2tdLndpZHRoO1xuICAgICAgICAgICAgICAgIGZpeGVkUmlnaHRSZXN1bHQgPSByZWN0W2tdLnJpZ2h0O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlY3QgPSB7XG4gICAgICAgICAgICBib3R0b206IHJlY3RbMF0uYm90dG9tLFxuICAgICAgICAgICAgaGVpZ2h0OiByZWN0WzBdLmhlaWdodCxcbiAgICAgICAgICAgIGxlZnQ6IHJlY3RbMF0ubGVmdCxcbiAgICAgICAgICAgIHRvcDogcmVjdFswXS50b3AsXG4gICAgICAgICAgICByaWdodDogZml4ZWRSaWdodFJlc3VsdCxcbiAgICAgICAgICAgIHdpZHRoOiBmaXhlZFdpZHRoUmVzdWx0XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciAkZm9udCA9ICRhaXJQb3BvdmVyLmZpbmQoJy5ub3RlLWZvbnQnKTtcbiAgICAgICAgICB2YXIgJGxpc3RzID0gJGFpclBvcG92ZXIuZmluZCgnLm5vdGUtcGFyYScpO1xuICAgICAgICAgIHZhciAkc3R5bGUgPSAkYWlyUG9wb3Zlci5maW5kKCcubm90ZS1zdHlsZScpO1xuICAgICAgICAgIHZhciAkbWJyTGluayA9ICRhaXJQb3BvdmVyLmZpbmQoJy5ub3RlLW1ickxpbmsnKTtcbiAgICAgICAgICB2YXIgJG1ickZvbnRzID0gJGFpclBvcG92ZXIuZmluZCgnLm5vdGUtbWJyRm9udHMnKTtcbiAgICAgICAgICB2YXIgJG1ickFsaWduID0gJGFpclBvcG92ZXIuZmluZCgnYnV0dG9uW2RhdGEtbmFtZT1tYnJBbGlnbl0nKTtcblxuICAgICAgICAgIHZhciBwb3M7XG5cbiAgICAgICAgICAvLyB3aGVuIHNlbGVjdGVkIHRleHRcbiAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIC8vIGhpZGUgTElOSywgQiBhbmQgSSBidXR0b25zXG4gICAgICAgICAgICAkZm9udC5oaWRlKCk7XG4gICAgICAgICAgICAkbWJyTGluay5oaWRlKCk7XG4gICAgICAgICAgICAvLyBzaG93IGxpc3RzLCBzdHlsZSwgZm9udHMsIGNvbG9ycyBhbmQgYWxpZ24gYnV0dG9uc1xuICAgICAgICAgICAgJGxpc3RzLnNob3coKTtcbiAgICAgICAgICAgICRzdHlsZS5zaG93KCk7XG4gICAgICAgICAgICAkbWJyRm9udHMuc2hvdygpO1xuICAgICAgICAgICAgJG1ickFsaWduLnNob3coKTtcblxuICAgICAgICAgICAgdmFyIGNoYW5nZWRJdGVtO1xuICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBzdHlsZUluZm8uYW5jZXN0b3JzKSB7XG4gICAgICAgICAgICAgIGlmICgvUHxESVZ8VUx8SDF8SDJ8SDN8SDR8SDV8SDYvZy50ZXN0KHN0eWxlSW5mby5hbmNlc3RvcnNbbl0udGFnTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VkSXRlbSA9IHN0eWxlSW5mby5hbmNlc3RvcnNbbl07XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2hhbmdlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgY2hhbmdlZEl0ZW0gPSAkKHN0eWxlSW5mby5hbmNlc3RvcnNbMF0pLnBhcmVudCgpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaGFuZ2VkSXRlbSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSBwb3NGcm9tUGxhY2Vob2xkZXIoY2hhbmdlZEl0ZW0sIGlzQWlyTW9kZSwgc3R5bGVJbmZvKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd25laCBub25lIHNlbGVjdGlvblxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gc2hvdyBMSU5LLCBCIGFuZCBJIGJ1dHRvbnNcbiAgICAgICAgICAgICRmb250LnNob3coKTtcbiAgICAgICAgICAgICRtYnJMaW5rLnNob3coKTtcbiAgICAgICAgICAgIC8vIGhpZGUgbGlzdHMsIHN0eWxlLCBmb250cywgY29sb3JzIGFuZCBhbGlnbiBidXR0b25zXG4gICAgICAgICAgICAkbGlzdHMuaGlkZSgpO1xuICAgICAgICAgICAgJHN0eWxlLmhpZGUoKTtcbiAgICAgICAgICAgICRtYnJGb250cy5oaWRlKCk7XG4gICAgICAgICAgICAkbWJyQWxpZ24uaGlkZSgpO1xuXG4gICAgICAgICAgICB2YXIgYm5kID0gZnVuYy5yZWN0MmJuZChyZWN0KTtcbiAgICAgICAgICAgIHBvcyA9IHtcbiAgICAgICAgICAgICAgbGVmdDogTWF0aC5tYXgoYm5kLmxlZnQgKyBibmQud2lkdGggLyAyLCAwKSxcbiAgICAgICAgICAgICAgdG9wOiBibmQudG9wLFxuICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiBzdHlsZUluZm8uYW5jZXN0b3JzWzBdID8gJChzdHlsZUluZm8uYW5jZXN0b3JzWzBdLnBhcmVudE5vZGUpLm91dGVySGVpZ2h0KCkgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc2hvd1BvcG92ZXIoJGFpclBvcG92ZXIsIHBvcyk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRhaXJQb3BvdmVyLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtOb2RlfSBidXR0b25cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgdGhpcy51cGRhdGVSZWNlbnRDb2xvciA9IGZ1bmN0aW9uIChidXR0b24sIGV2ZW50TmFtZSwgdmFsdWUpIHtcbiAgICAgIGJ1dHRvbi51cGRhdGVSZWNlbnRDb2xvcihidXR0b24sIGV2ZW50TmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBoaWRlIGFsbCBwb3BvdmVyc1xuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkcG9wb3ZlciAtIHBvcG92ZXIgY29udGFpbmVyXG4gICAgICovXG4gICAgdGhpcy5oaWRlID0gZnVuY3Rpb24gKCRwb3BvdmVyKSB7XG4gICAgICAkcG9wb3Zlci5jaGlsZHJlbigpLmhpZGUoKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3MgbW9kdWxlLkhhbmRsZVxuICAgKlxuICAgKiBIYW5kbGVcbiAgICovXG4gIHZhciBIYW5kbGUgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIHZhciAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcblxuICAgIC8qKlxuICAgICAqIGBtb3VzZWRvd25gIGV2ZW50IGhhbmRsZXIgb24gJGhhbmRsZVxuICAgICAqICAtIGNvbnRyb2xTaXppbmc6IHJlc2l6ZSBpbWFnZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudFxuICAgICAqL1xuICAgIHZhciBoSGFuZGxlTW91c2Vkb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZG9tLmlzQ29udHJvbFNpemluZyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHZhciBsYXlvdXRJbmZvID0gZG9tLm1ha2VMYXlvdXRJbmZvKGV2ZW50LnRhcmdldCksXG4gICAgICAgICAgICAkaGFuZGxlID0gbGF5b3V0SW5mby5oYW5kbGUoKSxcbiAgICAgICAgICAgICRwb3BvdmVyID0gbGF5b3V0SW5mby5wb3BvdmVyKCksXG4gICAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCksXG4gICAgICAgICAgICAkZWRpdG9yID0gbGF5b3V0SW5mby5lZGl0b3IoKTtcblxuICAgICAgICB2YXIgdGFyZ2V0ID0gJGhhbmRsZS5maW5kKCcubm90ZS1jb250cm9sLXNlbGVjdGlvbicpLmRhdGEoJ3RhcmdldCcpLFxuICAgICAgICAgICAgJHRhcmdldCA9ICQodGFyZ2V0KSwgcG9zU3RhcnQgPSAkdGFyZ2V0Lm9mZnNldCgpLFxuICAgICAgICAgICAgc2Nyb2xsVG9wID0gJGRvY3VtZW50LnNjcm9sbFRvcCgpO1xuXG4gICAgICAgIHZhciBpc0Fpck1vZGUgPSAkZWRpdG9yLmRhdGEoJ29wdGlvbnMnKS5haXJNb2RlO1xuXG4gICAgICAgICRkb2N1bWVudC5vbignbW91c2Vtb3ZlLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBoYW5kbGVyLmludm9rZSgnZWRpdG9yLnJlc2l6ZVRvJywge1xuICAgICAgICAgICAgeDogZXZlbnQuY2xpZW50WCAtIHBvc1N0YXJ0LmxlZnQsXG4gICAgICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gKHBvc1N0YXJ0LnRvcCAtIHNjcm9sbFRvcClcbiAgICAgICAgICB9LCAkdGFyZ2V0LCAhZXZlbnQuc2hpZnRLZXkpO1xuXG4gICAgICAgICAgaGFuZGxlci5pbnZva2UoJ2hhbmRsZS51cGRhdGUnLCAkaGFuZGxlLCB7aW1hZ2U6IHRhcmdldH0sIGlzQWlyTW9kZSk7XG4gICAgICAgICAgaGFuZGxlci5pbnZva2UoJ3BvcG92ZXIudXBkYXRlJywgJHBvcG92ZXIsIHtpbWFnZTogdGFyZ2V0fSwgaXNBaXJNb2RlKTtcbiAgICAgICAgfSkub25lKCdtb3VzZXVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRkb2N1bWVudC5vZmYoJ21vdXNlbW92ZS5zdW1tZXJub3RlJyk7XG4gICAgICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5hZnRlckNvbW1hbmQnLCAkZWRpdGFibGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoISR0YXJnZXQuZGF0YSgncmF0aW8nKSkgeyAvLyBvcmlnaW5hbCByYXRpby5cbiAgICAgICAgICAkdGFyZ2V0LmRhdGEoJ3JhdGlvJywgJHRhcmdldC5oZWlnaHQoKSAvICR0YXJnZXQud2lkdGgoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hdHRhY2ggPSBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgbGF5b3V0SW5mby5oYW5kbGUoKS5vbignbW91c2Vkb3duLnN1bW1lcm5vdGUnLCBoSGFuZGxlTW91c2Vkb3duKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogdXBkYXRlIGhhbmRsZVxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkaGFuZGxlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlSW5mb1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNBaXJNb2RlXG4gICAgICovXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoJGhhbmRsZSwgc3R5bGVJbmZvLCBpc0Fpck1vZGUpIHtcbiAgICAgIHZhciAkc2VsZWN0aW9uID0gJGhhbmRsZS5maW5kKCcubm90ZS1jb250cm9sLXNlbGVjdGlvbicpO1xuICAgICAgaWYgKHN0eWxlSW5mby5pbWFnZSkge1xuICAgICAgICB2YXIgJGltYWdlID0gJChzdHlsZUluZm8uaW1hZ2UpO1xuICAgICAgICB2YXIgcG9zID0gaXNBaXJNb2RlID8gJGltYWdlLm9mZnNldCgpIDogJGltYWdlLnBvc2l0aW9uKCk7XG5cbiAgICAgICAgLy8gaW5jbHVkZSBtYXJnaW5cbiAgICAgICAgdmFyIGltYWdlU2l6ZSA9IHtcbiAgICAgICAgICB3OiAkaW1hZ2Uub3V0ZXJXaWR0aCh0cnVlKSxcbiAgICAgICAgICBoOiAkaW1hZ2Uub3V0ZXJIZWlnaHQodHJ1ZSlcbiAgICAgICAgfTtcblxuICAgICAgICAkc2VsZWN0aW9uLmNzcyh7XG4gICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICAgICAgICB0b3A6IHBvcy50b3AsXG4gICAgICAgICAgd2lkdGg6IGltYWdlU2l6ZS53LFxuICAgICAgICAgIGhlaWdodDogaW1hZ2VTaXplLmhcbiAgICAgICAgfSkuZGF0YSgndGFyZ2V0Jywgc3R5bGVJbmZvLmltYWdlKTsgLy8gc2F2ZSBjdXJyZW50IGltYWdlIGVsZW1lbnQuXG4gICAgICAgIHZhciBzaXppbmdUZXh0ID0gaW1hZ2VTaXplLncgKyAneCcgKyBpbWFnZVNpemUuaDtcbiAgICAgICAgJHNlbGVjdGlvbi5maW5kKCcubm90ZS1jb250cm9sLXNlbGVjdGlvbi1pbmZvJykudGV4dChzaXppbmdUZXh0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzZWxlY3Rpb24uaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBoaWRlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGhhbmRsZVxuICAgICAqL1xuICAgIHRoaXMuaGlkZSA9IGZ1bmN0aW9uICgkaGFuZGxlKSB7XG4gICAgICAkaGFuZGxlLmNoaWxkcmVuKCkuaGlkZSgpO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIEZ1bGxzY3JlZW4gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuICAgIHZhciAkc2Nyb2xsYmFyID0gJCgnaHRtbCwgYm9keScpO1xuXG4gICAgLyoqXG4gICAgICogdG9nZ2xlIGZ1bGxzY3JlZW5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICovXG4gICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuXG4gICAgICB2YXIgJGVkaXRvciA9IGxheW91dEluZm8uZWRpdG9yKCksXG4gICAgICAgICAgJHRvb2xiYXIgPSBsYXlvdXRJbmZvLnRvb2xiYXIoKSxcbiAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCksXG4gICAgICAgICAgJGNvZGFibGUgPSBsYXlvdXRJbmZvLmNvZGFibGUoKTtcblxuICAgICAgdmFyIHJlc2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgICRlZGl0YWJsZS5jc3MoJ2hlaWdodCcsIHNpemUuaCk7XG4gICAgICAgICRjb2RhYmxlLmNzcygnaGVpZ2h0Jywgc2l6ZS5oKTtcbiAgICAgICAgaWYgKCRjb2RhYmxlLmRhdGEoJ2NtZWRpdG9yJykpIHtcbiAgICAgICAgICAkY29kYWJsZS5kYXRhKCdjbWVkaXRvcicpLnNldHNpemUobnVsbCwgc2l6ZS5oKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJGVkaXRvci50b2dnbGVDbGFzcygnZnVsbHNjcmVlbicpO1xuICAgICAgdmFyIGlzRnVsbHNjcmVlbiA9ICRlZGl0b3IuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKTtcbiAgICAgIGlmIChpc0Z1bGxzY3JlZW4pIHtcbiAgICAgICAgJGVkaXRhYmxlLmRhdGEoJ29yZ2hlaWdodCcsICRlZGl0YWJsZS5jc3MoJ2hlaWdodCcpKTtcblxuICAgICAgICAkd2luZG93Lm9uKCdyZXNpemUuc3VtbWVybm90ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXNpemUoe1xuICAgICAgICAgICAgaDogJHdpbmRvdy5oZWlnaHQoKSAtICR0b29sYmFyLm91dGVySGVpZ2h0KClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkudHJpZ2dlcigncmVzaXplJyk7XG5cbiAgICAgICAgJHNjcm9sbGJhci5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHdpbmRvdy5vZmYoJ3Jlc2l6ZS5zdW1tZXJub3RlJyk7XG4gICAgICAgIHJlc2l6ZSh7XG4gICAgICAgICAgaDogJGVkaXRhYmxlLmRhdGEoJ29yZ2hlaWdodCcpXG4gICAgICAgIH0pO1xuICAgICAgICAkc2Nyb2xsYmFyLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuICAgICAgfVxuXG4gICAgICBoYW5kbGVyLmludm9rZSgndG9vbGJhci51cGRhdGVGdWxsc2NyZWVuJywgJHRvb2xiYXIsIGlzRnVsbHNjcmVlbik7XG4gICAgfTtcbiAgfTtcblxuXG4gIHZhciBDb2RlTWlycm9yO1xuICBpZiAoYWdlbnQuaGFzQ29kZU1pcnJvcikge1xuICAgIGlmIChhZ2VudC5pc1N1cHBvcnRBbWQpIHtcbiAgICAgIHJlcXVpcmUoWydDb2RlTWlycm9yJ10sIGZ1bmN0aW9uIChjbSkge1xuICAgICAgICBDb2RlTWlycm9yID0gY207XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgQ29kZU1pcnJvciA9IHdpbmRvdy5Db2RlTWlycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAY2xhc3MgQ29kZXZpZXdcbiAgICovXG4gIHZhciBDb2RldmlldyA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG5cbiAgICB0aGlzLnN5bmMgPSBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgdmFyIGlzQ29kZXZpZXcgPSBoYW5kbGVyLmludm9rZSgnY29kZXZpZXcuaXNBY3RpdmF0ZWQnLCBsYXlvdXRJbmZvKTtcbiAgICAgIGlmIChpc0NvZGV2aWV3ICYmIGFnZW50Lmhhc0NvZGVNaXJyb3IpIHtcbiAgICAgICAgbGF5b3V0SW5mby5jb2RhYmxlKCkuZGF0YSgnY21FZGl0b3InKS5zYXZlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmlzQWN0aXZhdGVkID0gZnVuY3Rpb24gKGxheW91dEluZm8pIHtcbiAgICAgIHZhciAkZWRpdG9yID0gbGF5b3V0SW5mby5lZGl0b3IoKTtcbiAgICAgIHJldHVybiAkZWRpdG9yLmhhc0NsYXNzKCdjb2RldmlldycpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiB0b2dnbGUgY29kZXZpZXdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICovXG4gICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgaWYgKHRoaXMuaXNBY3RpdmF0ZWQobGF5b3V0SW5mbykpIHtcbiAgICAgICAgdGhpcy5kZWFjdGl2YXRlKGxheW91dEluZm8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZShsYXlvdXRJbmZvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYWN0aXZhdGUgY29kZSB2aWV3XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbGF5b3V0SW5mb1xuICAgICAqL1xuICAgIHRoaXMuYWN0aXZhdGUgPSBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgdmFyICRlZGl0b3IgPSBsYXlvdXRJbmZvLmVkaXRvcigpLFxuICAgICAgICAgICR0b29sYmFyID0gbGF5b3V0SW5mby50b29sYmFyKCksXG4gICAgICAgICAgJGVkaXRhYmxlID0gbGF5b3V0SW5mby5lZGl0YWJsZSgpLFxuICAgICAgICAgICRjb2RhYmxlID0gbGF5b3V0SW5mby5jb2RhYmxlKCksXG4gICAgICAgICAgJHBvcG92ZXIgPSBsYXlvdXRJbmZvLnBvcG92ZXIoKSxcbiAgICAgICAgICAkaGFuZGxlID0gbGF5b3V0SW5mby5oYW5kbGUoKTtcblxuICAgICAgdmFyIG9wdGlvbnMgPSAkZWRpdG9yLmRhdGEoJ29wdGlvbnMnKTtcblxuICAgICAgJGNvZGFibGUudmFsKGRvbS5odG1sKCRlZGl0YWJsZSwgb3B0aW9ucy5wcmV0dGlmeUh0bWwpKTtcbiAgICAgICRjb2RhYmxlLmhlaWdodCgkZWRpdGFibGUuaGVpZ2h0KCkpO1xuXG4gICAgICBoYW5kbGVyLmludm9rZSgndG9vbGJhci51cGRhdGVDb2RldmlldycsICR0b29sYmFyLCB0cnVlKTtcbiAgICAgIGhhbmRsZXIuaW52b2tlKCdwb3BvdmVyLmhpZGUnLCAkcG9wb3Zlcik7XG4gICAgICBoYW5kbGVyLmludm9rZSgnaGFuZGxlLmhpZGUnLCAkaGFuZGxlKTtcblxuICAgICAgJGVkaXRvci5hZGRDbGFzcygnY29kZXZpZXcnKTtcblxuICAgICAgJGNvZGFibGUuZm9jdXMoKTtcblxuICAgICAgLy8gYWN0aXZhdGUgQ29kZU1pcnJvciBhcyBjb2RhYmxlXG4gICAgICBpZiAoYWdlbnQuaGFzQ29kZU1pcnJvcikge1xuICAgICAgICB2YXIgY21FZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSgkY29kYWJsZVswXSwgb3B0aW9ucy5jb2RlbWlycm9yKTtcblxuICAgICAgICAvLyBDb2RlTWlycm9yIFRlcm5TZXJ2ZXJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29kZW1pcnJvci50ZXJuKSB7XG4gICAgICAgICAgdmFyIHNlcnZlciA9IG5ldyBDb2RlTWlycm9yLlRlcm5TZXJ2ZXIob3B0aW9ucy5jb2RlbWlycm9yLnRlcm4pO1xuICAgICAgICAgIGNtRWRpdG9yLnRlcm5TZXJ2ZXIgPSBzZXJ2ZXI7XG4gICAgICAgICAgY21FZGl0b3Iub24oJ2N1cnNvckFjdGl2aXR5LnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoY20pIHtcbiAgICAgICAgICAgIHNlcnZlci51cGRhdGVBcmdIaW50cyhjbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb2RlTWlycm9yIGhhc24ndCBQYWRkaW5nLlxuICAgICAgICBjbUVkaXRvci5zZXRTaXplKG51bGwsICRlZGl0YWJsZS5vdXRlckhlaWdodCgpKTtcbiAgICAgICAgJGNvZGFibGUuZGF0YSgnY21FZGl0b3InLCBjbUVkaXRvcik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGRlYWN0aXZhdGUgY29kZSB2aWV3XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbGF5b3V0SW5mb1xuICAgICAqL1xuICAgIHRoaXMuZGVhY3RpdmF0ZSA9IGZ1bmN0aW9uIChsYXlvdXRJbmZvKSB7XG4gICAgICB2YXIgJGhvbGRlciA9IGxheW91dEluZm8uaG9sZGVyKCksXG4gICAgICAgICAgJGVkaXRvciA9IGxheW91dEluZm8uZWRpdG9yKCksXG4gICAgICAgICAgJHRvb2xiYXIgPSBsYXlvdXRJbmZvLnRvb2xiYXIoKSxcbiAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCksXG4gICAgICAgICAgJGNvZGFibGUgPSBsYXlvdXRJbmZvLmNvZGFibGUoKTtcblxuICAgICAgdmFyIG9wdGlvbnMgPSAkZWRpdG9yLmRhdGEoJ29wdGlvbnMnKTtcblxuICAgICAgLy8gZGVhY3RpdmF0ZSBDb2RlTWlycm9yIGFzIGNvZGFibGVcbiAgICAgIGlmIChhZ2VudC5oYXNDb2RlTWlycm9yKSB7XG4gICAgICAgIHZhciBjbUVkaXRvciA9ICRjb2RhYmxlLmRhdGEoJ2NtRWRpdG9yJyk7XG4gICAgICAgICRjb2RhYmxlLnZhbChjbUVkaXRvci5nZXRWYWx1ZSgpKTtcbiAgICAgICAgY21FZGl0b3IudG9UZXh0QXJlYSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmFsdWUgPSBkb20udmFsdWUoJGNvZGFibGUsIG9wdGlvbnMucHJldHRpZnlIdG1sKSB8fCBkb20uZW1wdHlQYXJhO1xuICAgICAgdmFyIGlzQ2hhbmdlID0gJGVkaXRhYmxlLmh0bWwoKSAhPT0gdmFsdWU7XG5cbiAgICAgICRlZGl0YWJsZS5odG1sKHZhbHVlKTtcbiAgICAgICRlZGl0YWJsZS5oZWlnaHQob3B0aW9ucy5oZWlnaHQgPyAkY29kYWJsZS5oZWlnaHQoKSA6ICdhdXRvJyk7XG4gICAgICAkZWRpdG9yLnJlbW92ZUNsYXNzKCdjb2RldmlldycpO1xuXG4gICAgICBpZiAoaXNDaGFuZ2UpIHtcbiAgICAgICAgaGFuZGxlci5iaW5kQ3VzdG9tRXZlbnQoXG4gICAgICAgICAgJGhvbGRlciwgJGVkaXRhYmxlLmRhdGEoJ2NhbGxiYWNrcycpLCAnY2hhbmdlJ1xuICAgICAgICApKCRlZGl0YWJsZS5odG1sKCksICRlZGl0YWJsZSk7XG4gICAgICB9XG5cbiAgICAgICRlZGl0YWJsZS5mb2N1cygpO1xuXG4gICAgICBoYW5kbGVyLmludm9rZSgndG9vbGJhci51cGRhdGVDb2RldmlldycsICR0b29sYmFyLCBmYWxzZSk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgRHJhZ0FuZERyb3AgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIHZhciAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcblxuICAgIC8qKlxuICAgICAqIGF0dGFjaCBEcmFnIGFuZCBEcm9wIEV2ZW50c1xuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm8gLSBsYXlvdXQgSW5mb3JtYXRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICB0aGlzLmF0dGFjaCA9IGZ1bmN0aW9uIChsYXlvdXRJbmZvLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5haXJNb2RlIHx8IG9wdGlvbnMuZGlzYWJsZURyYWdBbmREcm9wKSB7XG4gICAgICAgIC8vIHByZXZlbnQgZGVmYXVsdCBkcm9wIGV2ZW50XG4gICAgICAgICRkb2N1bWVudC5vbignZHJvcC5zdW1tZXJub3RlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hdHRhY2hEcmFnQW5kRHJvcEV2ZW50KGxheW91dEluZm8sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBhdHRhY2ggRHJhZyBhbmQgRHJvcCBFdmVudHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvIC0gbGF5b3V0IEluZm9ybWF0aW9uc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgdGhpcy5hdHRhY2hEcmFnQW5kRHJvcEV2ZW50ID0gZnVuY3Rpb24gKGxheW91dEluZm8sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gJCgpLFxuICAgICAgICAgICRlZGl0b3IgPSBsYXlvdXRJbmZvLmVkaXRvcigpLFxuICAgICAgICAgICRkcm9wem9uZSA9IGxheW91dEluZm8uZHJvcHpvbmUoKSxcbiAgICAgICAgICAkZHJvcHpvbmVNZXNzYWdlID0gJGRyb3B6b25lLmZpbmQoJy5ub3RlLWRyb3B6b25lLW1lc3NhZ2UnKTtcblxuICAgICAgLy8gc2hvdyBkcm9wem9uZSBvbiBkcmFnZW50ZXIgd2hlbiBkcmFnZ2luZyBhIG9iamVjdCB0byBkb2N1bWVudFxuICAgICAgLy8gLWJ1dCBvbmx5IGlmIHRoZSBlZGl0b3IgaXMgdmlzaWJsZSwgaS5lLiBoYXMgYSBwb3NpdGl2ZSB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgICAkZG9jdW1lbnQub24oJ2RyYWdlbnRlci5zdW1tZXJub3RlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGlzQ29kZXZpZXcgPSBoYW5kbGVyLmludm9rZSgnY29kZXZpZXcuaXNBY3RpdmF0ZWQnLCBsYXlvdXRJbmZvKTtcbiAgICAgICAgdmFyIGhhc0VkaXRvclNpemUgPSAkZWRpdG9yLndpZHRoKCkgPiAwICYmICRlZGl0b3IuaGVpZ2h0KCkgPiAwO1xuICAgICAgICBpZiAoIWlzQ29kZXZpZXcgJiYgIWNvbGxlY3Rpb24ubGVuZ3RoICYmIGhhc0VkaXRvclNpemUpIHtcbiAgICAgICAgICAkZWRpdG9yLmFkZENsYXNzKCdkcmFnb3ZlcicpO1xuICAgICAgICAgICRkcm9wem9uZS53aWR0aCgkZWRpdG9yLndpZHRoKCkpO1xuICAgICAgICAgICRkcm9wem9uZS5oZWlnaHQoJGVkaXRvci5oZWlnaHQoKSk7XG4gICAgICAgICAgJGRyb3B6b25lTWVzc2FnZS50ZXh0KG9wdGlvbnMubGFuZ0luZm8uaW1hZ2UuZHJhZ0ltYWdlSGVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24uYWRkKGUudGFyZ2V0KTtcbiAgICAgIH0pLm9uKCdkcmFnbGVhdmUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb2xsZWN0aW9uID0gY29sbGVjdGlvbi5ub3QoZS50YXJnZXQpO1xuICAgICAgICBpZiAoIWNvbGxlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgJGVkaXRvci5yZW1vdmVDbGFzcygnZHJhZ292ZXInKTtcbiAgICAgICAgfVxuICAgICAgfSkub24oJ2Ryb3AnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbGxlY3Rpb24gPSAkKCk7XG4gICAgICAgICRlZGl0b3IucmVtb3ZlQ2xhc3MoJ2RyYWdvdmVyJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gY2hhbmdlIGRyb3B6b25lJ3MgbWVzc2FnZSBvbiBob3Zlci5cbiAgICAgICRkcm9wem9uZS5vbignZHJhZ2VudGVyLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRkcm9wem9uZS5hZGRDbGFzcygnaG92ZXInKTtcbiAgICAgICAgJGRyb3B6b25lTWVzc2FnZS50ZXh0KG9wdGlvbnMubGFuZ0luZm8uaW1hZ2UuZHJvcEltYWdlKTtcbiAgICAgIH0pLm9uKCdkcmFnbGVhdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRkcm9wem9uZS5yZW1vdmVDbGFzcygnaG92ZXInKTtcbiAgICAgICAgJGRyb3B6b25lTWVzc2FnZS50ZXh0KG9wdGlvbnMubGFuZ0luZm8uaW1hZ2UuZHJhZ0ltYWdlSGVyZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gYXR0YWNoIGRyb3BJbWFnZVxuICAgICAgJGRyb3B6b25lLm9uKCdkcm9wLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgICAgICB2YXIgZGF0YVRyYW5zZmVyID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXI7XG4gICAgICAgIHZhciBsYXlvdXRJbmZvID0gZG9tLm1ha2VMYXlvdXRJbmZvKGV2ZW50LmN1cnJlbnRUYXJnZXQgfHwgZXZlbnQudGFyZ2V0KTtcblxuICAgICAgICBpZiAoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcyAmJiBkYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkuZm9jdXMoKTtcbiAgICAgICAgICBoYW5kbGVyLmluc2VydEltYWdlcyhsYXlvdXRJbmZvLCBkYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBpbnNlcnROb2RlZnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxheW91dEluZm8uaG9sZGVyKCkuc3VtbWVybm90ZSgnaW5zZXJ0Tm9kZScsIHRoaXMpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZGF0YVRyYW5zZmVyLnR5cGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IGRhdGFUcmFuc2Zlci50eXBlc1tpXTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gZGF0YVRyYW5zZmVyLmdldERhdGEodHlwZSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigndGV4dCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgbGF5b3V0SW5mby5ob2xkZXIoKS5zdW1tZXJub3RlKCdwYXN0ZUhUTUwnLCBjb250ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICQoY29udGVudCkuZWFjaChpbnNlcnROb2RlZnVuYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KS5vbignZHJhZ292ZXInLCBmYWxzZSk7IC8vIHByZXZlbnQgZGVmYXVsdCBkcmFnb3ZlciBldmVudFxuICAgIH07XG4gIH07XG5cbiAgdmFyIENsaXBib2FyZCA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgdmFyICRwYXN0ZTtcblxuICAgIHRoaXMuYXR0YWNoID0gZnVuY3Rpb24gKGxheW91dEluZm8pIHtcbiAgICAgIC8vIFt3b3JrYXJvdW5kXSBnZXR0aW5nIGltYWdlIGZyb20gY2xpcGJvYXJkXG4gICAgICAvLyAgLSBJRTExIGFuZCBGaXJlZm94OiBDVFJMK3YgaG9va1xuICAgICAgLy8gIC0gV2Via2l0OiBldmVudC5jbGlwYm9hcmREYXRhXG4gICAgICBpZiAoKGFnZW50LmlzTVNJRSAmJiBhZ2VudC5icm93c2VyVmVyc2lvbiA+IDEwKSB8fCBhZ2VudC5pc0ZGKSB7XG4gICAgICAgICRwYXN0ZSA9ICQoJzxkaXYgLz4nKS5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCB0cnVlKS5jc3Moe1xuICAgICAgICAgIHBvc2l0aW9uIDogJ2Fic29sdXRlJyxcbiAgICAgICAgICBsZWZ0IDogLTEwMDAwMCxcbiAgICAgICAgICBvcGFjaXR5IDogMFxuICAgICAgICB9KTtcblxuICAgICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkub24oJ2tleWRvd24uc3VtbWVybm90ZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgaWYgKGUuY3RybEtleSAmJiBlLmtleUNvZGUgPT09IGtleS5jb2RlLlYpIHtcbiAgICAgICAgICAgIGhhbmRsZXIuaW52b2tlKCdzYXZlUmFuZ2UnLCBsYXlvdXRJbmZvLmVkaXRhYmxlKCkpO1xuICAgICAgICAgICAgJHBhc3RlLmZvY3VzKCk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBwYXN0ZUJ5SG9vayhsYXlvdXRJbmZvKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGF5b3V0SW5mby5lZGl0YWJsZSgpLmJlZm9yZSgkcGFzdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGF5b3V0SW5mby5lZGl0YWJsZSgpLm9uKCdwYXN0ZS5zdW1tZXJub3RlJywgcGFzdGVCeUV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHBhc3RlQnlIb29rID0gZnVuY3Rpb24gKGxheW91dEluZm8pIHtcbiAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG4gICAgICB2YXIgbm9kZSA9ICRwYXN0ZVswXS5maXJzdENoaWxkO1xuXG4gICAgICBpZiAoZG9tLmlzSW1nKG5vZGUpKSB7XG4gICAgICAgIHZhciBkYXRhVVJJID0gbm9kZS5zcmM7XG4gICAgICAgIHZhciBkZWNvZGVkRGF0YSA9IGF0b2IoZGF0YVVSSS5zcGxpdCgnLCcpWzFdKTtcbiAgICAgICAgdmFyIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoZGVjb2RlZERhdGEubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWNvZGVkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFycmF5W2ldID0gZGVjb2RlZERhdGEuY2hhckNvZGVBdChpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2FycmF5XSwgeyB0eXBlIDogJ2ltYWdlL3BuZycgfSk7XG4gICAgICAgIGJsb2IubmFtZSA9ICdjbGlwYm9hcmQucG5nJztcblxuICAgICAgICBoYW5kbGVyLmludm9rZSgncmVzdG9yZVJhbmdlJywgJGVkaXRhYmxlKTtcbiAgICAgICAgaGFuZGxlci5pbnZva2UoJ2ZvY3VzJywgJGVkaXRhYmxlKTtcbiAgICAgICAgaGFuZGxlci5pbnNlcnRJbWFnZXMobGF5b3V0SW5mbywgW2Jsb2JdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwYXN0ZUNvbnRlbnQgPSAkKCc8ZGl2IC8+JykuaHRtbCgkcGFzdGUuaHRtbCgpKS5odG1sKCk7XG4gICAgICAgIGhhbmRsZXIuaW52b2tlKCdyZXN0b3JlUmFuZ2UnLCAkZWRpdGFibGUpO1xuICAgICAgICBoYW5kbGVyLmludm9rZSgnZm9jdXMnLCAkZWRpdGFibGUpO1xuXG4gICAgICAgIGlmIChwYXN0ZUNvbnRlbnQpIHtcbiAgICAgICAgICBoYW5kbGVyLmludm9rZSgncGFzdGVIVE1MJywgJGVkaXRhYmxlLCBwYXN0ZUNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRwYXN0ZS5lbXB0eSgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBwYXN0ZSBieSBjbGlwYm9hcmQgZXZlbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAgICovXG4gICAgdmFyIHBhc3RlQnlFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIGNsaXBib2FyZERhdGEgPSBldmVudC5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgICB2YXIgbGF5b3V0SW5mbyA9IGRvbS5tYWtlTGF5b3V0SW5mbyhldmVudC5jdXJyZW50VGFyZ2V0IHx8IGV2ZW50LnRhcmdldCk7XG4gICAgICB2YXIgJGVkaXRhYmxlID0gbGF5b3V0SW5mby5lZGl0YWJsZSgpO1xuXG4gICAgICBpZiAoY2xpcGJvYXJkRGF0YSAmJiBjbGlwYm9hcmREYXRhLml0ZW1zICYmIGNsaXBib2FyZERhdGEuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBpdGVtID0gbGlzdC5oZWFkKGNsaXBib2FyZERhdGEuaXRlbXMpO1xuICAgICAgICBpZiAoaXRlbS5raW5kID09PSAnZmlsZScgJiYgaXRlbS50eXBlLmluZGV4T2YoJ2ltYWdlLycpICE9PSAtMSkge1xuICAgICAgICAgIGhhbmRsZXIuaW5zZXJ0SW1hZ2VzKGxheW91dEluZm8sIFtpdGVtLmdldEFzRmlsZSgpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5hZnRlckNvbW1hbmQnLCAkZWRpdGFibGUpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgdmFyIExpbmtEaWFsb2cgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuXG4gICAgLyoqXG4gICAgICogdG9nZ2xlIGJ1dHRvbiBzdGF0dXNcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRidG5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzRW5hYmxlXG4gICAgICovXG4gICAgdmFyIHRvZ2dsZUJ0biA9IGZ1bmN0aW9uICgkYnRuLCBpc0VuYWJsZSkge1xuICAgICAgJGJ0bi50b2dnbGVDbGFzcygnZGlzYWJsZWQnLCAhaXNFbmFibGUpO1xuICAgICAgJGJ0bi5hdHRyKCdkaXNhYmxlZCcsICFpc0VuYWJsZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGJpbmQgZW50ZXIga2V5XG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkaW5wdXRcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGJ0blxuICAgICAqL1xuICAgIHZhciBiaW5kRW50ZXJLZXkgPSBmdW5jdGlvbiAoJGlucHV0LCAkYnRuKSB7XG4gICAgICAkaW5wdXQub24oJ2tleXByZXNzLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleS5jb2RlLkVOVEVSKSB7XG4gICAgICAgICAgJGJ0bi50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2hvdyBsaW5rIGRpYWxvZyBhbmQgc2V0IGV2ZW50IGhhbmRsZXJzIG9uIGRpYWxvZyBjb250cm9scy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkZWRpdGFibGVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGRpYWxvZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rSW5mb1xuICAgICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAgICovXG4gICAgdGhpcy5zaG93TGlua0RpYWxvZyA9IGZ1bmN0aW9uICgkZWRpdGFibGUsICRkaWFsb2csIGxpbmtJbmZvKSB7XG4gICAgICByZXR1cm4gJC5EZWZlcnJlZChmdW5jdGlvbiAoZGVmZXJyZWQpIHtcbiAgICAgICAgdmFyICRsaW5rRGlhbG9nID0gJGRpYWxvZy5maW5kKCcubm90ZS1saW5rLWRpYWxvZycpO1xuXG4gICAgICAgIHZhciAkbGlua1RleHQgPSAkbGlua0RpYWxvZy5maW5kKCcubm90ZS1saW5rLXRleHQnKSxcbiAgICAgICAgJGxpbmtVcmwgPSAkbGlua0RpYWxvZy5maW5kKCcubm90ZS1saW5rLXVybCcpLFxuICAgICAgICAkbGlua0J0biA9ICRsaW5rRGlhbG9nLmZpbmQoJy5ub3RlLWxpbmstYnRuJyksXG4gICAgICAgICRvcGVuSW5OZXdXaW5kb3cgPSAkbGlua0RpYWxvZy5maW5kKCdpbnB1dFt0eXBlPWNoZWNrYm94XScpO1xuXG4gICAgICAgICRsaW5rRGlhbG9nLm9uZSgnc2hvd24uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJGxpbmtUZXh0LnZhbChsaW5rSW5mby50ZXh0KTtcblxuICAgICAgICAgICRsaW5rVGV4dC5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0b2dnbGVCdG4oJGxpbmtCdG4sICRsaW5rVGV4dC52YWwoKSAmJiAkbGlua1VybC52YWwoKSk7XG4gICAgICAgICAgICAvLyBpZiBsaW5rdGV4dCB3YXMgbW9kaWZpZWQgYnkga2V5dXAsXG4gICAgICAgICAgICAvLyBzdG9wIGNsb25pbmcgdGV4dCBmcm9tIGxpbmtVcmxcbiAgICAgICAgICAgIGxpbmtJbmZvLnRleHQgPSAkbGlua1RleHQudmFsKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBpZiBubyB1cmwgd2FzIGdpdmVuLCBjb3B5IHRleHQgdG8gdXJsXG4gICAgICAgICAgaWYgKCFsaW5rSW5mby51cmwpIHtcbiAgICAgICAgICAgIGxpbmtJbmZvLnVybCA9IGxpbmtJbmZvLnRleHQgfHwgJ2h0dHA6Ly8nO1xuICAgICAgICAgICAgdG9nZ2xlQnRuKCRsaW5rQnRuLCBsaW5rSW5mby50ZXh0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkbGlua1VybC5vbignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0b2dnbGVCdG4oJGxpbmtCdG4sICRsaW5rVGV4dC52YWwoKSAmJiAkbGlua1VybC52YWwoKSk7XG4gICAgICAgICAgICAvLyBkaXNwbGF5IHNhbWUgbGluayBvbiBgVGV4dCB0byBkaXNwbGF5YCBpbnB1dFxuICAgICAgICAgICAgLy8gd2hlbiBjcmVhdGUgYSBuZXcgbGlua1xuICAgICAgICAgICAgaWYgKCFsaW5rSW5mby50ZXh0KSB7XG4gICAgICAgICAgICAgICRsaW5rVGV4dC52YWwoJGxpbmtVcmwudmFsKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLnZhbChsaW5rSW5mby51cmwpLnRyaWdnZXIoJ2ZvY3VzJykudHJpZ2dlcignc2VsZWN0Jyk7XG5cbiAgICAgICAgICBiaW5kRW50ZXJLZXkoJGxpbmtVcmwsICRsaW5rQnRuKTtcbiAgICAgICAgICBiaW5kRW50ZXJLZXkoJGxpbmtUZXh0LCAkbGlua0J0bik7XG5cbiAgICAgICAgICAkb3BlbkluTmV3V2luZG93LnByb3AoJ2NoZWNrZWQnLCBsaW5rSW5mby5pc05ld1dpbmRvdyk7XG5cbiAgICAgICAgICAkbGlua0J0bi5vbmUoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgcmFuZ2U6IGxpbmtJbmZvLnJhbmdlLFxuICAgICAgICAgICAgICB1cmw6ICRsaW5rVXJsLnZhbCgpLFxuICAgICAgICAgICAgICB0ZXh0OiAkbGlua1RleHQudmFsKCksXG4gICAgICAgICAgICAgIGlzTmV3V2luZG93OiAkb3BlbkluTmV3V2luZG93LmlzKCc6Y2hlY2tlZCcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRsaW5rRGlhbG9nLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pLm9uZSgnaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGRldGFjaCBldmVudHNcbiAgICAgICAgICAkbGlua1RleHQub2ZmKCdpbnB1dCBrZXlwcmVzcycpO1xuICAgICAgICAgICRsaW5rVXJsLm9mZignaW5wdXQga2V5cHJlc3MnKTtcbiAgICAgICAgICAkbGlua0J0bi5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgICBpZiAoZGVmZXJyZWQuc3RhdGUoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLm1vZGFsKCdzaG93Jyk7XG4gICAgICB9KS5wcm9taXNlKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICovXG4gICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKGxheW91dEluZm8pIHtcbiAgICAgIHZhciAkZWRpdG9yID0gbGF5b3V0SW5mby5lZGl0b3IoKSxcbiAgICAgICAgICAkZGlhbG9nID0gbGF5b3V0SW5mby5kaWFsb2coKSxcbiAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCksXG4gICAgICAgICAgJHBvcG92ZXIgPSBsYXlvdXRJbmZvLnBvcG92ZXIoKSxcbiAgICAgICAgICBsaW5rSW5mbyA9IGhhbmRsZXIuaW52b2tlKCdlZGl0b3IuZ2V0TGlua0luZm8nLCAkZWRpdGFibGUpO1xuXG4gICAgICB2YXIgb3B0aW9ucyA9ICRlZGl0b3IuZGF0YSgnb3B0aW9ucycpO1xuXG4gICAgICBoYW5kbGVyLmludm9rZSgnZWRpdG9yLnNhdmVSYW5nZScsICRlZGl0YWJsZSk7XG4gICAgICB0aGlzLnNob3dMaW5rRGlhbG9nKCRlZGl0YWJsZSwgJGRpYWxvZywgbGlua0luZm8pLnRoZW4oZnVuY3Rpb24gKGxpbmtJbmZvKSB7XG4gICAgICAgIGhhbmRsZXIuaW52b2tlKCdlZGl0b3IucmVzdG9yZVJhbmdlJywgJGVkaXRhYmxlKTtcbiAgICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5jcmVhdGVMaW5rJywgJGVkaXRhYmxlLCBsaW5rSW5mbywgb3B0aW9ucyk7XG4gICAgICAgIC8vIGhpZGUgcG9wb3ZlciBhZnRlciBjcmVhdGluZyBsaW5rXG4gICAgICAgIGhhbmRsZXIuaW52b2tlKCdwb3BvdmVyLmhpZGUnLCAkcG9wb3Zlcik7XG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5yZXN0b3JlUmFuZ2UnLCAkZWRpdGFibGUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgSW1hZ2VEaWFsb2cgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgIC8qKlxuICAgICAqIHRvZ2dsZSBidXR0b24gc3RhdHVzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkYnRuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc0VuYWJsZVxuICAgICAqL1xuICAgIHZhciB0b2dnbGVCdG4gPSBmdW5jdGlvbiAoJGJ0biwgaXNFbmFibGUpIHtcbiAgICAgICRidG4udG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJywgIWlzRW5hYmxlKTtcbiAgICAgICRidG4uYXR0cignZGlzYWJsZWQnLCAhaXNFbmFibGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBiaW5kIGVudGVyIGtleVxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGlucHV0XG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRidG5cbiAgICAgKi9cbiAgICB2YXIgYmluZEVudGVyS2V5ID0gZnVuY3Rpb24gKCRpbnB1dCwgJGJ0bikge1xuICAgICAgJGlucHV0Lm9uKCdrZXlwcmVzcy5zdW1tZXJub3RlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBrZXkuY29kZS5FTlRFUikge1xuICAgICAgICAgICRidG4udHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuc2hvdyA9IGZ1bmN0aW9uIChsYXlvdXRJbmZvKSB7XG4gICAgICB2YXIgJGRpYWxvZyA9IGxheW91dEluZm8uZGlhbG9nKCksXG4gICAgICAgICAgJGVkaXRhYmxlID0gbGF5b3V0SW5mby5lZGl0YWJsZSgpO1xuXG4gICAgICBoYW5kbGVyLmludm9rZSgnZWRpdG9yLnNhdmVSYW5nZScsICRlZGl0YWJsZSk7XG4gICAgICB0aGlzLnNob3dJbWFnZURpYWxvZygkZWRpdGFibGUsICRkaWFsb2cpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5yZXN0b3JlUmFuZ2UnLCAkZWRpdGFibGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAvLyBpbWFnZSB1cmxcbiAgICAgICAgICBoYW5kbGVyLmludm9rZSgnZWRpdG9yLmluc2VydEltYWdlJywgJGVkaXRhYmxlLCBkYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBhcnJheSBvZiBmaWxlc1xuICAgICAgICAgIGhhbmRsZXIuaW5zZXJ0SW1hZ2VzKGxheW91dEluZm8sIGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5yZXN0b3JlUmFuZ2UnLCAkZWRpdGFibGUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHNob3cgaW1hZ2UgZGlhbG9nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRkaWFsb2dcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAqL1xuICAgIHRoaXMuc2hvd0ltYWdlRGlhbG9nID0gZnVuY3Rpb24gKCRlZGl0YWJsZSwgJGRpYWxvZykge1xuICAgICAgcmV0dXJuICQuRGVmZXJyZWQoZnVuY3Rpb24gKGRlZmVycmVkKSB7XG4gICAgICAgIHZhciAkaW1hZ2VEaWFsb2cgPSAkZGlhbG9nLmZpbmQoJy5ub3RlLWltYWdlLWRpYWxvZycpO1xuXG4gICAgICAgIHZhciAkaW1hZ2VJbnB1dCA9ICRkaWFsb2cuZmluZCgnLm5vdGUtaW1hZ2UtaW5wdXQnKSxcbiAgICAgICAgICAgICRpbWFnZVVybCA9ICRkaWFsb2cuZmluZCgnLm5vdGUtaW1hZ2UtdXJsJyksXG4gICAgICAgICAgICAkaW1hZ2VCdG4gPSAkZGlhbG9nLmZpbmQoJy5ub3RlLWltYWdlLWJ0bicpO1xuXG4gICAgICAgICRpbWFnZURpYWxvZy5vbmUoJ3Nob3duLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIENsb25pbmcgaW1hZ2VJbnB1dCB0byBjbGVhciBlbGVtZW50LlxuICAgICAgICAgICRpbWFnZUlucHV0LnJlcGxhY2VXaXRoKCRpbWFnZUlucHV0LmNsb25lKClcbiAgICAgICAgICAgIC5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRoaXMuZmlsZXMgfHwgdGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICRpbWFnZURpYWxvZy5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC52YWwoJycpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgICRpbWFnZUJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJGltYWdlVXJsLnZhbCgpKTtcbiAgICAgICAgICAgICRpbWFnZURpYWxvZy5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJGltYWdlVXJsLm9uKCdrZXl1cCBwYXN0ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIHVybDtcblxuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwYXN0ZScpIHtcbiAgICAgICAgICAgICAgdXJsID0gZXZlbnQub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhLmdldERhdGEoJ3RleHQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHVybCA9ICRpbWFnZVVybC52YWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdG9nZ2xlQnRuKCRpbWFnZUJ0biwgdXJsKTtcbiAgICAgICAgICB9KS52YWwoJycpLnRyaWdnZXIoJ2ZvY3VzJyk7XG4gICAgICAgICAgYmluZEVudGVyS2V5KCRpbWFnZVVybCwgJGltYWdlQnRuKTtcbiAgICAgICAgfSkub25lKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJGltYWdlSW5wdXQub2ZmKCdjaGFuZ2UnKTtcbiAgICAgICAgICAkaW1hZ2VVcmwub2ZmKCdrZXl1cCBwYXN0ZSBrZXlwcmVzcycpO1xuICAgICAgICAgICRpbWFnZUJ0bi5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgICBpZiAoZGVmZXJyZWQuc3RhdGUoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLm1vZGFsKCdzaG93Jyk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBIZWxwRGlhbG9nID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAvKipcbiAgICAgKiBzaG93IGhlbHAgZGlhbG9nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJGVkaXRhYmxlXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRkaWFsb2dcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAqL1xuICAgIHRoaXMuc2hvd0hlbHBEaWFsb2cgPSBmdW5jdGlvbiAoJGVkaXRhYmxlLCAkZGlhbG9nKSB7XG4gICAgICByZXR1cm4gJC5EZWZlcnJlZChmdW5jdGlvbiAoZGVmZXJyZWQpIHtcbiAgICAgICAgdmFyICRoZWxwRGlhbG9nID0gJGRpYWxvZy5maW5kKCcubm90ZS1oZWxwLWRpYWxvZycpO1xuXG4gICAgICAgICRoZWxwRGlhbG9nLm9uZSgnaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSkubW9kYWwoJ3Nob3cnKTtcbiAgICAgIH0pLnByb21pc2UoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm9cbiAgICAgKi9cbiAgICB0aGlzLnNob3cgPSBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgdmFyICRkaWFsb2cgPSBsYXlvdXRJbmZvLmRpYWxvZygpLFxuICAgICAgICAgICRlZGl0YWJsZSA9IGxheW91dEluZm8uZWRpdGFibGUoKTtcblxuICAgICAgaGFuZGxlci5pbnZva2UoJ2VkaXRvci5zYXZlUmFuZ2UnLCAkZWRpdGFibGUsIHRydWUpO1xuICAgICAgdGhpcy5zaG93SGVscERpYWxvZygkZWRpdGFibGUsICRkaWFsb2cpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICBoYW5kbGVyLmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScsICRlZGl0YWJsZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xuXG5cbiAgLyoqXG4gICAqIEBjbGFzcyBFdmVudEhhbmRsZXJcbiAgICpcbiAgICogRXZlbnRIYW5kbGVyXG4gICAqICAtIFRPRE86IG5ldyBpbnN0YW5jZSBwZXIgYSBlZGl0b3JcbiAgICovXG4gIHZhciBFdmVudEhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLyoqXG4gICAgICogTW9kdWxlc1xuICAgICAqL1xuICAgIHZhciBtb2R1bGVzID0gdGhpcy5tb2R1bGVzID0ge1xuICAgICAgZWRpdG9yOiBuZXcgRWRpdG9yKHRoaXMpLFxuICAgICAgdG9vbGJhcjogbmV3IFRvb2xiYXIodGhpcyksXG4gICAgICBzdGF0dXNiYXI6IG5ldyBTdGF0dXNiYXIodGhpcyksXG4gICAgICBwb3BvdmVyOiBuZXcgUG9wb3Zlcih0aGlzKSxcbiAgICAgIGhhbmRsZTogbmV3IEhhbmRsZSh0aGlzKSxcbiAgICAgIGZ1bGxzY3JlZW46IG5ldyBGdWxsc2NyZWVuKHRoaXMpLFxuICAgICAgY29kZXZpZXc6IG5ldyBDb2Rldmlldyh0aGlzKSxcbiAgICAgIGRyYWdBbmREcm9wOiBuZXcgRHJhZ0FuZERyb3AodGhpcyksXG4gICAgICBjbGlwYm9hcmQ6IG5ldyBDbGlwYm9hcmQodGhpcyksXG4gICAgICBsaW5rRGlhbG9nOiBuZXcgTGlua0RpYWxvZyh0aGlzKSxcbiAgICAgIGltYWdlRGlhbG9nOiBuZXcgSW1hZ2VEaWFsb2codGhpcyksXG4gICAgICBoZWxwRGlhbG9nOiBuZXcgSGVscERpYWxvZyh0aGlzKVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBpbnZva2UgbW9kdWxlJ3MgbWV0aG9kXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kdWxlQW5kTWV0aG9kIC0gZXgpICdlZGl0b3IucmVkbydcbiAgICAgKiBAcGFyYW0gey4uLip9IGFyZ3VtZW50cyAtIGFyZ3VtZW50cyBvZiBtZXRob2RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqL1xuICAgIHRoaXMuaW52b2tlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZHVsZUFuZE1ldGhvZCA9IGxpc3QuaGVhZChsaXN0LmZyb20oYXJndW1lbnRzKSk7XG4gICAgICB2YXIgYXJncyA9IGxpc3QudGFpbChsaXN0LmZyb20oYXJndW1lbnRzKSk7XG5cbiAgICAgIHZhciBzcGxpdHMgPSBtb2R1bGVBbmRNZXRob2Quc3BsaXQoJy4nKTtcbiAgICAgIHZhciBoYXNTZXBhcmF0b3IgPSBzcGxpdHMubGVuZ3RoID4gMTtcbiAgICAgIHZhciBtb2R1bGVOYW1lID0gaGFzU2VwYXJhdG9yICYmIGxpc3QuaGVhZChzcGxpdHMpO1xuICAgICAgdmFyIG1ldGhvZE5hbWUgPSBoYXNTZXBhcmF0b3IgPyBsaXN0Lmxhc3Qoc3BsaXRzKSA6IGxpc3QuaGVhZChzcGxpdHMpO1xuXG4gICAgICB2YXIgbW9kdWxlID0gdGhpcy5nZXRNb2R1bGUobW9kdWxlTmFtZSk7XG4gICAgICB2YXIgbWV0aG9kID0gbW9kdWxlW21ldGhvZE5hbWVdO1xuXG4gICAgICByZXR1cm4gbWV0aG9kICYmIG1ldGhvZC5hcHBseShtb2R1bGUsIGFyZ3MpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIG1vZHVsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1vZHVsZU5hbWUgLSBuYW1lIG9mIG1vZHVsZVxuICAgICAqIEByZXR1cm4ge01vZHVsZX0gLSBkZWZhdWx0cyBpcyBlZGl0b3JcbiAgICAgKi9cbiAgICB0aGlzLmdldE1vZHVsZSA9IGZ1bmN0aW9uIChtb2R1bGVOYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5tb2R1bGVzW21vZHVsZU5hbWVdIHx8IHRoaXMubW9kdWxlcy5lZGl0b3I7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkaG9sZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNhbGxiYWNrc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVzcGFjZVxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB2YXIgYmluZEN1c3RvbUV2ZW50ID0gdGhpcy5iaW5kQ3VzdG9tRXZlbnQgPSBmdW5jdGlvbiAoJGhvbGRlciwgY2FsbGJhY2tzLCBldmVudE5hbWVzcGFjZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gY2FsbGJhY2tzW2Z1bmMubmFtZXNwYWNlVG9DYW1lbChldmVudE5hbWVzcGFjZSwgJ29uJyldO1xuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjay5hcHBseSgkaG9sZGVyWzBdLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkaG9sZGVyLnRyaWdnZXIoJ3N1bW1lcm5vdGUuJyArIGV2ZW50TmFtZXNwYWNlLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IEltYWdlcyBmcm9tIGZpbGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICogQHBhcmFtIHtGaWxlW119IGZpbGVzXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRJbWFnZXMgPSBmdW5jdGlvbiAobGF5b3V0SW5mbywgZmlsZXMpIHtcbiAgICAgIHZhciAkZWRpdG9yID0gbGF5b3V0SW5mby5lZGl0b3IoKSxcbiAgICAgICAgICAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCksXG4gICAgICAgICAgJGhvbGRlciA9IGxheW91dEluZm8uaG9sZGVyKCk7XG5cbiAgICAgIHZhciBjYWxsYmFja3MgPSAkZWRpdGFibGUuZGF0YSgnY2FsbGJhY2tzJyk7XG4gICAgICB2YXIgb3B0aW9ucyA9ICRlZGl0b3IuZGF0YSgnb3B0aW9ucycpO1xuXG4gICAgICAvLyBJZiBvbkltYWdlVXBsb2FkIG9wdGlvbnMgc2V0dGVkXG4gICAgICBpZiAoY2FsbGJhY2tzLm9uSW1hZ2VVcGxvYWQpIHtcbiAgICAgICAgYmluZEN1c3RvbUV2ZW50KCRob2xkZXIsIGNhbGxiYWNrcywgJ2ltYWdlLnVwbG9hZCcpKGZpbGVzKTtcbiAgICAgIC8vIGVsc2UgaW5zZXJ0IEltYWdlIGFzIGRhdGFVUkxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQuZWFjaChmaWxlcywgZnVuY3Rpb24gKGlkeCwgZmlsZSkge1xuICAgICAgICAgIHZhciBmaWxlbmFtZSA9IGZpbGUubmFtZTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5tYXhpbXVtSW1hZ2VGaWxlU2l6ZSAmJiBvcHRpb25zLm1heGltdW1JbWFnZUZpbGVTaXplIDwgZmlsZS5zaXplKSB7XG4gICAgICAgICAgICBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnaW1hZ2UudXBsb2FkLmVycm9yJykob3B0aW9ucy5sYW5nSW5mby5pbWFnZS5tYXhpbXVtRmlsZVNpemVFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFzeW5jLnJlYWRGaWxlQXNEYXRhVVJMKGZpbGUpLnRoZW4oZnVuY3Rpb24gKHNEYXRhVVJMKSB7XG4gICAgICAgICAgICAgIG1vZHVsZXMuZWRpdG9yLmluc2VydEltYWdlKCRlZGl0YWJsZSwgc0RhdGFVUkwsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnaW1hZ2UudXBsb2FkLmVycm9yJykob3B0aW9ucy5sYW5nSW5mby5pbWFnZS5tYXhpbXVtRmlsZVNpemVFcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY29tbWFuZHMgPSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICAgKi9cbiAgICAgIHNob3dMaW5rRGlhbG9nOiBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgICBtb2R1bGVzLmxpbmtEaWFsb2cuc2hvdyhsYXlvdXRJbmZvKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm9cbiAgICAgICAqL1xuICAgICAgc2hvd0ltYWdlRGlhbG9nOiBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgICBtb2R1bGVzLmltYWdlRGlhbG9nLnNob3cobGF5b3V0SW5mbyk7XG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICAgKi9cbiAgICAgIHNob3dIZWxwRGlhbG9nOiBmdW5jdGlvbiAobGF5b3V0SW5mbykge1xuICAgICAgICBtb2R1bGVzLmhlbHBEaWFsb2cuc2hvdyhsYXlvdXRJbmZvKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm9cbiAgICAgICAqL1xuICAgICAgZnVsbHNjcmVlbjogZnVuY3Rpb24gKGxheW91dEluZm8pIHtcbiAgICAgICAgbW9kdWxlcy5mdWxsc2NyZWVuLnRvZ2dsZShsYXlvdXRJbmZvKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm9cbiAgICAgICAqL1xuICAgICAgY29kZXZpZXc6IGZ1bmN0aW9uIChsYXlvdXRJbmZvKSB7XG4gICAgICAgIG1vZHVsZXMuY29kZXZpZXcudG9nZ2xlKGxheW91dEluZm8pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgaE1vdXNlZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgLy9wcmV2ZW50RGVmYXVsdCBTZWxlY3Rpb24gZm9yIEZGLCBJRTgrXG4gICAgICBpZiAoZG9tLmlzSW1nKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGhLZXl1cEFuZE1vdXNldXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBsYXlvdXRJbmZvID0gZG9tLm1ha2VMYXlvdXRJbmZvKGV2ZW50LmN1cnJlbnRUYXJnZXQgfHwgZXZlbnQudGFyZ2V0KTtcbiAgICAgIG1vZHVsZXMuZWRpdG9yLnJlbW92ZUJvZ3VzKGxheW91dEluZm8uZWRpdGFibGUoKSk7XG4gICAgICBoVG9vbGJhckFuZFBvcG92ZXJVcGRhdGUoZXZlbnQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiB1cGRhdGUgc3l0bGUgaW5mb1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZUluZm9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbGF5b3V0SW5mb1xuICAgICAqL1xuICAgIHRoaXMudXBkYXRlU3R5bGVJbmZvID0gZnVuY3Rpb24gKHN0eWxlSW5mbywgbGF5b3V0SW5mbykge1xuICAgICAgaWYgKCFzdHlsZUluZm8gfHwgIWxheW91dEluZm8ucG9wb3ZlcigpLmxlbmd0aCkgeyAvLyBpZ25vcmUsIGlmIGlzIG5vdCB0aGVyZSBhbHJlYWR5XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBpc0Fpck1vZGUgPSBsYXlvdXRJbmZvLmVkaXRvcigpLmRhdGEoJ29wdGlvbnMnKS5haXJNb2RlO1xuICAgICAgaWYgKCFpc0Fpck1vZGUpIHtcbiAgICAgICAgbW9kdWxlcy50b29sYmFyLnVwZGF0ZShsYXlvdXRJbmZvLnRvb2xiYXIoKSwgc3R5bGVJbmZvKTtcbiAgICAgIH1cblxuICAgICAgbW9kdWxlcy5wb3BvdmVyLnVwZGF0ZShsYXlvdXRJbmZvLnBvcG92ZXIoKSwgc3R5bGVJbmZvLCBpc0Fpck1vZGUpO1xuICAgICAgbW9kdWxlcy5oYW5kbGUudXBkYXRlKGxheW91dEluZm8uaGFuZGxlKCksIHN0eWxlSW5mbywgaXNBaXJNb2RlKTtcbiAgICB9O1xuXG4gICAgdmFyIGhUb29sYmFyQW5kUG9wb3ZlclVwZGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgLy8gZGVsYXkgZm9yIHJhbmdlIGFmdGVyIG1vdXNldXBcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5b3V0SW5mbyA9IGRvbS5tYWtlTGF5b3V0SW5mbyh0YXJnZXQpO1xuICAgICAgICB2YXIgc3R5bGVJbmZvID0gbW9kdWxlcy5lZGl0b3IuY3VycmVudFN0eWxlKHRhcmdldCk7XG4gICAgICAgIHNlbGYudXBkYXRlU3R5bGVJbmZvKHN0eWxlSW5mbywgbGF5b3V0SW5mbyk7XG4gICAgICB9LCAwKTtcbiAgICB9O1xuXG4gICAgdmFyIGhTY3JvbGwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciBsYXlvdXRJbmZvID0gZG9tLm1ha2VMYXlvdXRJbmZvKGV2ZW50LmN1cnJlbnRUYXJnZXQgfHwgZXZlbnQudGFyZ2V0KTtcbiAgICAgIC8vaGlkZSBwb3BvdmVyIGFuZCBoYW5kbGUgd2hlbiBzY3JvbGxlZFxuICAgICAgbW9kdWxlcy5wb3BvdmVyLmhpZGUobGF5b3V0SW5mby5wb3BvdmVyKCkpO1xuICAgICAgbW9kdWxlcy5oYW5kbGUuaGlkZShsYXlvdXRJbmZvLmhhbmRsZSgpKTtcbiAgICB9O1xuXG4gICAgdmFyIGhUb29sYmFyQW5kUG9wb3Zlck1vdXNlZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgLy8gcHJldmVudCBkZWZhdWx0IGV2ZW50IHdoZW4gaW5zZXJ0VGFibGUgKEZGLCBXZWJraXQpXG4gICAgICB2YXIgJGJ0biA9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCdbZGF0YS1ldmVudF0nKTtcbiAgICAgIGlmICgkYnRuLmxlbmd0aCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgaFRvb2xiYXJBbmRQb3BvdmVyQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIHZhciAkYnRuID0gJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJ1tkYXRhLWV2ZW50XScpO1xuXG4gICAgICBpZiAoISRidG4ubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBldmVudE5hbWUgPSAkYnRuLmF0dHIoJ2RhdGEtZXZlbnQnKSxcbiAgICAgICAgICB2YWx1ZSA9ICRidG4uYXR0cignZGF0YS12YWx1ZScpLFxuICAgICAgICAgIGhpZGUgPSAkYnRuLmF0dHIoJ2RhdGEtaGlkZScpO1xuXG4gICAgICB2YXIgbGF5b3V0SW5mbyA9IGRvbS5tYWtlTGF5b3V0SW5mbyhldmVudC50YXJnZXQpO1xuXG4gICAgICAvLyBiZWZvcmUgY29tbWFuZDogZGV0ZWN0IGNvbnRyb2wgc2VsZWN0aW9uIGVsZW1lbnQoJHRhcmdldClcbiAgICAgIHZhciAkdGFyZ2V0O1xuICAgICAgaWYgKCQuaW5BcnJheShldmVudE5hbWUsIFsncmVzaXplJywgJ2Zsb2F0TWUnLCAncmVtb3ZlTWVkaWEnLCAnaW1hZ2VTaGFwZSddKSAhPT0gLTEpIHtcbiAgICAgICAgdmFyICRzZWxlY3Rpb24gPSBsYXlvdXRJbmZvLmhhbmRsZSgpLmZpbmQoJy5ub3RlLWNvbnRyb2wtc2VsZWN0aW9uJyk7XG4gICAgICAgICR0YXJnZXQgPSAkKCRzZWxlY3Rpb24uZGF0YSgndGFyZ2V0JykpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiByZXF1ZXN0ZWQsIGhpZGUgdGhlIHBvcG92ZXIgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQuXG4gICAgICAvLyBVc2VmdWwgZm9yIHRoaW5ncyBsaWtlIHNob3dIZWxwRGlhbG9nLlxuICAgICAgaWYgKGhpZGUpIHtcbiAgICAgICAgJGJ0bi5wYXJlbnRzKCcucG9wb3ZlcicpLmhpZGUoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCQuaXNGdW5jdGlvbigkLnN1bW1lcm5vdGUucGx1Z2luRXZlbnRzW2V2ZW50TmFtZV0pKSB7XG4gICAgICAgICQuc3VtbWVybm90ZS5wbHVnaW5FdmVudHNbZXZlbnROYW1lXShldmVudCwgbW9kdWxlcy5lZGl0b3IsIGxheW91dEluZm8sIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAobW9kdWxlcy5lZGl0b3JbZXZlbnROYW1lXSkgeyAvLyBvbiBjb21tYW5kXG4gICAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG4gICAgICAgICRlZGl0YWJsZS5mb2N1cygpO1xuICAgICAgICBtb2R1bGVzLmVkaXRvcltldmVudE5hbWVdKCRlZGl0YWJsZSwgdmFsdWUsICR0YXJnZXQpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIGlmIChjb21tYW5kc1tldmVudE5hbWVdKSB7XG4gICAgICAgIGNvbW1hbmRzW2V2ZW50TmFtZV0uY2FsbCh0aGlzLCBsYXlvdXRJbmZvKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gYWZ0ZXIgY29tbWFuZFxuICAgICAgaWYgKCQuaW5BcnJheShldmVudE5hbWUsIFsnYmFja0NvbG9yJywgJ2ZvcmVDb2xvciddKSAhPT0gLTEpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXlvdXRJbmZvLmVkaXRvcigpLmRhdGEoJ29wdGlvbnMnLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIG1vZHVsZSA9IG9wdGlvbnMuYWlyTW9kZSA/IG1vZHVsZXMucG9wb3ZlciA6IG1vZHVsZXMudG9vbGJhcjtcbiAgICAgICAgbW9kdWxlLnVwZGF0ZVJlY2VudENvbG9yKGxpc3QuaGVhZCgkYnRuKSwgZXZlbnROYW1lLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGRpcnR5IGhhY2sgZm9yIGJvb3RzdHJhcCA1IHN1cHBvcnRcbiAgICAgIGlmICgkYnRuLmF0dHIoJ2RhdGEtYnMtb3JpZ2luYWwtdGl0bGUnKSkge1xuICAgICAgICB2YXIgZHJvcERvd24gPSAkYnRuLnNpYmxpbmdzKCd1bC5kcm9wZG93bi1tZW51Jyk7XG4gICAgICAgICRidG4udG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgaWYgKGRyb3BEb3duLmxlbmd0aCkge1xuICAgICAgICAgIGRyb3BEb3duLnRvZ2dsZUNsYXNzKCdzaG93Jyk7XG4gICAgICAgICAgZHJvcERvd24uY3NzKCd6LWluZGV4JywgMTAwMik7XG4gICAgICAgICAgZHJvcERvd24uY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWSg0MHB4KScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGhUb29sYmFyQW5kUG9wb3ZlclVwZGF0ZShldmVudCk7XG4gICAgfTtcblxuICAgIHZhciBQWF9QRVJfRU0gPSAxODtcbiAgICB2YXIgaERpbWVuc2lvblBpY2tlck1vdmUgPSBmdW5jdGlvbiAoZXZlbnQsIG9wdGlvbnMpIHtcbiAgICAgIHZhciAkcGlja2VyID0gJChldmVudC50YXJnZXQucGFyZW50Tm9kZSk7IC8vIHRhcmdldCBpcyBtb3VzZWNhdGNoZXJcbiAgICAgIHZhciAkZGltZW5zaW9uRGlzcGxheSA9ICRwaWNrZXIubmV4dCgpO1xuICAgICAgdmFyICRjYXRjaGVyID0gJHBpY2tlci5maW5kKCcubm90ZS1kaW1lbnNpb24tcGlja2VyLW1vdXNlY2F0Y2hlcicpO1xuICAgICAgdmFyICRoaWdobGlnaHRlZCA9ICRwaWNrZXIuZmluZCgnLm5vdGUtZGltZW5zaW9uLXBpY2tlci1oaWdobGlnaHRlZCcpO1xuICAgICAgdmFyICR1bmhpZ2hsaWdodGVkID0gJHBpY2tlci5maW5kKCcubm90ZS1kaW1lbnNpb24tcGlja2VyLXVuaGlnaGxpZ2h0ZWQnKTtcblxuICAgICAgdmFyIHBvc09mZnNldDtcbiAgICAgIC8vIEhUTUw1IHdpdGggalF1ZXJ5IC0gZS5vZmZzZXRYIGlzIHVuZGVmaW5lZCBpbiBGaXJlZm94XG4gICAgICBpZiAoZXZlbnQub2Zmc2V0WCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBwb3NDYXRjaGVyID0gJChldmVudC50YXJnZXQpLm9mZnNldCgpO1xuICAgICAgICBwb3NPZmZzZXQgPSB7XG4gICAgICAgICAgeDogZXZlbnQucGFnZVggLSBwb3NDYXRjaGVyLmxlZnQsXG4gICAgICAgICAgeTogZXZlbnQucGFnZVkgLSBwb3NDYXRjaGVyLnRvcFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcG9zT2Zmc2V0ID0ge1xuICAgICAgICAgIHg6IGV2ZW50Lm9mZnNldFgsXG4gICAgICAgICAgeTogZXZlbnQub2Zmc2V0WVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgZGltID0ge1xuICAgICAgICBjOiBNYXRoLmNlaWwocG9zT2Zmc2V0LnggLyBQWF9QRVJfRU0pIHx8IDEsXG4gICAgICAgIHI6IE1hdGguY2VpbChwb3NPZmZzZXQueSAvIFBYX1BFUl9FTSkgfHwgMVxuICAgICAgfTtcblxuICAgICAgJGhpZ2hsaWdodGVkLmNzcyh7IHdpZHRoOiBkaW0uYyArICdlbScsIGhlaWdodDogZGltLnIgKyAnZW0nIH0pO1xuICAgICAgJGNhdGNoZXIuYXR0cignZGF0YS12YWx1ZScsIGRpbS5jICsgJ3gnICsgZGltLnIpO1xuXG4gICAgICBpZiAoMyA8IGRpbS5jICYmIGRpbS5jIDwgb3B0aW9ucy5pbnNlcnRUYWJsZU1heFNpemUuY29sKSB7XG4gICAgICAgICR1bmhpZ2hsaWdodGVkLmNzcyh7IHdpZHRoOiBkaW0uYyArIDEgKyAnZW0nfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICgzIDwgZGltLnIgJiYgZGltLnIgPCBvcHRpb25zLmluc2VydFRhYmxlTWF4U2l6ZS5yb3cpIHtcbiAgICAgICAgJHVuaGlnaGxpZ2h0ZWQuY3NzKHsgaGVpZ2h0OiBkaW0uciArIDEgKyAnZW0nfSk7XG4gICAgICB9XG5cbiAgICAgICRkaW1lbnNpb25EaXNwbGF5Lmh0bWwoZGltLmMgKyAnIHggJyArIGRpbS5yKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYmluZCBLZXlNYXAgb24ga2V5ZG93blxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0ga2V5TWFwXG4gICAgICovXG4gICAgdGhpcy5iaW5kS2V5TWFwID0gZnVuY3Rpb24gKGxheW91dEluZm8sIGtleU1hcCkge1xuICAgICAgdmFyICRlZGl0b3IgPSBsYXlvdXRJbmZvLmVkaXRvcigpO1xuICAgICAgdmFyICRlZGl0YWJsZSA9IGxheW91dEluZm8uZWRpdGFibGUoKTtcblxuICAgICAgJGVkaXRhYmxlLm9uKCdrZXlkb3duLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAvLyBtb2RpZmllclxuICAgICAgICBpZiAoZXZlbnQubWV0YUtleSkgeyBrZXlzLnB1c2goJ0NNRCcpOyB9XG4gICAgICAgIGlmIChldmVudC5jdHJsS2V5ICYmICFldmVudC5hbHRLZXkpIHsga2V5cy5wdXNoKCdDVFJMJyk7IH1cbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7IGtleXMucHVzaCgnU0hJRlQnKTsgfVxuXG4gICAgICAgIC8vIGtleWNvZGVcbiAgICAgICAgdmFyIGtleU5hbWUgPSBrZXkubmFtZUZyb21Db2RlW2V2ZW50LmtleUNvZGVdO1xuICAgICAgICBpZiAoa2V5TmFtZSkge1xuICAgICAgICAgIGtleXMucHVzaChrZXlOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwbHVnaW5FdmVudDtcbiAgICAgICAgdmFyIGtleVN0cmluZyA9IGtleXMuam9pbignKycpO1xuICAgICAgICB2YXIgZXZlbnROYW1lID0ga2V5TWFwW2tleVN0cmluZ107XG4gICAgICAgIGlmIChldmVudE5hbWUpIHtcbiAgICAgICAgICAvLyBGSVhNRSBTdW1tZXJub3RlIGRvZXNuJ3Qgc3VwcG9ydCBldmVudCBwaXBlbGluZSB5ZXQuXG4gICAgICAgICAgLy8gIC0gUGx1Z2luIC0+IEJhc2UgQ29kZVxuICAgICAgICAgIHBsdWdpbkV2ZW50ID0gJC5zdW1tZXJub3RlLnBsdWdpbkV2ZW50c1trZXlTdHJpbmddO1xuICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24ocGx1Z2luRXZlbnQpKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luRXZlbnQoZXZlbnQsIG1vZHVsZXMuZWRpdG9yLCBsYXlvdXRJbmZvKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGx1Z2luRXZlbnQgPSAkLnN1bW1lcm5vdGUucGx1Z2luRXZlbnRzW2V2ZW50TmFtZV07XG5cbiAgICAgICAgICBpZiAoJC5pc0Z1bmN0aW9uKHBsdWdpbkV2ZW50KSkge1xuICAgICAgICAgICAgcGx1Z2luRXZlbnQoZXZlbnQsIG1vZHVsZXMuZWRpdG9yLCBsYXlvdXRJbmZvKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG1vZHVsZXMuZWRpdG9yW2V2ZW50TmFtZV0pIHtcbiAgICAgICAgICAgIG1vZHVsZXMuZWRpdG9yW2V2ZW50TmFtZV0oJGVkaXRhYmxlLCAkZWRpdG9yLmRhdGEoJ29wdGlvbnMnKSk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29tbWFuZHNbZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgY29tbWFuZHNbZXZlbnROYW1lXS5jYWxsKHRoaXMsIGxheW91dEluZm8pO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoa2V5LmlzRWRpdChldmVudC5rZXlDb2RlKSkge1xuICAgICAgICAgIG1vZHVsZXMuZWRpdG9yLmFmdGVyQ29tbWFuZCgkZWRpdGFibGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYXR0YWNoIGV2ZW50aGFuZGxlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm8gLSBsYXlvdXQgSW5mb3JtYXRpb25zXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB1c2VyIG9wdGlvbnMgaW5jbHVkZSBjdXN0b20gZXZlbnQgaGFuZGxlcnNcbiAgICAgKi9cbiAgICB0aGlzLmF0dGFjaCA9IGZ1bmN0aW9uIChsYXlvdXRJbmZvLCBvcHRpb25zKSB7XG4gICAgICAvLyBoYW5kbGVycyBmb3IgZWRpdGFibGVcbiAgICAgIGlmIChvcHRpb25zLnNob3J0Y3V0cykge1xuICAgICAgICB0aGlzLmJpbmRLZXlNYXAobGF5b3V0SW5mbywgb3B0aW9ucy5rZXlNYXBbYWdlbnQuaXNNYWMgPyAnbWFjJyA6ICdwYyddKTtcbiAgICAgIH1cbiAgICAgIGxheW91dEluZm8uZWRpdGFibGUoKS5vbignbW91c2Vkb3duLnN1bW1lcm5vdGUnLCBoTW91c2Vkb3duKTtcbiAgICAgIGxheW91dEluZm8uZWRpdGFibGUoKS5vbigna2V5dXAuc3VtbWVybm90ZScsIGhLZXl1cEFuZE1vdXNldXApO1xuICAgICAgbGF5b3V0SW5mby5lZGl0YWJsZSgpLm9uKCdtb3VzZXVwLnN1bW1lcm5vdGUnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gMSkge1xuICAgICAgICAgIGhLZXl1cEFuZE1vdXNldXAoZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGF5b3V0SW5mby5lZGl0YWJsZSgpLm9uKCdzY3JvbGwuc3VtbWVybm90ZScsIGhTY3JvbGwpO1xuXG4gICAgICAvLyBoYW5kbGVyIGZvciBjbGlwYm9hcmRcbiAgICAgIG1vZHVsZXMuY2xpcGJvYXJkLmF0dGFjaChsYXlvdXRJbmZvLCBvcHRpb25zKTtcblxuICAgICAgLy8gaGFuZGxlciBmb3IgaGFuZGxlIGFuZCBwb3BvdmVyXG4gICAgICBtb2R1bGVzLmhhbmRsZS5hdHRhY2gobGF5b3V0SW5mbywgb3B0aW9ucyk7XG4gICAgICBsYXlvdXRJbmZvLnBvcG92ZXIoKS5vbignY2xpY2snLCBoVG9vbGJhckFuZFBvcG92ZXJDbGljayk7XG4gICAgICBsYXlvdXRJbmZvLnBvcG92ZXIoKS5vbignbW91c2Vkb3duJywgaFRvb2xiYXJBbmRQb3BvdmVyTW91c2Vkb3duKTtcblxuICAgICAgLy8gaGlkZSBwb3BvdmVyIG9uIHdpbmRvdyByZXNpemVcbiAgICAgIHZhciB3bmRSZXNpemVUaW1lb3V0O1xuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHduZFJlc2l6ZVRpbWVvdXQpO1xuICAgICAgICAgICAgd25kUmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlcy5wb3BvdmVyLmhpZGUobGF5b3V0SW5mby5wb3BvdmVyKCkpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICB9KTtcblxuICAgICAgLy8gaGFuZGxlciBmb3IgZHJhZyBhbmQgZHJvcFxuICAgICAgbW9kdWxlcy5kcmFnQW5kRHJvcC5hdHRhY2gobGF5b3V0SW5mbywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIGhhbmRsZXJzIGZvciBmcmFtZSBtb2RlICh0b29sYmFyLCBzdGF0dXNiYXIpXG4gICAgICBpZiAoIW9wdGlvbnMuYWlyTW9kZSkge1xuICAgICAgICAvLyBoYW5kbGVyIGZvciB0b29sYmFyXG4gICAgICAgIGxheW91dEluZm8udG9vbGJhcigpLm9uKCdjbGljaycsIGhUb29sYmFyQW5kUG9wb3ZlckNsaWNrKTtcbiAgICAgICAgbGF5b3V0SW5mby50b29sYmFyKCkub24oJ21vdXNlZG93bicsIGhUb29sYmFyQW5kUG9wb3Zlck1vdXNlZG93bik7XG5cbiAgICAgICAgLy8gaGFuZGxlciBmb3Igc3RhdHVzYmFyXG4gICAgICAgIG1vZHVsZXMuc3RhdHVzYmFyLmF0dGFjaChsYXlvdXRJbmZvLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGFuZGxlciBmb3IgdGFibGUgZGltZW5zaW9uXG4gICAgICB2YXIgJGNhdGNoZXJDb250YWluZXIgPSBvcHRpb25zLmFpck1vZGUgPyBsYXlvdXRJbmZvLnBvcG92ZXIoKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXlvdXRJbmZvLnRvb2xiYXIoKTtcbiAgICAgIHZhciAkY2F0Y2hlciA9ICRjYXRjaGVyQ29udGFpbmVyLmZpbmQoJy5ub3RlLWRpbWVuc2lvbi1waWNrZXItbW91c2VjYXRjaGVyJyk7XG4gICAgICAkY2F0Y2hlci5jc3Moe1xuICAgICAgICB3aWR0aDogb3B0aW9ucy5pbnNlcnRUYWJsZU1heFNpemUuY29sICsgJ2VtJyxcbiAgICAgICAgaGVpZ2h0OiBvcHRpb25zLmluc2VydFRhYmxlTWF4U2l6ZS5yb3cgKyAnZW0nXG4gICAgICB9KS5vbignbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGhEaW1lbnNpb25QaWNrZXJNb3ZlKGV2ZW50LCBvcHRpb25zKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBzYXZlIG9wdGlvbnMgb24gZWRpdG9yXG4gICAgICBsYXlvdXRJbmZvLmVkaXRvcigpLmRhdGEoJ29wdGlvbnMnLCBvcHRpb25zKTtcblxuICAgICAgLy8gcmV0IHN0eWxlV2l0aENTUyBmb3IgYmFja0NvbG9yIC8gZm9yZUNvbG9yIGNsZWFyaW5nIHdpdGggJ2luaGVyaXQnLlxuICAgICAgaWYgKCFhZ2VudC5pc01TSUUpIHtcbiAgICAgICAgLy8gW3dvcmthcm91bmRdIGZvciBGaXJlZm94XG4gICAgICAgIC8vICAtIHByb3RlY3QgRkYgRXJyb3I6IE5TX0VSUk9SX0ZBSUxVUkU6IEZhaWx1cmVcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3N0eWxlV2l0aENTUycsIDAsIG9wdGlvbnMuc3R5bGVXaXRoU3Bhbik7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuXG4gICAgICAvLyBIaXN0b3J5XG4gICAgICB2YXIgaGlzdG9yeSA9IG5ldyBIaXN0b3J5KGxheW91dEluZm8uZWRpdGFibGUoKSk7XG4gICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkuZGF0YSgnTm90ZUhpc3RvcnknLCBoaXN0b3J5KTtcblxuICAgICAgLy8gQWxsIGVkaXRvciBzdGF0dXMgd2lsbCBiZSBzYXZlZCBvbiBlZGl0YWJsZSB3aXRoIGpxdWVyeSdzIGRhdGFcbiAgICAgIC8vIGZvciBzdXBwb3J0IG11bHRpcGxlIGVkaXRvciB3aXRoIHNpbmdsZXRvbiBvYmplY3QuXG4gICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkuZGF0YSgnY2FsbGJhY2tzJywge1xuICAgICAgICBvbkluaXQ6IG9wdGlvbnMub25Jbml0LFxuICAgICAgICBvbkZvY3VzOiBvcHRpb25zLm9uRm9jdXMsXG4gICAgICAgIG9uQmx1cjogb3B0aW9ucy5vbkJsdXIsXG4gICAgICAgIG9uS2V5ZG93bjogb3B0aW9ucy5vbktleWRvd24sXG4gICAgICAgIG9uS2V5dXA6IG9wdGlvbnMub25LZXl1cCxcbiAgICAgICAgb25Nb3VzZWRvd246IG9wdGlvbnMub25Nb3VzZWRvd24sXG4gICAgICAgIG9uRW50ZXI6IG9wdGlvbnMub25FbnRlcixcbiAgICAgICAgb25QYXN0ZTogb3B0aW9ucy5vblBhc3RlLFxuICAgICAgICBvbkJlZm9yZUNvbW1hbmQ6IG9wdGlvbnMub25CZWZvcmVDb21tYW5kLFxuICAgICAgICBvbkNoYW5nZTogb3B0aW9ucy5vbkNoYW5nZSxcbiAgICAgICAgb25JbWFnZVVwbG9hZDogb3B0aW9ucy5vbkltYWdlVXBsb2FkLFxuICAgICAgICBvbkltYWdlVXBsb2FkRXJyb3I6IG9wdGlvbnMub25JbWFnZVVwbG9hZEVycm9yLFxuICAgICAgICBvbk1lZGlhRGVsZXRlOiBvcHRpb25zLm9uTWVkaWFEZWxldGUsXG4gICAgICAgIG9uVG9vbGJhckNsaWNrOiBvcHRpb25zLm9uVG9vbGJhckNsaWNrXG4gICAgICB9KTtcblxuICAgICAgLy92YXIgc3R5bGVJbmZvID0gbW9kdWxlcy5lZGl0b3Iuc3R5bGVGcm9tTm9kZShsYXlvdXRJbmZvLmVkaXRhYmxlKCkpOyAvLyBvcmlnaW5hbCBjb2RlXG4gICAgICB2YXIgc3R5bGVJbmZvID0gbW9kdWxlcy5lZGl0b3IuY3VycmVudFN0eWxlKGxheW91dEluZm8uZWRpdGFibGUoKSk7XG4gICAgICB0aGlzLnVwZGF0ZVN0eWxlSW5mbyhzdHlsZUluZm8sIGxheW91dEluZm8pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBhdHRhY2gganF1ZXJ5IGN1c3RvbSBldmVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGxheW91dEluZm8gLSBsYXlvdXQgSW5mb3JtYXRpb25zXG4gICAgICovXG4gICAgdGhpcy5hdHRhY2hDdXN0b21FdmVudCA9IGZ1bmN0aW9uIChsYXlvdXRJbmZvLCBvcHRpb25zKSB7XG4gICAgICB2YXIgJGhvbGRlciA9IGxheW91dEluZm8uaG9sZGVyKCk7XG4gICAgICB2YXIgJGVkaXRhYmxlID0gbGF5b3V0SW5mby5lZGl0YWJsZSgpO1xuICAgICAgdmFyIGNhbGxiYWNrcyA9ICRlZGl0YWJsZS5kYXRhKCdjYWxsYmFja3MnKTtcblxuICAgICAgJGVkaXRhYmxlLm9uKCdmb2N1cy5zdW1tZXJub3RlJywgYmluZEN1c3RvbUV2ZW50KCRob2xkZXIsIGNhbGxiYWNrcywgJ2ZvY3VzJykpO1xuICAgICAgJGVkaXRhYmxlLm9uKCdibHVyLnN1bW1lcm5vdGUnLCBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnYmx1cicpKTtcblxuICAgICAgJGVkaXRhYmxlLmtleWRvd24oZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBrZXkuY29kZS5FTlRFUikge1xuICAgICAgICAgIGJpbmRDdXN0b21FdmVudCgkaG9sZGVyLCBjYWxsYmFja3MsICdlbnRlcicpLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGJpbmRDdXN0b21FdmVudCgkaG9sZGVyLCBjYWxsYmFja3MsICdrZXlkb3duJykuY2FsbCh0aGlzLCBldmVudCk7XG4gICAgICB9KTtcbiAgICAgICRlZGl0YWJsZS5rZXl1cChiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAna2V5dXAnKSk7XG5cbiAgICAgICRlZGl0YWJsZS5vbignbW91c2Vkb3duLnN1bW1lcm5vdGUnLCBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnbW91c2Vkb3duJykpO1xuICAgICAgJGVkaXRhYmxlLm9uKCdtb3VzZXVwLnN1bW1lcm5vdGUnLCBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnbW91c2V1cCcpKTtcbiAgICAgICRlZGl0YWJsZS5vbignc2Nyb2xsLnN1bW1lcm5vdGUnLCBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnc2Nyb2xsJykpO1xuXG4gICAgICAkZWRpdGFibGUub24oJ3Bhc3RlLnN1bW1lcm5vdGUnLCBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAncGFzdGUnKSk7XG5cbiAgICAgIC8vIFt3b3JrYXJvdW5kXSBJRSBkb2Vzbid0IGhhdmUgaW5wdXQgZXZlbnRzIGZvciBjb250ZW50RWRpdGFibGVcbiAgICAgIC8vICAtIHNlZTogaHR0cHM6Ly9nb28uZ2wvNGJmSXZBXG4gICAgICB2YXIgY2hhbmdlRXZlbnROYW1lID0gYWdlbnQuaXNNU0lFID8gJ0RPTUNoYXJhY3RlckRhdGFNb2RpZmllZCBET01TdWJ0cmVlTW9kaWZpZWQgRE9NTm9kZUluc2VydGVkJyA6ICdpbnB1dCc7XG4gICAgICAkZWRpdGFibGUub24oY2hhbmdlRXZlbnROYW1lK1wiLnN1bW1lcm5vdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAnY2hhbmdlJykoJGVkaXRhYmxlLmh0bWwoKSwgJGVkaXRhYmxlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIW9wdGlvbnMuYWlyTW9kZSkge1xuICAgICAgICBsYXlvdXRJbmZvLnRvb2xiYXIoKS5jbGljayhiaW5kQ3VzdG9tRXZlbnQoJGhvbGRlciwgY2FsbGJhY2tzLCAndG9vbGJhci5jbGljaycpKTtcbiAgICAgICAgbGF5b3V0SW5mby5wb3BvdmVyKCkuY2xpY2soYmluZEN1c3RvbUV2ZW50KCRob2xkZXIsIGNhbGxiYWNrcywgJ3BvcG92ZXIuY2xpY2snKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRleHRhcmVhOiBhdXRvIGZpbGxpbmcgdGhlIGNvZGUgYmVmb3JlIGZvcm0gc3VibWl0LlxuICAgICAgaWYgKGRvbS5pc1RleHRhcmVhKGxpc3QuaGVhZCgkaG9sZGVyKSkpIHtcbiAgICAgICAgJGhvbGRlci5jbG9zZXN0KCdmb3JtJykuc3VibWl0KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgbGF5b3V0SW5mby5ob2xkZXIoKS52YWwobGF5b3V0SW5mby5ob2xkZXIoKS5jb2RlKCkpO1xuICAgICAgICAgIGJpbmRDdXN0b21FdmVudCgkaG9sZGVyLCBjYWxsYmFja3MsICdzdWJtaXQnKS5jYWxsKHRoaXMsIGUsICRob2xkZXIuY29kZSgpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGZpcmUgaW5pdCBldmVudFxuICAgICAgYmluZEN1c3RvbUV2ZW50KCRob2xkZXIsIGNhbGxiYWNrcywgJ2luaXQnKShsYXlvdXRJbmZvKTtcblxuICAgICAgLy8gZmlyZSBwbHVnaW4gaW5pdCBldmVudFxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9ICQuc3VtbWVybm90ZS5wbHVnaW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmICgkLmlzRnVuY3Rpb24oJC5zdW1tZXJub3RlLnBsdWdpbnNbaV0uaW5pdCkpIHtcbiAgICAgICAgICAkLnN1bW1lcm5vdGUucGx1Z2luc1tpXS5pbml0KGxheW91dEluZm8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZGV0YWNoID0gZnVuY3Rpb24gKGxheW91dEluZm8sIG9wdGlvbnMpIHtcbiAgICAgIGxheW91dEluZm8uaG9sZGVyKCkub2ZmKFwiLnN1bW1lcm5vdGVcIik7XG4gICAgICBsYXlvdXRJbmZvLmVkaXRhYmxlKCkub2ZmKFwiLnN1bW1lcm5vdGVcIik7XG5cbiAgICAgIGxheW91dEluZm8ucG9wb3ZlcigpLm9mZihcIi5zdW1tZXJub3RlXCIpO1xuICAgICAgbGF5b3V0SW5mby5oYW5kbGUoKS5vZmYoXCIuc3VtbWVybm90ZVwiKTtcbiAgICAgIGxheW91dEluZm8uZGlhbG9nKCkub2ZmKCk7XG5cbiAgICAgIGlmICghb3B0aW9ucy5haXJNb2RlKSB7XG4gICAgICAgIGxheW91dEluZm8uZHJvcHpvbmUoKS5vZmYoKTtcbiAgICAgICAgbGF5b3V0SW5mby50b29sYmFyKCkub2ZmKCk7XG4gICAgICAgIGxheW91dEluZm8uc3RhdHVzYmFyKCkub2ZmKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzIFJlbmRlcmVyXG4gICAqXG4gICAqIHJlbmRlcmVyXG4gICAqXG4gICAqIHJlbmRlcmluZyB0b29sYmFyIGFuZCBlZGl0YWJsZVxuICAgKi9cbiAgdmFyIFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogYm9vdHN0cmFwIGJ1dHRvbiB0ZW1wbGF0ZVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGxhYmVsIGJ1dHRvbiBuYW1lXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBidXR0b24gb3B0aW9uc1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5ldmVudF0gZGF0YS1ldmVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5jbGFzc05hbWVdIGJ1dHRvbidzIGNsYXNzIG5hbWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMudmFsdWVdIGRhdGEtdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMudGl0bGVdIGJ1dHRvbidzIHRpdGxlIGZvciBwb3B1cFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5kcm9wZG93bl0gZHJvcGRvd24gaHRtbFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5oaWRlXSBkYXRhLWhpZGVcbiAgICAgKi9cbiAgICB2YXIgdHBsQnV0dG9uID0gZnVuY3Rpb24gKGxhYmVsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZXZlbnQgPSBvcHRpb25zLmV2ZW50O1xuICAgICAgdmFyIHZhbHVlID0gb3B0aW9ucy52YWx1ZTtcbiAgICAgIHZhciB0aXRsZSA9IG9wdGlvbnMudGl0bGU7XG4gICAgICB2YXIgbmFtZSA9IG9wdGlvbnMubmFtZTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZTtcbiAgICAgIHZhciBkcm9wZG93biA9IG9wdGlvbnMuZHJvcGRvd247XG4gICAgICB2YXIgbm9jYXJldCA9IG9wdGlvbnMubm9jYXJldDtcbiAgICAgIHZhciBoaWRlID0gb3B0aW9ucy5oaWRlO1xuXG4gICAgICByZXR1cm4gKGRyb3Bkb3duID8gJzxkaXYgY2xhc3M9XCJidG4tZ3JvdXAgZHJvcHVwJyArXG4gICAgICAgICAgICAgICAoY2xhc3NOYW1lID8gJyAnICsgY2xhc3NOYW1lIDogJycpICsgJ1wiJyArXG4gICAgICAgICAgICAgICAobmFtZSA/ICcgZGF0YS1uYW1lPVwiJyArIG5hbWUgKyAnXCInIDogJycpICtcbiAgICAgICAgICAgICAgJz4nIDogJycpICtcbiAgICAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIicgK1xuICAgICAgICAgICAgICAgICAnIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbScgK1xuICAgICAgICAgICAgICAgICAgICgoIWRyb3Bkb3duICYmIGNsYXNzTmFtZSkgPyAnICcgKyBjbGFzc05hbWUgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgIChkcm9wZG93biA/ICcgZHJvcGRvd24tdG9nZ2xlJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICdcIicgK1xuICAgICAgICAgICAgICAgICAoZHJvcGRvd24gPyAnIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIicgOiAnJykgK1xuICAgICAgICAgICAgICAgICAodGl0bGUgPyAnIHRpdGxlPVwiJyArIHRpdGxlICsgJ1wiJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgIChldmVudCA/ICcgZGF0YS1ldmVudD1cIicgKyBldmVudCArICdcIicgOiAnJykgK1xuICAgICAgICAgICAgICAgICAobmFtZSAmJiAhZHJvcGRvd24gPyAnIGRhdGEtbmFtZT1cIicgKyBuYW1lICsgJ1wiJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICh2YWx1ZSA/ICcgZGF0YS12YWx1ZT1cXCcnICsgdmFsdWUgKyAnXFwnJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgIChoaWRlID8gJyBkYXRhLWhpZGU9XFwnJyArIGhpZGUgKyAnXFwnJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgIChkcm9wZG93biA/ICcgc3R5bGU9XCJ6LWluZGV4OiAxMDAxO1wiJyA6ICcnKSArIC8vIGZpeCBmb3Igb2xkIHNhZmFyaSBjbGljayBvbiBkcm9wZG93blxuICAgICAgICAgICAgICAgICAnIHRhYmluZGV4PVwiLTFcIj4nICtcbiAgICAgICAgICAgICAgICAgbGFiZWwgK1xuICAgICAgICAgICAgICAgICAoZHJvcGRvd24gJiYgIW5vY2FyZXQgPyAnIDxzcGFuIGNsYXNzPVwiY2FyZXRcIj48L3NwYW4+JyA6ICcnKSArXG4gICAgICAgICAgICAgICAnPC9idXR0b24+JyArXG4gICAgICAgICAgICAgICAoZHJvcGRvd24gfHwgJycpICtcbiAgICAgICAgICAgICAoZHJvcGRvd24gPyAnPC9kaXY+JyA6ICcnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYm9vdHN0cmFwIGljb24gYnV0dG9uIHRlbXBsYXRlXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWNvbkNsYXNzTmFtZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuZXZlbnRdXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnZhbHVlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy50aXRsZV1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuZHJvcGRvd25dXG4gICAgICovXG4gICAgdmFyIHRwbEljb25CdXR0b24gPSBmdW5jdGlvbiAoaWNvbkNsYXNzTmFtZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGxhYmVsID0gJzxpIGNsYXNzPVwiJyArIGljb25DbGFzc05hbWUgKyAnXCI+PC9pPic7XG4gICAgICByZXR1cm4gdHBsQnV0dG9uKGxhYmVsLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogYm9vdHN0cmFwIHBvcG92ZXIgdGVtcGxhdGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuICAgICAqL1xuICAgIHZhciB0cGxQb3BvdmVyID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgY29udGVudCkge1xuICAgICAgdmFyICRwb3BvdmVyID0gJCgnPGRpdiBjbGFzcz1cIicgKyBjbGFzc05hbWUgKyAnIHBvcG92ZXIgdG9wIGluXCIgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPicgK1xuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhcnJvd1wiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIj4nICtcbiAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAnPC9kaXY+Jyk7XG5cbiAgICAgICRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQnKS5hcHBlbmQoY29udGVudCk7XG4gICAgICByZXR1cm4gJHBvcG92ZXI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGJvb3RzdHJhcCBkaWFsb2cgdGVtcGxhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3RpdGxlPScnXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtmb290ZXI9JyddXG4gICAgICovXG4gICAgdmFyIHRwbERpYWxvZyA9IGZ1bmN0aW9uIChjbGFzc05hbWUsIHRpdGxlLCBib2R5LCBmb290ZXIpIHtcbiAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIicgKyBjbGFzc05hbWUgKyAnIG1vZGFsXCIgYXJpYS1oaWRkZW49XCJmYWxzZVwiPicgK1xuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj4nICtcbiAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+JyArXG4gICAgICAgICAgICAgICAgICAgKHRpdGxlID9cbiAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIiB0YWJpbmRleD1cIi0xXCI+JnRpbWVzOzwvYnV0dG9uPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+JyArIHRpdGxlICsgJzwvaDQ+JyArXG4gICAgICAgICAgICAgICAgICAgJzwvZGl2PicgOiAnJ1xuICAgICAgICAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPicgKyBib2R5ICsgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgIChmb290ZXIgP1xuICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+JyArIGZvb3RlciArICc8L2Rpdj4nIDogJydcbiAgICAgICAgICAgICAgICAgICApICtcbiAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBib290c3RyYXAgZHJvcGRvd24gdGVtcGxhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFN0cmluZ1tdfSBjb250ZW50c1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbY2xhc3NOYW1lPScnXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbbm9kZU5hbWU9JyddXG4gICAgICovXG4gICAgdmFyIHRwbERyb3Bkb3duID0gZnVuY3Rpb24gKGNvbnRlbnRzLCBjbGFzc05hbWUsIG5vZGVOYW1lKSB7XG4gICAgICB2YXIgY2xhc3NlcyA9ICdkcm9wZG93bi1tZW51JyArIChjbGFzc05hbWUgPyAnICcgKyBjbGFzc05hbWUgOiAnJyk7XG4gICAgICBub2RlTmFtZSA9IG5vZGVOYW1lIHx8ICd1bCc7XG4gICAgICBpZiAoY29udGVudHMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBjb250ZW50cyA9IGNvbnRlbnRzLmpvaW4oJycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzwnICsgbm9kZU5hbWUgKyAnIGNsYXNzPVwiJyArIGNsYXNzZXMgKyAnXCI+JyArIGNvbnRlbnRzICsgJzwvJyArIG5vZGVOYW1lICsgJz4nO1xuICAgIH07XG5cbiAgICB2YXIgdHBsQnV0dG9uSW5mbyA9IHtcbiAgICAgIHBpY3R1cmU6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0cGxJY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnMuaW1hZ2UuaW1hZ2UsIHtcbiAgICAgICAgICBldmVudDogJ3Nob3dJbWFnZURpYWxvZycsXG4gICAgICAgICAgdGl0bGU6IGxhbmcuaW1hZ2UuaW1hZ2UsXG4gICAgICAgICAgaGlkZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBsaW5rOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmxpbmsubGluaywge1xuICAgICAgICAgIGV2ZW50OiAnc2hvd0xpbmtEaWFsb2cnLFxuICAgICAgICAgIHRpdGxlOiBsYW5nLmxpbmsubGluayxcbiAgICAgICAgICBoaWRlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHRhYmxlOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICB2YXIgZHJvcGRvd24gPSBbXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWRpbWVuc2lvbi1waWNrZXJcIj4nLFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1kaW1lbnNpb24tcGlja2VyLW1vdXNlY2F0Y2hlclwiIGRhdGEtZXZlbnQ9XCJpbnNlcnRUYWJsZVwiIGRhdGEtdmFsdWU9XCIxeDFcIj48L2Rpdj4nLFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1kaW1lbnNpb24tcGlja2VyLWhpZ2hsaWdodGVkXCI+PC9kaXY+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtZGltZW5zaW9uLXBpY2tlci11bmhpZ2hsaWdodGVkXCI+PC9kaXY+JyxcbiAgICAgICAgICAnPC9kaXY+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtZGltZW5zaW9uLWRpc3BsYXlcIj4gMSB4IDEgPC9kaXY+J1xuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLnRhYmxlLnRhYmxlLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcudGFibGUudGFibGUsXG4gICAgICAgICAgZHJvcGRvd246IHRwbERyb3Bkb3duKGRyb3Bkb3duLCAnbm90ZS10YWJsZScpXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHN0eWxlOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICB2YXIgaXRlbXMgPSBvcHRpb25zLnN0eWxlVGFncy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHYpIHtcbiAgICAgICAgICB2YXIgbGFiZWwgPSBsYW5nLnN0eWxlW3YgPT09ICdwJyA/ICdub3JtYWwnIDogdl07XG4gICAgICAgICAgcmV0dXJuIG1lbW8gKyAnPGxpPjxhIGRhdGEtZXZlbnQ9XCJmb3JtYXRCbG9ja1wiIGhyZWY9XCIjXCIgZGF0YS12YWx1ZT1cIicgKyB2ICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgIGxhYmVsICtcbiAgICAgICAgICAgICAgICAgJzwvYT48L2xpPic7XG4gICAgICAgIH0sICcnKTtcblxuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLnN0eWxlLnN0eWxlLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuc3R5bGUuc3R5bGUsXG4gICAgICAgICAgZHJvcGRvd246IHRwbERyb3Bkb3duKGl0ZW1zKVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBmb250bmFtZTogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHJlYWxGb250TGlzdCA9IFtdO1xuICAgICAgICB2YXIgaXRlbXMgPSBvcHRpb25zLmZvbnROYW1lcy5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIHYpIHtcbiAgICAgICAgICBpZiAoIWFnZW50LmlzRm9udEluc3RhbGxlZCh2KSAmJiAhbGlzdC5jb250YWlucyhvcHRpb25zLmZvbnROYW1lc0lnbm9yZUNoZWNrLCB2KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlYWxGb250TGlzdC5wdXNoKHYpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHYpXG4gICAgICAgICAgcmV0dXJuIG1lbW8gKyAnPGxpPjxhIGRhdGEtZXZlbnQ9XCJmb250TmFtZVwiIGhyZWY9XCIjXCIgZGF0YS12YWx1ZT1cIicgKyB2ICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCInICsgb3B0aW9ucy5pY29uUHJlZml4ICsgJ2NoZWNrXCI+PC9pPiA8c3BhbiBzdHlsZT1cImZvbnQtZmFtaWx5OlxcJycgKyB2ICsgJ1xcJ1wiPicgKyB2ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+PC9hPjwvbGk+JztcbiAgICAgICAgfSwgJycpO1xuXG4gICAgICAgIHZhciBoYXNEZWZhdWx0Rm9udCA9IGFnZW50LmlzRm9udEluc3RhbGxlZChvcHRpb25zLmRlZmF1bHRGb250TmFtZSk7XG4gICAgICAgIHZhciBkZWZhdWx0Rm9udE5hbWUgPSAoaGFzRGVmYXVsdEZvbnQpID8gb3B0aW9ucy5kZWZhdWx0Rm9udE5hbWUgOiByZWFsRm9udExpc3RbMF07XG5cbiAgICAgICAgdmFyIGxhYmVsID0gJzxzcGFuIGNsYXNzPVwibm90ZS1jdXJyZW50LWZvbnRuYW1lXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Rm9udE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4nO1xuICAgICAgICByZXR1cm4gdHBsQnV0dG9uKGxhYmVsLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuZm9udC5uYW1lLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ25vdGUtZm9udG5hbWUnLFxuICAgICAgICAgIGRyb3Bkb3duOiB0cGxEcm9wZG93bihpdGVtcywgJ25vdGUtY2hlY2snKVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBmb250c2l6ZTogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGl0ZW1zID0gb3B0aW9ucy5mb250U2l6ZXMucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCB2KSB7XG4gICAgICAgICAgcmV0dXJuIG1lbW8gKyAnPGxpPjxhIGRhdGEtZXZlbnQ9XCJmb250U2l6ZVwiIGhyZWY9XCIjXCIgZGF0YS12YWx1ZT1cIicgKyB2ICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCInICsgb3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5taXNjLmNoZWNrICsgJ1wiPjwvaT4gJyArIHYgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT48L2xpPic7XG4gICAgICAgIH0sICcnKTtcblxuICAgICAgICB2YXIgbGFiZWwgPSAnPHNwYW4gY2xhc3M9XCJub3RlLWN1cnJlbnQtZm9udHNpemVcIj4xMTwvc3Bhbj4nO1xuICAgICAgICByZXR1cm4gdHBsQnV0dG9uKGxhYmVsLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuZm9udC5zaXplLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ25vdGUtZm9udHNpemUnLFxuICAgICAgICAgIGRyb3Bkb3duOiB0cGxEcm9wZG93bihpdGVtcywgJ25vdGUtY2hlY2snKVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjb2xvcjogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGNvbG9yQnV0dG9uTGFiZWwgPSAnPGkgY2xhc3M9XCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmNvbG9yLnJlY2VudCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBzdHlsZT1cImNvbG9yOmJsYWNrO2JhY2tncm91bmQtY29sb3I6eWVsbG93O1wiPjwvaT4nO1xuXG4gICAgICAgIHZhciBjb2xvckJ1dHRvbiA9IHRwbEJ1dHRvbihjb2xvckJ1dHRvbkxhYmVsLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1yZWNlbnQtY29sb3InLFxuICAgICAgICAgIHRpdGxlOiBsYW5nLmNvbG9yLnJlY2VudCxcbiAgICAgICAgICBldmVudDogJ2NvbG9yJyxcbiAgICAgICAgICB2YWx1ZTogJ3tcImJhY2tDb2xvclwiOlwieWVsbG93XCJ9J1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgaXRlbXMgPSBbXG4gICAgICAgICAgJzxsaT48ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCI+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtcGFsZXR0ZS10aXRsZVwiPicgKyBsYW5nLmNvbG9yLmJhY2tncm91bmQgKyAnPC9kaXY+JyxcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtY29sb3ItcmVzZXRcIiBkYXRhLWV2ZW50PVwiYmFja0NvbG9yXCInLFxuICAgICAgICAgICcgZGF0YS12YWx1ZT1cImluaGVyaXRcIiB0aXRsZT1cIicgKyBsYW5nLmNvbG9yLnRyYW5zcGFyZW50ICsgJ1wiPicgKyBsYW5nLmNvbG9yLnNldFRyYW5zcGFyZW50ICsgJzwvZGl2PicsXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbG9yLXBhbGV0dGVcIiBkYXRhLXRhcmdldC1ldmVudD1cImJhY2tDb2xvclwiPjwvZGl2PicsXG4gICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj4nLFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1wYWxldHRlLXRpdGxlXCI+JyArIGxhbmcuY29sb3IuZm9yZWdyb3VuZCArICc8L2Rpdj4nLFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb2xvci1yZXNldFwiIGRhdGEtZXZlbnQ9XCJmb3JlQ29sb3JcIiBkYXRhLXZhbHVlPVwiaW5oZXJpdFwiIHRpdGxlPVwiJyArIGxhbmcuY29sb3IucmVzZXQgKyAnXCI+JyxcbiAgICAgICAgICBsYW5nLmNvbG9yLnJlc2V0VG9EZWZhdWx0LFxuICAgICAgICAgICc8L2Rpdj4nLFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb2xvci1wYWxldHRlXCIgZGF0YS10YXJnZXQtZXZlbnQ9XCJmb3JlQ29sb3JcIj48L2Rpdj4nLFxuICAgICAgICAgICc8L2Rpdj48L2xpPidcbiAgICAgICAgXTtcblxuICAgICAgICB2YXIgbW9yZUJ1dHRvbiA9IHRwbEJ1dHRvbignJywge1xuICAgICAgICAgIHRpdGxlOiBsYW5nLmNvbG9yLm1vcmUsXG4gICAgICAgICAgZHJvcGRvd246IHRwbERyb3Bkb3duKGl0ZW1zKVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29sb3JCdXR0b24gKyBtb3JlQnV0dG9uO1xuICAgICAgfSxcbiAgICAgIGJvbGQ6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0cGxJY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnMuZm9udC5ib2xkLCB7XG4gICAgICAgICAgZXZlbnQ6ICdib2xkJyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5mb250LmJvbGRcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaXRhbGljOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmZvbnQuaXRhbGljLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpdGFsaWMnLFxuICAgICAgICAgIHRpdGxlOiBsYW5nLmZvbnQuaXRhbGljXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVuZGVybGluZTogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5mb250LnVuZGVybGluZSwge1xuICAgICAgICAgIGV2ZW50OiAndW5kZXJsaW5lJyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5mb250LnVuZGVybGluZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBzdHJpa2V0aHJvdWdoOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmZvbnQuc3RyaWtldGhyb3VnaCwge1xuICAgICAgICAgIGV2ZW50OiAnc3RyaWtldGhyb3VnaCcsXG4gICAgICAgICAgdGl0bGU6IGxhbmcuZm9udC5zdHJpa2V0aHJvdWdoXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHN1cGVyc2NyaXB0OiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmZvbnQuc3VwZXJzY3JpcHQsIHtcbiAgICAgICAgICBldmVudDogJ3N1cGVyc2NyaXB0JyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5mb250LnN1cGVyc2NyaXB0XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHN1YnNjcmlwdDogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5mb250LnN1YnNjcmlwdCwge1xuICAgICAgICAgIGV2ZW50OiAnc3Vic2NyaXB0JyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5mb250LnN1YnNjcmlwdFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjbGVhcjogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5mb250LmNsZWFyLCB7XG4gICAgICAgICAgZXZlbnQ6ICdyZW1vdmVGb3JtYXQnLFxuICAgICAgICAgIHRpdGxlOiBsYW5nLmZvbnQuY2xlYXJcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgdWw6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0cGxJY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnMubGlzdHMudW5vcmRlcmVkLCB7XG4gICAgICAgICAgZXZlbnQ6ICdpbnNlcnRVbm9yZGVyZWRMaXN0JyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5saXN0cy51bm9yZGVyZWRcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb2w6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0cGxJY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnMubGlzdHMub3JkZXJlZCwge1xuICAgICAgICAgIGV2ZW50OiAnaW5zZXJ0T3JkZXJlZExpc3QnLFxuICAgICAgICAgIHRpdGxlOiBsYW5nLmxpc3RzLm9yZGVyZWRcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcGFyYWdyYXBoOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICB2YXIgbGVmdEJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5wYXJhZ3JhcGgubGVmdCwge1xuICAgICAgICAgIHRpdGxlOiBsYW5nLnBhcmFncmFwaC5sZWZ0LFxuICAgICAgICAgIGV2ZW50OiAnanVzdGlmeUxlZnQnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgY2VudGVyQnV0dG9uID0gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLnBhcmFncmFwaC5jZW50ZXIsIHtcbiAgICAgICAgICB0aXRsZTogbGFuZy5wYXJhZ3JhcGguY2VudGVyLFxuICAgICAgICAgIGV2ZW50OiAnanVzdGlmeUNlbnRlcidcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByaWdodEJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5wYXJhZ3JhcGgucmlnaHQsIHtcbiAgICAgICAgICB0aXRsZTogbGFuZy5wYXJhZ3JhcGgucmlnaHQsXG4gICAgICAgICAgZXZlbnQ6ICdqdXN0aWZ5UmlnaHQnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIganVzdGlmeUJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5wYXJhZ3JhcGguanVzdGlmeSwge1xuICAgICAgICAgIHRpdGxlOiBsYW5nLnBhcmFncmFwaC5qdXN0aWZ5LFxuICAgICAgICAgIGV2ZW50OiAnanVzdGlmeUZ1bGwnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBvdXRkZW50QnV0dG9uID0gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLnBhcmFncmFwaC5vdXRkZW50LCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcucGFyYWdyYXBoLm91dGRlbnQsXG4gICAgICAgICAgZXZlbnQ6ICdvdXRkZW50J1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGluZGVudEJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5wYXJhZ3JhcGguaW5kZW50LCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcucGFyYWdyYXBoLmluZGVudCxcbiAgICAgICAgICBldmVudDogJ2luZGVudCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRyb3Bkb3duID0gW1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1hbGlnbiBidG4tZ3JvdXBcIj4nLFxuICAgICAgICAgIGxlZnRCdXR0b24gKyBjZW50ZXJCdXR0b24gKyByaWdodEJ1dHRvbiArIGp1c3RpZnlCdXR0b24sXG4gICAgICAgICAgJzwvZGl2PjxkaXYgY2xhc3M9XCJub3RlLWxpc3QgYnRuLWdyb3VwXCI+JyxcbiAgICAgICAgICBpbmRlbnRCdXR0b24gKyBvdXRkZW50QnV0dG9uLFxuICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5wYXJhZ3JhcGgucGFyYWdyYXBoLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcucGFyYWdyYXBoLnBhcmFncmFwaCxcbiAgICAgICAgICBkcm9wZG93bjogdHBsRHJvcGRvd24oZHJvcGRvd24sICcnLCAnZGl2JylcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaGVpZ2h0OiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICB2YXIgaXRlbXMgPSBvcHRpb25zLmxpbmVIZWlnaHRzLnJlZHVjZShmdW5jdGlvbiAobWVtbywgdikge1xuICAgICAgICAgIHJldHVybiBtZW1vICsgJzxsaT48YSBkYXRhLWV2ZW50PVwibGluZUhlaWdodFwiIGhyZWY9XCIjXCIgZGF0YS12YWx1ZT1cIicgKyBwYXJzZUZsb2F0KHYpICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnPGkgY2xhc3M9XCInICsgb3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5taXNjLmNoZWNrICsgJ1wiPjwvaT4gJyArIHYgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT48L2xpPic7XG4gICAgICAgIH0sICcnKTtcblxuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmZvbnQuaGVpZ2h0LCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuZm9udC5oZWlnaHQsXG4gICAgICAgICAgZHJvcGRvd246IHRwbERyb3Bkb3duKGl0ZW1zLCAnbm90ZS1jaGVjaycpXG4gICAgICAgIH0pO1xuXG4gICAgICB9LFxuICAgICAgaGVscDogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5vcHRpb25zLmhlbHAsIHtcbiAgICAgICAgICBldmVudDogJ3Nob3dIZWxwRGlhbG9nJyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5vcHRpb25zLmhlbHAsXG4gICAgICAgICAgaGlkZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBmdWxsc2NyZWVuOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLm9wdGlvbnMuZnVsbHNjcmVlbiwge1xuICAgICAgICAgIGV2ZW50OiAnZnVsbHNjcmVlbicsXG4gICAgICAgICAgdGl0bGU6IGxhbmcub3B0aW9ucy5mdWxsc2NyZWVuXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGNvZGV2aWV3OiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLm9wdGlvbnMuY29kZXZpZXcsIHtcbiAgICAgICAgICBldmVudDogJ2NvZGV2aWV3JyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5vcHRpb25zLmNvZGV2aWV3XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVuZG86IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0cGxJY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnMuaGlzdG9yeS51bmRvLCB7XG4gICAgICAgICAgZXZlbnQ6ICd1bmRvJyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5oaXN0b3J5LnVuZG9cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgcmVkbzogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5oaXN0b3J5LnJlZG8sIHtcbiAgICAgICAgICBldmVudDogJ3JlZG8nLFxuICAgICAgICAgIHRpdGxlOiBsYW5nLmhpc3RvcnkucmVkb1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBocjogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5oci5pbnNlcnQsIHtcbiAgICAgICAgICBldmVudDogJ2luc2VydEhvcml6b250YWxSdWxlJyxcbiAgICAgICAgICB0aXRsZTogbGFuZy5oci5pbnNlcnRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciB0cGxQb3BvdmVycyA9IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAvLyBsaW5rIHBvcG92ZXJcbiAgICAgIHZhciB0cGxMaW5rUG9wb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpbmtCdXR0b24gPSB0cGxJY29uQnV0dG9uKG9wdGlvbnMuaWNvblByZWZpeCArIG9wdGlvbnMuaWNvbnMubGluay5saW5rLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcubGluay5saW5rLFxuICAgICAgICAgIGV2ZW50OiAnc2hvd01ickxpbmtEaWFsb2cnLFxuICAgICAgICAgIGhpZGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBtYnJMaW5rQ29sb3IgPSB0cGxCdXR0b25JbmZvLm1ickxpbmtDb2xvcihsYW5nLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSAnPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIHN0eWxlPVwiZGlzcGxheTpub25lICFpbXBvcnRhbnRcIiB0YXJnZXQ9XCJfYmxhbmtcIj53d3cuZ29vZ2xlLmNvbTwvYT4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtaW5zZXJ0IGJ0bi1ncm91cFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlua0J1dHRvbiArIG1ickxpbmtDb2xvciArXG4gICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XG4gICAgICAgIHJldHVybiB0cGxQb3BvdmVyKCdub3RlLWxpbmstcG9wb3ZlcicsIGNvbnRlbnQpO1xuICAgICAgfTtcblxuICAgICAgLy8gYnV0dG9ucyBwb3BvdmVyXG4gICAgICB2YXIgdHBsQnV0dG9uUG9wb3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1ickxpbmsgPSB0cGxCdXR0b25JbmZvLm1ickxpbmsobGFuZywgb3B0aW9ucyk7XG4gICAgICAgIHZhciBtYnJGb250cyA9IHRwbEJ1dHRvbkluZm8ubWJyRm9udHMobGFuZywgb3B0aW9ucyk7XG4gICAgICAgIHZhciBtYnJMaW5rQ29sb3IgPSB0cGxCdXR0b25JbmZvLm1ickxpbmtDb2xvcihsYW5nLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIG1ickZvbnRTaXplID0gdHBsQnV0dG9uSW5mby5tYnJGb250U2l6ZShsYW5nLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgY3VzdG9tIHRvb2xiYXIgb3B0aW9uc1xuICAgICAgICB2YXIgdGIgPSBvcHRpb25zLmN1c3RvbVRvb2xiYXI7XG4gICAgICAgIGlmICh0Yikge1xuICAgICAgICAgIGlmICh0Yi5tYnJMaW5rID09PSAnb2ZmJykge1xuICAgICAgICAgICAgbWJyTGluayA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGIubWJyRm9udHMgPT09ICdvZmYnKSB7XG4gICAgICAgICAgICBtYnJGb250cyA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGIubWJyTGlua0NvbG9yID09PSAnb2ZmJykge1xuICAgICAgICAgICAgbWJyTGlua0NvbG9yID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0Yi5tYnJGb250U2l6ZSA9PT0gJ29mZicpIHtcbiAgICAgICAgICAgIG1ickZvbnRTaXplID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvbnRlbnQgPSAnPGRpdiBjbGFzcz1cIm5vdGUtaW5zZXJ0IGJ0bi1ncm91cFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgbWJyTGluayArXG4gICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1tYnJGb250cyBidG4tZ3JvdXBcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ickZvbnRzICsgbWJyRm9udFNpemUgKyBtYnJMaW5rQ29sb3IgK1xuICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICAgIHJldHVybiB0cGxQb3BvdmVyKCdub3RlLWJ1dHRvbi1wb3BvdmVyJywgY29udGVudCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBpbWFnZSBwb3BvdmVyXG4gICAgICB2YXIgdHBsSW1hZ2VQb3BvdmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnVsbEJ1dHRvbiA9IHRwbEJ1dHRvbignPHNwYW4gY2xhc3M9XCJub3RlLWZvbnRzaXplLTEwXCI+MTAwJTwvc3Bhbj4nLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuaW1hZ2UucmVzaXplRnVsbCxcbiAgICAgICAgICBldmVudDogJ3Jlc2l6ZScsXG4gICAgICAgICAgdmFsdWU6ICcxJ1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGhhbGZCdXR0b24gPSB0cGxCdXR0b24oJzxzcGFuIGNsYXNzPVwibm90ZS1mb250c2l6ZS0xMFwiPjUwJTwvc3Bhbj4nLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuaW1hZ2UucmVzaXplSGFsZixcbiAgICAgICAgICBldmVudDogJ3Jlc2l6ZScsXG4gICAgICAgICAgdmFsdWU6ICcwLjUnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgcXVhcnRlckJ1dHRvbiA9IHRwbEJ1dHRvbignPHNwYW4gY2xhc3M9XCJub3RlLWZvbnRzaXplLTEwXCI+MjUlPC9zcGFuPicsIHtcbiAgICAgICAgICB0aXRsZTogbGFuZy5pbWFnZS5yZXNpemVRdWFydGVyLFxuICAgICAgICAgIGV2ZW50OiAncmVzaXplJyxcbiAgICAgICAgICB2YWx1ZTogJzAuMjUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBsZWZ0QnV0dG9uID0gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmltYWdlLmZsb2F0TGVmdCwge1xuICAgICAgICAgIHRpdGxlOiBsYW5nLmltYWdlLmZsb2F0TGVmdCxcbiAgICAgICAgICBldmVudDogJ2Zsb2F0TWUnLFxuICAgICAgICAgIHZhbHVlOiAnbGVmdCdcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciByaWdodEJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5pbWFnZS5mbG9hdFJpZ2h0LCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuaW1hZ2UuZmxvYXRSaWdodCxcbiAgICAgICAgICBldmVudDogJ2Zsb2F0TWUnLFxuICAgICAgICAgIHZhbHVlOiAncmlnaHQnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIganVzdGlmeUJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5pbWFnZS5mbG9hdE5vbmUsIHtcbiAgICAgICAgICB0aXRsZTogbGFuZy5pbWFnZS5mbG9hdE5vbmUsXG4gICAgICAgICAgZXZlbnQ6ICdmbG9hdE1lJyxcbiAgICAgICAgICB2YWx1ZTogJ25vbmUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciByb3VuZGVkQnV0dG9uID0gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmltYWdlLnNoYXBlUm91bmRlZCwge1xuICAgICAgICAgIHRpdGxlOiBsYW5nLmltYWdlLnNoYXBlUm91bmRlZCxcbiAgICAgICAgICBldmVudDogJ2ltYWdlU2hhcGUnLFxuICAgICAgICAgIHZhbHVlOiAnaW1nLXJvdW5kZWQnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgY2lyY2xlQnV0dG9uID0gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmltYWdlLnNoYXBlQ2lyY2xlLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuaW1hZ2Uuc2hhcGVDaXJjbGUsXG4gICAgICAgICAgZXZlbnQ6ICdpbWFnZVNoYXBlJyxcbiAgICAgICAgICB2YWx1ZTogJ2ltZy1jaXJjbGUnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdGh1bWJuYWlsQnV0dG9uID0gdHBsSWNvbkJ1dHRvbihvcHRpb25zLmljb25QcmVmaXggKyBvcHRpb25zLmljb25zLmltYWdlLnNoYXBlVGh1bWJuYWlsLCB7XG4gICAgICAgICAgdGl0bGU6IGxhbmcuaW1hZ2Uuc2hhcGVUaHVtYm5haWwsXG4gICAgICAgICAgZXZlbnQ6ICdpbWFnZVNoYXBlJyxcbiAgICAgICAgICB2YWx1ZTogJ2ltZy10aHVtYm5haWwnXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgbm9uZUJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5pbWFnZS5zaGFwZU5vbmUsIHtcbiAgICAgICAgICB0aXRsZTogbGFuZy5pbWFnZS5zaGFwZU5vbmUsXG4gICAgICAgICAgZXZlbnQ6ICdpbWFnZVNoYXBlJyxcbiAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHJlbW92ZUJ1dHRvbiA9IHRwbEljb25CdXR0b24ob3B0aW9ucy5pY29uUHJlZml4ICsgb3B0aW9ucy5pY29ucy5pbWFnZS5yZW1vdmUsIHtcbiAgICAgICAgICB0aXRsZTogbGFuZy5pbWFnZS5yZW1vdmUsXG4gICAgICAgICAgZXZlbnQ6ICdyZW1vdmVNZWRpYScsXG4gICAgICAgICAgdmFsdWU6ICdub25lJ1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgY29udGVudCA9IChvcHRpb25zLmRpc2FibGVSZXNpemVJbWFnZSA/ICcnIDogJzxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj4nICsgZnVsbEJ1dHRvbiArIGhhbGZCdXR0b24gKyBxdWFydGVyQnV0dG9uICsgJzwvZGl2PicpICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPicgKyBsZWZ0QnV0dG9uICsgcmlnaHRCdXR0b24gKyBqdXN0aWZ5QnV0dG9uICsgJzwvZGl2Pjxicj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPicgKyByb3VuZGVkQnV0dG9uICsgY2lyY2xlQnV0dG9uICsgdGh1bWJuYWlsQnV0dG9uICsgbm9uZUJ1dHRvbiArICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPicgKyByZW1vdmVCdXR0b24gKyAnPC9kaXY+JztcbiAgICAgICAgcmV0dXJuIHRwbFBvcG92ZXIoJ25vdGUtaW1hZ2UtcG9wb3ZlcicsIGNvbnRlbnQpO1xuICAgICAgfTtcblxuXG4gICAgICAvLyBhaXIgcG9wb3ZlclxuICAgICAgdmFyIHRwbEFpclBvcG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkY29udGVudCA9ICQoJzxkaXYgLz4nKTtcbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMCwgbGVuID0gb3B0aW9ucy5haXJQb3BvdmVyLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHggKyspIHtcbiAgICAgICAgICB2YXIgZ3JvdXAgPSBvcHRpb25zLmFpclBvcG92ZXJbaWR4XTtcbiAgICAgICAgICAkY29udGVudC5hcHBlbmQobmV3R3JvdXAoZ3JvdXAsIGxhbmcsIG9wdGlvbnMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cGxQb3BvdmVyKCdub3RlLWFpci1wb3BvdmVyJywgJGNvbnRlbnQuY2hpbGRyZW4oKSk7XG4gICAgICB9O1xuXG5cbiAgICAgIHZhciAkbm90ZVBvcG92ZXIgPSAkKCc8ZGl2IGNsYXNzPVwibm90ZS1wb3BvdmVyXCIgLz4nKTtcblxuICAgICAgJG5vdGVQb3BvdmVyLmFwcGVuZCh0cGxMaW5rUG9wb3ZlcigpKTtcbiAgICAgICRub3RlUG9wb3Zlci5hcHBlbmQodHBsSW1hZ2VQb3BvdmVyKCkpO1xuICAgICAgJG5vdGVQb3BvdmVyLmFwcGVuZCh0cGxCdXR0b25Qb3BvdmVyKCkpO1xuXG4gICAgICBpZiAob3B0aW9ucy5haXJNb2RlKSB7XG4gICAgICAgICRub3RlUG9wb3Zlci5hcHBlbmQodHBsQWlyUG9wb3ZlcigpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICRub3RlUG9wb3ZlcjtcbiAgICB9O1xuXG5cblx0dmFyIG5ld0dyb3VwID0gZnVuY3Rpb24oZ3JvdXAsIGxhbmcsIG9wdGlvbnMpe1xuXHRcdCAgdmFyICRncm91cCA9ICQoJzxkaXYgY2xhc3M9XCJidG4tZ3JvdXBcIj4nKTtcblx0XHQgICRncm91cC5hZGRDbGFzcygnbm90ZS0nICsgZ3JvdXBbMF0pO1xuXG5cdFx0ICBmb3IgKHZhciBpID0gMCwgbGVuR3JvdXAgPSBncm91cFsxXS5sZW5ndGg7IGkgPCBsZW5Hcm91cDsgaSsrKSB7XG5cdFx0XHR2YXIgJGJ1dHRvbiA9ICQodHBsQnV0dG9uSW5mb1tncm91cFsxXVtpXV0obGFuZywgb3B0aW9ucykpO1xuXG5cdFx0XHQkYnV0dG9uLmF0dHIoJ2RhdGEtbmFtZScsIGdyb3VwWzFdW2ldKTtcblxuXHRcdFx0JGdyb3VwLmFwcGVuZCgkYnV0dG9uKTtcblx0XHQgIH1cblxuXHRcdCAgcmV0dXJuICRncm91cDtcblx0fVxuXG5cbiAgICB2YXIgdHBsSGFuZGxlcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJub3RlLWhhbmRsZVwiPicgK1xuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtc2VsZWN0aW9uXCI+JyArXG4gICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb250cm9sLXNlbGVjdGlvbi1iZ1wiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtY29udHJvbC1ob2xkZXIgbm90ZS1jb250cm9sLW53XCI+PC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb250cm9sLWhvbGRlciBub3RlLWNvbnRyb2wtbmVcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtaG9sZGVyIG5vdGUtY29udHJvbC1zd1wiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIicgK1xuICAgICAgICAgICAgICAgICAob3B0aW9ucy5kaXNhYmxlUmVzaXplSW1hZ2UgPyAnbm90ZS1jb250cm9sLWhvbGRlcicgOiAnbm90ZS1jb250cm9sLXNpemluZycpICtcbiAgICAgICAgICAgICAgICAgJyBub3RlLWNvbnRyb2wtc2VcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgKG9wdGlvbnMuZGlzYWJsZVJlc2l6ZUltYWdlID8gJycgOiAnPGRpdiBjbGFzcz1cIm5vdGUtY29udHJvbC1zZWxlY3Rpb24taW5mb1wiPjwvZGl2PicpICtcbiAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAnPC9kaXY+JztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogc2hvcnRjdXQgdGFibGUgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICAgICAqL1xuICAgIHZhciB0cGxTaG9ydGN1dCA9IGZ1bmN0aW9uICh0aXRsZSwga2V5cykge1xuICAgICAgdmFyIGtleUNsYXNzID0gJ25vdGUtc2hvcnRjdXQtY29sIGNvbC14cy02IG5vdGUtc2hvcnRjdXQtJztcbiAgICAgIHZhciBib2R5ID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgaW4ga2V5cykge1xuICAgICAgICBpZiAoa2V5cy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgIGJvZHkucHVzaChcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiJyArIGtleUNsYXNzICsgJ2tleVwiPicgKyBrZXlzW2ldLmtiZCArICc8L2Rpdj4nICtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiJyArIGtleUNsYXNzICsgJ25hbWVcIj4nICsga2V5c1tpXS50ZXh0ICsgJzwvZGl2PidcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibm90ZS1zaG9ydGN1dC1yb3cgcm93XCI+PGRpdiBjbGFzcz1cIicgKyBrZXlDbGFzcyArICd0aXRsZSBjb2wteHMtb2Zmc2V0LTZcIj4nICsgdGl0bGUgKyAnPC9kaXY+PC9kaXY+JyArXG4gICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLXNob3J0Y3V0LXJvdyByb3dcIj4nICsgYm9keS5qb2luKCc8L2Rpdj48ZGl2IGNsYXNzPVwibm90ZS1zaG9ydGN1dC1yb3cgcm93XCI+JykgKyAnPC9kaXY+JztcbiAgICB9O1xuXG4gICAgdmFyIHRwbFNob3J0Y3V0VGV4dCA9IGZ1bmN0aW9uIChsYW5nKSB7XG4gICAgICB2YXIga2V5cyA9IFtcbiAgICAgICAgeyBrYmQ6ICfijJggKyBCJywgdGV4dDogbGFuZy5mb250LmJvbGQgfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyBJJywgdGV4dDogbGFuZy5mb250Lml0YWxpYyB9LFxuICAgICAgICB7IGtiZDogJ+KMmCArIFUnLCB0ZXh0OiBsYW5nLmZvbnQudW5kZXJsaW5lIH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsgXFxcXCcsIHRleHQ6IGxhbmcuZm9udC5jbGVhciB9XG4gICAgICBdO1xuXG4gICAgICByZXR1cm4gdHBsU2hvcnRjdXQobGFuZy5zaG9ydGN1dC50ZXh0Rm9ybWF0dGluZywga2V5cyk7XG4gICAgfTtcblxuICAgIHZhciB0cGxTaG9ydGN1dEFjdGlvbiA9IGZ1bmN0aW9uIChsYW5nKSB7XG4gICAgICB2YXIga2V5cyA9IFtcbiAgICAgICAgeyBrYmQ6ICfijJggKyBaJywgdGV4dDogbGFuZy5oaXN0b3J5LnVuZG8gfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyDih6cgKyBaJywgdGV4dDogbGFuZy5oaXN0b3J5LnJlZG8gfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyBdJywgdGV4dDogbGFuZy5wYXJhZ3JhcGguaW5kZW50IH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsgWycsIHRleHQ6IGxhbmcucGFyYWdyYXBoLm91dGRlbnQgfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyBFTlRFUicsIHRleHQ6IGxhbmcuaHIuaW5zZXJ0IH1cbiAgICAgIF07XG5cbiAgICAgIHJldHVybiB0cGxTaG9ydGN1dChsYW5nLnNob3J0Y3V0LmFjdGlvbiwga2V5cyk7XG4gICAgfTtcblxuICAgIHZhciB0cGxTaG9ydGN1dFBhcmEgPSBmdW5jdGlvbiAobGFuZykge1xuICAgICAgdmFyIGtleXMgPSBbXG4gICAgICAgIHsga2JkOiAn4oyYICsg4oenICsgTCcsIHRleHQ6IGxhbmcucGFyYWdyYXBoLmxlZnQgfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyDih6cgKyBFJywgdGV4dDogbGFuZy5wYXJhZ3JhcGguY2VudGVyIH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsg4oenICsgUicsIHRleHQ6IGxhbmcucGFyYWdyYXBoLnJpZ2h0IH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsg4oenICsgSicsIHRleHQ6IGxhbmcucGFyYWdyYXBoLmp1c3RpZnkgfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyDih6cgKyBOVU03JywgdGV4dDogbGFuZy5saXN0cy5vcmRlcmVkIH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsg4oenICsgTlVNOCcsIHRleHQ6IGxhbmcubGlzdHMudW5vcmRlcmVkIH1cbiAgICAgIF07XG5cbiAgICAgIHJldHVybiB0cGxTaG9ydGN1dChsYW5nLnNob3J0Y3V0LnBhcmFncmFwaEZvcm1hdHRpbmcsIGtleXMpO1xuICAgIH07XG5cbiAgICB2YXIgdHBsU2hvcnRjdXRTdHlsZSA9IGZ1bmN0aW9uIChsYW5nKSB7XG4gICAgICB2YXIga2V5cyA9IFtcbiAgICAgICAgeyBrYmQ6ICfijJggKyBOVU0wJywgdGV4dDogbGFuZy5zdHlsZS5ub3JtYWwgfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyBOVU0xJywgdGV4dDogbGFuZy5zdHlsZS5oMSB9LFxuICAgICAgICB7IGtiZDogJ+KMmCArIE5VTTInLCB0ZXh0OiBsYW5nLnN0eWxlLmgyIH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsgTlVNMycsIHRleHQ6IGxhbmcuc3R5bGUuaDMgfSxcbiAgICAgICAgeyBrYmQ6ICfijJggKyBOVU00JywgdGV4dDogbGFuZy5zdHlsZS5oNCB9LFxuICAgICAgICB7IGtiZDogJ+KMmCArIE5VTTUnLCB0ZXh0OiBsYW5nLnN0eWxlLmg1IH0sXG4gICAgICAgIHsga2JkOiAn4oyYICsgTlVNNicsIHRleHQ6IGxhbmcuc3R5bGUuaDYgfVxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIHRwbFNob3J0Y3V0KGxhbmcuc2hvcnRjdXQuZG9jdW1lbnRTdHlsZSwga2V5cyk7XG4gICAgfTtcblxuICAgIHZhciB0cGxFeHRyYVNob3J0Y3V0cyA9IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZXh0cmFLZXlzID0gb3B0aW9ucy5leHRyYUtleXM7XG4gICAgICB2YXIga2V5cyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXh0cmFLZXlzKSB7XG4gICAgICAgIGlmIChleHRyYUtleXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGtleXMucHVzaCh7IGtiZDoga2V5LCB0ZXh0OiBleHRyYUtleXNba2V5XSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHBsU2hvcnRjdXQobGFuZy5zaG9ydGN1dC5leHRyYUtleXMsIGtleXMpO1xuICAgIH07XG5cbiAgICB2YXIgdHBsU2hvcnRjdXRUYWJsZSA9IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY29sQ2xhc3MgPSAnY2xhc3M9XCJub3RlLXNob3J0Y3V0IG5vdGUtc2hvcnRjdXQtY29sIGNvbC1zbS02IGNvbC14cy0xMlwiJztcbiAgICAgIHZhciB0ZW1wbGF0ZSA9IFtcbiAgICAgICAgJzxkaXYgJyArIGNvbENsYXNzICsgJz4nICsgdHBsU2hvcnRjdXRBY3Rpb24obGFuZywgb3B0aW9ucykgKyAnPC9kaXY+JyArXG4gICAgICAgICc8ZGl2ICcgKyBjb2xDbGFzcyArICc+JyArIHRwbFNob3J0Y3V0VGV4dChsYW5nLCBvcHRpb25zKSArICc8L2Rpdj4nLFxuICAgICAgICAnPGRpdiAnICsgY29sQ2xhc3MgKyAnPicgKyB0cGxTaG9ydGN1dFN0eWxlKGxhbmcsIG9wdGlvbnMpICsgJzwvZGl2PicgK1xuICAgICAgICAnPGRpdiAnICsgY29sQ2xhc3MgKyAnPicgKyB0cGxTaG9ydGN1dFBhcmEobGFuZywgb3B0aW9ucykgKyAnPC9kaXY+J1xuICAgICAgXTtcblxuICAgICAgaWYgKG9wdGlvbnMuZXh0cmFLZXlzKSB7XG4gICAgICAgIHRlbXBsYXRlLnB1c2goJzxkaXYgJyArIGNvbENsYXNzICsgJz4nICsgdHBsRXh0cmFTaG9ydGN1dHMobGFuZywgb3B0aW9ucykgKyAnPC9kaXY+Jyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vdGUtc2hvcnRjdXQtcm93IHJvd1wiPicgK1xuICAgICAgICAgICAgICAgdGVtcGxhdGUuam9pbignPC9kaXY+PGRpdiBjbGFzcz1cIm5vdGUtc2hvcnRjdXQtcm93IHJvd1wiPicpICtcbiAgICAgICAgICAgICAnPC9kaXY+JztcbiAgICB9O1xuXG4gICAgdmFyIHJlcGxhY2VNYWNLZXlzID0gZnVuY3Rpb24gKHNIdG1sKSB7XG4gICAgICByZXR1cm4gc0h0bWwucmVwbGFjZSgv4oyYL2csICdDdHJsJykucmVwbGFjZSgv4oenL2csICdTaGlmdCcpO1xuICAgIH07XG5cbiAgICB2YXIgdHBsRGlhbG9nSW5mbyA9IHtcbiAgICAgIGltYWdlOiBmdW5jdGlvbiAobGFuZywgb3B0aW9ucykge1xuICAgICAgICB2YXIgaW1hZ2VMaW1pdGF0aW9uID0gJyc7XG4gICAgICAgIGlmIChvcHRpb25zLm1heGltdW1JbWFnZUZpbGVTaXplKSB7XG4gICAgICAgICAgdmFyIHVuaXQgPSBNYXRoLmZsb29yKE1hdGgubG9nKG9wdGlvbnMubWF4aW11bUltYWdlRmlsZVNpemUpIC8gTWF0aC5sb2coMTAyNCkpO1xuICAgICAgICAgIHZhciByZWFkYWJsZVNpemUgPSAob3B0aW9ucy5tYXhpbXVtSW1hZ2VGaWxlU2l6ZSAvIE1hdGgucG93KDEwMjQsIHVuaXQpKS50b0ZpeGVkKDIpICogMSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgJyArICcgS01HVFAnW3VuaXRdICsgJ0InO1xuICAgICAgICAgIGltYWdlTGltaXRhdGlvbiA9ICc8c21hbGw+JyArIGxhbmcuaW1hZ2UubWF4aW11bUZpbGVTaXplICsgJyA6ICcgKyByZWFkYWJsZVNpemUgKyAnPC9zbWFsbD4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgcm93IG5vdGUtZ3JvdXAtc2VsZWN0LWZyb20tZmlsZXNcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICc8bGFiZWw+JyArIGxhbmcuaW1hZ2Uuc2VsZWN0RnJvbUZpbGVzICsgJzwvbGFiZWw+JyArXG4gICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGNsYXNzPVwibm90ZS1pbWFnZS1pbnB1dFwiIHR5cGU9XCJmaWxlXCIgbmFtZT1cImZpbGVzXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG11bHRpcGxlPVwibXVsdGlwbGVcIiAvPicgK1xuICAgICAgICAgICAgICAgICAgICAgaW1hZ2VMaW1pdGF0aW9uICtcbiAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIHJvd1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzxsYWJlbD4nICsgbGFuZy5pbWFnZS51cmwgKyAnPC9sYWJlbD4nICtcbiAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgY2xhc3M9XCJub3RlLWltYWdlLXVybCBmb3JtLWNvbnRyb2wgY29sLW1kLTEyXCIgdHlwZT1cInRleHRcIiAvPicgK1xuICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICB2YXIgZm9vdGVyID0gJzxidXR0b24gaHJlZj1cIiNcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBub3RlLWltYWdlLWJ0biBkaXNhYmxlZFwiIGRpc2FibGVkPicgKyBsYW5nLmltYWdlLmluc2VydCArICc8L2J1dHRvbj4nO1xuICAgICAgICByZXR1cm4gdHBsRGlhbG9nKCdub3RlLWltYWdlLWRpYWxvZycsIGxhbmcuaW1hZ2UuaW5zZXJ0LCBib2R5LCBmb290ZXIpO1xuICAgICAgfSxcblxuICAgICAgbGluazogZnVuY3Rpb24gKGxhbmcsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGJvZHkgPSAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgcm93XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAnPGxhYmVsPicgKyBsYW5nLmxpbmsudGV4dFRvRGlzcGxheSArICc8L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBjbGFzcz1cIm5vdGUtbGluay10ZXh0IGZvcm0tY29udHJvbCBjb2wtbWQtMTJcIiB0eXBlPVwidGV4dFwiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCByb3dcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICc8bGFiZWw+JyArIGxhbmcubGluay51cmwgKyAnPC9sYWJlbD4nICtcbiAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgY2xhc3M9XCJub3RlLWxpbmstdXJsIGZvcm0tY29udHJvbCBjb2wtbWQtMTJcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiaHR0cDovL1wiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICghb3B0aW9ucy5kaXNhYmxlTGlua1RhcmdldCA/XG4gICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNoZWNrYm94XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICc8bGFiZWw+JyArICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgbGFuZy5saW5rLm9wZW5Jbk5ld1dpbmRvdyArXG4gICAgICAgICAgICAgICAgICAgICAgICc8L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgOiAnJ1xuICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgIHZhciBmb290ZXIgPSAnPGJ1dHRvbiBocmVmPVwiI1wiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IG5vdGUtbGluay1idG4gZGlzYWJsZWRcIiBkaXNhYmxlZD4nICsgbGFuZy5saW5rLmluc2VydCArICc8L2J1dHRvbj4nO1xuICAgICAgICByZXR1cm4gdHBsRGlhbG9nKCdub3RlLWxpbmstZGlhbG9nJywgbGFuZy5saW5rLmluc2VydCwgYm9keSwgZm9vdGVyKTtcbiAgICAgIH0sXG5cbiAgICAgIGhlbHA6IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBib2R5ID0gJzxhIGNsYXNzPVwibW9kYWwtY2xvc2UgcHVsbC1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHRhYmluZGV4PVwiLTFcIj4nICsgbGFuZy5zaG9ydGN1dC5jbG9zZSArICc8L2E+JyArXG4gICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicgKyBsYW5nLnNob3J0Y3V0LnNob3J0Y3V0cyArICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAoYWdlbnQuaXNNYWMgPyB0cGxTaG9ydGN1dFRhYmxlKGxhbmcsIG9wdGlvbnMpIDogcmVwbGFjZU1hY0tleXModHBsU2hvcnRjdXRUYWJsZShsYW5nLCBvcHRpb25zKSkpICtcbiAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCIvL3N1bW1lcm5vdGUub3JnL1wiIHRhcmdldD1cIl9ibGFua1wiPlN1bW1lcm5vdGUgMC42LjE3PC9hPiDCtyAnICtcbiAgICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwiLy9naXRodWIuY29tL3N1bW1lcm5vdGUvc3VtbWVybm90ZVwiIHRhcmdldD1cIl9ibGFua1wiPlByb2plY3Q8L2E+IMK3ICcgK1xuICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCIvL2dpdGh1Yi5jb20vc3VtbWVybm90ZS9zdW1tZXJub3RlL2lzc3Vlc1wiIHRhcmdldD1cIl9ibGFua1wiPklzc3VlczwvYT4nICtcbiAgICAgICAgICAgICAgICAgICAnPC9wPic7XG4gICAgICAgIHJldHVybiB0cGxEaWFsb2coJ25vdGUtaGVscC1kaWFsb2cnLCAnJywgYm9keSwgJycpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgdHBsRGlhbG9ncyA9IGZ1bmN0aW9uIChsYW5nLCBvcHRpb25zKSB7XG4gICAgICB2YXIgZGlhbG9ncyA9ICcnO1xuXG4gICAgICAkLmVhY2godHBsRGlhbG9nSW5mbywgZnVuY3Rpb24gKGlkeCwgdHBsRGlhbG9nKSB7XG4gICAgICAgIGRpYWxvZ3MgKz0gdHBsRGlhbG9nKGxhbmcsIG9wdGlvbnMpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vdGUtZGlhbG9nXCI+JyArIGRpYWxvZ3MgKyAnPC9kaXY+JztcbiAgICB9O1xuXG4gICAgdmFyIHRwbFN0YXR1c2JhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vdGUtcmVzaXplYmFyXCI+JyArXG4gICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtaWNvbi1iYXJcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1pY29uLWJhclwiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWljb24tYmFyXCI+PC9kaXY+JyArXG4gICAgICAgICAgICAgJzwvZGl2Pic7XG4gICAgfTtcblxuICAgIHZhciByZXByZXNlbnRTaG9ydGN1dCA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIGlmIChhZ2VudC5pc01hYykge1xuICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgnQ01EJywgJ+KMmCcpLnJlcGxhY2UoJ1NISUZUJywgJ+KHpycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoJ0JBQ0tTTEFTSCcsICdcXFxcJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgnU0xBU0gnLCAnLycpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoJ0xFRlRCUkFDS0VUJywgJ1snKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdSSUdIVEJSQUNLRVQnLCAnXScpO1xuICAgIH07XG5cbiAgICAvLyBkZWNvcmF0b3IgZm9yICQuZm4udG9vbHRpcCB0byBkaXNhYmxlIGFuaW1hdGlvbnNcbiAgICB2YXIgZGlzYWJsZUFuaW1hdGlvbkZvclRvb2x0aXBzID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFkaXNhYmxlQW5pbWF0aW9uRm9yVG9vbHRpcHMuaXNFeGVjdXRlZCkge1xuICAgICAgICBkaXNhYmxlQW5pbWF0aW9uRm9yVG9vbHRpcHMuaXNFeGVjdXRlZCA9IHRydWU7XG4gICAgICAgIHZhciBmdW4gPSAkLmZuLnRvb2x0aXA7XG4gICAgICAgICQuZm4udG9vbHRpcCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmdW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgICAgJC5mbi50b29sdGlwLl9fcHJvdG9fXyA9IGZ1bjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogY3JlYXRlVG9vbHRpcFxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0ga2V5TWFwXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtzUGxhY2VtZW50XVxuICAgICAqL1xuICAgIHZhciBjcmVhdGVUb29sdGlwID0gZnVuY3Rpb24gKCRjb250YWluZXIsIGtleU1hcCwgc1BsYWNlbWVudCkge1xuICAgICAgdmFyIGludmVydGVkS2V5TWFwID0gZnVuYy5pbnZlcnRPYmplY3Qoa2V5TWFwKTtcbiAgICAgIHZhciAkYnV0dG9ucyA9ICRjb250YWluZXIuZmluZCgnYnV0dG9uJyk7XG5cbiAgICAgIGRpc2FibGVBbmltYXRpb25Gb3JUb29sdGlwcygpO1xuXG4gICAgICAkYnV0dG9ucy5lYWNoKGZ1bmN0aW9uIChpLCBlbEJ0bikge1xuICAgICAgICAvLyB1bmNvbW1lbnQgdG8gZW5hYmxlIHNob3J0Y3V0cyBpbiB0b29sdGlwc1xuICAgICAgICAvKlxuICAgICAgICB2YXIgJGJ0biA9ICQoZWxCdG4pO1xuICAgICAgICB2YXIgc1Nob3J0Y3V0ID0gaW52ZXJ0ZWRLZXlNYXBbJGJ0bi5kYXRhKCdldmVudCcpXTtcbiAgICAgICAgaWYgKHNTaG9ydGN1dCkge1xuICAgICAgICAgICRidG4uYXR0cigndGl0bGUnLCBmdW5jdGlvbiAoaSwgdikge1xuICAgICAgICAgICAgcmV0dXJuIHYgKyAnICgnICsgcmVwcmVzZW50U2hvcnRjdXQoc1Nob3J0Y3V0KSArICcpJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAqL1xuICAgICAgLy8gYm9vdHN0cmFwIHRvb2x0aXAgb24gYnRuLWdyb3VwIGJ1Z1xuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2lzc3Vlcy81Njg3XG4gICAgICB9KS50b29sdGlwKHtcbiAgICAgICAgY29udGFpbmVyOiAnYm9keScsXG4gICAgICAgIHRyaWdnZXI6ICdob3ZlcicsXG4gICAgICAgIHBsYWNlbWVudDogc1BsYWNlbWVudCB8fCAndG9wJ1xuICAgICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnRvb2x0aXAoJ2hpZGUnKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBkZXN0cm95VG9vbHRpcFxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRjb250YWluZXJcbiAgICAgKi9cbiAgICB2YXIgZGVzdHJveVRvb2x0aXAgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xuICAgICAgJGNvbnRhaW5lci5maW5kKCdbZGF0YS1vcmlnaW5hbC10aXRsZV0nKS50b29sdGlwKFxuICAgICAgICBwYXJzZUludCgkLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuVkVSU0lPTikgPiAzID8gJ2Rpc3Bvc2UnIDogJ2Rlc3Ryb3knXG4gICAgICApO1xuICAgIH07XG5cbiAgICAvLyBjcmVhdGVQYWxldHRlXG4gICAgdmFyIGNyZWF0ZVBhbGV0dGUgPSBmdW5jdGlvbiAoJGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgICAgdmFyIGNvbG9ySW5mbyA9IG9wdGlvbnMuY29sb3JzO1xuICAgICAgJGNvbnRhaW5lci5maW5kKCcubm90ZS1jb2xvci1wYWxldHRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkcGFsZXR0ZSA9ICQodGhpcyksIGV2ZW50TmFtZSA9ICRwYWxldHRlLmF0dHIoJ2RhdGEtdGFyZ2V0LWV2ZW50Jyk7XG4gICAgICAgIHZhciBwYWxldHRlQ29udGVudHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcm93ID0gMCwgbGVuUm93ID0gY29sb3JJbmZvLmxlbmd0aDsgcm93IDwgbGVuUm93OyByb3crKykge1xuICAgICAgICAgIHZhciBjb2xvcnMgPSBjb2xvckluZm9bcm93XTtcbiAgICAgICAgICB2YXIgYnV0dG9ucyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGNvbCA9IDAsIGxlbkNvbCA9IGNvbG9ycy5sZW5ndGg7IGNvbCA8IGxlbkNvbDsgY29sKyspIHtcbiAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9yc1tjb2xdO1xuICAgICAgICAgICAgYnV0dG9ucy5wdXNoKFsnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJub3RlLWNvbG9yLWJ0blwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjonLCBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICc7XCIgZGF0YS1ldmVudD1cIicsIGV2ZW50TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBkYXRhLXZhbHVlPVwiJywgY29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgdGl0bGU9XCInLCBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBkYXRhLXRvZ2dsZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiLTFcIj48L2J1dHRvbj4nXS5qb2luKCcnKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhbGV0dGVDb250ZW50cy5wdXNoKCc8ZGl2IGNsYXNzPVwibm90ZS1jb2xvci1yb3dcIj4nICsgYnV0dG9ucy5qb2luKCcnKSArICc8L2Rpdj4nKTtcbiAgICAgICAgfVxuICAgICAgICAkcGFsZXR0ZS5odG1sKHBhbGV0dGVDb250ZW50cy5qb2luKCcnKSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIHN1bW1lcm5vdGUgbGF5b3V0IChhaXIgbW9kZSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkaG9sZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICB0aGlzLmNyZWF0ZUxheW91dEJ5QWlyTW9kZSA9IGZ1bmN0aW9uICgkaG9sZGVyLCBvcHRpb25zKSB7XG4gICAgICB2YXIgbGFuZ0luZm8gPSBvcHRpb25zLmxhbmdJbmZvO1xuICAgICAgdmFyIGtleU1hcCA9IG9wdGlvbnMua2V5TWFwW2FnZW50LmlzTWFjID8gJ21hYycgOiAncGMnXTtcbiAgICAgIHZhciBpZCA9IGZ1bmMudW5pcXVlSWQoKTtcblxuICAgICAgJGhvbGRlci5hZGRDbGFzcygnbm90ZS1haXItZWRpdG9yIG5vdGUtZWRpdGFibGUnKTtcbiAgICAgICRob2xkZXIuYXR0cih7XG4gICAgICAgICdpZCc6ICdub3RlLWVkaXRvci0nICsgaWQsXG4gICAgICAgICdjb250ZW50RWRpdGFibGUnOiB0cnVlXG4gICAgICB9KTtcblxuICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICAvLyBjcmVhdGUgUG9wb3ZlclxuICAgICAgdmFyICRwb3BvdmVyID0gJCh0cGxQb3BvdmVycyhsYW5nSW5mbywgb3B0aW9ucykpO1xuICAgICAgJHBvcG92ZXIuYWRkQ2xhc3MoJ25vdGUtYWlyLWxheW91dCcpO1xuICAgICAgJHBvcG92ZXIuYXR0cignaWQnLCAnbm90ZS1wb3BvdmVyLScgKyBpZCk7XG4gICAgICAkcG9wb3Zlci5hcHBlbmRUbyhib2R5KTtcbiAgICAgIGNyZWF0ZVRvb2x0aXAoJHBvcG92ZXIsIGtleU1hcCk7XG4gICAgICBjcmVhdGVQYWxldHRlKCRwb3BvdmVyLCBvcHRpb25zKTtcblxuICAgICAgLy8gY3JlYXRlIEhhbmRsZVxuICAgICAgdmFyICRoYW5kbGUgPSAkKHRwbEhhbmRsZXMob3B0aW9ucykpO1xuICAgICAgJGhhbmRsZS5hZGRDbGFzcygnbm90ZS1haXItbGF5b3V0Jyk7XG4gICAgICAkaGFuZGxlLmF0dHIoJ2lkJywgJ25vdGUtaGFuZGxlLScgKyBpZCk7XG4gICAgICAkaGFuZGxlLmFwcGVuZFRvKGJvZHkpO1xuXG4gICAgICAvLyBjcmVhdGUgRGlhbG9nXG4gICAgICB2YXIgJGRpYWxvZyA9ICQodHBsRGlhbG9ncyhsYW5nSW5mbywgb3B0aW9ucykpO1xuICAgICAgJGRpYWxvZy5hZGRDbGFzcygnbm90ZS1haXItbGF5b3V0Jyk7XG4gICAgICAkZGlhbG9nLmF0dHIoJ2lkJywgJ25vdGUtZGlhbG9nLScgKyBpZCk7XG4gICAgICAkZGlhbG9nLmZpbmQoJ2J1dHRvbi5jbG9zZSwgYS5tb2RhbC1jbG9zZScpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgfSk7XG4gICAgICAkZGlhbG9nLmFwcGVuZFRvKGJvZHkpO1xuICAgIH07XG5cblxuXHQvKipcblx0ICogIGFkZCBBaXJQb3BvdmVyIGJ1dHRvbnNcblx0ICogIEAkaG9sZGVyICNub3RlLWVkaXRvci0uLi4gZWxlbWVudFxuXHQgKiAgQGdyb3VwIC0gYnV0dG9uIGdyb3VwIGRlc2NyaXB0aW9uIFtcImdyb3VwLW5hbWVcIixbXCJidXR0b25UeXBlXCJdXVxuXHQgKiAgQHR5cGVzIC0gb2JqZWN0IHR5cGVzID0gXCJsaW5rLGltYWdlLGJ1dHRvbixhaXJcIiwgYWxsIGJ5IGRlZmF1bHRcblx0ICogIEBpbmRleCAtIGluZGV4IGluc2VydCB0b1xuXHQgKiAgc2VlIHRoaXMuY3JlYXRlTGF5b3V0QnlBaXJNb2RlIHRvb1xuXHQgKi9cblx0dGhpcy5hZGRHcm91cCA9IGZ1bmN0aW9uKCRob2xkZXIsIGdyb3VwLCB0eXBlcywgaW5kZXgpe1xuXHRcdHR5cGVzID0gdHlwZXMgfHwgXCJsaW5rLGltYWdlLGJ1dHRvbixhaXJcIjtcblxuXHRcdC8vIGNyZWF0ZSBuZXcgYm90dG9ucyBncm91cFxuXHRcdHZhciBvcHRpb25zID0gJGhvbGRlci5kYXRhKFwib3B0aW9uc1wiKTtcblx0XHR2YXIgbGFuZ0luZm8gPSBvcHRpb25zLmxhbmdJbmZvO1xuXHRcdHZhciBncm91cCA9IG5ld0dyb3VwKGdyb3VwLCBsYW5nSW5mbywgb3B0aW9ucyk7XG5cblx0XHQvLyBjYWxjIHR5cGUtYnV0dG9uIHBhbmVscyBjbGFzc1xuXHRcdHR5cGVzID0gdHlwZXMuc3BsaXQoXCIsXCIpO1xuXHRcdHZhciBjbGFzc2VzID0gXCJcIjtcblx0XHRmb3IgKHZhciBpPTA7IGk8dHlwZXMubGVuZ3RoOyBpKyspXG5cdFx0XHRjbGFzc2VzICs9IChjbGFzc2VzP1wiLFwiOlwiXCIpICsgXCIubm90ZS1cIiArIHR5cGVzW2ldICsgXCItcG9wb3ZlclwiO1xuXG5cdFx0dmFyIGlkID0gJGhvbGRlci5hdHRyKFwiaWRcIikucmVwbGFjZShcIm5vdGUtZWRpdG9yLVwiLFwiXCIpO1xuXHRcdHZhciBwb3BvdmVyQ29udGVudCA9ICQoXCIjbm90ZS1wb3BvdmVyLVwiK2lkKVxuXHRcdFx0XHQuZmluZChjbGFzc2VzKVxuXHRcdFx0XHQuZmluZChcIi5wb3BvdmVyLWNvbnRlbnRcIik7XG5cdFx0Ly8gaW5zZXJ0IGF0IGluZGV4XG5cdFx0aWYgKGluZGV4ID09PSAwKVxuICAgICAgICAgICAgcG9wb3ZlckNvbnRlbnQucHJlcGVuZChncm91cCk7XG4gICAgICAgIGVsc2UgaWYgKGluZGV4PjApXG4gICAgICAgICAgICBwb3BvdmVyQ29udGVudC5jaGlsZHJlbigpLmVxKGluZGV4IC0gMSkuYWZ0ZXIoZ3JvdXApO1xuICAgICAgICBlbHNlXG5cdFx0XHRncm91cC5hcHBlbmRUbyhwb3BvdmVyQ29udGVudCk7XG5cdH1cblxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIHN1bW1lcm5vdGUgbGF5b3V0IChub3JtYWwgbW9kZSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkaG9sZGVyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICB0aGlzLmNyZWF0ZUxheW91dEJ5RnJhbWUgPSBmdW5jdGlvbiAoJGhvbGRlciwgb3B0aW9ucykge1xuICAgICAgdmFyIGxhbmdJbmZvID0gb3B0aW9ucy5sYW5nSW5mbztcblxuICAgICAgLy8wMS4gY3JlYXRlIEVkaXRvclxuICAgICAgdmFyICRlZGl0b3IgPSAkKCc8ZGl2IGNsYXNzPVwibm90ZS1lZGl0b3IgcGFuZWwgcGFuZWwtZGVmYXVsdFwiIC8+Jyk7XG4gICAgICBpZiAob3B0aW9ucy53aWR0aCkge1xuICAgICAgICAkZWRpdG9yLndpZHRoKG9wdGlvbnMud2lkdGgpO1xuICAgICAgfVxuXG4gICAgICAvLzAyLiBzdGF0dXNiYXIgKHJlc2l6ZWJhcilcbiAgICAgIGlmIChvcHRpb25zLmhlaWdodCA+IDApIHtcbiAgICAgICAgJCgnPGRpdiBjbGFzcz1cIm5vdGUtc3RhdHVzYmFyXCI+JyArIChvcHRpb25zLmRpc2FibGVSZXNpemVFZGl0b3IgPyAnJyA6IHRwbFN0YXR1c2JhcigpKSArICc8L2Rpdj4nKS5wcmVwZW5kVG8oJGVkaXRvcik7XG4gICAgICB9XG5cbiAgICAgIC8vMDMgZWRpdGluZyBhcmVhXG4gICAgICB2YXIgJGVkaXRpbmdBcmVhID0gJCgnPGRpdiBjbGFzcz1cIm5vdGUtZWRpdGluZy1hcmVhXCIgLz4nKTtcbiAgICAgIC8vMDMuIGNyZWF0ZSBlZGl0YWJsZVxuICAgICAgdmFyIGlzQ29udGVudEVkaXRhYmxlID0gISRob2xkZXIuaXMoJzpkaXNhYmxlZCcpO1xuICAgICAgdmFyICRlZGl0YWJsZSA9ICQoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRhYmxlIHBhbmVsLWJvZHlcIiBjb250ZW50RWRpdGFibGU9XCInICsgaXNDb250ZW50RWRpdGFibGUgKyAnXCI+PC9kaXY+JykucHJlcGVuZFRvKCRlZGl0aW5nQXJlYSk7XG4gICAgICBpZiAob3B0aW9ucy5oZWlnaHQpIHtcbiAgICAgICAgJGVkaXRhYmxlLmhlaWdodChvcHRpb25zLmhlaWdodCk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5kaXJlY3Rpb24pIHtcbiAgICAgICAgJGVkaXRhYmxlLmF0dHIoJ2RpcicsIG9wdGlvbnMuZGlyZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHZhciBwbGFjZWhvbGRlciA9ICRob2xkZXIuYXR0cigncGxhY2Vob2xkZXInKSB8fCBvcHRpb25zLnBsYWNlaG9sZGVyO1xuICAgICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICRlZGl0YWJsZS5hdHRyKCdkYXRhLXBsYWNlaG9sZGVyJywgcGxhY2Vob2xkZXIpO1xuICAgICAgfVxuXG4gICAgICAkZWRpdGFibGUuaHRtbChkb20uaHRtbCgkaG9sZGVyKSB8fCBkb20uZW1wdHlQYXJhKTtcblxuICAgICAgLy8wMzEuIGNyZWF0ZSBjb2RhYmxlXG4gICAgICAkKCc8dGV4dGFyZWEgY2xhc3M9XCJub3RlLWNvZGFibGVcIj48L3RleHRhcmVhPicpLnByZXBlbmRUbygkZWRpdGluZ0FyZWEpO1xuXG4gICAgICAvLzA0LiBjcmVhdGUgUG9wb3ZlclxuICAgICAgdmFyICRwb3BvdmVyID0gJCh0cGxQb3BvdmVycyhsYW5nSW5mbywgb3B0aW9ucykpLnByZXBlbmRUbygkZWRpdGluZ0FyZWEpO1xuICAgICAgY3JlYXRlUGFsZXR0ZSgkcG9wb3Zlciwgb3B0aW9ucyk7XG4gICAgICBjcmVhdGVUb29sdGlwKCRwb3BvdmVyLCBrZXlNYXApO1xuXG4gICAgICAvLzA1LiBoYW5kbGUoY29udHJvbCBzZWxlY3Rpb24sIC4uLilcbiAgICAgICQodHBsSGFuZGxlcyhvcHRpb25zKSkucHJlcGVuZFRvKCRlZGl0aW5nQXJlYSk7XG5cbiAgICAgICRlZGl0aW5nQXJlYS5wcmVwZW5kVG8oJGVkaXRvcik7XG5cbiAgICAgIC8vMDYuIGNyZWF0ZSBUb29sYmFyXG4gICAgICB2YXIgJHRvb2xiYXIgPSAkKCc8ZGl2IGNsYXNzPVwibm90ZS10b29sYmFyIHBhbmVsLWhlYWRpbmdcIiAvPicpO1xuICAgICAgZm9yICh2YXIgaWR4ID0gMCwgbGVuID0gb3B0aW9ucy50b29sYmFyLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHggKyspIHtcbiAgICAgICAgdmFyIGdyb3VwTmFtZSA9IG9wdGlvbnMudG9vbGJhcltpZHhdWzBdO1xuICAgICAgICB2YXIgZ3JvdXBCdXR0b25zID0gb3B0aW9ucy50b29sYmFyW2lkeF1bMV07XG5cbiAgICAgICAgdmFyICRncm91cCA9ICQoJzxkaXYgY2xhc3M9XCJub3RlLScgKyBncm91cE5hbWUgKyAnIGJ0bi1ncm91cFwiIC8+Jyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBidG5MZW5ndGggPSBncm91cEJ1dHRvbnMubGVuZ3RoOyBpIDwgYnRuTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgYnV0dG9uSW5mbyA9IHRwbEJ1dHRvbkluZm9bZ3JvdXBCdXR0b25zW2ldXTtcbiAgICAgICAgICAvLyBjb250aW51ZSBjcmVhdGluZyB0b29sYmFyIGV2ZW4gaWYgYSBidXR0b24gZG9lc24ndCBleGlzdFxuICAgICAgICAgIGlmICghJC5pc0Z1bmN0aW9uKGJ1dHRvbkluZm8pKSB7IGNvbnRpbnVlOyB9XG5cbiAgICAgICAgICB2YXIgJGJ1dHRvbiA9ICQoYnV0dG9uSW5mbyhsYW5nSW5mbywgb3B0aW9ucykpO1xuICAgICAgICAgICRidXR0b24uYXR0cignZGF0YS1uYW1lJywgZ3JvdXBCdXR0b25zW2ldKTsgIC8vIHNldCBidXR0b24ncyBhbGlhcywgYmVjdWFzZSB0byBnZXQgYnV0dG9uIGVsZW1lbnQgZnJvbSAkdG9vbGJhclxuICAgICAgICAgICRncm91cC5hcHBlbmQoJGJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgICAgJHRvb2xiYXIuYXBwZW5kKCRncm91cCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBrZXlNYXAgPSBvcHRpb25zLmtleU1hcFthZ2VudC5pc01hYyA/ICdtYWMnIDogJ3BjJ107XG4gICAgICBjcmVhdGVQYWxldHRlKCR0b29sYmFyLCBvcHRpb25zKTtcbiAgICAgIGNyZWF0ZVRvb2x0aXAoJHRvb2xiYXIsIGtleU1hcCwgJ2JvdHRvbScpO1xuICAgICAgJHRvb2xiYXIucHJlcGVuZFRvKCRlZGl0b3IpO1xuXG4gICAgICAvLzA3LiBjcmVhdGUgRHJvcHpvbmVcbiAgICAgICQoJzxkaXYgY2xhc3M9XCJub3RlLWRyb3B6b25lXCI+PGRpdiBjbGFzcz1cIm5vdGUtZHJvcHpvbmUtbWVzc2FnZVwiPjwvZGl2PjwvZGl2PicpLnByZXBlbmRUbygkZWRpdG9yKTtcblxuICAgICAgLy8wOC4gY3JlYXRlIERpYWxvZ1xuICAgICAgdmFyICRkaWFsb2dDb250YWluZXIgPSBvcHRpb25zLmRpYWxvZ3NJbkJvZHkgPyAkKGRvY3VtZW50LmJvZHkpIDogJGVkaXRvcjtcbiAgICAgIHZhciAkZGlhbG9nID0gJCh0cGxEaWFsb2dzKGxhbmdJbmZvLCBvcHRpb25zKSkucHJlcGVuZFRvKCRkaWFsb2dDb250YWluZXIpO1xuICAgICAgJGRpYWxvZy5maW5kKCdidXR0b24uY2xvc2UsIGEubW9kYWwtY2xvc2UnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLm1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLzA5LiBFZGl0b3IvSG9sZGVyIHN3aXRjaFxuICAgICAgJGVkaXRvci5pbnNlcnRBZnRlcigkaG9sZGVyKTtcbiAgICAgICRob2xkZXIuaGlkZSgpO1xuICAgIH07XG5cbiAgICB0aGlzLmhhc05vdGVFZGl0b3IgPSBmdW5jdGlvbiAoJGhvbGRlcikge1xuICAgICAgcmV0dXJuIHRoaXMubm90ZUVkaXRvckZyb21Ib2xkZXIoJGhvbGRlcikubGVuZ3RoID4gMDtcbiAgICB9O1xuXG4gICAgdGhpcy5ub3RlRWRpdG9yRnJvbUhvbGRlciA9IGZ1bmN0aW9uICgkaG9sZGVyKSB7XG4gICAgICBpZiAoJGhvbGRlci5oYXNDbGFzcygnbm90ZS1haXItZWRpdG9yJykpIHtcbiAgICAgICAgcmV0dXJuICRob2xkZXI7XG4gICAgICB9IGVsc2UgaWYgKCRob2xkZXIubmV4dCgpLmhhc0NsYXNzKCdub3RlLWVkaXRvcicpKSB7XG4gICAgICAgIHJldHVybiAkaG9sZGVyLm5leHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBzdW1tZXJub3RlIGxheW91dFxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRob2xkZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIHRoaXMuY3JlYXRlTGF5b3V0ID0gZnVuY3Rpb24gKCRob2xkZXIsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLmFpck1vZGUpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVMYXlvdXRCeUFpck1vZGUoJGhvbGRlciwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNyZWF0ZUxheW91dEJ5RnJhbWUoJGhvbGRlciwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgbGF5b3V0SW5mbyBmcm9tIGhvbGRlclxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRob2xkZXIgLSBwbGFjZWhvbGRlclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLmxheW91dEluZm9Gcm9tSG9sZGVyID0gZnVuY3Rpb24gKCRob2xkZXIpIHtcbiAgICAgIHZhciAkZWRpdG9yID0gdGhpcy5ub3RlRWRpdG9yRnJvbUhvbGRlcigkaG9sZGVyKTtcbiAgICAgIGlmICghJGVkaXRvci5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBjb25uZWN0ICRob2xkZXIgdG8gJGVkaXRvclxuICAgICAgJGVkaXRvci5kYXRhKCdob2xkZXInLCAkaG9sZGVyKTtcblxuICAgICAgcmV0dXJuIGRvbS5idWlsZExheW91dEluZm8oJGVkaXRvcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHJlbW92ZUxheW91dFxuICAgICAqXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRob2xkZXIgLSBwbGFjZWhvbGRlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKlxuICAgICAqL1xuICAgIHRoaXMucmVtb3ZlTGF5b3V0ID0gZnVuY3Rpb24gKCRob2xkZXIsIGxheW91dEluZm8sIG9wdGlvbnMpIHtcblxuICAgICAgZGVzdHJveVRvb2x0aXAobGF5b3V0SW5mby5wb3BvdmVyKCkpO1xuXG4gICAgICBpZiAob3B0aW9ucy5haXJNb2RlKSB7XG4gICAgICAgICRob2xkZXIucmVtb3ZlQ2xhc3MoJ25vdGUtYWlyLWVkaXRvciBub3RlLWVkaXRhYmxlJylcbiAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdpZCBjb250ZW50RWRpdGFibGUnKTtcblxuICAgICAgICBsYXlvdXRJbmZvLnBvcG92ZXIoKS5yZW1vdmUoKTtcbiAgICAgICAgbGF5b3V0SW5mby5oYW5kbGUoKS5yZW1vdmUoKTtcbiAgICAgICAgbGF5b3V0SW5mby5kaWFsb2coKS5yZW1vdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRob2xkZXIuaHRtbChsYXlvdXRJbmZvLmVkaXRhYmxlKCkuaHRtbCgpKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5kaWFsb2dzSW5Cb2R5KSB7XG4gICAgICAgICAgbGF5b3V0SW5mby5kaWFsb2coKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICBsYXlvdXRJbmZvLmVkaXRvcigpLnJlbW92ZSgpO1xuICAgICAgICAkaG9sZGVyLnNob3coKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obGFiZWwsIG9wdGlvbnM9KTpzdHJpbmd9IHJldHVybi5idXR0b24ge0BsaW5rICN0cGxCdXR0b24gZnVuY3Rpb24gdG8gbWFrZSB0ZXh0IGJ1dHRvbn1cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihpY29uQ2xhc3MsIG9wdGlvbnM9KTpzdHJpbmd9IHJldHVybi5pY29uQnV0dG9uIHtAbGluayAjdHBsSWNvbkJ1dHRvbiBmdW5jdGlvbiB0byBtYWtlIGljb24gYnV0dG9ufVxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKGNsYXNzTmFtZSwgdGl0bGU9LCBib2R5PSwgZm9vdGVyPSk6c3RyaW5nfSByZXR1cm4uZGlhbG9nIHtAbGluayAjdHBsRGlhbG9nIGZ1bmN0aW9uIHRvIG1ha2UgZGlhbG9nfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBidXR0b246IHRwbEJ1dHRvbixcbiAgICAgICAgaWNvbkJ1dHRvbjogdHBsSWNvbkJ1dHRvbixcbiAgICAgICAgZGlhbG9nOiB0cGxEaWFsb2dcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGFkZCBidXR0b24gaW5mb3JtYXRpb25cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIGJ1dHRvbiBuYW1lXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYnV0dG9uSW5mbyBmdW5jdGlvbiB0byBtYWtlIGJ1dHRvbiwgcmVmZXJlbmNlIHRvIHtAbGluayAjdHBsQnV0dG9ufSx7QGxpbmsgI3RwbEljb25CdXR0b259XG4gICAgICovXG4gICAgdGhpcy5hZGRCdXR0b25JbmZvID0gZnVuY3Rpb24gKG5hbWUsIGJ1dHRvbkluZm8pIHtcbiAgICAgIHRwbEJ1dHRvbkluZm9bbmFtZV0gPSBidXR0b25JbmZvO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlhbG9nSW5mbyBmdW5jdGlvbiB0byBtYWtlIGRpYWxvZywgcmVmZXJlbmNlIHRvIHtAbGluayAjdHBsRGlhbG9nfVxuICAgICAqL1xuICAgIHRoaXMuYWRkRGlhbG9nSW5mbyA9IGZ1bmN0aW9uIChuYW1lLCBkaWFsb2dJbmZvKSB7XG4gICAgICB0cGxEaWFsb2dJbmZvW25hbWVdID0gZGlhbG9nSW5mbztcbiAgICB9O1xuICB9O1xuXG5cbiAgLy8galF1ZXJ5IG5hbWVzcGFjZSBmb3Igc3VtbWVybm90ZVxuICAvKipcbiAgICogQGNsYXNzICQuc3VtbWVybm90ZVxuICAgKlxuICAgKiBzdW1tZXJub3RlIGF0dHJpYnV0ZVxuICAgKlxuICAgKiBAbWl4aW4gZGVmYXVsdHNcbiAgICogQHNpbmdsZXRvblxuICAgKlxuICAgKi9cbiAgJC5zdW1tZXJub3RlID0gJC5zdW1tZXJub3RlIHx8IHt9O1xuXG4gIC8vIGV4dGVuZHMgZGVmYXVsdCBzZXR0aW5nc1xuICAvLyAgLSAkLnN1bW1lcm5vdGUudmVyc2lvblxuICAvLyAgLSAkLnN1bW1lcm5vdGUub3B0aW9uc1xuICAvLyAgLSAkLnN1bW1lcm5vdGUubGFuZ1xuICAkLmV4dGVuZCgkLnN1bW1lcm5vdGUsIGRlZmF1bHRzKTtcblxuICB2YXIgcmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIoKTtcbiAgdmFyIGV2ZW50SGFuZGxlciA9IG5ldyBFdmVudEhhbmRsZXIoKTtcblxuICAkLmV4dGVuZCgkLnN1bW1lcm5vdGUsIHtcbiAgICAvKiogQHByb3BlcnR5IHtSZW5kZXJlcn0gKi9cbiAgICByZW5kZXJlcjogcmVuZGVyZXIsXG4gICAgLyoqIEBwcm9wZXJ0eSB7RXZlbnRIYW5kbGVyfSAqL1xuICAgIGV2ZW50SGFuZGxlcjogZXZlbnRIYW5kbGVyLFxuICAgIC8qKlxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBjb3JlXG4gICAgICogQHByb3BlcnR5IHtjb3JlLmFnZW50fSBjb3JlLmFnZW50XG4gICAgICogQHByb3BlcnR5IHtjb3JlLmRvbX0gY29yZS5kb21cbiAgICAgKiBAcHJvcGVydHkge2NvcmUucmFuZ2V9IGNvcmUucmFuZ2VcbiAgICAgKi9cbiAgICBjb3JlOiB7XG4gICAgICBhZ2VudDogYWdlbnQsXG4gICAgICBsaXN0IDogbGlzdCxcbiAgICAgIGRvbTogZG9tLFxuICAgICAgcmFuZ2U6IHJhbmdlXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH1cbiAgICAgKiBwbHVnaW5FdmVudHMgZXZlbnQgbGlzdCBmb3IgcGx1Z2luc1xuICAgICAqIGV2ZW50IGhhcyBuYW1lIGFuZCBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIGBgYFxuICAgICAqICQuc3VtbWVybm90ZS5hZGRQbHVnaW4oe1xuICAgICAqICAgICBldmVudHMgOiB7XG4gICAgICogICAgICAgICAgJ2hlbGxvJyA6IGZ1bmN0aW9uKGxheW91dEluZm8sIHZhbHVlLCAkdGFyZ2V0KSB7XG4gICAgICogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdldmVudCBuYW1lIGlzIGhlbGxvLCB2YWx1ZSBpcyAnICsgdmFsdWUgKTtcbiAgICAgKiAgICAgICAgICB9XG4gICAgICogICAgIH1cbiAgICAgKiB9KVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogKiBldmVudCBuYW1lIGlzIGRhdGEtZXZlbnQgcHJvcGVydHkuXG4gICAgICogKiBsYXlvdXRJbmZvIGlzIGEgc3VtbWVybm90ZSBsYXlvdXQgaW5mb3JtYXRpb24uXG4gICAgICogKiB2YWx1ZSBpcyBkYXRhLXZhbHVlIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHBsdWdpbkV2ZW50czoge30sXG5cbiAgICBwbHVnaW5zIDogW11cbiAgfSk7XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgYWRkUGx1Z2luXG4gICAqXG4gICAqIGFkZCBQbHVnaW4gaW4gU3VtbWVybm90ZVxuICAgKlxuICAgKiBTdW1tZXJub3RlIGNhbiBtYWtlIGEgb3duIHBsdWdpbi5cbiAgICpcbiAgICogIyMjIERlZmluZSBwbHVnaW5cbiAgICogYGBgXG4gICAqIC8vIGdldCB0ZW1wbGF0ZSBmdW5jdGlvblxuICAgKiB2YXIgdG1wbCA9ICQuc3VtbWVybm90ZS5yZW5kZXJlci5nZXRUZW1wbGF0ZSgpO1xuICAgKlxuICAgKiAvLyBhZGQgYSBidXR0b25cbiAgICogJC5zdW1tZXJub3RlLmFkZFBsdWdpbih7XG4gICAqICAgICBidXR0b25zIDoge1xuICAgKiAgICAgICAgLy8gXCJoZWxsb1wiICBpcyBidXR0b24ncyBuYW1lc3BhY2UuXG4gICAqICAgICAgICBcImhlbGxvXCIgOiBmdW5jdGlvbihsYW5nLCBvcHRpb25zKSB7XG4gICAqICAgICAgICAgICAgLy8gbWFrZSBpY29uIGJ1dHRvbiBieSB0ZW1wbGF0ZSBmdW5jdGlvblxuICAgKiAgICAgICAgICAgIHJldHVybiB0bXBsLmljb25CdXR0b24oJ2ZhIGZhLWhlYWRlcicsIHtcbiAgICogICAgICAgICAgICAgICAgLy8gY2FsbGJhY2sgZnVuY3Rpb24gbmFtZSB3aGVuIGJ1dHRvbiBjbGlja2VkXG4gICAqICAgICAgICAgICAgICAgIGV2ZW50IDogJ2hlbGxvJyxcbiAgICogICAgICAgICAgICAgICAgLy8gc2V0IGRhdGEtdmFsdWUgcHJvcGVydHlcbiAgICogICAgICAgICAgICAgICAgdmFsdWUgOiAnaGVsbG8nLFxuICAgKiAgICAgICAgICAgICAgICBoaWRlIDogdHJ1ZVxuICAgKiAgICAgICAgICAgIH0pO1xuICAgKiAgICAgICAgfVxuICAgKlxuICAgKiAgICAgfSxcbiAgICpcbiAgICogICAgIGV2ZW50cyA6IHtcbiAgICogICAgICAgIFwiaGVsbG9cIiA6IGZ1bmN0aW9uKGxheW91dEluZm8sIHZhbHVlKSB7XG4gICAqICAgICAgICAgICAgLy8gaGVyZSBpcyBldmVudCBjb2RlXG4gICAqICAgICAgICB9XG4gICAqICAgICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICogIyMjIFVzZSBhIHBsdWdpbiBpbiB0b29sYmFyXG4gICAqXG4gICAqIGBgYFxuICAgKiAgICAkKFwiI2VkaXRvclwiKS5zdW1tZXJub3RlKHtcbiAgICogICAgLi4uXG4gICAqICAgIHRvb2xiYXIgOiBbXG4gICAqICAgICAgICAvLyBkaXNwbGF5IGhlbGxvIHBsdWdpbiBpbiB0b29sYmFyXG4gICAqICAgICAgICBbJ2dyb3VwJywgWyAnaGVsbG8nIF1dXG4gICAqICAgIF1cbiAgICogICAgLi4uXG4gICAqICAgIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuICAgKiBAcGFyYW0ge09iamVjdH0gW3BsdWdpbi5idXR0b25zXSBkZWZpbmUgcGx1Z2luIGJ1dHRvbi4gZm9yIGRldGFpbCwgc2VlIHRvIFJlbmRlcmVyLmFkZEJ1dHRvbkluZm9cbiAgICogQHBhcmFtIHtPYmplY3R9IFtwbHVnaW4uZGlhbG9nc10gZGVmaW5lIHBsdWdpbiBkaWFsb2cuIGZvciBkZXRhaWwsIHNlZSB0byBSZW5kZXJlci5hZGREaWFsb2dJbmZvXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbcGx1Z2luLmV2ZW50c10gYWRkIGV2ZW50IGluICQuc3VtbWVybm90ZS5wbHVnaW5FdmVudHNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtwbHVnaW4ubGFuZ3NdIHVwZGF0ZSAkLnN1bW1lcm5vdGUubGFuZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gW3BsdWdpbi5vcHRpb25zXSB1cGRhdGUgJC5zdW1tZXJub3RlLm9wdGlvbnNcbiAgICovXG4gICQuc3VtbWVybm90ZS5hZGRQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cbiAgICAvLyBzYXZlIHBsdWdpbiBsaXN0XG4gICAgJC5zdW1tZXJub3RlLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuXG4gICAgaWYgKHBsdWdpbi5idXR0b25zKSB7XG4gICAgICAkLmVhY2gocGx1Z2luLmJ1dHRvbnMsIGZ1bmN0aW9uIChuYW1lLCBidXR0b24pIHtcbiAgICAgICAgcmVuZGVyZXIuYWRkQnV0dG9uSW5mbyhuYW1lLCBidXR0b24pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHBsdWdpbi5kaWFsb2dzKSB7XG4gICAgICAkLmVhY2gocGx1Z2luLmRpYWxvZ3MsIGZ1bmN0aW9uIChuYW1lLCBkaWFsb2cpIHtcbiAgICAgICAgcmVuZGVyZXIuYWRkRGlhbG9nSW5mbyhuYW1lLCBkaWFsb2cpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHBsdWdpbi5ldmVudHMpIHtcbiAgICAgICQuZWFjaChwbHVnaW4uZXZlbnRzLCBmdW5jdGlvbiAobmFtZSwgZXZlbnQpIHtcbiAgICAgICAgJC5zdW1tZXJub3RlLnBsdWdpbkV2ZW50c1tuYW1lXSA9IGV2ZW50O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHBsdWdpbi5sYW5ncykge1xuICAgICAgJC5lYWNoKHBsdWdpbi5sYW5ncywgZnVuY3Rpb24gKGxvY2FsZSwgbGFuZykge1xuICAgICAgICBpZiAoJC5zdW1tZXJub3RlLmxhbmdbbG9jYWxlXSkge1xuICAgICAgICAgICQuZXh0ZW5kKCQuc3VtbWVybm90ZS5sYW5nW2xvY2FsZV0sIGxhbmcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocGx1Z2luLm9wdGlvbnMpIHtcbiAgICAgICQuZXh0ZW5kKCQuc3VtbWVybm90ZS5vcHRpb25zLCBwbHVnaW4ub3B0aW9ucyk7XG4gICAgfVxuICB9O1xuXG4gIC8qXG4gICAqIEFkYXB0YXRpb24gb2YgY29sb3IgZm9yIGJhY2tncm91bmRcbiAgICovXG4gICQuc3VtbWVybm90ZS5hZGFwdENvbG9yRm9yQmcgPSBmdW5jdGlvbihjb2xvcikge1xuICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IpLnRvSGV4KCkgPT0gJ2ZmZmZmZicgPyAnI2VmZWZlZicgOiBjb2xvcjtcbiAgfTtcblxuICAvKlxuICAgKiBleHRlbmQgJC5mblxuICAgKi9cbiAgJC5mbi5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEBtZXRob2RcbiAgICAgKiBJbml0aWFsaXplIHN1bW1lcm5vdGVcbiAgICAgKiAgLSBjcmVhdGUgZWRpdG9yIGxheW91dCBhbmQgYXR0YWNoIE1vdXNlIGFuZCBrZXlib2FyZCBldmVudHMuXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAkKFwiI3N1bW1lcm5vdGVcIikuc3VtbWVybm90ZSggeyBvcHRpb25zIC4ufSApO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQG1lbWJlciAkLmZuXG4gICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBvcHRpb25zIHJlZmVyZW5jZSB0byAkLnN1bW1lcm5vdGUub3B0aW9uc1xuICAgICAqIEByZXR1cm4ge3RoaXN9XG4gICAgICovXG4gICAgc3VtbWVybm90ZTogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gY2hlY2sgZmlyc3QgYXJndW1lbnQncyB0eXBlXG4gICAgICAvLyAgLSB7U3RyaW5nfTogRXh0ZXJuYWwgQVBJIGNhbGwge3ttb2R1bGV9fS57e21ldGhvZH19XG4gICAgICAvLyAgLSB7T2JqZWN0fTogaW5pdCBvcHRpb25zXG4gICAgICB2YXIgdHlwZSA9ICQudHlwZShsaXN0LmhlYWQoYXJndW1lbnRzKSk7XG4gICAgICB2YXIgaXNFeHRlcm5hbEFQSUNhbGxlZCA9IHR5cGUgPT09ICdzdHJpbmcnO1xuICAgICAgdmFyIGhhc0luaXRPcHRpb25zID0gdHlwZSA9PT0gJ29iamVjdCc7XG5cbiAgICAgIC8vIGV4dGVuZCBkZWZhdWx0IG9wdGlvbnMgd2l0aCBjdXN0b20gdXNlciBvcHRpb25zXG4gICAgICB2YXIgb3B0aW9ucyA9IGhhc0luaXRPcHRpb25zID8gbGlzdC5oZWFkKGFyZ3VtZW50cykgOiB7fTtcblxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLnN1bW1lcm5vdGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zLmljb25zID0gJC5leHRlbmQoe30sICQuc3VtbWVybm90ZS5vcHRpb25zLmljb25zLCBvcHRpb25zLmljb25zKTtcblxuICAgICAgLy8gSW5jbHVkZSBsYW5nSW5mbyBpbiBvcHRpb25zIGZvciBsYXRlciB1c2UsIGUuZy4gZm9yIGltYWdlIGRyYWctbi1kcm9wXG4gICAgICAvLyBTZXR1cCBsYW5ndWFnZSBpbmZvIHdpdGggZW4tVVMgYXMgZGVmYXVsdFxuICAgICAgb3B0aW9ucy5sYW5nSW5mbyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLnN1bW1lcm5vdGUubGFuZ1snZW4tVVMnXSwgJC5zdW1tZXJub3RlLmxhbmdbb3B0aW9ucy5sYW5nXSk7XG5cbiAgICAgIC8vIG92ZXJyaWRlIHBsdWdpbiBvcHRpb25zXG4gICAgICBpZiAoIWlzRXh0ZXJuYWxBUElDYWxsZWQgJiYgaGFzSW5pdE9wdGlvbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9ICQuc3VtbWVybm90ZS5wbHVnaW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBsdWdpbiA9ICQuc3VtbWVybm90ZS5wbHVnaW5zW2ldO1xuXG4gICAgICAgICAgaWYgKG9wdGlvbnMucGx1Z2luW3BsdWdpbi5uYW1lXSkge1xuICAgICAgICAgICAgJC5zdW1tZXJub3RlLnBsdWdpbnNbaV0gPSAkLmV4dGVuZCh0cnVlLCBwbHVnaW4sIG9wdGlvbnMucGx1Z2luW3BsdWdpbi5uYW1lXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaWR4LCBob2xkZXIpIHtcbiAgICAgICAgdmFyICRob2xkZXIgPSAkKGhvbGRlcik7XG4gICAgICAgIHZhciBjdXJyZW50T3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcblxuICAgICAgICAvLyBhZGQgb3IgcmVtb3ZlIGN1c3RvbSBidXR0b25zIHRvIHRvb2xiYXJcbiAgICAgICAgdmFyIGN1c3RvbVRvb2xiYXIgPSAkaG9sZGVyLmF0dHIoJ2RhdGEtdG9vbGJhcicpO1xuICAgICAgICBpZiAoY3VzdG9tVG9vbGJhcikge1xuICAgICAgICAgIGlmICghY3VycmVudE9wdGlvbnMuY3VzdG9tVG9vbGJhcikge1xuICAgICAgICAgICAgY3VycmVudE9wdGlvbnMuY3VzdG9tVG9vbGJhciA9IHt9O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHBhcnNlIHN0cmluZ1xuICAgICAgICAgIC8vIGV4YW1wbGU6XG4gICAgICAgICAgLy8gICAgaW4gOiBcIi1tYnJCdG5BZGQsbWJyQnRuUmVtb3ZlLC1tYnJCdG5Db2xvclwiXG4gICAgICAgICAgLy8gICAgb3V0OiB7bWJyQnRuQWRkOiAnb2ZmJywgbWJyQnRuUmVtb3ZlOiAnb24nLCBtYnJCdG5Db2xvcjogJ29mZid9XG4gICAgICAgICAgdmFyIGN1c3RvbUJ0bnMgPSBjdXN0b21Ub29sYmFyLnNwbGl0KC8sXFxzfCwvZyk7XG4gICAgICAgICAgZm9yICh2YXIgayBpbiBjdXN0b21CdG5zKSB7XG4gICAgICAgICAgICBpZiAoL14tL2cudGVzdChjdXN0b21CdG5zW2tdKSkge1xuICAgICAgICAgICAgICBjdXJyZW50T3B0aW9ucy5jdXN0b21Ub29sYmFyW2N1c3RvbUJ0bnNba10ucmVwbGFjZSgvXi0vZywgJycpXSA9ICdvZmYnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY3VycmVudE9wdGlvbnMuY3VzdG9tVG9vbGJhcltjdXN0b21CdG5zW2tdXSA9ICdvbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmVtb3ZlIGJ1dHRvbnMgZnJvbSBhaXIgcG9wb3ZlclxuICAgICAgICAgIC8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbiAgICAgICAgICBmb3IgKHZhciB4IGluIGN1cnJlbnRPcHRpb25zLmFpclBvcG92ZXIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgaW4gY3VycmVudE9wdGlvbnMuYWlyUG9wb3Zlclt4XSkge1xuICAgICAgICAgICAgICBpZiAoeSA+IDEpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB2YXIgbGlzdEJ0bnMgPSBjdXJyZW50T3B0aW9ucy5haXJQb3BvdmVyW3hdW3ldO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RCdG5zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIC8vIGVhY2ggYnV0dG9uIGNoZWNrIGFuZCByZW1vdmUgaWYgbmVlZFxuICAgICAgICAgICAgICAgIGZvciAodmFyIHogaW4gbGlzdEJ0bnMpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbGlzdEJ0bnNbel07XG4gICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE9wdGlvbnMuY3VzdG9tVG9vbGJhcltuYW1lXSA9PT0gJ29mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbnMuYWlyUG9wb3Zlclt4XVt5XS5zcGxpY2UoeiwgMSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZW1wdHkgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAoIWxpc3RCdG5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgY3VycmVudE9wdGlvbnMuYWlyUG9wb3Zlclt4XS5zcGxpY2UoeSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudE9wdGlvbnMuYWlyUG9wb3Zlclt4XS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgY3VycmVudE9wdGlvbnMuYWlyUG9wb3Zlci5zcGxpY2UoeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiBsYXlvdXQgaXNuJ3QgY3JlYXRlZCB5ZXQsIGNyZWF0ZUxheW91dCBhbmQgYXR0YWNoIGV2ZW50c1xuICAgICAgICBpZiAoIXJlbmRlcmVyLmhhc05vdGVFZGl0b3IoJGhvbGRlcikpIHtcbiAgICAgICAgICByZW5kZXJlci5jcmVhdGVMYXlvdXQoJGhvbGRlciwgY3VycmVudE9wdGlvbnMpO1xuXG4gICAgICAgICAgdmFyIGxheW91dEluZm8gPSByZW5kZXJlci5sYXlvdXRJbmZvRnJvbUhvbGRlcigkaG9sZGVyKTtcbiAgICAgICAgICAkaG9sZGVyLmRhdGEoJ2xheW91dEluZm8nLCBsYXlvdXRJbmZvKTtcblxuICAgICAgICAgIGV2ZW50SGFuZGxlci5hdHRhY2gobGF5b3V0SW5mbywgY3VycmVudE9wdGlvbnMpO1xuICAgICAgICAgIGV2ZW50SGFuZGxlci5hdHRhY2hDdXN0b21FdmVudChsYXlvdXRJbmZvLCBjdXJyZW50T3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB2YXIgJGZpcnN0ID0gdGhpcy5maXJzdCgpO1xuICAgICAgaWYgKCRmaXJzdC5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGxheW91dEluZm8gPSByZW5kZXJlci5sYXlvdXRJbmZvRnJvbUhvbGRlcigkZmlyc3QpO1xuXG4gICAgICAgIC8vIGV4dGVybmFsIEFQSVxuICAgICAgICBpZiAoaXNFeHRlcm5hbEFQSUNhbGxlZCkge1xuICAgICAgICAgIHZhciBtb2R1bGVBbmRNZXRob2QgPSBsaXN0LmhlYWQobGlzdC5mcm9tKGFyZ3VtZW50cykpO1xuICAgICAgICAgIHZhciBhcmdzID0gbGlzdC50YWlsKGxpc3QuZnJvbShhcmd1bWVudHMpKTtcblxuICAgICAgICAgIC8vIFRPRE8gbm93IGV4dGVybmFsIEFQSSBvbmx5IHdvcmtzIGZvciBlZGl0b3JcbiAgICAgICAgICB2YXIgcGFyYW1zID0gW21vZHVsZUFuZE1ldGhvZCwgbGF5b3V0SW5mby5lZGl0YWJsZSgpXS5jb25jYXQoYXJncyk7XG4gICAgICAgICAgcmV0dXJuIGV2ZW50SGFuZGxlci5pbnZva2UuYXBwbHkoZXZlbnRIYW5kbGVyLCBwYXJhbXMpO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZm9jdXMpIHtcbiAgICAgICAgICAvLyBmb2N1cyBvbiBmaXJzdCBlZGl0YWJsZSBlbGVtZW50IGZvciBpbml0aWFsaXplIGVkaXRvclxuICAgICAgICAgIGxheW91dEluZm8uZWRpdGFibGUoKS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kXG4gICAgICpcbiAgICAgKiBnZXQgdGhlIEhUTUwgY29udGVudHMgb2Ygbm90ZSBvciBzZXQgdGhlIEhUTUwgY29udGVudHMgb2Ygbm90ZS5cbiAgICAgKlxuICAgICAqICogZ2V0IGNvbnRlbnRzXG4gICAgICogYGBgXG4gICAgICogdmFyIGNvbnRlbnQgPSAkKFwiI3N1bW1lcm5vdGVcIikuY29kZSgpO1xuICAgICAqIGBgYFxuICAgICAqICogc2V0IGNvbnRlbnRzXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAkKFwiI3N1bW1lcm5vdGVcIikuY29kZShodG1sKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBtZW1iZXIgJC5mblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbaHRtbF0gLSBIVE1MIGNvbnRlbnRzKG9wdGlvbmFsLCBzZXQpXG4gICAgICogQHJldHVybiB7dGhpc3xTdHJpbmd9IC0gY29udGV4dChzZXQpIG9yIEhUTUwgY29udGVudHMgb2Ygbm90ZShnZXQpLlxuICAgICAqL1xuICAgIGNvZGU6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAvLyBnZXQgdGhlIEhUTUwgY29udGVudHMgb2Ygbm90ZVxuICAgICAgaWYgKGh0bWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgJGhvbGRlciA9IHRoaXMuZmlyc3QoKTtcbiAgICAgICAgaWYgKCEkaG9sZGVyLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsYXlvdXRJbmZvID0gcmVuZGVyZXIubGF5b3V0SW5mb0Zyb21Ib2xkZXIoJGhvbGRlcik7XG4gICAgICAgIHZhciAkZWRpdGFibGUgPSBsYXlvdXRJbmZvICYmIGxheW91dEluZm8uZWRpdGFibGUoKTtcblxuICAgICAgICBpZiAoJGVkaXRhYmxlICYmICRlZGl0YWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgaXNDb2RldmlldyA9IGV2ZW50SGFuZGxlci5pbnZva2UoJ2NvZGV2aWV3LmlzQWN0aXZhdGVkJywgbGF5b3V0SW5mbyk7XG4gICAgICAgICAgZXZlbnRIYW5kbGVyLmludm9rZSgnY29kZXZpZXcuc3luYycsIGxheW91dEluZm8pO1xuICAgICAgICAgIHJldHVybiBpc0NvZGV2aWV3ID8gbGF5b3V0SW5mby5jb2RhYmxlKCkudmFsKCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0SW5mby5lZGl0YWJsZSgpLmh0bWwoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tLnZhbHVlKCRob2xkZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBzZXQgdGhlIEhUTUwgY29udGVudHMgb2Ygbm90ZVxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChpLCBob2xkZXIpIHtcbiAgICAgICAgdmFyIGxheW91dEluZm8gPSByZW5kZXJlci5sYXlvdXRJbmZvRnJvbUhvbGRlcigkKGhvbGRlcikpO1xuICAgICAgICB2YXIgJGVkaXRhYmxlID0gbGF5b3V0SW5mbyAmJiBsYXlvdXRJbmZvLmVkaXRhYmxlKCk7XG4gICAgICAgIGlmICgkZWRpdGFibGUpIHtcbiAgICAgICAgICAkZWRpdGFibGUuaHRtbChodG1sKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kXG4gICAgICpcbiAgICAgKiBkZXN0cm95IEVkaXRvciBMYXlvdXQgYW5kIGRldGFjaCBLZXkgYW5kIE1vdXNlIEV2ZW50XG4gICAgICpcbiAgICAgKiBAbWVtYmVyICQuZm5cbiAgICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgICAqL1xuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaWR4LCBob2xkZXIpIHtcbiAgICAgICAgdmFyICRob2xkZXIgPSAkKGhvbGRlcik7XG5cbiAgICAgICAgaWYgKCFyZW5kZXJlci5oYXNOb3RlRWRpdG9yKCRob2xkZXIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZm8gPSByZW5kZXJlci5sYXlvdXRJbmZvRnJvbUhvbGRlcigkaG9sZGVyKTtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBpbmZvLmVkaXRvcigpLmRhdGEoJ29wdGlvbnMnKTtcblxuICAgICAgICBldmVudEhhbmRsZXIuZGV0YWNoKGluZm8sIG9wdGlvbnMpO1xuICAgICAgICByZW5kZXJlci5yZW1vdmVMYXlvdXQoJGhvbGRlciwgaW5mbywgb3B0aW9ucyk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gIH0pO1xuXG5cbn0pKTtcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./web/app/builder/summernote/summernote.js\n")},"./web/assets/bootbox/bootbox.min.js":
/*!*******************************************!*\
  !*** ./web/assets/bootbox/bootbox.min.js ***!
  \*******************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * bootbox.js v4.4.0\n *\n * http://bootboxjs.com/license.txt\n */\n!function(a,b){"use strict"; true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "jquery")], __WEBPACK_AMD_DEFINE_FACTORY__ = (b),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(this,function a(b,c){"use strict";function d(a){var b=q[o.locale];return b?b[a]:q.en[a]}function e(a,c,d){a.stopPropagation(),a.preventDefault();var e=b.isFunction(d)&&d.call(c,a)===!1;e||c.modal("hide")}function f(a){var b,c=0;for(b in a)c++;return c}function g(a,c){var d=0;b.each(a,function(a,b){c(a,b,d++)})}function h(a){var c,d;if("object"!=typeof a)throw new Error("Please supply an object of options");if(!a.message)throw new Error("Please specify a message");return a=b.extend({},o,a),a.buttons||(a.buttons={}),c=a.buttons,d=f(c),g(c,function(a,e,f){if(b.isFunction(e)&&(e=c[a]={callback:e}),"object"!==b.type(e))throw new Error("button with key "+a+" must be an object");e.label||(e.label=a),e.className||(e.className=2>=d&&f===d-1?"btn-primary":"btn-default")}),a}function i(a,b){var c=a.length,d={};if(1>c||c>2)throw new Error("Invalid argument length");return 2===c||"string"==typeof a[0]?(d[b[0]]=a[0],d[b[1]]=a[1]):d=a[0],d}function j(a,c,d){return b.extend(!0,{},a,i(c,d))}function k(a,b,c,d){var e={className:"bootbox-"+a,buttons:l.apply(null,b)};return m(j(e,d,c),b)}function l(){for(var a={},b=0,c=arguments.length;c>b;b++){var e=arguments[b],f=e.toLowerCase(),g=e.toUpperCase();a[f]={label:d(g)}}return a}function m(a,b){var d={};return g(b,function(a,b){d[b]=!0}),g(a.buttons,function(a){if(d[a]===c)throw new Error("button key "+a+" is not allowed (options are "+b.join("\\n")+")")}),a}var n={dialog:"<div class=\'bootbox modal\' tabindex=\'-1\' role=\'dialog\'><div class=\'modal-dialog\'><div class=\'modal-content\'><div class=\'modal-body\'><div class=\'bootbox-body\'></div></div></div></div></div>",header:"<div class=\'modal-header\'><h4 class=\'modal-title\'></h4></div>",footer:"<div class=\'modal-footer\'></div>",closeButton:"<button type=\'button\' class=\'bootbox-close-button close\' data-dismiss=\'modal\' aria-hidden=\'true\'>&times;</button>",form:"<form class=\'bootbox-form\'></form>",inputs:{text:"<input class=\'bootbox-input bootbox-input-text form-control\' autocomplete=off type=text />",textarea:"<textarea class=\'bootbox-input bootbox-input-textarea form-control\'></textarea>",email:"<input class=\'bootbox-input bootbox-input-email form-control\' autocomplete=\'off\' type=\'email\' />",select:"<select class=\'bootbox-input bootbox-input-select form-control\'></select>",checkbox:"<div class=\'checkbox\'><label><input class=\'bootbox-input bootbox-input-checkbox\' type=\'checkbox\' /></label></div>",date:"<input class=\'bootbox-input bootbox-input-date form-control\' autocomplete=off type=\'date\' />",time:"<input class=\'bootbox-input bootbox-input-time form-control\' autocomplete=off type=\'time\' />",number:"<input class=\'bootbox-input bootbox-input-number form-control\' autocomplete=off type=\'number\' />",password:"<input class=\'bootbox-input bootbox-input-password form-control\' autocomplete=\'off\' type=\'password\' />"}},o={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},p={};p.alert=function(){var a;if(a=k("alert",["ok"],["message","callback"],arguments),a.callback&&!b.isFunction(a.callback))throw new Error("alert requires callback property to be a function when provided");return a.buttons.ok.callback=a.onEscape=function(){return b.isFunction(a.callback)?a.callback.call(this):!0},p.dialog(a)},p.confirm=function(){var a;if(a=k("confirm",["cancel","confirm"],["message","callback"],arguments),a.buttons.cancel.callback=a.onEscape=function(){return a.callback.call(this,!1)},a.buttons.confirm.callback=function(){return a.callback.call(this,!0)},!b.isFunction(a.callback))throw new Error("confirm requires a callback");return p.dialog(a)},p.prompt=function(){var a,d,e,f,h,i,k;if(f=b(n.form),d={className:"bootbox-prompt",buttons:l("cancel","confirm"),value:"",inputType:"text"},a=m(j(d,arguments,["title","callback"]),["cancel","confirm"]),i=a.show===c?!0:a.show,a.message=f,a.buttons.cancel.callback=a.onEscape=function(){return a.callback.call(this,null)},a.buttons.confirm.callback=function(){var c;switch(a.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":c=h.val();break;case"checkbox":var d=h.find("input:checked");c=[],g(d,function(a,d){c.push(b(d).val())})}return a.callback.call(this,c)},a.show=!1,!a.title)throw new Error("prompt requires a title");if(!b.isFunction(a.callback))throw new Error("prompt requires a callback");if(!n.inputs[a.inputType])throw new Error("invalid prompt type");switch(h=b(n.inputs[a.inputType]),a.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":h.val(a.value);break;case"select":var o={};if(k=a.inputOptions||[],!b.isArray(k))throw new Error("Please pass an array of input options");if(!k.length)throw new Error("prompt with select requires options");g(k,function(a,d){var e=h;if(d.value===c||d.text===c)throw new Error("given options in wrong format");d.group&&(o[d.group]||(o[d.group]=b("<optgroup/>").attr("label",d.group)),e=o[d.group]),e.append("<option value=\'"+d.value+"\'>"+d.text+"</option>")}),g(o,function(a,b){h.append(b)}),h.val(a.value);break;case"checkbox":var q=b.isArray(a.value)?a.value:[a.value];if(k=a.inputOptions||[],!k.length)throw new Error("prompt with checkbox requires options");if(!k[0].value||!k[0].text)throw new Error("given options in wrong format");h=b("<div/>"),g(k,function(c,d){var e=b(n.inputs[a.inputType]);e.find("input").attr("value",d.value),e.find("label").append(d.text),g(q,function(a,b){b===d.value&&e.find("input").prop("checked",!0)}),h.append(e)})}return a.placeholder&&h.attr("placeholder",a.placeholder),a.pattern&&h.attr("pattern",a.pattern),a.maxlength&&h.attr("maxlength",a.maxlength),f.append(h),f.on("submit",function(a){a.preventDefault(),a.stopPropagation(),e.find(".btn-primary").click()}),e=p.dialog(a),e.off("shown.bs.modal"),e.on("shown.bs.modal",function(){h.focus()}),i===!0&&e.modal("show"),e},p.dialog=function(a){a=h(a);var d=b(n.dialog),f=d.find(".modal-dialog"),i=d.find(".modal-body"),j=a.buttons,k="",l={onEscape:a.onEscape};if(b.fn.modal===c)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(g(j,function(a,b){k+="<button data-bb-handler=\'"+a+"\' type=\'button\' class=\'btn "+b.className+"\'>"+b.label+"</button>",l[a]=b.callback}),i.find(".bootbox-body").html(a.message),a.animate===!0&&d.addClass("fade"),a.className&&d.addClass(a.className),"large"===a.size?f.addClass("modal-lg"):"small"===a.size&&f.addClass("modal-sm"),a.title&&i.before(n.header),a.closeButton){var m=b(n.closeButton);a.title?d.find(".modal-header").prepend(m):m.css("margin-top","-10px").prependTo(i)}return a.title&&d.find(".modal-title").html(a.title),k.length&&(i.after(n.footer),d.find(".modal-footer").html(k)),d.on("hidden.bs.modal",function(a){a.target===this&&d.remove()}),d.on("shown.bs.modal",function(){d.find(".btn-primary:first").focus()}),"static"!==a.backdrop&&d.on("click.dismiss.bs.modal",function(a){d.children(".modal-backdrop").length&&(a.currentTarget=d.children(".modal-backdrop").get(0)),a.target===a.currentTarget&&d.trigger("escape.close.bb")}),d.on("escape.close.bb",function(a){l.onEscape&&e(a,d,l.onEscape)}),d.on("click",".modal-footer button",function(a){var c=b(this).data("bb-handler");e(a,d,l[c])}),d.on("click",".bootbox-close-button",function(a){e(a,d,l.onEscape)}),d.on("keyup",function(a){27===a.which&&d.trigger("escape.close.bb")}),b(a.container).append(d),d.modal({backdrop:a.backdrop?"static":!1,keyboard:!1,show:!1}),a.show&&d.modal("show"),d},p.setDefaults=function(){var a={};2===arguments.length?a[arguments[0]]=arguments[1]:a=arguments[0],b.extend(o,a)},p.hideAll=function(){return b(".bootbox").modal("hide"),p};var q={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D\'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return p.addLocale=function(a,c){return b.each(["OK","CANCEL","CONFIRM"],function(a,b){if(!c[b])throw new Error("Please supply a translation for \'"+b+"\'")}),q[a]={OK:c.OK,CANCEL:c.CANCEL,CONFIRM:c.CONFIRM},p},p.removeLocale=function(a){return delete q[a],p},p.setLocale=function(a){return p.setDefaults("locale",a)},p.init=function(c){return a(c||b)},p});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXNzZXRzL2Jvb3Rib3gvYm9vdGJveC5taW4uanM/Nzg4ZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhLEtBQXFDLENBQUMsaUNBQU8sQ0FBQywyQ0FBUSxDQUFDLG9DQUFDLENBQUM7QUFBQTtBQUFBO0FBQUEsb0dBQUMsQ0FBQyxTQUFrRixDQUFDLHNCQUFzQixhQUFhLGNBQWMsa0JBQWtCLHNCQUFzQixrQkFBa0IsdUNBQXVDLHdDQUF3QyxtQkFBbUIsY0FBYyxVQUFVLGVBQWUsU0FBUyxnQkFBZ0IsUUFBUSx1QkFBdUIsV0FBVyxFQUFFLGNBQWMsUUFBUSw0RUFBNEUsMERBQTBELG9CQUFvQiw4QkFBOEIseUNBQXlDLDZCQUE2QixXQUFXLGtGQUFrRiwwRkFBMEYsSUFBSSxnQkFBZ0Isb0JBQW9CLHVEQUF1RCx5RUFBeUUsa0JBQWtCLHFCQUFxQixXQUFXLG9CQUFvQixPQUFPLGdEQUFnRCxxQkFBcUIsYUFBYSxZQUFZLHdCQUF3QixJQUFJLEtBQUssdURBQXVELE1BQU0sWUFBWSxTQUFTLGdCQUFnQixTQUFTLHlCQUF5QixRQUFRLDBCQUEwQiw4RkFBOEYsSUFBSSxPQUFPLDRhQUE0YSw2REFBNkQsMjVCQUEyNUIsSUFBSSxnR0FBZ0csTUFBTSxtQkFBbUIsTUFBTSxpTEFBaUwsbURBQW1ELHlEQUF5RCxhQUFhLHNCQUFzQixNQUFNLHdIQUF3SCxnQ0FBZ0MsdUNBQXVDLGdDQUFnQywwRUFBMEUsbUJBQW1CLHFCQUFxQixrQkFBa0Isa0JBQWtCLG1GQUFtRixrSkFBa0osa0NBQWtDLHVDQUF1QyxNQUFNLG9CQUFvQiwrR0FBK0csTUFBTSw2Q0FBNkMsdUJBQXVCLG1CQUFtQixFQUFFLCtCQUErQiwrREFBK0QsMkVBQTJFLGlFQUFpRSwrQ0FBK0MsdUdBQXVHLE1BQU0sc0JBQXNCLCtGQUErRixvRUFBb0Usa0JBQWtCLFFBQVEsNEVBQTRFLG9KQUFvSixvQkFBb0IsWUFBWSxpQkFBaUIsTUFBTSwwREFBMEQsMkZBQTJGLDRFQUE0RSxnQ0FBZ0MsK0JBQStCLHVGQUF1RixnREFBZ0QsY0FBYyxFQUFFLG9MQUFvTCxzRUFBc0UseUVBQXlFLFVBQVUsNEJBQTRCLHNCQUFzQixPQUFPLHdGQUF3RixxQkFBcUIsNkRBQTZELHFJQUFxSSxxQkFBcUIsb0hBQW9ILDhPQUE4Tyx1QkFBdUIsb0ZBQW9GLHNKQUFzSiw0QkFBNEIsbUNBQW1DLHFDQUFxQyxtRUFBbUUsc0pBQXNKLHFDQUFxQyw4QkFBOEIsa0RBQWtELGlDQUFpQyxZQUFZLG1EQUFtRCxrQkFBa0IsMkJBQTJCLDJDQUEyQyxvQ0FBb0Msb0RBQW9ELDRCQUE0QiwwQkFBMEIsU0FBUywrRUFBK0Usc0JBQXNCLHNDQUFzQyxPQUFPLE9BQU8sOENBQThDLEtBQUssd0NBQXdDLEtBQUssMkNBQTJDLEtBQUssNkNBQTZDLEtBQUssaURBQWlELEtBQUssb0RBQW9ELEtBQUsscUNBQXFDLEtBQUssNENBQTRDLEtBQUssdUNBQXVDLEtBQUssdUNBQXVDLEtBQUssc0NBQXNDLEtBQUssNENBQTRDLEtBQUssMENBQTBDLEtBQUssNENBQTRDLEtBQUssNENBQTRDLEtBQUssb0NBQW9DLEtBQUssNENBQTRDLEtBQUssb0NBQW9DLEtBQUssbURBQW1ELEtBQUssZ0RBQWdELEtBQUssZ0RBQWdELEtBQUsscUNBQXFDLEtBQUssNENBQTRDLEtBQUssOENBQThDLEtBQUssNENBQTRDLEtBQUssdUNBQXVDLEtBQUsscUNBQXFDLEtBQUssMkNBQTJDLEtBQUssMkNBQTJDLFFBQVEsaUNBQWlDLFFBQVEsbUNBQW1DLGlDQUFpQyxzREFBc0Qsb0VBQW9FLFFBQVEsMENBQTBDLEdBQUcsNEJBQTRCLHFCQUFxQix5QkFBeUIsaUNBQWlDLG9CQUFvQixlQUFlLEdBQUciLCJmaWxlIjoiLi93ZWIvYXNzZXRzL2Jvb3Rib3gvYm9vdGJveC5taW4uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIGJvb3Rib3guanMgdjQuNC4wXG4gKlxuICogaHR0cDovL2Jvb3Rib3hqcy5jb20vbGljZW5zZS50eHRcbiAqL1xuIWZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sYik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YihyZXF1aXJlKFwianF1ZXJ5XCIpKTphLmJvb3Rib3g9YihhLmpRdWVyeSl9KHRoaXMsZnVuY3Rpb24gYShiLGMpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGQoYSl7dmFyIGI9cVtvLmxvY2FsZV07cmV0dXJuIGI/YlthXTpxLmVuW2FdfWZ1bmN0aW9uIGUoYSxjLGQpe2Euc3RvcFByb3BhZ2F0aW9uKCksYS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPWIuaXNGdW5jdGlvbihkKSYmZC5jYWxsKGMsYSk9PT0hMTtlfHxjLm1vZGFsKFwiaGlkZVwiKX1mdW5jdGlvbiBmKGEpe3ZhciBiLGM9MDtmb3IoYiBpbiBhKWMrKztyZXR1cm4gY31mdW5jdGlvbiBnKGEsYyl7dmFyIGQ9MDtiLmVhY2goYSxmdW5jdGlvbihhLGIpe2MoYSxiLGQrKyl9KX1mdW5jdGlvbiBoKGEpe3ZhciBjLGQ7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGEpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHN1cHBseSBhbiBvYmplY3Qgb2Ygb3B0aW9uc1wiKTtpZighYS5tZXNzYWdlKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBzcGVjaWZ5IGEgbWVzc2FnZVwiKTtyZXR1cm4gYT1iLmV4dGVuZCh7fSxvLGEpLGEuYnV0dG9uc3x8KGEuYnV0dG9ucz17fSksYz1hLmJ1dHRvbnMsZD1mKGMpLGcoYyxmdW5jdGlvbihhLGUsZil7aWYoYi5pc0Z1bmN0aW9uKGUpJiYoZT1jW2FdPXtjYWxsYmFjazplfSksXCJvYmplY3RcIiE9PWIudHlwZShlKSl0aHJvdyBuZXcgRXJyb3IoXCJidXR0b24gd2l0aCBrZXkgXCIrYStcIiBtdXN0IGJlIGFuIG9iamVjdFwiKTtlLmxhYmVsfHwoZS5sYWJlbD1hKSxlLmNsYXNzTmFtZXx8KGUuY2xhc3NOYW1lPTI+PWQmJmY9PT1kLTE/XCJidG4tcHJpbWFyeVwiOlwiYnRuLWRlZmF1bHRcIil9KSxhfWZ1bmN0aW9uIGkoYSxiKXt2YXIgYz1hLmxlbmd0aCxkPXt9O2lmKDE+Y3x8Yz4yKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgbGVuZ3RoXCIpO3JldHVybiAyPT09Y3x8XCJzdHJpbmdcIj09dHlwZW9mIGFbMF0/KGRbYlswXV09YVswXSxkW2JbMV1dPWFbMV0pOmQ9YVswXSxkfWZ1bmN0aW9uIGooYSxjLGQpe3JldHVybiBiLmV4dGVuZCghMCx7fSxhLGkoYyxkKSl9ZnVuY3Rpb24gayhhLGIsYyxkKXt2YXIgZT17Y2xhc3NOYW1lOlwiYm9vdGJveC1cIithLGJ1dHRvbnM6bC5hcHBseShudWxsLGIpfTtyZXR1cm4gbShqKGUsZCxjKSxiKX1mdW5jdGlvbiBsKCl7Zm9yKHZhciBhPXt9LGI9MCxjPWFyZ3VtZW50cy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGU9YXJndW1lbnRzW2JdLGY9ZS50b0xvd2VyQ2FzZSgpLGc9ZS50b1VwcGVyQ2FzZSgpO2FbZl09e2xhYmVsOmQoZyl9fXJldHVybiBhfWZ1bmN0aW9uIG0oYSxiKXt2YXIgZD17fTtyZXR1cm4gZyhiLGZ1bmN0aW9uKGEsYil7ZFtiXT0hMH0pLGcoYS5idXR0b25zLGZ1bmN0aW9uKGEpe2lmKGRbYV09PT1jKXRocm93IG5ldyBFcnJvcihcImJ1dHRvbiBrZXkgXCIrYStcIiBpcyBub3QgYWxsb3dlZCAob3B0aW9ucyBhcmUgXCIrYi5qb2luKFwiXFxuXCIpK1wiKVwiKX0pLGF9dmFyIG49e2RpYWxvZzpcIjxkaXYgY2xhc3M9J2Jvb3Rib3ggbW9kYWwnIHRhYmluZGV4PSctMScgcm9sZT0nZGlhbG9nJz48ZGl2IGNsYXNzPSdtb2RhbC1kaWFsb2cnPjxkaXYgY2xhc3M9J21vZGFsLWNvbnRlbnQnPjxkaXYgY2xhc3M9J21vZGFsLWJvZHknPjxkaXYgY2xhc3M9J2Jvb3Rib3gtYm9keSc+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+XCIsaGVhZGVyOlwiPGRpdiBjbGFzcz0nbW9kYWwtaGVhZGVyJz48aDQgY2xhc3M9J21vZGFsLXRpdGxlJz48L2g0PjwvZGl2PlwiLGZvb3RlcjpcIjxkaXYgY2xhc3M9J21vZGFsLWZvb3Rlcic+PC9kaXY+XCIsY2xvc2VCdXR0b246XCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2Jvb3Rib3gtY2xvc2UtYnV0dG9uIGNsb3NlJyBkYXRhLWRpc21pc3M9J21vZGFsJyBhcmlhLWhpZGRlbj0ndHJ1ZSc+JnRpbWVzOzwvYnV0dG9uPlwiLGZvcm06XCI8Zm9ybSBjbGFzcz0nYm9vdGJveC1mb3JtJz48L2Zvcm0+XCIsaW5wdXRzOnt0ZXh0OlwiPGlucHV0IGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtdGV4dCBmb3JtLWNvbnRyb2wnIGF1dG9jb21wbGV0ZT1vZmYgdHlwZT10ZXh0IC8+XCIsdGV4dGFyZWE6XCI8dGV4dGFyZWEgY2xhc3M9J2Jvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC10ZXh0YXJlYSBmb3JtLWNvbnRyb2wnPjwvdGV4dGFyZWE+XCIsZW1haWw6XCI8aW5wdXQgY2xhc3M9J2Jvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1lbWFpbCBmb3JtLWNvbnRyb2wnIGF1dG9jb21wbGV0ZT0nb2ZmJyB0eXBlPSdlbWFpbCcgLz5cIixzZWxlY3Q6XCI8c2VsZWN0IGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtc2VsZWN0IGZvcm0tY29udHJvbCc+PC9zZWxlY3Q+XCIsY2hlY2tib3g6XCI8ZGl2IGNsYXNzPSdjaGVja2JveCc+PGxhYmVsPjxpbnB1dCBjbGFzcz0nYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LWNoZWNrYm94JyB0eXBlPSdjaGVja2JveCcgLz48L2xhYmVsPjwvZGl2PlwiLGRhdGU6XCI8aW5wdXQgY2xhc3M9J2Jvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1kYXRlIGZvcm0tY29udHJvbCcgYXV0b2NvbXBsZXRlPW9mZiB0eXBlPSdkYXRlJyAvPlwiLHRpbWU6XCI8aW5wdXQgY2xhc3M9J2Jvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC10aW1lIGZvcm0tY29udHJvbCcgYXV0b2NvbXBsZXRlPW9mZiB0eXBlPSd0aW1lJyAvPlwiLG51bWJlcjpcIjxpbnB1dCBjbGFzcz0nYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LW51bWJlciBmb3JtLWNvbnRyb2wnIGF1dG9jb21wbGV0ZT1vZmYgdHlwZT0nbnVtYmVyJyAvPlwiLHBhc3N3b3JkOlwiPGlucHV0IGNsYXNzPSdib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtcGFzc3dvcmQgZm9ybS1jb250cm9sJyBhdXRvY29tcGxldGU9J29mZicgdHlwZT0ncGFzc3dvcmQnIC8+XCJ9fSxvPXtsb2NhbGU6XCJlblwiLGJhY2tkcm9wOlwic3RhdGljXCIsYW5pbWF0ZTohMCxjbGFzc05hbWU6bnVsbCxjbG9zZUJ1dHRvbjohMCxzaG93OiEwLGNvbnRhaW5lcjpcImJvZHlcIn0scD17fTtwLmFsZXJ0PWZ1bmN0aW9uKCl7dmFyIGE7aWYoYT1rKFwiYWxlcnRcIixbXCJva1wiXSxbXCJtZXNzYWdlXCIsXCJjYWxsYmFja1wiXSxhcmd1bWVudHMpLGEuY2FsbGJhY2smJiFiLmlzRnVuY3Rpb24oYS5jYWxsYmFjaykpdGhyb3cgbmV3IEVycm9yKFwiYWxlcnQgcmVxdWlyZXMgY2FsbGJhY2sgcHJvcGVydHkgdG8gYmUgYSBmdW5jdGlvbiB3aGVuIHByb3ZpZGVkXCIpO3JldHVybiBhLmJ1dHRvbnMub2suY2FsbGJhY2s9YS5vbkVzY2FwZT1mdW5jdGlvbigpe3JldHVybiBiLmlzRnVuY3Rpb24oYS5jYWxsYmFjayk/YS5jYWxsYmFjay5jYWxsKHRoaXMpOiEwfSxwLmRpYWxvZyhhKX0scC5jb25maXJtPWZ1bmN0aW9uKCl7dmFyIGE7aWYoYT1rKFwiY29uZmlybVwiLFtcImNhbmNlbFwiLFwiY29uZmlybVwiXSxbXCJtZXNzYWdlXCIsXCJjYWxsYmFja1wiXSxhcmd1bWVudHMpLGEuYnV0dG9ucy5jYW5jZWwuY2FsbGJhY2s9YS5vbkVzY2FwZT1mdW5jdGlvbigpe3JldHVybiBhLmNhbGxiYWNrLmNhbGwodGhpcywhMSl9LGEuYnV0dG9ucy5jb25maXJtLmNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbGJhY2suY2FsbCh0aGlzLCEwKX0sIWIuaXNGdW5jdGlvbihhLmNhbGxiYWNrKSl0aHJvdyBuZXcgRXJyb3IoXCJjb25maXJtIHJlcXVpcmVzIGEgY2FsbGJhY2tcIik7cmV0dXJuIHAuZGlhbG9nKGEpfSxwLnByb21wdD1mdW5jdGlvbigpe3ZhciBhLGQsZSxmLGgsaSxrO2lmKGY9YihuLmZvcm0pLGQ9e2NsYXNzTmFtZTpcImJvb3Rib3gtcHJvbXB0XCIsYnV0dG9uczpsKFwiY2FuY2VsXCIsXCJjb25maXJtXCIpLHZhbHVlOlwiXCIsaW5wdXRUeXBlOlwidGV4dFwifSxhPW0oaihkLGFyZ3VtZW50cyxbXCJ0aXRsZVwiLFwiY2FsbGJhY2tcIl0pLFtcImNhbmNlbFwiLFwiY29uZmlybVwiXSksaT1hLnNob3c9PT1jPyEwOmEuc2hvdyxhLm1lc3NhZ2U9ZixhLmJ1dHRvbnMuY2FuY2VsLmNhbGxiYWNrPWEub25Fc2NhcGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5jYWxsYmFjay5jYWxsKHRoaXMsbnVsbCl9LGEuYnV0dG9ucy5jb25maXJtLmNhbGxiYWNrPWZ1bmN0aW9uKCl7dmFyIGM7c3dpdGNoKGEuaW5wdXRUeXBlKXtjYXNlXCJ0ZXh0XCI6Y2FzZVwidGV4dGFyZWFcIjpjYXNlXCJlbWFpbFwiOmNhc2VcInNlbGVjdFwiOmNhc2VcImRhdGVcIjpjYXNlXCJ0aW1lXCI6Y2FzZVwibnVtYmVyXCI6Y2FzZVwicGFzc3dvcmRcIjpjPWgudmFsKCk7YnJlYWs7Y2FzZVwiY2hlY2tib3hcIjp2YXIgZD1oLmZpbmQoXCJpbnB1dDpjaGVja2VkXCIpO2M9W10sZyhkLGZ1bmN0aW9uKGEsZCl7Yy5wdXNoKGIoZCkudmFsKCkpfSl9cmV0dXJuIGEuY2FsbGJhY2suY2FsbCh0aGlzLGMpfSxhLnNob3c9ITEsIWEudGl0bGUpdGhyb3cgbmV3IEVycm9yKFwicHJvbXB0IHJlcXVpcmVzIGEgdGl0bGVcIik7aWYoIWIuaXNGdW5jdGlvbihhLmNhbGxiYWNrKSl0aHJvdyBuZXcgRXJyb3IoXCJwcm9tcHQgcmVxdWlyZXMgYSBjYWxsYmFja1wiKTtpZighbi5pbnB1dHNbYS5pbnB1dFR5cGVdKXRocm93IG5ldyBFcnJvcihcImludmFsaWQgcHJvbXB0IHR5cGVcIik7c3dpdGNoKGg9YihuLmlucHV0c1thLmlucHV0VHlwZV0pLGEuaW5wdXRUeXBlKXtjYXNlXCJ0ZXh0XCI6Y2FzZVwidGV4dGFyZWFcIjpjYXNlXCJlbWFpbFwiOmNhc2VcImRhdGVcIjpjYXNlXCJ0aW1lXCI6Y2FzZVwibnVtYmVyXCI6Y2FzZVwicGFzc3dvcmRcIjpoLnZhbChhLnZhbHVlKTticmVhaztjYXNlXCJzZWxlY3RcIjp2YXIgbz17fTtpZihrPWEuaW5wdXRPcHRpb25zfHxbXSwhYi5pc0FycmF5KGspKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwYXNzIGFuIGFycmF5IG9mIGlucHV0IG9wdGlvbnNcIik7aWYoIWsubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcInByb21wdCB3aXRoIHNlbGVjdCByZXF1aXJlcyBvcHRpb25zXCIpO2coayxmdW5jdGlvbihhLGQpe3ZhciBlPWg7aWYoZC52YWx1ZT09PWN8fGQudGV4dD09PWMpdGhyb3cgbmV3IEVycm9yKFwiZ2l2ZW4gb3B0aW9ucyBpbiB3cm9uZyBmb3JtYXRcIik7ZC5ncm91cCYmKG9bZC5ncm91cF18fChvW2QuZ3JvdXBdPWIoXCI8b3B0Z3JvdXAvPlwiKS5hdHRyKFwibGFiZWxcIixkLmdyb3VwKSksZT1vW2QuZ3JvdXBdKSxlLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiK2QudmFsdWUrXCInPlwiK2QudGV4dCtcIjwvb3B0aW9uPlwiKX0pLGcobyxmdW5jdGlvbihhLGIpe2guYXBwZW5kKGIpfSksaC52YWwoYS52YWx1ZSk7YnJlYWs7Y2FzZVwiY2hlY2tib3hcIjp2YXIgcT1iLmlzQXJyYXkoYS52YWx1ZSk/YS52YWx1ZTpbYS52YWx1ZV07aWYoaz1hLmlucHV0T3B0aW9uc3x8W10sIWsubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcInByb21wdCB3aXRoIGNoZWNrYm94IHJlcXVpcmVzIG9wdGlvbnNcIik7aWYoIWtbMF0udmFsdWV8fCFrWzBdLnRleHQpdGhyb3cgbmV3IEVycm9yKFwiZ2l2ZW4gb3B0aW9ucyBpbiB3cm9uZyBmb3JtYXRcIik7aD1iKFwiPGRpdi8+XCIpLGcoayxmdW5jdGlvbihjLGQpe3ZhciBlPWIobi5pbnB1dHNbYS5pbnB1dFR5cGVdKTtlLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwidmFsdWVcIixkLnZhbHVlKSxlLmZpbmQoXCJsYWJlbFwiKS5hcHBlbmQoZC50ZXh0KSxnKHEsZnVuY3Rpb24oYSxiKXtiPT09ZC52YWx1ZSYmZS5maW5kKFwiaW5wdXRcIikucHJvcChcImNoZWNrZWRcIiwhMCl9KSxoLmFwcGVuZChlKX0pfXJldHVybiBhLnBsYWNlaG9sZGVyJiZoLmF0dHIoXCJwbGFjZWhvbGRlclwiLGEucGxhY2Vob2xkZXIpLGEucGF0dGVybiYmaC5hdHRyKFwicGF0dGVyblwiLGEucGF0dGVybiksYS5tYXhsZW5ndGgmJmguYXR0cihcIm1heGxlbmd0aFwiLGEubWF4bGVuZ3RoKSxmLmFwcGVuZChoKSxmLm9uKFwic3VibWl0XCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksZS5maW5kKFwiLmJ0bi1wcmltYXJ5XCIpLmNsaWNrKCl9KSxlPXAuZGlhbG9nKGEpLGUub2ZmKFwic2hvd24uYnMubW9kYWxcIiksZS5vbihcInNob3duLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtoLmZvY3VzKCl9KSxpPT09ITAmJmUubW9kYWwoXCJzaG93XCIpLGV9LHAuZGlhbG9nPWZ1bmN0aW9uKGEpe2E9aChhKTt2YXIgZD1iKG4uZGlhbG9nKSxmPWQuZmluZChcIi5tb2RhbC1kaWFsb2dcIiksaT1kLmZpbmQoXCIubW9kYWwtYm9keVwiKSxqPWEuYnV0dG9ucyxrPVwiXCIsbD17b25Fc2NhcGU6YS5vbkVzY2FwZX07aWYoYi5mbi5tb2RhbD09PWMpdGhyb3cgbmV3IEVycm9yKFwiJC5mbi5tb2RhbCBpcyBub3QgZGVmaW5lZDsgcGxlYXNlIGRvdWJsZSBjaGVjayB5b3UgaGF2ZSBpbmNsdWRlZCB0aGUgQm9vdHN0cmFwIEphdmFTY3JpcHQgbGlicmFyeS4gU2VlIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2phdmFzY3JpcHQvIGZvciBtb3JlIGRldGFpbHMuXCIpO2lmKGcoaixmdW5jdGlvbihhLGIpe2srPVwiPGJ1dHRvbiBkYXRhLWJiLWhhbmRsZXI9J1wiK2ErXCInIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBcIitiLmNsYXNzTmFtZStcIic+XCIrYi5sYWJlbCtcIjwvYnV0dG9uPlwiLGxbYV09Yi5jYWxsYmFja30pLGkuZmluZChcIi5ib290Ym94LWJvZHlcIikuaHRtbChhLm1lc3NhZ2UpLGEuYW5pbWF0ZT09PSEwJiZkLmFkZENsYXNzKFwiZmFkZVwiKSxhLmNsYXNzTmFtZSYmZC5hZGRDbGFzcyhhLmNsYXNzTmFtZSksXCJsYXJnZVwiPT09YS5zaXplP2YuYWRkQ2xhc3MoXCJtb2RhbC1sZ1wiKTpcInNtYWxsXCI9PT1hLnNpemUmJmYuYWRkQ2xhc3MoXCJtb2RhbC1zbVwiKSxhLnRpdGxlJiZpLmJlZm9yZShuLmhlYWRlciksYS5jbG9zZUJ1dHRvbil7dmFyIG09YihuLmNsb3NlQnV0dG9uKTthLnRpdGxlP2QuZmluZChcIi5tb2RhbC1oZWFkZXJcIikucHJlcGVuZChtKTptLmNzcyhcIm1hcmdpbi10b3BcIixcIi0xMHB4XCIpLnByZXBlbmRUbyhpKX1yZXR1cm4gYS50aXRsZSYmZC5maW5kKFwiLm1vZGFsLXRpdGxlXCIpLmh0bWwoYS50aXRsZSksay5sZW5ndGgmJihpLmFmdGVyKG4uZm9vdGVyKSxkLmZpbmQoXCIubW9kYWwtZm9vdGVyXCIpLmh0bWwoaykpLGQub24oXCJoaWRkZW4uYnMubW9kYWxcIixmdW5jdGlvbihhKXthLnRhcmdldD09PXRoaXMmJmQucmVtb3ZlKCl9KSxkLm9uKFwic2hvd24uYnMubW9kYWxcIixmdW5jdGlvbigpe2QuZmluZChcIi5idG4tcHJpbWFyeTpmaXJzdFwiKS5mb2N1cygpfSksXCJzdGF0aWNcIiE9PWEuYmFja2Ryb3AmJmQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsZnVuY3Rpb24oYSl7ZC5jaGlsZHJlbihcIi5tb2RhbC1iYWNrZHJvcFwiKS5sZW5ndGgmJihhLmN1cnJlbnRUYXJnZXQ9ZC5jaGlsZHJlbihcIi5tb2RhbC1iYWNrZHJvcFwiKS5nZXQoMCkpLGEudGFyZ2V0PT09YS5jdXJyZW50VGFyZ2V0JiZkLnRyaWdnZXIoXCJlc2NhcGUuY2xvc2UuYmJcIil9KSxkLm9uKFwiZXNjYXBlLmNsb3NlLmJiXCIsZnVuY3Rpb24oYSl7bC5vbkVzY2FwZSYmZShhLGQsbC5vbkVzY2FwZSl9KSxkLm9uKFwiY2xpY2tcIixcIi5tb2RhbC1mb290ZXIgYnV0dG9uXCIsZnVuY3Rpb24oYSl7dmFyIGM9Yih0aGlzKS5kYXRhKFwiYmItaGFuZGxlclwiKTtlKGEsZCxsW2NdKX0pLGQub24oXCJjbGlja1wiLFwiLmJvb3Rib3gtY2xvc2UtYnV0dG9uXCIsZnVuY3Rpb24oYSl7ZShhLGQsbC5vbkVzY2FwZSl9KSxkLm9uKFwia2V5dXBcIixmdW5jdGlvbihhKXsyNz09PWEud2hpY2gmJmQudHJpZ2dlcihcImVzY2FwZS5jbG9zZS5iYlwiKX0pLGIoYS5jb250YWluZXIpLmFwcGVuZChkKSxkLm1vZGFsKHtiYWNrZHJvcDphLmJhY2tkcm9wP1wic3RhdGljXCI6ITEsa2V5Ym9hcmQ6ITEsc2hvdzohMX0pLGEuc2hvdyYmZC5tb2RhbChcInNob3dcIiksZH0scC5zZXREZWZhdWx0cz1mdW5jdGlvbigpe3ZhciBhPXt9OzI9PT1hcmd1bWVudHMubGVuZ3RoP2FbYXJndW1lbnRzWzBdXT1hcmd1bWVudHNbMV06YT1hcmd1bWVudHNbMF0sYi5leHRlbmQobyxhKX0scC5oaWRlQWxsPWZ1bmN0aW9uKCl7cmV0dXJuIGIoXCIuYm9vdGJveFwiKS5tb2RhbChcImhpZGVcIikscH07dmFyIHE9e2JnX0JHOntPSzpcItCe0LpcIixDQU5DRUw6XCLQntGC0LrQsNC3XCIsQ09ORklSTTpcItCf0L7RgtCy0YrRgNC20LTQsNCy0LDQvFwifSxicjp7T0s6XCJPS1wiLENBTkNFTDpcIkNhbmNlbGFyXCIsQ09ORklSTTpcIlNpbVwifSxjczp7T0s6XCJPS1wiLENBTkNFTDpcIlpydcWhaXRcIixDT05GSVJNOlwiUG90dnJkaXRcIn0sZGE6e09LOlwiT0tcIixDQU5DRUw6XCJBbm51bGxlclwiLENPTkZJUk06XCJBY2NlcHRlclwifSxkZTp7T0s6XCJPS1wiLENBTkNFTDpcIkFiYnJlY2hlblwiLENPTkZJUk06XCJBa3plcHRpZXJlblwifSxlbDp7T0s6XCLOlc69z4TOrM6+zrXOuVwiLENBTkNFTDpcIs6RzrrPjc+Bz4nPg863XCIsQ09ORklSTTpcIs6Vz4DOuc6yzrXOss6xzq/Pic+DzrdcIn0sZW46e09LOlwiT0tcIixDQU5DRUw6XCJDYW5jZWxcIixDT05GSVJNOlwiT0tcIn0sZXM6e09LOlwiT0tcIixDQU5DRUw6XCJDYW5jZWxhclwiLENPTkZJUk06XCJBY2VwdGFyXCJ9LGV0OntPSzpcIk9LXCIsQ0FOQ0VMOlwiS2F0a2VzdGFcIixDT05GSVJNOlwiT0tcIn0sZmE6e09LOlwi2YLYqNmI2YRcIixDQU5DRUw6XCLZhNi62YhcIixDT05GSVJNOlwi2KrYp9uM24zYr1wifSxmaTp7T0s6XCJPS1wiLENBTkNFTDpcIlBlcnV1dGFcIixDT05GSVJNOlwiT0tcIn0sZnI6e09LOlwiT0tcIixDQU5DRUw6XCJBbm51bGVyXCIsQ09ORklSTTpcIkQnYWNjb3JkXCJ9LGhlOntPSzpcIteQ15nXqdeV16hcIixDQU5DRUw6XCLXkdeZ15jXldecXCIsQ09ORklSTTpcIteQ15nXqdeV16hcIn0saHU6e09LOlwiT0tcIixDQU5DRUw6XCJNw6lnc2VtXCIsQ09ORklSTTpcIk1lZ2VyxZFzw610XCJ9LGhyOntPSzpcIk9LXCIsQ0FOQ0VMOlwiT2R1c3RhbmlcIixDT05GSVJNOlwiUG90dnJkaVwifSxpZDp7T0s6XCJPS1wiLENBTkNFTDpcIkJhdGFsXCIsQ09ORklSTTpcIk9LXCJ9LGl0OntPSzpcIk9LXCIsQ0FOQ0VMOlwiQW5udWxsYVwiLENPTkZJUk06XCJDb25mZXJtYVwifSxqYTp7T0s6XCJPS1wiLENBTkNFTDpcIuOCreODo+ODs+OCu+ODq1wiLENPTkZJUk06XCLnorroqo1cIn0sbHQ6e09LOlwiR2VyYWlcIixDQU5DRUw6XCJBdMWhYXVrdGlcIixDT05GSVJNOlwiUGF0dmlydGludGlcIn0sbHY6e09LOlwiTGFiaVwiLENBTkNFTDpcIkF0Y2VsdFwiLENPTkZJUk06XCJBcHN0aXByaW7EgXRcIn0sbmw6e09LOlwiT0tcIixDQU5DRUw6XCJBbm51bGVyZW5cIixDT05GSVJNOlwiQWNjZXB0ZXJlblwifSxubzp7T0s6XCJPS1wiLENBTkNFTDpcIkF2YnJ5dFwiLENPTkZJUk06XCJPS1wifSxwbDp7T0s6XCJPS1wiLENBTkNFTDpcIkFudWx1alwiLENPTkZJUk06XCJQb3R3aWVyZMW6XCJ9LHB0OntPSzpcIk9LXCIsQ0FOQ0VMOlwiQ2FuY2VsYXJcIixDT05GSVJNOlwiQ29uZmlybWFyXCJ9LHJ1OntPSzpcIk9LXCIsQ0FOQ0VMOlwi0J7RgtC80LXQvdCwXCIsQ09ORklSTTpcItCf0YDQuNC80LXQvdC40YLRjFwifSxzcTp7T0s6XCJPS1wiLENBTkNFTDpcIkFudWxvXCIsQ09ORklSTTpcIlByYW5vXCJ9LHN2OntPSzpcIk9LXCIsQ0FOQ0VMOlwiQXZicnl0XCIsQ09ORklSTTpcIk9LXCJ9LHRoOntPSzpcIuC4leC4geC4peC4h1wiLENBTkNFTDpcIuC4ouC4geC5gOC4peC4tOC4gVwiLENPTkZJUk06XCLguKLguLfguJnguKLguLHguJlcIn0sdHI6e09LOlwiVGFtYW1cIixDQU5DRUw6XCLEsHB0YWxcIixDT05GSVJNOlwiT25heWxhXCJ9LHpoX0NOOntPSzpcIk9LXCIsQ0FOQ0VMOlwi5Y+W5raIXCIsQ09ORklSTTpcIuehruiupFwifSx6aF9UVzp7T0s6XCJPS1wiLENBTkNFTDpcIuWPlua2iFwiLENPTkZJUk06XCLnorroqo1cIn19O3JldHVybiBwLmFkZExvY2FsZT1mdW5jdGlvbihhLGMpe3JldHVybiBiLmVhY2goW1wiT0tcIixcIkNBTkNFTFwiLFwiQ09ORklSTVwiXSxmdW5jdGlvbihhLGIpe2lmKCFjW2JdKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBzdXBwbHkgYSB0cmFuc2xhdGlvbiBmb3IgJ1wiK2IrXCInXCIpfSkscVthXT17T0s6Yy5PSyxDQU5DRUw6Yy5DQU5DRUwsQ09ORklSTTpjLkNPTkZJUk19LHB9LHAucmVtb3ZlTG9jYWxlPWZ1bmN0aW9uKGEpe3JldHVybiBkZWxldGUgcVthXSxwfSxwLnNldExvY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gcC5zZXREZWZhdWx0cyhcImxvY2FsZVwiLGEpfSxwLmluaXQ9ZnVuY3Rpb24oYyl7cmV0dXJuIGEoY3x8Yil9LHB9KTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./web/assets/bootbox/bootbox.min.js\n')},"./web/assets/less.js/less.min.js":
/*!****************************************!*\
  !*** ./web/assets/less.js/less.min.js ***!
  \****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('/* WEBPACK VAR INJECTION */(function(setImmediate) {var require;var require;/*!\n * Less - Leaner CSS v2.5.1\n * http://lesscss.org\n *\n * Copyright (c) 2009-2015, Alexis Sellier <self@cloudhead.net>\n * Licensed under the Apache v2 License.\n *\n */\n\n /** * @license Apache v2\n */\n\n!function(a){if(true)module.exports=a();else { var b; }}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return require(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module \'"+g+"\'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;d.length>g;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./utils").addDataAttr,d=a("./browser");b.exports=function(a,b){c(b,d.currentScript(a)),void 0===b.isFileProtocol&&(b.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(a.location.protocol)),b.async=b.async||!1,b.fileAsync=b.fileAsync||!1,b.poll=b.poll||(b.isFileProtocol?1e3:1500),b.env=b.env||("127.0.0.1"==a.location.hostname||"0.0.0.0"==a.location.hostname||"localhost"==a.location.hostname||a.location.port&&a.location.port.length>0||b.isFileProtocol?"development":"production");var e=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(a.location.hash);e&&(b.dumpLineNumbers=e[1]),void 0===b.useFileCache&&(b.useFileCache=!0),void 0===b.onReady&&(b.onReady=!0)}},{"./browser":3,"./utils":9}],2:[function(a,b){a("promise/polyfill.js");var c=window.less||{};a("./add-default-options")(window,c);var d=b.exports=a("./index")(window,c);window.less=d,c.onReady&&(/!watch/.test(window.location.hash)&&d.watch(),d.registerStylesheetsImmediately(),d.pageLoadFinished=d.refresh("development"===d.env))},{"./add-default-options":1,"./index":7,"promise/polyfill.js":94}],3:[function(a,b){var c=a("./utils");b.exports={createCSS:function(a,b,d){var e=d.href||"",f="less:"+(d.title||c.extractId(e)),g=a.getElementById(f),h=!1,i=a.createElement("style");i.setAttribute("type","text/css"),d.media&&i.setAttribute("media",d.media),i.id=f,i.styleSheet||(i.appendChild(a.createTextNode(b)),h=null!==g&&g.childNodes.length>0&&i.childNodes.length>0&&g.firstChild.nodeValue===i.firstChild.nodeValue);var j=a.getElementsByTagName("head")[0];if(null===g||h===!1){var k=d&&d.nextSibling||null;k?k.parentNode.insertBefore(i,k):j.appendChild(i)}if(g&&h===!1&&g.parentNode.removeChild(g),i.styleSheet)try{i.styleSheet.cssText=b}catch(l){throw new Error("Couldn\'t reassign styleSheet.cssText.")}},currentScript:function(a){var b=a.document;return b.currentScript||function(){var a=b.getElementsByTagName("script");return a[a.length-1]}()}}},{"./utils":9}],4:[function(a,b){b.exports=function(a,b,c){var d=null;if("development"!==b.env)try{d="undefined"==typeof a.localStorage?null:a.localStorage}catch(e){}return{setCSS:function(a,b,e){if(d){c.info("saving "+a+" to cache.");try{d.setItem(a,e),d.setItem(a+":timestamp",b)}catch(f){c.error(\'failed to save "\'+a+\'" to local storage for caching.\')}}},getCSS:function(a,b){var c=d&&d.getItem(a),e=d&&d.getItem(a+":timestamp");return e&&b.lastModified&&new Date(b.lastModified).valueOf()===new Date(e).valueOf()?c:void 0}}}},{}],5:[function(a,b){var c=a("./utils"),d=a("./browser");b.exports=function(a,b,e){function f(b,f){var g,h,i="less-error-message:"+c.extractId(f||""),j=\'<li><label>{line}</label><pre class="{class}">{content}</pre></li>\',k=a.document.createElement("div"),l=[],m=b.filename||f,n=m.match(/([^\\/]+(\\?.*)?)$/)[1];k.id=i,k.className="less-error-message",h="<h3>"+(b.type||"Syntax")+"Error: "+(b.message||"There is an error in your .less file")+\'</h3><p>in <a href="\'+m+\'">\'+n+"</a> ";var o=function(a,b,c){void 0!==a.extract[b]&&l.push(j.replace(/\\{line\\}/,(parseInt(a.line,10)||0)+(b-1)).replace(/\\{class\\}/,c).replace(/\\{content\\}/,a.extract[b]))};b.extract&&(o(b,0,""),o(b,1,"line"),o(b,2,""),h+="on line "+b.line+", column "+(b.column+1)+":</p><ul>"+l.join("")+"</ul>"),b.stack&&(b.extract||e.logLevel>=4)&&(h+="<br/>Stack Trace</br />"+b.stack.split("\\n").slice(1).join("<br/>")),k.innerHTML=h,d.createCSS(a.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\\n"),{title:"error-message"}),k.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===e.env&&(g=setInterval(function(){var b=a.document,c=b.body;c&&(b.getElementById(i)?c.replaceChild(k,b.getElementById(i)):c.insertBefore(k,c.firstChild),clearInterval(g))},10))}function g(a,b){e.errorReporting&&"html"!==e.errorReporting?"console"===e.errorReporting?k(a,b):"function"==typeof e.errorReporting&&e.errorReporting("add",a,b):f(a,b)}function h(b){var d=a.document.getElementById("less-error-message:"+c.extractId(b));d&&d.parentNode.removeChild(d)}function i(){}function j(a){e.errorReporting&&"html"!==e.errorReporting?"console"===e.errorReporting?i(a):"function"==typeof e.errorReporting&&e.errorReporting("remove",a):h(a)}function k(a,c){var d="{line} {content}",f=a.filename||c,g=[],h=(a.type||"Syntax")+"Error: "+(a.message||"There is an error in your .less file")+" in "+f+" ",i=function(a,b,c){void 0!==a.extract[b]&&g.push(d.replace(/\\{line\\}/,(parseInt(a.line,10)||0)+(b-1)).replace(/\\{class\\}/,c).replace(/\\{content\\}/,a.extract[b]))};a.extract&&(i(a,0,""),i(a,1,"line"),i(a,2,""),h+="on line "+a.line+", column "+(a.column+1)+":\\n"+g.join("\\n")),a.stack&&(a.extract||e.logLevel>=4)&&(h+="\\nStack Trace\\n"+a.stack),b.logger.error(h)}return{add:g,remove:j}}},{"./browser":3,"./utils":9}],6:[function(a,b){b.exports=function(b,c){function d(){if(window.XMLHttpRequest&&!("file:"===window.location.protocol&&"ActiveXObject"in window))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){return c.error("browser doesn\'t support AJAX."),null}}var e=a("../less/environment/abstract-file-manager.js"),f={},g=function(){};return g.prototype=new e,g.prototype.alwaysMakePathsAbsolute=function(){return!0},g.prototype.join=function(a,b){return a?this.extractUrlParts(b,a).path:b},g.prototype.doXHR=function(a,e,f,g){function h(b,c,d){b.status>=200&&300>b.status?c(b.responseText,b.getResponseHeader("Last-Modified")):"function"==typeof d&&d(b.status,a)}var i=d(),j=b.isFileProtocol?b.fileAsync:b.async;"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/css"),c.debug("XHR: Getting \'"+a+"\'"),i.open("GET",a,j),i.setRequestHeader("Accept",e||"text/x-less, text/css; q=0.9, */*; q=0.5"),i.send(null),b.isFileProtocol&&!b.fileAsync?0===i.status||i.status>=200&&300>i.status?f(i.responseText):g(i.status,a):j?i.onreadystatechange=function(){4==i.readyState&&h(i,f,g)}:h(i,f,g)},g.prototype.supports=function(){return!0},g.prototype.clearFileCache=function(){f={}},g.prototype.loadFile=function(a,b,c,d,e){b&&!this.isPathAbsolute(a)&&(a=b+a),c=c||{};var g=this.extractUrlParts(a,window.location.href),h=g.url;if(c.useFileCache&&f[h])try{var i=f[h];e(null,{contents:i,filename:h,webInfo:{lastModified:new Date}})}catch(j){e({filename:h,message:"Error loading file "+h+" error was "+j.message})}else this.doXHR(h,c.mime,function(a,b){f[h]=a,e(null,{contents:a,filename:h,webInfo:{lastModified:b}})},function(a,b){e({type:"File",message:"\'"+b+"\' wasn\'t found ("+a+")",href:h})})},g}},{"../less/environment/abstract-file-manager.js":14}],7:[function(a,b){var c=a("./utils").addDataAttr,d=a("./browser");b.exports=function(b,e){function f(a){return e.postProcessor&&"function"==typeof e.postProcessor&&(a=e.postProcessor.call(a,a)||a),a}function g(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function h(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=c.concat(Array.prototype.slice.call(arguments,0));return a.apply(b,d)}}function i(a){for(var b,c=m.getElementsByTagName("style"),d=0;c.length>d;d++)if(b=c[d],b.type.match(t)){var f=g(e);f.modifyVars=a;var i=b.innerHTML||"";f.filename=m.location.href.replace(/#.*$/,""),n.render(i,f,h(function(a,b,c){b?r.add(b,"inline"):(a.type="text/css",a.styleSheet?a.styleSheet.cssText=c.css:a.innerHTML=c.css)},null,b))}}function j(a,b,d,h,i){function j(c){var e=c.contents,g=c.filename,i=c.webInfo,j={currentDirectory:q.getPath(g),filename:g,rootFilename:g,relativeUrls:k.relativeUrls};if(j.entryPath=j.currentDirectory,j.rootpath=k.rootpath||j.currentDirectory,i&&(i.remaining=h,!k.modifyVars)){var l=s.getCSS(g,i);if(!d&&l)return i.local=!0,void b(null,l,e,a,i,g)}r.remove(g),k.rootFileInfo=j,n.render(e,k,function(c,d){c?(c.href=g,b(c)):(d.css=f(d.css),k.modifyVars||s.setCSS(a.href,i.lastModified,d.css),b(null,d.css,e,a,i,g))})}var k=g(e);c(k,a),k.mime=a.type,i&&(k.modifyVars=i),q.loadFile(a.href,null,k,o,function(a,c){return a?void b(a):void j(c)})}function k(a,b,c){for(var d=0;n.sheets.length>d;d++)j(n.sheets[d],a,b,n.sheets.length-(d+1),c)}function l(){"development"===n.env&&(n.watchTimer=setInterval(function(){n.watchMode&&(q.clearFileCache(),k(function(a,c,e,f){a?r.add(a,a.href||f.href):c&&d.createCSS(b.document,c,f)}))},e.poll))}var m=b.document,n=a("../less")();n.options=e;var o=n.environment,p=a("./file-manager")(e,n.logger),q=new p;o.addFileManager(q),n.FileManager=p,a("./log-listener")(n,e);var r=a("./error-reporting")(b,n,e),s=n.cache=e.cache||a("./cache")(b,e,n.logger);e.functions&&n.functions.functionRegistry.addMultiple(e.functions);var t=/^text\\/(x-)?less$/;return n.watch=function(){return n.watchMode||(n.env="development",l()),this.watchMode=!0,!0},n.unwatch=function(){return clearInterval(n.watchTimer),this.watchMode=!1,!1},n.registerStylesheetsImmediately=function(){var a=m.getElementsByTagName("link");n.sheets=[];for(var b=0;a.length>b;b++)("stylesheet/less"===a[b].rel||a[b].rel.match(/stylesheet/)&&a[b].type.match(t))&&n.sheets.push(a[b])},n.registerStylesheets=function(){return new Promise(function(a){n.registerStylesheetsImmediately(),a()})},n.modifyVars=function(a){return n.refresh(!0,a,!1)},n.refresh=function(a,c,e){return(a||e)&&e!==!1&&q.clearFileCache(),new Promise(function(e,f){var g,h,j;g=h=new Date,k(function(a,c,i,k,l){return a?(r.add(a,a.href||k.href),void f(a)):(n.logger.info(l.local?"loading "+k.href+" from cache.":"rendered "+k.href+" successfully."),d.createCSS(b.document,c,k),n.logger.info("css for "+k.href+" generated in "+(new Date-h)+"ms"),0===l.remaining&&(j=new Date-g,n.logger.info("less has finished. css generated in "+j+"ms"),e({startTime:g,endTime:h,totalMilliseconds:j,sheets:n.sheets.length})),void(h=new Date))},a,c),i(c)})},n.refreshStyles=i,n}},{"../less":29,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./log-listener":8,"./utils":9}],8:[function(a,b){b.exports=function(a,b){var c=4,d=3,e=2,f=1;b.logLevel="undefined"!=typeof b.logLevel?b.logLevel:"development"===b.env?d:f,b.loggers||(b.loggers=[{debug:function(a){b.logLevel>=c&&console.log(a)},info:function(a){b.logLevel>=d&&console.log(a)},warn:function(a){b.logLevel>=e&&console.warn(a)},error:function(a){b.logLevel>=f&&console.error(a)}}]);for(var g=0;b.loggers.length>g;g++)a.logger.addListener(b.loggers[g])}},{}],9:[function(a,b){b.exports={extractId:function(a){return a.replace(/^[a-z-]+:\\/+?[^\\/]+/,"").replace(/[\\?\\&]livereload=\\w+/,"").replace(/^\\//,"").replace(/\\.[a-zA-Z]+$/,"").replace(/[^\\.\\w-]+/g,"-").replace(/\\./g,":")},addDataAttr:function(a,b){for(var c in b.dataset)if(b.dataset.hasOwnProperty(c))if("env"===c||"dumpLineNumbers"===c||"rootpath"===c||"errorReporting"===c)a[c]=b.dataset[c];else try{a[c]=JSON.parse(b.dataset[c])}catch(d){}}}},{}],10:[function(a,b){var c={};b.exports=c;var d=function(a,b,c){if(a)for(var d=0;c.length>d;d++)a.hasOwnProperty(c[d])&&(b[c[d]]=a[c[d]])},e=["paths","relativeUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","reference","pluginManager"];c.Parse=function(a){d(a,this,e),"string"==typeof this.paths&&(this.paths=[this.paths])};var f=["paths","compress","ieCompat","strictMath","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope"];c.Eval=function(a,b){d(a,this,f),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=b||[],this.importantScope=this.importantScope||[]},c.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},c.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},c.Eval.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},c.Eval.prototype.isPathRelative=function(a){return!/^(?:[a-z-]+:|\\/|#)/i.test(a)},c.Eval.prototype.normalizePath=function(a){var b,c=a.split("/").reverse();for(a=[];0!==c.length;)switch(b=c.pop()){case".":break;case"..":0===a.length||".."===a[a.length-1]?a.push(b):a.pop();break;default:a.push(b)}return a.join("/")}},{}],11:[function(a,b){b.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],12:[function(a,b){b.exports={colors:a("./colors"),unitConversions:a("./unit-conversions")}},{"./colors":11,"./unit-conversions":13}],13:[function(a,b){b.exports={length:{m:1,cm:.01,mm:.001,"in":.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],14:[function(a,b){var c=function(){};c.prototype.getPath=function(a){var b=a.lastIndexOf("?");return b>0&&(a=a.slice(0,b)),b=a.lastIndexOf("/"),0>b&&(b=a.lastIndexOf("\\\\")),0>b?"":a.slice(0,b+1)},c.prototype.tryAppendExtension=function(a,b){return/(\\.[a-z]*$)|([\\?;].*)$/.test(a)?a:a+b},c.prototype.tryAppendLessExtension=function(a){return this.tryAppendExtension(a,".less")},c.prototype.supportsSync=function(){return!1},c.prototype.alwaysMakePathsAbsolute=function(){return!1},c.prototype.isPathAbsolute=function(a){return/^(?:[a-z-]+:|\\/|\\\\|#)/i.test(a)},c.prototype.join=function(a,b){return a?a+b:b},c.prototype.pathDiff=function(a,b){var c,d,e,f,g=this.extractUrlParts(a),h=this.extractUrlParts(b),i="";if(g.hostPart!==h.hostPart)return"";for(d=Math.max(h.directories.length,g.directories.length),c=0;d>c&&h.directories[c]===g.directories[c];c++);for(f=h.directories.slice(c),e=g.directories.slice(c),c=0;f.length-1>c;c++)i+="../";for(c=0;e.length-1>c;c++)i+=e[c]+"/";return i},c.prototype.extractUrlParts=function(a,b){var c,d,e=/^((?:[a-z-]+:)?\\/+?(?:[^\\/\\?#]*\\/)|([\\/\\\\]))?((?:[^\\/\\\\\\?#]*[\\/\\\\])*)([^\\/\\\\\\?#]*)([#\\?].*)?$/i,f=a.match(e),g={},h=[];if(!f)throw new Error("Could not parse sheet href - \'"+a+"\'");if(b&&(!f[1]||f[2])){if(d=b.match(e),!d)throw new Error("Could not parse page url - \'"+b+"\'");f[1]=f[1]||d[1]||"",f[2]||(f[3]=d[3]+f[3])}if(f[3]){for(h=f[3].replace(/\\\\/g,"/").split("/"),c=0;h.length>c;c++)"."===h[c]&&(h.splice(c,1),c-=1);for(c=0;h.length>c;c++)".."===h[c]&&c>0&&(h.splice(c-1,2),c-=2)}return g.hostPart=f[1],g.directories=h,g.path=(f[1]||"")+h.join("/"),g.fileUrl=g.path+(f[4]||""),g.url=g.fileUrl+(f[5]||""),g},b.exports=c},{}],15:[function(a,b){var c=a("../logger"),d=function(a,b){this.fileManagers=b||[],a=a||{};for(var c=["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"],d=[],e=d.concat(c),f=0;e.length>f;f++){var g=e[f],h=a[g];h?this[g]=h.bind(a):d.length>f&&this.warn("missing required function in environment - "+g)}};d.prototype.getFileManager=function(a,b,d,e,f){a||c.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==b&&c.warn("getFileManager called with null directory.. Please report this issue. continuing.");var g=this.fileManagers;d.pluginManager&&(g=[].concat(g).concat(d.pluginManager.getFileManagers()));for(var h=g.length-1;h>=0;h--){var i=g[h];if(i[f?"supportsSync":"supports"](a,b,d,e))return i}return null},d.prototype.addFileManager=function(a){this.fileManagers.push(a)},d.prototype.clearFileManagers=function(){this.fileManagers=[]},b.exports=d},{"../logger":31}],16:[function(a){function b(a,b,d){var e,f,g,h,i=b.alpha,j=d.alpha,k=[];g=j+i*(1-j);for(var l=0;3>l;l++)e=b.rgb[l]/255,f=d.rgb[l]/255,h=a(e,f),g&&(h=(j*f+i*(e-j*(e+f-h)))/g),k[l]=255*h;return new c(k,g)}var c=a("../tree/color"),d=a("./function-registry"),e={multiply:function(a,b){return a*b},screen:function(a,b){return a+b-a*b},overlay:function(a,b){return a*=2,1>=a?e.multiply(a,b):e.screen(a-1,b)},softlight:function(a,b){var c=1,d=a;return b>.5&&(d=1,c=a>.25?Math.sqrt(a):((16*a-12)*a+4)*a),a-(1-2*b)*d*(c-a)},hardlight:function(a,b){return e.overlay(b,a)},difference:function(a,b){return Math.abs(a-b)},exclusion:function(a,b){return a+b-2*a*b},average:function(a,b){return(a+b)/2},negation:function(a,b){return 1-Math.abs(a+b-1)}};for(var f in e)e.hasOwnProperty(f)&&(b[f]=b.bind(null,e[f]));d.addMultiple(b)},{"../tree/color":48,"./function-registry":21}],17:[function(a){function b(a){return Math.min(1,Math.max(0,a))}function c(a){return f.hsla(a.h,a.s,a.l,a.a)}function d(a){if(a instanceof g)return parseFloat(a.unit.is("%")?a.value/100:a.value);if("number"==typeof a)return a;throw{type:"Argument",message:"color functions take numbers as parameters"}}function e(a,b){return a instanceof g&&a.unit.is("%")?parseFloat(a.value*b/100):d(a)}var f,g=a("../tree/dimension"),h=a("../tree/color"),i=a("../tree/quoted"),j=a("../tree/anonymous"),k=a("./function-registry");f={rgb:function(a,b,c){return f.rgba(a,b,c,1)},rgba:function(a,b,c,f){var g=[a,b,c].map(function(a){return e(a,255)});return f=d(f),new h(g,f)},hsl:function(a,b,c){return f.hsla(a,b,c,1)},hsla:function(a,c,e,g){function h(a){return a=0>a?a+1:a>1?a-1:a,1>6*a?j+(i-j)*a*6:1>2*a?i:2>3*a?j+(i-j)*(2/3-a)*6:j}a=d(a)%360/360,c=b(d(c)),e=b(d(e)),g=b(d(g));var i=.5>=e?e*(c+1):e+c-e*c,j=2*e-i;return f.rgba(255*h(a+1/3),255*h(a),255*h(a-1/3),g)},hsv:function(a,b,c){return f.hsva(a,b,c,1)},hsva:function(a,b,c,e){a=d(a)%360/360*360,b=d(b),c=d(c),e=d(e);var g,h;g=Math.floor(a/60%6),h=a/60-g;var i=[c,c*(1-b),c*(1-h*b),c*(1-(1-h)*b)],j=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return f.rgba(255*i[j[g][0]],255*i[j[g][1]],255*i[j[g][2]],e)},hue:function(a){return new g(a.toHSL().h)},saturation:function(a){return new g(100*a.toHSL().s,"%")},lightness:function(a){return new g(100*a.toHSL().l,"%")},hsvhue:function(a){return new g(a.toHSV().h)},hsvsaturation:function(a){return new g(100*a.toHSV().s,"%")},hsvvalue:function(a){return new g(100*a.toHSV().v,"%")},red:function(a){return new g(a.rgb[0])},green:function(a){return new g(a.rgb[1])},blue:function(a){return new g(a.rgb[2])},alpha:function(a){return new g(a.toHSL().a)},luma:function(a){return new g(a.luma()*a.alpha*100,"%")},luminance:function(a){var b=.2126*a.rgb[0]/255+.7152*a.rgb[1]/255+.0722*a.rgb[2]/255;return new g(b*a.alpha*100,"%")},saturate:function(a,d,e){if(!a.rgb)return null;var f=a.toHSL();return f.s+="undefined"!=typeof e&&"relative"===e.value?f.s*d.value/100:d.value/100,f.s=b(f.s),c(f)},desaturate:function(a,d,e){var f=a.toHSL();return f.s-="undefined"!=typeof e&&"relative"===e.value?f.s*d.value/100:d.value/100,f.s=b(f.s),c(f)},lighten:function(a,d,e){var f=a.toHSL();return f.l+="undefined"!=typeof e&&"relative"===e.value?f.l*d.value/100:d.value/100,f.l=b(f.l),c(f)},darken:function(a,d,e){var f=a.toHSL();return f.l-="undefined"!=typeof e&&"relative"===e.value?f.l*d.value/100:d.value/100,f.l=b(f.l),c(f)},fadein:function(a,d,e){var f=a.toHSL();return f.a+="undefined"!=typeof e&&"relative"===e.value?f.a*d.value/100:d.value/100,f.a=b(f.a),c(f)},fadeout:function(a,d,e){var f=a.toHSL();return f.a-="undefined"!=typeof e&&"relative"===e.value?f.a*d.value/100:d.value/100,f.a=b(f.a),c(f)},fade:function(a,d){var e=a.toHSL();return e.a=d.value/100,e.a=b(e.a),c(e)},spin:function(a,b){var d=a.toHSL(),e=(d.h+b.value)%360;return d.h=0>e?360+e:e,c(d)},mix:function(a,b,c){a.toHSL&&b.toHSL||(console.log(b.type),console.dir(b)),c||(c=new g(50));var d=c.value/100,e=2*d-1,f=a.toHSL().a-b.toHSL().a,i=((e*f==-1?e:(e+f)/(1+e*f))+1)/2,j=1-i,k=[a.rgb[0]*i+b.rgb[0]*j,a.rgb[1]*i+b.rgb[1]*j,a.rgb[2]*i+b.rgb[2]*j],l=a.alpha*d+b.alpha*(1-d);return new h(k,l)},greyscale:function(a){return f.desaturate(a,new g(100))},contrast:function(a,b,c,e){if(!a.rgb)return null;if("undefined"==typeof c&&(c=f.rgba(255,255,255,1)),"undefined"==typeof b&&(b=f.rgba(0,0,0,1)),b.luma()>c.luma()){var g=c;c=b,b=g}return e="undefined"==typeof e?.43:d(e),a.luma()<e?c:b},argb:function(a){return new j(a.toARGB())},color:function(a){if(a instanceof i&&/^#([a-f0-9]{6}|[a-f0-9]{3})$/i.test(a.value))return new h(a.value.slice(1));if(a instanceof h||(a=h.fromKeyword(a.value)))return a.value=void 0,a;throw{type:"Argument",message:"argument must be a color keyword or 3/6 digit hex e.g. #FFF"}},tint:function(a,b){return f.mix(f.rgb(255,255,255),a,b)},shade:function(a,b){return f.mix(f.rgb(0,0,0),a,b)}},k.addMultiple(f)},{"../tree/anonymous":44,"../tree/color":48,"../tree/dimension":54,"../tree/quoted":71,"./function-registry":21}],18:[function(a,b){b.exports=function(b){var c=a("../tree/quoted"),d=a("../tree/url"),e=a("./function-registry"),f=function(a,b){return new d(b,a.index,a.currentFileInfo).eval(a.context)},g=a("../logger");e.add("data-uri",function(a,e){e||(e=a,a=null);var h=a&&a.value,i=e.value,j=this.currentFileInfo,k=j.relativeUrls?j.currentDirectory:j.entryPath,l=i.indexOf("#"),m="";-1!==l&&(m=i.slice(l),i=i.slice(0,l));var n=b.getFileManager(i,k,this.context,b,!0);if(!n)return f(this,e);var o=!1;if(a)o=/;base64$/.test(h);else{if(h=b.mimeLookup(i),"image/svg+xml"===h)o=!1;else{var p=b.charsetLookup(h);o=["US-ASCII","UTF-8"].indexOf(p)<0}o&&(h+=";base64")}var q=n.loadFileSync(i,k,this.context,b);if(!q.contents)return g.warn("Skipped data-uri embedding of "+i+" because file not found"),f(this,e||a);var r=q.contents;if(o&&!b.encodeBase64)return f(this,e);r=o?b.encodeBase64(r):encodeURIComponent(r);var s="data:"+h+","+r+m,t=32768;return s.length>=t&&this.context.ieCompat!==!1?(g.warn("Skipped data-uri embedding of "+i+" because its size ("+s.length+" characters) exceeds IE8-safe "+t+" characters!"),f(this,e||a)):new d(new c(\'"\'+s+\'"\',s,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../logger":31,"../tree/quoted":71,"../tree/url":78,"./function-registry":21}],19:[function(a,b){var c=a("../tree/keyword"),d=a("./function-registry"),e={eval:function(){var a=this.value_,b=this.error_;if(b)throw b;return null!=a?a?c.True:c.False:void 0},value:function(a){this.value_=a},error:function(a){this.error_=a},reset:function(){this.value_=this.error_=null}};d.add("default",e.eval.bind(e)),b.exports=e},{"../tree/keyword":63,"./function-registry":21}],20:[function(a,b){var c=a("../tree/expression"),d=function(a,b,c,d){this.name=a.toLowerCase(),this.index=c,this.context=b,this.currentFileInfo=d,this.func=b.frames[0].functionRegistry.get(this.name)};d.prototype.isValid=function(){return Boolean(this.func)},d.prototype.call=function(a){return Array.isArray(a)&&(a=a.filter(function(a){return"Comment"===a.type?!1:!0}).map(function(a){if("Expression"===a.type){var b=a.value.filter(function(a){return"Comment"===a.type?!1:!0});return 1===b.length?b[0]:new c(b)}return a})),this.func.apply(this,a)},b.exports=d},{"../tree/expression":57}],21:[function(a,b){function c(a){return{_data:{},add:function(a,b){a=a.toLowerCase(),this._data.hasOwnProperty(a),this._data[a]=b},addMultiple:function(a){Object.keys(a).forEach(function(b){this.add(b,a[b])}.bind(this))},get:function(b){return this._data[b]||a&&a.get(b)},inherit:function(){return c(this)}}}b.exports=c(null)},{}],22:[function(a,b){b.exports=function(b){var c={functionRegistry:a("./function-registry"),functionCaller:a("./function-caller")};return a("./default"),a("./color"),a("./color-blending"),a("./data-uri")(b),a("./math"),a("./number"),a("./string"),a("./svg")(b),a("./types"),c}},{"./color":17,"./color-blending":16,"./data-uri":18,"./default":19,"./function-caller":20,"./function-registry":21,"./math":23,"./number":24,"./string":25,"./svg":26,"./types":27}],23:[function(a){function b(a,b,d){if(!(d instanceof c))throw{type:"Argument",message:"argument must be a number"};return null==b?b=d.unit:d=d.unify(),new c(a(parseFloat(d.value)),b)}var c=a("../tree/dimension"),d=a("./function-registry"),e={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var f in e)e.hasOwnProperty(f)&&(e[f]=b.bind(null,Math[f],e[f]));e.round=function(a,c){var d="undefined"==typeof c?0:c.value;return b(function(a){return a.toFixed(d)},null,a)},d.addMultiple(e)},{"../tree/dimension":54,"./function-registry":21}],24:[function(a){var b=a("../tree/dimension"),c=a("../tree/anonymous"),d=a("./function-registry"),e=function(a,d){switch(d=Array.prototype.slice.call(d),d.length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var e,f,g,h,i,j,k,l,m=[],n={};for(e=0;d.length>e;e++)if(g=d[e],g instanceof b)if(h=""===g.unit.toString()&&void 0!==l?new b(g.value,l).unify():g.unify(),j=""===h.unit.toString()&&void 0!==k?k:h.unit.toString(),k=""!==j&&void 0===k||""!==j&&""===m[0].unify().unit.toString()?j:k,l=""!==j&&void 0===l?g.unit.toString():l,f=void 0!==n[""]&&""!==j&&j===k?n[""]:n[j],void 0!==f)i=""===m[f].unit.toString()&&void 0!==l?new b(m[f].value,l).unify():m[f].unify(),(a&&i.value>h.value||!a&&h.value>i.value)&&(m[f]=g);else{if(void 0!==k&&j!==k)throw{type:"Argument",message:"incompatible types"};n[j]=m.length,m.push(g)}else Array.isArray(d[e].value)&&Array.prototype.push.apply(d,Array.prototype.slice.call(d[e].value));return 1==m.length?m[0]:(d=m.map(function(a){return a.toCSS(this.context)}).join(this.context.compress?",":", "),new c((a?"min":"max")+"("+d+")"))};d.addMultiple({min:function(){return e(!0,arguments)},max:function(){return e(!1,arguments)},convert:function(a,b){return a.convertTo(b.value)},pi:function(){return new b(Math.PI)},mod:function(a,c){return new b(a.value%c.value,a.unit)},pow:function(a,c){if("number"==typeof a&&"number"==typeof c)a=new b(a),c=new b(c);else if(!(a instanceof b&&c instanceof b))throw{type:"Argument",message:"arguments must be numbers"};return new b(Math.pow(a.value,c.value),a.unit)},percentage:function(a){return new b(100*a.value,"%")}})},{"../tree/anonymous":44,"../tree/dimension":54,"./function-registry":21}],25:[function(a){var b=a("../tree/quoted"),c=a("../tree/anonymous"),d=a("../tree/javascript"),e=a("./function-registry");e.addMultiple({e:function(a){return new c(a instanceof d?a.evaluated:a.value)},escape:function(a){return new c(encodeURI(a.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\\(/g,"%28").replace(/\\)/g,"%29"))},replace:function(a,c,d,e){var f=a.value;return d="Quoted"===d.type?d.value:d.toCSS(),f=f.replace(new RegExp(c.value,e?e.value:""),d),new b(a.quote||"",f,a.escaped)},"%":function(a){for(var c=Array.prototype.slice.call(arguments,1),d=a.value,e=0;c.length>e;e++)d=d.replace(/%[sda]/i,function(a){var b="Quoted"===c[e].type&&a.match(/s/i)?c[e].value:c[e].toCSS();return a.match(/[A-Z]$/)?encodeURIComponent(b):b});return d=d.replace(/%%/g,"%"),new b(a.quote||"",d,a.escaped)}})},{"../tree/anonymous":44,"../tree/javascript":61,"../tree/quoted":71,"./function-registry":21}],26:[function(a,b){b.exports=function(){var b=a("../tree/dimension"),c=a("../tree/color"),d=a("../tree/expression"),e=a("../tree/quoted"),f=a("../tree/url"),g=a("./function-registry");g.add("svg-gradient",function(a){function g(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}var h,i,j,k,l,m,n,o,p="linear",q=\'x="0" y="0" width="1" height="1"\',r={compress:!1},s=a.toCSS(r);switch(2==arguments.length?(arguments[1].value.length<2&&g(),h=arguments[1].value):arguments.length<3?g():h=Array.prototype.slice.call(arguments,1),s){case"to bottom":i=\'x1="0%" y1="0%" x2="0%" y2="100%"\';break;case"to right":i=\'x1="0%" y1="0%" x2="100%" y2="0%"\';break;case"to bottom right":i=\'x1="0%" y1="0%" x2="100%" y2="100%"\';break;case"to top right":i=\'x1="0%" y1="100%" x2="100%" y2="0%"\';break;case"ellipse":case"ellipse at center":p="radial",i=\'cx="50%" cy="50%" r="75%"\',q=\'x="-50" y="-50" width="101" height="101"\';break;default:throw{type:"Argument",message:"svg-gradient direction must be \'to bottom\', \'to right\', \'to bottom right\', \'to top right\' or \'ellipse at center\'"}}for(j=\'<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><\'+p+\'Gradient id="gradient" gradientUnits="userSpaceOnUse" \'+i+">",\nk=0;h.length>k;k+=1)h[k]instanceof d?(l=h[k].value[0],m=h[k].value[1]):(l=h[k],m=void 0),l instanceof c&&((0===k||k+1===h.length)&&void 0===m||m instanceof b)||g(),n=m?m.toCSS(r):0===k?"0%":"100%",o=l.alpha,j+=\'<stop offset="\'+n+\'" stop-color="\'+l.toRGB()+\'"\'+(1>o?\' stop-opacity="\'+o+\'"\':"")+"/>";return j+="</"+p+"Gradient><rect "+q+\' fill="url(#gradient)" /></svg>\',j=encodeURIComponent(j),j="data:image/svg+xml,"+j,new f(new e("\'"+j+"\'",j,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../tree/color":48,"../tree/dimension":54,"../tree/expression":57,"../tree/quoted":71,"../tree/url":78,"./function-registry":21}],27:[function(a){var b=a("../tree/keyword"),c=a("../tree/detached-ruleset"),d=a("../tree/dimension"),e=a("../tree/color"),f=a("../tree/quoted"),g=a("../tree/anonymous"),h=a("../tree/url"),i=a("../tree/operation"),j=a("./function-registry"),k=function(a,c){return a instanceof c?b.True:b.False},l=function(a,c){if(void 0===c)throw{type:"Argument",message:"missing the required second argument to isunit."};if(c="string"==typeof c.value?c.value:c,"string"!=typeof c)throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return a instanceof d&&a.unit.is(c)?b.True:b.False},m=function(a){var b=Array.isArray(a.value)?a.value:Array(a);return b};j.addMultiple({isruleset:function(a){return k(a,c)},iscolor:function(a){return k(a,e)},isnumber:function(a){return k(a,d)},isstring:function(a){return k(a,f)},iskeyword:function(a){return k(a,b)},isurl:function(a){return k(a,h)},ispixel:function(a){return l(a,"px")},ispercentage:function(a){return l(a,"%")},isem:function(a){return l(a,"em")},isunit:l,unit:function(a,c){if(!(a instanceof d))throw{type:"Argument",message:"the first argument to unit must be a number"+(a instanceof i?". Have you forgotten parenthesis?":"")};return c=c?c instanceof b?c.value:c.toCSS():"",new d(a.value,c)},"get-unit":function(a){return new g(a.unit)},extract:function(a,b){return b=b.value-1,m(a)[b]},length:function(a){return new d(m(a).length)}})},{"../tree/anonymous":44,"../tree/color":48,"../tree/detached-ruleset":53,"../tree/dimension":54,"../tree/keyword":63,"../tree/operation":69,"../tree/quoted":71,"../tree/url":78,"./function-registry":21}],28:[function(a,b){var c=a("./contexts"),d=a("./parser/parser"),e=a("./plugins/function-importer");b.exports=function(a){var b=function(a,b){this.rootFilename=b.filename,this.paths=a.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=a.mime,this.error=null,this.context=a,this.queue=[],this.files={}};return b.prototype.push=function(b,f,g,h,i){var j=this;this.queue.push(b);var k=function(a,c,d){j.queue.splice(j.queue.indexOf(b),1);var e=d===j.rootFilename;h.optional&&a?i(null,{rules:[]},!1,null):(j.files[d]=c,a&&!j.error&&(j.error=a),i(a,c,e,d))},l={relativeUrls:this.context.relativeUrls,entryPath:g.entryPath,rootpath:g.rootpath,rootFilename:g.rootFilename},m=a.getFileManager(b,g.currentDirectory,this.context,a);if(!m)return void k({message:"Could not find a file-manager for "+b});f&&(b=m.tryAppendExtension(b,h.plugin?".js":".less"));var n=function(a){var b=a.filename,f=a.contents.replace(/^\\uFEFF/,"");l.currentDirectory=m.getPath(b),l.relativeUrls&&(l.rootpath=m.join(j.context.rootpath||"",m.pathDiff(l.currentDirectory,l.entryPath)),!m.isPathAbsolute(l.rootpath)&&m.alwaysMakePathsAbsolute()&&(l.rootpath=m.join(l.entryPath,l.rootpath))),l.filename=b;var i=new c.Parse(j.context);i.processImports=!1,j.contents[b]=f,(g.reference||h.reference)&&(l.reference=!0),h.plugin?new e(i,l).eval(f,function(a,c){k(a,c,b)}):h.inline?k(null,f,b):new d(i,j,l).parse(f,function(a,c){k(a,c,b)})},o=m.loadFile(b,g.currentDirectory,this.context,a,function(a,b){a?k(a):n(b)});o&&o.then(n,k)},b}},{"./contexts":10,"./parser/parser":36,"./plugins/function-importer":38}],29:[function(a,b){b.exports=function(b,c){var d,e,f,g,h,i={version:[2,5,1],data:a("./data"),tree:a("./tree"),Environment:h=a("./environment/environment"),AbstractFileManager:a("./environment/abstract-file-manager"),environment:b=new h(b,c),visitors:a("./visitors"),Parser:a("./parser/parser"),functions:a("./functions")(b),contexts:a("./contexts"),SourceMapOutput:d=a("./source-map-output")(b),SourceMapBuilder:e=a("./source-map-builder")(d,b),ParseTree:f=a("./parse-tree")(e),ImportManager:g=a("./import-manager")(b),render:a("./render")(b,f,g),parse:a("./parse")(b,f,g),LessError:a("./less-error"),transformTree:a("./transform-tree"),utils:a("./utils"),PluginManager:a("./plugin-manager"),logger:a("./logger")};return i}},{"./contexts":10,"./data":12,"./environment/abstract-file-manager":14,"./environment/environment":15,"./functions":22,"./import-manager":28,"./less-error":30,"./logger":31,"./parse":33,"./parse-tree":32,"./parser/parser":36,"./plugin-manager":37,"./render":39,"./source-map-builder":40,"./source-map-output":41,"./transform-tree":42,"./tree":60,"./utils":81,"./visitors":85}],30:[function(a,b){var c=a("./utils"),d=b.exports=function(a,b,d){Error.call(this);var e=a.filename||d;if(b&&e){var f=b.contents[e],g=c.getLocation(a.index,f),h=g.line,i=g.column,j=a.call&&c.getLocation(a.call,f).line,k=f.split("\\n");this.type=a.type||"Syntax",this.filename=e,this.index=a.index,this.line="number"==typeof h?h+1:null,this.callLine=j+1,this.callExtract=k[j],this.column=i,this.extract=[k[h-1],k[h],k[h+1]]}this.message=a.message,this.stack=a.stack};if("undefined"==typeof Object.create){var e=function(){};e.prototype=Error.prototype,d.prototype=new e}else d.prototype=Object.create(Error.prototype);d.prototype.constructor=d},{"./utils":81}],31:[function(a,b){b.exports={error:function(a){this._fireEvent("error",a)},warn:function(a){this._fireEvent("warn",a)},info:function(a){this._fireEvent("info",a)},debug:function(a){this._fireEvent("debug",a)},addListener:function(a){this._listeners.push(a)},removeListener:function(a){for(var b=0;this._listeners.length>b;b++)if(this._listeners[b]===a)return void this._listeners.splice(b,1)},_fireEvent:function(a,b){for(var c=0;this._listeners.length>c;c++){var d=this._listeners[c][a];d&&d(b)}},_listeners:[]}},{}],32:[function(a,b){var c=a("./less-error"),d=a("./transform-tree"),e=a("./logger");b.exports=function(a){var b=function(a,b){this.root=a,this.imports=b};return b.prototype.toCSS=function(b){var f,g,h={};try{f=d(this.root,b)}catch(i){throw new c(i,this.imports)}try{var j=Boolean(b.compress);j&&e.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var k={compress:j,dumpLineNumbers:b.dumpLineNumbers,strictUnits:Boolean(b.strictUnits),numPrecision:8};b.sourceMap?(g=new a(b.sourceMap),h.css=g.toCSS(f,k,this.imports)):h.css=f.toCSS(k)}catch(i){throw new c(i,this.imports)}if(b.pluginManager)for(var l=b.pluginManager.getPostProcessors(),m=0;l.length>m;m++)h.css=l[m].process(h.css,{sourceMap:g,options:b,imports:this.imports});b.sourceMap&&(h.map=g.getExternalSourceMap()),h.imports=[];for(var n in this.imports.files)this.imports.files.hasOwnProperty(n)&&n!==this.imports.rootFilename&&h.imports.push(n);return h},b}},{"./less-error":30,"./logger":31,"./transform-tree":42}],33:[function(a,b){var c,d=a("./contexts"),e=a("./parser/parser"),f=a("./plugin-manager");b.exports=function(b,g,h){var i=function(b,g,j){if(g=g||{},"function"==typeof g&&(j=g,g={}),!j){c||(c="undefined"==typeof Promise?a("promise"):Promise);var k=this;return new c(function(a,c){i.call(k,b,g,function(b,d){b?c(b):a(d)})})}var l,m,n=new f(this);if(n.addPlugins(g.plugins),g.pluginManager=n,l=new d.Parse(g),g.rootFileInfo)m=g.rootFileInfo;else{var o=g.filename||"input",p=o.replace(/[^\\/\\\\]*$/,"");m={filename:o,relativeUrls:l.relativeUrls,rootpath:l.rootpath||"",currentDirectory:p,entryPath:p,rootFilename:o},m.rootpath&&"/"!==m.rootpath.slice(-1)&&(m.rootpath+="/")}var q=new h(l,m);new e(l,q,m).parse(b,function(a,b){return a?j(a):void j(null,b,q,g)},g)};return i}},{"./contexts":10,"./parser/parser":36,"./plugin-manager":37,promise:void 0}],34:[function(a,b){b.exports=function(a,b){function c(b){var c=h-q;512>c&&!b||!c||(p.push(a.slice(q,h+1)),q=h+1)}var d,e,f,g,h,i,j,k,l,m=a.length,n=0,o=0,p=[],q=0;for(h=0;m>h;h++)if(j=a.charCodeAt(h),!(j>=97&&122>=j||34>j))switch(j){case 40:o++,e=h;continue;case 41:if(--o<0)return b("missing opening `(`",h);continue;case 59:o||c();continue;case 123:n++,d=h;continue;case 125:if(--n<0)return b("missing opening `{`",h);n||o||c();continue;case 92:if(m-1>h){h++;continue}return b("unescaped `\\\\`",h);case 34:case 39:case 96:for(l=0,i=h,h+=1;m>h;h++)if(k=a.charCodeAt(h),!(k>96)){if(k==j){l=1;break}if(92==k){if(h==m-1)return b("unescaped `\\\\`",h);h++}}if(l)continue;return b("unmatched `"+String.fromCharCode(j)+"`",i);case 47:if(o||h==m-1)continue;if(k=a.charCodeAt(h+1),47==k)for(h+=2;m>h&&(k=a.charCodeAt(h),!(13>=k)||10!=k&&13!=k);h++);else if(42==k){for(f=i=h,h+=2;m-1>h&&(k=a.charCodeAt(h),125==k&&(g=h),42!=k||47!=a.charCodeAt(h+1));h++);if(h==m-1)return b("missing closing `*/`",i);h++}continue;case 42:if(m-1>h&&47==a.charCodeAt(h+1))return b("unmatched `/*`",h);continue}return 0!==n?f>d&&g>f?b("missing closing `}` or `*/`",d):b("missing closing `}`",d):0!==o?b("missing closing `)`",e):(c(!0),p)}},{}],35:[function(a,b){var c=a("./chunker");b.exports=function(){var a,b,d,e,f,g,h,i=[],j={};j.save=function(){h=j.i,i.push({current:g,i:j.i,j:b})},j.restore=function(a){(j.i>d||j.i===d&&a&&!e)&&(d=j.i,e=a);var c=i.pop();g=c.current,h=j.i=c.i,b=c.j},j.forget=function(){i.pop()},j.isWhitespace=function(b){var c=j.i+(b||0),d=a.charCodeAt(c);return d===k||d===n||d===l||d===m},j.$re=function(a){j.i>h&&(g=g.slice(j.i-h),h=j.i);var b=a.exec(g);return b?(s(b[0].length),"string"==typeof b?b:1===b.length?b[0]:b):null},j.$char=function(b){return a.charAt(j.i)!==b?null:(s(1),b)},j.$str=function(b){for(var c=b.length,d=0;c>d;d++)if(a.charAt(j.i+d)!==b.charAt(d))return null;return s(c),b},j.$quoted=function(){var b=a.charAt(j.i);if("\'"===b||\'"\'===b){for(var c=a.length,d=j.i,e=1;c>e+d;e++){var f=a.charAt(e+d);switch(f){case"\\\\":e++;continue;case"\\r":case"\\n":break;case b:var g=a.substr(d,e+1);return s(e+1),g}}return null}};var k=32,l=9,m=10,n=13,o=43,p=44,q=47,r=57;j.autoCommentAbsorb=!0,j.commentStore=[],j.finished=!1;var s=function(c){for(var d,e,i,o=j.i,p=b,r=j.i-h,t=j.i+g.length-r,u=j.i+=c,v=a;t>j.i;j.i++){if(d=v.charCodeAt(j.i),j.autoCommentAbsorb&&d===q){if(e=v.charAt(j.i+1),"/"===e){i={index:j.i,isLineComment:!0};var w=v.indexOf("\\n",j.i+2);0>w&&(w=t),j.i=w,i.text=v.substr(i.i,j.i-i.i),j.commentStore.push(i);continue}if("*"===e){var x=v.indexOf("*/",j.i+2);if(x>=0){i={index:j.i,text:v.substr(j.i,x+2-j.i),isLineComment:!1},j.i+=i.text.length-1,j.commentStore.push(i);continue}}break}if(d!==k&&d!==m&&d!==l&&d!==n)break}if(g=g.slice(c+j.i-u+r),h=j.i,!g.length){if(f.length-1>b)return g=f[++b],s(0),!0;j.finished=!0}return o!==j.i||p!==b};return j.peek=function(b){if("string"==typeof b){for(var c=0;b.length>c;c++)if(a.charAt(j.i+c)!==b.charAt(c))return!1;return!0}return b.test(g)},j.peekChar=function(b){return a.charAt(j.i)===b},j.currentChar=function(){return a.charAt(j.i)},j.getInput=function(){return a},j.peekNotNumeric=function(){var b=a.charCodeAt(j.i);return b>r||o>b||b===q||b===p},j.start=function(e,i,k){a=e,j.i=b=h=d=0,f=i?c(e,k):[e],g=f[0],s(0)},j.end=function(){var b,c=j.i>=a.length;return d>j.i&&(b=e,j.i=d),{isFinished:c,furthest:j.i,furthestPossibleErrorMessage:b,furthestReachedEnd:j.i>=a.length-1,furthestChar:a[j.i]}},j}},{"./chunker":34}],36:[function(a,b){var c=a("../less-error"),d=a("../tree"),e=a("../visitors"),f=a("./parser-input"),g=a("../utils"),h=function i(a,b,h){function j(a,b){var c="[object Function]"===Object.prototype.toString.call(a)?a.call(n):o.$re(a);return c?c:void l(b||("string"==typeof a?"expected \'"+a+"\' got \'"+o.currentChar()+"\'":"unexpected token"))}function k(a,b){return o.$char(a)?a:void l(b||"expected \'"+a+"\' got \'"+o.currentChar()+"\'")}function l(a,d){throw new c({index:o.i,filename:h.filename,type:d||"Syntax",message:a},b)}function m(a){var b=h.filename;return{lineNumber:g.getLocation(a,o.getInput()).line+1,fileName:b}}var n,o=f();return{parse:function(f,g,j){var k,l,m,n,p=null,q="";if(l=j&&j.globalVars?i.serializeVars(j.globalVars)+"\\n":"",m=j&&j.modifyVars?"\\n"+i.serializeVars(j.modifyVars):"",a.pluginManager)for(var r=a.pluginManager.getPreProcessors(),s=0;r.length>s;s++)f=r[s].process(f,{context:a,imports:b,fileInfo:h});(l||j&&j.banner)&&(q=(j&&j.banner?j.banner:"")+l,n=b.contentsIgnoredChars,n[h.filename]=n[h.filename]||0,n[h.filename]+=q.length),f=f.replace(/\\r\\n?/g,"\\n"),f=q+f.replace(/^\\uFEFF/,"")+m,b.contents[h.filename]=f;try{o.start(f,a.chunkInput,function(a,d){throw new c({index:d,type:"Parse",message:a,filename:h.filename},b)}),k=new d.Ruleset(null,this.parsers.primary()),k.root=!0,k.firstRoot=!0}catch(t){return g(new c(t,b,h.filename))}var u=o.end();if(!u.isFinished){var v=u.furthestPossibleErrorMessage;v||(v="Unrecognised input","}"===u.furthestChar?v+=". Possibly missing opening \'{\'":")"===u.furthestChar?v+=". Possibly missing opening \'(\'":u.furthestReachedEnd&&(v+=". Possibly missing something")),p=new c({type:"Parse",message:v,index:u.furthest,filename:h.filename},b)}var w=function(a){return a=p||a||b.error,a?(a instanceof c||(a=new c(a,b,h.filename)),g(a)):g(null,k)};return a.processImports===!1?w():void new e.ImportVisitor(b,w).run(k)},parsers:n={primary:function(){for(var a,b=this.mixin,c=[];;){for(;;){if(a=this.comment(),!a)break;c.push(a)}if(o.finished)break;if(o.peek("}"))break;if(a=this.extendRule())c=c.concat(a);else if(a=b.definition()||this.rule()||this.ruleset()||b.call()||this.rulesetCall()||this.directive())c.push(a);else{for(var d=!1;o.$char(";");)d=!0;if(!d)break}}return c},comment:function(){if(o.commentStore.length){var a=o.commentStore.shift();return new d.Comment(a.text,a.isLineComment,a.index,h)}},entities:{quoted:function(){var a,b=o.i,c=!1;return o.save(),o.$char("~")&&(c=!0),(a=o.$quoted())?(o.forget(),new d.Quoted(a.charAt(0),a.substr(1,a.length-2),c,b,h)):void o.restore()},keyword:function(){var a=o.$char("%")||o.$re(/^[_A-Za-z-][_A-Za-z0-9-]*/);return a?d.Color.fromKeyword(a)||new d.Keyword(a):void 0},call:function(){var a,b,c,e,f=o.i;if(!o.peek(/^url\\(/i))return o.save(),(a=o.$re(/^([\\w-]+|%|progid:[\\w\\.]+)\\(/))?(a=a[1],b=a.toLowerCase(),"alpha"===b&&(e=n.alpha())?(o.forget(),e):(c=this.arguments(),o.$char(")")?(o.forget(),new d.Call(a,c,f,h)):void o.restore("Could not parse call arguments or missing \')\'"))):void o.forget()},arguments:function(){for(var a,b=[];;){if(a=this.assignment()||n.expression(),!a)break;if(b.push(a),!o.$char(","))break}return b},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var a,b;return o.save(),(a=o.$re(/^\\w+(?=\\s?=)/i))&&o.$char("=")&&(b=n.entity())?(o.forget(),new d.Assignment(a,b)):void o.restore()},url:function(){var a,b=o.i;return o.autoCommentAbsorb=!1,o.$str("url(")?(a=this.quoted()||this.variable()||o.$re(/^(?:(?:\\\\[\\(\\)\'"])|[^\\(\\)\'"])+/)||"",o.autoCommentAbsorb=!0,k(")"),new d.URL(null!=a.value||a instanceof d.Variable?a:new d.Anonymous(a),b,h)):void(o.autoCommentAbsorb=!0)},variable:function(){var a,b=o.i;return"@"===o.currentChar()&&(a=o.$re(/^@@?[\\w-]+/))?new d.Variable(a,b,h):void 0},variableCurly:function(){var a,b=o.i;return"@"===o.currentChar()&&(a=o.$re(/^@\\{([\\w-]+)\\}/))?new d.Variable("@"+a[1],b,h):void 0},color:function(){var a;if("#"===o.currentChar()&&(a=o.$re(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))){var b=a.input.match(/^#([\\w]+).*/);return b=b[1],b.match(/^[A-Fa-f0-9]+$/)||l("Invalid HEX color code"),new d.Color(a[1])}},dimension:function(){if(!o.peekNotNumeric()){var a=o.$re(/^([+-]?\\d*\\.?\\d+)(%|[a-z]+)?/i);return a?new d.Dimension(a[1],a[2]):void 0}},unicodeDescriptor:function(){var a;return a=o.$re(/^U\\+[0-9a-fA-F?]+(\\-[0-9a-fA-F?]+)?/),a?new d.UnicodeDescriptor(a[0]):void 0},javascript:function(){var a,b=o.i;o.save();var c=o.$char("~"),e=o.$char("`");return e?(a=o.$re(/^[^`]*`/))?(o.forget(),new d.JavaScript(a.substr(0,a.length-1),Boolean(c),b,h)):void o.restore("invalid javascript definition"):void o.restore()}},variable:function(){var a;return"@"===o.currentChar()&&(a=o.$re(/^(@[\\w-]+)\\s*:/))?a[1]:void 0},rulesetCall:function(){var a;return"@"===o.currentChar()&&(a=o.$re(/^(@[\\w-]+)\\s*\\(\\s*\\)\\s*;/))?new d.RulesetCall(a[1]):void 0},extend:function(a){var b,c,e,f,g,h=o.i;if(o.$str(a?"&:extend(":":extend(")){do{for(e=null,b=null;!(e=o.$re(/^(all)(?=\\s*(\\)|,))/))&&(c=this.element());)b?b.push(c):b=[c];e=e&&e[1],b||l("Missing target selector for :extend()."),g=new d.Extend(new d.Selector(b),e,h),f?f.push(g):f=[g]}while(o.$char(","));return j(/^\\)/),a&&j(/^;/),f}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var a,b,c,e,f,g,i=o.currentChar(),j=!1,l=o.i;if("."===i||"#"===i){for(o.save();;){if(a=o.i,e=o.$re(/^[#.](?:[\\w-]|\\\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/),!e)break;c=new d.Element(f,e,a,h),b?b.push(c):b=[c],f=o.$char(">")}return b&&(o.$char("(")&&(g=this.args(!0).args,k(")")),n.important()&&(j=!0),n.end())?(o.forget(),new d.mixin.Call(b,g,l,h,j)):void o.restore()}},args:function(a){var b,c,e,f,g,h,i=n.entities,j={args:null,variadic:!1},k=[],m=[],p=[];for(o.save();;){if(a)h=n.detachedRuleset()||n.expression();else{if(o.commentStore.length=0,o.$str("...")){j.variadic=!0,o.$char(";")&&!b&&(b=!0),(b?m:p).push({variadic:!0});break}h=i.variable()||i.literal()||i.keyword()}if(!h)break;f=null,h.throwAwayComments&&h.throwAwayComments(),g=h;var q=null;if(a?h.value&&1==h.value.length&&(q=h.value[0]):q=h,q&&q instanceof d.Variable)if(o.$char(":")){if(k.length>0&&(b&&l("Cannot mix ; and , as delimiter types"),c=!0),g=n.detachedRuleset()||n.expression(),!g){if(!a)return o.restore(),j.args=[],j;l("could not understand value for named argument")}f=e=q.name}else{if(!a&&o.$str("...")){j.variadic=!0,o.$char(";")&&!b&&(b=!0),(b?m:p).push({name:h.name,variadic:!0});break}a||(e=f=q.name,g=null)}g&&k.push(g),p.push({name:f,value:g}),o.$char(",")||(o.$char(";")||b)&&(c&&l("Cannot mix ; and , as delimiter types"),b=!0,k.length>1&&(g=new d.Value(k)),m.push({name:e,value:g}),e=null,k=[],c=!1)}return o.forget(),j.args=b?m:p,j},definition:function(){var a,b,c,e,f=[],g=!1;if(!("."!==o.currentChar()&&"#"!==o.currentChar()||o.peek(/^[^{]*\\}/)))if(o.save(),b=o.$re(/^([#.](?:[\\w-]|\\\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\\s*\\(/)){a=b[1];var h=this.args(!1);if(f=h.args,g=h.variadic,!o.$char(")"))return void o.restore("Missing closing \')\'");if(o.commentStore.length=0,o.$str("when")&&(e=j(n.conditions,"expected condition")),c=n.block())return o.forget(),new d.mixin.Definition(a,f,c,e,g);o.restore()}else o.forget()}},entity:function(){var a=this.entities;return this.comment()||a.literal()||a.variable()||a.url()||a.call()||a.keyword()||a.javascript()},end:function(){return o.$char(";")||o.peek("}")},alpha:function(){var a;if(o.$re(/^opacity=/i))return a=o.$re(/^\\d+/),a||(a=j(this.entities.variable,"Could not parse alpha")),k(")"),new d.Alpha(a)},element:function(){var a,b,c,e=o.i;return b=this.combinator(),a=o.$re(/^(?:\\d+\\.\\d+|\\d+)%/)||o.$re(/^(?:[.#]?|:*)(?:[\\w-]|[^\\x00-\\x9f]|\\\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||o.$char("*")||o.$char("&")||this.attribute()||o.$re(/^\\([^&()@]+\\)/)||o.$re(/^[\\.#:](?=@)/)||this.entities.variableCurly(),a||(o.save(),o.$char("(")?(c=this.selector())&&o.$char(")")?(a=new d.Paren(c),o.forget()):o.restore("Missing closing \')\'"):o.forget()),a?new d.Element(b,a,e,h):void 0},combinator:function(){var a=o.currentChar();if("/"===a){o.save();var b=o.$re(/^\\/[a-z]+\\//i);if(b)return o.forget(),new d.Combinator(b);o.restore()}if(">"===a||"+"===a||"~"===a||"|"===a||"^"===a){for(o.i++,"^"===a&&"^"===o.currentChar()&&(a="^^",o.i++);o.isWhitespace();)o.i++;return new d.Combinator(a)}return new d.Combinator(o.isWhitespace(-1)?" ":null)},lessSelector:function(){return this.selector(!0)},selector:function(a){for(var b,c,e,f,g,i,k,m=o.i;(a&&(c=this.extend())||a&&(i=o.$str("when"))||(f=this.element()))&&(i?k=j(this.conditions,"expected condition"):k?l("CSS guard can only be used at the end of selector"):c?g=g?g.concat(c):c:(g&&l("Extend can only be used at the end of selector"),e=o.currentChar(),b?b.push(f):b=[f],f=null),"{"!==e&&"}"!==e&&";"!==e&&","!==e&&")"!==e););return b?new d.Selector(b,g,k,m,h):void(g&&l("Extend must be used to extend a selector, it cannot be used on its own"))},attribute:function(){if(o.$char("[")){var a,b,c,e=this.entities;return(a=e.variableCurly())||(a=j(/^(?:[_A-Za-z0-9-\\*]*\\|)?(?:[_A-Za-z0-9-]|\\\\.)+/)),c=o.$re(/^[|~*$^]?=/),c&&(b=e.quoted()||o.$re(/^[0-9]+%/)||o.$re(/^[\\w-]+/)||e.variableCurly()),k("]"),new d.Attribute(a,c,b)}},block:function(){var a;return o.$char("{")&&(a=this.primary())&&o.$char("}")?a:void 0},blockRuleset:function(){var a=this.block();return a&&(a=new d.Ruleset(null,a)),a},detachedRuleset:function(){var a=this.blockRuleset();return a?new d.DetachedRuleset(a):void 0},ruleset:function(){var b,c,e,f;for(o.save(),a.dumpLineNumbers&&(f=m(o.i));;){if(c=this.lessSelector(),!c)break;if(b?b.push(c):b=[c],o.commentStore.length=0,c.condition&&b.length>1&&l("Guards are only currently allowed on a single selector."),!o.$char(","))break;c.condition&&l("Guards are only currently allowed on a single selector."),o.commentStore.length=0}if(b&&(e=this.block())){o.forget();var g=new d.Ruleset(b,e,a.strictImports);return a.dumpLineNumbers&&(g.debugInfo=f),g}o.restore()},rule:function(b){var c,e,f,g,i,j=o.i,k=o.currentChar();if("."!==k&&"#"!==k&&"&"!==k&&":"!==k)if(o.save(),c=this.variable()||this.ruleProperty()){if(i="string"==typeof c,i&&(e=this.detachedRuleset()),o.commentStore.length=0,!e){g=!i&&c.length>1&&c.pop().value;var l=!b&&(a.compress||i);if(l&&(e=this.value()),!e&&(e=this.anonymousValue()))return o.forget(),new d.Rule(c,e,!1,g,j,h);l||e||(e=this.value()),f=this.important()}if(e&&this.end())return o.forget(),new d.Rule(c,e,f,g,j,h);if(o.restore(),e&&!b)return this.rule(!0)}else o.forget()},anonymousValue:function(){var a=o.$re(/^([^@+\\/\'"*`(;{}-]*);/);return a?new d.Anonymous(a[1]):void 0},"import":function(){var a,b,c=o.i,e=o.$re(/^@import?\\s+/);if(e){var f=(e?this.importOptions():null)||{};if(a=this.entities.quoted()||this.entities.url())return b=this.mediaFeatures(),o.$char(";")||(o.i=c,l("missing semi-colon or unrecognised media features on import")),b=b&&new d.Value(b),new d.Import(a,b,f,c,h);o.i=c,l("malformed import statement")}},importOptions:function(){var a,b,c,d={};if(!o.$char("("))return null;do if(a=this.importOption()){switch(b=a,c=!0,b){case"css":b="less",c=!1;break;case"once":b="multiple",c=!1}if(d[b]=c,!o.$char(","))break}while(a);return k(")"),d},importOption:function(){var a=o.$re(/^(less|css|multiple|once|inline|reference|optional)/);return a?a[1]:void 0},mediaFeature:function(){var a,b,c=this.entities,e=[];o.save();do if(a=c.keyword()||c.variable())e.push(a);else if(o.$char("(")){if(b=this.property(),a=this.value(),!o.$char(")"))return o.restore("Missing closing \')\'"),null;if(b&&a)e.push(new d.Paren(new d.Rule(b,a,null,null,o.i,h,!0)));else{if(!a)return o.restore("badly formed media feature definition"),null;e.push(new d.Paren(a))}}while(a);return o.forget(),e.length>0?new d.Expression(e):void 0},mediaFeatures:function(){var a,b=this.entities,c=[];do if(a=this.mediaFeature()){if(c.push(a),!o.$char(","))break}else if(a=b.variable(),a&&(c.push(a),!o.$char(",")))break;while(a);return c.length>0?c:null},media:function(){var b,c,e,f;return a.dumpLineNumbers&&(f=m(o.i)),o.save(),o.$str("@media")?(b=this.mediaFeatures(),(c=this.block())?(o.forget(),e=new d.Media(c,b,o.i,h),a.dumpLineNumbers&&(e.debugInfo=f),e):void o.restore("media definitions require block statements after any features")):void o.restore()},plugin:function(){var a,b=o.i,c=o.$re(/^@plugin?\\s+/);if(c){var e={plugin:!0};if(a=this.entities.quoted()||this.entities.url())return o.$char(";")||(o.i=b,l("missing semi-colon on plugin")),new d.Import(a,null,e,b,h);o.i=b,l("malformed plugin statement")}},directive:function(){var b,c,e,f,g,i,j,k=o.i,n=!0,p=!0;if("@"===o.currentChar()){if(c=this["import"]()||this.plugin()||this.media())return c;if(o.save(),b=o.$re(/^@[a-z-]+/)){switch(f=b,"-"==b.charAt(1)&&b.indexOf("-",2)>0&&(f="@"+b.slice(b.indexOf("-",2)+1)),f){case"@counter-style":g=!0,n=!0;break;case"@charset":g=!0,n=!1;break;case"@namespace":i=!0,n=!1;break;case"@keyframes":g=!0;break;case"@host":case"@page":j=!0;break;case"@document":case"@supports":j=!0,p=!1}return o.commentStore.length=0,g?(c=this.entity(),c||l("expected "+b+" identifier")):i?(c=this.expression(),c||l("expected "+b+" expression")):j&&(c=(o.$re(/^[^{;]+/)||"").trim(),c&&(c=new d.Anonymous(c))),n&&(e=this.blockRuleset()),e||!n&&c&&o.$char(";")?(o.forget(),new d.Directive(b,c,e,k,h,a.dumpLineNumbers?m(k):null,!1,p)):void o.restore("directive options not recognised")}}},value:function(){var a,b=[];do if(a=this.expression(),a&&(b.push(a),!o.$char(",")))break;while(a);return b.length>0?new d.Value(b):void 0},important:function(){return"!"===o.currentChar()?o.$re(/^! *important/):void 0},sub:function(){var a,b;return o.save(),o.$char("(")?(a=this.addition(),a&&o.$char(")")?(o.forget(),b=new d.Expression([a]),b.parens=!0,b):void o.restore("Expected \')\'")):void o.restore()},multiplication:function(){var a,b,c,e,f;if(a=this.operand()){for(f=o.isWhitespace(-1);;){if(o.peek(/^\\/[*\\/]/))break;if(o.save(),c=o.$char("/")||o.$char("*"),!c){o.forget();break}if(b=this.operand(),!b){o.restore();break}o.forget(),a.parensInOp=!0,b.parensInOp=!0,e=new d.Operation(c,[e||a,b],f),f=o.isWhitespace(-1)}return e||a}},addition:function(){var a,b,c,e,f;if(a=this.multiplication()){for(f=o.isWhitespace(-1);;){if(c=o.$re(/^[-+]\\s+/)||!f&&(o.$char("+")||o.$char("-")),!c)break;if(b=this.multiplication(),!b)break;a.parensInOp=!0,b.parensInOp=!0,e=new d.Operation(c,[e||a,b],f),f=o.isWhitespace(-1)}return e||a}},conditions:function(){var a,b,c,e=o.i;if(a=this.condition()){for(;;){if(!o.peek(/^,\\s*(not\\s*)?\\(/)||!o.$char(","))break;if(b=this.condition(),!b)break;c=new d.Condition("or",c||a,b,e)}return c||a}},condition:function(){var a,b,c,e,f=this.entities,g=o.i,h=!1;return o.$str("not")&&(h=!0),k("("),a=this.addition()||f.keyword()||f.quoted(),a?(o.$char(">")?e=o.$char("=")?">=":">":o.$char("<")?e=o.$char("=")?"<=":"<":o.$char("=")&&(e=o.$char(">")?"=>":o.$char("<")?"=<":"="),e?(b=this.addition()||f.keyword()||f.quoted(),b?c=new d.Condition(e,a,b,g,h):l("expected expression")):c=new d.Condition("=",a,new d.Keyword("true"),g,h),k(")"),o.$str("and")?new d.Condition("and",c,this.condition()):c):void 0},operand:function(){var a,b=this.entities;o.peek(/^-[@\\(]/)&&(a=o.$char("-"));var c=this.sub()||b.dimension()||b.color()||b.variable()||b.call();return a&&(c.parensInOp=!0,c=new d.Negative(c)),c},expression:function(){var a,b,c=[];do a=this.comment(),a?c.push(a):(a=this.addition()||this.entity(),a&&(c.push(a),o.peek(/^\\/[\\/*]/)||(b=o.$char("/"),b&&c.push(new d.Anonymous(b)))));while(a);return c.length>0?new d.Expression(c):void 0},property:function(){var a=o.$re(/^(\\*?-?[_a-zA-Z0-9-]+)\\s*:/);return a?a[1]:void 0},ruleProperty:function(){function a(a){var b=o.i,c=o.$re(a);return c?(f.push(b),e.push(c[1])):void 0}var b,c,e=[],f=[];o.save();var g=o.$re(/^([_a-zA-Z0-9-]+)\\s*:/);if(g)return e=[new d.Keyword(g[1])],o.forget(),e;for(a(/^(\\*?)/);;)if(!a(/^((?:[\\w-]+)|(?:@\\{[\\w-]+\\}))/))break;if(e.length>1&&a(/^((?:\\+_|\\+)?)\\s*:/)){for(o.forget(),""===e[0]&&(e.shift(),f.shift()),c=0;e.length>c;c++)b=e[c],e[c]="@"!==b.charAt(0)?new d.Keyword(b):new d.Variable("@"+b.slice(2,-1),f[c],h);return e}o.restore()}}}};h.serializeVars=function(a){var b="";for(var c in a)if(Object.hasOwnProperty.call(a,c)){var d=a[c];b+=("@"===c[0]?"":"@")+c+": "+d+(";"===String(d).slice(-1)?"":";")}return b},b.exports=h},{"../less-error":30,"../tree":60,"../utils":81,"../visitors":85,"./parser-input":35}],37:[function(a,b){var c=function(a){this.less=a,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[]};c.prototype.addPlugins=function(a){if(a)for(var b=0;a.length>b;b++)this.addPlugin(a[b])},c.prototype.addPlugin=function(a){this.installedPlugins.push(a),a.install(this.less,this)},c.prototype.addVisitor=function(a){this.visitors.push(a)},c.prototype.addPreProcessor=function(a,b){var c;for(c=0;this.preProcessors.length>c&&!(this.preProcessors[c].priority>=b);c++);this.preProcessors.splice(c,0,{preProcessor:a,priority:b})},c.prototype.addPostProcessor=function(a,b){var c;for(c=0;this.postProcessors.length>c&&!(this.postProcessors[c].priority>=b);c++);this.postProcessors.splice(c,0,{postProcessor:a,priority:b})},c.prototype.addFileManager=function(a){this.fileManagers.push(a)},c.prototype.getPreProcessors=function(){for(var a=[],b=0;this.preProcessors.length>b;b++)a.push(this.preProcessors[b].preProcessor);return a},c.prototype.getPostProcessors=function(){for(var a=[],b=0;this.postProcessors.length>b;b++)a.push(this.postProcessors[b].postProcessor);return a},c.prototype.getVisitors=function(){return this.visitors},c.prototype.getFileManagers=function(){return this.fileManagers},b.exports=c},{}],38:[function(a,b){var c=a("../less-error"),d=a("../tree"),e=b.exports=function(a,b){this.fileInfo=b};e.prototype.eval=function(a,b){var e,f,g={};f={add:function(a,b){g[a]=b},addMultiple:function(a){Object.keys(a).forEach(function(b){g[b]=a[b]})}};try{e=new Function("functions","tree","fileInfo",a),e(f,d,this.fileInfo)}catch(h){b(new c({message:"Plugin evaluation error: \'"+h.name+": "+h.message.replace(/["]/g,"\'")+"\'",filename:this.fileInfo.filename}),null)}b(null,{functions:g})}},{"../less-error":30,"../tree":60}],39:[function(a,b){var c;b.exports=function(b,d){var e=function(b,f,g){if("function"==typeof f&&(g=f,f={}),!g){c||(c="undefined"==typeof Promise?a("promise"):Promise);var h=this;return new c(function(a,c){e.call(h,b,f,function(b,d){b?c(b):a(d)})})}this.parse(b,f,function(a,b,c,e){if(a)return g(a);var f;try{var h=new d(b,c);f=h.toCSS(e)}catch(a){return g(a)}g(null,f)})};return e}},{promise:void 0}],40:[function(a,b){b.exports=function(a,b){var c=function(a){this.options=a};return c.prototype.toCSS=function(b,c,d){var e=new a({contentsIgnoredCharsMap:d.contentsIgnoredChars,rootNode:b,contentsMap:d.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),f=e.toCSS(c);return this.sourceMap=e.sourceMap,this.sourceMapURL=e.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=e.normalizeFilename(this.options.sourceMapInputFilename)),f+this.getCSSAppendage()},c.prototype.getCSSAppendage=function(){var a=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";a="data:application/json;base64,"+b.encodeBase64(this.sourceMap)}return a?"/*# sourceMappingURL="+a+" */":""},c.prototype.getExternalSourceMap=function(){return this.sourceMap},c.prototype.setExternalSourceMap=function(a){this.sourceMap=a},c.prototype.isInline=function(){return this.options.sourceMapFileInline},c.prototype.getSourceMapURL=function(){return this.sourceMapURL},c.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename},c.prototype.getInputFilename=function(){return this.sourceMapInputFilename},c}},{}],41:[function(a,b){b.exports=function(a){var b=function(b){this._css=[],this._rootNode=b.rootNode,this._contentsMap=b.contentsMap,this._contentsIgnoredCharsMap=b.contentsIgnoredCharsMap,b.sourceMapFilename&&(this._sourceMapFilename=b.sourceMapFilename.replace(/\\\\/g,"/")),this._outputFilename=b.outputFilename,this.sourceMapURL=b.sourceMapURL,b.sourceMapBasepath&&(this._sourceMapBasepath=b.sourceMapBasepath.replace(/\\\\/g,"/")),\nb.sourceMapRootpath?(this._sourceMapRootpath=b.sourceMapRootpath.replace(/\\\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=b.outputSourceFiles,this._sourceMapGeneratorConstructor=a.getSourceMapGenerator(),this._lineNumber=0,this._column=0};return b.prototype.normalizeFilename=function(a){return a=a.replace(/\\\\/g,"/"),this._sourceMapBasepath&&0===a.indexOf(this._sourceMapBasepath)&&(a=a.substring(this._sourceMapBasepath.length),("\\\\"===a.charAt(0)||"/"===a.charAt(0))&&(a=a.substring(1))),(this._sourceMapRootpath||"")+a},b.prototype.add=function(a,b,c,d){if(a){var e,f,g,h,i;if(b){var j=this._contentsMap[b.filename];this._contentsIgnoredCharsMap[b.filename]&&(c-=this._contentsIgnoredCharsMap[b.filename],0>c&&(c=0),j=j.slice(this._contentsIgnoredCharsMap[b.filename])),j=j.substring(0,c),f=j.split("\\n"),h=f[f.length-1]}if(e=a.split("\\n"),g=e[e.length-1],b)if(d)for(i=0;e.length>i;i++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+i+1,column:0===i?this._column:0},original:{line:f.length+i,column:0===i?h.length:0},source:this.normalizeFilename(b.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:f.length,column:h.length},source:this.normalizeFilename(b.filename)});1===e.length?this._column+=g.length:(this._lineNumber+=e.length-1,this._column=g.length),this._css.push(a)}},b.prototype.isEmpty=function(){return 0===this._css.length},b.prototype.toCSS=function(a){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var b in this._contentsMap)if(this._contentsMap.hasOwnProperty(b)){var c=this._contentsMap[b];this._contentsIgnoredCharsMap[b]&&(c=c.slice(this._contentsIgnoredCharsMap[b])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(b),c)}if(this._rootNode.genCSS(a,this),this._css.length>0){var d,e=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?d=this.sourceMapURL:this._sourceMapFilename&&(d=this._sourceMapFilename),this.sourceMapURL=d,this.sourceMap=e}return this._css.join("")},b}},{}],42:[function(a,b){var c=a("./contexts"),d=a("./visitors"),e=a("./tree");b.exports=function(a,b){b=b||{};var f,g=b.variables,h=new c.Eval(b);"object"!=typeof g||Array.isArray(g)||(g=Object.keys(g).map(function(a){var b=g[a];return b instanceof e.Value||(b instanceof e.Expression||(b=new e.Expression([b])),b=new e.Value([b])),new e.Rule("@"+a,b,!1,null,0)}),h.frames=[new e.Ruleset(null,g)]);var i,j=[],k=[new d.JoinSelectorVisitor,new d.ExtendVisitor,new d.ToCSSVisitor({compress:Boolean(b.compress)})];if(b.pluginManager){var l=b.pluginManager.getVisitors();for(i=0;l.length>i;i++){var m=l[i];m.isPreEvalVisitor?j.push(m):m.isPreVisitor?k.splice(0,0,m):k.push(m)}}for(i=0;j.length>i;i++)j[i].run(a);for(f=a.eval(h),i=0;k.length>i;i++)k[i].run(f);return f}},{"./contexts":10,"./tree":60,"./visitors":85}],43:[function(a,b){var c=a("./node"),d=function(a){this.value=a};d.prototype=new c,d.prototype.type="Alpha",d.prototype.accept=function(a){this.value=a.visit(this.value)},d.prototype.eval=function(a){return this.value.eval?new d(this.value.eval(a)):this},d.prototype.genCSS=function(a,b){b.add("alpha(opacity="),this.value.genCSS?this.value.genCSS(a,b):b.add(this.value),b.add(")")},b.exports=d},{"./node":68}],44:[function(a,b){var c=a("./node"),d=function(a,b,c,d,e){this.value=a,this.index=b,this.mapLines=d,this.currentFileInfo=c,this.rulesetLike="undefined"==typeof e?!1:e};d.prototype=new c,d.prototype.type="Anonymous",d.prototype.eval=function(){return new d(this.value,this.index,this.currentFileInfo,this.mapLines,this.rulesetLike)},d.prototype.compare=function(a){return a.toCSS&&this.toCSS()===a.toCSS()?0:void 0},d.prototype.isRulesetLike=function(){return this.rulesetLike},d.prototype.genCSS=function(a,b){b.add(this.value,this.currentFileInfo,this.index,this.mapLines)},b.exports=d},{"./node":68}],45:[function(a,b){var c=a("./node"),d=function(a,b){this.key=a,this.value=b};d.prototype=new c,d.prototype.type="Assignment",d.prototype.accept=function(a){this.value=a.visit(this.value)},d.prototype.eval=function(a){return this.value.eval?new d(this.key,this.value.eval(a)):this},d.prototype.genCSS=function(a,b){b.add(this.key+"="),this.value.genCSS?this.value.genCSS(a,b):b.add(this.value)},b.exports=d},{"./node":68}],46:[function(a,b){var c=a("./node"),d=function(a,b,c){this.key=a,this.op=b,this.value=c};d.prototype=new c,d.prototype.type="Attribute",d.prototype.eval=function(a){return new d(this.key.eval?this.key.eval(a):this.key,this.op,this.value&&this.value.eval?this.value.eval(a):this.value)},d.prototype.genCSS=function(a,b){b.add(this.toCSS(a))},d.prototype.toCSS=function(a){var b=this.key.toCSS?this.key.toCSS(a):this.key;return this.op&&(b+=this.op,b+=this.value.toCSS?this.value.toCSS(a):this.value),"["+b+"]"},b.exports=d},{"./node":68}],47:[function(a,b){var c=a("./node"),d=a("../functions/function-caller"),e=function(a,b,c,d){this.name=a,this.args=b,this.index=c,this.currentFileInfo=d};e.prototype=new c,e.prototype.type="Call",e.prototype.accept=function(a){this.args&&(this.args=a.visitArray(this.args))},e.prototype.eval=function(a){var b,c=this.args.map(function(b){return b.eval(a)}),f=new d(this.name,a,this.index,this.currentFileInfo);if(f.isValid())try{if(b=f.call(c),null!=b)return b}catch(g){throw{type:g.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(g.message?": "+g.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new e(this.name,c,this.index,this.currentFileInfo)},e.prototype.genCSS=function(a,b){b.add(this.name+"(",this.currentFileInfo,this.index);for(var c=0;this.args.length>c;c++)this.args[c].genCSS(a,b),this.args.length>c+1&&b.add(", ");b.add(")")},b.exports=e},{"../functions/function-caller":20,"./node":68}],48:[function(a,b){function c(a,b){return Math.min(Math.max(a,0),b)}function d(a){return"#"+a.map(function(a){return a=c(Math.round(a),255),(16>a?"0":"")+a.toString(16)}).join("")}var e=a("./node"),f=a("../data/colors"),g=function(a,b){this.rgb=Array.isArray(a)?a:6==a.length?a.match(/.{2}/g).map(function(a){return parseInt(a,16)}):a.split("").map(function(a){return parseInt(a+a,16)}),this.alpha="number"==typeof b?b:1};g.prototype=new e,g.prototype.type="Color",g.prototype.luma=function(){var a=this.rgb[0]/255,b=this.rgb[1]/255,c=this.rgb[2]/255;return a=.03928>=a?a/12.92:Math.pow((a+.055)/1.055,2.4),b=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4),c=.03928>=c?c/12.92:Math.pow((c+.055)/1.055,2.4),.2126*a+.7152*b+.0722*c},g.prototype.genCSS=function(a,b){b.add(this.toCSS(a))},g.prototype.toCSS=function(a,b){var d,e,f=a&&a.compress&&!b;if(this.value)return this.value;if(e=this.fround(a,this.alpha),1>e)return"rgba("+this.rgb.map(function(a){return c(Math.round(a),255)}).concat(c(e,1)).join(","+(f?"":" "))+")";if(d=this.toRGB(),f){var g=d.split("");g[1]===g[2]&&g[3]===g[4]&&g[5]===g[6]&&(d="#"+g[1]+g[3]+g[5])}return d},g.prototype.operate=function(a,b,c){for(var d=[],e=this.alpha*(1-c.alpha)+c.alpha,f=0;3>f;f++)d[f]=this._operate(a,b,this.rgb[f],c.rgb[f]);return new g(d,e)},g.prototype.toRGB=function(){return d(this.rgb)},g.prototype.toHSL=function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=(g+h)/2,j=g-h;if(g===h)a=b=0;else{switch(b=i>.5?j/(2-g-h):j/(g+h),g){case c:a=(d-e)/j+(e>d?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,l:i,a:f}},g.prototype.toHSV=function(){var a,b,c=this.rgb[0]/255,d=this.rgb[1]/255,e=this.rgb[2]/255,f=this.alpha,g=Math.max(c,d,e),h=Math.min(c,d,e),i=g,j=g-h;if(b=0===g?0:j/g,g===h)a=0;else{switch(g){case c:a=(d-e)/j+(e>d?6:0);break;case d:a=(e-c)/j+2;break;case e:a=(c-d)/j+4}a/=6}return{h:360*a,s:b,v:i,a:f}},g.prototype.toARGB=function(){return d([255*this.alpha].concat(this.rgb))},g.prototype.compare=function(a){return a.rgb&&a.rgb[0]===this.rgb[0]&&a.rgb[1]===this.rgb[1]&&a.rgb[2]===this.rgb[2]&&a.alpha===this.alpha?0:void 0},g.fromKeyword=function(a){var b,c=a.toLowerCase();return f.hasOwnProperty(c)?b=new g(f[c].slice(1)):"transparent"===c&&(b=new g([0,0,0],0)),b?(b.value=a,b):void 0},b.exports=g},{"../data/colors":11,"./node":68}],49:[function(a,b){var c=a("./node"),d=function(a){" "===a?(this.value=" ",this.emptyOrWhitespace=!0):(this.value=a?a.trim():"",this.emptyOrWhitespace=""===this.value)};d.prototype=new c,d.prototype.type="Combinator";var e={"":!0," ":!0,"|":!0};d.prototype.genCSS=function(a,b){var c=a.compress||e[this.value]?"":" ";b.add(c+this.value+c)},b.exports=d},{"./node":68}],50:[function(a,b){var c=a("./node"),d=a("./debug-info"),e=function(a,b,c,d){this.value=a,this.isLineComment=b,this.currentFileInfo=d};e.prototype=new c,e.prototype.type="Comment",e.prototype.genCSS=function(a,b){this.debugInfo&&b.add(d(a,this),this.currentFileInfo,this.index),b.add(this.value)},e.prototype.isSilent=function(a){var b=this.currentFileInfo&&this.currentFileInfo.reference&&!this.isReferenced,c=a.compress&&"!"!==this.value[2];return this.isLineComment||b||c},e.prototype.markReferenced=function(){this.isReferenced=!0},b.exports=e},{"./debug-info":52,"./node":68}],51:[function(a,b){var c=a("./node"),d=function(a,b,c,d,e){this.op=a.trim(),this.lvalue=b,this.rvalue=c,this.index=d,this.negate=e};d.prototype=new c,d.prototype.type="Condition",d.prototype.accept=function(a){this.lvalue=a.visit(this.lvalue),this.rvalue=a.visit(this.rvalue)},d.prototype.eval=function(a){var b=function(a,b,d){switch(a){case"and":return b&&d;case"or":return b||d;default:switch(c.compare(b,d)){case-1:return"<"===a||"=<"===a||"<="===a;case 0:return"="===a||">="===a||"=<"===a||"<="===a;case 1:return">"===a||">="===a;default:return!1}}}(this.op,this.lvalue.eval(a),this.rvalue.eval(a));return this.negate?!b:b},b.exports=d},{"./node":68}],52:[function(a,b){var c=function(a,b,d){var e="";if(a.dumpLineNumbers&&!a.compress)switch(a.dumpLineNumbers){case"comments":e=c.asComment(b);break;case"mediaquery":e=c.asMediaQuery(b);break;case"all":e=c.asComment(b)+(d||"")+c.asMediaQuery(b)}return e};c.asComment=function(a){return"/* line "+a.debugInfo.lineNumber+", "+a.debugInfo.fileName+" */\\n"},c.asMediaQuery=function(a){var b=a.debugInfo.fileName;return/^[a-z]+:\\/\\//i.test(b)||(b="file://"+b),"@media -sass-debug-info{filename{font-family:"+b.replace(/([.:\\/\\\\])/g,function(a){return"\\\\"==a&&(a="/"),"\\\\"+a})+"}line{font-family:\\\\00003"+a.debugInfo.lineNumber+"}}\\n"},b.exports=c},{}],53:[function(a,b){var c=a("./node"),d=a("../contexts"),e=function(a,b){this.ruleset=a,this.frames=b};e.prototype=new c,e.prototype.type="DetachedRuleset",e.prototype.evalFirst=!0,e.prototype.accept=function(a){this.ruleset=a.visit(this.ruleset)},e.prototype.eval=function(a){var b=this.frames||a.frames.slice(0);return new e(this.ruleset,b)},e.prototype.callEval=function(a){return this.ruleset.eval(this.frames?new d.Eval(a,this.frames.concat(a.frames)):a)},b.exports=e},{"../contexts":10,"./node":68}],54:[function(a,b){var c=a("./node"),d=a("../data/unit-conversions"),e=a("./unit"),f=a("./color"),g=function(a,b){this.value=parseFloat(a),this.unit=b&&b instanceof e?b:new e(b?[b]:void 0)};g.prototype=new c,g.prototype.type="Dimension",g.prototype.accept=function(a){this.unit=a.visit(this.unit)},g.prototype.eval=function(){return this},g.prototype.toColor=function(){return new f([this.value,this.value,this.value])},g.prototype.genCSS=function(a,b){if(a&&a.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var c=this.fround(a,this.value),d=String(c);if(0!==c&&1e-6>c&&c>-1e-6&&(d=c.toFixed(20).replace(/0+$/,"")),a&&a.compress){if(0===c&&this.unit.isLength())return void b.add(d);c>0&&1>c&&(d=d.substr(1))}b.add(d),this.unit.genCSS(a,b)},g.prototype.operate=function(a,b,c){var d=this._operate(a,b,this.value,c.value),e=this.unit.clone();if("+"===b||"-"===b)if(0===e.numerator.length&&0===e.denominator.length)e=c.unit.clone(),this.unit.backupUnit&&(e.backupUnit=this.unit.backupUnit);else if(0===c.unit.numerator.length&&0===e.denominator.length);else{if(c=c.convertTo(this.unit.usedUnits()),a.strictUnits&&c.unit.toString()!==e.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: \'"+e.toString()+"\' and \'"+c.unit.toString()+"\'.");d=this._operate(a,b,this.value,c.value)}else"*"===b?(e.numerator=e.numerator.concat(c.unit.numerator).sort(),e.denominator=e.denominator.concat(c.unit.denominator).sort(),e.cancel()):"/"===b&&(e.numerator=e.numerator.concat(c.unit.denominator).sort(),e.denominator=e.denominator.concat(c.unit.numerator).sort(),e.cancel());return new g(d,e)},g.prototype.compare=function(a){var b,d;if(!(a instanceof g))return void 0;if(this.unit.isEmpty()||a.unit.isEmpty())b=this,d=a;else if(b=this.unify(),d=a.unify(),0!==b.unit.compare(d.unit))return void 0;return c.numericCompare(b.value,d.value)},g.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},g.prototype.convertTo=function(a){var b,c,e,f,h,i=this.value,j=this.unit.clone(),k={};if("string"==typeof a){for(b in d)d[b].hasOwnProperty(a)&&(k={},k[b]=a);a=k}h=function(a,b){return e.hasOwnProperty(a)?(b?i/=e[a]/e[f]:i*=e[a]/e[f],f):a};for(c in a)a.hasOwnProperty(c)&&(f=a[c],e=d[c],j.map(h));return j.cancel(),new g(i,j)},b.exports=g},{"../data/unit-conversions":13,"./color":48,"./node":68,"./unit":77}],55:[function(a,b){var c=a("./node"),d=a("./selector"),e=a("./ruleset"),f=function(a,b,c,e,f,g,h,i){var j;if(this.name=a,this.value=b,c)for(Array.isArray(c)?this.rules=c:(this.rules=[c],this.rules[0].selectors=new d([],null,null,this.index,f).createEmptySelectors()),j=0;this.rules.length>j;j++)this.rules[j].allowImports=!0;this.index=e,this.currentFileInfo=f,this.debugInfo=g,this.isReferenced=h,this.isRooted=i||!1};f.prototype=new c,f.prototype.type="Directive",f.prototype.accept=function(a){var b=this.value,c=this.rules;c&&(this.rules=a.visitArray(c)),b&&(this.value=a.visit(b))},f.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},f.prototype.isCharset=function(){return"@charset"===this.name},f.prototype.genCSS=function(a,b){var c=this.value,d=this.rules;b.add(this.name,this.currentFileInfo,this.index),c&&(b.add(" "),c.genCSS(a,b)),d?this.outputRuleset(a,b,d):b.add(";")},f.prototype.eval=function(a){var b,c,d=this.value,e=this.rules;return b=a.mediaPath,c=a.mediaBlocks,a.mediaPath=[],a.mediaBlocks=[],d&&(d=d.eval(a)),e&&(e=[e[0].eval(a)],e[0].root=!0),a.mediaPath=b,a.mediaBlocks=c,new f(this.name,d,e,this.index,this.currentFileInfo,this.debugInfo,this.isReferenced,this.isRooted)},f.prototype.variable=function(a){return this.rules?e.prototype.variable.call(this.rules[0],a):void 0},f.prototype.find=function(){return this.rules?e.prototype.find.apply(this.rules[0],arguments):void 0},f.prototype.rulesets=function(){return this.rules?e.prototype.rulesets.apply(this.rules[0]):void 0},f.prototype.markReferenced=function(){var a,b;if(this.isReferenced=!0,this.rules)for(b=this.rules,a=0;b.length>a;a++)b[a].markReferenced&&b[a].markReferenced()},f.prototype.getIsReferenced=function(){return!this.currentFileInfo||!this.currentFileInfo.reference||this.isReferenced},f.prototype.outputRuleset=function(a,b,c){var d,e=c.length;if(a.tabLevel=(0|a.tabLevel)+1,a.compress){for(b.add("{"),d=0;e>d;d++)c[d].genCSS(a,b);return b.add("}"),void a.tabLevel--}var f="\\n"+Array(a.tabLevel).join("  "),g=f+"  ";if(e){for(b.add(" {"+g),c[0].genCSS(a,b),d=1;e>d;d++)b.add(g),c[d].genCSS(a,b);b.add(f+"}")}else b.add(" {"+f+"}");a.tabLevel--},b.exports=f},{"./node":68,"./ruleset":74,"./selector":75}],56:[function(a,b){var c=a("./node"),d=a("./paren"),e=a("./combinator"),f=function(a,b,c,d){this.combinator=a instanceof e?a:new e(a),this.value="string"==typeof b?b.trim():b?b:"",this.index=c,this.currentFileInfo=d};f.prototype=new c,f.prototype.type="Element",f.prototype.accept=function(a){var b=this.value;this.combinator=a.visit(this.combinator),"object"==typeof b&&(this.value=a.visit(b))},f.prototype.eval=function(a){return new f(this.combinator,this.value.eval?this.value.eval(a):this.value,this.index,this.currentFileInfo)},f.prototype.genCSS=function(a,b){b.add(this.toCSS(a),this.currentFileInfo,this.index)},f.prototype.toCSS=function(a){a=a||{};var b=this.value,c=a.firstSelector;return b instanceof d&&(a.firstSelector=!0),b=b.toCSS?b.toCSS(a):b,a.firstSelector=c,""===b&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(a)+b},b.exports=f},{"./combinator":49,"./node":68,"./paren":70}],57:[function(a,b){var c=a("./node"),d=a("./paren"),e=a("./comment"),f=function(a){if(this.value=a,!a)throw new Error("Expression requires an array parameter")};f.prototype=new c,f.prototype.type="Expression",f.prototype.accept=function(a){this.value=a.visitArray(this.value)},f.prototype.eval=function(a){var b,c=this.parens&&!this.parensInOp,e=!1;return c&&a.inParenthesis(),this.value.length>1?b=new f(this.value.map(function(b){return b.eval(a)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(e=!0),b=this.value[0].eval(a)):b=this,c&&a.outOfParenthesis(),this.parens&&this.parensInOp&&!a.isMathOn()&&!e&&(b=new d(b)),b},f.prototype.genCSS=function(a,b){for(var c=0;this.value.length>c;c++)this.value[c].genCSS(a,b),this.value.length>c+1&&b.add(" ")},f.prototype.throwAwayComments=function(){this.value=this.value.filter(function(a){return!(a instanceof e)})},b.exports=f},{"./comment":50,"./node":68,"./paren":70}],58:[function(a,b){var c=a("./node"),d=function e(a,b,c){switch(this.selector=a,this.option=b,this.index=c,this.object_id=e.next_id++,this.parent_ids=[this.object_id],b){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}};d.next_id=0,d.prototype=new c,d.prototype.type="Extend",d.prototype.accept=function(a){this.selector=a.visit(this.selector)},d.prototype.eval=function(a){return new d(this.selector.eval(a),this.option,this.index)},d.prototype.clone=function(){return new d(this.selector,this.option,this.index)},d.prototype.findSelfSelectors=function(a){var b,c,d=[];for(b=0;a.length>b;b++)c=a[b].elements,b>0&&c.length&&""===c[0].combinator.value&&(c[0].combinator.value=" "),d=d.concat(a[b].elements);this.selfSelectors=[{elements:d}]},b.exports=d},{"./node":68}],59:[function(a,b){var c=a("./node"),d=a("./media"),e=a("./url"),f=a("./quoted"),g=a("./ruleset"),h=a("./anonymous"),i=function(a,b,c,d,e){if(this.options=c,this.index=d,this.path=a,this.features=b,this.currentFileInfo=e,void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var f=this.getPath();f&&/[#\\.\\&\\?\\/]css([\\?;].*)?$/.test(f)&&(this.css=!0)}};i.prototype=new c,i.prototype.type="Import",i.prototype.accept=function(a){this.features&&(this.features=a.visit(this.features)),this.path=a.visit(this.path),this.options.plugin||this.options.inline||!this.root||(this.root=a.visit(this.root))},i.prototype.genCSS=function(a,b){this.css&&void 0===this.path.currentFileInfo.reference&&(b.add("@import ",this.currentFileInfo,this.index),this.path.genCSS(a,b),this.features&&(b.add(" "),this.features.genCSS(a,b)),b.add(";"))},i.prototype.getPath=function(){return this.path instanceof e?this.path.value.value:this.path.value},i.prototype.isVariableImport=function(){var a=this.path;return a instanceof e&&(a=a.value),a instanceof f?a.containsVariables():!0},i.prototype.evalForImport=function(a){var b=this.path;return b instanceof e&&(b=b.value),new i(b.eval(a),this.features,this.options,this.index,this.currentFileInfo)},i.prototype.evalPath=function(a){var b=this.path.eval(a),c=this.currentFileInfo&&this.currentFileInfo.rootpath;if(!(b instanceof e)){if(c){var d=b.value;d&&a.isPathRelative(d)&&(b.value=c+d)}b.value=a.normalizePath(b.value)}return b},i.prototype.eval=function(a){var b,c,e=this.features&&this.features.eval(a);if(this.options.plugin)return c=a.frames[0]&&a.frames[0].functionRegistry,c&&this.root&&this.root.functions&&c.addMultiple(this.root.functions),[];if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var f=new h(this.root,0,{filename:this.importedFilename},!0,!0);return this.features?new d([f],this.features.value):[f]}if(this.css){var j=new i(this.evalPath(a),e,this.options,this.index);if(!j.css&&this.error)throw this.error;return j}return b=new g(null,this.root.rules.slice(0)),b.evalImports(a),this.features?new d(b.rules,this.features.value):b.rules},b.exports=i},{"./anonymous":44,"./media":64,"./node":68,"./quoted":71,"./ruleset":74,"./url":78}],60:[function(a,b){var c={};c.Node=a("./node"),c.Alpha=a("./alpha"),c.Color=a("./color"),c.Directive=a("./directive"),c.DetachedRuleset=a("./detached-ruleset"),c.Operation=a("./operation"),c.Dimension=a("./dimension"),c.Unit=a("./unit"),c.Keyword=a("./keyword"),c.Variable=a("./variable"),c.Ruleset=a("./ruleset"),c.Element=a("./element"),c.Attribute=a("./attribute"),c.Combinator=a("./combinator"),c.Selector=a("./selector"),c.Quoted=a("./quoted"),c.Expression=a("./expression"),c.Rule=a("./rule"),c.Call=a("./call"),c.URL=a("./url"),c.Import=a("./import"),c.mixin={Call:a("./mixin-call"),Definition:a("./mixin-definition")},c.Comment=a("./comment"),c.Anonymous=a("./anonymous"),c.Value=a("./value"),c.JavaScript=a("./javascript"),c.Assignment=a("./assignment"),c.Condition=a("./condition"),c.Paren=a("./paren"),c.Media=a("./media"),c.UnicodeDescriptor=a("./unicode-descriptor"),c.Negative=a("./negative"),c.Extend=a("./extend"),c.RulesetCall=a("./ruleset-call"),b.exports=c},{"./alpha":43,"./anonymous":44,"./assignment":45,"./attribute":46,"./call":47,"./color":48,"./combinator":49,"./comment":50,"./condition":51,"./detached-ruleset":53,"./dimension":54,"./directive":55,"./element":56,"./expression":57,"./extend":58,"./import":59,"./javascript":61,"./keyword":63,"./media":64,"./mixin-call":65,"./mixin-definition":66,"./negative":67,"./node":68,"./operation":69,"./paren":70,"./quoted":71,"./rule":72,"./ruleset":74,"./ruleset-call":73,"./selector":75,"./unicode-descriptor":76,"./unit":77,"./url":78,"./value":79,"./variable":80}],61:[function(a,b){var c=a("./js-eval-node"),d=a("./dimension"),e=a("./quoted"),f=a("./anonymous"),g=function(a,b,c,d){this.escaped=b,this.expression=a,this.index=c,this.currentFileInfo=d};g.prototype=new c,g.prototype.type="JavaScript",g.prototype.eval=function(a){var b=this.evaluateJavaScript(this.expression,a);return"number"==typeof b?new d(b):"string"==typeof b?new e(\'"\'+b+\'"\',b,this.escaped,this.index):new f(Array.isArray(b)?b.join(", "):b)},b.exports=g},{"./anonymous":44,"./dimension":54,"./js-eval-node":62,"./quoted":71}],62:[function(a,b){var c=a("./node"),d=a("./variable"),e=function(){};e.prototype=new c,e.prototype.evaluateJavaScript=function(a,b){var c,e=this,f={};if(void 0!==b.javascriptEnabled&&!b.javascriptEnabled)throw{message:"You are using JavaScript, which has been disabled.",filename:this.currentFileInfo.filename,index:this.index};a=a.replace(/@\\{([\\w-]+)\\}/g,function(a,c){return e.jsify(new d("@"+c,e.index,e.currentFileInfo).eval(b))});try{a=new Function("return ("+a+")")}catch(g){throw{message:"JavaScript evaluation error: "+g.message+" from `"+a+"`",filename:this.currentFileInfo.filename,index:this.index}}var h=b.frames[0].variables();for(var i in h)h.hasOwnProperty(i)&&(f[i.slice(1)]={value:h[i].value,toJS:function(){return this.value.eval(b).toCSS()}});try{c=a.call(f)}catch(g){throw{message:"JavaScript evaluation error: \'"+g.name+": "+g.message.replace(/["]/g,"\'")+"\'",filename:this.currentFileInfo.filename,index:this.index}}return c},e.prototype.jsify=function(a){return Array.isArray(a.value)&&a.value.length>1?"["+a.value.map(function(a){return a.toCSS()}).join(", ")+"]":a.toCSS()},b.exports=e},{"./node":68,"./variable":80}],63:[function(a,b){var c=a("./node"),d=function(a){this.value=a};d.prototype=new c,d.prototype.type="Keyword",d.prototype.genCSS=function(a,b){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};b.add(this.value)},d.True=new d("true"),d.False=new d("false"),b.exports=d},{"./node":68}],64:[function(a,b){var c=a("./ruleset"),d=a("./value"),e=a("./selector"),f=a("./anonymous"),g=a("./expression"),h=a("./directive"),i=function(a,b,f,g){this.index=f,this.currentFileInfo=g;var h=new e([],null,null,this.index,this.currentFileInfo).createEmptySelectors();this.features=new d(b),this.rules=[new c(h,a)],this.rules[0].allowImports=!0};i.prototype=new h,i.prototype.type="Media",i.prototype.isRulesetLike=!0,i.prototype.accept=function(a){this.features&&(this.features=a.visit(this.features)),this.rules&&(this.rules=a.visitArray(this.rules))},i.prototype.genCSS=function(a,b){b.add("@media ",this.currentFileInfo,this.index),this.features.genCSS(a,b),this.outputRuleset(a,b,this.rules)},i.prototype.eval=function(a){a.mediaBlocks||(a.mediaBlocks=[],a.mediaPath=[]);var b=new i(null,[],this.index,this.currentFileInfo);this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,b.debugInfo=this.debugInfo);var c=!1;a.strictMath||(c=!0,a.strictMath=!0);try{b.features=this.features.eval(a)}finally{c&&(a.strictMath=!1)}return a.mediaPath.push(b),a.mediaBlocks.push(b),this.rules[0].functionRegistry=a.frames[0].functionRegistry.inherit(),a.frames.unshift(this.rules[0]),b.rules=[this.rules[0].eval(a)],a.frames.shift(),a.mediaPath.pop(),0===a.mediaPath.length?b.evalTop(a):b.evalNested(a)},i.prototype.evalTop=function(a){var b=this;if(a.mediaBlocks.length>1){var d=new e([],null,null,this.index,this.currentFileInfo).createEmptySelectors();b=new c(d,a.mediaBlocks),b.multiMedia=!0}return delete a.mediaBlocks,delete a.mediaPath,b},i.prototype.evalNested=function(a){var b,e,h=a.mediaPath.concat([this]);for(b=0;h.length>b;b++)e=h[b].features instanceof d?h[b].features.value:h[b].features,h[b]=Array.isArray(e)?e:[e];return this.features=new d(this.permute(h).map(function(a){for(a=a.map(function(a){return a.toCSS?a:new f(a)}),b=a.length-1;b>0;b--)a.splice(b,0,new f("and"));return new g(a)})),new c([],[])},i.prototype.permute=function(a){if(0===a.length)return[];if(1===a.length)return a[0];for(var b=[],c=this.permute(a.slice(1)),d=0;c.length>d;d++)for(var e=0;a[0].length>e;e++)b.push([a[0][e]].concat(c[d]));return b},i.prototype.bubbleSelectors=function(a){a&&(this.rules=[new c(a.slice(0),[this.rules[0]])])},b.exports=i},{"./anonymous":44,"./directive":55,"./expression":57,"./ruleset":74,"./selector":75,"./value":79}],65:[function(a,b){var c=a("./node"),d=a("./selector"),e=a("./mixin-definition"),f=a("../functions/default"),g=function(a,b,c,e,f){this.selector=new d(a),this.arguments=b&&b.length?b:null,this.index=c,this.currentFileInfo=e,this.important=f};g.prototype=new c,g.prototype.type="MixinCall",g.prototype.accept=function(a){this.selector&&(this.selector=a.visit(this.selector)),this.arguments&&(this.arguments=a.visitArray(this.arguments))},g.prototype.eval=function(a){function b(b,c){var d,e;for(k=0;2>k;k++){for(w[k]=!0,f.value(k),d=0;c.length>d&&w[k];d++)e=c[d],e.matchCondition&&(w[k]=w[k]&&e.matchCondition(null,a));b.matchCondition&&(w[k]=w[k]&&b.matchCondition(h,a))}return w[0]||w[1]?w[0]!=w[1]?w[1]?z:A:y:x}var c,d,g,h,i,j,k,l,m,n,o,p,q,r,s,t=[],u=!1,v=[],w=[],x=-1,y=0,z=1,A=2;for(h=this.arguments&&this.arguments.map(function(b){return{name:b.name,value:b.value.eval(a)}}),s=function(b){return b.matchArgs(null,a)},i=0;a.frames.length>i;i++)if((c=a.frames[i].find(this.selector,null,s)).length>0){for(m=!0,j=0;c.length>j;j++){for(d=c[j].rule,g=c[j].path,l=!1,k=0;a.frames.length>k;k++)if(!(d instanceof e)&&d===(a.frames[k].originalRuleset||a.frames[k])){l=!0;break}l||d.matchArgs(h,a)&&(o={mixin:d,group:b(d,g)},o.group!==x&&v.push(o),u=!0)}for(f.reset(),q=[0,0,0],j=0;v.length>j;j++)q[v[j].group]++;if(q[y]>0)p=A;else if(p=z,q[z]+q[A]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(h)+"`",index:this.index,filename:this.currentFileInfo.filename};for(j=0;v.length>j;j++)if(o=v[j].group,o===y||o===p)try{d=v[j].mixin,d instanceof e||(r=d.originalRuleset||d,d=new e("",[],d.rules,null,!1),d.originalRuleset=r),Array.prototype.push.apply(t,d.evalCall(a,h,this.important).rules)}catch(B){throw{message:B.message,index:this.index,filename:this.currentFileInfo.filename,stack:B.stack}}if(u){if(!this.currentFileInfo||!this.currentFileInfo.reference)for(i=0;t.length>i;i++)n=t[i],n.markReferenced&&n.markReferenced();return t}}throw m?{type:"Runtime",message:"No matching definition was found for `"+this.format(h)+"`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}},g.prototype.format=function(a){return this.selector.toCSS().trim()+"("+(a?a.map(function(a){var b="";return a.name&&(b+=a.name+":"),b+=a.value.toCSS?a.value.toCSS():"???"}).join(", "):"")+")"},b.exports=g},{"../functions/default":19,"./mixin-definition":66,"./node":68,"./selector":75}],66:[function(a,b){var c=a("./selector"),d=a("./element"),e=a("./ruleset"),f=a("./rule"),g=a("./expression"),h=a("../contexts"),i=function(a,b,e,f,g,h){this.name=a,this.selectors=[new c([new d(null,a,this.index,this.currentFileInfo)])],this.params=b,this.condition=f,this.variadic=g,this.arity=b.length,this.rules=e,this._lookups={},this.required=b.reduce(function(a,b){return!b.name||b.name&&!b.value?a+1:a},0),this.frames=h};i.prototype=new e,i.prototype.type="MixinDefinition",i.prototype.evalFirst=!0,i.prototype.accept=function(a){this.params&&this.params.length&&(this.params=a.visitArray(this.params)),this.rules=a.visitArray(this.rules),this.condition&&(this.condition=a.visit(this.condition))},i.prototype.evalParams=function(a,b,c,d){var i,j,k,l,m,n,o,p,q=new e(null,null),r=this.params.slice(0),s=0;if(b.frames&&b.frames[0]&&b.frames[0].functionRegistry&&(q.functionRegistry=b.frames[0].functionRegistry.inherit()),b=new h.Eval(b,[q].concat(b.frames)),c)for(c=c.slice(0),s=c.length,k=0;s>k;k++)if(j=c[k],n=j&&j.name){for(o=!1,l=0;r.length>l;l++)if(!d[l]&&n===r[l].name){d[l]=j.value.eval(a),q.prependRule(new f(n,j.value.eval(a))),o=!0;break}if(o){c.splice(k,1),k--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+c[k].name+" not found"}}for(p=0,k=0;r.length>k;k++)if(!d[k]){if(j=c&&c[p],n=r[k].name)if(r[k].variadic){for(i=[],l=p;s>l;l++)i.push(c[l].value.eval(a));q.prependRule(new f(n,new g(i).eval(a)))}else{if(m=j&&j.value)m=m.eval(a);else{if(!r[k].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+s+" for "+this.arity+")"};m=r[k].value.eval(b),q.resetCache()}q.prependRule(new f(n,m)),d[k]=m}if(r[k].variadic&&c)for(l=p;s>l;l++)d[l]=c[l].value.eval(a);p++}return q},i.prototype.makeImportant=function(){var a=this.rules?this.rules.map(function(a){return a.makeImportant?a.makeImportant(!0):a}):this.rules,b=new i(this.name,this.params,a,this.condition,this.variadic,this.frames);return b},i.prototype.eval=function(a){return new i(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||a.frames.slice(0))},i.prototype.evalCall=function(a,b,c){var d,i,j=[],k=this.frames?this.frames.concat(a.frames):a.frames,l=this.evalParams(a,new h.Eval(a,k),b,j);return l.prependRule(new f("@arguments",new g(j).eval(a))),d=this.rules.slice(0),i=new e(null,d),i.originalRuleset=this,i=i.eval(new h.Eval(a,[this,l].concat(k))),c&&(i=i.makeImportant()),i},i.prototype.matchCondition=function(a,b){return this.condition&&!this.condition.eval(new h.Eval(b,[this.evalParams(b,new h.Eval(b,this.frames?this.frames.concat(b.frames):b.frames),a,[])].concat(this.frames||[]).concat(b.frames)))?!1:!0},i.prototype.matchArgs=function(a,b){var c,d=a&&a.length||0;if(this.variadic){if(this.required-1>d)return!1}else{\nif(this.required>d)return!1;if(d>this.params.length)return!1}c=Math.min(d,this.arity);for(var e=0;c>e;e++)if(!this.params[e].name&&!this.params[e].variadic&&a[e].value.eval(b).toCSS()!=this.params[e].value.eval(b).toCSS())return!1;return!0},b.exports=i},{"../contexts":10,"./element":56,"./expression":57,"./rule":72,"./ruleset":74,"./selector":75}],67:[function(a,b){var c=a("./node"),d=a("./operation"),e=a("./dimension"),f=function(a){this.value=a};f.prototype=new c,f.prototype.type="Negative",f.prototype.genCSS=function(a,b){b.add("-"),this.value.genCSS(a,b)},f.prototype.eval=function(a){return a.isMathOn()?new d("*",[new e(-1),this.value]).eval(a):new f(this.value.eval(a))},b.exports=f},{"./dimension":54,"./node":68,"./operation":69}],68:[function(a,b){var c=function(){};c.prototype.toCSS=function(a){var b=[];return this.genCSS(a,{add:function(a){b.push(a)},isEmpty:function(){return 0===b.length}}),b.join("")},c.prototype.genCSS=function(a,b){b.add(this.value)},c.prototype.accept=function(a){this.value=a.visit(this.value)},c.prototype.eval=function(){return this},c.prototype._operate=function(a,b,c,d){switch(b){case"+":return c+d;case"-":return c-d;case"*":return c*d;case"/":return c/d}},c.prototype.fround=function(a,b){var c=a&&a.numPrecision;return null==c?b:Number((b+2e-16).toFixed(c))},c.compare=function(a,b){if(a.compare&&"Quoted"!==b.type&&"Anonymous"!==b.type)return a.compare(b);if(b.compare)return-b.compare(a);if(a.type!==b.type)return void 0;if(a=a.value,b=b.value,!Array.isArray(a))return a===b?0:void 0;if(a.length!==b.length)return void 0;for(var d=0;a.length>d;d++)if(0!==c.compare(a[d],b[d]))return void 0;return 0},c.numericCompare=function(a,b){return b>a?-1:a===b?0:a>b?1:void 0},b.exports=c},{}],69:[function(a,b){var c=a("./node"),d=a("./color"),e=a("./dimension"),f=function(a,b,c){this.op=a.trim(),this.operands=b,this.isSpaced=c};f.prototype=new c,f.prototype.type="Operation",f.prototype.accept=function(a){this.operands=a.visit(this.operands)},f.prototype.eval=function(a){var b=this.operands[0].eval(a),c=this.operands[1].eval(a);if(a.isMathOn()){if(b instanceof e&&c instanceof d&&(b=b.toColor()),c instanceof e&&b instanceof d&&(c=c.toColor()),!b.operate)throw{type:"Operation",message:"Operation on an invalid type"};return b.operate(a,this.op,c)}return new f(this.op,[b,c],this.isSpaced)},f.prototype.genCSS=function(a,b){this.operands[0].genCSS(a,b),this.isSpaced&&b.add(" "),b.add(this.op),this.isSpaced&&b.add(" "),this.operands[1].genCSS(a,b)},b.exports=f},{"./color":48,"./dimension":54,"./node":68}],70:[function(a,b){var c=a("./node"),d=function(a){this.value=a};d.prototype=new c,d.prototype.type="Paren",d.prototype.genCSS=function(a,b){b.add("("),this.value.genCSS(a,b),b.add(")")},d.prototype.eval=function(a){return new d(this.value.eval(a))},b.exports=d},{"./node":68}],71:[function(a,b){var c=a("./node"),d=a("./js-eval-node"),e=a("./variable"),f=function(a,b,c,d,e){this.escaped=null==c?!0:c,this.value=b||"",this.quote=a.charAt(0),this.index=d,this.currentFileInfo=e};f.prototype=new d,f.prototype.type="Quoted",f.prototype.genCSS=function(a,b){this.escaped||b.add(this.quote,this.currentFileInfo,this.index),b.add(this.value),this.escaped||b.add(this.quote)},f.prototype.containsVariables=function(){return this.value.match(/(`([^`]+)`)|@\\{([\\w-]+)\\}/)},f.prototype.eval=function(a){function b(a,b,c){var d=a;do a=d,d=a.replace(b,c);while(a!==d);return d}var c=this,d=this.value,g=function(b,d){return String(c.evaluateJavaScript(d,a))},h=function(b,d){var g=new e("@"+d,c.index,c.currentFileInfo).eval(a,!0);return g instanceof f?g.value:g.toCSS()};return d=b(d,/`([^`]+)`/g,g),d=b(d,/@\\{([\\w-]+)\\}/g,h),new f(this.quote+d+this.quote,d,this.escaped,this.index,this.currentFileInfo)},f.prototype.compare=function(a){return"Quoted"!==a.type||this.escaped||a.escaped?a.toCSS&&this.toCSS()===a.toCSS()?0:void 0:c.numericCompare(this.value,a.value)},b.exports=f},{"./js-eval-node":62,"./node":68,"./variable":80}],72:[function(a,b){function c(a,b){var c,d="",e=b.length,f={add:function(a){d+=a}};for(c=0;e>c;c++)b[c].eval(a).genCSS(a,f);return d}var d=a("./node"),e=a("./value"),f=a("./keyword"),g=function(a,b,c,f,g,h,i,j){this.name=a,this.value=b instanceof d?b:new e([b]),this.important=c?" "+c.trim():"",this.merge=f,this.index=g,this.currentFileInfo=h,this.inline=i||!1,this.variable=void 0!==j?j:a.charAt&&"@"===a.charAt(0)};g.prototype=new d,g.prototype.type="Rule",g.prototype.genCSS=function(a,b){b.add(this.name+(a.compress?":":": "),this.currentFileInfo,this.index);try{this.value.genCSS(a,b)}catch(c){throw c.index=this.index,c.filename=this.currentFileInfo.filename,c}b.add(this.important+(this.inline||a.lastRule&&a.compress?"":";"),this.currentFileInfo,this.index)},g.prototype.eval=function(a){var b,d=!1,e=this.name,h=this.variable;"string"!=typeof e&&(e=1===e.length&&e[0]instanceof f?e[0].value:c(a,e),h=!1),"font"!==e||a.strictMath||(d=!0,a.strictMath=!0);try{if(a.importantScope.push({}),b=this.value.eval(a),!this.variable&&"DetachedRuleset"===b.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.index,filename:this.currentFileInfo.filename};var i=this.important,j=a.importantScope.pop();return!i&&j.important&&(i=j.important),new g(e,b,i,this.merge,this.index,this.currentFileInfo,this.inline,h)}catch(k){throw"number"!=typeof k.index&&(k.index=this.index,k.filename=this.currentFileInfo.filename),k}finally{d&&(a.strictMath=!1)}},g.prototype.makeImportant=function(){return new g(this.name,this.value,"!important",this.merge,this.index,this.currentFileInfo,this.inline)},b.exports=g},{"./keyword":63,"./node":68,"./value":79}],73:[function(a,b){var c=a("./node"),d=a("./variable"),e=function(a){this.variable=a};e.prototype=new c,e.prototype.type="RulesetCall",e.prototype.eval=function(a){var b=new d(this.variable).eval(a);return b.callEval(a)},b.exports=e},{"./node":68,"./variable":80}],74:[function(a,b){var c=a("./node"),d=a("./rule"),e=a("./selector"),f=a("./element"),g=a("./paren"),h=a("../contexts"),i=a("../functions/function-registry"),j=a("../functions/default"),k=a("./debug-info"),l=function(a,b,c){this.selectors=a,this.rules=b,this._lookups={},this.strictImports=c};l.prototype=new c,l.prototype.type="Ruleset",l.prototype.isRuleset=!0,l.prototype.isRulesetLike=!0,l.prototype.accept=function(a){this.paths?a.visitArray(this.paths,!0):this.selectors&&(this.selectors=a.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=a.visitArray(this.rules))},l.prototype.eval=function(a){var b,c,e,f,g=this.selectors,h=!1;if(g&&(c=g.length)){for(b=[],j.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),f=0;c>f;f++)e=g[f].eval(a),b.push(e),e.evaldCondition&&(h=!0);j.reset()}else h=!0;var k,m,n=this.rules?this.rules.slice(0):null,o=new l(b,n,this.strictImports);o.originalRuleset=this,o.root=this.root,o.firstRoot=this.firstRoot,o.allowImports=this.allowImports,this.debugInfo&&(o.debugInfo=this.debugInfo),h||(n.length=0),o.functionRegistry=function(a){for(var b,c=0,d=a.length;c!==d;++c)if(b=a[c].functionRegistry)return b;return i}(a.frames).inherit();var p=a.frames;p.unshift(o);var q=a.selectors;q||(a.selectors=q=[]),q.unshift(this.selectors),(o.root||o.allowImports||!o.strictImports)&&o.evalImports(a);var r=o.rules,s=r?r.length:0;for(f=0;s>f;f++)r[f].evalFirst&&(r[f]=r[f].eval(a));var t=a.mediaBlocks&&a.mediaBlocks.length||0;for(f=0;s>f;f++)"MixinCall"===r[f].type?(n=r[f].eval(a).filter(function(a){return a instanceof d&&a.variable?!o.variable(a.name):!0}),r.splice.apply(r,[f,1].concat(n)),s+=n.length-1,f+=n.length-1,o.resetCache()):"RulesetCall"===r[f].type&&(n=r[f].eval(a).rules.filter(function(a){return a instanceof d&&a.variable?!1:!0}),r.splice.apply(r,[f,1].concat(n)),s+=n.length-1,f+=n.length-1,o.resetCache());for(f=0;r.length>f;f++)k=r[f],k.evalFirst||(r[f]=k=k.eval?k.eval(a):k);for(f=0;r.length>f;f++)if(k=r[f],k instanceof l&&k.selectors&&1===k.selectors.length&&k.selectors[0].isJustParentSelector()){r.splice(f--,1);for(var u=0;k.rules.length>u;u++)m=k.rules[u],m instanceof d&&m.variable||r.splice(++f,0,m)}if(p.shift(),q.shift(),a.mediaBlocks)for(f=t;a.mediaBlocks.length>f;f++)a.mediaBlocks[f].bubbleSelectors(b);return o},l.prototype.evalImports=function(a){var b,c,d=this.rules;if(d)for(b=0;d.length>b;b++)"Import"===d[b].type&&(c=d[b].eval(a),c&&c.length?(d.splice.apply(d,[b,1].concat(c)),b+=c.length-1):d.splice(b,1,c),this.resetCache())},l.prototype.makeImportant=function(){var a=new l(this.selectors,this.rules.map(function(a){return a.makeImportant?a.makeImportant():a}),this.strictImports);return a},l.prototype.matchArgs=function(a){return!a||0===a.length},l.prototype.matchCondition=function(a,b){var c=this.selectors[this.selectors.length-1];return c.evaldCondition?c.condition&&!c.condition.eval(new h.Eval(b,b.frames))?!1:!0:!1},l.prototype.resetCache=function(){this._rulesets=null,this._variables=null,this._lookups={}},l.prototype.variables=function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(a,b){if(b instanceof d&&b.variable===!0&&(a[b.name]=b),"Import"===b.type&&b.root&&b.root.variables){var c=b.root.variables();for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])}return a},{}):{}),this._variables},l.prototype.variable=function(a){return this.variables()[a]},l.prototype.rulesets=function(){if(!this.rules)return[];var a,b,c=[],d=this.rules,e=d.length;for(a=0;e>a;a++)b=d[a],b.isRuleset&&c.push(b);return c},l.prototype.prependRule=function(a){var b=this.rules;b?b.unshift(a):this.rules=[a]},l.prototype.find=function(a,b,c){b=b||this;var d,f,g=[],h=a.toCSS();return h in this._lookups?this._lookups[h]:(this.rulesets().forEach(function(h){if(h!==b)for(var i=0;h.selectors.length>i;i++)if(d=a.match(h.selectors[i])){if(a.elements.length>d){if(!c||c(h)){f=h.find(new e(a.elements.slice(d)),b,c);for(var j=0;f.length>j;++j)f[j].path.push(h);Array.prototype.push.apply(g,f)}}else g.push({rule:h,path:[]});break}}),this._lookups[h]=g,g)},l.prototype.genCSS=function(a,b){function c(a){return"boolean"==typeof a.isRulesetLike?a.isRulesetLike:"function"==typeof a.isRulesetLike?a.isRulesetLike():!1}var d,e,f,g,h,i=[],j=[];a.tabLevel=a.tabLevel||0,this.root||a.tabLevel++;var l,m=a.compress?"":Array(a.tabLevel+1).join("  "),n=a.compress?"":Array(a.tabLevel).join("  "),o=0,p=0;for(d=0;this.rules.length>d;d++)g=this.rules[d],"Comment"===g.type?(p===d&&p++,j.push(g)):g.isCharset&&g.isCharset()?(j.splice(o,0,g),o++,p++):"Import"===g.type?(j.splice(p,0,g),p++):j.push(g);if(j=i.concat(j),!this.root){f=k(a,this,n),f&&(b.add(f),b.add(n));var q,r=this.paths,s=r.length;for(l=a.compress?",":",\\n"+n,d=0;s>d;d++)if(h=r[d],q=h.length)for(d>0&&b.add(l),a.firstSelector=!0,h[0].genCSS(a,b),a.firstSelector=!1,e=1;q>e;e++)h[e].genCSS(a,b);b.add((a.compress?"{":" {\\n")+m)}for(d=0;j.length>d;d++){g=j[d],d+1===j.length&&(a.lastRule=!0);var t=a.lastRule;c(g)&&(a.lastRule=!1),g.genCSS?g.genCSS(a,b):g.value&&b.add(g.value.toString()),a.lastRule=t,a.lastRule?a.lastRule=!1:b.add(a.compress?"":"\\n"+m)}this.root||(b.add(a.compress?"}":"\\n"+n+"}"),a.tabLevel--),b.isEmpty()||a.compress||!this.firstRoot||b.add("\\n")},l.prototype.markReferenced=function(){var a;if(this.selectors)for(a=0;this.selectors.length>a;a++)this.selectors[a].markReferenced();if(this.rules)for(a=0;this.rules.length>a;a++)this.rules[a].markReferenced&&this.rules[a].markReferenced()},l.prototype.getIsReferenced=function(){var a,b,c,d;if(this.paths)for(a=0;this.paths.length>a;a++)for(c=this.paths[a],b=0;c.length>b;b++)if(c[b].getIsReferenced&&c[b].getIsReferenced())return!0;if(this.selectors)for(a=0;this.selectors.length>a;a++)if(d=this.selectors[a],d.getIsReferenced&&d.getIsReferenced())return!0;return!1},l.prototype.joinSelectors=function(a,b,c){for(var d=0;c.length>d;d++)this.joinSelector(a,b,c[d])},l.prototype.joinSelector=function(a,b,c){function d(a,b){var c,d;if(0===a.length)c=new g(a[0]);else{var h=[];for(d=0;a.length>d;d++)h.push(new f(null,a[d],b.index,b.currentFileInfo));c=new g(new e(h))}return c}function h(a,b){var c,d;return c=new f(null,a,b.index,b.currentFileInfo),d=new e([c])}function i(a,b,c){function e(a){var b;return"Paren"!==a.value.type?null:(b=a.value.value,"Selector"!==b.type?null:b)}var g,m,n,o,p,q,r,s,t,u,v=!1;for(o=[],p=[[]],g=0;c.elements.length>g;g++)if(s=c.elements[g],"&"!==s.value){var w=e(s);if(null!=w){l(o,p);var x,y=[],z=[];for(x=i(y,b,w),v=v||x,n=0;y.length>n;n++){var A=h(d(y[n],s),s);k(p,[A],s,c,z)}p=z,o=[]}else o.push(s)}else{for(v=!0,q=[],l(o,p),m=0;p.length>m;m++)if(r=p[m],0===b.length)r.length>0&&r[0].elements.push(new f(s.combinator,"",s.index,s.currentFileInfo)),q.push(r);else for(n=0;b.length>n;n++){var B=j(r,b[n],s,c);q.push(B)}p=q,o=[]}for(l(o,p),g=0;p.length>g;g++)t=p[g].length,t>0&&(a.push(p[g]),u=p[g][t-1],p[g][t-1]=u.createDerived(u.elements,c.extendList));return v}function j(a,b,c,d){var e,g,h;if(e=[],a.length>0?(e=a.slice(0),g=e.pop(),h=d.createDerived(g.elements.slice(0))):h=d.createDerived([]),b.length>0){var i=c.combinator,j=b[0].elements[0];i.emptyOrWhitespace&&!j.combinator.emptyOrWhitespace&&(i=j.combinator),h.elements.push(new f(i,j.value,c.index,c.currentFileInfo)),h.elements=h.elements.concat(b[0].elements.slice(1))}return 0!==h.elements.length&&e.push(h),b.length>1&&(e=e.concat(b.slice(1))),e}function k(a,b,c,d,e){var f;for(f=0;a.length>f;f++){var g=j(a[f],b,c,d);e.push(g)}return e}function l(a,b){var c,d;if(0!==a.length){if(0===b.length)return void b.push([new e(a)]);for(c=0;b.length>c;c++)d=b[c],d.length>0?d[d.length-1]=d[d.length-1].createDerived(d[d.length-1].elements.concat(a)):d.push(new e(a))}}var m,n,o;if(n=[],o=i(n,b,c),!o)if(b.length>0)for(n=[],m=0;b.length>m;m++)n.push(b[m].concat(c));else n=[[c]];for(m=0;n.length>m;m++)a.push(n[m])},b.exports=l},{"../contexts":10,"../functions/default":19,"../functions/function-registry":21,"./debug-info":52,"./element":56,"./node":68,"./paren":70,"./rule":72,"./selector":75}],75:[function(a,b){var c=a("./node"),d=a("./element"),e=function(a,b,c,d,e,f){this.elements=a,this.extendList=b,this.condition=c,this.currentFileInfo=e||{},this.isReferenced=f,c||(this.evaldCondition=!0)};e.prototype=new c,e.prototype.type="Selector",e.prototype.accept=function(a){this.elements&&(this.elements=a.visitArray(this.elements)),this.extendList&&(this.extendList=a.visitArray(this.extendList)),this.condition&&(this.condition=a.visit(this.condition))},e.prototype.createDerived=function(a,b,c){c=null!=c?c:this.evaldCondition;var d=new e(a,b||this.extendList,null,this.index,this.currentFileInfo,this.isReferenced);return d.evaldCondition=c,d.mediaEmpty=this.mediaEmpty,d},e.prototype.createEmptySelectors=function(){var a=new d("","&",this.index,this.currentFileInfo),b=[new e([a],null,null,this.index,this.currentFileInfo)];return b[0].mediaEmpty=!0,b},e.prototype.match=function(a){var b,c,d=this.elements,e=d.length;if(a.CacheElements(),b=a._elements.length,0===b||b>e)return 0;for(c=0;b>c;c++)if(d[c].value!==a._elements[c])return 0;return b},e.prototype.CacheElements=function(){if(!this._elements){var a=this.elements.map(function(a){return a.combinator.value+(a.value.value||a.value)}).join("").match(/[,&#\\*\\.\\w-]([\\w-]|(\\\\.))*/g);a?"&"===a[0]&&a.shift():a=[],this._elements=a}},e.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},e.prototype.eval=function(a){var b=this.condition&&this.condition.eval(a),c=this.elements,d=this.extendList;return c=c&&c.map(function(b){return b.eval(a)}),d=d&&d.map(function(b){return b.eval(a)}),this.createDerived(c,d,b)},e.prototype.genCSS=function(a,b){var c,d;if(a&&a.firstSelector||""!==this.elements[0].combinator.value||b.add(" ",this.currentFileInfo,this.index),!this._css)for(c=0;this.elements.length>c;c++)d=this.elements[c],d.genCSS(a,b)},e.prototype.markReferenced=function(){this.isReferenced=!0},e.prototype.getIsReferenced=function(){return!this.currentFileInfo.reference||this.isReferenced},e.prototype.getIsOutput=function(){return this.evaldCondition},b.exports=e},{"./element":56,"./node":68}],76:[function(a,b){var c=a("./node"),d=function(a){this.value=a};d.prototype=new c,d.prototype.type="UnicodeDescriptor",b.exports=d},{"./node":68}],77:[function(a,b){var c=a("./node"),d=a("../data/unit-conversions"),e=function(a,b,c){this.numerator=a?a.slice(0).sort():[],this.denominator=b?b.slice(0).sort():[],c?this.backupUnit=c:a&&a.length&&(this.backupUnit=a[0])};e.prototype=new c,e.prototype.type="Unit",e.prototype.clone=function(){return new e(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},e.prototype.genCSS=function(a,b){var c=a&&a.strictUnits;1===this.numerator.length?b.add(this.numerator[0]):!c&&this.backupUnit?b.add(this.backupUnit):!c&&this.denominator.length&&b.add(this.denominator[0])},e.prototype.toString=function(){var a,b=this.numerator.join("*");for(a=0;this.denominator.length>a;a++)b+="/"+this.denominator[a];return b},e.prototype.compare=function(a){return this.is(a.toString())?0:void 0},e.prototype.is=function(a){return this.toString().toUpperCase()===a.toUpperCase()},e.prototype.isLength=function(){return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))},e.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length},e.prototype.isSingular=function(){return 1>=this.numerator.length&&0===this.denominator.length},e.prototype.map=function(a){var b;for(b=0;this.numerator.length>b;b++)this.numerator[b]=a(this.numerator[b],!1);for(b=0;this.denominator.length>b;b++)this.denominator[b]=a(this.denominator[b],!0)},e.prototype.usedUnits=function(){var a,b,c={};b=function(b){return a.hasOwnProperty(b)&&!c[e]&&(c[e]=b),b};for(var e in d)d.hasOwnProperty(e)&&(a=d[e],this.map(b));return c},e.prototype.cancel=function(){var a,b,c={};for(b=0;this.numerator.length>b;b++)a=this.numerator[b],c[a]=(c[a]||0)+1;for(b=0;this.denominator.length>b;b++)a=this.denominator[b],c[a]=(c[a]||0)-1;this.numerator=[],this.denominator=[];for(a in c)if(c.hasOwnProperty(a)){var d=c[a];if(d>0)for(b=0;d>b;b++)this.numerator.push(a);else if(0>d)for(b=0;-d>b;b++)this.denominator.push(a)}this.numerator.sort(),this.denominator.sort()},b.exports=e},{"../data/unit-conversions":13,"./node":68}],78:[function(a,b){var c=a("./node"),d=function(a,b,c,d){this.value=a,this.currentFileInfo=c,this.index=b,this.isEvald=d};d.prototype=new c,d.prototype.type="Url",d.prototype.accept=function(a){this.value=a.visit(this.value)},d.prototype.genCSS=function(a,b){b.add("url("),this.value.genCSS(a,b),b.add(")")},d.prototype.eval=function(a){var b,c=this.value.eval(a);if(!this.isEvald&&(b=this.currentFileInfo&&this.currentFileInfo.rootpath,b&&"string"==typeof c.value&&a.isPathRelative(c.value)&&(c.quote||(b=b.replace(/[\\(\\)\'"\\s]/g,function(a){return"\\\\"+a})),c.value=b+c.value),c.value=a.normalizePath(c.value),a.urlArgs&&!c.value.match(/^\\s*data:/))){var e=-1===c.value.indexOf("?")?"?":"&",f=e+a.urlArgs;-1!==c.value.indexOf("#")?c.value=c.value.replace("#",f+"#"):c.value+=f}return new d(c,this.index,this.currentFileInfo,!0)},b.exports=d},{"./node":68}],79:[function(a,b){var c=a("./node"),d=function(a){if(this.value=a,!a)throw new Error("Value requires an array argument")};d.prototype=new c,d.prototype.type="Value",d.prototype.accept=function(a){this.value&&(this.value=a.visitArray(this.value))},d.prototype.eval=function(a){return 1===this.value.length?this.value[0].eval(a):new d(this.value.map(function(b){return b.eval(a)}))},d.prototype.genCSS=function(a,b){var c;for(c=0;this.value.length>c;c++)this.value[c].genCSS(a,b),this.value.length>c+1&&b.add(a&&a.compress?",":", ")},b.exports=d},{"./node":68}],80:[function(a,b){var c=a("./node"),d=function(a,b,c){this.name=a,this.index=b,this.currentFileInfo=c||{}};d.prototype=new c,d.prototype.type="Variable",d.prototype.eval=function(a){var b,c=this.name;if(0===c.indexOf("@@")&&(c="@"+new d(c.slice(1),this.index,this.currentFileInfo).eval(a).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+c,filename:this.currentFileInfo.filename,index:this.index};if(this.evaluating=!0,b=this.find(a.frames,function(b){var d=b.variable(c);if(d){if(d.important){var e=a.importantScope[a.importantScope.length-1];e.important=d.important}return d.value.eval(a)}}))return this.evaluating=!1,b;throw{type:"Name",message:"variable "+c+" is undefined",filename:this.currentFileInfo.filename,index:this.index}},d.prototype.find=function(a,b){for(var c,d=0;a.length>d;d++)if(c=b.call(a,a[d]))return c;return null},b.exports=d},{"./node":68}],81:[function(a,b){b.exports={getLocation:function(a,b){for(var c=a+1,d=null,e=-1;--c>=0&&"\\n"!==b.charAt(c);)e++;return"number"==typeof a&&(d=(b.slice(0,a).match(/\\n/g)||"").length),{line:d,column:e}}}},{}],82:[function(a,b){var c=a("../tree"),d=a("./visitor"),e=a("../logger"),f=function(){this._visitor=new d(this),this.contexts=[],this.allExtendsStack=[[]]};f.prototype={run:function(a){return a=this._visitor.visit(a),a.allExtends=this.allExtendsStack[0],a},visitRule:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitRuleset:function(a){if(!a.root){var b,d,e,f,g=[],h=a.rules,i=h?h.length:0;for(b=0;i>b;b++)a.rules[b]instanceof c.Extend&&(g.push(h[b]),a.extendOnEveryPath=!0);var j=a.paths;for(b=0;j.length>b;b++){var k=j[b],l=k[k.length-1],m=l.extendList;for(f=m?m.slice(0).concat(g):g,f&&(f=f.map(function(a){return a.clone()})),d=0;f.length>d;d++)this.foundExtends=!0,e=f[d],e.findSelfSelectors(k),e.ruleset=a,0===d&&(e.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(e)}this.contexts.push(a.selectors)}},visitRulesetOut:function(a){a.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(a){a.allExtends=[],this.allExtendsStack.push(a.allExtends)},visitMediaOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(a){a.allExtends=[],this.allExtendsStack.push(a.allExtends)},visitDirectiveOut:function(){this.allExtendsStack.length=this.allExtendsStack.length-1}};var g=function(){this._visitor=new d(this)};g.prototype={run:function(a){var b=new f;if(this.extendIndicies={},b.run(a),!b.foundExtends)return a;a.allExtends=a.allExtends.concat(this.doExtendChaining(a.allExtends,a.allExtends)),this.allExtendsStack=[a.allExtends];var c=this._visitor.visit(a);return this.checkExtendsForNonMatched(a.allExtends),c},checkExtendsForNonMatched:function(a){var b=this.extendIndicies;a.filter(function(a){return!a.hasFoundMatches&&1==a.parent_ids.length}).forEach(function(a){var c="_unknown_";try{c=a.selector.toCSS({})}catch(d){}b[a.index+" "+c]||(b[a.index+" "+c]=!0,e.warn("extend \'"+c+"\' has no matches"))})},doExtendChaining:function(a,b,d){var e,f,g,h,i,j,k,l,m=[],n=this;for(d=d||0,e=0;a.length>e;e++)for(f=0;b.length>f;f++)j=a[e],k=b[f],j.parent_ids.indexOf(k.object_id)>=0||(i=[k.selfSelectors[0]],g=n.findMatch(j,i),g.length&&(j.hasFoundMatches=!0,j.selfSelectors.forEach(function(a){h=n.extendSelector(g,i,a),l=new c.Extend(k.selector,k.option,0),l.selfSelectors=h,h[h.length-1].extendList=[l],m.push(l),l.ruleset=k.ruleset,l.parent_ids=l.parent_ids.concat(k.parent_ids,j.parent_ids),k.firstExtendOnThisSelectorPath&&(l.firstExtendOnThisSelectorPath=!0,k.ruleset.paths.push(h))})));if(m.length){if(this.extendChainCount++,d>100){var o="{unable to calculate}",p="{unable to calculate}";try{o=m[0].selfSelectors[0].toCSS(),p=m[0].selector.toCSS()}catch(q){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+o+":extend("+p+")"}}return m.concat(n.doExtendChaining(m,b,d+1))}return m},visitRule:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitSelector:function(a,b){b.visitDeeper=!1},visitRuleset:function(a){if(!a.root){var b,c,d,e,f=this.allExtendsStack[this.allExtendsStack.length-1],g=[],h=this;for(d=0;f.length>d;d++)for(c=0;a.paths.length>c;c++)if(e=a.paths[c],!a.extendOnEveryPath){var i=e[e.length-1].extendList;i&&i.length||(b=this.findMatch(f[d],e),b.length&&(f[d].hasFoundMatches=!0,f[d].selfSelectors.forEach(function(a){g.push(h.extendSelector(b,e,a))})))}a.paths=a.paths.concat(g)}},findMatch:function(a,b){var c,d,e,f,g,h,i,j=this,k=a.selector.elements,l=[],m=[];for(c=0;b.length>c;c++)for(d=b[c],e=0;d.elements.length>e;e++)for(f=d.elements[e],(a.allowBefore||0===c&&0===e)&&l.push({pathIndex:c,index:e,matched:0,initialCombinator:f.combinator}),h=0;l.length>h;h++)i=l[h],g=f.combinator.value,""===g&&0===e&&(g=" "),!j.isElementValuesEqual(k[i.matched].value,f.value)||i.matched>0&&k[i.matched].combinator.value!==g?i=null:i.matched++,i&&(i.finished=i.matched===k.length,i.finished&&!a.allowAfter&&(d.elements.length>e+1||b.length>c+1)&&(i=null)),i?i.finished&&(i.length=k.length,i.endPathIndex=c,i.endPathElementIndex=e+1,l.length=0,m.push(i)):(l.splice(h,1),h--);return m},isElementValuesEqual:function(a,b){if("string"==typeof a||"string"==typeof b)return a===b;if(a instanceof c.Attribute)return a.op!==b.op||a.key!==b.key?!1:a.value&&b.value?(a=a.value.value||a.value,b=b.value.value||b.value,a===b):a.value||b.value?!1:!0;if(a=a.value,b=b.value,a instanceof c.Selector){if(!(b instanceof c.Selector)||a.elements.length!==b.elements.length)return!1;for(var d=0;a.elements.length>d;d++){if(a.elements[d].combinator.value!==b.elements[d].combinator.value&&(0!==d||(a.elements[d].combinator.value||" ")!==(b.elements[d].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(a.elements[d].value,b.elements[d].value))return!1}return!0}return!1},extendSelector:function(a,b,d){var e,f,g,h,i,j=0,k=0,l=[];for(e=0;a.length>e;e++)h=a[e],f=b[h.pathIndex],g=new c.Element(h.initialCombinator,d.elements[0].value,d.elements[0].index,d.elements[0].currentFileInfo),h.pathIndex>j&&k>0&&(l[l.length-1].elements=l[l.length-1].elements.concat(b[j].elements.slice(k)),k=0,j++),i=f.elements.slice(k,h.index).concat([g]).concat(d.elements.slice(1)),j===h.pathIndex&&e>0?l[l.length-1].elements=l[l.length-1].elements.concat(i):(l=l.concat(b.slice(j,h.pathIndex)),l.push(new c.Selector(i))),j=h.endPathIndex,k=h.endPathElementIndex,k>=b[j].elements.length&&(k=0,j++);return b.length>j&&k>0&&(l[l.length-1].elements=l[l.length-1].elements.concat(b[j].elements.slice(k)),j++),l=l.concat(b.slice(j,b.length))},visitRulesetOut:function(){},visitMedia:function(a){var b=a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);b=b.concat(this.doExtendChaining(b,a.allExtends)),this.allExtendsStack.push(b)},visitMediaOut:function(){var a=this.allExtendsStack.length-1;this.allExtendsStack.length=a},visitDirective:function(a){var b=a.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);b=b.concat(this.doExtendChaining(b,a.allExtends)),this.allExtendsStack.push(b)},visitDirectiveOut:function(){var a=this.allExtendsStack.length-1;this.allExtendsStack.length=a}},b.exports=g},{"../logger":31,"../tree":60,"./visitor":88}],83:[function(a,b){function c(a){this.imports=[],this.variableImports=[],this._onSequencerEmpty=a,this._currentDepth=0}c.prototype.addImport=function(a){var b=this,c={callback:a,args:null,isReady:!1};return this.imports.push(c),function(){c.args=Array.prototype.slice.call(arguments,0),c.isReady=!0,b.tryRun()}},c.prototype.addVariableImport=function(a){this.variableImports.push(a)},c.prototype.tryRun=function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var a=this.imports[0];if(!a.isReady)return;this.imports=this.imports.slice(1),a.callback.apply(null,a.args)}if(0===this.variableImports.length)break;var b=this.variableImports[0];this.variableImports=this.variableImports.slice(1),b()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()},b.exports=c},{}],84:[function(a,b){var c=a("../contexts"),d=a("./visitor"),e=a("./import-sequencer"),f=function(a,b){this._visitor=new d(this),this._importer=a,this._finish=b,this.context=new c.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new e(this._onSequencerEmpty.bind(this))};f.prototype={isReplacing:!1,run:function(a){try{this._visitor.visit(a)}catch(b){this.error=b}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(a,b){var d=a.options.inline;if(!a.css||d){var e=new c.Eval(this.context,this.context.frames.slice(0)),f=e.frames[0];this.importCount++,a.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,a,e,f)):this.processImportNode(a,e,f)}b.visitDeeper=!1},processImportNode:function(a,b,c){var d,e=a.options.inline;try{d=a.evalForImport(b)}catch(f){f.filename||(f.index=a.index,f.filename=a.currentFileInfo.filename),a.css=!0,a.error=f}if(!d||d.css&&!e)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{d.options.multiple&&(b.importMultiple=!0);for(var g=void 0===d.css,h=0;c.rules.length>h;h++)if(c.rules[h]===a){c.rules[h]=d;break}var i=this.onImported.bind(this,d,b),j=this._sequencer.addImport(i);this._importer.push(d.getPath(),g,d.currentFileInfo,d.options,j)}},onImported:function(a,b,c,d,e,f){c&&(c.filename||(c.index=a.index,c.filename=a.currentFileInfo.filename),this.error=c);var g=this,h=a.options.inline,i=a.options.plugin,j=e||f in g.recursionDetector;if(b.importMultiple||(a.skip=j?!0:function(){return f in g.onceFileDetectionMap?!0:(g.onceFileDetectionMap[f]=!0,!1)}),d&&(a.root=d,a.importedFilename=f,!(h||i||!b.importMultiple&&j))){g.recursionDetector[f]=!0;var k=this.context;this.context=b;try{this._visitor.visit(d)}catch(c){this.error=c}this.context=k}g.importCount--,g.isFinished&&g._sequencer.tryRun()},visitRule:function(a,b){"DetachedRuleset"===a.value.type?this.context.frames.unshift(a):b.visitDeeper=!1},visitRuleOut:function(a){"DetachedRuleset"===a.value.type&&this.context.frames.shift()},visitDirective:function(a){this.context.frames.unshift(a)},visitDirectiveOut:function(){this.context.frames.shift()},visitMixinDefinition:function(a){this.context.frames.unshift(a)},visitMixinDefinitionOut:function(){this.context.frames.shift()},visitRuleset:function(a){this.context.frames.unshift(a)},visitRulesetOut:function(){this.context.frames.shift()},visitMedia:function(a){this.context.frames.unshift(a.rules[0])},visitMediaOut:function(){this.context.frames.shift()}},b.exports=f},{"../contexts":10,"./import-sequencer":83,"./visitor":88}],85:[function(a,b){var c={Visitor:a("./visitor"),ImportVisitor:a("./import-visitor"),ExtendVisitor:a("./extend-visitor"),JoinSelectorVisitor:a("./join-selector-visitor"),ToCSSVisitor:a("./to-css-visitor")};b.exports=c},{"./extend-visitor":82,"./import-visitor":84,"./join-selector-visitor":86,"./to-css-visitor":87,"./visitor":88}],86:[function(a,b){var c=a("./visitor"),d=function(){this.contexts=[[]],this._visitor=new c(this)};d.prototype={run:function(a){return this._visitor.visit(a)},visitRule:function(a,b){b.visitDeeper=!1},visitMixinDefinition:function(a,b){b.visitDeeper=!1},visitRuleset:function(a){var b,c=this.contexts[this.contexts.length-1],d=[];this.contexts.push(d),a.root||(b=a.selectors,b&&(b=b.filter(function(a){return a.getIsOutput()}),a.selectors=b.length?b:b=null,b&&a.joinSelectors(d,c,b)),b||(a.rules=null),a.paths=d)},visitRulesetOut:function(){this.contexts.length=this.contexts.length-1},visitMedia:function(a){var b=this.contexts[this.contexts.length-1];a.rules[0].root=0===b.length||b[0].multiMedia},visitDirective:function(a){var b=this.contexts[this.contexts.length-1];a.rules&&a.rules.length&&(a.rules[0].root=a.isRooted||0===b.length||null)}},b.exports=d},{"./visitor":88}],87:[function(a,b){var c=a("../tree"),d=a("./visitor"),e=function(a){this._visitor=new d(this),this._context=a};e.prototype={isReplacing:!0,run:function(a){return this._visitor.visit(a)},visitRule:function(a){return a.variable?void 0:a},visitMixinDefinition:function(a){\na.frames=[]},visitExtend:function(){},visitComment:function(a){return a.isSilent(this._context)?void 0:a},visitMedia:function(a,b){return a.accept(this._visitor),b.visitDeeper=!1,a.rules.length?a:void 0},visitImport:function(a){return void 0!==a.path.currentFileInfo.reference&&a.css?void 0:a},visitDirective:function(a,b){function d(a){var b,c=a.rules;1!==c.length||c[0].paths&&0!==c[0].paths.length||(c=c[0].rules);for(var d=0;c.length>d;d++)if(b=c[d],b.getIsReferenced&&b.getIsReferenced())return!0;return!1}if("@charset"===a.name){if(!a.getIsReferenced())return;if(this.charset){if(a.debugInfo){var e=new c.Comment("/* "+a.toCSS(this._context).replace(/\\n/g,"")+" */\\n");return e.debugInfo=a.debugInfo,this._visitor.visit(e)}return}this.charset=!0}if(a.rules&&a.rules.length){if(this._mergeRules(a.rules[0].rules),a.accept(this._visitor),b.visitDeeper=!1,a.getIsReferenced())return a;if(!a.rules||!a.rules.length)return;if(d(a))return a.markReferenced(),a}else if(a.getIsReferenced())return a},checkPropertiesInRoot:function(a){for(var b,d=0;a.length>d;d++)if(b=a[d],b instanceof c.Rule&&!b.variable)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:b.index,filename:b.currentFileInfo?b.currentFileInfo.filename:null}},visitRuleset:function(a,b){var d,e=[];if(a.firstRoot&&this.checkPropertiesInRoot(a.rules),a.root)a.accept(this._visitor),b.visitDeeper=!1,(a.firstRoot||a.rules&&a.rules.length>0)&&e.splice(0,0,a);else{a.paths&&(a.paths=a.paths.filter(function(a){var b;for(" "===a[0].elements[0].combinator.value&&(a[0].elements[0].combinator=new c.Combinator("")),b=0;a.length>b;b++)if(a[b].getIsReferenced()&&a[b].getIsOutput())return!0;return!1}));for(var f=a.rules,g=f?f.length:0,h=0;g>h;)d=f[h],d&&d.rules?(e.push(this._visitor.visit(d)),f.splice(h,1),g--):h++;g>0?a.accept(this._visitor):a.rules=null,b.visitDeeper=!1,f=a.rules,f&&(this._mergeRules(f),f=a.rules),f&&(this._removeDuplicateRules(f),f=a.rules),f&&f.length>0&&a.paths.length>0&&e.splice(0,0,a)}return 1===e.length?e[0]:e},_removeDuplicateRules:function(a){if(a){var b,d,e,f={};for(e=a.length-1;e>=0;e--)if(d=a[e],d instanceof c.Rule)if(f[d.name]){b=f[d.name],b instanceof c.Rule&&(b=f[d.name]=[f[d.name].toCSS(this._context)]);var g=d.toCSS(this._context);-1!==b.indexOf(g)?a.splice(e,1):b.push(g)}else f[d.name]=d}},_mergeRules:function(a){if(a){for(var b,d,e,f={},g=0;a.length>g;g++)d=a[g],d instanceof c.Rule&&d.merge&&(e=[d.name,d.important?"!":""].join(","),f[e]?a.splice(g--,1):f[e]=[],f[e].push(d));Object.keys(f).map(function(a){function e(a){return new c.Expression(a.map(function(a){return a.value}))}function g(a){return new c.Value(a.map(function(a){return a}))}if(b=f[a],b.length>1){d=b[0];var h=[],i=[];b.map(function(a){"+"===a.merge&&(i.length>0&&h.push(e(i)),i=[]),i.push(a)}),h.push(e(i)),d.value=g(h)}})}}},b.exports=e},{"../tree":60,"./visitor":88}],88:[function(a,b){function c(a){return a}function d(a,b){var c,e;for(c in a)if(a.hasOwnProperty(c))switch(e=a[c],typeof e){case"function":e.prototype&&e.prototype.type&&(e.prototype.typeIndex=b++);break;case"object":b=d(e,b)}return b}var e=a("../tree"),f={visitDeeper:!0},g=!1,h=function(a){this._implementation=a,this._visitFnCache=[],g||(d(e,1),g=!0)};h.prototype={visit:function(a){if(!a)return a;var b=a.typeIndex;if(!b)return a;var d,e=this._visitFnCache,g=this._implementation,h=b<<1,i=1|h,j=e[h],k=e[i],l=f;if(l.visitDeeper=!0,j||(d="visit"+a.type,j=g[d]||c,k=g[d+"Out"]||c,e[h]=j,e[i]=k),j!==c){var m=j.call(g,a,l);g.isReplacing&&(a=m)}return l.visitDeeper&&a&&a.accept&&a.accept(this),k!=c&&k.call(g,a),a},visitArray:function(a,b){if(!a)return a;var c,d=a.length;if(b||!this._implementation.isReplacing){for(c=0;d>c;c++)this.visit(a[c]);return a}var e=[];for(c=0;d>c;c++){var f=this.visit(a[c]);void 0!==f&&(f.splice?f.length&&this.flatten(f,e):e.push(f))}return e},flatten:function(a,b){b||(b=[]);var c,d,e,f,g,h;for(d=0,c=a.length;c>d;d++)if(e=a[d],void 0!==e)if(e.splice)for(g=0,f=e.length;f>g;g++)h=e[g],void 0!==h&&(h.splice?h.length&&this.flatten(h,b):b.push(h));else b.push(e);return b}},b.exports=h},{"../tree":60}],89:[function(a,b){function c(){if(!g){g=!0;for(var a,b=f.length;b;){a=f,f=[];for(var c=-1;++c<b;)a[c]();b=f.length}g=!1}}function d(){}var e=b.exports={},f=[],g=!1;e.nextTick=function(a){f.push(a),g||setTimeout(c,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],90:[function(a,b){"use strict";function c(a){function b(a){return null===i?void k.push(a):void f(function(){var b=i?a.onFulfilled:a.onRejected;if(null===b)return void(i?a.resolve:a.reject)(j);var c;try{c=b(j)}catch(d){return void a.reject(d)}a.resolve(c)})}function c(a){try{if(a===l)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void e(b.bind(a),c,g)}i=!0,j=a,h()}catch(d){g(d)}}function g(a){i=!1,j=a,h()}function h(){for(var a=0,c=k.length;c>a;a++)b(k[a]);k=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");var i=null,j=null,k=[],l=this;this.then=function(a,c){return new l.constructor(function(e,f){b(new d(a,c,e,f))})},e(a,c,g)}function d(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function e(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var f=a("asap");b.exports=c},{asap:92}],91:[function(a,b){"use strict";function c(a){this.then=function(b){return"function"!=typeof b?this:new d(function(c,d){e(function(){try{c(b(a))}catch(e){d(e)}})})}}var d=a("./core.js"),e=a("asap");b.exports=d,c.prototype=d.prototype;var f=new c(!0),g=new c(!1),h=new c(null),i=new c(void 0),j=new c(0),k=new c("");d.resolve=function(a){if(a instanceof d)return a;if(null===a)return h;if(void 0===a)return i;if(a===!0)return f;if(a===!1)return g;if(0===a)return j;if(""===a)return k;if("object"==typeof a||"function"==typeof a)try{var b=a.then;if("function"==typeof b)return new d(b.bind(a))}catch(e){return new d(function(a,b){b(e)})}return new c(a)},d.all=function(a){var b=Array.prototype.slice.call(a);return new d(function(a,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}b[f]=g,0===--e&&a(b)}catch(i){c(i)}}if(0===b.length)return a([]);for(var e=b.length,f=0;b.length>f;f++)d(f,b[f])})},d.reject=function(a){return new d(function(b,c){c(a)})},d.race=function(a){return new d(function(b,c){a.forEach(function(a){d.resolve(a).then(b,c)})})},d.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":90,asap:92}],92:[function(a,b){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&&(e.domain=void 0,b.enter());try{a()}catch(d){if(i)throw b&&b.exit(),setTimeout(c,0),b&&b.enter(),d;setTimeout(function(){throw d},0)}b&&b.exit()}g=!1}function d(b){f=f.next={task:b,domain:i&&a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;if("undefined"!=typeof a&&a.nextTick)i=!0,h=function(){a.nextTick(c)};else if("function"==typeof setImmediate)h="undefined"!=typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel;j.port1.onmessage=c,h=function(){j.port2.postMessage(0)}}else h=function(){setTimeout(c,0)};b.exports=d}).call(this,a("_process"))},{_process:89}],93:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var a=arguments.length?this.then.apply(this,arguments):this;a.then(null,function(a){setTimeout(function(){throw a},0)})})},{}],94:[function(a){a("asap");"undefined"==typeof Promise&&(Promise=a("./lib/core.js"),a("./lib/es6-extensions.js")),a("./polyfill-done.js")},{"./lib/core.js":90,"./lib/es6-extensions.js":91,"./polyfill-done.js":93,asap:92}]},{},[2])(2)});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXNzZXRzL2xlc3MuanMvbGVzcy5taW4uanM/M2ZlYiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsYUFBYSxHQUFHLElBQW9ELG9CQUFvQixLQUFLLFVBQXFMLENBQUMsWUFBWSx5QkFBeUIsZ0JBQWdCLFVBQVUsVUFBVSwwQ0FBMEMsZ0JBQWdCLE9BQUMsT0FBTyxvQkFBb0IsOENBQThDLGtDQUFrQyxZQUFZLFlBQVksbUNBQW1DLGlCQUFpQixnQkFBZ0Isc0JBQXNCLG9CQUFvQixrREFBa0QsV0FBVyxZQUFZLFNBQVMsRUFBRSxpQkFBaUIsZ0RBQWdELHdCQUF3Qiw4YkFBOGIseUVBQXlFLDZHQUE2RyxFQUFFLDBCQUEwQixtQkFBbUIseUJBQXlCLHNCQUFzQixxQ0FBcUMsdUNBQXVDLGlLQUFpSyxFQUFFLCtEQUErRCxtQkFBbUIsbUJBQW1CLFdBQVcsMEJBQTBCLDJHQUEyRywrT0FBK08sd0NBQXdDLHFCQUFxQiw2QkFBNkIsa0RBQWtELDJEQUEyRCx1QkFBdUIsU0FBUywwREFBMEQsMkJBQTJCLGlCQUFpQixtQ0FBbUMsdUNBQXVDLHFCQUFxQixLQUFLLEVBQUUsWUFBWSxtQkFBbUIsMEJBQTBCLFdBQVcsNkJBQTZCLHlEQUF5RCxVQUFVLE9BQU8sdUJBQXVCLE1BQU0saUNBQWlDLElBQUksMkNBQTJDLFNBQVMsa0VBQWtFLHNCQUFzQixxREFBcUQsaUdBQWlHLEdBQUcsbUJBQW1CLG9DQUFvQywwQkFBMEIsZ0JBQWdCLGtFQUFrRSxLQUFLLHFCQUFxQixNQUFNLEdBQUcsUUFBUSxxR0FBcUcsMEtBQTBLLHNCQUFzQiwyQ0FBMkMsTUFBTSw2Q0FBNkMsT0FBTyxnQkFBZ0IsU0FBUyxrQkFBa0Isa1VBQWtVLHlCQUF5QixzQkFBc0Isa0JBQWtCLGFBQWEsSUFBSSw4QkFBOEIsbUJBQW1CLHNCQUFzQixrQkFBa0Isa0JB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QixpQkFBaUIsWUFBWSwyQkFBMkIsRUFBRSxZQUFZLGlCQUFpQiw4RUFBOEUsNERBQTRELHdCQUF3QixzQkFBc0IsUUFBUSxJQUFJLEVBQUUsRUFBRSxHQUFHLGtCQUFrQixVQUFVLCtHQUErRyxFQUFFLGdGQUFnRixFQUFFLEdBQUcsU0FBUyxFIiwiZmlsZSI6Ii4vd2ViL2Fzc2V0cy9sZXNzLmpzL2xlc3MubWluLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBMZXNzIC0gTGVhbmVyIENTUyB2Mi41LjFcbiAqIGh0dHA6Ly9sZXNzY3NzLm9yZ1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAwOS0yMDE1LCBBbGV4aXMgU2VsbGllciA8c2VsZkBjbG91ZGhlYWQubmV0PlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSB2MiBMaWNlbnNlLlxuICpcbiAqL1xuXG4gLyoqICogQGxpY2Vuc2UgQXBhY2hlIHYyXG4gKi9cblxuIWZ1bmN0aW9uKGEpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWEoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sYSk7ZWxzZXt2YXIgYjtiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxiLmxlc3M9YSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gYShiLGMsZCl7ZnVuY3Rpb24gZShnLGgpe2lmKCFjW2ddKXtpZighYltnXSl7dmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighaCYmaSlyZXR1cm4gaShnLCEwKTtpZihmKXJldHVybiBmKGcsITApO3ZhciBqPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrZytcIidcIik7dGhyb3cgai5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGp9dmFyIGs9Y1tnXT17ZXhwb3J0czp7fX07YltnXVswXS5jYWxsKGsuZXhwb3J0cyxmdW5jdGlvbihhKXt2YXIgYz1iW2ddWzFdW2FdO3JldHVybiBlKGM/YzphKX0sayxrLmV4cG9ydHMsYSxiLGMsZCl9cmV0dXJuIGNbZ10uZXhwb3J0c31mb3IodmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxnPTA7ZC5sZW5ndGg+ZztnKyspZShkW2ddKTtyZXR1cm4gZX0oezE6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vdXRpbHNcIikuYWRkRGF0YUF0dHIsZD1hKFwiLi9icm93c2VyXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe2MoYixkLmN1cnJlbnRTY3JpcHQoYSkpLHZvaWQgMD09PWIuaXNGaWxlUHJvdG9jb2wmJihiLmlzRmlsZVByb3RvY29sPS9eKGZpbGV8KGNocm9tZXxzYWZhcmkpKC1leHRlbnNpb24pP3xyZXNvdXJjZXxxcmN8YXBwKTovLnRlc3QoYS5sb2NhdGlvbi5wcm90b2NvbCkpLGIuYXN5bmM9Yi5hc3luY3x8ITEsYi5maWxlQXN5bmM9Yi5maWxlQXN5bmN8fCExLGIucG9sbD1iLnBvbGx8fChiLmlzRmlsZVByb3RvY29sPzFlMzoxNTAwKSxiLmVudj1iLmVudnx8KFwiMTI3LjAuMC4xXCI9PWEubG9jYXRpb24uaG9zdG5hbWV8fFwiMC4wLjAuMFwiPT1hLmxvY2F0aW9uLmhvc3RuYW1lfHxcImxvY2FsaG9zdFwiPT1hLmxvY2F0aW9uLmhvc3RuYW1lfHxhLmxvY2F0aW9uLnBvcnQmJmEubG9jYXRpb24ucG9ydC5sZW5ndGg+MHx8Yi5pc0ZpbGVQcm90b2NvbD9cImRldmVsb3BtZW50XCI6XCJwcm9kdWN0aW9uXCIpO3ZhciBlPS8hZHVtcExpbmVOdW1iZXJzOihjb21tZW50c3xtZWRpYXF1ZXJ5fGFsbCkvLmV4ZWMoYS5sb2NhdGlvbi5oYXNoKTtlJiYoYi5kdW1wTGluZU51bWJlcnM9ZVsxXSksdm9pZCAwPT09Yi51c2VGaWxlQ2FjaGUmJihiLnVzZUZpbGVDYWNoZT0hMCksdm9pZCAwPT09Yi5vblJlYWR5JiYoYi5vblJlYWR5PSEwKX19LHtcIi4vYnJvd3NlclwiOjMsXCIuL3V0aWxzXCI6OX1dLDI6W2Z1bmN0aW9uKGEsYil7YShcInByb21pc2UvcG9seWZpbGwuanNcIik7dmFyIGM9d2luZG93Lmxlc3N8fHt9O2EoXCIuL2FkZC1kZWZhdWx0LW9wdGlvbnNcIikod2luZG93LGMpO3ZhciBkPWIuZXhwb3J0cz1hKFwiLi9pbmRleFwiKSh3aW5kb3csYyk7d2luZG93Lmxlc3M9ZCxjLm9uUmVhZHkmJigvIXdhdGNoLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5oYXNoKSYmZC53YXRjaCgpLGQucmVnaXN0ZXJTdHlsZXNoZWV0c0ltbWVkaWF0ZWx5KCksZC5wYWdlTG9hZEZpbmlzaGVkPWQucmVmcmVzaChcImRldmVsb3BtZW50XCI9PT1kLmVudikpfSx7XCIuL2FkZC1kZWZhdWx0LW9wdGlvbnNcIjoxLFwiLi9pbmRleFwiOjcsXCJwcm9taXNlL3BvbHlmaWxsLmpzXCI6OTR9XSwzOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL3V0aWxzXCIpO2IuZXhwb3J0cz17Y3JlYXRlQ1NTOmZ1bmN0aW9uKGEsYixkKXt2YXIgZT1kLmhyZWZ8fFwiXCIsZj1cImxlc3M6XCIrKGQudGl0bGV8fGMuZXh0cmFjdElkKGUpKSxnPWEuZ2V0RWxlbWVudEJ5SWQoZiksaD0hMSxpPWEuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO2kuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dC9jc3NcIiksZC5tZWRpYSYmaS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLGQubWVkaWEpLGkuaWQ9ZixpLnN0eWxlU2hlZXR8fChpLmFwcGVuZENoaWxkKGEuY3JlYXRlVGV4dE5vZGUoYikpLGg9bnVsbCE9PWcmJmcuY2hpbGROb2Rlcy5sZW5ndGg+MCYmaS5jaGlsZE5vZGVzLmxlbmd0aD4wJiZnLmZpcnN0Q2hpbGQubm9kZVZhbHVlPT09aS5maXJzdENoaWxkLm5vZGVWYWx1ZSk7dmFyIGo9YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYobnVsbD09PWd8fGg9PT0hMSl7dmFyIGs9ZCYmZC5uZXh0U2libGluZ3x8bnVsbDtrP2sucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSxrKTpqLmFwcGVuZENoaWxkKGkpfWlmKGcmJmg9PT0hMSYmZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGcpLGkuc3R5bGVTaGVldCl0cnl7aS5zdHlsZVNoZWV0LmNzc1RleHQ9Yn1jYXRjaChsKXt0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCByZWFzc2lnbiBzdHlsZVNoZWV0LmNzc1RleHQuXCIpfX0sY3VycmVudFNjcmlwdDpmdW5jdGlvbihhKXt2YXIgYj1hLmRvY3VtZW50O3JldHVybiBiLmN1cnJlbnRTY3JpcHR8fGZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtyZXR1cm4gYVthLmxlbmd0aC0xXX0oKX19fSx7XCIuL3V0aWxzXCI6OX1dLDQ6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1udWxsO2lmKFwiZGV2ZWxvcG1lbnRcIiE9PWIuZW52KXRyeXtkPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBhLmxvY2FsU3RvcmFnZT9udWxsOmEubG9jYWxTdG9yYWdlfWNhdGNoKGUpe31yZXR1cm57c2V0Q1NTOmZ1bmN0aW9uKGEsYixlKXtpZihkKXtjLmluZm8oXCJzYXZpbmcgXCIrYStcIiB0byBjYWNoZS5cIik7dHJ5e2Quc2V0SXRlbShhLGUpLGQuc2V0SXRlbShhK1wiOnRpbWVzdGFtcFwiLGIpfWNhdGNoKGYpe2MuZXJyb3IoJ2ZhaWxlZCB0byBzYXZlIFwiJythKydcIiB0byBsb2NhbCBzdG9yYWdlIGZvciBjYWNoaW5nLicpfX19LGdldENTUzpmdW5jdGlvbihhLGIpe3ZhciBjPWQmJmQuZ2V0SXRlbShhKSxlPWQmJmQuZ2V0SXRlbShhK1wiOnRpbWVzdGFtcFwiKTtyZXR1cm4gZSYmYi5sYXN0TW9kaWZpZWQmJm5ldyBEYXRlKGIubGFzdE1vZGlmaWVkKS52YWx1ZU9mKCk9PT1uZXcgRGF0ZShlKS52YWx1ZU9mKCk/Yzp2b2lkIDB9fX19LHt9XSw1OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL3V0aWxzXCIpLGQ9YShcIi4vYnJvd3NlclwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGUpe2Z1bmN0aW9uIGYoYixmKXt2YXIgZyxoLGk9XCJsZXNzLWVycm9yLW1lc3NhZ2U6XCIrYy5leHRyYWN0SWQoZnx8XCJcIiksaj0nPGxpPjxsYWJlbD57bGluZX08L2xhYmVsPjxwcmUgY2xhc3M9XCJ7Y2xhc3N9XCI+e2NvbnRlbnR9PC9wcmU+PC9saT4nLGs9YS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGw9W10sbT1iLmZpbGVuYW1lfHxmLG49bS5tYXRjaCgvKFteXFwvXSsoXFw/LiopPykkLylbMV07ay5pZD1pLGsuY2xhc3NOYW1lPVwibGVzcy1lcnJvci1tZXNzYWdlXCIsaD1cIjxoMz5cIisoYi50eXBlfHxcIlN5bnRheFwiKStcIkVycm9yOiBcIisoYi5tZXNzYWdlfHxcIlRoZXJlIGlzIGFuIGVycm9yIGluIHlvdXIgLmxlc3MgZmlsZVwiKSsnPC9oMz48cD5pbiA8YSBocmVmPVwiJyttKydcIj4nK24rXCI8L2E+IFwiO3ZhciBvPWZ1bmN0aW9uKGEsYixjKXt2b2lkIDAhPT1hLmV4dHJhY3RbYl0mJmwucHVzaChqLnJlcGxhY2UoL1xce2xpbmVcXH0vLChwYXJzZUludChhLmxpbmUsMTApfHwwKSsoYi0xKSkucmVwbGFjZSgvXFx7Y2xhc3NcXH0vLGMpLnJlcGxhY2UoL1xce2NvbnRlbnRcXH0vLGEuZXh0cmFjdFtiXSkpfTtiLmV4dHJhY3QmJihvKGIsMCxcIlwiKSxvKGIsMSxcImxpbmVcIiksbyhiLDIsXCJcIiksaCs9XCJvbiBsaW5lIFwiK2IubGluZStcIiwgY29sdW1uIFwiKyhiLmNvbHVtbisxKStcIjo8L3A+PHVsPlwiK2wuam9pbihcIlwiKStcIjwvdWw+XCIpLGIuc3RhY2smJihiLmV4dHJhY3R8fGUubG9nTGV2ZWw+PTQpJiYoaCs9XCI8YnIvPlN0YWNrIFRyYWNlPC9iciAvPlwiK2Iuc3RhY2suc3BsaXQoXCJcXG5cIikuc2xpY2UoMSkuam9pbihcIjxici8+XCIpKSxrLmlubmVySFRNTD1oLGQuY3JlYXRlQ1NTKGEuZG9jdW1lbnQsW1wiLmxlc3MtZXJyb3ItbWVzc2FnZSB1bCwgLmxlc3MtZXJyb3ItbWVzc2FnZSBsaSB7XCIsXCJsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XCIsXCJtYXJnaW4tcmlnaHQ6IDE1cHg7XCIsXCJwYWRkaW5nOiA0cHggMDtcIixcIm1hcmdpbjogMDtcIixcIn1cIixcIi5sZXNzLWVycm9yLW1lc3NhZ2UgbGFiZWwge1wiLFwiZm9udC1zaXplOiAxMnB4O1wiLFwibWFyZ2luLXJpZ2h0OiAxNXB4O1wiLFwicGFkZGluZzogNHB4IDA7XCIsXCJjb2xvcjogI2NjNzc3NztcIixcIn1cIixcIi5sZXNzLWVycm9yLW1lc3NhZ2UgcHJlIHtcIixcImNvbG9yOiAjZGQ2NjY2O1wiLFwicGFkZGluZzogNHB4IDA7XCIsXCJtYXJnaW46IDA7XCIsXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XCIsXCJ9XCIsXCIubGVzcy1lcnJvci1tZXNzYWdlIHByZS5saW5lIHtcIixcImNvbG9yOiAjZmYwMDAwO1wiLFwifVwiLFwiLmxlc3MtZXJyb3ItbWVzc2FnZSBoMyB7XCIsXCJmb250LXNpemU6IDIwcHg7XCIsXCJmb250LXdlaWdodDogYm9sZDtcIixcInBhZGRpbmc6IDE1cHggMCA1cHggMDtcIixcIm1hcmdpbjogMDtcIixcIn1cIixcIi5sZXNzLWVycm9yLW1lc3NhZ2UgYSB7XCIsXCJjb2xvcjogIzEwYVwiLFwifVwiLFwiLmxlc3MtZXJyb3ItbWVzc2FnZSAuZXJyb3Ige1wiLFwiY29sb3I6IHJlZDtcIixcImZvbnQtd2VpZ2h0OiBib2xkO1wiLFwicGFkZGluZy1ib3R0b206IDJweDtcIixcImJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgcmVkO1wiLFwifVwiXS5qb2luKFwiXFxuXCIpLHt0aXRsZTpcImVycm9yLW1lc3NhZ2VcIn0pLGsuc3R5bGUuY3NzVGV4dD1bXCJmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWZcIixcImJvcmRlcjogMXB4IHNvbGlkICNlMDBcIixcImJhY2tncm91bmQtY29sb3I6ICNlZWVcIixcImJvcmRlci1yYWRpdXM6IDVweFwiLFwiLXdlYmtpdC1ib3JkZXItcmFkaXVzOiA1cHhcIixcIi1tb3otYm9yZGVyLXJhZGl1czogNXB4XCIsXCJjb2xvcjogI2UwMFwiLFwicGFkZGluZzogMTVweFwiLFwibWFyZ2luLWJvdHRvbTogMTVweFwiXS5qb2luKFwiO1wiKSxcImRldmVsb3BtZW50XCI9PT1lLmVudiYmKGc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgYj1hLmRvY3VtZW50LGM9Yi5ib2R5O2MmJihiLmdldEVsZW1lbnRCeUlkKGkpP2MucmVwbGFjZUNoaWxkKGssYi5nZXRFbGVtZW50QnlJZChpKSk6Yy5pbnNlcnRCZWZvcmUoayxjLmZpcnN0Q2hpbGQpLGNsZWFySW50ZXJ2YWwoZykpfSwxMCkpfWZ1bmN0aW9uIGcoYSxiKXtlLmVycm9yUmVwb3J0aW5nJiZcImh0bWxcIiE9PWUuZXJyb3JSZXBvcnRpbmc/XCJjb25zb2xlXCI9PT1lLmVycm9yUmVwb3J0aW5nP2soYSxiKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmVycm9yUmVwb3J0aW5nJiZlLmVycm9yUmVwb3J0aW5nKFwiYWRkXCIsYSxiKTpmKGEsYil9ZnVuY3Rpb24gaChiKXt2YXIgZD1hLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVzcy1lcnJvci1tZXNzYWdlOlwiK2MuZXh0cmFjdElkKGIpKTtkJiZkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCl9ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBqKGEpe2UuZXJyb3JSZXBvcnRpbmcmJlwiaHRtbFwiIT09ZS5lcnJvclJlcG9ydGluZz9cImNvbnNvbGVcIj09PWUuZXJyb3JSZXBvcnRpbmc/aShhKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmVycm9yUmVwb3J0aW5nJiZlLmVycm9yUmVwb3J0aW5nKFwicmVtb3ZlXCIsYSk6aChhKX1mdW5jdGlvbiBrKGEsYyl7dmFyIGQ9XCJ7bGluZX0ge2NvbnRlbnR9XCIsZj1hLmZpbGVuYW1lfHxjLGc9W10saD0oYS50eXBlfHxcIlN5bnRheFwiKStcIkVycm9yOiBcIisoYS5tZXNzYWdlfHxcIlRoZXJlIGlzIGFuIGVycm9yIGluIHlvdXIgLmxlc3MgZmlsZVwiKStcIiBpbiBcIitmK1wiIFwiLGk9ZnVuY3Rpb24oYSxiLGMpe3ZvaWQgMCE9PWEuZXh0cmFjdFtiXSYmZy5wdXNoKGQucmVwbGFjZSgvXFx7bGluZVxcfS8sKHBhcnNlSW50KGEubGluZSwxMCl8fDApKyhiLTEpKS5yZXBsYWNlKC9cXHtjbGFzc1xcfS8sYykucmVwbGFjZSgvXFx7Y29udGVudFxcfS8sYS5leHRyYWN0W2JdKSl9O2EuZXh0cmFjdCYmKGkoYSwwLFwiXCIpLGkoYSwxLFwibGluZVwiKSxpKGEsMixcIlwiKSxoKz1cIm9uIGxpbmUgXCIrYS5saW5lK1wiLCBjb2x1bW4gXCIrKGEuY29sdW1uKzEpK1wiOlxcblwiK2cuam9pbihcIlxcblwiKSksYS5zdGFjayYmKGEuZXh0cmFjdHx8ZS5sb2dMZXZlbD49NCkmJihoKz1cIlxcblN0YWNrIFRyYWNlXFxuXCIrYS5zdGFjayksYi5sb2dnZXIuZXJyb3IoaCl9cmV0dXJue2FkZDpnLHJlbW92ZTpqfX19LHtcIi4vYnJvd3NlclwiOjMsXCIuL3V0aWxzXCI6OX1dLDY6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZCgpe2lmKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCYmIShcImZpbGU6XCI9PT13aW5kb3cubG9jYXRpb24ucHJvdG9jb2wmJlwiQWN0aXZlWE9iamVjdFwiaW4gd2luZG93KSlyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0O3RyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKX1jYXRjaChhKXtyZXR1cm4gYy5lcnJvcihcImJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEFKQVguXCIpLG51bGx9fXZhciBlPWEoXCIuLi9sZXNzL2Vudmlyb25tZW50L2Fic3RyYWN0LWZpbGUtbWFuYWdlci5qc1wiKSxmPXt9LGc9ZnVuY3Rpb24oKXt9O3JldHVybiBnLnByb3RvdHlwZT1uZXcgZSxnLnByb3RvdHlwZS5hbHdheXNNYWtlUGF0aHNBYnNvbHV0ZT1mdW5jdGlvbigpe3JldHVybiEwfSxnLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/dGhpcy5leHRyYWN0VXJsUGFydHMoYixhKS5wYXRoOmJ9LGcucHJvdG90eXBlLmRvWEhSPWZ1bmN0aW9uKGEsZSxmLGcpe2Z1bmN0aW9uIGgoYixjLGQpe2Iuc3RhdHVzPj0yMDAmJjMwMD5iLnN0YXR1cz9jKGIucmVzcG9uc2VUZXh0LGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKGIuc3RhdHVzLGEpfXZhciBpPWQoKSxqPWIuaXNGaWxlUHJvdG9jb2w/Yi5maWxlQXN5bmM6Yi5hc3luYztcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLm92ZXJyaWRlTWltZVR5cGUmJmkub3ZlcnJpZGVNaW1lVHlwZShcInRleHQvY3NzXCIpLGMuZGVidWcoXCJYSFI6IEdldHRpbmcgJ1wiK2ErXCInXCIpLGkub3BlbihcIkdFVFwiLGEsaiksaS5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsZXx8XCJ0ZXh0L3gtbGVzcywgdGV4dC9jc3M7IHE9MC45LCAqLyo7IHE9MC41XCIpLGkuc2VuZChudWxsKSxiLmlzRmlsZVByb3RvY29sJiYhYi5maWxlQXN5bmM/MD09PWkuc3RhdHVzfHxpLnN0YXR1cz49MjAwJiYzMDA+aS5zdGF0dXM/ZihpLnJlc3BvbnNlVGV4dCk6ZyhpLnN0YXR1cyxhKTpqP2kub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09aS5yZWFkeVN0YXRlJiZoKGksZixnKX06aChpLGYsZyl9LGcucHJvdG90eXBlLnN1cHBvcnRzPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGcucHJvdG90eXBlLmNsZWFyRmlsZUNhY2hlPWZ1bmN0aW9uKCl7Zj17fX0sZy5wcm90b3R5cGUubG9hZEZpbGU9ZnVuY3Rpb24oYSxiLGMsZCxlKXtiJiYhdGhpcy5pc1BhdGhBYnNvbHV0ZShhKSYmKGE9YithKSxjPWN8fHt9O3ZhciBnPXRoaXMuZXh0cmFjdFVybFBhcnRzKGEsd2luZG93LmxvY2F0aW9uLmhyZWYpLGg9Zy51cmw7aWYoYy51c2VGaWxlQ2FjaGUmJmZbaF0pdHJ5e3ZhciBpPWZbaF07ZShudWxsLHtjb250ZW50czppLGZpbGVuYW1lOmgsd2ViSW5mbzp7bGFzdE1vZGlmaWVkOm5ldyBEYXRlfX0pfWNhdGNoKGope2Uoe2ZpbGVuYW1lOmgsbWVzc2FnZTpcIkVycm9yIGxvYWRpbmcgZmlsZSBcIitoK1wiIGVycm9yIHdhcyBcIitqLm1lc3NhZ2V9KX1lbHNlIHRoaXMuZG9YSFIoaCxjLm1pbWUsZnVuY3Rpb24oYSxiKXtmW2hdPWEsZShudWxsLHtjb250ZW50czphLGZpbGVuYW1lOmgsd2ViSW5mbzp7bGFzdE1vZGlmaWVkOmJ9fSl9LGZ1bmN0aW9uKGEsYil7ZSh7dHlwZTpcIkZpbGVcIixtZXNzYWdlOlwiJ1wiK2IrXCInIHdhc24ndCBmb3VuZCAoXCIrYStcIilcIixocmVmOmh9KX0pfSxnfX0se1wiLi4vbGVzcy9lbnZpcm9ubWVudC9hYnN0cmFjdC1maWxlLW1hbmFnZXIuanNcIjoxNH1dLDc6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vdXRpbHNcIikuYWRkRGF0YUF0dHIsZD1hKFwiLi9icm93c2VyXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihiLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuIGUucG9zdFByb2Nlc3NvciYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5wb3N0UHJvY2Vzc29yJiYoYT1lLnBvc3RQcm9jZXNzb3IuY2FsbChhLGEpfHxhKSxhfWZ1bmN0aW9uIGcoYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGJbY109YVtjXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpO3JldHVybiBhLmFwcGx5KGIsZCl9fWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiLGM9bS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInN0eWxlXCIpLGQ9MDtjLmxlbmd0aD5kO2QrKylpZihiPWNbZF0sYi50eXBlLm1hdGNoKHQpKXt2YXIgZj1nKGUpO2YubW9kaWZ5VmFycz1hO3ZhciBpPWIuaW5uZXJIVE1MfHxcIlwiO2YuZmlsZW5hbWU9bS5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKiQvLFwiXCIpLG4ucmVuZGVyKGksZixoKGZ1bmN0aW9uKGEsYixjKXtiP3IuYWRkKGIsXCJpbmxpbmVcIik6KGEudHlwZT1cInRleHQvY3NzXCIsYS5zdHlsZVNoZWV0P2Euc3R5bGVTaGVldC5jc3NUZXh0PWMuY3NzOmEuaW5uZXJIVE1MPWMuY3NzKX0sbnVsbCxiKSl9fWZ1bmN0aW9uIGooYSxiLGQsaCxpKXtmdW5jdGlvbiBqKGMpe3ZhciBlPWMuY29udGVudHMsZz1jLmZpbGVuYW1lLGk9Yy53ZWJJbmZvLGo9e2N1cnJlbnREaXJlY3Rvcnk6cS5nZXRQYXRoKGcpLGZpbGVuYW1lOmcscm9vdEZpbGVuYW1lOmcscmVsYXRpdmVVcmxzOmsucmVsYXRpdmVVcmxzfTtpZihqLmVudHJ5UGF0aD1qLmN1cnJlbnREaXJlY3Rvcnksai5yb290cGF0aD1rLnJvb3RwYXRofHxqLmN1cnJlbnREaXJlY3RvcnksaSYmKGkucmVtYWluaW5nPWgsIWsubW9kaWZ5VmFycykpe3ZhciBsPXMuZ2V0Q1NTKGcsaSk7aWYoIWQmJmwpcmV0dXJuIGkubG9jYWw9ITAsdm9pZCBiKG51bGwsbCxlLGEsaSxnKX1yLnJlbW92ZShnKSxrLnJvb3RGaWxlSW5mbz1qLG4ucmVuZGVyKGUsayxmdW5jdGlvbihjLGQpe2M/KGMuaHJlZj1nLGIoYykpOihkLmNzcz1mKGQuY3NzKSxrLm1vZGlmeVZhcnN8fHMuc2V0Q1NTKGEuaHJlZixpLmxhc3RNb2RpZmllZCxkLmNzcyksYihudWxsLGQuY3NzLGUsYSxpLGcpKX0pfXZhciBrPWcoZSk7YyhrLGEpLGsubWltZT1hLnR5cGUsaSYmKGsubW9kaWZ5VmFycz1pKSxxLmxvYWRGaWxlKGEuaHJlZixudWxsLGssbyxmdW5jdGlvbihhLGMpe3JldHVybiBhP3ZvaWQgYihhKTp2b2lkIGooYyl9KX1mdW5jdGlvbiBrKGEsYixjKXtmb3IodmFyIGQ9MDtuLnNoZWV0cy5sZW5ndGg+ZDtkKyspaihuLnNoZWV0c1tkXSxhLGIsbi5zaGVldHMubGVuZ3RoLShkKzEpLGMpfWZ1bmN0aW9uIGwoKXtcImRldmVsb3BtZW50XCI9PT1uLmVudiYmKG4ud2F0Y2hUaW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe24ud2F0Y2hNb2RlJiYocS5jbGVhckZpbGVDYWNoZSgpLGsoZnVuY3Rpb24oYSxjLGUsZil7YT9yLmFkZChhLGEuaHJlZnx8Zi5ocmVmKTpjJiZkLmNyZWF0ZUNTUyhiLmRvY3VtZW50LGMsZil9KSl9LGUucG9sbCkpfXZhciBtPWIuZG9jdW1lbnQsbj1hKFwiLi4vbGVzc1wiKSgpO24ub3B0aW9ucz1lO3ZhciBvPW4uZW52aXJvbm1lbnQscD1hKFwiLi9maWxlLW1hbmFnZXJcIikoZSxuLmxvZ2dlcikscT1uZXcgcDtvLmFkZEZpbGVNYW5hZ2VyKHEpLG4uRmlsZU1hbmFnZXI9cCxhKFwiLi9sb2ctbGlzdGVuZXJcIikobixlKTt2YXIgcj1hKFwiLi9lcnJvci1yZXBvcnRpbmdcIikoYixuLGUpLHM9bi5jYWNoZT1lLmNhY2hlfHxhKFwiLi9jYWNoZVwiKShiLGUsbi5sb2dnZXIpO2UuZnVuY3Rpb25zJiZuLmZ1bmN0aW9ucy5mdW5jdGlvblJlZ2lzdHJ5LmFkZE11bHRpcGxlKGUuZnVuY3Rpb25zKTt2YXIgdD0vXnRleHRcXC8oeC0pP2xlc3MkLztyZXR1cm4gbi53YXRjaD1mdW5jdGlvbigpe3JldHVybiBuLndhdGNoTW9kZXx8KG4uZW52PVwiZGV2ZWxvcG1lbnRcIixsKCkpLHRoaXMud2F0Y2hNb2RlPSEwLCEwfSxuLnVud2F0Y2g9ZnVuY3Rpb24oKXtyZXR1cm4gY2xlYXJJbnRlcnZhbChuLndhdGNoVGltZXIpLHRoaXMud2F0Y2hNb2RlPSExLCExfSxuLnJlZ2lzdGVyU3R5bGVzaGVldHNJbW1lZGlhdGVseT1mdW5jdGlvbigpe3ZhciBhPW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsaW5rXCIpO24uc2hlZXRzPVtdO2Zvcih2YXIgYj0wO2EubGVuZ3RoPmI7YisrKShcInN0eWxlc2hlZXQvbGVzc1wiPT09YVtiXS5yZWx8fGFbYl0ucmVsLm1hdGNoKC9zdHlsZXNoZWV0LykmJmFbYl0udHlwZS5tYXRjaCh0KSkmJm4uc2hlZXRzLnB1c2goYVtiXSl9LG4ucmVnaXN0ZXJTdHlsZXNoZWV0cz1mdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihhKXtuLnJlZ2lzdGVyU3R5bGVzaGVldHNJbW1lZGlhdGVseSgpLGEoKX0pfSxuLm1vZGlmeVZhcnM9ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucmVmcmVzaCghMCxhLCExKX0sbi5yZWZyZXNoPWZ1bmN0aW9uKGEsYyxlKXtyZXR1cm4oYXx8ZSkmJmUhPT0hMSYmcS5jbGVhckZpbGVDYWNoZSgpLG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsZil7dmFyIGcsaCxqO2c9aD1uZXcgRGF0ZSxrKGZ1bmN0aW9uKGEsYyxpLGssbCl7cmV0dXJuIGE/KHIuYWRkKGEsYS5ocmVmfHxrLmhyZWYpLHZvaWQgZihhKSk6KG4ubG9nZ2VyLmluZm8obC5sb2NhbD9cImxvYWRpbmcgXCIray5ocmVmK1wiIGZyb20gY2FjaGUuXCI6XCJyZW5kZXJlZCBcIitrLmhyZWYrXCIgc3VjY2Vzc2Z1bGx5LlwiKSxkLmNyZWF0ZUNTUyhiLmRvY3VtZW50LGMsayksbi5sb2dnZXIuaW5mbyhcImNzcyBmb3IgXCIray5ocmVmK1wiIGdlbmVyYXRlZCBpbiBcIisobmV3IERhdGUtaCkrXCJtc1wiKSwwPT09bC5yZW1haW5pbmcmJihqPW5ldyBEYXRlLWcsbi5sb2dnZXIuaW5mbyhcImxlc3MgaGFzIGZpbmlzaGVkLiBjc3MgZ2VuZXJhdGVkIGluIFwiK2orXCJtc1wiKSxlKHtzdGFydFRpbWU6ZyxlbmRUaW1lOmgsdG90YWxNaWxsaXNlY29uZHM6aixzaGVldHM6bi5zaGVldHMubGVuZ3RofSkpLHZvaWQoaD1uZXcgRGF0ZSkpfSxhLGMpLGkoYyl9KX0sbi5yZWZyZXNoU3R5bGVzPWksbn19LHtcIi4uL2xlc3NcIjoyOSxcIi4vYnJvd3NlclwiOjMsXCIuL2NhY2hlXCI6NCxcIi4vZXJyb3ItcmVwb3J0aW5nXCI6NSxcIi4vZmlsZS1tYW5hZ2VyXCI6NixcIi4vbG9nLWxpc3RlbmVyXCI6OCxcIi4vdXRpbHNcIjo5fV0sODpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz00LGQ9MyxlPTIsZj0xO2IubG9nTGV2ZWw9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIubG9nTGV2ZWw/Yi5sb2dMZXZlbDpcImRldmVsb3BtZW50XCI9PT1iLmVudj9kOmYsYi5sb2dnZXJzfHwoYi5sb2dnZXJzPVt7ZGVidWc6ZnVuY3Rpb24oYSl7Yi5sb2dMZXZlbD49YyYmY29uc29sZS5sb2coYSl9LGluZm86ZnVuY3Rpb24oYSl7Yi5sb2dMZXZlbD49ZCYmY29uc29sZS5sb2coYSl9LHdhcm46ZnVuY3Rpb24oYSl7Yi5sb2dMZXZlbD49ZSYmY29uc29sZS53YXJuKGEpfSxlcnJvcjpmdW5jdGlvbihhKXtiLmxvZ0xldmVsPj1mJiZjb25zb2xlLmVycm9yKGEpfX1dKTtmb3IodmFyIGc9MDtiLmxvZ2dlcnMubGVuZ3RoPmc7ZysrKWEubG9nZ2VyLmFkZExpc3RlbmVyKGIubG9nZ2Vyc1tnXSl9fSx7fV0sOTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9e2V4dHJhY3RJZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9eW2Etei1dKzpcXC8rP1teXFwvXSsvLFwiXCIpLnJlcGxhY2UoL1tcXD9cXCZdbGl2ZXJlbG9hZD1cXHcrLyxcIlwiKS5yZXBsYWNlKC9eXFwvLyxcIlwiKS5yZXBsYWNlKC9cXC5bYS16QS1aXSskLyxcIlwiKS5yZXBsYWNlKC9bXlxcLlxcdy1dKy9nLFwiLVwiKS5yZXBsYWNlKC9cXC4vZyxcIjpcIil9LGFkZERhdGFBdHRyOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjIGluIGIuZGF0YXNldClpZihiLmRhdGFzZXQuaGFzT3duUHJvcGVydHkoYykpaWYoXCJlbnZcIj09PWN8fFwiZHVtcExpbmVOdW1iZXJzXCI9PT1jfHxcInJvb3RwYXRoXCI9PT1jfHxcImVycm9yUmVwb3J0aW5nXCI9PT1jKWFbY109Yi5kYXRhc2V0W2NdO2Vsc2UgdHJ5e2FbY109SlNPTi5wYXJzZShiLmRhdGFzZXRbY10pfWNhdGNoKGQpe319fX0se31dLDEwOltmdW5jdGlvbihhLGIpe3ZhciBjPXt9O2IuZXhwb3J0cz1jO3ZhciBkPWZ1bmN0aW9uKGEsYixjKXtpZihhKWZvcih2YXIgZD0wO2MubGVuZ3RoPmQ7ZCsrKWEuaGFzT3duUHJvcGVydHkoY1tkXSkmJihiW2NbZF1dPWFbY1tkXV0pfSxlPVtcInBhdGhzXCIsXCJyZWxhdGl2ZVVybHNcIixcInJvb3RwYXRoXCIsXCJzdHJpY3RJbXBvcnRzXCIsXCJpbnNlY3VyZVwiLFwiZHVtcExpbmVOdW1iZXJzXCIsXCJjb21wcmVzc1wiLFwic3luY0ltcG9ydFwiLFwiY2h1bmtJbnB1dFwiLFwibWltZVwiLFwidXNlRmlsZUNhY2hlXCIsXCJwcm9jZXNzSW1wb3J0c1wiLFwicmVmZXJlbmNlXCIsXCJwbHVnaW5NYW5hZ2VyXCJdO2MuUGFyc2U9ZnVuY3Rpb24oYSl7ZChhLHRoaXMsZSksXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMucGF0aHMmJih0aGlzLnBhdGhzPVt0aGlzLnBhdGhzXSl9O3ZhciBmPVtcInBhdGhzXCIsXCJjb21wcmVzc1wiLFwiaWVDb21wYXRcIixcInN0cmljdE1hdGhcIixcInN0cmljdFVuaXRzXCIsXCJzb3VyY2VNYXBcIixcImltcG9ydE11bHRpcGxlXCIsXCJ1cmxBcmdzXCIsXCJqYXZhc2NyaXB0RW5hYmxlZFwiLFwicGx1Z2luTWFuYWdlclwiLFwiaW1wb3J0YW50U2NvcGVcIl07Yy5FdmFsPWZ1bmN0aW9uKGEsYil7ZChhLHRoaXMsZiksXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMucGF0aHMmJih0aGlzLnBhdGhzPVt0aGlzLnBhdGhzXSksdGhpcy5mcmFtZXM9Ynx8W10sdGhpcy5pbXBvcnRhbnRTY29wZT10aGlzLmltcG9ydGFudFNjb3BlfHxbXX0sYy5FdmFsLnByb3RvdHlwZS5pblBhcmVudGhlc2lzPWZ1bmN0aW9uKCl7dGhpcy5wYXJlbnNTdGFja3x8KHRoaXMucGFyZW5zU3RhY2s9W10pLHRoaXMucGFyZW5zU3RhY2sucHVzaCghMCl9LGMuRXZhbC5wcm90b3R5cGUub3V0T2ZQYXJlbnRoZXNpcz1mdW5jdGlvbigpe3RoaXMucGFyZW5zU3RhY2sucG9wKCl9LGMuRXZhbC5wcm90b3R5cGUuaXNNYXRoT249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJpY3RNYXRoP3RoaXMucGFyZW5zU3RhY2smJnRoaXMucGFyZW5zU3RhY2subGVuZ3RoOiEwfSxjLkV2YWwucHJvdG90eXBlLmlzUGF0aFJlbGF0aXZlPWZ1bmN0aW9uKGEpe3JldHVybiEvXig/OlthLXotXSs6fFxcL3wjKS9pLnRlc3QoYSl9LGMuRXZhbC5wcm90b3R5cGUubm9ybWFsaXplUGF0aD1mdW5jdGlvbihhKXt2YXIgYixjPWEuc3BsaXQoXCIvXCIpLnJldmVyc2UoKTtmb3IoYT1bXTswIT09Yy5sZW5ndGg7KXN3aXRjaChiPWMucG9wKCkpe2Nhc2VcIi5cIjpicmVhaztjYXNlXCIuLlwiOjA9PT1hLmxlbmd0aHx8XCIuLlwiPT09YVthLmxlbmd0aC0xXT9hLnB1c2goYik6YS5wb3AoKTticmVhaztkZWZhdWx0OmEucHVzaChiKX1yZXR1cm4gYS5qb2luKFwiL1wiKX19LHt9XSwxMTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9e2FsaWNlYmx1ZTpcIiNmMGY4ZmZcIixhbnRpcXVld2hpdGU6XCIjZmFlYmQ3XCIsYXF1YTpcIiMwMGZmZmZcIixhcXVhbWFyaW5lOlwiIzdmZmZkNFwiLGF6dXJlOlwiI2YwZmZmZlwiLGJlaWdlOlwiI2Y1ZjVkY1wiLGJpc3F1ZTpcIiNmZmU0YzRcIixibGFjazpcIiMwMDAwMDBcIixibGFuY2hlZGFsbW9uZDpcIiNmZmViY2RcIixibHVlOlwiIzAwMDBmZlwiLGJsdWV2aW9sZXQ6XCIjOGEyYmUyXCIsYnJvd246XCIjYTUyYTJhXCIsYnVybHl3b29kOlwiI2RlYjg4N1wiLGNhZGV0Ymx1ZTpcIiM1ZjllYTBcIixjaGFydHJldXNlOlwiIzdmZmYwMFwiLGNob2NvbGF0ZTpcIiNkMjY5MWVcIixjb3JhbDpcIiNmZjdmNTBcIixjb3JuZmxvd2VyYmx1ZTpcIiM2NDk1ZWRcIixjb3Juc2lsazpcIiNmZmY4ZGNcIixjcmltc29uOlwiI2RjMTQzY1wiLGN5YW46XCIjMDBmZmZmXCIsZGFya2JsdWU6XCIjMDAwMDhiXCIsZGFya2N5YW46XCIjMDA4YjhiXCIsZGFya2dvbGRlbnJvZDpcIiNiODg2MGJcIixkYXJrZ3JheTpcIiNhOWE5YTlcIixkYXJrZ3JleTpcIiNhOWE5YTlcIixkYXJrZ3JlZW46XCIjMDA2NDAwXCIsZGFya2toYWtpOlwiI2JkYjc2YlwiLGRhcmttYWdlbnRhOlwiIzhiMDA4YlwiLGRhcmtvbGl2ZWdyZWVuOlwiIzU1NmIyZlwiLGRhcmtvcmFuZ2U6XCIjZmY4YzAwXCIsZGFya29yY2hpZDpcIiM5OTMyY2NcIixkYXJrcmVkOlwiIzhiMDAwMFwiLGRhcmtzYWxtb246XCIjZTk5NjdhXCIsZGFya3NlYWdyZWVuOlwiIzhmYmM4ZlwiLGRhcmtzbGF0ZWJsdWU6XCIjNDgzZDhiXCIsZGFya3NsYXRlZ3JheTpcIiMyZjRmNGZcIixkYXJrc2xhdGVncmV5OlwiIzJmNGY0ZlwiLGRhcmt0dXJxdW9pc2U6XCIjMDBjZWQxXCIsZGFya3Zpb2xldDpcIiM5NDAwZDNcIixkZWVwcGluazpcIiNmZjE0OTNcIixkZWVwc2t5Ymx1ZTpcIiMwMGJmZmZcIixkaW1ncmF5OlwiIzY5Njk2OVwiLGRpbWdyZXk6XCIjNjk2OTY5XCIsZG9kZ2VyYmx1ZTpcIiMxZTkwZmZcIixmaXJlYnJpY2s6XCIjYjIyMjIyXCIsZmxvcmFsd2hpdGU6XCIjZmZmYWYwXCIsZm9yZXN0Z3JlZW46XCIjMjI4YjIyXCIsZnVjaHNpYTpcIiNmZjAwZmZcIixnYWluc2Jvcm86XCIjZGNkY2RjXCIsZ2hvc3R3aGl0ZTpcIiNmOGY4ZmZcIixnb2xkOlwiI2ZmZDcwMFwiLGdvbGRlbnJvZDpcIiNkYWE1MjBcIixncmF5OlwiIzgwODA4MFwiLGdyZXk6XCIjODA4MDgwXCIsZ3JlZW46XCIjMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCIjYWRmZjJmXCIsaG9uZXlkZXc6XCIjZjBmZmYwXCIsaG90cGluazpcIiNmZjY5YjRcIixpbmRpYW5yZWQ6XCIjY2Q1YzVjXCIsaW5kaWdvOlwiIzRiMDA4MlwiLGl2b3J5OlwiI2ZmZmZmMFwiLGtoYWtpOlwiI2YwZTY4Y1wiLGxhdmVuZGVyOlwiI2U2ZTZmYVwiLGxhdmVuZGVyYmx1c2g6XCIjZmZmMGY1XCIsbGF3bmdyZWVuOlwiIzdjZmMwMFwiLGxlbW9uY2hpZmZvbjpcIiNmZmZhY2RcIixsaWdodGJsdWU6XCIjYWRkOGU2XCIsbGlnaHRjb3JhbDpcIiNmMDgwODBcIixsaWdodGN5YW46XCIjZTBmZmZmXCIsbGlnaHRnb2xkZW5yb2R5ZWxsb3c6XCIjZmFmYWQyXCIsbGlnaHRncmF5OlwiI2QzZDNkM1wiLGxpZ2h0Z3JleTpcIiNkM2QzZDNcIixsaWdodGdyZWVuOlwiIzkwZWU5MFwiLGxpZ2h0cGluazpcIiNmZmI2YzFcIixsaWdodHNhbG1vbjpcIiNmZmEwN2FcIixsaWdodHNlYWdyZWVuOlwiIzIwYjJhYVwiLGxpZ2h0c2t5Ymx1ZTpcIiM4N2NlZmFcIixsaWdodHNsYXRlZ3JheTpcIiM3Nzg4OTlcIixsaWdodHNsYXRlZ3JleTpcIiM3Nzg4OTlcIixsaWdodHN0ZWVsYmx1ZTpcIiNiMGM0ZGVcIixsaWdodHllbGxvdzpcIiNmZmZmZTBcIixsaW1lOlwiIzAwZmYwMFwiLGxpbWVncmVlbjpcIiMzMmNkMzJcIixsaW5lbjpcIiNmYWYwZTZcIixtYWdlbnRhOlwiI2ZmMDBmZlwiLG1hcm9vbjpcIiM4MDAwMDBcIixtZWRpdW1hcXVhbWFyaW5lOlwiIzY2Y2RhYVwiLG1lZGl1bWJsdWU6XCIjMDAwMGNkXCIsbWVkaXVtb3JjaGlkOlwiI2JhNTVkM1wiLG1lZGl1bXB1cnBsZTpcIiM5MzcwZDhcIixtZWRpdW1zZWFncmVlbjpcIiMzY2IzNzFcIixtZWRpdW1zbGF0ZWJsdWU6XCIjN2I2OGVlXCIsbWVkaXVtc3ByaW5nZ3JlZW46XCIjMDBmYTlhXCIsbWVkaXVtdHVycXVvaXNlOlwiIzQ4ZDFjY1wiLG1lZGl1bXZpb2xldHJlZDpcIiNjNzE1ODVcIixtaWRuaWdodGJsdWU6XCIjMTkxOTcwXCIsbWludGNyZWFtOlwiI2Y1ZmZmYVwiLG1pc3R5cm9zZTpcIiNmZmU0ZTFcIixtb2NjYXNpbjpcIiNmZmU0YjVcIixuYXZham93aGl0ZTpcIiNmZmRlYWRcIixuYXZ5OlwiIzAwMDA4MFwiLG9sZGxhY2U6XCIjZmRmNWU2XCIsb2xpdmU6XCIjODA4MDAwXCIsb2xpdmVkcmFiOlwiIzZiOGUyM1wiLG9yYW5nZTpcIiNmZmE1MDBcIixvcmFuZ2VyZWQ6XCIjZmY0NTAwXCIsb3JjaGlkOlwiI2RhNzBkNlwiLHBhbGVnb2xkZW5yb2Q6XCIjZWVlOGFhXCIscGFsZWdyZWVuOlwiIzk4ZmI5OFwiLHBhbGV0dXJxdW9pc2U6XCIjYWZlZWVlXCIscGFsZXZpb2xldHJlZDpcIiNkODcwOTNcIixwYXBheWF3aGlwOlwiI2ZmZWZkNVwiLHBlYWNocHVmZjpcIiNmZmRhYjlcIixwZXJ1OlwiI2NkODUzZlwiLHBpbms6XCIjZmZjMGNiXCIscGx1bTpcIiNkZGEwZGRcIixwb3dkZXJibHVlOlwiI2IwZTBlNlwiLHB1cnBsZTpcIiM4MDAwODBcIixyZWJlY2NhcHVycGxlOlwiIzY2MzM5OVwiLHJlZDpcIiNmZjAwMDBcIixyb3N5YnJvd246XCIjYmM4ZjhmXCIscm95YWxibHVlOlwiIzQxNjllMVwiLHNhZGRsZWJyb3duOlwiIzhiNDUxM1wiLHNhbG1vbjpcIiNmYTgwNzJcIixzYW5keWJyb3duOlwiI2Y0YTQ2MFwiLHNlYWdyZWVuOlwiIzJlOGI1N1wiLHNlYXNoZWxsOlwiI2ZmZjVlZVwiLHNpZW5uYTpcIiNhMDUyMmRcIixzaWx2ZXI6XCIjYzBjMGMwXCIsc2t5Ymx1ZTpcIiM4N2NlZWJcIixzbGF0ZWJsdWU6XCIjNmE1YWNkXCIsc2xhdGVncmF5OlwiIzcwODA5MFwiLHNsYXRlZ3JleTpcIiM3MDgwOTBcIixzbm93OlwiI2ZmZmFmYVwiLHNwcmluZ2dyZWVuOlwiIzAwZmY3ZlwiLHN0ZWVsYmx1ZTpcIiM0NjgyYjRcIix0YW46XCIjZDJiNDhjXCIsdGVhbDpcIiMwMDgwODBcIix0aGlzdGxlOlwiI2Q4YmZkOFwiLHRvbWF0bzpcIiNmZjYzNDdcIix0dXJxdW9pc2U6XCIjNDBlMGQwXCIsdmlvbGV0OlwiI2VlODJlZVwiLHdoZWF0OlwiI2Y1ZGViM1wiLHdoaXRlOlwiI2ZmZmZmZlwiLHdoaXRlc21va2U6XCIjZjVmNWY1XCIseWVsbG93OlwiI2ZmZmYwMFwiLHllbGxvd2dyZWVuOlwiIzlhY2QzMlwifX0se31dLDEyOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz17Y29sb3JzOmEoXCIuL2NvbG9yc1wiKSx1bml0Q29udmVyc2lvbnM6YShcIi4vdW5pdC1jb252ZXJzaW9uc1wiKX19LHtcIi4vY29sb3JzXCI6MTEsXCIuL3VuaXQtY29udmVyc2lvbnNcIjoxM31dLDEzOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz17bGVuZ3RoOnttOjEsY206LjAxLG1tOi4wMDEsXCJpblwiOi4wMjU0LHB4Oi4wMjU0Lzk2LHB0Oi4wMjU0LzcyLHBjOi4wMjU0LzcyKjEyfSxkdXJhdGlvbjp7czoxLG1zOi4wMDF9LGFuZ2xlOntyYWQ6MS8oMipNYXRoLlBJKSxkZWc6MS8zNjAsZ3JhZDouMDAyNSx0dXJuOjF9fX0se31dLDE0OltmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7fTtjLnByb3RvdHlwZS5nZXRQYXRoPWZ1bmN0aW9uKGEpe3ZhciBiPWEubGFzdEluZGV4T2YoXCI/XCIpO3JldHVybiBiPjAmJihhPWEuc2xpY2UoMCxiKSksYj1hLmxhc3RJbmRleE9mKFwiL1wiKSwwPmImJihiPWEubGFzdEluZGV4T2YoXCJcXFxcXCIpKSwwPmI/XCJcIjphLnNsaWNlKDAsYisxKX0sYy5wcm90b3R5cGUudHJ5QXBwZW5kRXh0ZW5zaW9uPWZ1bmN0aW9uKGEsYil7cmV0dXJuLyhcXC5bYS16XSokKXwoW1xcPztdLiopJC8udGVzdChhKT9hOmErYn0sYy5wcm90b3R5cGUudHJ5QXBwZW5kTGVzc0V4dGVuc2lvbj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50cnlBcHBlbmRFeHRlbnNpb24oYSxcIi5sZXNzXCIpfSxjLnByb3RvdHlwZS5zdXBwb3J0c1N5bmM9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYy5wcm90b3R5cGUuYWx3YXlzTWFrZVBhdGhzQWJzb2x1dGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYy5wcm90b3R5cGUuaXNQYXRoQWJzb2x1dGU9ZnVuY3Rpb24oYSl7cmV0dXJuL14oPzpbYS16LV0rOnxcXC98XFxcXHwjKS9pLnRlc3QoYSl9LGMucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9hK2I6Yn0sYy5wcm90b3R5cGUucGF0aERpZmY9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPXRoaXMuZXh0cmFjdFVybFBhcnRzKGEpLGg9dGhpcy5leHRyYWN0VXJsUGFydHMoYiksaT1cIlwiO2lmKGcuaG9zdFBhcnQhPT1oLmhvc3RQYXJ0KXJldHVyblwiXCI7Zm9yKGQ9TWF0aC5tYXgoaC5kaXJlY3Rvcmllcy5sZW5ndGgsZy5kaXJlY3Rvcmllcy5sZW5ndGgpLGM9MDtkPmMmJmguZGlyZWN0b3JpZXNbY109PT1nLmRpcmVjdG9yaWVzW2NdO2MrKyk7Zm9yKGY9aC5kaXJlY3Rvcmllcy5zbGljZShjKSxlPWcuZGlyZWN0b3JpZXMuc2xpY2UoYyksYz0wO2YubGVuZ3RoLTE+YztjKyspaSs9XCIuLi9cIjtmb3IoYz0wO2UubGVuZ3RoLTE+YztjKyspaSs9ZVtjXStcIi9cIjtyZXR1cm4gaX0sYy5wcm90b3R5cGUuZXh0cmFjdFVybFBhcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPS9eKCg/OlthLXotXSs6KT9cXC8rPyg/OlteXFwvXFw/I10qXFwvKXwoW1xcL1xcXFxdKSk/KCg/OlteXFwvXFxcXFxcPyNdKltcXC9cXFxcXSkqKShbXlxcL1xcXFxcXD8jXSopKFsjXFw/XS4qKT8kL2ksZj1hLm1hdGNoKGUpLGc9e30saD1bXTtpZighZil0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgcGFyc2Ugc2hlZXQgaHJlZiAtICdcIithK1wiJ1wiKTtpZihiJiYoIWZbMV18fGZbMl0pKXtpZihkPWIubWF0Y2goZSksIWQpdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IHBhcnNlIHBhZ2UgdXJsIC0gJ1wiK2IrXCInXCIpO2ZbMV09ZlsxXXx8ZFsxXXx8XCJcIixmWzJdfHwoZlszXT1kWzNdK2ZbM10pfWlmKGZbM10pe2ZvcihoPWZbM10ucmVwbGFjZSgvXFxcXC9nLFwiL1wiKS5zcGxpdChcIi9cIiksYz0wO2gubGVuZ3RoPmM7YysrKVwiLlwiPT09aFtjXSYmKGguc3BsaWNlKGMsMSksYy09MSk7Zm9yKGM9MDtoLmxlbmd0aD5jO2MrKylcIi4uXCI9PT1oW2NdJiZjPjAmJihoLnNwbGljZShjLTEsMiksYy09Mil9cmV0dXJuIGcuaG9zdFBhcnQ9ZlsxXSxnLmRpcmVjdG9yaWVzPWgsZy5wYXRoPShmWzFdfHxcIlwiKStoLmpvaW4oXCIvXCIpLGcuZmlsZVVybD1nLnBhdGgrKGZbNF18fFwiXCIpLGcudXJsPWcuZmlsZVVybCsoZls1XXx8XCJcIiksZ30sYi5leHBvcnRzPWN9LHt9XSwxNTpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi4vbG9nZ2VyXCIpLGQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmZpbGVNYW5hZ2Vycz1ifHxbXSxhPWF8fHt9O2Zvcih2YXIgYz1bXCJlbmNvZGVCYXNlNjRcIixcIm1pbWVMb29rdXBcIixcImNoYXJzZXRMb29rdXBcIixcImdldFNvdXJjZU1hcEdlbmVyYXRvclwiXSxkPVtdLGU9ZC5jb25jYXQoYyksZj0wO2UubGVuZ3RoPmY7ZisrKXt2YXIgZz1lW2ZdLGg9YVtnXTtoP3RoaXNbZ109aC5iaW5kKGEpOmQubGVuZ3RoPmYmJnRoaXMud2FybihcIm1pc3NpbmcgcmVxdWlyZWQgZnVuY3Rpb24gaW4gZW52aXJvbm1lbnQgLSBcIitnKX19O2QucHJvdG90eXBlLmdldEZpbGVNYW5hZ2VyPWZ1bmN0aW9uKGEsYixkLGUsZil7YXx8Yy53YXJuKFwiZ2V0RmlsZU1hbmFnZXIgY2FsbGVkIHdpdGggbm8gZmlsZW5hbWUuLiBQbGVhc2UgcmVwb3J0IHRoaXMgaXNzdWUuIGNvbnRpbnVpbmcuXCIpLG51bGw9PWImJmMud2FybihcImdldEZpbGVNYW5hZ2VyIGNhbGxlZCB3aXRoIG51bGwgZGlyZWN0b3J5Li4gUGxlYXNlIHJlcG9ydCB0aGlzIGlzc3VlLiBjb250aW51aW5nLlwiKTt2YXIgZz10aGlzLmZpbGVNYW5hZ2VycztkLnBsdWdpbk1hbmFnZXImJihnPVtdLmNvbmNhdChnKS5jb25jYXQoZC5wbHVnaW5NYW5hZ2VyLmdldEZpbGVNYW5hZ2VycygpKSk7Zm9yKHZhciBoPWcubGVuZ3RoLTE7aD49MDtoLS0pe3ZhciBpPWdbaF07aWYoaVtmP1wic3VwcG9ydHNTeW5jXCI6XCJzdXBwb3J0c1wiXShhLGIsZCxlKSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0sZC5wcm90b3R5cGUuYWRkRmlsZU1hbmFnZXI9ZnVuY3Rpb24oYSl7dGhpcy5maWxlTWFuYWdlcnMucHVzaChhKX0sZC5wcm90b3R5cGUuY2xlYXJGaWxlTWFuYWdlcnM9ZnVuY3Rpb24oKXt0aGlzLmZpbGVNYW5hZ2Vycz1bXX0sYi5leHBvcnRzPWR9LHtcIi4uL2xvZ2dlclwiOjMxfV0sMTY6W2Z1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiLGQpe3ZhciBlLGYsZyxoLGk9Yi5hbHBoYSxqPWQuYWxwaGEsaz1bXTtnPWoraSooMS1qKTtmb3IodmFyIGw9MDszPmw7bCsrKWU9Yi5yZ2JbbF0vMjU1LGY9ZC5yZ2JbbF0vMjU1LGg9YShlLGYpLGcmJihoPShqKmYraSooZS1qKihlK2YtaCkpKS9nKSxrW2xdPTI1NSpoO3JldHVybiBuZXcgYyhrLGcpfXZhciBjPWEoXCIuLi90cmVlL2NvbG9yXCIpLGQ9YShcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIiksZT17bXVsdGlwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSpifSxzY3JlZW46ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStiLWEqYn0sb3ZlcmxheTpmdW5jdGlvbihhLGIpe3JldHVybiBhKj0yLDE+PWE/ZS5tdWx0aXBseShhLGIpOmUuc2NyZWVuKGEtMSxiKX0sc29mdGxpZ2h0OmZ1bmN0aW9uKGEsYil7dmFyIGM9MSxkPWE7cmV0dXJuIGI+LjUmJihkPTEsYz1hPi4yNT9NYXRoLnNxcnQoYSk6KCgxNiphLTEyKSphKzQpKmEpLGEtKDEtMipiKSpkKihjLWEpfSxoYXJkbGlnaHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZS5vdmVybGF5KGIsYSl9LGRpZmZlcmVuY2U6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTWF0aC5hYnMoYS1iKX0sZXhjbHVzaW9uOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGErYi0yKmEqYn0sYXZlcmFnZTpmdW5jdGlvbihhLGIpe3JldHVybihhK2IpLzJ9LG5lZ2F0aW9uOmZ1bmN0aW9uKGEsYil7cmV0dXJuIDEtTWF0aC5hYnMoYStiLTEpfX07Zm9yKHZhciBmIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShmKSYmKGJbZl09Yi5iaW5kKG51bGwsZVtmXSkpO2QuYWRkTXVsdGlwbGUoYil9LHtcIi4uL3RyZWUvY29sb3JcIjo0OCxcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIjoyMX1dLDE3OltmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3JldHVybiBNYXRoLm1pbigxLE1hdGgubWF4KDAsYSkpfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGYuaHNsYShhLmgsYS5zLGEubCxhLmEpfWZ1bmN0aW9uIGQoYSl7aWYoYSBpbnN0YW5jZW9mIGcpcmV0dXJuIHBhcnNlRmxvYXQoYS51bml0LmlzKFwiJVwiKT9hLnZhbHVlLzEwMDphLnZhbHVlKTtpZihcIm51bWJlclwiPT10eXBlb2YgYSlyZXR1cm4gYTt0aHJvd3t0eXBlOlwiQXJndW1lbnRcIixtZXNzYWdlOlwiY29sb3IgZnVuY3Rpb25zIHRha2UgbnVtYmVycyBhcyBwYXJhbWV0ZXJzXCJ9fWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGcmJmEudW5pdC5pcyhcIiVcIik/cGFyc2VGbG9hdChhLnZhbHVlKmIvMTAwKTpkKGEpfXZhciBmLGc9YShcIi4uL3RyZWUvZGltZW5zaW9uXCIpLGg9YShcIi4uL3RyZWUvY29sb3JcIiksaT1hKFwiLi4vdHJlZS9xdW90ZWRcIiksaj1hKFwiLi4vdHJlZS9hbm9ueW1vdXNcIiksaz1hKFwiLi9mdW5jdGlvbi1yZWdpc3RyeVwiKTtmPXtyZ2I6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmLnJnYmEoYSxiLGMsMSl9LHJnYmE6ZnVuY3Rpb24oYSxiLGMsZil7dmFyIGc9W2EsYixjXS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwyNTUpfSk7cmV0dXJuIGY9ZChmKSxuZXcgaChnLGYpfSxoc2w6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmLmhzbGEoYSxiLGMsMSl9LGhzbGE6ZnVuY3Rpb24oYSxjLGUsZyl7ZnVuY3Rpb24gaChhKXtyZXR1cm4gYT0wPmE/YSsxOmE+MT9hLTE6YSwxPjYqYT9qKyhpLWopKmEqNjoxPjIqYT9pOjI+MyphP2orKGktaikqKDIvMy1hKSo2Omp9YT1kKGEpJTM2MC8zNjAsYz1iKGQoYykpLGU9YihkKGUpKSxnPWIoZChnKSk7dmFyIGk9LjU+PWU/ZSooYysxKTplK2MtZSpjLGo9MiplLWk7cmV0dXJuIGYucmdiYSgyNTUqaChhKzEvMyksMjU1KmgoYSksMjU1KmgoYS0xLzMpLGcpfSxoc3Y6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmLmhzdmEoYSxiLGMsMSl9LGhzdmE6ZnVuY3Rpb24oYSxiLGMsZSl7YT1kKGEpJTM2MC8zNjAqMzYwLGI9ZChiKSxjPWQoYyksZT1kKGUpO3ZhciBnLGg7Zz1NYXRoLmZsb29yKGEvNjAlNiksaD1hLzYwLWc7dmFyIGk9W2MsYyooMS1iKSxjKigxLWgqYiksYyooMS0oMS1oKSpiKV0saj1bWzAsMywxXSxbMiwwLDFdLFsxLDAsM10sWzEsMiwwXSxbMywxLDBdLFswLDEsMl1dO3JldHVybiBmLnJnYmEoMjU1KmlbaltnXVswXV0sMjU1KmlbaltnXVsxXV0sMjU1KmlbaltnXVsyXV0sZSl9LGh1ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGcoYS50b0hTTCgpLmgpfSxzYXR1cmF0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZygxMDAqYS50b0hTTCgpLnMsXCIlXCIpfSxsaWdodG5lc3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBnKDEwMCphLnRvSFNMKCkubCxcIiVcIil9LGhzdmh1ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGcoYS50b0hTVigpLmgpfSxoc3ZzYXR1cmF0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZygxMDAqYS50b0hTVigpLnMsXCIlXCIpfSxoc3Z2YWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGcoMTAwKmEudG9IU1YoKS52LFwiJVwiKX0scmVkOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZyhhLnJnYlswXSl9LGdyZWVuOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZyhhLnJnYlsxXSl9LGJsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBnKGEucmdiWzJdKX0sYWxwaGE6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBnKGEudG9IU0woKS5hKX0sbHVtYTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGcoYS5sdW1hKCkqYS5hbHBoYSoxMDAsXCIlXCIpfSxsdW1pbmFuY2U6ZnVuY3Rpb24oYSl7dmFyIGI9LjIxMjYqYS5yZ2JbMF0vMjU1Ky43MTUyKmEucmdiWzFdLzI1NSsuMDcyMiphLnJnYlsyXS8yNTU7cmV0dXJuIG5ldyBnKGIqYS5hbHBoYSoxMDAsXCIlXCIpfSxzYXR1cmF0ZTpmdW5jdGlvbihhLGQsZSl7aWYoIWEucmdiKXJldHVybiBudWxsO3ZhciBmPWEudG9IU0woKTtyZXR1cm4gZi5zKz1cInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmXCJyZWxhdGl2ZVwiPT09ZS52YWx1ZT9mLnMqZC52YWx1ZS8xMDA6ZC52YWx1ZS8xMDAsZi5zPWIoZi5zKSxjKGYpfSxkZXNhdHVyYXRlOmZ1bmN0aW9uKGEsZCxlKXt2YXIgZj1hLnRvSFNMKCk7cmV0dXJuIGYucy09XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJlwicmVsYXRpdmVcIj09PWUudmFsdWU/Zi5zKmQudmFsdWUvMTAwOmQudmFsdWUvMTAwLGYucz1iKGYucyksYyhmKX0sbGlnaHRlbjpmdW5jdGlvbihhLGQsZSl7dmFyIGY9YS50b0hTTCgpO3JldHVybiBmLmwrPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZcInJlbGF0aXZlXCI9PT1lLnZhbHVlP2YubCpkLnZhbHVlLzEwMDpkLnZhbHVlLzEwMCxmLmw9YihmLmwpLGMoZil9LGRhcmtlbjpmdW5jdGlvbihhLGQsZSl7dmFyIGY9YS50b0hTTCgpO3JldHVybiBmLmwtPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZcInJlbGF0aXZlXCI9PT1lLnZhbHVlP2YubCpkLnZhbHVlLzEwMDpkLnZhbHVlLzEwMCxmLmw9YihmLmwpLGMoZil9LGZhZGVpbjpmdW5jdGlvbihhLGQsZSl7dmFyIGY9YS50b0hTTCgpO3JldHVybiBmLmErPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBlJiZcInJlbGF0aXZlXCI9PT1lLnZhbHVlP2YuYSpkLnZhbHVlLzEwMDpkLnZhbHVlLzEwMCxmLmE9YihmLmEpLGMoZil9LGZhZGVvdXQ6ZnVuY3Rpb24oYSxkLGUpe3ZhciBmPWEudG9IU0woKTtyZXR1cm4gZi5hLT1cInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmXCJyZWxhdGl2ZVwiPT09ZS52YWx1ZT9mLmEqZC52YWx1ZS8xMDA6ZC52YWx1ZS8xMDAsZi5hPWIoZi5hKSxjKGYpfSxmYWRlOmZ1bmN0aW9uKGEsZCl7dmFyIGU9YS50b0hTTCgpO3JldHVybiBlLmE9ZC52YWx1ZS8xMDAsZS5hPWIoZS5hKSxjKGUpfSxzcGluOmZ1bmN0aW9uKGEsYil7dmFyIGQ9YS50b0hTTCgpLGU9KGQuaCtiLnZhbHVlKSUzNjA7cmV0dXJuIGQuaD0wPmU/MzYwK2U6ZSxjKGQpfSxtaXg6ZnVuY3Rpb24oYSxiLGMpe2EudG9IU0wmJmIudG9IU0x8fChjb25zb2xlLmxvZyhiLnR5cGUpLGNvbnNvbGUuZGlyKGIpKSxjfHwoYz1uZXcgZyg1MCkpO3ZhciBkPWMudmFsdWUvMTAwLGU9MipkLTEsZj1hLnRvSFNMKCkuYS1iLnRvSFNMKCkuYSxpPSgoZSpmPT0tMT9lOihlK2YpLygxK2UqZikpKzEpLzIsaj0xLWksaz1bYS5yZ2JbMF0qaStiLnJnYlswXSpqLGEucmdiWzFdKmkrYi5yZ2JbMV0qaixhLnJnYlsyXSppK2IucmdiWzJdKmpdLGw9YS5hbHBoYSpkK2IuYWxwaGEqKDEtZCk7cmV0dXJuIG5ldyBoKGssbCl9LGdyZXlzY2FsZTpmdW5jdGlvbihhKXtyZXR1cm4gZi5kZXNhdHVyYXRlKGEsbmV3IGcoMTAwKSl9LGNvbnRyYXN0OmZ1bmN0aW9uKGEsYixjLGUpe2lmKCFhLnJnYilyZXR1cm4gbnVsbDtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgYyYmKGM9Zi5yZ2JhKDI1NSwyNTUsMjU1LDEpKSxcInVuZGVmaW5lZFwiPT10eXBlb2YgYiYmKGI9Zi5yZ2JhKDAsMCwwLDEpKSxiLmx1bWEoKT5jLmx1bWEoKSl7dmFyIGc9YztjPWIsYj1nfXJldHVybiBlPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBlPy40MzpkKGUpLGEubHVtYSgpPGU/YzpifSxhcmdiOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgaihhLnRvQVJHQigpKX0sY29sb3I6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIGkmJi9eIyhbYS1mMC05XXs2fXxbYS1mMC05XXszfSkkL2kudGVzdChhLnZhbHVlKSlyZXR1cm4gbmV3IGgoYS52YWx1ZS5zbGljZSgxKSk7aWYoYSBpbnN0YW5jZW9mIGh8fChhPWguZnJvbUtleXdvcmQoYS52YWx1ZSkpKXJldHVybiBhLnZhbHVlPXZvaWQgMCxhO3Rocm93e3R5cGU6XCJBcmd1bWVudFwiLG1lc3NhZ2U6XCJhcmd1bWVudCBtdXN0IGJlIGEgY29sb3Iga2V5d29yZCBvciAzLzYgZGlnaXQgaGV4IGUuZy4gI0ZGRlwifX0sdGludDpmdW5jdGlvbihhLGIpe3JldHVybiBmLm1peChmLnJnYigyNTUsMjU1LDI1NSksYSxiKX0sc2hhZGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZi5taXgoZi5yZ2IoMCwwLDApLGEsYil9fSxrLmFkZE11bHRpcGxlKGYpfSx7XCIuLi90cmVlL2Fub255bW91c1wiOjQ0LFwiLi4vdHJlZS9jb2xvclwiOjQ4LFwiLi4vdHJlZS9kaW1lbnNpb25cIjo1NCxcIi4uL3RyZWUvcXVvdGVkXCI6NzEsXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCI6MjF9XSwxODpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYil7dmFyIGM9YShcIi4uL3RyZWUvcXVvdGVkXCIpLGQ9YShcIi4uL3RyZWUvdXJsXCIpLGU9YShcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIiksZj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgZChiLGEuaW5kZXgsYS5jdXJyZW50RmlsZUluZm8pLmV2YWwoYS5jb250ZXh0KX0sZz1hKFwiLi4vbG9nZ2VyXCIpO2UuYWRkKFwiZGF0YS11cmlcIixmdW5jdGlvbihhLGUpe2V8fChlPWEsYT1udWxsKTt2YXIgaD1hJiZhLnZhbHVlLGk9ZS52YWx1ZSxqPXRoaXMuY3VycmVudEZpbGVJbmZvLGs9ai5yZWxhdGl2ZVVybHM/ai5jdXJyZW50RGlyZWN0b3J5OmouZW50cnlQYXRoLGw9aS5pbmRleE9mKFwiI1wiKSxtPVwiXCI7LTEhPT1sJiYobT1pLnNsaWNlKGwpLGk9aS5zbGljZSgwLGwpKTt2YXIgbj1iLmdldEZpbGVNYW5hZ2VyKGksayx0aGlzLmNvbnRleHQsYiwhMCk7aWYoIW4pcmV0dXJuIGYodGhpcyxlKTt2YXIgbz0hMTtpZihhKW89LztiYXNlNjQkLy50ZXN0KGgpO2Vsc2V7aWYoaD1iLm1pbWVMb29rdXAoaSksXCJpbWFnZS9zdmcreG1sXCI9PT1oKW89ITE7ZWxzZXt2YXIgcD1iLmNoYXJzZXRMb29rdXAoaCk7bz1bXCJVUy1BU0NJSVwiLFwiVVRGLThcIl0uaW5kZXhPZihwKTwwfW8mJihoKz1cIjtiYXNlNjRcIil9dmFyIHE9bi5sb2FkRmlsZVN5bmMoaSxrLHRoaXMuY29udGV4dCxiKTtpZighcS5jb250ZW50cylyZXR1cm4gZy53YXJuKFwiU2tpcHBlZCBkYXRhLXVyaSBlbWJlZGRpbmcgb2YgXCIraStcIiBiZWNhdXNlIGZpbGUgbm90IGZvdW5kXCIpLGYodGhpcyxlfHxhKTt2YXIgcj1xLmNvbnRlbnRzO2lmKG8mJiFiLmVuY29kZUJhc2U2NClyZXR1cm4gZih0aGlzLGUpO3I9bz9iLmVuY29kZUJhc2U2NChyKTplbmNvZGVVUklDb21wb25lbnQocik7dmFyIHM9XCJkYXRhOlwiK2grXCIsXCIrcittLHQ9MzI3Njg7cmV0dXJuIHMubGVuZ3RoPj10JiZ0aGlzLmNvbnRleHQuaWVDb21wYXQhPT0hMT8oZy53YXJuKFwiU2tpcHBlZCBkYXRhLXVyaSBlbWJlZGRpbmcgb2YgXCIraStcIiBiZWNhdXNlIGl0cyBzaXplIChcIitzLmxlbmd0aCtcIiBjaGFyYWN0ZXJzKSBleGNlZWRzIElFOC1zYWZlIFwiK3QrXCIgY2hhcmFjdGVycyFcIiksZih0aGlzLGV8fGEpKTpuZXcgZChuZXcgYygnXCInK3MrJ1wiJyxzLCExLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pfSl9fSx7XCIuLi9sb2dnZXJcIjozMSxcIi4uL3RyZWUvcXVvdGVkXCI6NzEsXCIuLi90cmVlL3VybFwiOjc4LFwiLi9mdW5jdGlvbi1yZWdpc3RyeVwiOjIxfV0sMTk6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4uL3RyZWUva2V5d29yZFwiKSxkPWEoXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCIpLGU9e2V2YWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnZhbHVlXyxiPXRoaXMuZXJyb3JfO2lmKGIpdGhyb3cgYjtyZXR1cm4gbnVsbCE9YT9hP2MuVHJ1ZTpjLkZhbHNlOnZvaWQgMH0sdmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZV89YX0sZXJyb3I6ZnVuY3Rpb24oYSl7dGhpcy5lcnJvcl89YX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnZhbHVlXz10aGlzLmVycm9yXz1udWxsfX07ZC5hZGQoXCJkZWZhdWx0XCIsZS5ldmFsLmJpbmQoZSkpLGIuZXhwb3J0cz1lfSx7XCIuLi90cmVlL2tleXdvcmRcIjo2MyxcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIjoyMX1dLDIwOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuLi90cmVlL2V4cHJlc3Npb25cIiksZD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLm5hbWU9YS50b0xvd2VyQ2FzZSgpLHRoaXMuaW5kZXg9Yyx0aGlzLmNvbnRleHQ9Yix0aGlzLmN1cnJlbnRGaWxlSW5mbz1kLHRoaXMuZnVuYz1iLmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5LmdldCh0aGlzLm5hbWUpfTtkLnByb3RvdHlwZS5pc1ZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5mdW5jKX0sZC5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihhKXtyZXR1cm4gQXJyYXkuaXNBcnJheShhKSYmKGE9YS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJDb21tZW50XCI9PT1hLnR5cGU/ITE6ITB9KS5tYXAoZnVuY3Rpb24oYSl7aWYoXCJFeHByZXNzaW9uXCI9PT1hLnR5cGUpe3ZhciBiPWEudmFsdWUuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVyblwiQ29tbWVudFwiPT09YS50eXBlPyExOiEwfSk7cmV0dXJuIDE9PT1iLmxlbmd0aD9iWzBdOm5ldyBjKGIpfXJldHVybiBhfSkpLHRoaXMuZnVuYy5hcHBseSh0aGlzLGEpfSxiLmV4cG9ydHM9ZH0se1wiLi4vdHJlZS9leHByZXNzaW9uXCI6NTd9XSwyMTpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybntfZGF0YTp7fSxhZGQ6ZnVuY3Rpb24oYSxiKXthPWEudG9Mb3dlckNhc2UoKSx0aGlzLl9kYXRhLmhhc093blByb3BlcnR5KGEpLHRoaXMuX2RhdGFbYV09Yn0sYWRkTXVsdGlwbGU6ZnVuY3Rpb24oYSl7T2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXt0aGlzLmFkZChiLGFbYl0pfS5iaW5kKHRoaXMpKX0sZ2V0OmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLl9kYXRhW2JdfHxhJiZhLmdldChiKX0saW5oZXJpdDpmdW5jdGlvbigpe3JldHVybiBjKHRoaXMpfX19Yi5leHBvcnRzPWMobnVsbCl9LHt9XSwyMjpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYil7dmFyIGM9e2Z1bmN0aW9uUmVnaXN0cnk6YShcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIiksZnVuY3Rpb25DYWxsZXI6YShcIi4vZnVuY3Rpb24tY2FsbGVyXCIpfTtyZXR1cm4gYShcIi4vZGVmYXVsdFwiKSxhKFwiLi9jb2xvclwiKSxhKFwiLi9jb2xvci1ibGVuZGluZ1wiKSxhKFwiLi9kYXRhLXVyaVwiKShiKSxhKFwiLi9tYXRoXCIpLGEoXCIuL251bWJlclwiKSxhKFwiLi9zdHJpbmdcIiksYShcIi4vc3ZnXCIpKGIpLGEoXCIuL3R5cGVzXCIpLGN9fSx7XCIuL2NvbG9yXCI6MTcsXCIuL2NvbG9yLWJsZW5kaW5nXCI6MTYsXCIuL2RhdGEtdXJpXCI6MTgsXCIuL2RlZmF1bHRcIjoxOSxcIi4vZnVuY3Rpb24tY2FsbGVyXCI6MjAsXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCI6MjEsXCIuL21hdGhcIjoyMyxcIi4vbnVtYmVyXCI6MjQsXCIuL3N0cmluZ1wiOjI1LFwiLi9zdmdcIjoyNixcIi4vdHlwZXNcIjoyN31dLDIzOltmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixkKXtpZighKGQgaW5zdGFuY2VvZiBjKSl0aHJvd3t0eXBlOlwiQXJndW1lbnRcIixtZXNzYWdlOlwiYXJndW1lbnQgbXVzdCBiZSBhIG51bWJlclwifTtyZXR1cm4gbnVsbD09Yj9iPWQudW5pdDpkPWQudW5pZnkoKSxuZXcgYyhhKHBhcnNlRmxvYXQoZC52YWx1ZSkpLGIpfXZhciBjPWEoXCIuLi90cmVlL2RpbWVuc2lvblwiKSxkPWEoXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCIpLGU9e2NlaWw6bnVsbCxmbG9vcjpudWxsLHNxcnQ6bnVsbCxhYnM6bnVsbCx0YW46XCJcIixzaW46XCJcIixjb3M6XCJcIixhdGFuOlwicmFkXCIsYXNpbjpcInJhZFwiLGFjb3M6XCJyYWRcIn07Zm9yKHZhciBmIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShmKSYmKGVbZl09Yi5iaW5kKG51bGwsTWF0aFtmXSxlW2ZdKSk7ZS5yb3VuZD1mdW5jdGlvbihhLGMpe3ZhciBkPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjPzA6Yy52YWx1ZTtyZXR1cm4gYihmdW5jdGlvbihhKXtyZXR1cm4gYS50b0ZpeGVkKGQpfSxudWxsLGEpfSxkLmFkZE11bHRpcGxlKGUpfSx7XCIuLi90cmVlL2RpbWVuc2lvblwiOjU0LFwiLi9mdW5jdGlvbi1yZWdpc3RyeVwiOjIxfV0sMjQ6W2Z1bmN0aW9uKGEpe3ZhciBiPWEoXCIuLi90cmVlL2RpbWVuc2lvblwiKSxjPWEoXCIuLi90cmVlL2Fub255bW91c1wiKSxkPWEoXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCIpLGU9ZnVuY3Rpb24oYSxkKXtzd2l0Y2goZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkKSxkLmxlbmd0aCl7Y2FzZSAwOnRocm93e3R5cGU6XCJBcmd1bWVudFwiLG1lc3NhZ2U6XCJvbmUgb3IgbW9yZSBhcmd1bWVudHMgcmVxdWlyZWRcIn19dmFyIGUsZixnLGgsaSxqLGssbCxtPVtdLG49e307Zm9yKGU9MDtkLmxlbmd0aD5lO2UrKylpZihnPWRbZV0sZyBpbnN0YW5jZW9mIGIpaWYoaD1cIlwiPT09Zy51bml0LnRvU3RyaW5nKCkmJnZvaWQgMCE9PWw/bmV3IGIoZy52YWx1ZSxsKS51bmlmeSgpOmcudW5pZnkoKSxqPVwiXCI9PT1oLnVuaXQudG9TdHJpbmcoKSYmdm9pZCAwIT09az9rOmgudW5pdC50b1N0cmluZygpLGs9XCJcIiE9PWomJnZvaWQgMD09PWt8fFwiXCIhPT1qJiZcIlwiPT09bVswXS51bmlmeSgpLnVuaXQudG9TdHJpbmcoKT9qOmssbD1cIlwiIT09aiYmdm9pZCAwPT09bD9nLnVuaXQudG9TdHJpbmcoKTpsLGY9dm9pZCAwIT09bltcIlwiXSYmXCJcIiE9PWomJmo9PT1rP25bXCJcIl06bltqXSx2b2lkIDAhPT1mKWk9XCJcIj09PW1bZl0udW5pdC50b1N0cmluZygpJiZ2b2lkIDAhPT1sP25ldyBiKG1bZl0udmFsdWUsbCkudW5pZnkoKTptW2ZdLnVuaWZ5KCksKGEmJmkudmFsdWU+aC52YWx1ZXx8IWEmJmgudmFsdWU+aS52YWx1ZSkmJihtW2ZdPWcpO2Vsc2V7aWYodm9pZCAwIT09ayYmaiE9PWspdGhyb3d7dHlwZTpcIkFyZ3VtZW50XCIsbWVzc2FnZTpcImluY29tcGF0aWJsZSB0eXBlc1wifTtuW2pdPW0ubGVuZ3RoLG0ucHVzaChnKX1lbHNlIEFycmF5LmlzQXJyYXkoZFtlXS52YWx1ZSkmJkFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGQsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZFtlXS52YWx1ZSkpO3JldHVybiAxPT1tLmxlbmd0aD9tWzBdOihkPW0ubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvQ1NTKHRoaXMuY29udGV4dCl9KS5qb2luKHRoaXMuY29udGV4dC5jb21wcmVzcz9cIixcIjpcIiwgXCIpLG5ldyBjKChhP1wibWluXCI6XCJtYXhcIikrXCIoXCIrZCtcIilcIikpfTtkLmFkZE11bHRpcGxlKHttaW46ZnVuY3Rpb24oKXtyZXR1cm4gZSghMCxhcmd1bWVudHMpfSxtYXg6ZnVuY3Rpb24oKXtyZXR1cm4gZSghMSxhcmd1bWVudHMpfSxjb252ZXJ0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuY29udmVydFRvKGIudmFsdWUpfSxwaTpmdW5jdGlvbigpe3JldHVybiBuZXcgYihNYXRoLlBJKX0sbW9kOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIG5ldyBiKGEudmFsdWUlYy52YWx1ZSxhLnVuaXQpfSxwb3c6ZnVuY3Rpb24oYSxjKXtpZihcIm51bWJlclwiPT10eXBlb2YgYSYmXCJudW1iZXJcIj09dHlwZW9mIGMpYT1uZXcgYihhKSxjPW5ldyBiKGMpO2Vsc2UgaWYoIShhIGluc3RhbmNlb2YgYiYmYyBpbnN0YW5jZW9mIGIpKXRocm93e3R5cGU6XCJBcmd1bWVudFwiLG1lc3NhZ2U6XCJhcmd1bWVudHMgbXVzdCBiZSBudW1iZXJzXCJ9O3JldHVybiBuZXcgYihNYXRoLnBvdyhhLnZhbHVlLGMudmFsdWUpLGEudW5pdCl9LHBlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBiKDEwMCphLnZhbHVlLFwiJVwiKX19KX0se1wiLi4vdHJlZS9hbm9ueW1vdXNcIjo0NCxcIi4uL3RyZWUvZGltZW5zaW9uXCI6NTQsXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCI6MjF9XSwyNTpbZnVuY3Rpb24oYSl7dmFyIGI9YShcIi4uL3RyZWUvcXVvdGVkXCIpLGM9YShcIi4uL3RyZWUvYW5vbnltb3VzXCIpLGQ9YShcIi4uL3RyZWUvamF2YXNjcmlwdFwiKSxlPWEoXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCIpO2UuYWRkTXVsdGlwbGUoe2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBjKGEgaW5zdGFuY2VvZiBkP2EuZXZhbHVhdGVkOmEudmFsdWUpfSxlc2NhcGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBjKGVuY29kZVVSSShhLnZhbHVlKS5yZXBsYWNlKC89L2csXCIlM0RcIikucmVwbGFjZSgvOi9nLFwiJTNBXCIpLnJlcGxhY2UoLyMvZyxcIiUyM1wiKS5yZXBsYWNlKC87L2csXCIlM0JcIikucmVwbGFjZSgvXFwoL2csXCIlMjhcIikucmVwbGFjZSgvXFwpL2csXCIlMjlcIikpfSxyZXBsYWNlOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWEudmFsdWU7cmV0dXJuIGQ9XCJRdW90ZWRcIj09PWQudHlwZT9kLnZhbHVlOmQudG9DU1MoKSxmPWYucmVwbGFjZShuZXcgUmVnRXhwKGMudmFsdWUsZT9lLnZhbHVlOlwiXCIpLGQpLG5ldyBiKGEucXVvdGV8fFwiXCIsZixhLmVzY2FwZWQpfSxcIiVcIjpmdW5jdGlvbihhKXtmb3IodmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGQ9YS52YWx1ZSxlPTA7Yy5sZW5ndGg+ZTtlKyspZD1kLnJlcGxhY2UoLyVbc2RhXS9pLGZ1bmN0aW9uKGEpe3ZhciBiPVwiUXVvdGVkXCI9PT1jW2VdLnR5cGUmJmEubWF0Y2goL3MvaSk/Y1tlXS52YWx1ZTpjW2VdLnRvQ1NTKCk7cmV0dXJuIGEubWF0Y2goL1tBLVpdJC8pP2VuY29kZVVSSUNvbXBvbmVudChiKTpifSk7cmV0dXJuIGQ9ZC5yZXBsYWNlKC8lJS9nLFwiJVwiKSxuZXcgYihhLnF1b3RlfHxcIlwiLGQsYS5lc2NhcGVkKX19KX0se1wiLi4vdHJlZS9hbm9ueW1vdXNcIjo0NCxcIi4uL3RyZWUvamF2YXNjcmlwdFwiOjYxLFwiLi4vdHJlZS9xdW90ZWRcIjo3MSxcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIjoyMX1dLDI2OltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciBiPWEoXCIuLi90cmVlL2RpbWVuc2lvblwiKSxjPWEoXCIuLi90cmVlL2NvbG9yXCIpLGQ9YShcIi4uL3RyZWUvZXhwcmVzc2lvblwiKSxlPWEoXCIuLi90cmVlL3F1b3RlZFwiKSxmPWEoXCIuLi90cmVlL3VybFwiKSxnPWEoXCIuL2Z1bmN0aW9uLXJlZ2lzdHJ5XCIpO2cuYWRkKFwic3ZnLWdyYWRpZW50XCIsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZygpe3Rocm93e3R5cGU6XCJBcmd1bWVudFwiLG1lc3NhZ2U6XCJzdmctZ3JhZGllbnQgZXhwZWN0cyBkaXJlY3Rpb24sIHN0YXJ0X2NvbG9yIFtzdGFydF9wb3NpdGlvbl0sIFtjb2xvciBwb3NpdGlvbixdLi4uLCBlbmRfY29sb3IgW2VuZF9wb3NpdGlvbl0gb3IgZGlyZWN0aW9uLCBjb2xvciBsaXN0XCJ9fXZhciBoLGksaixrLGwsbSxuLG8scD1cImxpbmVhclwiLHE9J3g9XCIwXCIgeT1cIjBcIiB3aWR0aD1cIjFcIiBoZWlnaHQ9XCIxXCInLHI9e2NvbXByZXNzOiExfSxzPWEudG9DU1Mocik7c3dpdGNoKDI9PWFyZ3VtZW50cy5sZW5ndGg/KGFyZ3VtZW50c1sxXS52YWx1ZS5sZW5ndGg8MiYmZygpLGg9YXJndW1lbnRzWzFdLnZhbHVlKTphcmd1bWVudHMubGVuZ3RoPDM/ZygpOmg9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHMpe2Nhc2VcInRvIGJvdHRvbVwiOmk9J3gxPVwiMCVcIiB5MT1cIjAlXCIgeDI9XCIwJVwiIHkyPVwiMTAwJVwiJzticmVhaztjYXNlXCJ0byByaWdodFwiOmk9J3gxPVwiMCVcIiB5MT1cIjAlXCIgeDI9XCIxMDAlXCIgeTI9XCIwJVwiJzticmVhaztjYXNlXCJ0byBib3R0b20gcmlnaHRcIjppPSd4MT1cIjAlXCIgeTE9XCIwJVwiIHgyPVwiMTAwJVwiIHkyPVwiMTAwJVwiJzticmVhaztjYXNlXCJ0byB0b3AgcmlnaHRcIjppPSd4MT1cIjAlXCIgeTE9XCIxMDAlXCIgeDI9XCIxMDAlXCIgeTI9XCIwJVwiJzticmVhaztjYXNlXCJlbGxpcHNlXCI6Y2FzZVwiZWxsaXBzZSBhdCBjZW50ZXJcIjpwPVwicmFkaWFsXCIsaT0nY3g9XCI1MCVcIiBjeT1cIjUwJVwiIHI9XCI3NSVcIicscT0neD1cIi01MFwiIHk9XCItNTBcIiB3aWR0aD1cIjEwMVwiIGhlaWdodD1cIjEwMVwiJzticmVhaztkZWZhdWx0OnRocm93e3R5cGU6XCJBcmd1bWVudFwiLG1lc3NhZ2U6XCJzdmctZ3JhZGllbnQgZGlyZWN0aW9uIG11c3QgYmUgJ3RvIGJvdHRvbScsICd0byByaWdodCcsICd0byBib3R0b20gcmlnaHQnLCAndG8gdG9wIHJpZ2h0JyBvciAnZWxsaXBzZSBhdCBjZW50ZXInXCJ9fWZvcihqPSc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgPz48c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMSAxXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cIm5vbmVcIj48JytwKydHcmFkaWVudCBpZD1cImdyYWRpZW50XCIgZ3JhZGllbnRVbml0cz1cInVzZXJTcGFjZU9uVXNlXCIgJytpK1wiPlwiLFxuaz0wO2gubGVuZ3RoPms7ays9MSloW2tdaW5zdGFuY2VvZiBkPyhsPWhba10udmFsdWVbMF0sbT1oW2tdLnZhbHVlWzFdKToobD1oW2tdLG09dm9pZCAwKSxsIGluc3RhbmNlb2YgYyYmKCgwPT09a3x8aysxPT09aC5sZW5ndGgpJiZ2b2lkIDA9PT1tfHxtIGluc3RhbmNlb2YgYil8fGcoKSxuPW0/bS50b0NTUyhyKTowPT09az9cIjAlXCI6XCIxMDAlXCIsbz1sLmFscGhhLGorPSc8c3RvcCBvZmZzZXQ9XCInK24rJ1wiIHN0b3AtY29sb3I9XCInK2wudG9SR0IoKSsnXCInKygxPm8/JyBzdG9wLW9wYWNpdHk9XCInK28rJ1wiJzpcIlwiKStcIi8+XCI7cmV0dXJuIGorPVwiPC9cIitwK1wiR3JhZGllbnQ+PHJlY3QgXCIrcSsnIGZpbGw9XCJ1cmwoI2dyYWRpZW50KVwiIC8+PC9zdmc+JyxqPWVuY29kZVVSSUNvbXBvbmVudChqKSxqPVwiZGF0YTppbWFnZS9zdmcreG1sLFwiK2osbmV3IGYobmV3IGUoXCInXCIraitcIidcIixqLCExLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pfSl9fSx7XCIuLi90cmVlL2NvbG9yXCI6NDgsXCIuLi90cmVlL2RpbWVuc2lvblwiOjU0LFwiLi4vdHJlZS9leHByZXNzaW9uXCI6NTcsXCIuLi90cmVlL3F1b3RlZFwiOjcxLFwiLi4vdHJlZS91cmxcIjo3OCxcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIjoyMX1dLDI3OltmdW5jdGlvbihhKXt2YXIgYj1hKFwiLi4vdHJlZS9rZXl3b3JkXCIpLGM9YShcIi4uL3RyZWUvZGV0YWNoZWQtcnVsZXNldFwiKSxkPWEoXCIuLi90cmVlL2RpbWVuc2lvblwiKSxlPWEoXCIuLi90cmVlL2NvbG9yXCIpLGY9YShcIi4uL3RyZWUvcXVvdGVkXCIpLGc9YShcIi4uL3RyZWUvYW5vbnltb3VzXCIpLGg9YShcIi4uL3RyZWUvdXJsXCIpLGk9YShcIi4uL3RyZWUvb3BlcmF0aW9uXCIpLGo9YShcIi4vZnVuY3Rpb24tcmVnaXN0cnlcIiksaz1mdW5jdGlvbihhLGMpe3JldHVybiBhIGluc3RhbmNlb2YgYz9iLlRydWU6Yi5GYWxzZX0sbD1mdW5jdGlvbihhLGMpe2lmKHZvaWQgMD09PWMpdGhyb3d7dHlwZTpcIkFyZ3VtZW50XCIsbWVzc2FnZTpcIm1pc3NpbmcgdGhlIHJlcXVpcmVkIHNlY29uZCBhcmd1bWVudCB0byBpc3VuaXQuXCJ9O2lmKGM9XCJzdHJpbmdcIj09dHlwZW9mIGMudmFsdWU/Yy52YWx1ZTpjLFwic3RyaW5nXCIhPXR5cGVvZiBjKXRocm93e3R5cGU6XCJBcmd1bWVudFwiLG1lc3NhZ2U6XCJTZWNvbmQgYXJndW1lbnQgdG8gaXN1bml0IHNob3VsZCBiZSBhIHVuaXQgb3IgYSBzdHJpbmcuXCJ9O3JldHVybiBhIGluc3RhbmNlb2YgZCYmYS51bml0LmlzKGMpP2IuVHJ1ZTpiLkZhbHNlfSxtPWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LmlzQXJyYXkoYS52YWx1ZSk/YS52YWx1ZTpBcnJheShhKTtyZXR1cm4gYn07ai5hZGRNdWx0aXBsZSh7aXNydWxlc2V0OmZ1bmN0aW9uKGEpe3JldHVybiBrKGEsYyl9LGlzY29sb3I6ZnVuY3Rpb24oYSl7cmV0dXJuIGsoYSxlKX0saXNudW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGsoYSxkKX0saXNzdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGsoYSxmKX0saXNrZXl3b3JkOmZ1bmN0aW9uKGEpe3JldHVybiBrKGEsYil9LGlzdXJsOmZ1bmN0aW9uKGEpe3JldHVybiBrKGEsaCl9LGlzcGl4ZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGwoYSxcInB4XCIpfSxpc3BlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGwoYSxcIiVcIil9LGlzZW06ZnVuY3Rpb24oYSl7cmV0dXJuIGwoYSxcImVtXCIpfSxpc3VuaXQ6bCx1bml0OmZ1bmN0aW9uKGEsYyl7aWYoIShhIGluc3RhbmNlb2YgZCkpdGhyb3d7dHlwZTpcIkFyZ3VtZW50XCIsbWVzc2FnZTpcInRoZSBmaXJzdCBhcmd1bWVudCB0byB1bml0IG11c3QgYmUgYSBudW1iZXJcIisoYSBpbnN0YW5jZW9mIGk/XCIuIEhhdmUgeW91IGZvcmdvdHRlbiBwYXJlbnRoZXNpcz9cIjpcIlwiKX07cmV0dXJuIGM9Yz9jIGluc3RhbmNlb2YgYj9jLnZhbHVlOmMudG9DU1MoKTpcIlwiLG5ldyBkKGEudmFsdWUsYyl9LFwiZ2V0LXVuaXRcIjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGcoYS51bml0KX0sZXh0cmFjdDpmdW5jdGlvbihhLGIpe3JldHVybiBiPWIudmFsdWUtMSxtKGEpW2JdfSxsZW5ndGg6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKG0oYSkubGVuZ3RoKX19KX0se1wiLi4vdHJlZS9hbm9ueW1vdXNcIjo0NCxcIi4uL3RyZWUvY29sb3JcIjo0OCxcIi4uL3RyZWUvZGV0YWNoZWQtcnVsZXNldFwiOjUzLFwiLi4vdHJlZS9kaW1lbnNpb25cIjo1NCxcIi4uL3RyZWUva2V5d29yZFwiOjYzLFwiLi4vdHJlZS9vcGVyYXRpb25cIjo2OSxcIi4uL3RyZWUvcXVvdGVkXCI6NzEsXCIuLi90cmVlL3VybFwiOjc4LFwiLi9mdW5jdGlvbi1yZWdpc3RyeVwiOjIxfV0sMjg6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vY29udGV4dHNcIiksZD1hKFwiLi9wYXJzZXIvcGFyc2VyXCIpLGU9YShcIi4vcGx1Z2lucy9mdW5jdGlvbi1pbXBvcnRlclwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYSxiKXt0aGlzLnJvb3RGaWxlbmFtZT1iLmZpbGVuYW1lLHRoaXMucGF0aHM9YS5wYXRoc3x8W10sdGhpcy5jb250ZW50cz17fSx0aGlzLmNvbnRlbnRzSWdub3JlZENoYXJzPXt9LHRoaXMubWltZT1hLm1pbWUsdGhpcy5lcnJvcj1udWxsLHRoaXMuY29udGV4dD1hLHRoaXMucXVldWU9W10sdGhpcy5maWxlcz17fX07cmV0dXJuIGIucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYixmLGcsaCxpKXt2YXIgaj10aGlzO3RoaXMucXVldWUucHVzaChiKTt2YXIgaz1mdW5jdGlvbihhLGMsZCl7ai5xdWV1ZS5zcGxpY2Uoai5xdWV1ZS5pbmRleE9mKGIpLDEpO3ZhciBlPWQ9PT1qLnJvb3RGaWxlbmFtZTtoLm9wdGlvbmFsJiZhP2kobnVsbCx7cnVsZXM6W119LCExLG51bGwpOihqLmZpbGVzW2RdPWMsYSYmIWouZXJyb3ImJihqLmVycm9yPWEpLGkoYSxjLGUsZCkpfSxsPXtyZWxhdGl2ZVVybHM6dGhpcy5jb250ZXh0LnJlbGF0aXZlVXJscyxlbnRyeVBhdGg6Zy5lbnRyeVBhdGgscm9vdHBhdGg6Zy5yb290cGF0aCxyb290RmlsZW5hbWU6Zy5yb290RmlsZW5hbWV9LG09YS5nZXRGaWxlTWFuYWdlcihiLGcuY3VycmVudERpcmVjdG9yeSx0aGlzLmNvbnRleHQsYSk7aWYoIW0pcmV0dXJuIHZvaWQgayh7bWVzc2FnZTpcIkNvdWxkIG5vdCBmaW5kIGEgZmlsZS1tYW5hZ2VyIGZvciBcIitifSk7ZiYmKGI9bS50cnlBcHBlbmRFeHRlbnNpb24oYixoLnBsdWdpbj9cIi5qc1wiOlwiLmxlc3NcIikpO3ZhciBuPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZmlsZW5hbWUsZj1hLmNvbnRlbnRzLnJlcGxhY2UoL15cXHVGRUZGLyxcIlwiKTtsLmN1cnJlbnREaXJlY3Rvcnk9bS5nZXRQYXRoKGIpLGwucmVsYXRpdmVVcmxzJiYobC5yb290cGF0aD1tLmpvaW4oai5jb250ZXh0LnJvb3RwYXRofHxcIlwiLG0ucGF0aERpZmYobC5jdXJyZW50RGlyZWN0b3J5LGwuZW50cnlQYXRoKSksIW0uaXNQYXRoQWJzb2x1dGUobC5yb290cGF0aCkmJm0uYWx3YXlzTWFrZVBhdGhzQWJzb2x1dGUoKSYmKGwucm9vdHBhdGg9bS5qb2luKGwuZW50cnlQYXRoLGwucm9vdHBhdGgpKSksbC5maWxlbmFtZT1iO3ZhciBpPW5ldyBjLlBhcnNlKGouY29udGV4dCk7aS5wcm9jZXNzSW1wb3J0cz0hMSxqLmNvbnRlbnRzW2JdPWYsKGcucmVmZXJlbmNlfHxoLnJlZmVyZW5jZSkmJihsLnJlZmVyZW5jZT0hMCksaC5wbHVnaW4/bmV3IGUoaSxsKS5ldmFsKGYsZnVuY3Rpb24oYSxjKXtrKGEsYyxiKX0pOmguaW5saW5lP2sobnVsbCxmLGIpOm5ldyBkKGksaixsKS5wYXJzZShmLGZ1bmN0aW9uKGEsYyl7ayhhLGMsYil9KX0sbz1tLmxvYWRGaWxlKGIsZy5jdXJyZW50RGlyZWN0b3J5LHRoaXMuY29udGV4dCxhLGZ1bmN0aW9uKGEsYil7YT9rKGEpOm4oYil9KTtvJiZvLnRoZW4obixrKX0sYn19LHtcIi4vY29udGV4dHNcIjoxMCxcIi4vcGFyc2VyL3BhcnNlclwiOjM2LFwiLi9wbHVnaW5zL2Z1bmN0aW9uLWltcG9ydGVyXCI6Mzh9XSwyOTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZyxoLGk9e3ZlcnNpb246WzIsNSwxXSxkYXRhOmEoXCIuL2RhdGFcIiksdHJlZTphKFwiLi90cmVlXCIpLEVudmlyb25tZW50Omg9YShcIi4vZW52aXJvbm1lbnQvZW52aXJvbm1lbnRcIiksQWJzdHJhY3RGaWxlTWFuYWdlcjphKFwiLi9lbnZpcm9ubWVudC9hYnN0cmFjdC1maWxlLW1hbmFnZXJcIiksZW52aXJvbm1lbnQ6Yj1uZXcgaChiLGMpLHZpc2l0b3JzOmEoXCIuL3Zpc2l0b3JzXCIpLFBhcnNlcjphKFwiLi9wYXJzZXIvcGFyc2VyXCIpLGZ1bmN0aW9uczphKFwiLi9mdW5jdGlvbnNcIikoYiksY29udGV4dHM6YShcIi4vY29udGV4dHNcIiksU291cmNlTWFwT3V0cHV0OmQ9YShcIi4vc291cmNlLW1hcC1vdXRwdXRcIikoYiksU291cmNlTWFwQnVpbGRlcjplPWEoXCIuL3NvdXJjZS1tYXAtYnVpbGRlclwiKShkLGIpLFBhcnNlVHJlZTpmPWEoXCIuL3BhcnNlLXRyZWVcIikoZSksSW1wb3J0TWFuYWdlcjpnPWEoXCIuL2ltcG9ydC1tYW5hZ2VyXCIpKGIpLHJlbmRlcjphKFwiLi9yZW5kZXJcIikoYixmLGcpLHBhcnNlOmEoXCIuL3BhcnNlXCIpKGIsZixnKSxMZXNzRXJyb3I6YShcIi4vbGVzcy1lcnJvclwiKSx0cmFuc2Zvcm1UcmVlOmEoXCIuL3RyYW5zZm9ybS10cmVlXCIpLHV0aWxzOmEoXCIuL3V0aWxzXCIpLFBsdWdpbk1hbmFnZXI6YShcIi4vcGx1Z2luLW1hbmFnZXJcIiksbG9nZ2VyOmEoXCIuL2xvZ2dlclwiKX07cmV0dXJuIGl9fSx7XCIuL2NvbnRleHRzXCI6MTAsXCIuL2RhdGFcIjoxMixcIi4vZW52aXJvbm1lbnQvYWJzdHJhY3QtZmlsZS1tYW5hZ2VyXCI6MTQsXCIuL2Vudmlyb25tZW50L2Vudmlyb25tZW50XCI6MTUsXCIuL2Z1bmN0aW9uc1wiOjIyLFwiLi9pbXBvcnQtbWFuYWdlclwiOjI4LFwiLi9sZXNzLWVycm9yXCI6MzAsXCIuL2xvZ2dlclwiOjMxLFwiLi9wYXJzZVwiOjMzLFwiLi9wYXJzZS10cmVlXCI6MzIsXCIuL3BhcnNlci9wYXJzZXJcIjozNixcIi4vcGx1Z2luLW1hbmFnZXJcIjozNyxcIi4vcmVuZGVyXCI6MzksXCIuL3NvdXJjZS1tYXAtYnVpbGRlclwiOjQwLFwiLi9zb3VyY2UtbWFwLW91dHB1dFwiOjQxLFwiLi90cmFuc2Zvcm0tdHJlZVwiOjQyLFwiLi90cmVlXCI6NjAsXCIuL3V0aWxzXCI6ODEsXCIuL3Zpc2l0b3JzXCI6ODV9XSwzMDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi91dGlsc1wiKSxkPWIuZXhwb3J0cz1mdW5jdGlvbihhLGIsZCl7RXJyb3IuY2FsbCh0aGlzKTt2YXIgZT1hLmZpbGVuYW1lfHxkO2lmKGImJmUpe3ZhciBmPWIuY29udGVudHNbZV0sZz1jLmdldExvY2F0aW9uKGEuaW5kZXgsZiksaD1nLmxpbmUsaT1nLmNvbHVtbixqPWEuY2FsbCYmYy5nZXRMb2NhdGlvbihhLmNhbGwsZikubGluZSxrPWYuc3BsaXQoXCJcXG5cIik7dGhpcy50eXBlPWEudHlwZXx8XCJTeW50YXhcIix0aGlzLmZpbGVuYW1lPWUsdGhpcy5pbmRleD1hLmluZGV4LHRoaXMubGluZT1cIm51bWJlclwiPT10eXBlb2YgaD9oKzE6bnVsbCx0aGlzLmNhbGxMaW5lPWorMSx0aGlzLmNhbGxFeHRyYWN0PWtbal0sdGhpcy5jb2x1bW49aSx0aGlzLmV4dHJhY3Q9W2tbaC0xXSxrW2hdLGtbaCsxXV19dGhpcy5tZXNzYWdlPWEubWVzc2FnZSx0aGlzLnN0YWNrPWEuc3RhY2t9O2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlKXt2YXIgZT1mdW5jdGlvbigpe307ZS5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlLGQucHJvdG90eXBlPW5ldyBlfWVsc2UgZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO2QucHJvdG90eXBlLmNvbnN0cnVjdG9yPWR9LHtcIi4vdXRpbHNcIjo4MX1dLDMxOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz17ZXJyb3I6ZnVuY3Rpb24oYSl7dGhpcy5fZmlyZUV2ZW50KFwiZXJyb3JcIixhKX0sd2FybjpmdW5jdGlvbihhKXt0aGlzLl9maXJlRXZlbnQoXCJ3YXJuXCIsYSl9LGluZm86ZnVuY3Rpb24oYSl7dGhpcy5fZmlyZUV2ZW50KFwiaW5mb1wiLGEpfSxkZWJ1ZzpmdW5jdGlvbihhKXt0aGlzLl9maXJlRXZlbnQoXCJkZWJ1Z1wiLGEpfSxhZGRMaXN0ZW5lcjpmdW5jdGlvbihhKXt0aGlzLl9saXN0ZW5lcnMucHVzaChhKX0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7dGhpcy5fbGlzdGVuZXJzLmxlbmd0aD5iO2IrKylpZih0aGlzLl9saXN0ZW5lcnNbYl09PT1hKXJldHVybiB2b2lkIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoYiwxKX0sX2ZpcmVFdmVudDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO3RoaXMuX2xpc3RlbmVycy5sZW5ndGg+YztjKyspe3ZhciBkPXRoaXMuX2xpc3RlbmVyc1tjXVthXTtkJiZkKGIpfX0sX2xpc3RlbmVyczpbXX19LHt9XSwzMjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9sZXNzLWVycm9yXCIpLGQ9YShcIi4vdHJhbnNmb3JtLXRyZWVcIiksZT1hKFwiLi9sb2dnZXJcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKGEsYil7dGhpcy5yb290PWEsdGhpcy5pbXBvcnRzPWJ9O3JldHVybiBiLnByb3RvdHlwZS50b0NTUz1mdW5jdGlvbihiKXt2YXIgZixnLGg9e307dHJ5e2Y9ZCh0aGlzLnJvb3QsYil9Y2F0Y2goaSl7dGhyb3cgbmV3IGMoaSx0aGlzLmltcG9ydHMpfXRyeXt2YXIgaj1Cb29sZWFuKGIuY29tcHJlc3MpO2omJmUud2FybihcIlRoZSBjb21wcmVzcyBvcHRpb24gaGFzIGJlZW4gZGVwcmVjYXRlZC4gV2UgcmVjb21tZW5kIHlvdSB1c2UgYSBkZWRpY2F0ZWQgY3NzIG1pbmlmaWVyLCBmb3IgaW5zdGFuY2Ugc2VlIGxlc3MtcGx1Z2luLWNsZWFuLWNzcy5cIik7dmFyIGs9e2NvbXByZXNzOmosZHVtcExpbmVOdW1iZXJzOmIuZHVtcExpbmVOdW1iZXJzLHN0cmljdFVuaXRzOkJvb2xlYW4oYi5zdHJpY3RVbml0cyksbnVtUHJlY2lzaW9uOjh9O2Iuc291cmNlTWFwPyhnPW5ldyBhKGIuc291cmNlTWFwKSxoLmNzcz1nLnRvQ1NTKGYsayx0aGlzLmltcG9ydHMpKTpoLmNzcz1mLnRvQ1NTKGspfWNhdGNoKGkpe3Rocm93IG5ldyBjKGksdGhpcy5pbXBvcnRzKX1pZihiLnBsdWdpbk1hbmFnZXIpZm9yKHZhciBsPWIucGx1Z2luTWFuYWdlci5nZXRQb3N0UHJvY2Vzc29ycygpLG09MDtsLmxlbmd0aD5tO20rKyloLmNzcz1sW21dLnByb2Nlc3MoaC5jc3Mse3NvdXJjZU1hcDpnLG9wdGlvbnM6YixpbXBvcnRzOnRoaXMuaW1wb3J0c30pO2Iuc291cmNlTWFwJiYoaC5tYXA9Zy5nZXRFeHRlcm5hbFNvdXJjZU1hcCgpKSxoLmltcG9ydHM9W107Zm9yKHZhciBuIGluIHRoaXMuaW1wb3J0cy5maWxlcyl0aGlzLmltcG9ydHMuZmlsZXMuaGFzT3duUHJvcGVydHkobikmJm4hPT10aGlzLmltcG9ydHMucm9vdEZpbGVuYW1lJiZoLmltcG9ydHMucHVzaChuKTtyZXR1cm4gaH0sYn19LHtcIi4vbGVzcy1lcnJvclwiOjMwLFwiLi9sb2dnZXJcIjozMSxcIi4vdHJhbnNmb3JtLXRyZWVcIjo0Mn1dLDMzOltmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YShcIi4vY29udGV4dHNcIiksZT1hKFwiLi9wYXJzZXIvcGFyc2VyXCIpLGY9YShcIi4vcGx1Z2luLW1hbmFnZXJcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGIsZyxoKXt2YXIgaT1mdW5jdGlvbihiLGcsail7aWYoZz1nfHx7fSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBnJiYoaj1nLGc9e30pLCFqKXtjfHwoYz1cInVuZGVmaW5lZFwiPT10eXBlb2YgUHJvbWlzZT9hKFwicHJvbWlzZVwiKTpQcm9taXNlKTt2YXIgaz10aGlzO3JldHVybiBuZXcgYyhmdW5jdGlvbihhLGMpe2kuY2FsbChrLGIsZyxmdW5jdGlvbihiLGQpe2I/YyhiKTphKGQpfSl9KX12YXIgbCxtLG49bmV3IGYodGhpcyk7aWYobi5hZGRQbHVnaW5zKGcucGx1Z2lucyksZy5wbHVnaW5NYW5hZ2VyPW4sbD1uZXcgZC5QYXJzZShnKSxnLnJvb3RGaWxlSW5mbyltPWcucm9vdEZpbGVJbmZvO2Vsc2V7dmFyIG89Zy5maWxlbmFtZXx8XCJpbnB1dFwiLHA9by5yZXBsYWNlKC9bXlxcL1xcXFxdKiQvLFwiXCIpO209e2ZpbGVuYW1lOm8scmVsYXRpdmVVcmxzOmwucmVsYXRpdmVVcmxzLHJvb3RwYXRoOmwucm9vdHBhdGh8fFwiXCIsY3VycmVudERpcmVjdG9yeTpwLGVudHJ5UGF0aDpwLHJvb3RGaWxlbmFtZTpvfSxtLnJvb3RwYXRoJiZcIi9cIiE9PW0ucm9vdHBhdGguc2xpY2UoLTEpJiYobS5yb290cGF0aCs9XCIvXCIpfXZhciBxPW5ldyBoKGwsbSk7bmV3IGUobCxxLG0pLnBhcnNlKGIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9qKGEpOnZvaWQgaihudWxsLGIscSxnKX0sZyl9O3JldHVybiBpfX0se1wiLi9jb250ZXh0c1wiOjEwLFwiLi9wYXJzZXIvcGFyc2VyXCI6MzYsXCIuL3BsdWdpbi1tYW5hZ2VyXCI6MzcscHJvbWlzZTp2b2lkIDB9XSwzNDpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGIpe3ZhciBjPWgtcTs1MTI+YyYmIWJ8fCFjfHwocC5wdXNoKGEuc2xpY2UocSxoKzEpKSxxPWgrMSl9dmFyIGQsZSxmLGcsaCxpLGosayxsLG09YS5sZW5ndGgsbj0wLG89MCxwPVtdLHE9MDtmb3IoaD0wO20+aDtoKyspaWYoaj1hLmNoYXJDb2RlQXQoaCksIShqPj05NyYmMTIyPj1qfHwzND5qKSlzd2l0Y2goail7Y2FzZSA0MDpvKyssZT1oO2NvbnRpbnVlO2Nhc2UgNDE6aWYoLS1vPDApcmV0dXJuIGIoXCJtaXNzaW5nIG9wZW5pbmcgYChgXCIsaCk7Y29udGludWU7Y2FzZSA1OTpvfHxjKCk7Y29udGludWU7Y2FzZSAxMjM6bisrLGQ9aDtjb250aW51ZTtjYXNlIDEyNTppZigtLW48MClyZXR1cm4gYihcIm1pc3Npbmcgb3BlbmluZyBge2BcIixoKTtufHxvfHxjKCk7Y29udGludWU7Y2FzZSA5MjppZihtLTE+aCl7aCsrO2NvbnRpbnVlfXJldHVybiBiKFwidW5lc2NhcGVkIGBcXFxcYFwiLGgpO2Nhc2UgMzQ6Y2FzZSAzOTpjYXNlIDk2OmZvcihsPTAsaT1oLGgrPTE7bT5oO2grKylpZihrPWEuY2hhckNvZGVBdChoKSwhKGs+OTYpKXtpZihrPT1qKXtsPTE7YnJlYWt9aWYoOTI9PWspe2lmKGg9PW0tMSlyZXR1cm4gYihcInVuZXNjYXBlZCBgXFxcXGBcIixoKTtoKyt9fWlmKGwpY29udGludWU7cmV0dXJuIGIoXCJ1bm1hdGNoZWQgYFwiK1N0cmluZy5mcm9tQ2hhckNvZGUoaikrXCJgXCIsaSk7Y2FzZSA0NzppZihvfHxoPT1tLTEpY29udGludWU7aWYoaz1hLmNoYXJDb2RlQXQoaCsxKSw0Nz09aylmb3IoaCs9MjttPmgmJihrPWEuY2hhckNvZGVBdChoKSwhKDEzPj1rKXx8MTAhPWsmJjEzIT1rKTtoKyspO2Vsc2UgaWYoNDI9PWspe2ZvcihmPWk9aCxoKz0yO20tMT5oJiYoaz1hLmNoYXJDb2RlQXQoaCksMTI1PT1rJiYoZz1oKSw0MiE9a3x8NDchPWEuY2hhckNvZGVBdChoKzEpKTtoKyspO2lmKGg9PW0tMSlyZXR1cm4gYihcIm1pc3NpbmcgY2xvc2luZyBgKi9gXCIsaSk7aCsrfWNvbnRpbnVlO2Nhc2UgNDI6aWYobS0xPmgmJjQ3PT1hLmNoYXJDb2RlQXQoaCsxKSlyZXR1cm4gYihcInVubWF0Y2hlZCBgLypgXCIsaCk7Y29udGludWV9cmV0dXJuIDAhPT1uP2Y+ZCYmZz5mP2IoXCJtaXNzaW5nIGNsb3NpbmcgYH1gIG9yIGAqL2BcIixkKTpiKFwibWlzc2luZyBjbG9zaW5nIGB9YFwiLGQpOjAhPT1vP2IoXCJtaXNzaW5nIGNsb3NpbmcgYClgXCIsZSk6KGMoITApLHApfX0se31dLDM1OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL2NodW5rZXJcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGEsYixkLGUsZixnLGgsaT1bXSxqPXt9O2ouc2F2ZT1mdW5jdGlvbigpe2g9ai5pLGkucHVzaCh7Y3VycmVudDpnLGk6ai5pLGo6Yn0pfSxqLnJlc3RvcmU9ZnVuY3Rpb24oYSl7KGouaT5kfHxqLmk9PT1kJiZhJiYhZSkmJihkPWouaSxlPWEpO3ZhciBjPWkucG9wKCk7Zz1jLmN1cnJlbnQsaD1qLmk9Yy5pLGI9Yy5qfSxqLmZvcmdldD1mdW5jdGlvbigpe2kucG9wKCl9LGouaXNXaGl0ZXNwYWNlPWZ1bmN0aW9uKGIpe3ZhciBjPWouaSsoYnx8MCksZD1hLmNoYXJDb2RlQXQoYyk7cmV0dXJuIGQ9PT1rfHxkPT09bnx8ZD09PWx8fGQ9PT1tfSxqLiRyZT1mdW5jdGlvbihhKXtqLmk+aCYmKGc9Zy5zbGljZShqLmktaCksaD1qLmkpO3ZhciBiPWEuZXhlYyhnKTtyZXR1cm4gYj8ocyhiWzBdLmxlbmd0aCksXCJzdHJpbmdcIj09dHlwZW9mIGI/YjoxPT09Yi5sZW5ndGg/YlswXTpiKTpudWxsfSxqLiRjaGFyPWZ1bmN0aW9uKGIpe3JldHVybiBhLmNoYXJBdChqLmkpIT09Yj9udWxsOihzKDEpLGIpfSxqLiRzdHI9ZnVuY3Rpb24oYil7Zm9yKHZhciBjPWIubGVuZ3RoLGQ9MDtjPmQ7ZCsrKWlmKGEuY2hhckF0KGouaStkKSE9PWIuY2hhckF0KGQpKXJldHVybiBudWxsO3JldHVybiBzKGMpLGJ9LGouJHF1b3RlZD1mdW5jdGlvbigpe3ZhciBiPWEuY2hhckF0KGouaSk7aWYoXCInXCI9PT1ifHwnXCInPT09Yil7Zm9yKHZhciBjPWEubGVuZ3RoLGQ9ai5pLGU9MTtjPmUrZDtlKyspe3ZhciBmPWEuY2hhckF0KGUrZCk7c3dpdGNoKGYpe2Nhc2VcIlxcXFxcIjplKys7Y29udGludWU7Y2FzZVwiXFxyXCI6Y2FzZVwiXFxuXCI6YnJlYWs7Y2FzZSBiOnZhciBnPWEuc3Vic3RyKGQsZSsxKTtyZXR1cm4gcyhlKzEpLGd9fXJldHVybiBudWxsfX07dmFyIGs9MzIsbD05LG09MTAsbj0xMyxvPTQzLHA9NDQscT00NyxyPTU3O2ouYXV0b0NvbW1lbnRBYnNvcmI9ITAsai5jb21tZW50U3RvcmU9W10sai5maW5pc2hlZD0hMTt2YXIgcz1mdW5jdGlvbihjKXtmb3IodmFyIGQsZSxpLG89ai5pLHA9YixyPWouaS1oLHQ9ai5pK2cubGVuZ3RoLXIsdT1qLmkrPWMsdj1hO3Q+ai5pO2ouaSsrKXtpZihkPXYuY2hhckNvZGVBdChqLmkpLGouYXV0b0NvbW1lbnRBYnNvcmImJmQ9PT1xKXtpZihlPXYuY2hhckF0KGouaSsxKSxcIi9cIj09PWUpe2k9e2luZGV4OmouaSxpc0xpbmVDb21tZW50OiEwfTt2YXIgdz12LmluZGV4T2YoXCJcXG5cIixqLmkrMik7MD53JiYodz10KSxqLmk9dyxpLnRleHQ9di5zdWJzdHIoaS5pLGouaS1pLmkpLGouY29tbWVudFN0b3JlLnB1c2goaSk7Y29udGludWV9aWYoXCIqXCI9PT1lKXt2YXIgeD12LmluZGV4T2YoXCIqL1wiLGouaSsyKTtpZih4Pj0wKXtpPXtpbmRleDpqLmksdGV4dDp2LnN1YnN0cihqLmkseCsyLWouaSksaXNMaW5lQ29tbWVudDohMX0sai5pKz1pLnRleHQubGVuZ3RoLTEsai5jb21tZW50U3RvcmUucHVzaChpKTtjb250aW51ZX19YnJlYWt9aWYoZCE9PWsmJmQhPT1tJiZkIT09bCYmZCE9PW4pYnJlYWt9aWYoZz1nLnNsaWNlKGMrai5pLXUrciksaD1qLmksIWcubGVuZ3RoKXtpZihmLmxlbmd0aC0xPmIpcmV0dXJuIGc9ZlsrK2JdLHMoMCksITA7ai5maW5pc2hlZD0hMH1yZXR1cm4gbyE9PWouaXx8cCE9PWJ9O3JldHVybiBqLnBlZWs9ZnVuY3Rpb24oYil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2Zvcih2YXIgYz0wO2IubGVuZ3RoPmM7YysrKWlmKGEuY2hhckF0KGouaStjKSE9PWIuY2hhckF0KGMpKXJldHVybiExO3JldHVybiEwfXJldHVybiBiLnRlc3QoZyl9LGoucGVla0NoYXI9ZnVuY3Rpb24oYil7cmV0dXJuIGEuY2hhckF0KGouaSk9PT1ifSxqLmN1cnJlbnRDaGFyPWZ1bmN0aW9uKCl7cmV0dXJuIGEuY2hhckF0KGouaSl9LGouZ2V0SW5wdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gYX0sai5wZWVrTm90TnVtZXJpYz1mdW5jdGlvbigpe3ZhciBiPWEuY2hhckNvZGVBdChqLmkpO3JldHVybiBiPnJ8fG8+Ynx8Yj09PXF8fGI9PT1wfSxqLnN0YXJ0PWZ1bmN0aW9uKGUsaSxrKXthPWUsai5pPWI9aD1kPTAsZj1pP2MoZSxrKTpbZV0sZz1mWzBdLHMoMCl9LGouZW5kPWZ1bmN0aW9uKCl7dmFyIGIsYz1qLmk+PWEubGVuZ3RoO3JldHVybiBkPmouaSYmKGI9ZSxqLmk9ZCkse2lzRmluaXNoZWQ6YyxmdXJ0aGVzdDpqLmksZnVydGhlc3RQb3NzaWJsZUVycm9yTWVzc2FnZTpiLGZ1cnRoZXN0UmVhY2hlZEVuZDpqLmk+PWEubGVuZ3RoLTEsZnVydGhlc3RDaGFyOmFbai5pXX19LGp9fSx7XCIuL2NodW5rZXJcIjozNH1dLDM2OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuLi9sZXNzLWVycm9yXCIpLGQ9YShcIi4uL3RyZWVcIiksZT1hKFwiLi4vdmlzaXRvcnNcIiksZj1hKFwiLi9wYXJzZXItaW5wdXRcIiksZz1hKFwiLi4vdXRpbHNcIiksaD1mdW5jdGlvbiBpKGEsYixoKXtmdW5jdGlvbiBqKGEsYil7dmFyIGM9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpP2EuY2FsbChuKTpvLiRyZShhKTtyZXR1cm4gYz9jOnZvaWQgbChifHwoXCJzdHJpbmdcIj09dHlwZW9mIGE/XCJleHBlY3RlZCAnXCIrYStcIicgZ290ICdcIitvLmN1cnJlbnRDaGFyKCkrXCInXCI6XCJ1bmV4cGVjdGVkIHRva2VuXCIpKX1mdW5jdGlvbiBrKGEsYil7cmV0dXJuIG8uJGNoYXIoYSk/YTp2b2lkIGwoYnx8XCJleHBlY3RlZCAnXCIrYStcIicgZ290ICdcIitvLmN1cnJlbnRDaGFyKCkrXCInXCIpfWZ1bmN0aW9uIGwoYSxkKXt0aHJvdyBuZXcgYyh7aW5kZXg6by5pLGZpbGVuYW1lOmguZmlsZW5hbWUsdHlwZTpkfHxcIlN5bnRheFwiLG1lc3NhZ2U6YX0sYil9ZnVuY3Rpb24gbShhKXt2YXIgYj1oLmZpbGVuYW1lO3JldHVybntsaW5lTnVtYmVyOmcuZ2V0TG9jYXRpb24oYSxvLmdldElucHV0KCkpLmxpbmUrMSxmaWxlTmFtZTpifX12YXIgbixvPWYoKTtyZXR1cm57cGFyc2U6ZnVuY3Rpb24oZixnLGope3ZhciBrLGwsbSxuLHA9bnVsbCxxPVwiXCI7aWYobD1qJiZqLmdsb2JhbFZhcnM/aS5zZXJpYWxpemVWYXJzKGouZ2xvYmFsVmFycykrXCJcXG5cIjpcIlwiLG09aiYmai5tb2RpZnlWYXJzP1wiXFxuXCIraS5zZXJpYWxpemVWYXJzKGoubW9kaWZ5VmFycyk6XCJcIixhLnBsdWdpbk1hbmFnZXIpZm9yKHZhciByPWEucGx1Z2luTWFuYWdlci5nZXRQcmVQcm9jZXNzb3JzKCkscz0wO3IubGVuZ3RoPnM7cysrKWY9cltzXS5wcm9jZXNzKGYse2NvbnRleHQ6YSxpbXBvcnRzOmIsZmlsZUluZm86aH0pOyhsfHxqJiZqLmJhbm5lcikmJihxPShqJiZqLmJhbm5lcj9qLmJhbm5lcjpcIlwiKStsLG49Yi5jb250ZW50c0lnbm9yZWRDaGFycyxuW2guZmlsZW5hbWVdPW5baC5maWxlbmFtZV18fDAsbltoLmZpbGVuYW1lXSs9cS5sZW5ndGgpLGY9Zi5yZXBsYWNlKC9cXHJcXG4/L2csXCJcXG5cIiksZj1xK2YucmVwbGFjZSgvXlxcdUZFRkYvLFwiXCIpK20sYi5jb250ZW50c1toLmZpbGVuYW1lXT1mO3RyeXtvLnN0YXJ0KGYsYS5jaHVua0lucHV0LGZ1bmN0aW9uKGEsZCl7dGhyb3cgbmV3IGMoe2luZGV4OmQsdHlwZTpcIlBhcnNlXCIsbWVzc2FnZTphLGZpbGVuYW1lOmguZmlsZW5hbWV9LGIpfSksaz1uZXcgZC5SdWxlc2V0KG51bGwsdGhpcy5wYXJzZXJzLnByaW1hcnkoKSksay5yb290PSEwLGsuZmlyc3RSb290PSEwfWNhdGNoKHQpe3JldHVybiBnKG5ldyBjKHQsYixoLmZpbGVuYW1lKSl9dmFyIHU9by5lbmQoKTtpZighdS5pc0ZpbmlzaGVkKXt2YXIgdj11LmZ1cnRoZXN0UG9zc2libGVFcnJvck1lc3NhZ2U7dnx8KHY9XCJVbnJlY29nbmlzZWQgaW5wdXRcIixcIn1cIj09PXUuZnVydGhlc3RDaGFyP3YrPVwiLiBQb3NzaWJseSBtaXNzaW5nIG9wZW5pbmcgJ3snXCI6XCIpXCI9PT11LmZ1cnRoZXN0Q2hhcj92Kz1cIi4gUG9zc2libHkgbWlzc2luZyBvcGVuaW5nICcoJ1wiOnUuZnVydGhlc3RSZWFjaGVkRW5kJiYodis9XCIuIFBvc3NpYmx5IG1pc3Npbmcgc29tZXRoaW5nXCIpKSxwPW5ldyBjKHt0eXBlOlwiUGFyc2VcIixtZXNzYWdlOnYsaW5kZXg6dS5mdXJ0aGVzdCxmaWxlbmFtZTpoLmZpbGVuYW1lfSxiKX12YXIgdz1mdW5jdGlvbihhKXtyZXR1cm4gYT1wfHxhfHxiLmVycm9yLGE/KGEgaW5zdGFuY2VvZiBjfHwoYT1uZXcgYyhhLGIsaC5maWxlbmFtZSkpLGcoYSkpOmcobnVsbCxrKX07cmV0dXJuIGEucHJvY2Vzc0ltcG9ydHM9PT0hMT93KCk6dm9pZCBuZXcgZS5JbXBvcnRWaXNpdG9yKGIsdykucnVuKGspfSxwYXJzZXJzOm49e3ByaW1hcnk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj10aGlzLm1peGluLGM9W107Oyl7Zm9yKDs7KXtpZihhPXRoaXMuY29tbWVudCgpLCFhKWJyZWFrO2MucHVzaChhKX1pZihvLmZpbmlzaGVkKWJyZWFrO2lmKG8ucGVlayhcIn1cIikpYnJlYWs7aWYoYT10aGlzLmV4dGVuZFJ1bGUoKSljPWMuY29uY2F0KGEpO2Vsc2UgaWYoYT1iLmRlZmluaXRpb24oKXx8dGhpcy5ydWxlKCl8fHRoaXMucnVsZXNldCgpfHxiLmNhbGwoKXx8dGhpcy5ydWxlc2V0Q2FsbCgpfHx0aGlzLmRpcmVjdGl2ZSgpKWMucHVzaChhKTtlbHNle2Zvcih2YXIgZD0hMTtvLiRjaGFyKFwiO1wiKTspZD0hMDtpZighZClicmVha319cmV0dXJuIGN9LGNvbW1lbnQ6ZnVuY3Rpb24oKXtpZihvLmNvbW1lbnRTdG9yZS5sZW5ndGgpe3ZhciBhPW8uY29tbWVudFN0b3JlLnNoaWZ0KCk7cmV0dXJuIG5ldyBkLkNvbW1lbnQoYS50ZXh0LGEuaXNMaW5lQ29tbWVudCxhLmluZGV4LGgpfX0sZW50aXRpZXM6e3F1b3RlZDpmdW5jdGlvbigpe3ZhciBhLGI9by5pLGM9ITE7cmV0dXJuIG8uc2F2ZSgpLG8uJGNoYXIoXCJ+XCIpJiYoYz0hMCksKGE9by4kcXVvdGVkKCkpPyhvLmZvcmdldCgpLG5ldyBkLlF1b3RlZChhLmNoYXJBdCgwKSxhLnN1YnN0cigxLGEubGVuZ3RoLTIpLGMsYixoKSk6dm9pZCBvLnJlc3RvcmUoKX0sa2V5d29yZDpmdW5jdGlvbigpe3ZhciBhPW8uJGNoYXIoXCIlXCIpfHxvLiRyZSgvXltfQS1aYS16LV1bX0EtWmEtejAtOS1dKi8pO3JldHVybiBhP2QuQ29sb3IuZnJvbUtleXdvcmQoYSl8fG5ldyBkLktleXdvcmQoYSk6dm9pZCAwfSxjYWxsOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGUsZj1vLmk7aWYoIW8ucGVlaygvXnVybFxcKC9pKSlyZXR1cm4gby5zYXZlKCksKGE9by4kcmUoL14oW1xcdy1dK3wlfHByb2dpZDpbXFx3XFwuXSspXFwoLykpPyhhPWFbMV0sYj1hLnRvTG93ZXJDYXNlKCksXCJhbHBoYVwiPT09YiYmKGU9bi5hbHBoYSgpKT8oby5mb3JnZXQoKSxlKTooYz10aGlzLmFyZ3VtZW50cygpLG8uJGNoYXIoXCIpXCIpPyhvLmZvcmdldCgpLG5ldyBkLkNhbGwoYSxjLGYsaCkpOnZvaWQgby5yZXN0b3JlKFwiQ291bGQgbm90IHBhcnNlIGNhbGwgYXJndW1lbnRzIG9yIG1pc3NpbmcgJyknXCIpKSk6dm9pZCBvLmZvcmdldCgpfSxhcmd1bWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj1bXTs7KXtpZihhPXRoaXMuYXNzaWdubWVudCgpfHxuLmV4cHJlc3Npb24oKSwhYSlicmVhaztpZihiLnB1c2goYSksIW8uJGNoYXIoXCIsXCIpKWJyZWFrfXJldHVybiBifSxsaXRlcmFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGltZW5zaW9uKCl8fHRoaXMuY29sb3IoKXx8dGhpcy5xdW90ZWQoKXx8dGhpcy51bmljb2RlRGVzY3JpcHRvcigpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gby5zYXZlKCksKGE9by4kcmUoL15cXHcrKD89XFxzPz0pL2kpKSYmby4kY2hhcihcIj1cIikmJihiPW4uZW50aXR5KCkpPyhvLmZvcmdldCgpLG5ldyBkLkFzc2lnbm1lbnQoYSxiKSk6dm9pZCBvLnJlc3RvcmUoKX0sdXJsOmZ1bmN0aW9uKCl7dmFyIGEsYj1vLmk7cmV0dXJuIG8uYXV0b0NvbW1lbnRBYnNvcmI9ITEsby4kc3RyKFwidXJsKFwiKT8oYT10aGlzLnF1b3RlZCgpfHx0aGlzLnZhcmlhYmxlKCl8fG8uJHJlKC9eKD86KD86XFxcXFtcXChcXCknXCJdKXxbXlxcKFxcKSdcIl0pKy8pfHxcIlwiLG8uYXV0b0NvbW1lbnRBYnNvcmI9ITAsayhcIilcIiksbmV3IGQuVVJMKG51bGwhPWEudmFsdWV8fGEgaW5zdGFuY2VvZiBkLlZhcmlhYmxlP2E6bmV3IGQuQW5vbnltb3VzKGEpLGIsaCkpOnZvaWQoby5hdXRvQ29tbWVudEFic29yYj0hMCl9LHZhcmlhYmxlOmZ1bmN0aW9uKCl7dmFyIGEsYj1vLmk7cmV0dXJuXCJAXCI9PT1vLmN1cnJlbnRDaGFyKCkmJihhPW8uJHJlKC9eQEA/W1xcdy1dKy8pKT9uZXcgZC5WYXJpYWJsZShhLGIsaCk6dm9pZCAwfSx2YXJpYWJsZUN1cmx5OmZ1bmN0aW9uKCl7dmFyIGEsYj1vLmk7cmV0dXJuXCJAXCI9PT1vLmN1cnJlbnRDaGFyKCkmJihhPW8uJHJlKC9eQFxceyhbXFx3LV0rKVxcfS8pKT9uZXcgZC5WYXJpYWJsZShcIkBcIithWzFdLGIsaCk6dm9pZCAwfSxjb2xvcjpmdW5jdGlvbigpe3ZhciBhO2lmKFwiI1wiPT09by5jdXJyZW50Q2hhcigpJiYoYT1vLiRyZSgvXiMoW0EtRmEtZjAtOV17Nn18W0EtRmEtZjAtOV17M30pLykpKXt2YXIgYj1hLmlucHV0Lm1hdGNoKC9eIyhbXFx3XSspLiovKTtyZXR1cm4gYj1iWzFdLGIubWF0Y2goL15bQS1GYS1mMC05XSskLyl8fGwoXCJJbnZhbGlkIEhFWCBjb2xvciBjb2RlXCIpLG5ldyBkLkNvbG9yKGFbMV0pfX0sZGltZW5zaW9uOmZ1bmN0aW9uKCl7aWYoIW8ucGVla05vdE51bWVyaWMoKSl7dmFyIGE9by4kcmUoL14oWystXT9cXGQqXFwuP1xcZCspKCV8W2Etel0rKT8vaSk7cmV0dXJuIGE/bmV3IGQuRGltZW5zaW9uKGFbMV0sYVsyXSk6dm9pZCAwfX0sdW5pY29kZURlc2NyaXB0b3I6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gYT1vLiRyZSgvXlVcXCtbMC05YS1mQS1GP10rKFxcLVswLTlhLWZBLUY/XSspPy8pLGE/bmV3IGQuVW5pY29kZURlc2NyaXB0b3IoYVswXSk6dm9pZCAwfSxqYXZhc2NyaXB0OmZ1bmN0aW9uKCl7dmFyIGEsYj1vLmk7by5zYXZlKCk7dmFyIGM9by4kY2hhcihcIn5cIiksZT1vLiRjaGFyKFwiYFwiKTtyZXR1cm4gZT8oYT1vLiRyZSgvXlteYF0qYC8pKT8oby5mb3JnZXQoKSxuZXcgZC5KYXZhU2NyaXB0KGEuc3Vic3RyKDAsYS5sZW5ndGgtMSksQm9vbGVhbihjKSxiLGgpKTp2b2lkIG8ucmVzdG9yZShcImludmFsaWQgamF2YXNjcmlwdCBkZWZpbml0aW9uXCIpOnZvaWQgby5yZXN0b3JlKCl9fSx2YXJpYWJsZTpmdW5jdGlvbigpe3ZhciBhO3JldHVyblwiQFwiPT09by5jdXJyZW50Q2hhcigpJiYoYT1vLiRyZSgvXihAW1xcdy1dKylcXHMqOi8pKT9hWzFdOnZvaWQgMH0scnVsZXNldENhbGw6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm5cIkBcIj09PW8uY3VycmVudENoYXIoKSYmKGE9by4kcmUoL14oQFtcXHctXSspXFxzKlxcKFxccypcXClcXHMqOy8pKT9uZXcgZC5SdWxlc2V0Q2FsbChhWzFdKTp2b2lkIDB9LGV4dGVuZDpmdW5jdGlvbihhKXt2YXIgYixjLGUsZixnLGg9by5pO2lmKG8uJHN0cihhP1wiJjpleHRlbmQoXCI6XCI6ZXh0ZW5kKFwiKSl7ZG97Zm9yKGU9bnVsbCxiPW51bGw7IShlPW8uJHJlKC9eKGFsbCkoPz1cXHMqKFxcKXwsKSkvKSkmJihjPXRoaXMuZWxlbWVudCgpKTspYj9iLnB1c2goYyk6Yj1bY107ZT1lJiZlWzFdLGJ8fGwoXCJNaXNzaW5nIHRhcmdldCBzZWxlY3RvciBmb3IgOmV4dGVuZCgpLlwiKSxnPW5ldyBkLkV4dGVuZChuZXcgZC5TZWxlY3RvcihiKSxlLGgpLGY/Zi5wdXNoKGcpOmY9W2ddfXdoaWxlKG8uJGNoYXIoXCIsXCIpKTtyZXR1cm4gaigvXlxcKS8pLGEmJmooL147LyksZn19LGV4dGVuZFJ1bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbmQoITApfSxtaXhpbjp7Y2FsbDpmdW5jdGlvbigpe3ZhciBhLGIsYyxlLGYsZyxpPW8uY3VycmVudENoYXIoKSxqPSExLGw9by5pO2lmKFwiLlwiPT09aXx8XCIjXCI9PT1pKXtmb3Ioby5zYXZlKCk7Oyl7aWYoYT1vLmksZT1vLiRyZSgvXlsjLl0oPzpbXFx3LV18XFxcXCg/OltBLUZhLWYwLTldezEsNn0gP3xbXkEtRmEtZjAtOV0pKSsvKSwhZSlicmVhaztjPW5ldyBkLkVsZW1lbnQoZixlLGEsaCksYj9iLnB1c2goYyk6Yj1bY10sZj1vLiRjaGFyKFwiPlwiKX1yZXR1cm4gYiYmKG8uJGNoYXIoXCIoXCIpJiYoZz10aGlzLmFyZ3MoITApLmFyZ3MsayhcIilcIikpLG4uaW1wb3J0YW50KCkmJihqPSEwKSxuLmVuZCgpKT8oby5mb3JnZXQoKSxuZXcgZC5taXhpbi5DYWxsKGIsZyxsLGgsaikpOnZvaWQgby5yZXN0b3JlKCl9fSxhcmdzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmLGcsaCxpPW4uZW50aXRpZXMsaj17YXJnczpudWxsLHZhcmlhZGljOiExfSxrPVtdLG09W10scD1bXTtmb3Ioby5zYXZlKCk7Oyl7aWYoYSloPW4uZGV0YWNoZWRSdWxlc2V0KCl8fG4uZXhwcmVzc2lvbigpO2Vsc2V7aWYoby5jb21tZW50U3RvcmUubGVuZ3RoPTAsby4kc3RyKFwiLi4uXCIpKXtqLnZhcmlhZGljPSEwLG8uJGNoYXIoXCI7XCIpJiYhYiYmKGI9ITApLChiP206cCkucHVzaCh7dmFyaWFkaWM6ITB9KTticmVha31oPWkudmFyaWFibGUoKXx8aS5saXRlcmFsKCl8fGkua2V5d29yZCgpfWlmKCFoKWJyZWFrO2Y9bnVsbCxoLnRocm93QXdheUNvbW1lbnRzJiZoLnRocm93QXdheUNvbW1lbnRzKCksZz1oO3ZhciBxPW51bGw7aWYoYT9oLnZhbHVlJiYxPT1oLnZhbHVlLmxlbmd0aCYmKHE9aC52YWx1ZVswXSk6cT1oLHEmJnEgaW5zdGFuY2VvZiBkLlZhcmlhYmxlKWlmKG8uJGNoYXIoXCI6XCIpKXtpZihrLmxlbmd0aD4wJiYoYiYmbChcIkNhbm5vdCBtaXggOyBhbmQgLCBhcyBkZWxpbWl0ZXIgdHlwZXNcIiksYz0hMCksZz1uLmRldGFjaGVkUnVsZXNldCgpfHxuLmV4cHJlc3Npb24oKSwhZyl7aWYoIWEpcmV0dXJuIG8ucmVzdG9yZSgpLGouYXJncz1bXSxqO2woXCJjb3VsZCBub3QgdW5kZXJzdGFuZCB2YWx1ZSBmb3IgbmFtZWQgYXJndW1lbnRcIil9Zj1lPXEubmFtZX1lbHNle2lmKCFhJiZvLiRzdHIoXCIuLi5cIikpe2oudmFyaWFkaWM9ITAsby4kY2hhcihcIjtcIikmJiFiJiYoYj0hMCksKGI/bTpwKS5wdXNoKHtuYW1lOmgubmFtZSx2YXJpYWRpYzohMH0pO2JyZWFrfWF8fChlPWY9cS5uYW1lLGc9bnVsbCl9ZyYmay5wdXNoKGcpLHAucHVzaCh7bmFtZTpmLHZhbHVlOmd9KSxvLiRjaGFyKFwiLFwiKXx8KG8uJGNoYXIoXCI7XCIpfHxiKSYmKGMmJmwoXCJDYW5ub3QgbWl4IDsgYW5kICwgYXMgZGVsaW1pdGVyIHR5cGVzXCIpLGI9ITAsay5sZW5ndGg+MSYmKGc9bmV3IGQuVmFsdWUoaykpLG0ucHVzaCh7bmFtZTplLHZhbHVlOmd9KSxlPW51bGwsaz1bXSxjPSExKX1yZXR1cm4gby5mb3JnZXQoKSxqLmFyZ3M9Yj9tOnAsan0sZGVmaW5pdGlvbjpmdW5jdGlvbigpe3ZhciBhLGIsYyxlLGY9W10sZz0hMTtpZighKFwiLlwiIT09by5jdXJyZW50Q2hhcigpJiZcIiNcIiE9PW8uY3VycmVudENoYXIoKXx8by5wZWVrKC9eW157XSpcXH0vKSkpaWYoby5zYXZlKCksYj1vLiRyZSgvXihbIy5dKD86W1xcdy1dfFxcXFwoPzpbQS1GYS1mMC05XXsxLDZ9ID98W15BLUZhLWYwLTldKSkrKVxccypcXCgvKSl7YT1iWzFdO3ZhciBoPXRoaXMuYXJncyghMSk7aWYoZj1oLmFyZ3MsZz1oLnZhcmlhZGljLCFvLiRjaGFyKFwiKVwiKSlyZXR1cm4gdm9pZCBvLnJlc3RvcmUoXCJNaXNzaW5nIGNsb3NpbmcgJyknXCIpO2lmKG8uY29tbWVudFN0b3JlLmxlbmd0aD0wLG8uJHN0cihcIndoZW5cIikmJihlPWoobi5jb25kaXRpb25zLFwiZXhwZWN0ZWQgY29uZGl0aW9uXCIpKSxjPW4uYmxvY2soKSlyZXR1cm4gby5mb3JnZXQoKSxuZXcgZC5taXhpbi5EZWZpbml0aW9uKGEsZixjLGUsZyk7by5yZXN0b3JlKCl9ZWxzZSBvLmZvcmdldCgpfX0sZW50aXR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbnRpdGllcztyZXR1cm4gdGhpcy5jb21tZW50KCl8fGEubGl0ZXJhbCgpfHxhLnZhcmlhYmxlKCl8fGEudXJsKCl8fGEuY2FsbCgpfHxhLmtleXdvcmQoKXx8YS5qYXZhc2NyaXB0KCl9LGVuZDpmdW5jdGlvbigpe3JldHVybiBvLiRjaGFyKFwiO1wiKXx8by5wZWVrKFwifVwiKX0sYWxwaGE6ZnVuY3Rpb24oKXt2YXIgYTtpZihvLiRyZSgvXm9wYWNpdHk9L2kpKXJldHVybiBhPW8uJHJlKC9eXFxkKy8pLGF8fChhPWoodGhpcy5lbnRpdGllcy52YXJpYWJsZSxcIkNvdWxkIG5vdCBwYXJzZSBhbHBoYVwiKSksayhcIilcIiksbmV3IGQuQWxwaGEoYSl9LGVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZT1vLmk7cmV0dXJuIGI9dGhpcy5jb21iaW5hdG9yKCksYT1vLiRyZSgvXig/OlxcZCtcXC5cXGQrfFxcZCspJS8pfHxvLiRyZSgvXig/OlsuI10/fDoqKSg/OltcXHctXXxbXlxceDAwLVxceDlmXXxcXFxcKD86W0EtRmEtZjAtOV17MSw2fSA/fFteQS1GYS1mMC05XSkpKy8pfHxvLiRjaGFyKFwiKlwiKXx8by4kY2hhcihcIiZcIil8fHRoaXMuYXR0cmlidXRlKCl8fG8uJHJlKC9eXFwoW14mKClAXStcXCkvKXx8by4kcmUoL15bXFwuIzpdKD89QCkvKXx8dGhpcy5lbnRpdGllcy52YXJpYWJsZUN1cmx5KCksYXx8KG8uc2F2ZSgpLG8uJGNoYXIoXCIoXCIpPyhjPXRoaXMuc2VsZWN0b3IoKSkmJm8uJGNoYXIoXCIpXCIpPyhhPW5ldyBkLlBhcmVuKGMpLG8uZm9yZ2V0KCkpOm8ucmVzdG9yZShcIk1pc3NpbmcgY2xvc2luZyAnKSdcIik6by5mb3JnZXQoKSksYT9uZXcgZC5FbGVtZW50KGIsYSxlLGgpOnZvaWQgMH0sY29tYmluYXRvcjpmdW5jdGlvbigpe3ZhciBhPW8uY3VycmVudENoYXIoKTtpZihcIi9cIj09PWEpe28uc2F2ZSgpO3ZhciBiPW8uJHJlKC9eXFwvW2Etel0rXFwvL2kpO2lmKGIpcmV0dXJuIG8uZm9yZ2V0KCksbmV3IGQuQ29tYmluYXRvcihiKTtvLnJlc3RvcmUoKX1pZihcIj5cIj09PWF8fFwiK1wiPT09YXx8XCJ+XCI9PT1hfHxcInxcIj09PWF8fFwiXlwiPT09YSl7Zm9yKG8uaSsrLFwiXlwiPT09YSYmXCJeXCI9PT1vLmN1cnJlbnRDaGFyKCkmJihhPVwiXl5cIixvLmkrKyk7by5pc1doaXRlc3BhY2UoKTspby5pKys7cmV0dXJuIG5ldyBkLkNvbWJpbmF0b3IoYSl9cmV0dXJuIG5ldyBkLkNvbWJpbmF0b3Ioby5pc1doaXRlc3BhY2UoLTEpP1wiIFwiOm51bGwpfSxsZXNzU2VsZWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3RvcighMCl9LHNlbGVjdG9yOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGUsZixnLGksayxtPW8uaTsoYSYmKGM9dGhpcy5leHRlbmQoKSl8fGEmJihpPW8uJHN0cihcIndoZW5cIikpfHwoZj10aGlzLmVsZW1lbnQoKSkpJiYoaT9rPWoodGhpcy5jb25kaXRpb25zLFwiZXhwZWN0ZWQgY29uZGl0aW9uXCIpOms/bChcIkNTUyBndWFyZCBjYW4gb25seSBiZSB1c2VkIGF0IHRoZSBlbmQgb2Ygc2VsZWN0b3JcIik6Yz9nPWc/Zy5jb25jYXQoYyk6YzooZyYmbChcIkV4dGVuZCBjYW4gb25seSBiZSB1c2VkIGF0IHRoZSBlbmQgb2Ygc2VsZWN0b3JcIiksZT1vLmN1cnJlbnRDaGFyKCksYj9iLnB1c2goZik6Yj1bZl0sZj1udWxsKSxcIntcIiE9PWUmJlwifVwiIT09ZSYmXCI7XCIhPT1lJiZcIixcIiE9PWUmJlwiKVwiIT09ZSk7KTtyZXR1cm4gYj9uZXcgZC5TZWxlY3RvcihiLGcsayxtLGgpOnZvaWQoZyYmbChcIkV4dGVuZCBtdXN0IGJlIHVzZWQgdG8gZXh0ZW5kIGEgc2VsZWN0b3IsIGl0IGNhbm5vdCBiZSB1c2VkIG9uIGl0cyBvd25cIikpfSxhdHRyaWJ1dGU6ZnVuY3Rpb24oKXtpZihvLiRjaGFyKFwiW1wiKSl7dmFyIGEsYixjLGU9dGhpcy5lbnRpdGllcztyZXR1cm4oYT1lLnZhcmlhYmxlQ3VybHkoKSl8fChhPWooL14oPzpbX0EtWmEtejAtOS1cXCpdKlxcfCk/KD86W19BLVphLXowLTktXXxcXFxcLikrLykpLGM9by4kcmUoL15bfH4qJF5dPz0vKSxjJiYoYj1lLnF1b3RlZCgpfHxvLiRyZSgvXlswLTldKyUvKXx8by4kcmUoL15bXFx3LV0rLyl8fGUudmFyaWFibGVDdXJseSgpKSxrKFwiXVwiKSxuZXcgZC5BdHRyaWJ1dGUoYSxjLGIpfX0sYmxvY2s6ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gby4kY2hhcihcIntcIikmJihhPXRoaXMucHJpbWFyeSgpKSYmby4kY2hhcihcIn1cIik/YTp2b2lkIDB9LGJsb2NrUnVsZXNldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmxvY2soKTtyZXR1cm4gYSYmKGE9bmV3IGQuUnVsZXNldChudWxsLGEpKSxhfSxkZXRhY2hlZFJ1bGVzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJsb2NrUnVsZXNldCgpO3JldHVybiBhP25ldyBkLkRldGFjaGVkUnVsZXNldChhKTp2b2lkIDB9LHJ1bGVzZXQ6ZnVuY3Rpb24oKXt2YXIgYixjLGUsZjtmb3Ioby5zYXZlKCksYS5kdW1wTGluZU51bWJlcnMmJihmPW0oby5pKSk7Oyl7aWYoYz10aGlzLmxlc3NTZWxlY3RvcigpLCFjKWJyZWFrO2lmKGI/Yi5wdXNoKGMpOmI9W2NdLG8uY29tbWVudFN0b3JlLmxlbmd0aD0wLGMuY29uZGl0aW9uJiZiLmxlbmd0aD4xJiZsKFwiR3VhcmRzIGFyZSBvbmx5IGN1cnJlbnRseSBhbGxvd2VkIG9uIGEgc2luZ2xlIHNlbGVjdG9yLlwiKSwhby4kY2hhcihcIixcIikpYnJlYWs7Yy5jb25kaXRpb24mJmwoXCJHdWFyZHMgYXJlIG9ubHkgY3VycmVudGx5IGFsbG93ZWQgb24gYSBzaW5nbGUgc2VsZWN0b3IuXCIpLG8uY29tbWVudFN0b3JlLmxlbmd0aD0wfWlmKGImJihlPXRoaXMuYmxvY2soKSkpe28uZm9yZ2V0KCk7dmFyIGc9bmV3IGQuUnVsZXNldChiLGUsYS5zdHJpY3RJbXBvcnRzKTtyZXR1cm4gYS5kdW1wTGluZU51bWJlcnMmJihnLmRlYnVnSW5mbz1mKSxnfW8ucmVzdG9yZSgpfSxydWxlOmZ1bmN0aW9uKGIpe3ZhciBjLGUsZixnLGksaj1vLmksaz1vLmN1cnJlbnRDaGFyKCk7aWYoXCIuXCIhPT1rJiZcIiNcIiE9PWsmJlwiJlwiIT09ayYmXCI6XCIhPT1rKWlmKG8uc2F2ZSgpLGM9dGhpcy52YXJpYWJsZSgpfHx0aGlzLnJ1bGVQcm9wZXJ0eSgpKXtpZihpPVwic3RyaW5nXCI9PXR5cGVvZiBjLGkmJihlPXRoaXMuZGV0YWNoZWRSdWxlc2V0KCkpLG8uY29tbWVudFN0b3JlLmxlbmd0aD0wLCFlKXtnPSFpJiZjLmxlbmd0aD4xJiZjLnBvcCgpLnZhbHVlO3ZhciBsPSFiJiYoYS5jb21wcmVzc3x8aSk7aWYobCYmKGU9dGhpcy52YWx1ZSgpKSwhZSYmKGU9dGhpcy5hbm9ueW1vdXNWYWx1ZSgpKSlyZXR1cm4gby5mb3JnZXQoKSxuZXcgZC5SdWxlKGMsZSwhMSxnLGosaCk7bHx8ZXx8KGU9dGhpcy52YWx1ZSgpKSxmPXRoaXMuaW1wb3J0YW50KCl9aWYoZSYmdGhpcy5lbmQoKSlyZXR1cm4gby5mb3JnZXQoKSxuZXcgZC5SdWxlKGMsZSxmLGcsaixoKTtpZihvLnJlc3RvcmUoKSxlJiYhYilyZXR1cm4gdGhpcy5ydWxlKCEwKX1lbHNlIG8uZm9yZ2V0KCl9LGFub255bW91c1ZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9by4kcmUoL14oW15AK1xcLydcIipgKDt7fS1dKik7Lyk7cmV0dXJuIGE/bmV3IGQuQW5vbnltb3VzKGFbMV0pOnZvaWQgMH0sXCJpbXBvcnRcIjpmdW5jdGlvbigpe3ZhciBhLGIsYz1vLmksZT1vLiRyZSgvXkBpbXBvcnQ/XFxzKy8pO2lmKGUpe3ZhciBmPShlP3RoaXMuaW1wb3J0T3B0aW9ucygpOm51bGwpfHx7fTtpZihhPXRoaXMuZW50aXRpZXMucXVvdGVkKCl8fHRoaXMuZW50aXRpZXMudXJsKCkpcmV0dXJuIGI9dGhpcy5tZWRpYUZlYXR1cmVzKCksby4kY2hhcihcIjtcIil8fChvLmk9YyxsKFwibWlzc2luZyBzZW1pLWNvbG9uIG9yIHVucmVjb2duaXNlZCBtZWRpYSBmZWF0dXJlcyBvbiBpbXBvcnRcIikpLGI9YiYmbmV3IGQuVmFsdWUoYiksbmV3IGQuSW1wb3J0KGEsYixmLGMsaCk7by5pPWMsbChcIm1hbGZvcm1lZCBpbXBvcnQgc3RhdGVtZW50XCIpfX0saW1wb3J0T3B0aW9uczpmdW5jdGlvbigpe3ZhciBhLGIsYyxkPXt9O2lmKCFvLiRjaGFyKFwiKFwiKSlyZXR1cm4gbnVsbDtkbyBpZihhPXRoaXMuaW1wb3J0T3B0aW9uKCkpe3N3aXRjaChiPWEsYz0hMCxiKXtjYXNlXCJjc3NcIjpiPVwibGVzc1wiLGM9ITE7YnJlYWs7Y2FzZVwib25jZVwiOmI9XCJtdWx0aXBsZVwiLGM9ITF9aWYoZFtiXT1jLCFvLiRjaGFyKFwiLFwiKSlicmVha313aGlsZShhKTtyZXR1cm4gayhcIilcIiksZH0saW1wb3J0T3B0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9by4kcmUoL14obGVzc3xjc3N8bXVsdGlwbGV8b25jZXxpbmxpbmV8cmVmZXJlbmNlfG9wdGlvbmFsKS8pO3JldHVybiBhP2FbMV06dm9pZCAwfSxtZWRpYUZlYXR1cmU6ZnVuY3Rpb24oKXt2YXIgYSxiLGM9dGhpcy5lbnRpdGllcyxlPVtdO28uc2F2ZSgpO2RvIGlmKGE9Yy5rZXl3b3JkKCl8fGMudmFyaWFibGUoKSllLnB1c2goYSk7ZWxzZSBpZihvLiRjaGFyKFwiKFwiKSl7aWYoYj10aGlzLnByb3BlcnR5KCksYT10aGlzLnZhbHVlKCksIW8uJGNoYXIoXCIpXCIpKXJldHVybiBvLnJlc3RvcmUoXCJNaXNzaW5nIGNsb3NpbmcgJyknXCIpLG51bGw7aWYoYiYmYSllLnB1c2gobmV3IGQuUGFyZW4obmV3IGQuUnVsZShiLGEsbnVsbCxudWxsLG8uaSxoLCEwKSkpO2Vsc2V7aWYoIWEpcmV0dXJuIG8ucmVzdG9yZShcImJhZGx5IGZvcm1lZCBtZWRpYSBmZWF0dXJlIGRlZmluaXRpb25cIiksbnVsbDtlLnB1c2gobmV3IGQuUGFyZW4oYSkpfX13aGlsZShhKTtyZXR1cm4gby5mb3JnZXQoKSxlLmxlbmd0aD4wP25ldyBkLkV4cHJlc3Npb24oZSk6dm9pZCAwfSxtZWRpYUZlYXR1cmVzOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLmVudGl0aWVzLGM9W107ZG8gaWYoYT10aGlzLm1lZGlhRmVhdHVyZSgpKXtpZihjLnB1c2goYSksIW8uJGNoYXIoXCIsXCIpKWJyZWFrfWVsc2UgaWYoYT1iLnZhcmlhYmxlKCksYSYmKGMucHVzaChhKSwhby4kY2hhcihcIixcIikpKWJyZWFrO3doaWxlKGEpO3JldHVybiBjLmxlbmd0aD4wP2M6bnVsbH0sbWVkaWE6ZnVuY3Rpb24oKXt2YXIgYixjLGUsZjtyZXR1cm4gYS5kdW1wTGluZU51bWJlcnMmJihmPW0oby5pKSksby5zYXZlKCksby4kc3RyKFwiQG1lZGlhXCIpPyhiPXRoaXMubWVkaWFGZWF0dXJlcygpLChjPXRoaXMuYmxvY2soKSk/KG8uZm9yZ2V0KCksZT1uZXcgZC5NZWRpYShjLGIsby5pLGgpLGEuZHVtcExpbmVOdW1iZXJzJiYoZS5kZWJ1Z0luZm89ZiksZSk6dm9pZCBvLnJlc3RvcmUoXCJtZWRpYSBkZWZpbml0aW9ucyByZXF1aXJlIGJsb2NrIHN0YXRlbWVudHMgYWZ0ZXIgYW55IGZlYXR1cmVzXCIpKTp2b2lkIG8ucmVzdG9yZSgpfSxwbHVnaW46ZnVuY3Rpb24oKXt2YXIgYSxiPW8uaSxjPW8uJHJlKC9eQHBsdWdpbj9cXHMrLyk7aWYoYyl7dmFyIGU9e3BsdWdpbjohMH07aWYoYT10aGlzLmVudGl0aWVzLnF1b3RlZCgpfHx0aGlzLmVudGl0aWVzLnVybCgpKXJldHVybiBvLiRjaGFyKFwiO1wiKXx8KG8uaT1iLGwoXCJtaXNzaW5nIHNlbWktY29sb24gb24gcGx1Z2luXCIpKSxuZXcgZC5JbXBvcnQoYSxudWxsLGUsYixoKTtvLmk9YixsKFwibWFsZm9ybWVkIHBsdWdpbiBzdGF0ZW1lbnRcIil9fSxkaXJlY3RpdmU6ZnVuY3Rpb24oKXt2YXIgYixjLGUsZixnLGksaixrPW8uaSxuPSEwLHA9ITA7aWYoXCJAXCI9PT1vLmN1cnJlbnRDaGFyKCkpe2lmKGM9dGhpc1tcImltcG9ydFwiXSgpfHx0aGlzLnBsdWdpbigpfHx0aGlzLm1lZGlhKCkpcmV0dXJuIGM7aWYoby5zYXZlKCksYj1vLiRyZSgvXkBbYS16LV0rLykpe3N3aXRjaChmPWIsXCItXCI9PWIuY2hhckF0KDEpJiZiLmluZGV4T2YoXCItXCIsMik+MCYmKGY9XCJAXCIrYi5zbGljZShiLmluZGV4T2YoXCItXCIsMikrMSkpLGYpe2Nhc2VcIkBjb3VudGVyLXN0eWxlXCI6Zz0hMCxuPSEwO2JyZWFrO2Nhc2VcIkBjaGFyc2V0XCI6Zz0hMCxuPSExO2JyZWFrO2Nhc2VcIkBuYW1lc3BhY2VcIjppPSEwLG49ITE7YnJlYWs7Y2FzZVwiQGtleWZyYW1lc1wiOmc9ITA7YnJlYWs7Y2FzZVwiQGhvc3RcIjpjYXNlXCJAcGFnZVwiOmo9ITA7YnJlYWs7Y2FzZVwiQGRvY3VtZW50XCI6Y2FzZVwiQHN1cHBvcnRzXCI6aj0hMCxwPSExfXJldHVybiBvLmNvbW1lbnRTdG9yZS5sZW5ndGg9MCxnPyhjPXRoaXMuZW50aXR5KCksY3x8bChcImV4cGVjdGVkIFwiK2IrXCIgaWRlbnRpZmllclwiKSk6aT8oYz10aGlzLmV4cHJlc3Npb24oKSxjfHxsKFwiZXhwZWN0ZWQgXCIrYitcIiBleHByZXNzaW9uXCIpKTpqJiYoYz0oby4kcmUoL15bXns7XSsvKXx8XCJcIikudHJpbSgpLGMmJihjPW5ldyBkLkFub255bW91cyhjKSkpLG4mJihlPXRoaXMuYmxvY2tSdWxlc2V0KCkpLGV8fCFuJiZjJiZvLiRjaGFyKFwiO1wiKT8oby5mb3JnZXQoKSxuZXcgZC5EaXJlY3RpdmUoYixjLGUsayxoLGEuZHVtcExpbmVOdW1iZXJzP20oayk6bnVsbCwhMSxwKSk6dm9pZCBvLnJlc3RvcmUoXCJkaXJlY3RpdmUgb3B0aW9ucyBub3QgcmVjb2duaXNlZFwiKX19fSx2YWx1ZTpmdW5jdGlvbigpe3ZhciBhLGI9W107ZG8gaWYoYT10aGlzLmV4cHJlc3Npb24oKSxhJiYoYi5wdXNoKGEpLCFvLiRjaGFyKFwiLFwiKSkpYnJlYWs7d2hpbGUoYSk7cmV0dXJuIGIubGVuZ3RoPjA/bmV3IGQuVmFsdWUoYik6dm9pZCAwfSxpbXBvcnRhbnQ6ZnVuY3Rpb24oKXtyZXR1cm5cIiFcIj09PW8uY3VycmVudENoYXIoKT9vLiRyZSgvXiEgKmltcG9ydGFudC8pOnZvaWQgMH0sc3ViOmZ1bmN0aW9uKCl7dmFyIGEsYjtyZXR1cm4gby5zYXZlKCksby4kY2hhcihcIihcIik/KGE9dGhpcy5hZGRpdGlvbigpLGEmJm8uJGNoYXIoXCIpXCIpPyhvLmZvcmdldCgpLGI9bmV3IGQuRXhwcmVzc2lvbihbYV0pLGIucGFyZW5zPSEwLGIpOnZvaWQgby5yZXN0b3JlKFwiRXhwZWN0ZWQgJyknXCIpKTp2b2lkIG8ucmVzdG9yZSgpfSxtdWx0aXBsaWNhdGlvbjpmdW5jdGlvbigpe3ZhciBhLGIsYyxlLGY7aWYoYT10aGlzLm9wZXJhbmQoKSl7Zm9yKGY9by5pc1doaXRlc3BhY2UoLTEpOzspe2lmKG8ucGVlaygvXlxcL1sqXFwvXS8pKWJyZWFrO2lmKG8uc2F2ZSgpLGM9by4kY2hhcihcIi9cIil8fG8uJGNoYXIoXCIqXCIpLCFjKXtvLmZvcmdldCgpO2JyZWFrfWlmKGI9dGhpcy5vcGVyYW5kKCksIWIpe28ucmVzdG9yZSgpO2JyZWFrfW8uZm9yZ2V0KCksYS5wYXJlbnNJbk9wPSEwLGIucGFyZW5zSW5PcD0hMCxlPW5ldyBkLk9wZXJhdGlvbihjLFtlfHxhLGJdLGYpLGY9by5pc1doaXRlc3BhY2UoLTEpfXJldHVybiBlfHxhfX0sYWRkaXRpb246ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZSxmO2lmKGE9dGhpcy5tdWx0aXBsaWNhdGlvbigpKXtmb3IoZj1vLmlzV2hpdGVzcGFjZSgtMSk7Oyl7aWYoYz1vLiRyZSgvXlstK11cXHMrLyl8fCFmJiYoby4kY2hhcihcIitcIil8fG8uJGNoYXIoXCItXCIpKSwhYylicmVhaztpZihiPXRoaXMubXVsdGlwbGljYXRpb24oKSwhYilicmVhazthLnBhcmVuc0luT3A9ITAsYi5wYXJlbnNJbk9wPSEwLGU9bmV3IGQuT3BlcmF0aW9uKGMsW2V8fGEsYl0sZiksZj1vLmlzV2hpdGVzcGFjZSgtMSl9cmV0dXJuIGV8fGF9fSxjb25kaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGEsYixjLGU9by5pO2lmKGE9dGhpcy5jb25kaXRpb24oKSl7Zm9yKDs7KXtpZighby5wZWVrKC9eLFxccyoobm90XFxzKik/XFwoLyl8fCFvLiRjaGFyKFwiLFwiKSlicmVhaztpZihiPXRoaXMuY29uZGl0aW9uKCksIWIpYnJlYWs7Yz1uZXcgZC5Db25kaXRpb24oXCJvclwiLGN8fGEsYixlKX1yZXR1cm4gY3x8YX19LGNvbmRpdGlvbjpmdW5jdGlvbigpe3ZhciBhLGIsYyxlLGY9dGhpcy5lbnRpdGllcyxnPW8uaSxoPSExO3JldHVybiBvLiRzdHIoXCJub3RcIikmJihoPSEwKSxrKFwiKFwiKSxhPXRoaXMuYWRkaXRpb24oKXx8Zi5rZXl3b3JkKCl8fGYucXVvdGVkKCksYT8oby4kY2hhcihcIj5cIik/ZT1vLiRjaGFyKFwiPVwiKT9cIj49XCI6XCI+XCI6by4kY2hhcihcIjxcIik/ZT1vLiRjaGFyKFwiPVwiKT9cIjw9XCI6XCI8XCI6by4kY2hhcihcIj1cIikmJihlPW8uJGNoYXIoXCI+XCIpP1wiPT5cIjpvLiRjaGFyKFwiPFwiKT9cIj08XCI6XCI9XCIpLGU/KGI9dGhpcy5hZGRpdGlvbigpfHxmLmtleXdvcmQoKXx8Zi5xdW90ZWQoKSxiP2M9bmV3IGQuQ29uZGl0aW9uKGUsYSxiLGcsaCk6bChcImV4cGVjdGVkIGV4cHJlc3Npb25cIikpOmM9bmV3IGQuQ29uZGl0aW9uKFwiPVwiLGEsbmV3IGQuS2V5d29yZChcInRydWVcIiksZyxoKSxrKFwiKVwiKSxvLiRzdHIoXCJhbmRcIik/bmV3IGQuQ29uZGl0aW9uKFwiYW5kXCIsYyx0aGlzLmNvbmRpdGlvbigpKTpjKTp2b2lkIDB9LG9wZXJhbmQ6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuZW50aXRpZXM7by5wZWVrKC9eLVtAXFwoXS8pJiYoYT1vLiRjaGFyKFwiLVwiKSk7dmFyIGM9dGhpcy5zdWIoKXx8Yi5kaW1lbnNpb24oKXx8Yi5jb2xvcigpfHxiLnZhcmlhYmxlKCl8fGIuY2FsbCgpO3JldHVybiBhJiYoYy5wYXJlbnNJbk9wPSEwLGM9bmV3IGQuTmVnYXRpdmUoYykpLGN9LGV4cHJlc3Npb246ZnVuY3Rpb24oKXt2YXIgYSxiLGM9W107ZG8gYT10aGlzLmNvbW1lbnQoKSxhP2MucHVzaChhKTooYT10aGlzLmFkZGl0aW9uKCl8fHRoaXMuZW50aXR5KCksYSYmKGMucHVzaChhKSxvLnBlZWsoL15cXC9bXFwvKl0vKXx8KGI9by4kY2hhcihcIi9cIiksYiYmYy5wdXNoKG5ldyBkLkFub255bW91cyhiKSkpKSk7d2hpbGUoYSk7cmV0dXJuIGMubGVuZ3RoPjA/bmV3IGQuRXhwcmVzc2lvbihjKTp2b2lkIDB9LHByb3BlcnR5OmZ1bmN0aW9uKCl7dmFyIGE9by4kcmUoL14oXFwqPy0/W19hLXpBLVowLTktXSspXFxzKjovKTtyZXR1cm4gYT9hWzFdOnZvaWQgMH0scnVsZVByb3BlcnR5OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj1vLmksYz1vLiRyZShhKTtyZXR1cm4gYz8oZi5wdXNoKGIpLGUucHVzaChjWzFdKSk6dm9pZCAwfXZhciBiLGMsZT1bXSxmPVtdO28uc2F2ZSgpO3ZhciBnPW8uJHJlKC9eKFtfYS16QS1aMC05LV0rKVxccyo6Lyk7aWYoZylyZXR1cm4gZT1bbmV3IGQuS2V5d29yZChnWzFdKV0sby5mb3JnZXQoKSxlO2ZvcihhKC9eKFxcKj8pLyk7OylpZighYSgvXigoPzpbXFx3LV0rKXwoPzpAXFx7W1xcdy1dK1xcfSkpLykpYnJlYWs7aWYoZS5sZW5ndGg+MSYmYSgvXigoPzpcXCtffFxcKyk/KVxccyo6Lykpe2ZvcihvLmZvcmdldCgpLFwiXCI9PT1lWzBdJiYoZS5zaGlmdCgpLGYuc2hpZnQoKSksYz0wO2UubGVuZ3RoPmM7YysrKWI9ZVtjXSxlW2NdPVwiQFwiIT09Yi5jaGFyQXQoMCk/bmV3IGQuS2V5d29yZChiKTpuZXcgZC5WYXJpYWJsZShcIkBcIitiLnNsaWNlKDIsLTEpLGZbY10saCk7cmV0dXJuIGV9by5yZXN0b3JlKCl9fX19O2guc2VyaWFsaXplVmFycz1mdW5jdGlvbihhKXt2YXIgYj1cIlwiO2Zvcih2YXIgYyBpbiBhKWlmKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykpe3ZhciBkPWFbY107Yis9KFwiQFwiPT09Y1swXT9cIlwiOlwiQFwiKStjK1wiOiBcIitkKyhcIjtcIj09PVN0cmluZyhkKS5zbGljZSgtMSk/XCJcIjpcIjtcIil9cmV0dXJuIGJ9LGIuZXhwb3J0cz1ofSx7XCIuLi9sZXNzLWVycm9yXCI6MzAsXCIuLi90cmVlXCI6NjAsXCIuLi91dGlsc1wiOjgxLFwiLi4vdmlzaXRvcnNcIjo4NSxcIi4vcGFyc2VyLWlucHV0XCI6MzV9XSwzNzpbZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihhKXt0aGlzLmxlc3M9YSx0aGlzLnZpc2l0b3JzPVtdLHRoaXMucHJlUHJvY2Vzc29ycz1bXSx0aGlzLnBvc3RQcm9jZXNzb3JzPVtdLHRoaXMuaW5zdGFsbGVkUGx1Z2lucz1bXSx0aGlzLmZpbGVNYW5hZ2Vycz1bXX07Yy5wcm90b3R5cGUuYWRkUGx1Z2lucz1mdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYj0wO2EubGVuZ3RoPmI7YisrKXRoaXMuYWRkUGx1Z2luKGFbYl0pfSxjLnByb3RvdHlwZS5hZGRQbHVnaW49ZnVuY3Rpb24oYSl7dGhpcy5pbnN0YWxsZWRQbHVnaW5zLnB1c2goYSksYS5pbnN0YWxsKHRoaXMubGVzcyx0aGlzKX0sYy5wcm90b3R5cGUuYWRkVmlzaXRvcj1mdW5jdGlvbihhKXt0aGlzLnZpc2l0b3JzLnB1c2goYSl9LGMucHJvdG90eXBlLmFkZFByZVByb2Nlc3Nvcj1mdW5jdGlvbihhLGIpe3ZhciBjO2ZvcihjPTA7dGhpcy5wcmVQcm9jZXNzb3JzLmxlbmd0aD5jJiYhKHRoaXMucHJlUHJvY2Vzc29yc1tjXS5wcmlvcml0eT49Yik7YysrKTt0aGlzLnByZVByb2Nlc3NvcnMuc3BsaWNlKGMsMCx7cHJlUHJvY2Vzc29yOmEscHJpb3JpdHk6Yn0pfSxjLnByb3RvdHlwZS5hZGRQb3N0UHJvY2Vzc29yPWZ1bmN0aW9uKGEsYil7dmFyIGM7Zm9yKGM9MDt0aGlzLnBvc3RQcm9jZXNzb3JzLmxlbmd0aD5jJiYhKHRoaXMucG9zdFByb2Nlc3NvcnNbY10ucHJpb3JpdHk+PWIpO2MrKyk7dGhpcy5wb3N0UHJvY2Vzc29ycy5zcGxpY2UoYywwLHtwb3N0UHJvY2Vzc29yOmEscHJpb3JpdHk6Yn0pfSxjLnByb3RvdHlwZS5hZGRGaWxlTWFuYWdlcj1mdW5jdGlvbihhKXt0aGlzLmZpbGVNYW5hZ2Vycy5wdXNoKGEpfSxjLnByb3RvdHlwZS5nZXRQcmVQcm9jZXNzb3JzPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MDt0aGlzLnByZVByb2Nlc3NvcnMubGVuZ3RoPmI7YisrKWEucHVzaCh0aGlzLnByZVByb2Nlc3NvcnNbYl0ucHJlUHJvY2Vzc29yKTtyZXR1cm4gYX0sYy5wcm90b3R5cGUuZ2V0UG9zdFByb2Nlc3NvcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wO3RoaXMucG9zdFByb2Nlc3NvcnMubGVuZ3RoPmI7YisrKWEucHVzaCh0aGlzLnBvc3RQcm9jZXNzb3JzW2JdLnBvc3RQcm9jZXNzb3IpO3JldHVybiBhfSxjLnByb3RvdHlwZS5nZXRWaXNpdG9ycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2l0b3JzfSxjLnByb3RvdHlwZS5nZXRGaWxlTWFuYWdlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxlTWFuYWdlcnN9LGIuZXhwb3J0cz1jfSx7fV0sMzg6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4uL2xlc3MtZXJyb3JcIiksZD1hKFwiLi4vdHJlZVwiKSxlPWIuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3RoaXMuZmlsZUluZm89Yn07ZS5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhLGIpe3ZhciBlLGYsZz17fTtmPXthZGQ6ZnVuY3Rpb24oYSxiKXtnW2FdPWJ9LGFkZE11bHRpcGxlOmZ1bmN0aW9uKGEpe09iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24oYil7Z1tiXT1hW2JdfSl9fTt0cnl7ZT1uZXcgRnVuY3Rpb24oXCJmdW5jdGlvbnNcIixcInRyZWVcIixcImZpbGVJbmZvXCIsYSksZShmLGQsdGhpcy5maWxlSW5mbyl9Y2F0Y2goaCl7YihuZXcgYyh7bWVzc2FnZTpcIlBsdWdpbiBldmFsdWF0aW9uIGVycm9yOiAnXCIraC5uYW1lK1wiOiBcIitoLm1lc3NhZ2UucmVwbGFjZSgvW1wiXS9nLFwiJ1wiKStcIidcIixmaWxlbmFtZTp0aGlzLmZpbGVJbmZvLmZpbGVuYW1lfSksbnVsbCl9YihudWxsLHtmdW5jdGlvbnM6Z30pfX0se1wiLi4vbGVzcy1lcnJvclwiOjMwLFwiLi4vdHJlZVwiOjYwfV0sMzk6W2Z1bmN0aW9uKGEsYil7dmFyIGM7Yi5leHBvcnRzPWZ1bmN0aW9uKGIsZCl7dmFyIGU9ZnVuY3Rpb24oYixmLGcpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJihnPWYsZj17fSksIWcpe2N8fChjPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBQcm9taXNlP2EoXCJwcm9taXNlXCIpOlByb21pc2UpO3ZhciBoPXRoaXM7cmV0dXJuIG5ldyBjKGZ1bmN0aW9uKGEsYyl7ZS5jYWxsKGgsYixmLGZ1bmN0aW9uKGIsZCl7Yj9jKGIpOmEoZCl9KX0pfXRoaXMucGFyc2UoYixmLGZ1bmN0aW9uKGEsYixjLGUpe2lmKGEpcmV0dXJuIGcoYSk7dmFyIGY7dHJ5e3ZhciBoPW5ldyBkKGIsYyk7Zj1oLnRvQ1NTKGUpfWNhdGNoKGEpe3JldHVybiBnKGEpfWcobnVsbCxmKX0pfTtyZXR1cm4gZX19LHtwcm9taXNlOnZvaWQgMH1dLDQwOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1hfTtyZXR1cm4gYy5wcm90b3R5cGUudG9DU1M9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPW5ldyBhKHtjb250ZW50c0lnbm9yZWRDaGFyc01hcDpkLmNvbnRlbnRzSWdub3JlZENoYXJzLHJvb3ROb2RlOmIsY29udGVudHNNYXA6ZC5jb250ZW50cyxzb3VyY2VNYXBGaWxlbmFtZTp0aGlzLm9wdGlvbnMuc291cmNlTWFwRmlsZW5hbWUsc291cmNlTWFwVVJMOnRoaXMub3B0aW9ucy5zb3VyY2VNYXBVUkwsb3V0cHV0RmlsZW5hbWU6dGhpcy5vcHRpb25zLnNvdXJjZU1hcE91dHB1dEZpbGVuYW1lLHNvdXJjZU1hcEJhc2VwYXRoOnRoaXMub3B0aW9ucy5zb3VyY2VNYXBCYXNlcGF0aCxzb3VyY2VNYXBSb290cGF0aDp0aGlzLm9wdGlvbnMuc291cmNlTWFwUm9vdHBhdGgsb3V0cHV0U291cmNlRmlsZXM6dGhpcy5vcHRpb25zLm91dHB1dFNvdXJjZUZpbGVzLHNvdXJjZU1hcEdlbmVyYXRvcjp0aGlzLm9wdGlvbnMuc291cmNlTWFwR2VuZXJhdG9yLHNvdXJjZU1hcEZpbGVJbmxpbmU6dGhpcy5vcHRpb25zLnNvdXJjZU1hcEZpbGVJbmxpbmV9KSxmPWUudG9DU1MoYyk7cmV0dXJuIHRoaXMuc291cmNlTWFwPWUuc291cmNlTWFwLHRoaXMuc291cmNlTWFwVVJMPWUuc291cmNlTWFwVVJMLHRoaXMub3B0aW9ucy5zb3VyY2VNYXBJbnB1dEZpbGVuYW1lJiYodGhpcy5zb3VyY2VNYXBJbnB1dEZpbGVuYW1lPWUubm9ybWFsaXplRmlsZW5hbWUodGhpcy5vcHRpb25zLnNvdXJjZU1hcElucHV0RmlsZW5hbWUpKSxmK3RoaXMuZ2V0Q1NTQXBwZW5kYWdlKCl9LGMucHJvdG90eXBlLmdldENTU0FwcGVuZGFnZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuc291cmNlTWFwVVJMO2lmKHRoaXMub3B0aW9ucy5zb3VyY2VNYXBGaWxlSW5saW5lKXtpZih2b2lkIDA9PT10aGlzLnNvdXJjZU1hcClyZXR1cm5cIlwiO2E9XCJkYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiK2IuZW5jb2RlQmFzZTY0KHRoaXMuc291cmNlTWFwKX1yZXR1cm4gYT9cIi8qIyBzb3VyY2VNYXBwaW5nVVJMPVwiK2ErXCIgKi9cIjpcIlwifSxjLnByb3RvdHlwZS5nZXRFeHRlcm5hbFNvdXJjZU1hcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZU1hcH0sYy5wcm90b3R5cGUuc2V0RXh0ZXJuYWxTb3VyY2VNYXA9ZnVuY3Rpb24oYSl7dGhpcy5zb3VyY2VNYXA9YX0sYy5wcm90b3R5cGUuaXNJbmxpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZU1hcEZpbGVJbmxpbmV9LGMucHJvdG90eXBlLmdldFNvdXJjZU1hcFVSTD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZU1hcFVSTH0sYy5wcm90b3R5cGUuZ2V0T3V0cHV0RmlsZW5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZU1hcE91dHB1dEZpbGVuYW1lfSxjLnByb3RvdHlwZS5nZXRJbnB1dEZpbGVuYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlTWFwSW5wdXRGaWxlbmFtZX0sY319LHt9XSw0MTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYil7dGhpcy5fY3NzPVtdLHRoaXMuX3Jvb3ROb2RlPWIucm9vdE5vZGUsdGhpcy5fY29udGVudHNNYXA9Yi5jb250ZW50c01hcCx0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcD1iLmNvbnRlbnRzSWdub3JlZENoYXJzTWFwLGIuc291cmNlTWFwRmlsZW5hbWUmJih0aGlzLl9zb3VyY2VNYXBGaWxlbmFtZT1iLnNvdXJjZU1hcEZpbGVuYW1lLnJlcGxhY2UoL1xcXFwvZyxcIi9cIikpLHRoaXMuX291dHB1dEZpbGVuYW1lPWIub3V0cHV0RmlsZW5hbWUsdGhpcy5zb3VyY2VNYXBVUkw9Yi5zb3VyY2VNYXBVUkwsYi5zb3VyY2VNYXBCYXNlcGF0aCYmKHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoPWIuc291cmNlTWFwQmFzZXBhdGgucmVwbGFjZSgvXFxcXC9nLFwiL1wiKSksXG5iLnNvdXJjZU1hcFJvb3RwYXRoPyh0aGlzLl9zb3VyY2VNYXBSb290cGF0aD1iLnNvdXJjZU1hcFJvb3RwYXRoLnJlcGxhY2UoL1xcXFwvZyxcIi9cIiksXCIvXCIhPT10aGlzLl9zb3VyY2VNYXBSb290cGF0aC5jaGFyQXQodGhpcy5fc291cmNlTWFwUm9vdHBhdGgubGVuZ3RoLTEpJiYodGhpcy5fc291cmNlTWFwUm9vdHBhdGgrPVwiL1wiKSk6dGhpcy5fc291cmNlTWFwUm9vdHBhdGg9XCJcIix0aGlzLl9vdXRwdXRTb3VyY2VGaWxlcz1iLm91dHB1dFNvdXJjZUZpbGVzLHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvckNvbnN0cnVjdG9yPWEuZ2V0U291cmNlTWFwR2VuZXJhdG9yKCksdGhpcy5fbGluZU51bWJlcj0wLHRoaXMuX2NvbHVtbj0wfTtyZXR1cm4gYi5wcm90b3R5cGUubm9ybWFsaXplRmlsZW5hbWU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YS5yZXBsYWNlKC9cXFxcL2csXCIvXCIpLHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoJiYwPT09YS5pbmRleE9mKHRoaXMuX3NvdXJjZU1hcEJhc2VwYXRoKSYmKGE9YS5zdWJzdHJpbmcodGhpcy5fc291cmNlTWFwQmFzZXBhdGgubGVuZ3RoKSwoXCJcXFxcXCI9PT1hLmNoYXJBdCgwKXx8XCIvXCI9PT1hLmNoYXJBdCgwKSkmJihhPWEuc3Vic3RyaW5nKDEpKSksKHRoaXMuX3NvdXJjZU1hcFJvb3RwYXRofHxcIlwiKSthfSxiLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSl7dmFyIGUsZixnLGgsaTtpZihiKXt2YXIgaj10aGlzLl9jb250ZW50c01hcFtiLmZpbGVuYW1lXTt0aGlzLl9jb250ZW50c0lnbm9yZWRDaGFyc01hcFtiLmZpbGVuYW1lXSYmKGMtPXRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2IuZmlsZW5hbWVdLDA+YyYmKGM9MCksaj1qLnNsaWNlKHRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2IuZmlsZW5hbWVdKSksaj1qLnN1YnN0cmluZygwLGMpLGY9ai5zcGxpdChcIlxcblwiKSxoPWZbZi5sZW5ndGgtMV19aWYoZT1hLnNwbGl0KFwiXFxuXCIpLGc9ZVtlLmxlbmd0aC0xXSxiKWlmKGQpZm9yKGk9MDtlLmxlbmd0aD5pO2krKyl0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3IuYWRkTWFwcGluZyh7Z2VuZXJhdGVkOntsaW5lOnRoaXMuX2xpbmVOdW1iZXIraSsxLGNvbHVtbjowPT09aT90aGlzLl9jb2x1bW46MH0sb3JpZ2luYWw6e2xpbmU6Zi5sZW5ndGgraSxjb2x1bW46MD09PWk/aC5sZW5ndGg6MH0sc291cmNlOnRoaXMubm9ybWFsaXplRmlsZW5hbWUoYi5maWxlbmFtZSl9KTtlbHNlIHRoaXMuX3NvdXJjZU1hcEdlbmVyYXRvci5hZGRNYXBwaW5nKHtnZW5lcmF0ZWQ6e2xpbmU6dGhpcy5fbGluZU51bWJlcisxLGNvbHVtbjp0aGlzLl9jb2x1bW59LG9yaWdpbmFsOntsaW5lOmYubGVuZ3RoLGNvbHVtbjpoLmxlbmd0aH0sc291cmNlOnRoaXMubm9ybWFsaXplRmlsZW5hbWUoYi5maWxlbmFtZSl9KTsxPT09ZS5sZW5ndGg/dGhpcy5fY29sdW1uKz1nLmxlbmd0aDoodGhpcy5fbGluZU51bWJlcis9ZS5sZW5ndGgtMSx0aGlzLl9jb2x1bW49Zy5sZW5ndGgpLHRoaXMuX2Nzcy5wdXNoKGEpfX0sYi5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5fY3NzLmxlbmd0aH0sYi5wcm90b3R5cGUudG9DU1M9ZnVuY3Rpb24oYSl7aWYodGhpcy5fc291cmNlTWFwR2VuZXJhdG9yPW5ldyB0aGlzLl9zb3VyY2VNYXBHZW5lcmF0b3JDb25zdHJ1Y3Rvcih7ZmlsZTp0aGlzLl9vdXRwdXRGaWxlbmFtZSxzb3VyY2VSb290Om51bGx9KSx0aGlzLl9vdXRwdXRTb3VyY2VGaWxlcylmb3IodmFyIGIgaW4gdGhpcy5fY29udGVudHNNYXApaWYodGhpcy5fY29udGVudHNNYXAuaGFzT3duUHJvcGVydHkoYikpe3ZhciBjPXRoaXMuX2NvbnRlbnRzTWFwW2JdO3RoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2JdJiYoYz1jLnNsaWNlKHRoaXMuX2NvbnRlbnRzSWdub3JlZENoYXJzTWFwW2JdKSksdGhpcy5fc291cmNlTWFwR2VuZXJhdG9yLnNldFNvdXJjZUNvbnRlbnQodGhpcy5ub3JtYWxpemVGaWxlbmFtZShiKSxjKX1pZih0aGlzLl9yb290Tm9kZS5nZW5DU1MoYSx0aGlzKSx0aGlzLl9jc3MubGVuZ3RoPjApe3ZhciBkLGU9SlNPTi5zdHJpbmdpZnkodGhpcy5fc291cmNlTWFwR2VuZXJhdG9yLnRvSlNPTigpKTt0aGlzLnNvdXJjZU1hcFVSTD9kPXRoaXMuc291cmNlTWFwVVJMOnRoaXMuX3NvdXJjZU1hcEZpbGVuYW1lJiYoZD10aGlzLl9zb3VyY2VNYXBGaWxlbmFtZSksdGhpcy5zb3VyY2VNYXBVUkw9ZCx0aGlzLnNvdXJjZU1hcD1lfXJldHVybiB0aGlzLl9jc3Muam9pbihcIlwiKX0sYn19LHt9XSw0MjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9jb250ZXh0c1wiKSxkPWEoXCIuL3Zpc2l0b3JzXCIpLGU9YShcIi4vdHJlZVwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBmLGc9Yi52YXJpYWJsZXMsaD1uZXcgYy5FdmFsKGIpO1wib2JqZWN0XCIhPXR5cGVvZiBnfHxBcnJheS5pc0FycmF5KGcpfHwoZz1PYmplY3Qua2V5cyhnKS5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9Z1thXTtyZXR1cm4gYiBpbnN0YW5jZW9mIGUuVmFsdWV8fChiIGluc3RhbmNlb2YgZS5FeHByZXNzaW9ufHwoYj1uZXcgZS5FeHByZXNzaW9uKFtiXSkpLGI9bmV3IGUuVmFsdWUoW2JdKSksbmV3IGUuUnVsZShcIkBcIithLGIsITEsbnVsbCwwKX0pLGguZnJhbWVzPVtuZXcgZS5SdWxlc2V0KG51bGwsZyldKTt2YXIgaSxqPVtdLGs9W25ldyBkLkpvaW5TZWxlY3RvclZpc2l0b3IsbmV3IGQuRXh0ZW5kVmlzaXRvcixuZXcgZC5Ub0NTU1Zpc2l0b3Ioe2NvbXByZXNzOkJvb2xlYW4oYi5jb21wcmVzcyl9KV07aWYoYi5wbHVnaW5NYW5hZ2VyKXt2YXIgbD1iLnBsdWdpbk1hbmFnZXIuZ2V0VmlzaXRvcnMoKTtmb3IoaT0wO2wubGVuZ3RoPmk7aSsrKXt2YXIgbT1sW2ldO20uaXNQcmVFdmFsVmlzaXRvcj9qLnB1c2gobSk6bS5pc1ByZVZpc2l0b3I/ay5zcGxpY2UoMCwwLG0pOmsucHVzaChtKX19Zm9yKGk9MDtqLmxlbmd0aD5pO2krKylqW2ldLnJ1bihhKTtmb3IoZj1hLmV2YWwoaCksaT0wO2subGVuZ3RoPmk7aSsrKWtbaV0ucnVuKGYpO3JldHVybiBmfX0se1wiLi9jb250ZXh0c1wiOjEwLFwiLi90cmVlXCI6NjAsXCIuL3Zpc2l0b3JzXCI6ODV9XSw0MzpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hfTtkLnByb3RvdHlwZT1uZXcgYyxkLnByb3RvdHlwZS50eXBlPVwiQWxwaGFcIixkLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hLnZpc2l0KHRoaXMudmFsdWUpfSxkLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnZhbHVlLmV2YWw/bmV3IGQodGhpcy52YWx1ZS5ldmFsKGEpKTp0aGlzfSxkLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZChcImFscGhhKG9wYWNpdHk9XCIpLHRoaXMudmFsdWUuZ2VuQ1NTP3RoaXMudmFsdWUuZ2VuQ1NTKGEsYik6Yi5hZGQodGhpcy52YWx1ZSksYi5hZGQoXCIpXCIpfSxiLmV4cG9ydHM9ZH0se1wiLi9ub2RlXCI6Njh9XSw0NDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXt0aGlzLnZhbHVlPWEsdGhpcy5pbmRleD1iLHRoaXMubWFwTGluZXM9ZCx0aGlzLmN1cnJlbnRGaWxlSW5mbz1jLHRoaXMucnVsZXNldExpa2U9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGU/ITE6ZX07ZC5wcm90b3R5cGU9bmV3IGMsZC5wcm90b3R5cGUudHlwZT1cIkFub255bW91c1wiLGQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGQodGhpcy52YWx1ZSx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMubWFwTGluZXMsdGhpcy5ydWxlc2V0TGlrZSl9LGQucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9DU1MmJnRoaXMudG9DU1MoKT09PWEudG9DU1MoKT8wOnZvaWQgMH0sZC5wcm90b3R5cGUuaXNSdWxlc2V0TGlrZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bGVzZXRMaWtlfSxkLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZCh0aGlzLnZhbHVlLHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMuaW5kZXgsdGhpcy5tYXBMaW5lcyl9LGIuZXhwb3J0cz1kfSx7XCIuL25vZGVcIjo2OH1dLDQ1OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1mdW5jdGlvbihhLGIpe3RoaXMua2V5PWEsdGhpcy52YWx1ZT1ifTtkLnByb3RvdHlwZT1uZXcgYyxkLnByb3RvdHlwZS50eXBlPVwiQXNzaWdubWVudFwiLGQucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWEudmlzaXQodGhpcy52YWx1ZSl9LGQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudmFsdWUuZXZhbD9uZXcgZCh0aGlzLmtleSx0aGlzLnZhbHVlLmV2YWwoYSkpOnRoaXN9LGQucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe2IuYWRkKHRoaXMua2V5K1wiPVwiKSx0aGlzLnZhbHVlLmdlbkNTUz90aGlzLnZhbHVlLmdlbkNTUyhhLGIpOmIuYWRkKHRoaXMudmFsdWUpfSxiLmV4cG9ydHM9ZH0se1wiLi9ub2RlXCI6Njh9XSw0NjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9ZnVuY3Rpb24oYSxiLGMpe3RoaXMua2V5PWEsdGhpcy5vcD1iLHRoaXMudmFsdWU9Y307ZC5wcm90b3R5cGU9bmV3IGMsZC5wcm90b3R5cGUudHlwZT1cIkF0dHJpYnV0ZVwiLGQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKHRoaXMua2V5LmV2YWw/dGhpcy5rZXkuZXZhbChhKTp0aGlzLmtleSx0aGlzLm9wLHRoaXMudmFsdWUmJnRoaXMudmFsdWUuZXZhbD90aGlzLnZhbHVlLmV2YWwoYSk6dGhpcy52YWx1ZSl9LGQucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe2IuYWRkKHRoaXMudG9DU1MoYSkpfSxkLnByb3RvdHlwZS50b0NTUz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmtleS50b0NTUz90aGlzLmtleS50b0NTUyhhKTp0aGlzLmtleTtyZXR1cm4gdGhpcy5vcCYmKGIrPXRoaXMub3AsYis9dGhpcy52YWx1ZS50b0NTUz90aGlzLnZhbHVlLnRvQ1NTKGEpOnRoaXMudmFsdWUpLFwiW1wiK2IrXCJdXCJ9LGIuZXhwb3J0cz1kfSx7XCIuL25vZGVcIjo2OH1dLDQ3OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1hKFwiLi4vZnVuY3Rpb25zL2Z1bmN0aW9uLWNhbGxlclwiKSxlPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMubmFtZT1hLHRoaXMuYXJncz1iLHRoaXMuaW5kZXg9Yyx0aGlzLmN1cnJlbnRGaWxlSW5mbz1kfTtlLnByb3RvdHlwZT1uZXcgYyxlLnByb3RvdHlwZS50eXBlPVwiQ2FsbFwiLGUucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLmFyZ3MmJih0aGlzLmFyZ3M9YS52aXNpdEFycmF5KHRoaXMuYXJncykpfSxlLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5hcmdzLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYi5ldmFsKGEpfSksZj1uZXcgZCh0aGlzLm5hbWUsYSx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvKTtpZihmLmlzVmFsaWQoKSl0cnl7aWYoYj1mLmNhbGwoYyksbnVsbCE9YilyZXR1cm4gYn1jYXRjaChnKXt0aHJvd3t0eXBlOmcudHlwZXx8XCJSdW50aW1lXCIsbWVzc2FnZTpcImVycm9yIGV2YWx1YXRpbmcgZnVuY3Rpb24gYFwiK3RoaXMubmFtZStcImBcIisoZy5tZXNzYWdlP1wiOiBcIitnLm1lc3NhZ2U6XCJcIiksaW5kZXg6dGhpcy5pbmRleCxmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZX19cmV0dXJuIG5ldyBlKHRoaXMubmFtZSxjLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pfSxlLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZCh0aGlzLm5hbWUrXCIoXCIsdGhpcy5jdXJyZW50RmlsZUluZm8sdGhpcy5pbmRleCk7Zm9yKHZhciBjPTA7dGhpcy5hcmdzLmxlbmd0aD5jO2MrKyl0aGlzLmFyZ3NbY10uZ2VuQ1NTKGEsYiksdGhpcy5hcmdzLmxlbmd0aD5jKzEmJmIuYWRkKFwiLCBcIik7Yi5hZGQoXCIpXCIpfSxiLmV4cG9ydHM9ZX0se1wiLi4vZnVuY3Rpb25zL2Z1bmN0aW9uLWNhbGxlclwiOjIwLFwiLi9ub2RlXCI6Njh9XSw0ODpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGEsMCksYil9ZnVuY3Rpb24gZChhKXtyZXR1cm5cIiNcIithLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYT1jKE1hdGgucm91bmQoYSksMjU1KSwoMTY+YT9cIjBcIjpcIlwiKSthLnRvU3RyaW5nKDE2KX0pLmpvaW4oXCJcIil9dmFyIGU9YShcIi4vbm9kZVwiKSxmPWEoXCIuLi9kYXRhL2NvbG9yc1wiKSxnPWZ1bmN0aW9uKGEsYil7dGhpcy5yZ2I9QXJyYXkuaXNBcnJheShhKT9hOjY9PWEubGVuZ3RoP2EubWF0Y2goLy57Mn0vZykubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludChhLDE2KX0pOmEuc3BsaXQoXCJcIikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludChhK2EsMTYpfSksdGhpcy5hbHBoYT1cIm51bWJlclwiPT10eXBlb2YgYj9iOjF9O2cucHJvdG90eXBlPW5ldyBlLGcucHJvdG90eXBlLnR5cGU9XCJDb2xvclwiLGcucHJvdG90eXBlLmx1bWE9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJnYlswXS8yNTUsYj10aGlzLnJnYlsxXS8yNTUsYz10aGlzLnJnYlsyXS8yNTU7cmV0dXJuIGE9LjAzOTI4Pj1hP2EvMTIuOTI6TWF0aC5wb3coKGErLjA1NSkvMS4wNTUsMi40KSxiPS4wMzkyOD49Yj9iLzEyLjkyOk1hdGgucG93KChiKy4wNTUpLzEuMDU1LDIuNCksYz0uMDM5Mjg+PWM/Yy8xMi45MjpNYXRoLnBvdygoYysuMDU1KS8xLjA1NSwyLjQpLC4yMTI2KmErLjcxNTIqYisuMDcyMipjfSxnLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZCh0aGlzLnRvQ1NTKGEpKX0sZy5wcm90b3R5cGUudG9DU1M9ZnVuY3Rpb24oYSxiKXt2YXIgZCxlLGY9YSYmYS5jb21wcmVzcyYmIWI7aWYodGhpcy52YWx1ZSlyZXR1cm4gdGhpcy52YWx1ZTtpZihlPXRoaXMuZnJvdW5kKGEsdGhpcy5hbHBoYSksMT5lKXJldHVyblwicmdiYShcIit0aGlzLnJnYi5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMoTWF0aC5yb3VuZChhKSwyNTUpfSkuY29uY2F0KGMoZSwxKSkuam9pbihcIixcIisoZj9cIlwiOlwiIFwiKSkrXCIpXCI7aWYoZD10aGlzLnRvUkdCKCksZil7dmFyIGc9ZC5zcGxpdChcIlwiKTtnWzFdPT09Z1syXSYmZ1szXT09PWdbNF0mJmdbNV09PT1nWzZdJiYoZD1cIiNcIitnWzFdK2dbM10rZ1s1XSl9cmV0dXJuIGR9LGcucHJvdG90eXBlLm9wZXJhdGU9ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1bXSxlPXRoaXMuYWxwaGEqKDEtYy5hbHBoYSkrYy5hbHBoYSxmPTA7Mz5mO2YrKylkW2ZdPXRoaXMuX29wZXJhdGUoYSxiLHRoaXMucmdiW2ZdLGMucmdiW2ZdKTtyZXR1cm4gbmV3IGcoZCxlKX0sZy5wcm90b3R5cGUudG9SR0I9ZnVuY3Rpb24oKXtyZXR1cm4gZCh0aGlzLnJnYil9LGcucHJvdG90eXBlLnRvSFNMPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXRoaXMucmdiWzBdLzI1NSxkPXRoaXMucmdiWzFdLzI1NSxlPXRoaXMucmdiWzJdLzI1NSxmPXRoaXMuYWxwaGEsZz1NYXRoLm1heChjLGQsZSksaD1NYXRoLm1pbihjLGQsZSksaT0oZytoKS8yLGo9Zy1oO2lmKGc9PT1oKWE9Yj0wO2Vsc2V7c3dpdGNoKGI9aT4uNT9qLygyLWctaCk6ai8oZytoKSxnKXtjYXNlIGM6YT0oZC1lKS9qKyhlPmQ/NjowKTticmVhaztjYXNlIGQ6YT0oZS1jKS9qKzI7YnJlYWs7Y2FzZSBlOmE9KGMtZCkvais0fWEvPTZ9cmV0dXJue2g6MzYwKmEsczpiLGw6aSxhOmZ9fSxnLnByb3RvdHlwZS50b0hTVj1mdW5jdGlvbigpe3ZhciBhLGIsYz10aGlzLnJnYlswXS8yNTUsZD10aGlzLnJnYlsxXS8yNTUsZT10aGlzLnJnYlsyXS8yNTUsZj10aGlzLmFscGhhLGc9TWF0aC5tYXgoYyxkLGUpLGg9TWF0aC5taW4oYyxkLGUpLGk9ZyxqPWctaDtpZihiPTA9PT1nPzA6ai9nLGc9PT1oKWE9MDtlbHNle3N3aXRjaChnKXtjYXNlIGM6YT0oZC1lKS9qKyhlPmQ/NjowKTticmVhaztjYXNlIGQ6YT0oZS1jKS9qKzI7YnJlYWs7Y2FzZSBlOmE9KGMtZCkvais0fWEvPTZ9cmV0dXJue2g6MzYwKmEsczpiLHY6aSxhOmZ9fSxnLnByb3RvdHlwZS50b0FSR0I9ZnVuY3Rpb24oKXtyZXR1cm4gZChbMjU1KnRoaXMuYWxwaGFdLmNvbmNhdCh0aGlzLnJnYikpfSxnLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGEpe3JldHVybiBhLnJnYiYmYS5yZ2JbMF09PT10aGlzLnJnYlswXSYmYS5yZ2JbMV09PT10aGlzLnJnYlsxXSYmYS5yZ2JbMl09PT10aGlzLnJnYlsyXSYmYS5hbHBoYT09PXRoaXMuYWxwaGE/MDp2b2lkIDB9LGcuZnJvbUtleXdvcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGYuaGFzT3duUHJvcGVydHkoYyk/Yj1uZXcgZyhmW2NdLnNsaWNlKDEpKTpcInRyYW5zcGFyZW50XCI9PT1jJiYoYj1uZXcgZyhbMCwwLDBdLDApKSxiPyhiLnZhbHVlPWEsYik6dm9pZCAwfSxiLmV4cG9ydHM9Z30se1wiLi4vZGF0YS9jb2xvcnNcIjoxMSxcIi4vbm9kZVwiOjY4fV0sNDk6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWZ1bmN0aW9uKGEpe1wiIFwiPT09YT8odGhpcy52YWx1ZT1cIiBcIix0aGlzLmVtcHR5T3JXaGl0ZXNwYWNlPSEwKToodGhpcy52YWx1ZT1hP2EudHJpbSgpOlwiXCIsdGhpcy5lbXB0eU9yV2hpdGVzcGFjZT1cIlwiPT09dGhpcy52YWx1ZSl9O2QucHJvdG90eXBlPW5ldyBjLGQucHJvdG90eXBlLnR5cGU9XCJDb21iaW5hdG9yXCI7dmFyIGU9e1wiXCI6ITAsXCIgXCI6ITAsXCJ8XCI6ITB9O2QucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe3ZhciBjPWEuY29tcHJlc3N8fGVbdGhpcy52YWx1ZV0/XCJcIjpcIiBcIjtiLmFkZChjK3RoaXMudmFsdWUrYyl9LGIuZXhwb3J0cz1kfSx7XCIuL25vZGVcIjo2OH1dLDUwOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1hKFwiLi9kZWJ1Zy1pbmZvXCIpLGU9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy52YWx1ZT1hLHRoaXMuaXNMaW5lQ29tbWVudD1iLHRoaXMuY3VycmVudEZpbGVJbmZvPWR9O2UucHJvdG90eXBlPW5ldyBjLGUucHJvdG90eXBlLnR5cGU9XCJDb21tZW50XCIsZS5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7dGhpcy5kZWJ1Z0luZm8mJmIuYWRkKGQoYSx0aGlzKSx0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmluZGV4KSxiLmFkZCh0aGlzLnZhbHVlKX0sZS5wcm90b3R5cGUuaXNTaWxlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jdXJyZW50RmlsZUluZm8mJnRoaXMuY3VycmVudEZpbGVJbmZvLnJlZmVyZW5jZSYmIXRoaXMuaXNSZWZlcmVuY2VkLGM9YS5jb21wcmVzcyYmXCIhXCIhPT10aGlzLnZhbHVlWzJdO3JldHVybiB0aGlzLmlzTGluZUNvbW1lbnR8fGJ8fGN9LGUucHJvdG90eXBlLm1hcmtSZWZlcmVuY2VkPWZ1bmN0aW9uKCl7dGhpcy5pc1JlZmVyZW5jZWQ9ITB9LGIuZXhwb3J0cz1lfSx7XCIuL2RlYnVnLWluZm9cIjo1MixcIi4vbm9kZVwiOjY4fV0sNTE6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5vcD1hLnRyaW0oKSx0aGlzLmx2YWx1ZT1iLHRoaXMucnZhbHVlPWMsdGhpcy5pbmRleD1kLHRoaXMubmVnYXRlPWV9O2QucHJvdG90eXBlPW5ldyBjLGQucHJvdG90eXBlLnR5cGU9XCJDb25kaXRpb25cIixkLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dGhpcy5sdmFsdWU9YS52aXNpdCh0aGlzLmx2YWx1ZSksdGhpcy5ydmFsdWU9YS52aXNpdCh0aGlzLnJ2YWx1ZSl9LGQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGI9ZnVuY3Rpb24oYSxiLGQpe3N3aXRjaChhKXtjYXNlXCJhbmRcIjpyZXR1cm4gYiYmZDtjYXNlXCJvclwiOnJldHVybiBifHxkO2RlZmF1bHQ6c3dpdGNoKGMuY29tcGFyZShiLGQpKXtjYXNlLTE6cmV0dXJuXCI8XCI9PT1hfHxcIj08XCI9PT1hfHxcIjw9XCI9PT1hO2Nhc2UgMDpyZXR1cm5cIj1cIj09PWF8fFwiPj1cIj09PWF8fFwiPTxcIj09PWF8fFwiPD1cIj09PWE7Y2FzZSAxOnJldHVyblwiPlwiPT09YXx8XCI+PVwiPT09YTtkZWZhdWx0OnJldHVybiExfX19KHRoaXMub3AsdGhpcy5sdmFsdWUuZXZhbChhKSx0aGlzLnJ2YWx1ZS5ldmFsKGEpKTtyZXR1cm4gdGhpcy5uZWdhdGU/IWI6Yn0sYi5leHBvcnRzPWR9LHtcIi4vbm9kZVwiOjY4fV0sNTI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPVwiXCI7aWYoYS5kdW1wTGluZU51bWJlcnMmJiFhLmNvbXByZXNzKXN3aXRjaChhLmR1bXBMaW5lTnVtYmVycyl7Y2FzZVwiY29tbWVudHNcIjplPWMuYXNDb21tZW50KGIpO2JyZWFrO2Nhc2VcIm1lZGlhcXVlcnlcIjplPWMuYXNNZWRpYVF1ZXJ5KGIpO2JyZWFrO2Nhc2VcImFsbFwiOmU9Yy5hc0NvbW1lbnQoYikrKGR8fFwiXCIpK2MuYXNNZWRpYVF1ZXJ5KGIpfXJldHVybiBlfTtjLmFzQ29tbWVudD1mdW5jdGlvbihhKXtyZXR1cm5cIi8qIGxpbmUgXCIrYS5kZWJ1Z0luZm8ubGluZU51bWJlcitcIiwgXCIrYS5kZWJ1Z0luZm8uZmlsZU5hbWUrXCIgKi9cXG5cIn0sYy5hc01lZGlhUXVlcnk9ZnVuY3Rpb24oYSl7dmFyIGI9YS5kZWJ1Z0luZm8uZmlsZU5hbWU7cmV0dXJuL15bYS16XSs6XFwvXFwvL2kudGVzdChiKXx8KGI9XCJmaWxlOi8vXCIrYiksXCJAbWVkaWEgLXNhc3MtZGVidWctaW5mb3tmaWxlbmFtZXtmb250LWZhbWlseTpcIitiLnJlcGxhY2UoLyhbLjpcXC9cXFxcXSkvZyxmdW5jdGlvbihhKXtyZXR1cm5cIlxcXFxcIj09YSYmKGE9XCIvXCIpLFwiXFxcXFwiK2F9KStcIn1saW5le2ZvbnQtZmFtaWx5OlxcXFwwMDAwM1wiK2EuZGVidWdJbmZvLmxpbmVOdW1iZXIrXCJ9fVxcblwifSxiLmV4cG9ydHM9Y30se31dLDUzOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1hKFwiLi4vY29udGV4dHNcIiksZT1mdW5jdGlvbihhLGIpe3RoaXMucnVsZXNldD1hLHRoaXMuZnJhbWVzPWJ9O2UucHJvdG90eXBlPW5ldyBjLGUucHJvdG90eXBlLnR5cGU9XCJEZXRhY2hlZFJ1bGVzZXRcIixlLnByb3RvdHlwZS5ldmFsRmlyc3Q9ITAsZS5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGEpe3RoaXMucnVsZXNldD1hLnZpc2l0KHRoaXMucnVsZXNldCl9LGUucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5mcmFtZXN8fGEuZnJhbWVzLnNsaWNlKDApO3JldHVybiBuZXcgZSh0aGlzLnJ1bGVzZXQsYil9LGUucHJvdG90eXBlLmNhbGxFdmFsPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJ1bGVzZXQuZXZhbCh0aGlzLmZyYW1lcz9uZXcgZC5FdmFsKGEsdGhpcy5mcmFtZXMuY29uY2F0KGEuZnJhbWVzKSk6YSl9LGIuZXhwb3J0cz1lfSx7XCIuLi9jb250ZXh0c1wiOjEwLFwiLi9ub2RlXCI6Njh9XSw1NDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9YShcIi4uL2RhdGEvdW5pdC1jb252ZXJzaW9uc1wiKSxlPWEoXCIuL3VuaXRcIiksZj1hKFwiLi9jb2xvclwiKSxnPWZ1bmN0aW9uKGEsYil7dGhpcy52YWx1ZT1wYXJzZUZsb2F0KGEpLHRoaXMudW5pdD1iJiZiIGluc3RhbmNlb2YgZT9iOm5ldyBlKGI/W2JdOnZvaWQgMCl9O2cucHJvdG90eXBlPW5ldyBjLGcucHJvdG90eXBlLnR5cGU9XCJEaW1lbnNpb25cIixnLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dGhpcy51bml0PWEudmlzaXQodGhpcy51bml0KX0sZy5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxnLnByb3RvdHlwZS50b0NvbG9yPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBmKFt0aGlzLnZhbHVlLHRoaXMudmFsdWUsdGhpcy52YWx1ZV0pfSxnLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtpZihhJiZhLnN0cmljdFVuaXRzJiYhdGhpcy51bml0LmlzU2luZ3VsYXIoKSl0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aXBsZSB1bml0cyBpbiBkaW1lbnNpb24uIENvcnJlY3QgdGhlIHVuaXRzIG9yIHVzZSB0aGUgdW5pdCBmdW5jdGlvbi4gQmFkIHVuaXQ6IFwiK3RoaXMudW5pdC50b1N0cmluZygpKTt2YXIgYz10aGlzLmZyb3VuZChhLHRoaXMudmFsdWUpLGQ9U3RyaW5nKGMpO2lmKDAhPT1jJiYxZS02PmMmJmM+LTFlLTYmJihkPWMudG9GaXhlZCgyMCkucmVwbGFjZSgvMCskLyxcIlwiKSksYSYmYS5jb21wcmVzcyl7aWYoMD09PWMmJnRoaXMudW5pdC5pc0xlbmd0aCgpKXJldHVybiB2b2lkIGIuYWRkKGQpO2M+MCYmMT5jJiYoZD1kLnN1YnN0cigxKSl9Yi5hZGQoZCksdGhpcy51bml0LmdlbkNTUyhhLGIpfSxnLnByb3RvdHlwZS5vcGVyYXRlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLl9vcGVyYXRlKGEsYix0aGlzLnZhbHVlLGMudmFsdWUpLGU9dGhpcy51bml0LmNsb25lKCk7aWYoXCIrXCI9PT1ifHxcIi1cIj09PWIpaWYoMD09PWUubnVtZXJhdG9yLmxlbmd0aCYmMD09PWUuZGVub21pbmF0b3IubGVuZ3RoKWU9Yy51bml0LmNsb25lKCksdGhpcy51bml0LmJhY2t1cFVuaXQmJihlLmJhY2t1cFVuaXQ9dGhpcy51bml0LmJhY2t1cFVuaXQpO2Vsc2UgaWYoMD09PWMudW5pdC5udW1lcmF0b3IubGVuZ3RoJiYwPT09ZS5kZW5vbWluYXRvci5sZW5ndGgpO2Vsc2V7aWYoYz1jLmNvbnZlcnRUbyh0aGlzLnVuaXQudXNlZFVuaXRzKCkpLGEuc3RyaWN0VW5pdHMmJmMudW5pdC50b1N0cmluZygpIT09ZS50b1N0cmluZygpKXRocm93IG5ldyBFcnJvcihcIkluY29tcGF0aWJsZSB1bml0cy4gQ2hhbmdlIHRoZSB1bml0cyBvciB1c2UgdGhlIHVuaXQgZnVuY3Rpb24uIEJhZCB1bml0czogJ1wiK2UudG9TdHJpbmcoKStcIicgYW5kICdcIitjLnVuaXQudG9TdHJpbmcoKStcIicuXCIpO2Q9dGhpcy5fb3BlcmF0ZShhLGIsdGhpcy52YWx1ZSxjLnZhbHVlKX1lbHNlXCIqXCI9PT1iPyhlLm51bWVyYXRvcj1lLm51bWVyYXRvci5jb25jYXQoYy51bml0Lm51bWVyYXRvcikuc29ydCgpLGUuZGVub21pbmF0b3I9ZS5kZW5vbWluYXRvci5jb25jYXQoYy51bml0LmRlbm9taW5hdG9yKS5zb3J0KCksZS5jYW5jZWwoKSk6XCIvXCI9PT1iJiYoZS5udW1lcmF0b3I9ZS5udW1lcmF0b3IuY29uY2F0KGMudW5pdC5kZW5vbWluYXRvcikuc29ydCgpLGUuZGVub21pbmF0b3I9ZS5kZW5vbWluYXRvci5jb25jYXQoYy51bml0Lm51bWVyYXRvcikuc29ydCgpLGUuY2FuY2VsKCkpO3JldHVybiBuZXcgZyhkLGUpfSxnLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKGEpe3ZhciBiLGQ7aWYoIShhIGluc3RhbmNlb2YgZykpcmV0dXJuIHZvaWQgMDtpZih0aGlzLnVuaXQuaXNFbXB0eSgpfHxhLnVuaXQuaXNFbXB0eSgpKWI9dGhpcyxkPWE7ZWxzZSBpZihiPXRoaXMudW5pZnkoKSxkPWEudW5pZnkoKSwwIT09Yi51bml0LmNvbXBhcmUoZC51bml0KSlyZXR1cm4gdm9pZCAwO3JldHVybiBjLm51bWVyaWNDb21wYXJlKGIudmFsdWUsZC52YWx1ZSl9LGcucHJvdG90eXBlLnVuaWZ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udmVydFRvKHtsZW5ndGg6XCJweFwiLGR1cmF0aW9uOlwic1wiLGFuZ2xlOlwicmFkXCJ9KX0sZy5wcm90b3R5cGUuY29udmVydFRvPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmLGgsaT10aGlzLnZhbHVlLGo9dGhpcy51bml0LmNsb25lKCksaz17fTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7Zm9yKGIgaW4gZClkW2JdLmhhc093blByb3BlcnR5KGEpJiYoaz17fSxrW2JdPWEpO2E9a31oPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGUuaGFzT3duUHJvcGVydHkoYSk/KGI/aS89ZVthXS9lW2ZdOmkqPWVbYV0vZVtmXSxmKTphfTtmb3IoYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJihmPWFbY10sZT1kW2NdLGoubWFwKGgpKTtyZXR1cm4gai5jYW5jZWwoKSxuZXcgZyhpLGopfSxiLmV4cG9ydHM9Z30se1wiLi4vZGF0YS91bml0LWNvbnZlcnNpb25zXCI6MTMsXCIuL2NvbG9yXCI6NDgsXCIuL25vZGVcIjo2OCxcIi4vdW5pdFwiOjc3fV0sNTU6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL3NlbGVjdG9yXCIpLGU9YShcIi4vcnVsZXNldFwiKSxmPWZ1bmN0aW9uKGEsYixjLGUsZixnLGgsaSl7dmFyIGo7aWYodGhpcy5uYW1lPWEsdGhpcy52YWx1ZT1iLGMpZm9yKEFycmF5LmlzQXJyYXkoYyk/dGhpcy5ydWxlcz1jOih0aGlzLnJ1bGVzPVtjXSx0aGlzLnJ1bGVzWzBdLnNlbGVjdG9ycz1uZXcgZChbXSxudWxsLG51bGwsdGhpcy5pbmRleCxmKS5jcmVhdGVFbXB0eVNlbGVjdG9ycygpKSxqPTA7dGhpcy5ydWxlcy5sZW5ndGg+ajtqKyspdGhpcy5ydWxlc1tqXS5hbGxvd0ltcG9ydHM9ITA7dGhpcy5pbmRleD1lLHRoaXMuY3VycmVudEZpbGVJbmZvPWYsdGhpcy5kZWJ1Z0luZm89Zyx0aGlzLmlzUmVmZXJlbmNlZD1oLHRoaXMuaXNSb290ZWQ9aXx8ITF9O2YucHJvdG90eXBlPW5ldyBjLGYucHJvdG90eXBlLnR5cGU9XCJEaXJlY3RpdmVcIixmLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52YWx1ZSxjPXRoaXMucnVsZXM7YyYmKHRoaXMucnVsZXM9YS52aXNpdEFycmF5KGMpKSxiJiYodGhpcy52YWx1ZT1hLnZpc2l0KGIpKX0sZi5wcm90b3R5cGUuaXNSdWxlc2V0TGlrZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bGVzfHwhdGhpcy5pc0NoYXJzZXQoKX0sZi5wcm90b3R5cGUuaXNDaGFyc2V0PWZ1bmN0aW9uKCl7cmV0dXJuXCJAY2hhcnNldFwiPT09dGhpcy5uYW1lfSxmLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnZhbHVlLGQ9dGhpcy5ydWxlcztiLmFkZCh0aGlzLm5hbWUsdGhpcy5jdXJyZW50RmlsZUluZm8sdGhpcy5pbmRleCksYyYmKGIuYWRkKFwiIFwiKSxjLmdlbkNTUyhhLGIpKSxkP3RoaXMub3V0cHV0UnVsZXNldChhLGIsZCk6Yi5hZGQoXCI7XCIpfSxmLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLnZhbHVlLGU9dGhpcy5ydWxlcztyZXR1cm4gYj1hLm1lZGlhUGF0aCxjPWEubWVkaWFCbG9ja3MsYS5tZWRpYVBhdGg9W10sYS5tZWRpYUJsb2Nrcz1bXSxkJiYoZD1kLmV2YWwoYSkpLGUmJihlPVtlWzBdLmV2YWwoYSldLGVbMF0ucm9vdD0hMCksYS5tZWRpYVBhdGg9YixhLm1lZGlhQmxvY2tzPWMsbmV3IGYodGhpcy5uYW1lLGQsZSx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMuZGVidWdJbmZvLHRoaXMuaXNSZWZlcmVuY2VkLHRoaXMuaXNSb290ZWQpfSxmLnByb3RvdHlwZS52YXJpYWJsZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ydWxlcz9lLnByb3RvdHlwZS52YXJpYWJsZS5jYWxsKHRoaXMucnVsZXNbMF0sYSk6dm9pZCAwfSxmLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVsZXM/ZS5wcm90b3R5cGUuZmluZC5hcHBseSh0aGlzLnJ1bGVzWzBdLGFyZ3VtZW50cyk6dm9pZCAwfSxmLnByb3RvdHlwZS5ydWxlc2V0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bGVzP2UucHJvdG90eXBlLnJ1bGVzZXRzLmFwcGx5KHRoaXMucnVsZXNbMF0pOnZvaWQgMH0sZi5wcm90b3R5cGUubWFya1JlZmVyZW5jZWQ9ZnVuY3Rpb24oKXt2YXIgYSxiO2lmKHRoaXMuaXNSZWZlcmVuY2VkPSEwLHRoaXMucnVsZXMpZm9yKGI9dGhpcy5ydWxlcyxhPTA7Yi5sZW5ndGg+YTthKyspYlthXS5tYXJrUmVmZXJlbmNlZCYmYlthXS5tYXJrUmVmZXJlbmNlZCgpfSxmLnByb3RvdHlwZS5nZXRJc1JlZmVyZW5jZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5jdXJyZW50RmlsZUluZm98fCF0aGlzLmN1cnJlbnRGaWxlSW5mby5yZWZlcmVuY2V8fHRoaXMuaXNSZWZlcmVuY2VkfSxmLnByb3RvdHlwZS5vdXRwdXRSdWxlc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPWMubGVuZ3RoO2lmKGEudGFiTGV2ZWw9KDB8YS50YWJMZXZlbCkrMSxhLmNvbXByZXNzKXtmb3IoYi5hZGQoXCJ7XCIpLGQ9MDtlPmQ7ZCsrKWNbZF0uZ2VuQ1NTKGEsYik7cmV0dXJuIGIuYWRkKFwifVwiKSx2b2lkIGEudGFiTGV2ZWwtLX12YXIgZj1cIlxcblwiK0FycmF5KGEudGFiTGV2ZWwpLmpvaW4oXCIgIFwiKSxnPWYrXCIgIFwiO2lmKGUpe2ZvcihiLmFkZChcIiB7XCIrZyksY1swXS5nZW5DU1MoYSxiKSxkPTE7ZT5kO2QrKyliLmFkZChnKSxjW2RdLmdlbkNTUyhhLGIpO2IuYWRkKGYrXCJ9XCIpfWVsc2UgYi5hZGQoXCIge1wiK2YrXCJ9XCIpO2EudGFiTGV2ZWwtLX0sYi5leHBvcnRzPWZ9LHtcIi4vbm9kZVwiOjY4LFwiLi9ydWxlc2V0XCI6NzQsXCIuL3NlbGVjdG9yXCI6NzV9XSw1NjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9YShcIi4vcGFyZW5cIiksZT1hKFwiLi9jb21iaW5hdG9yXCIpLGY9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5jb21iaW5hdG9yPWEgaW5zdGFuY2VvZiBlP2E6bmV3IGUoYSksdGhpcy52YWx1ZT1cInN0cmluZ1wiPT10eXBlb2YgYj9iLnRyaW0oKTpiP2I6XCJcIix0aGlzLmluZGV4PWMsdGhpcy5jdXJyZW50RmlsZUluZm89ZH07Zi5wcm90b3R5cGU9bmV3IGMsZi5wcm90b3R5cGUudHlwZT1cIkVsZW1lbnRcIixmLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy52YWx1ZTt0aGlzLmNvbWJpbmF0b3I9YS52aXNpdCh0aGlzLmNvbWJpbmF0b3IpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiYodGhpcy52YWx1ZT1hLnZpc2l0KGIpKX0sZi5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IGYodGhpcy5jb21iaW5hdG9yLHRoaXMudmFsdWUuZXZhbD90aGlzLnZhbHVlLmV2YWwoYSk6dGhpcy52YWx1ZSx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvKX0sZi5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7Yi5hZGQodGhpcy50b0NTUyhhKSx0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmluZGV4KX0sZi5wcm90b3R5cGUudG9DU1M9ZnVuY3Rpb24oYSl7YT1hfHx7fTt2YXIgYj10aGlzLnZhbHVlLGM9YS5maXJzdFNlbGVjdG9yO3JldHVybiBiIGluc3RhbmNlb2YgZCYmKGEuZmlyc3RTZWxlY3Rvcj0hMCksYj1iLnRvQ1NTP2IudG9DU1MoYSk6YixhLmZpcnN0U2VsZWN0b3I9YyxcIlwiPT09YiYmXCImXCI9PT10aGlzLmNvbWJpbmF0b3IudmFsdWUuY2hhckF0KDApP1wiXCI6dGhpcy5jb21iaW5hdG9yLnRvQ1NTKGEpK2J9LGIuZXhwb3J0cz1mfSx7XCIuL2NvbWJpbmF0b3JcIjo0OSxcIi4vbm9kZVwiOjY4LFwiLi9wYXJlblwiOjcwfV0sNTc6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL3BhcmVuXCIpLGU9YShcIi4vY29tbWVudFwiKSxmPWZ1bmN0aW9uKGEpe2lmKHRoaXMudmFsdWU9YSwhYSl0aHJvdyBuZXcgRXJyb3IoXCJFeHByZXNzaW9uIHJlcXVpcmVzIGFuIGFycmF5IHBhcmFtZXRlclwiKX07Zi5wcm90b3R5cGU9bmV3IGMsZi5wcm90b3R5cGUudHlwZT1cIkV4cHJlc3Npb25cIixmLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hLnZpc2l0QXJyYXkodGhpcy52YWx1ZSl9LGYucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLnBhcmVucyYmIXRoaXMucGFyZW5zSW5PcCxlPSExO3JldHVybiBjJiZhLmluUGFyZW50aGVzaXMoKSx0aGlzLnZhbHVlLmxlbmd0aD4xP2I9bmV3IGYodGhpcy52YWx1ZS5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGIuZXZhbChhKX0pKToxPT09dGhpcy52YWx1ZS5sZW5ndGg/KHRoaXMudmFsdWVbMF0ucGFyZW5zJiYhdGhpcy52YWx1ZVswXS5wYXJlbnNJbk9wJiYoZT0hMCksYj10aGlzLnZhbHVlWzBdLmV2YWwoYSkpOmI9dGhpcyxjJiZhLm91dE9mUGFyZW50aGVzaXMoKSx0aGlzLnBhcmVucyYmdGhpcy5wYXJlbnNJbk9wJiYhYS5pc01hdGhPbigpJiYhZSYmKGI9bmV3IGQoYikpLGJ9LGYucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO3RoaXMudmFsdWUubGVuZ3RoPmM7YysrKXRoaXMudmFsdWVbY10uZ2VuQ1NTKGEsYiksdGhpcy52YWx1ZS5sZW5ndGg+YysxJiZiLmFkZChcIiBcIil9LGYucHJvdG90eXBlLnRocm93QXdheUNvbW1lbnRzPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZT10aGlzLnZhbHVlLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hKGEgaW5zdGFuY2VvZiBlKX0pfSxiLmV4cG9ydHM9Zn0se1wiLi9jb21tZW50XCI6NTAsXCIuL25vZGVcIjo2OCxcIi4vcGFyZW5cIjo3MH1dLDU4OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1mdW5jdGlvbiBlKGEsYixjKXtzd2l0Y2godGhpcy5zZWxlY3Rvcj1hLHRoaXMub3B0aW9uPWIsdGhpcy5pbmRleD1jLHRoaXMub2JqZWN0X2lkPWUubmV4dF9pZCsrLHRoaXMucGFyZW50X2lkcz1bdGhpcy5vYmplY3RfaWRdLGIpe2Nhc2VcImFsbFwiOnRoaXMuYWxsb3dCZWZvcmU9ITAsdGhpcy5hbGxvd0FmdGVyPSEwO2JyZWFrO2RlZmF1bHQ6dGhpcy5hbGxvd0JlZm9yZT0hMSx0aGlzLmFsbG93QWZ0ZXI9ITF9fTtkLm5leHRfaWQ9MCxkLnByb3RvdHlwZT1uZXcgYyxkLnByb3RvdHlwZS50eXBlPVwiRXh0ZW5kXCIsZC5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGEpe3RoaXMuc2VsZWN0b3I9YS52aXNpdCh0aGlzLnNlbGVjdG9yKX0sZC5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IGQodGhpcy5zZWxlY3Rvci5ldmFsKGEpLHRoaXMub3B0aW9uLHRoaXMuaW5kZXgpfSxkLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZCh0aGlzLnNlbGVjdG9yLHRoaXMub3B0aW9uLHRoaXMuaW5kZXgpfSxkLnByb3RvdHlwZS5maW5kU2VsZlNlbGVjdG9ycz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9W107Zm9yKGI9MDthLmxlbmd0aD5iO2IrKyljPWFbYl0uZWxlbWVudHMsYj4wJiZjLmxlbmd0aCYmXCJcIj09PWNbMF0uY29tYmluYXRvci52YWx1ZSYmKGNbMF0uY29tYmluYXRvci52YWx1ZT1cIiBcIiksZD1kLmNvbmNhdChhW2JdLmVsZW1lbnRzKTt0aGlzLnNlbGZTZWxlY3RvcnM9W3tlbGVtZW50czpkfV19LGIuZXhwb3J0cz1kfSx7XCIuL25vZGVcIjo2OH1dLDU5OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1hKFwiLi9tZWRpYVwiKSxlPWEoXCIuL3VybFwiKSxmPWEoXCIuL3F1b3RlZFwiKSxnPWEoXCIuL3J1bGVzZXRcIiksaD1hKFwiLi9hbm9ueW1vdXNcIiksaT1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKHRoaXMub3B0aW9ucz1jLHRoaXMuaW5kZXg9ZCx0aGlzLnBhdGg9YSx0aGlzLmZlYXR1cmVzPWIsdGhpcy5jdXJyZW50RmlsZUluZm89ZSx2b2lkIDAhPT10aGlzLm9wdGlvbnMubGVzc3x8dGhpcy5vcHRpb25zLmlubGluZSl0aGlzLmNzcz0hdGhpcy5vcHRpb25zLmxlc3N8fHRoaXMub3B0aW9ucy5pbmxpbmU7ZWxzZXt2YXIgZj10aGlzLmdldFBhdGgoKTtmJiYvWyNcXC5cXCZcXD9cXC9dY3NzKFtcXD87XS4qKT8kLy50ZXN0KGYpJiYodGhpcy5jc3M9ITApfX07aS5wcm90b3R5cGU9bmV3IGMsaS5wcm90b3R5cGUudHlwZT1cIkltcG9ydFwiLGkucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLmZlYXR1cmVzJiYodGhpcy5mZWF0dXJlcz1hLnZpc2l0KHRoaXMuZmVhdHVyZXMpKSx0aGlzLnBhdGg9YS52aXNpdCh0aGlzLnBhdGgpLHRoaXMub3B0aW9ucy5wbHVnaW58fHRoaXMub3B0aW9ucy5pbmxpbmV8fCF0aGlzLnJvb3R8fCh0aGlzLnJvb3Q9YS52aXNpdCh0aGlzLnJvb3QpKX0saS5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7dGhpcy5jc3MmJnZvaWQgMD09PXRoaXMucGF0aC5jdXJyZW50RmlsZUluZm8ucmVmZXJlbmNlJiYoYi5hZGQoXCJAaW1wb3J0IFwiLHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMuaW5kZXgpLHRoaXMucGF0aC5nZW5DU1MoYSxiKSx0aGlzLmZlYXR1cmVzJiYoYi5hZGQoXCIgXCIpLHRoaXMuZmVhdHVyZXMuZ2VuQ1NTKGEsYikpLGIuYWRkKFwiO1wiKSl9LGkucHJvdG90eXBlLmdldFBhdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXRoIGluc3RhbmNlb2YgZT90aGlzLnBhdGgudmFsdWUudmFsdWU6dGhpcy5wYXRoLnZhbHVlfSxpLnByb3RvdHlwZS5pc1ZhcmlhYmxlSW1wb3J0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXRoO3JldHVybiBhIGluc3RhbmNlb2YgZSYmKGE9YS52YWx1ZSksYSBpbnN0YW5jZW9mIGY/YS5jb250YWluc1ZhcmlhYmxlcygpOiEwfSxpLnByb3RvdHlwZS5ldmFsRm9ySW1wb3J0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGF0aDtyZXR1cm4gYiBpbnN0YW5jZW9mIGUmJihiPWIudmFsdWUpLG5ldyBpKGIuZXZhbChhKSx0aGlzLmZlYXR1cmVzLHRoaXMub3B0aW9ucyx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvKX0saS5wcm90b3R5cGUuZXZhbFBhdGg9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wYXRoLmV2YWwoYSksYz10aGlzLmN1cnJlbnRGaWxlSW5mbyYmdGhpcy5jdXJyZW50RmlsZUluZm8ucm9vdHBhdGg7aWYoIShiIGluc3RhbmNlb2YgZSkpe2lmKGMpe3ZhciBkPWIudmFsdWU7ZCYmYS5pc1BhdGhSZWxhdGl2ZShkKSYmKGIudmFsdWU9YytkKX1iLnZhbHVlPWEubm9ybWFsaXplUGF0aChiLnZhbHVlKX1yZXR1cm4gYn0saS5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhKXt2YXIgYixjLGU9dGhpcy5mZWF0dXJlcyYmdGhpcy5mZWF0dXJlcy5ldmFsKGEpO2lmKHRoaXMub3B0aW9ucy5wbHVnaW4pcmV0dXJuIGM9YS5mcmFtZXNbMF0mJmEuZnJhbWVzWzBdLmZ1bmN0aW9uUmVnaXN0cnksYyYmdGhpcy5yb290JiZ0aGlzLnJvb3QuZnVuY3Rpb25zJiZjLmFkZE11bHRpcGxlKHRoaXMucm9vdC5mdW5jdGlvbnMpLFtdO2lmKHRoaXMuc2tpcCYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuc2tpcCYmKHRoaXMuc2tpcD10aGlzLnNraXAoKSksdGhpcy5za2lwKSlyZXR1cm5bXTtpZih0aGlzLm9wdGlvbnMuaW5saW5lKXt2YXIgZj1uZXcgaCh0aGlzLnJvb3QsMCx7ZmlsZW5hbWU6dGhpcy5pbXBvcnRlZEZpbGVuYW1lfSwhMCwhMCk7cmV0dXJuIHRoaXMuZmVhdHVyZXM/bmV3IGQoW2ZdLHRoaXMuZmVhdHVyZXMudmFsdWUpOltmXX1pZih0aGlzLmNzcyl7dmFyIGo9bmV3IGkodGhpcy5ldmFsUGF0aChhKSxlLHRoaXMub3B0aW9ucyx0aGlzLmluZGV4KTtpZighai5jc3MmJnRoaXMuZXJyb3IpdGhyb3cgdGhpcy5lcnJvcjtyZXR1cm4gan1yZXR1cm4gYj1uZXcgZyhudWxsLHRoaXMucm9vdC5ydWxlcy5zbGljZSgwKSksYi5ldmFsSW1wb3J0cyhhKSx0aGlzLmZlYXR1cmVzP25ldyBkKGIucnVsZXMsdGhpcy5mZWF0dXJlcy52YWx1ZSk6Yi5ydWxlc30sYi5leHBvcnRzPWl9LHtcIi4vYW5vbnltb3VzXCI6NDQsXCIuL21lZGlhXCI6NjQsXCIuL25vZGVcIjo2OCxcIi4vcXVvdGVkXCI6NzEsXCIuL3J1bGVzZXRcIjo3NCxcIi4vdXJsXCI6Nzh9XSw2MDpbZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtjLk5vZGU9YShcIi4vbm9kZVwiKSxjLkFscGhhPWEoXCIuL2FscGhhXCIpLGMuQ29sb3I9YShcIi4vY29sb3JcIiksYy5EaXJlY3RpdmU9YShcIi4vZGlyZWN0aXZlXCIpLGMuRGV0YWNoZWRSdWxlc2V0PWEoXCIuL2RldGFjaGVkLXJ1bGVzZXRcIiksYy5PcGVyYXRpb249YShcIi4vb3BlcmF0aW9uXCIpLGMuRGltZW5zaW9uPWEoXCIuL2RpbWVuc2lvblwiKSxjLlVuaXQ9YShcIi4vdW5pdFwiKSxjLktleXdvcmQ9YShcIi4va2V5d29yZFwiKSxjLlZhcmlhYmxlPWEoXCIuL3ZhcmlhYmxlXCIpLGMuUnVsZXNldD1hKFwiLi9ydWxlc2V0XCIpLGMuRWxlbWVudD1hKFwiLi9lbGVtZW50XCIpLGMuQXR0cmlidXRlPWEoXCIuL2F0dHJpYnV0ZVwiKSxjLkNvbWJpbmF0b3I9YShcIi4vY29tYmluYXRvclwiKSxjLlNlbGVjdG9yPWEoXCIuL3NlbGVjdG9yXCIpLGMuUXVvdGVkPWEoXCIuL3F1b3RlZFwiKSxjLkV4cHJlc3Npb249YShcIi4vZXhwcmVzc2lvblwiKSxjLlJ1bGU9YShcIi4vcnVsZVwiKSxjLkNhbGw9YShcIi4vY2FsbFwiKSxjLlVSTD1hKFwiLi91cmxcIiksYy5JbXBvcnQ9YShcIi4vaW1wb3J0XCIpLGMubWl4aW49e0NhbGw6YShcIi4vbWl4aW4tY2FsbFwiKSxEZWZpbml0aW9uOmEoXCIuL21peGluLWRlZmluaXRpb25cIil9LGMuQ29tbWVudD1hKFwiLi9jb21tZW50XCIpLGMuQW5vbnltb3VzPWEoXCIuL2Fub255bW91c1wiKSxjLlZhbHVlPWEoXCIuL3ZhbHVlXCIpLGMuSmF2YVNjcmlwdD1hKFwiLi9qYXZhc2NyaXB0XCIpLGMuQXNzaWdubWVudD1hKFwiLi9hc3NpZ25tZW50XCIpLGMuQ29uZGl0aW9uPWEoXCIuL2NvbmRpdGlvblwiKSxjLlBhcmVuPWEoXCIuL3BhcmVuXCIpLGMuTWVkaWE9YShcIi4vbWVkaWFcIiksYy5Vbmljb2RlRGVzY3JpcHRvcj1hKFwiLi91bmljb2RlLWRlc2NyaXB0b3JcIiksYy5OZWdhdGl2ZT1hKFwiLi9uZWdhdGl2ZVwiKSxjLkV4dGVuZD1hKFwiLi9leHRlbmRcIiksYy5SdWxlc2V0Q2FsbD1hKFwiLi9ydWxlc2V0LWNhbGxcIiksYi5leHBvcnRzPWN9LHtcIi4vYWxwaGFcIjo0MyxcIi4vYW5vbnltb3VzXCI6NDQsXCIuL2Fzc2lnbm1lbnRcIjo0NSxcIi4vYXR0cmlidXRlXCI6NDYsXCIuL2NhbGxcIjo0NyxcIi4vY29sb3JcIjo0OCxcIi4vY29tYmluYXRvclwiOjQ5LFwiLi9jb21tZW50XCI6NTAsXCIuL2NvbmRpdGlvblwiOjUxLFwiLi9kZXRhY2hlZC1ydWxlc2V0XCI6NTMsXCIuL2RpbWVuc2lvblwiOjU0LFwiLi9kaXJlY3RpdmVcIjo1NSxcIi4vZWxlbWVudFwiOjU2LFwiLi9leHByZXNzaW9uXCI6NTcsXCIuL2V4dGVuZFwiOjU4LFwiLi9pbXBvcnRcIjo1OSxcIi4vamF2YXNjcmlwdFwiOjYxLFwiLi9rZXl3b3JkXCI6NjMsXCIuL21lZGlhXCI6NjQsXCIuL21peGluLWNhbGxcIjo2NSxcIi4vbWl4aW4tZGVmaW5pdGlvblwiOjY2LFwiLi9uZWdhdGl2ZVwiOjY3LFwiLi9ub2RlXCI6NjgsXCIuL29wZXJhdGlvblwiOjY5LFwiLi9wYXJlblwiOjcwLFwiLi9xdW90ZWRcIjo3MSxcIi4vcnVsZVwiOjcyLFwiLi9ydWxlc2V0XCI6NzQsXCIuL3J1bGVzZXQtY2FsbFwiOjczLFwiLi9zZWxlY3RvclwiOjc1LFwiLi91bmljb2RlLWRlc2NyaXB0b3JcIjo3NixcIi4vdW5pdFwiOjc3LFwiLi91cmxcIjo3OCxcIi4vdmFsdWVcIjo3OSxcIi4vdmFyaWFibGVcIjo4MH1dLDYxOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL2pzLWV2YWwtbm9kZVwiKSxkPWEoXCIuL2RpbWVuc2lvblwiKSxlPWEoXCIuL3F1b3RlZFwiKSxmPWEoXCIuL2Fub255bW91c1wiKSxnPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuZXNjYXBlZD1iLHRoaXMuZXhwcmVzc2lvbj1hLHRoaXMuaW5kZXg9Yyx0aGlzLmN1cnJlbnRGaWxlSW5mbz1kfTtnLnByb3RvdHlwZT1uZXcgYyxnLnByb3RvdHlwZS50eXBlPVwiSmF2YVNjcmlwdFwiLGcucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ldmFsdWF0ZUphdmFTY3JpcHQodGhpcy5leHByZXNzaW9uLGEpO3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBiP25ldyBkKGIpOlwic3RyaW5nXCI9PXR5cGVvZiBiP25ldyBlKCdcIicrYisnXCInLGIsdGhpcy5lc2NhcGVkLHRoaXMuaW5kZXgpOm5ldyBmKEFycmF5LmlzQXJyYXkoYik/Yi5qb2luKFwiLCBcIik6Yil9LGIuZXhwb3J0cz1nfSx7XCIuL2Fub255bW91c1wiOjQ0LFwiLi9kaW1lbnNpb25cIjo1NCxcIi4vanMtZXZhbC1ub2RlXCI6NjIsXCIuL3F1b3RlZFwiOjcxfV0sNjI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL3ZhcmlhYmxlXCIpLGU9ZnVuY3Rpb24oKXt9O2UucHJvdG90eXBlPW5ldyBjLGUucHJvdG90eXBlLmV2YWx1YXRlSmF2YVNjcmlwdD1mdW5jdGlvbihhLGIpe3ZhciBjLGU9dGhpcyxmPXt9O2lmKHZvaWQgMCE9PWIuamF2YXNjcmlwdEVuYWJsZWQmJiFiLmphdmFzY3JpcHRFbmFibGVkKXRocm93e21lc3NhZ2U6XCJZb3UgYXJlIHVzaW5nIEphdmFTY3JpcHQsIHdoaWNoIGhhcyBiZWVuIGRpc2FibGVkLlwiLGZpbGVuYW1lOnRoaXMuY3VycmVudEZpbGVJbmZvLmZpbGVuYW1lLGluZGV4OnRoaXMuaW5kZXh9O2E9YS5yZXBsYWNlKC9AXFx7KFtcXHctXSspXFx9L2csZnVuY3Rpb24oYSxjKXtyZXR1cm4gZS5qc2lmeShuZXcgZChcIkBcIitjLGUuaW5kZXgsZS5jdXJyZW50RmlsZUluZm8pLmV2YWwoYikpfSk7dHJ5e2E9bmV3IEZ1bmN0aW9uKFwicmV0dXJuIChcIithK1wiKVwiKX1jYXRjaChnKXt0aHJvd3ttZXNzYWdlOlwiSmF2YVNjcmlwdCBldmFsdWF0aW9uIGVycm9yOiBcIitnLm1lc3NhZ2UrXCIgZnJvbSBgXCIrYStcImBcIixmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZSxpbmRleDp0aGlzLmluZGV4fX12YXIgaD1iLmZyYW1lc1swXS52YXJpYWJsZXMoKTtmb3IodmFyIGkgaW4gaCloLmhhc093blByb3BlcnR5KGkpJiYoZltpLnNsaWNlKDEpXT17dmFsdWU6aFtpXS52YWx1ZSx0b0pTOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWUuZXZhbChiKS50b0NTUygpfX0pO3RyeXtjPWEuY2FsbChmKX1jYXRjaChnKXt0aHJvd3ttZXNzYWdlOlwiSmF2YVNjcmlwdCBldmFsdWF0aW9uIGVycm9yOiAnXCIrZy5uYW1lK1wiOiBcIitnLm1lc3NhZ2UucmVwbGFjZSgvW1wiXS9nLFwiJ1wiKStcIidcIixmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZSxpbmRleDp0aGlzLmluZGV4fX1yZXR1cm4gY30sZS5wcm90b3R5cGUuanNpZnk9ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYS52YWx1ZSkmJmEudmFsdWUubGVuZ3RoPjE/XCJbXCIrYS52YWx1ZS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9DU1MoKX0pLmpvaW4oXCIsIFwiKStcIl1cIjphLnRvQ1NTKCl9LGIuZXhwb3J0cz1lfSx7XCIuL25vZGVcIjo2OCxcIi4vdmFyaWFibGVcIjo4MH1dLDYzOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWF9O2QucHJvdG90eXBlPW5ldyBjLGQucHJvdG90eXBlLnR5cGU9XCJLZXl3b3JkXCIsZC5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7aWYoXCIlXCI9PT10aGlzLnZhbHVlKXRocm93e3R5cGU6XCJTeW50YXhcIixtZXNzYWdlOlwiSW52YWxpZCAlIHdpdGhvdXQgbnVtYmVyXCJ9O2IuYWRkKHRoaXMudmFsdWUpfSxkLlRydWU9bmV3IGQoXCJ0cnVlXCIpLGQuRmFsc2U9bmV3IGQoXCJmYWxzZVwiKSxiLmV4cG9ydHM9ZH0se1wiLi9ub2RlXCI6Njh9XSw2NDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ydWxlc2V0XCIpLGQ9YShcIi4vdmFsdWVcIiksZT1hKFwiLi9zZWxlY3RvclwiKSxmPWEoXCIuL2Fub255bW91c1wiKSxnPWEoXCIuL2V4cHJlc3Npb25cIiksaD1hKFwiLi9kaXJlY3RpdmVcIiksaT1mdW5jdGlvbihhLGIsZixnKXt0aGlzLmluZGV4PWYsdGhpcy5jdXJyZW50RmlsZUluZm89Zzt2YXIgaD1uZXcgZShbXSxudWxsLG51bGwsdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbykuY3JlYXRlRW1wdHlTZWxlY3RvcnMoKTt0aGlzLmZlYXR1cmVzPW5ldyBkKGIpLHRoaXMucnVsZXM9W25ldyBjKGgsYSldLHRoaXMucnVsZXNbMF0uYWxsb3dJbXBvcnRzPSEwfTtpLnByb3RvdHlwZT1uZXcgaCxpLnByb3RvdHlwZS50eXBlPVwiTWVkaWFcIixpLnByb3RvdHlwZS5pc1J1bGVzZXRMaWtlPSEwLGkucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLmZlYXR1cmVzJiYodGhpcy5mZWF0dXJlcz1hLnZpc2l0KHRoaXMuZmVhdHVyZXMpKSx0aGlzLnJ1bGVzJiYodGhpcy5ydWxlcz1hLnZpc2l0QXJyYXkodGhpcy5ydWxlcykpfSxpLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZChcIkBtZWRpYSBcIix0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmluZGV4KSx0aGlzLmZlYXR1cmVzLmdlbkNTUyhhLGIpLHRoaXMub3V0cHV0UnVsZXNldChhLGIsdGhpcy5ydWxlcyl9LGkucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7YS5tZWRpYUJsb2Nrc3x8KGEubWVkaWFCbG9ja3M9W10sYS5tZWRpYVBhdGg9W10pO3ZhciBiPW5ldyBpKG51bGwsW10sdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbyk7dGhpcy5kZWJ1Z0luZm8mJih0aGlzLnJ1bGVzWzBdLmRlYnVnSW5mbz10aGlzLmRlYnVnSW5mbyxiLmRlYnVnSW5mbz10aGlzLmRlYnVnSW5mbyk7dmFyIGM9ITE7YS5zdHJpY3RNYXRofHwoYz0hMCxhLnN0cmljdE1hdGg9ITApO3RyeXtiLmZlYXR1cmVzPXRoaXMuZmVhdHVyZXMuZXZhbChhKX1maW5hbGx5e2MmJihhLnN0cmljdE1hdGg9ITEpfXJldHVybiBhLm1lZGlhUGF0aC5wdXNoKGIpLGEubWVkaWFCbG9ja3MucHVzaChiKSx0aGlzLnJ1bGVzWzBdLmZ1bmN0aW9uUmVnaXN0cnk9YS5mcmFtZXNbMF0uZnVuY3Rpb25SZWdpc3RyeS5pbmhlcml0KCksYS5mcmFtZXMudW5zaGlmdCh0aGlzLnJ1bGVzWzBdKSxiLnJ1bGVzPVt0aGlzLnJ1bGVzWzBdLmV2YWwoYSldLGEuZnJhbWVzLnNoaWZ0KCksYS5tZWRpYVBhdGgucG9wKCksMD09PWEubWVkaWFQYXRoLmxlbmd0aD9iLmV2YWxUb3AoYSk6Yi5ldmFsTmVzdGVkKGEpfSxpLnByb3RvdHlwZS5ldmFsVG9wPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYS5tZWRpYUJsb2Nrcy5sZW5ndGg+MSl7dmFyIGQ9bmV3IGUoW10sbnVsbCxudWxsLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pLmNyZWF0ZUVtcHR5U2VsZWN0b3JzKCk7Yj1uZXcgYyhkLGEubWVkaWFCbG9ja3MpLGIubXVsdGlNZWRpYT0hMH1yZXR1cm4gZGVsZXRlIGEubWVkaWFCbG9ja3MsZGVsZXRlIGEubWVkaWFQYXRoLGJ9LGkucHJvdG90eXBlLmV2YWxOZXN0ZWQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxoPWEubWVkaWFQYXRoLmNvbmNhdChbdGhpc10pO2ZvcihiPTA7aC5sZW5ndGg+YjtiKyspZT1oW2JdLmZlYXR1cmVzIGluc3RhbmNlb2YgZD9oW2JdLmZlYXR1cmVzLnZhbHVlOmhbYl0uZmVhdHVyZXMsaFtiXT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO3JldHVybiB0aGlzLmZlYXR1cmVzPW5ldyBkKHRoaXMucGVybXV0ZShoKS5tYXAoZnVuY3Rpb24oYSl7Zm9yKGE9YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudG9DU1M/YTpuZXcgZihhKX0pLGI9YS5sZW5ndGgtMTtiPjA7Yi0tKWEuc3BsaWNlKGIsMCxuZXcgZihcImFuZFwiKSk7cmV0dXJuIG5ldyBnKGEpfSkpLG5ldyBjKFtdLFtdKX0saS5wcm90b3R5cGUucGVybXV0ZT1mdW5jdGlvbihhKXtpZigwPT09YS5sZW5ndGgpcmV0dXJuW107aWYoMT09PWEubGVuZ3RoKXJldHVybiBhWzBdO2Zvcih2YXIgYj1bXSxjPXRoaXMucGVybXV0ZShhLnNsaWNlKDEpKSxkPTA7Yy5sZW5ndGg+ZDtkKyspZm9yKHZhciBlPTA7YVswXS5sZW5ndGg+ZTtlKyspYi5wdXNoKFthWzBdW2VdXS5jb25jYXQoY1tkXSkpO3JldHVybiBifSxpLnByb3RvdHlwZS5idWJibGVTZWxlY3RvcnM9ZnVuY3Rpb24oYSl7YSYmKHRoaXMucnVsZXM9W25ldyBjKGEuc2xpY2UoMCksW3RoaXMucnVsZXNbMF1dKV0pfSxiLmV4cG9ydHM9aX0se1wiLi9hbm9ueW1vdXNcIjo0NCxcIi4vZGlyZWN0aXZlXCI6NTUsXCIuL2V4cHJlc3Npb25cIjo1NyxcIi4vcnVsZXNldFwiOjc0LFwiLi9zZWxlY3RvclwiOjc1LFwiLi92YWx1ZVwiOjc5fV0sNjU6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL3NlbGVjdG9yXCIpLGU9YShcIi4vbWl4aW4tZGVmaW5pdGlvblwiKSxmPWEoXCIuLi9mdW5jdGlvbnMvZGVmYXVsdFwiKSxnPWZ1bmN0aW9uKGEsYixjLGUsZil7dGhpcy5zZWxlY3Rvcj1uZXcgZChhKSx0aGlzLmFyZ3VtZW50cz1iJiZiLmxlbmd0aD9iOm51bGwsdGhpcy5pbmRleD1jLHRoaXMuY3VycmVudEZpbGVJbmZvPWUsdGhpcy5pbXBvcnRhbnQ9Zn07Zy5wcm90b3R5cGU9bmV3IGMsZy5wcm90b3R5cGUudHlwZT1cIk1peGluQ2FsbFwiLGcucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnZpc2l0KHRoaXMuc2VsZWN0b3IpKSx0aGlzLmFyZ3VtZW50cyYmKHRoaXMuYXJndW1lbnRzPWEudmlzaXRBcnJheSh0aGlzLmFyZ3VtZW50cykpfSxnLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixjKXt2YXIgZCxlO2ZvcihrPTA7Mj5rO2srKyl7Zm9yKHdba109ITAsZi52YWx1ZShrKSxkPTA7Yy5sZW5ndGg+ZCYmd1trXTtkKyspZT1jW2RdLGUubWF0Y2hDb25kaXRpb24mJih3W2tdPXdba10mJmUubWF0Y2hDb25kaXRpb24obnVsbCxhKSk7Yi5tYXRjaENvbmRpdGlvbiYmKHdba109d1trXSYmYi5tYXRjaENvbmRpdGlvbihoLGEpKX1yZXR1cm4gd1swXXx8d1sxXT93WzBdIT13WzFdP3dbMV0/ejpBOnk6eH12YXIgYyxkLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdD1bXSx1PSExLHY9W10sdz1bXSx4PS0xLHk9MCx6PTEsQT0yO2ZvcihoPXRoaXMuYXJndW1lbnRzJiZ0aGlzLmFyZ3VtZW50cy5tYXAoZnVuY3Rpb24oYil7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmIudmFsdWUuZXZhbChhKX19KSxzPWZ1bmN0aW9uKGIpe3JldHVybiBiLm1hdGNoQXJncyhudWxsLGEpfSxpPTA7YS5mcmFtZXMubGVuZ3RoPmk7aSsrKWlmKChjPWEuZnJhbWVzW2ldLmZpbmQodGhpcy5zZWxlY3RvcixudWxsLHMpKS5sZW5ndGg+MCl7Zm9yKG09ITAsaj0wO2MubGVuZ3RoPmo7aisrKXtmb3IoZD1jW2pdLnJ1bGUsZz1jW2pdLnBhdGgsbD0hMSxrPTA7YS5mcmFtZXMubGVuZ3RoPms7aysrKWlmKCEoZCBpbnN0YW5jZW9mIGUpJiZkPT09KGEuZnJhbWVzW2tdLm9yaWdpbmFsUnVsZXNldHx8YS5mcmFtZXNba10pKXtsPSEwO2JyZWFrfWx8fGQubWF0Y2hBcmdzKGgsYSkmJihvPXttaXhpbjpkLGdyb3VwOmIoZCxnKX0sby5ncm91cCE9PXgmJnYucHVzaChvKSx1PSEwKX1mb3IoZi5yZXNldCgpLHE9WzAsMCwwXSxqPTA7di5sZW5ndGg+ajtqKyspcVt2W2pdLmdyb3VwXSsrO2lmKHFbeV0+MClwPUE7ZWxzZSBpZihwPXoscVt6XStxW0FdPjEpdGhyb3d7dHlwZTpcIlJ1bnRpbWVcIixtZXNzYWdlOlwiQW1iaWd1b3VzIHVzZSBvZiBgZGVmYXVsdCgpYCBmb3VuZCB3aGVuIG1hdGNoaW5nIGZvciBgXCIrdGhpcy5mb3JtYXQoaCkrXCJgXCIsaW5kZXg6dGhpcy5pbmRleCxmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZX07Zm9yKGo9MDt2Lmxlbmd0aD5qO2orKylpZihvPXZbal0uZ3JvdXAsbz09PXl8fG89PT1wKXRyeXtkPXZbal0ubWl4aW4sZCBpbnN0YW5jZW9mIGV8fChyPWQub3JpZ2luYWxSdWxlc2V0fHxkLGQ9bmV3IGUoXCJcIixbXSxkLnJ1bGVzLG51bGwsITEpLGQub3JpZ2luYWxSdWxlc2V0PXIpLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHQsZC5ldmFsQ2FsbChhLGgsdGhpcy5pbXBvcnRhbnQpLnJ1bGVzKX1jYXRjaChCKXt0aHJvd3ttZXNzYWdlOkIubWVzc2FnZSxpbmRleDp0aGlzLmluZGV4LGZpbGVuYW1lOnRoaXMuY3VycmVudEZpbGVJbmZvLmZpbGVuYW1lLHN0YWNrOkIuc3RhY2t9fWlmKHUpe2lmKCF0aGlzLmN1cnJlbnRGaWxlSW5mb3x8IXRoaXMuY3VycmVudEZpbGVJbmZvLnJlZmVyZW5jZSlmb3IoaT0wO3QubGVuZ3RoPmk7aSsrKW49dFtpXSxuLm1hcmtSZWZlcmVuY2VkJiZuLm1hcmtSZWZlcmVuY2VkKCk7cmV0dXJuIHR9fXRocm93IG0/e3R5cGU6XCJSdW50aW1lXCIsbWVzc2FnZTpcIk5vIG1hdGNoaW5nIGRlZmluaXRpb24gd2FzIGZvdW5kIGZvciBgXCIrdGhpcy5mb3JtYXQoaCkrXCJgXCIsaW5kZXg6dGhpcy5pbmRleCxmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZX06e3R5cGU6XCJOYW1lXCIsbWVzc2FnZTp0aGlzLnNlbGVjdG9yLnRvQ1NTKCkudHJpbSgpK1wiIGlzIHVuZGVmaW5lZFwiLGluZGV4OnRoaXMuaW5kZXgsZmlsZW5hbWU6dGhpcy5jdXJyZW50RmlsZUluZm8uZmlsZW5hbWV9fSxnLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2VsZWN0b3IudG9DU1MoKS50cmltKCkrXCIoXCIrKGE/YS5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9XCJcIjtyZXR1cm4gYS5uYW1lJiYoYis9YS5uYW1lK1wiOlwiKSxiKz1hLnZhbHVlLnRvQ1NTP2EudmFsdWUudG9DU1MoKTpcIj8/P1wifSkuam9pbihcIiwgXCIpOlwiXCIpK1wiKVwifSxiLmV4cG9ydHM9Z30se1wiLi4vZnVuY3Rpb25zL2RlZmF1bHRcIjoxOSxcIi4vbWl4aW4tZGVmaW5pdGlvblwiOjY2LFwiLi9ub2RlXCI6NjgsXCIuL3NlbGVjdG9yXCI6NzV9XSw2NjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9zZWxlY3RvclwiKSxkPWEoXCIuL2VsZW1lbnRcIiksZT1hKFwiLi9ydWxlc2V0XCIpLGY9YShcIi4vcnVsZVwiKSxnPWEoXCIuL2V4cHJlc3Npb25cIiksaD1hKFwiLi4vY29udGV4dHNcIiksaT1mdW5jdGlvbihhLGIsZSxmLGcsaCl7dGhpcy5uYW1lPWEsdGhpcy5zZWxlY3RvcnM9W25ldyBjKFtuZXcgZChudWxsLGEsdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbyldKV0sdGhpcy5wYXJhbXM9Yix0aGlzLmNvbmRpdGlvbj1mLHRoaXMudmFyaWFkaWM9Zyx0aGlzLmFyaXR5PWIubGVuZ3RoLHRoaXMucnVsZXM9ZSx0aGlzLl9sb29rdXBzPXt9LHRoaXMucmVxdWlyZWQ9Yi5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4hYi5uYW1lfHxiLm5hbWUmJiFiLnZhbHVlP2ErMTphfSwwKSx0aGlzLmZyYW1lcz1ofTtpLnByb3RvdHlwZT1uZXcgZSxpLnByb3RvdHlwZS50eXBlPVwiTWl4aW5EZWZpbml0aW9uXCIsaS5wcm90b3R5cGUuZXZhbEZpcnN0PSEwLGkucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLnBhcmFtcyYmdGhpcy5wYXJhbXMubGVuZ3RoJiYodGhpcy5wYXJhbXM9YS52aXNpdEFycmF5KHRoaXMucGFyYW1zKSksdGhpcy5ydWxlcz1hLnZpc2l0QXJyYXkodGhpcy5ydWxlcyksdGhpcy5jb25kaXRpb24mJih0aGlzLmNvbmRpdGlvbj1hLnZpc2l0KHRoaXMuY29uZGl0aW9uKSl9LGkucHJvdG90eXBlLmV2YWxQYXJhbXM9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGksaixrLGwsbSxuLG8scCxxPW5ldyBlKG51bGwsbnVsbCkscj10aGlzLnBhcmFtcy5zbGljZSgwKSxzPTA7aWYoYi5mcmFtZXMmJmIuZnJhbWVzWzBdJiZiLmZyYW1lc1swXS5mdW5jdGlvblJlZ2lzdHJ5JiYocS5mdW5jdGlvblJlZ2lzdHJ5PWIuZnJhbWVzWzBdLmZ1bmN0aW9uUmVnaXN0cnkuaW5oZXJpdCgpKSxiPW5ldyBoLkV2YWwoYixbcV0uY29uY2F0KGIuZnJhbWVzKSksYylmb3IoYz1jLnNsaWNlKDApLHM9Yy5sZW5ndGgsaz0wO3M+aztrKyspaWYoaj1jW2tdLG49aiYmai5uYW1lKXtmb3Iobz0hMSxsPTA7ci5sZW5ndGg+bDtsKyspaWYoIWRbbF0mJm49PT1yW2xdLm5hbWUpe2RbbF09ai52YWx1ZS5ldmFsKGEpLHEucHJlcGVuZFJ1bGUobmV3IGYobixqLnZhbHVlLmV2YWwoYSkpKSxvPSEwO2JyZWFrfWlmKG8pe2Muc3BsaWNlKGssMSksay0tO2NvbnRpbnVlfXRocm93e3R5cGU6XCJSdW50aW1lXCIsbWVzc2FnZTpcIk5hbWVkIGFyZ3VtZW50IGZvciBcIit0aGlzLm5hbWUrXCIgXCIrY1trXS5uYW1lK1wiIG5vdCBmb3VuZFwifX1mb3IocD0wLGs9MDtyLmxlbmd0aD5rO2srKylpZighZFtrXSl7aWYoaj1jJiZjW3BdLG49cltrXS5uYW1lKWlmKHJba10udmFyaWFkaWMpe2ZvcihpPVtdLGw9cDtzPmw7bCsrKWkucHVzaChjW2xdLnZhbHVlLmV2YWwoYSkpO3EucHJlcGVuZFJ1bGUobmV3IGYobixuZXcgZyhpKS5ldmFsKGEpKSl9ZWxzZXtpZihtPWomJmoudmFsdWUpbT1tLmV2YWwoYSk7ZWxzZXtpZighcltrXS52YWx1ZSl0aHJvd3t0eXBlOlwiUnVudGltZVwiLG1lc3NhZ2U6XCJ3cm9uZyBudW1iZXIgb2YgYXJndW1lbnRzIGZvciBcIit0aGlzLm5hbWUrXCIgKFwiK3MrXCIgZm9yIFwiK3RoaXMuYXJpdHkrXCIpXCJ9O209cltrXS52YWx1ZS5ldmFsKGIpLHEucmVzZXRDYWNoZSgpfXEucHJlcGVuZFJ1bGUobmV3IGYobixtKSksZFtrXT1tfWlmKHJba10udmFyaWFkaWMmJmMpZm9yKGw9cDtzPmw7bCsrKWRbbF09Y1tsXS52YWx1ZS5ldmFsKGEpO3ArK31yZXR1cm4gcX0saS5wcm90b3R5cGUubWFrZUltcG9ydGFudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMucnVsZXM/dGhpcy5ydWxlcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEubWFrZUltcG9ydGFudD9hLm1ha2VJbXBvcnRhbnQoITApOmF9KTp0aGlzLnJ1bGVzLGI9bmV3IGkodGhpcy5uYW1lLHRoaXMucGFyYW1zLGEsdGhpcy5jb25kaXRpb24sdGhpcy52YXJpYWRpYyx0aGlzLmZyYW1lcyk7cmV0dXJuIGJ9LGkucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBpKHRoaXMubmFtZSx0aGlzLnBhcmFtcyx0aGlzLnJ1bGVzLHRoaXMuY29uZGl0aW9uLHRoaXMudmFyaWFkaWMsdGhpcy5mcmFtZXN8fGEuZnJhbWVzLnNsaWNlKDApKX0saS5wcm90b3R5cGUuZXZhbENhbGw9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGksaj1bXSxrPXRoaXMuZnJhbWVzP3RoaXMuZnJhbWVzLmNvbmNhdChhLmZyYW1lcyk6YS5mcmFtZXMsbD10aGlzLmV2YWxQYXJhbXMoYSxuZXcgaC5FdmFsKGEsayksYixqKTtyZXR1cm4gbC5wcmVwZW5kUnVsZShuZXcgZihcIkBhcmd1bWVudHNcIixuZXcgZyhqKS5ldmFsKGEpKSksZD10aGlzLnJ1bGVzLnNsaWNlKDApLGk9bmV3IGUobnVsbCxkKSxpLm9yaWdpbmFsUnVsZXNldD10aGlzLGk9aS5ldmFsKG5ldyBoLkV2YWwoYSxbdGhpcyxsXS5jb25jYXQoaykpKSxjJiYoaT1pLm1ha2VJbXBvcnRhbnQoKSksaX0saS5wcm90b3R5cGUubWF0Y2hDb25kaXRpb249ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5jb25kaXRpb24mJiF0aGlzLmNvbmRpdGlvbi5ldmFsKG5ldyBoLkV2YWwoYixbdGhpcy5ldmFsUGFyYW1zKGIsbmV3IGguRXZhbChiLHRoaXMuZnJhbWVzP3RoaXMuZnJhbWVzLmNvbmNhdChiLmZyYW1lcyk6Yi5mcmFtZXMpLGEsW10pXS5jb25jYXQodGhpcy5mcmFtZXN8fFtdKS5jb25jYXQoYi5mcmFtZXMpKSk/ITE6ITB9LGkucHJvdG90eXBlLm1hdGNoQXJncz1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9YSYmYS5sZW5ndGh8fDA7aWYodGhpcy52YXJpYWRpYyl7aWYodGhpcy5yZXF1aXJlZC0xPmQpcmV0dXJuITF9ZWxzZXtcbmlmKHRoaXMucmVxdWlyZWQ+ZClyZXR1cm4hMTtpZihkPnRoaXMucGFyYW1zLmxlbmd0aClyZXR1cm4hMX1jPU1hdGgubWluKGQsdGhpcy5hcml0eSk7Zm9yKHZhciBlPTA7Yz5lO2UrKylpZighdGhpcy5wYXJhbXNbZV0ubmFtZSYmIXRoaXMucGFyYW1zW2VdLnZhcmlhZGljJiZhW2VdLnZhbHVlLmV2YWwoYikudG9DU1MoKSE9dGhpcy5wYXJhbXNbZV0udmFsdWUuZXZhbChiKS50b0NTUygpKXJldHVybiExO3JldHVybiEwfSxiLmV4cG9ydHM9aX0se1wiLi4vY29udGV4dHNcIjoxMCxcIi4vZWxlbWVudFwiOjU2LFwiLi9leHByZXNzaW9uXCI6NTcsXCIuL3J1bGVcIjo3MixcIi4vcnVsZXNldFwiOjc0LFwiLi9zZWxlY3RvclwiOjc1fV0sNjc6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL29wZXJhdGlvblwiKSxlPWEoXCIuL2RpbWVuc2lvblwiKSxmPWZ1bmN0aW9uKGEpe3RoaXMudmFsdWU9YX07Zi5wcm90b3R5cGU9bmV3IGMsZi5wcm90b3R5cGUudHlwZT1cIk5lZ2F0aXZlXCIsZi5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7Yi5hZGQoXCItXCIpLHRoaXMudmFsdWUuZ2VuQ1NTKGEsYil9LGYucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNNYXRoT24oKT9uZXcgZChcIipcIixbbmV3IGUoLTEpLHRoaXMudmFsdWVdKS5ldmFsKGEpOm5ldyBmKHRoaXMudmFsdWUuZXZhbChhKSl9LGIuZXhwb3J0cz1mfSx7XCIuL2RpbWVuc2lvblwiOjU0LFwiLi9ub2RlXCI6NjgsXCIuL29wZXJhdGlvblwiOjY5fV0sNjg6W2Z1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt9O2MucHJvdG90eXBlLnRvQ1NTPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO3JldHVybiB0aGlzLmdlbkNTUyhhLHthZGQ6ZnVuY3Rpb24oYSl7Yi5wdXNoKGEpfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1iLmxlbmd0aH19KSxiLmpvaW4oXCJcIil9LGMucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe2IuYWRkKHRoaXMudmFsdWUpfSxjLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hLnZpc2l0KHRoaXMudmFsdWUpfSxjLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGMucHJvdG90eXBlLl9vcGVyYXRlPWZ1bmN0aW9uKGEsYixjLGQpe3N3aXRjaChiKXtjYXNlXCIrXCI6cmV0dXJuIGMrZDtjYXNlXCItXCI6cmV0dXJuIGMtZDtjYXNlXCIqXCI6cmV0dXJuIGMqZDtjYXNlXCIvXCI6cmV0dXJuIGMvZH19LGMucHJvdG90eXBlLmZyb3VuZD1mdW5jdGlvbihhLGIpe3ZhciBjPWEmJmEubnVtUHJlY2lzaW9uO3JldHVybiBudWxsPT1jP2I6TnVtYmVyKChiKzJlLTE2KS50b0ZpeGVkKGMpKX0sYy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7aWYoYS5jb21wYXJlJiZcIlF1b3RlZFwiIT09Yi50eXBlJiZcIkFub255bW91c1wiIT09Yi50eXBlKXJldHVybiBhLmNvbXBhcmUoYik7aWYoYi5jb21wYXJlKXJldHVybi1iLmNvbXBhcmUoYSk7aWYoYS50eXBlIT09Yi50eXBlKXJldHVybiB2b2lkIDA7aWYoYT1hLnZhbHVlLGI9Yi52YWx1ZSwhQXJyYXkuaXNBcnJheShhKSlyZXR1cm4gYT09PWI/MDp2b2lkIDA7aWYoYS5sZW5ndGghPT1iLmxlbmd0aClyZXR1cm4gdm9pZCAwO2Zvcih2YXIgZD0wO2EubGVuZ3RoPmQ7ZCsrKWlmKDAhPT1jLmNvbXBhcmUoYVtkXSxiW2RdKSlyZXR1cm4gdm9pZCAwO3JldHVybiAwfSxjLm51bWVyaWNDb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI+YT8tMTphPT09Yj8wOmE+Yj8xOnZvaWQgMH0sYi5leHBvcnRzPWN9LHt9XSw2OTpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9YShcIi4vY29sb3JcIiksZT1hKFwiLi9kaW1lbnNpb25cIiksZj1mdW5jdGlvbihhLGIsYyl7dGhpcy5vcD1hLnRyaW0oKSx0aGlzLm9wZXJhbmRzPWIsdGhpcy5pc1NwYWNlZD1jfTtmLnByb3RvdHlwZT1uZXcgYyxmLnByb3RvdHlwZS50eXBlPVwiT3BlcmF0aW9uXCIsZi5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGEpe3RoaXMub3BlcmFuZHM9YS52aXNpdCh0aGlzLm9wZXJhbmRzKX0sZi5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wZXJhbmRzWzBdLmV2YWwoYSksYz10aGlzLm9wZXJhbmRzWzFdLmV2YWwoYSk7aWYoYS5pc01hdGhPbigpKXtpZihiIGluc3RhbmNlb2YgZSYmYyBpbnN0YW5jZW9mIGQmJihiPWIudG9Db2xvcigpKSxjIGluc3RhbmNlb2YgZSYmYiBpbnN0YW5jZW9mIGQmJihjPWMudG9Db2xvcigpKSwhYi5vcGVyYXRlKXRocm93e3R5cGU6XCJPcGVyYXRpb25cIixtZXNzYWdlOlwiT3BlcmF0aW9uIG9uIGFuIGludmFsaWQgdHlwZVwifTtyZXR1cm4gYi5vcGVyYXRlKGEsdGhpcy5vcCxjKX1yZXR1cm4gbmV3IGYodGhpcy5vcCxbYixjXSx0aGlzLmlzU3BhY2VkKX0sZi5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7dGhpcy5vcGVyYW5kc1swXS5nZW5DU1MoYSxiKSx0aGlzLmlzU3BhY2VkJiZiLmFkZChcIiBcIiksYi5hZGQodGhpcy5vcCksdGhpcy5pc1NwYWNlZCYmYi5hZGQoXCIgXCIpLHRoaXMub3BlcmFuZHNbMV0uZ2VuQ1NTKGEsYil9LGIuZXhwb3J0cz1mfSx7XCIuL2NvbG9yXCI6NDgsXCIuL2RpbWVuc2lvblwiOjU0LFwiLi9ub2RlXCI6Njh9XSw3MDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hfTtkLnByb3RvdHlwZT1uZXcgYyxkLnByb3RvdHlwZS50eXBlPVwiUGFyZW5cIixkLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZChcIihcIiksdGhpcy52YWx1ZS5nZW5DU1MoYSxiKSxiLmFkZChcIilcIil9LGQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBkKHRoaXMudmFsdWUuZXZhbChhKSl9LGIuZXhwb3J0cz1kfSx7XCIuL25vZGVcIjo2OH1dLDcxOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1hKFwiLi9qcy1ldmFsLW5vZGVcIiksZT1hKFwiLi92YXJpYWJsZVwiKSxmPWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5lc2NhcGVkPW51bGw9PWM/ITA6Yyx0aGlzLnZhbHVlPWJ8fFwiXCIsdGhpcy5xdW90ZT1hLmNoYXJBdCgwKSx0aGlzLmluZGV4PWQsdGhpcy5jdXJyZW50RmlsZUluZm89ZX07Zi5wcm90b3R5cGU9bmV3IGQsZi5wcm90b3R5cGUudHlwZT1cIlF1b3RlZFwiLGYucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe3RoaXMuZXNjYXBlZHx8Yi5hZGQodGhpcy5xdW90ZSx0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmluZGV4KSxiLmFkZCh0aGlzLnZhbHVlKSx0aGlzLmVzY2FwZWR8fGIuYWRkKHRoaXMucXVvdGUpfSxmLnByb3RvdHlwZS5jb250YWluc1ZhcmlhYmxlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlLm1hdGNoKC8oYChbXmBdKylgKXxAXFx7KFtcXHctXSspXFx9Lyl9LGYucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7dmFyIGQ9YTtkbyBhPWQsZD1hLnJlcGxhY2UoYixjKTt3aGlsZShhIT09ZCk7cmV0dXJuIGR9dmFyIGM9dGhpcyxkPXRoaXMudmFsdWUsZz1mdW5jdGlvbihiLGQpe3JldHVybiBTdHJpbmcoYy5ldmFsdWF0ZUphdmFTY3JpcHQoZCxhKSl9LGg9ZnVuY3Rpb24oYixkKXt2YXIgZz1uZXcgZShcIkBcIitkLGMuaW5kZXgsYy5jdXJyZW50RmlsZUluZm8pLmV2YWwoYSwhMCk7cmV0dXJuIGcgaW5zdGFuY2VvZiBmP2cudmFsdWU6Zy50b0NTUygpfTtyZXR1cm4gZD1iKGQsL2AoW15gXSspYC9nLGcpLGQ9YihkLC9AXFx7KFtcXHctXSspXFx9L2csaCksbmV3IGYodGhpcy5xdW90ZStkK3RoaXMucXVvdGUsZCx0aGlzLmVzY2FwZWQsdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbyl9LGYucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oYSl7cmV0dXJuXCJRdW90ZWRcIiE9PWEudHlwZXx8dGhpcy5lc2NhcGVkfHxhLmVzY2FwZWQ/YS50b0NTUyYmdGhpcy50b0NTUygpPT09YS50b0NTUygpPzA6dm9pZCAwOmMubnVtZXJpY0NvbXBhcmUodGhpcy52YWx1ZSxhLnZhbHVlKX0sYi5leHBvcnRzPWZ9LHtcIi4vanMtZXZhbC1ub2RlXCI6NjIsXCIuL25vZGVcIjo2OCxcIi4vdmFyaWFibGVcIjo4MH1dLDcyOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgYyxkPVwiXCIsZT1iLmxlbmd0aCxmPXthZGQ6ZnVuY3Rpb24oYSl7ZCs9YX19O2ZvcihjPTA7ZT5jO2MrKyliW2NdLmV2YWwoYSkuZ2VuQ1NTKGEsZik7cmV0dXJuIGR9dmFyIGQ9YShcIi4vbm9kZVwiKSxlPWEoXCIuL3ZhbHVlXCIpLGY9YShcIi4va2V5d29yZFwiKSxnPWZ1bmN0aW9uKGEsYixjLGYsZyxoLGksail7dGhpcy5uYW1lPWEsdGhpcy52YWx1ZT1iIGluc3RhbmNlb2YgZD9iOm5ldyBlKFtiXSksdGhpcy5pbXBvcnRhbnQ9Yz9cIiBcIitjLnRyaW0oKTpcIlwiLHRoaXMubWVyZ2U9Zix0aGlzLmluZGV4PWcsdGhpcy5jdXJyZW50RmlsZUluZm89aCx0aGlzLmlubGluZT1pfHwhMSx0aGlzLnZhcmlhYmxlPXZvaWQgMCE9PWo/ajphLmNoYXJBdCYmXCJAXCI9PT1hLmNoYXJBdCgwKX07Zy5wcm90b3R5cGU9bmV3IGQsZy5wcm90b3R5cGUudHlwZT1cIlJ1bGVcIixnLnByb3RvdHlwZS5nZW5DU1M9ZnVuY3Rpb24oYSxiKXtiLmFkZCh0aGlzLm5hbWUrKGEuY29tcHJlc3M/XCI6XCI6XCI6IFwiKSx0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmluZGV4KTt0cnl7dGhpcy52YWx1ZS5nZW5DU1MoYSxiKX1jYXRjaChjKXt0aHJvdyBjLmluZGV4PXRoaXMuaW5kZXgsYy5maWxlbmFtZT10aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZSxjfWIuYWRkKHRoaXMuaW1wb3J0YW50Kyh0aGlzLmlubGluZXx8YS5sYXN0UnVsZSYmYS5jb21wcmVzcz9cIlwiOlwiO1wiKSx0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmluZGV4KX0sZy5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhKXt2YXIgYixkPSExLGU9dGhpcy5uYW1lLGg9dGhpcy52YXJpYWJsZTtcInN0cmluZ1wiIT10eXBlb2YgZSYmKGU9MT09PWUubGVuZ3RoJiZlWzBdaW5zdGFuY2VvZiBmP2VbMF0udmFsdWU6YyhhLGUpLGg9ITEpLFwiZm9udFwiIT09ZXx8YS5zdHJpY3RNYXRofHwoZD0hMCxhLnN0cmljdE1hdGg9ITApO3RyeXtpZihhLmltcG9ydGFudFNjb3BlLnB1c2goe30pLGI9dGhpcy52YWx1ZS5ldmFsKGEpLCF0aGlzLnZhcmlhYmxlJiZcIkRldGFjaGVkUnVsZXNldFwiPT09Yi50eXBlKXRocm93e21lc3NhZ2U6XCJSdWxlc2V0cyBjYW5ub3QgYmUgZXZhbHVhdGVkIG9uIGEgcHJvcGVydHkuXCIsaW5kZXg6dGhpcy5pbmRleCxmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZX07dmFyIGk9dGhpcy5pbXBvcnRhbnQsaj1hLmltcG9ydGFudFNjb3BlLnBvcCgpO3JldHVybiFpJiZqLmltcG9ydGFudCYmKGk9ai5pbXBvcnRhbnQpLG5ldyBnKGUsYixpLHRoaXMubWVyZ2UsdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbyx0aGlzLmlubGluZSxoKX1jYXRjaChrKXt0aHJvd1wibnVtYmVyXCIhPXR5cGVvZiBrLmluZGV4JiYoay5pbmRleD10aGlzLmluZGV4LGsuZmlsZW5hbWU9dGhpcy5jdXJyZW50RmlsZUluZm8uZmlsZW5hbWUpLGt9ZmluYWxseXtkJiYoYS5zdHJpY3RNYXRoPSExKX19LGcucHJvdG90eXBlLm1ha2VJbXBvcnRhbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGcodGhpcy5uYW1lLHRoaXMudmFsdWUsXCIhaW1wb3J0YW50XCIsdGhpcy5tZXJnZSx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMuaW5saW5lKX0sYi5leHBvcnRzPWd9LHtcIi4va2V5d29yZFwiOjYzLFwiLi9ub2RlXCI6NjgsXCIuL3ZhbHVlXCI6Nzl9XSw3MzpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi9ub2RlXCIpLGQ9YShcIi4vdmFyaWFibGVcIiksZT1mdW5jdGlvbihhKXt0aGlzLnZhcmlhYmxlPWF9O2UucHJvdG90eXBlPW5ldyBjLGUucHJvdG90eXBlLnR5cGU9XCJSdWxlc2V0Q2FsbFwiLGUucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGQodGhpcy52YXJpYWJsZSkuZXZhbChhKTtyZXR1cm4gYi5jYWxsRXZhbChhKX0sYi5leHBvcnRzPWV9LHtcIi4vbm9kZVwiOjY4LFwiLi92YXJpYWJsZVwiOjgwfV0sNzQ6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL3J1bGVcIiksZT1hKFwiLi9zZWxlY3RvclwiKSxmPWEoXCIuL2VsZW1lbnRcIiksZz1hKFwiLi9wYXJlblwiKSxoPWEoXCIuLi9jb250ZXh0c1wiKSxpPWEoXCIuLi9mdW5jdGlvbnMvZnVuY3Rpb24tcmVnaXN0cnlcIiksaj1hKFwiLi4vZnVuY3Rpb25zL2RlZmF1bHRcIiksaz1hKFwiLi9kZWJ1Zy1pbmZvXCIpLGw9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2VsZWN0b3JzPWEsdGhpcy5ydWxlcz1iLHRoaXMuX2xvb2t1cHM9e30sdGhpcy5zdHJpY3RJbXBvcnRzPWN9O2wucHJvdG90eXBlPW5ldyBjLGwucHJvdG90eXBlLnR5cGU9XCJSdWxlc2V0XCIsbC5wcm90b3R5cGUuaXNSdWxlc2V0PSEwLGwucHJvdG90eXBlLmlzUnVsZXNldExpa2U9ITAsbC5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGEpe3RoaXMucGF0aHM/YS52aXNpdEFycmF5KHRoaXMucGF0aHMsITApOnRoaXMuc2VsZWN0b3JzJiYodGhpcy5zZWxlY3RvcnM9YS52aXNpdEFycmF5KHRoaXMuc2VsZWN0b3JzKSksdGhpcy5ydWxlcyYmdGhpcy5ydWxlcy5sZW5ndGgmJih0aGlzLnJ1bGVzPWEudmlzaXRBcnJheSh0aGlzLnJ1bGVzKSl9LGwucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGIsYyxlLGYsZz10aGlzLnNlbGVjdG9ycyxoPSExO2lmKGcmJihjPWcubGVuZ3RoKSl7Zm9yKGI9W10sai5lcnJvcih7dHlwZTpcIlN5bnRheFwiLG1lc3NhZ2U6XCJpdCBpcyBjdXJyZW50bHkgb25seSBhbGxvd2VkIGluIHBhcmFtZXRyaWMgbWl4aW4gZ3VhcmRzLFwifSksZj0wO2M+ZjtmKyspZT1nW2ZdLmV2YWwoYSksYi5wdXNoKGUpLGUuZXZhbGRDb25kaXRpb24mJihoPSEwKTtqLnJlc2V0KCl9ZWxzZSBoPSEwO3ZhciBrLG0sbj10aGlzLnJ1bGVzP3RoaXMucnVsZXMuc2xpY2UoMCk6bnVsbCxvPW5ldyBsKGIsbix0aGlzLnN0cmljdEltcG9ydHMpO28ub3JpZ2luYWxSdWxlc2V0PXRoaXMsby5yb290PXRoaXMucm9vdCxvLmZpcnN0Um9vdD10aGlzLmZpcnN0Um9vdCxvLmFsbG93SW1wb3J0cz10aGlzLmFsbG93SW1wb3J0cyx0aGlzLmRlYnVnSW5mbyYmKG8uZGVidWdJbmZvPXRoaXMuZGVidWdJbmZvKSxofHwobi5sZW5ndGg9MCksby5mdW5jdGlvblJlZ2lzdHJ5PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPTAsZD1hLmxlbmd0aDtjIT09ZDsrK2MpaWYoYj1hW2NdLmZ1bmN0aW9uUmVnaXN0cnkpcmV0dXJuIGI7cmV0dXJuIGl9KGEuZnJhbWVzKS5pbmhlcml0KCk7dmFyIHA9YS5mcmFtZXM7cC51bnNoaWZ0KG8pO3ZhciBxPWEuc2VsZWN0b3JzO3F8fChhLnNlbGVjdG9ycz1xPVtdKSxxLnVuc2hpZnQodGhpcy5zZWxlY3RvcnMpLChvLnJvb3R8fG8uYWxsb3dJbXBvcnRzfHwhby5zdHJpY3RJbXBvcnRzKSYmby5ldmFsSW1wb3J0cyhhKTt2YXIgcj1vLnJ1bGVzLHM9cj9yLmxlbmd0aDowO2ZvcihmPTA7cz5mO2YrKylyW2ZdLmV2YWxGaXJzdCYmKHJbZl09cltmXS5ldmFsKGEpKTt2YXIgdD1hLm1lZGlhQmxvY2tzJiZhLm1lZGlhQmxvY2tzLmxlbmd0aHx8MDtmb3IoZj0wO3M+ZjtmKyspXCJNaXhpbkNhbGxcIj09PXJbZl0udHlwZT8obj1yW2ZdLmV2YWwoYSkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZCYmYS52YXJpYWJsZT8hby52YXJpYWJsZShhLm5hbWUpOiEwfSksci5zcGxpY2UuYXBwbHkocixbZiwxXS5jb25jYXQobikpLHMrPW4ubGVuZ3RoLTEsZis9bi5sZW5ndGgtMSxvLnJlc2V0Q2FjaGUoKSk6XCJSdWxlc2V0Q2FsbFwiPT09cltmXS50eXBlJiYobj1yW2ZdLmV2YWwoYSkucnVsZXMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZCYmYS52YXJpYWJsZT8hMTohMH0pLHIuc3BsaWNlLmFwcGx5KHIsW2YsMV0uY29uY2F0KG4pKSxzKz1uLmxlbmd0aC0xLGYrPW4ubGVuZ3RoLTEsby5yZXNldENhY2hlKCkpO2ZvcihmPTA7ci5sZW5ndGg+ZjtmKyspaz1yW2ZdLGsuZXZhbEZpcnN0fHwocltmXT1rPWsuZXZhbD9rLmV2YWwoYSk6ayk7Zm9yKGY9MDtyLmxlbmd0aD5mO2YrKylpZihrPXJbZl0sayBpbnN0YW5jZW9mIGwmJmsuc2VsZWN0b3JzJiYxPT09ay5zZWxlY3RvcnMubGVuZ3RoJiZrLnNlbGVjdG9yc1swXS5pc0p1c3RQYXJlbnRTZWxlY3RvcigpKXtyLnNwbGljZShmLS0sMSk7Zm9yKHZhciB1PTA7ay5ydWxlcy5sZW5ndGg+dTt1KyspbT1rLnJ1bGVzW3VdLG0gaW5zdGFuY2VvZiBkJiZtLnZhcmlhYmxlfHxyLnNwbGljZSgrK2YsMCxtKX1pZihwLnNoaWZ0KCkscS5zaGlmdCgpLGEubWVkaWFCbG9ja3MpZm9yKGY9dDthLm1lZGlhQmxvY2tzLmxlbmd0aD5mO2YrKylhLm1lZGlhQmxvY2tzW2ZdLmJ1YmJsZVNlbGVjdG9ycyhiKTtyZXR1cm4gb30sbC5wcm90b3R5cGUuZXZhbEltcG9ydHM9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMucnVsZXM7aWYoZClmb3IoYj0wO2QubGVuZ3RoPmI7YisrKVwiSW1wb3J0XCI9PT1kW2JdLnR5cGUmJihjPWRbYl0uZXZhbChhKSxjJiZjLmxlbmd0aD8oZC5zcGxpY2UuYXBwbHkoZCxbYiwxXS5jb25jYXQoYykpLGIrPWMubGVuZ3RoLTEpOmQuc3BsaWNlKGIsMSxjKSx0aGlzLnJlc2V0Q2FjaGUoKSl9LGwucHJvdG90eXBlLm1ha2VJbXBvcnRhbnQ9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgbCh0aGlzLnNlbGVjdG9ycyx0aGlzLnJ1bGVzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5tYWtlSW1wb3J0YW50P2EubWFrZUltcG9ydGFudCgpOmF9KSx0aGlzLnN0cmljdEltcG9ydHMpO3JldHVybiBhfSxsLnByb3RvdHlwZS5tYXRjaEFyZ3M9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fDA9PT1hLmxlbmd0aH0sbC5wcm90b3R5cGUubWF0Y2hDb25kaXRpb249ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNlbGVjdG9yc1t0aGlzLnNlbGVjdG9ycy5sZW5ndGgtMV07cmV0dXJuIGMuZXZhbGRDb25kaXRpb24/Yy5jb25kaXRpb24mJiFjLmNvbmRpdGlvbi5ldmFsKG5ldyBoLkV2YWwoYixiLmZyYW1lcykpPyExOiEwOiExfSxsLnByb3RvdHlwZS5yZXNldENhY2hlPWZ1bmN0aW9uKCl7dGhpcy5fcnVsZXNldHM9bnVsbCx0aGlzLl92YXJpYWJsZXM9bnVsbCx0aGlzLl9sb29rdXBzPXt9fSxsLnByb3RvdHlwZS52YXJpYWJsZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFyaWFibGVzfHwodGhpcy5fdmFyaWFibGVzPXRoaXMucnVsZXM/dGhpcy5ydWxlcy5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtpZihiIGluc3RhbmNlb2YgZCYmYi52YXJpYWJsZT09PSEwJiYoYVtiLm5hbWVdPWIpLFwiSW1wb3J0XCI9PT1iLnR5cGUmJmIucm9vdCYmYi5yb290LnZhcmlhYmxlcyl7dmFyIGM9Yi5yb290LnZhcmlhYmxlcygpO2Zvcih2YXIgZSBpbiBjKWMuaGFzT3duUHJvcGVydHkoZSkmJihhW2VdPWNbZV0pfXJldHVybiBhfSx7fSk6e30pLHRoaXMuX3ZhcmlhYmxlc30sbC5wcm90b3R5cGUudmFyaWFibGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudmFyaWFibGVzKClbYV19LGwucHJvdG90eXBlLnJ1bGVzZXRzPWZ1bmN0aW9uKCl7aWYoIXRoaXMucnVsZXMpcmV0dXJuW107dmFyIGEsYixjPVtdLGQ9dGhpcy5ydWxlcyxlPWQubGVuZ3RoO2ZvcihhPTA7ZT5hO2ErKyliPWRbYV0sYi5pc1J1bGVzZXQmJmMucHVzaChiKTtyZXR1cm4gY30sbC5wcm90b3R5cGUucHJlcGVuZFJ1bGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ydWxlcztiP2IudW5zaGlmdChhKTp0aGlzLnJ1bGVzPVthXX0sbC5wcm90b3R5cGUuZmluZD1mdW5jdGlvbihhLGIsYyl7Yj1ifHx0aGlzO3ZhciBkLGYsZz1bXSxoPWEudG9DU1MoKTtyZXR1cm4gaCBpbiB0aGlzLl9sb29rdXBzP3RoaXMuX2xvb2t1cHNbaF06KHRoaXMucnVsZXNldHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGgpe2lmKGghPT1iKWZvcih2YXIgaT0wO2guc2VsZWN0b3JzLmxlbmd0aD5pO2krKylpZihkPWEubWF0Y2goaC5zZWxlY3RvcnNbaV0pKXtpZihhLmVsZW1lbnRzLmxlbmd0aD5kKXtpZighY3x8YyhoKSl7Zj1oLmZpbmQobmV3IGUoYS5lbGVtZW50cy5zbGljZShkKSksYixjKTtmb3IodmFyIGo9MDtmLmxlbmd0aD5qOysrailmW2pdLnBhdGgucHVzaChoKTtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShnLGYpfX1lbHNlIGcucHVzaCh7cnVsZTpoLHBhdGg6W119KTticmVha319KSx0aGlzLl9sb29rdXBzW2hdPWcsZyl9LGwucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhLmlzUnVsZXNldExpa2U/YS5pc1J1bGVzZXRMaWtlOlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaXNSdWxlc2V0TGlrZT9hLmlzUnVsZXNldExpa2UoKTohMX12YXIgZCxlLGYsZyxoLGk9W10saj1bXTthLnRhYkxldmVsPWEudGFiTGV2ZWx8fDAsdGhpcy5yb290fHxhLnRhYkxldmVsKys7dmFyIGwsbT1hLmNvbXByZXNzP1wiXCI6QXJyYXkoYS50YWJMZXZlbCsxKS5qb2luKFwiICBcIiksbj1hLmNvbXByZXNzP1wiXCI6QXJyYXkoYS50YWJMZXZlbCkuam9pbihcIiAgXCIpLG89MCxwPTA7Zm9yKGQ9MDt0aGlzLnJ1bGVzLmxlbmd0aD5kO2QrKylnPXRoaXMucnVsZXNbZF0sXCJDb21tZW50XCI9PT1nLnR5cGU/KHA9PT1kJiZwKyssai5wdXNoKGcpKTpnLmlzQ2hhcnNldCYmZy5pc0NoYXJzZXQoKT8oai5zcGxpY2UobywwLGcpLG8rKyxwKyspOlwiSW1wb3J0XCI9PT1nLnR5cGU/KGouc3BsaWNlKHAsMCxnKSxwKyspOmoucHVzaChnKTtpZihqPWkuY29uY2F0KGopLCF0aGlzLnJvb3Qpe2Y9ayhhLHRoaXMsbiksZiYmKGIuYWRkKGYpLGIuYWRkKG4pKTt2YXIgcSxyPXRoaXMucGF0aHMscz1yLmxlbmd0aDtmb3IobD1hLmNvbXByZXNzP1wiLFwiOlwiLFxcblwiK24sZD0wO3M+ZDtkKyspaWYoaD1yW2RdLHE9aC5sZW5ndGgpZm9yKGQ+MCYmYi5hZGQobCksYS5maXJzdFNlbGVjdG9yPSEwLGhbMF0uZ2VuQ1NTKGEsYiksYS5maXJzdFNlbGVjdG9yPSExLGU9MTtxPmU7ZSsrKWhbZV0uZ2VuQ1NTKGEsYik7Yi5hZGQoKGEuY29tcHJlc3M/XCJ7XCI6XCIge1xcblwiKSttKX1mb3IoZD0wO2oubGVuZ3RoPmQ7ZCsrKXtnPWpbZF0sZCsxPT09ai5sZW5ndGgmJihhLmxhc3RSdWxlPSEwKTt2YXIgdD1hLmxhc3RSdWxlO2MoZykmJihhLmxhc3RSdWxlPSExKSxnLmdlbkNTUz9nLmdlbkNTUyhhLGIpOmcudmFsdWUmJmIuYWRkKGcudmFsdWUudG9TdHJpbmcoKSksYS5sYXN0UnVsZT10LGEubGFzdFJ1bGU/YS5sYXN0UnVsZT0hMTpiLmFkZChhLmNvbXByZXNzP1wiXCI6XCJcXG5cIittKX10aGlzLnJvb3R8fChiLmFkZChhLmNvbXByZXNzP1wifVwiOlwiXFxuXCIrbitcIn1cIiksYS50YWJMZXZlbC0tKSxiLmlzRW1wdHkoKXx8YS5jb21wcmVzc3x8IXRoaXMuZmlyc3RSb290fHxiLmFkZChcIlxcblwiKX0sbC5wcm90b3R5cGUubWFya1JlZmVyZW5jZWQ9ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLnNlbGVjdG9ycylmb3IoYT0wO3RoaXMuc2VsZWN0b3JzLmxlbmd0aD5hO2ErKyl0aGlzLnNlbGVjdG9yc1thXS5tYXJrUmVmZXJlbmNlZCgpO2lmKHRoaXMucnVsZXMpZm9yKGE9MDt0aGlzLnJ1bGVzLmxlbmd0aD5hO2ErKyl0aGlzLnJ1bGVzW2FdLm1hcmtSZWZlcmVuY2VkJiZ0aGlzLnJ1bGVzW2FdLm1hcmtSZWZlcmVuY2VkKCl9LGwucHJvdG90eXBlLmdldElzUmVmZXJlbmNlZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkO2lmKHRoaXMucGF0aHMpZm9yKGE9MDt0aGlzLnBhdGhzLmxlbmd0aD5hO2ErKylmb3IoYz10aGlzLnBhdGhzW2FdLGI9MDtjLmxlbmd0aD5iO2IrKylpZihjW2JdLmdldElzUmVmZXJlbmNlZCYmY1tiXS5nZXRJc1JlZmVyZW5jZWQoKSlyZXR1cm4hMDtpZih0aGlzLnNlbGVjdG9ycylmb3IoYT0wO3RoaXMuc2VsZWN0b3JzLmxlbmd0aD5hO2ErKylpZihkPXRoaXMuc2VsZWN0b3JzW2FdLGQuZ2V0SXNSZWZlcmVuY2VkJiZkLmdldElzUmVmZXJlbmNlZCgpKXJldHVybiEwO3JldHVybiExfSxsLnByb3RvdHlwZS5qb2luU2VsZWN0b3JzPWZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MDtjLmxlbmd0aD5kO2QrKyl0aGlzLmpvaW5TZWxlY3RvcihhLGIsY1tkXSl9LGwucHJvdG90eXBlLmpvaW5TZWxlY3Rvcj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3ZhciBjLGQ7aWYoMD09PWEubGVuZ3RoKWM9bmV3IGcoYVswXSk7ZWxzZXt2YXIgaD1bXTtmb3IoZD0wO2EubGVuZ3RoPmQ7ZCsrKWgucHVzaChuZXcgZihudWxsLGFbZF0sYi5pbmRleCxiLmN1cnJlbnRGaWxlSW5mbykpO2M9bmV3IGcobmV3IGUoaCkpfXJldHVybiBjfWZ1bmN0aW9uIGgoYSxiKXt2YXIgYyxkO3JldHVybiBjPW5ldyBmKG51bGwsYSxiLmluZGV4LGIuY3VycmVudEZpbGVJbmZvKSxkPW5ldyBlKFtjXSl9ZnVuY3Rpb24gaShhLGIsYyl7ZnVuY3Rpb24gZShhKXt2YXIgYjtyZXR1cm5cIlBhcmVuXCIhPT1hLnZhbHVlLnR5cGU/bnVsbDooYj1hLnZhbHVlLnZhbHVlLFwiU2VsZWN0b3JcIiE9PWIudHlwZT9udWxsOmIpfXZhciBnLG0sbixvLHAscSxyLHMsdCx1LHY9ITE7Zm9yKG89W10scD1bW11dLGc9MDtjLmVsZW1lbnRzLmxlbmd0aD5nO2crKylpZihzPWMuZWxlbWVudHNbZ10sXCImXCIhPT1zLnZhbHVlKXt2YXIgdz1lKHMpO2lmKG51bGwhPXcpe2wobyxwKTt2YXIgeCx5PVtdLHo9W107Zm9yKHg9aSh5LGIsdyksdj12fHx4LG49MDt5Lmxlbmd0aD5uO24rKyl7dmFyIEE9aChkKHlbbl0scykscyk7ayhwLFtBXSxzLGMseil9cD16LG89W119ZWxzZSBvLnB1c2gocyl9ZWxzZXtmb3Iodj0hMCxxPVtdLGwobyxwKSxtPTA7cC5sZW5ndGg+bTttKyspaWYocj1wW21dLDA9PT1iLmxlbmd0aClyLmxlbmd0aD4wJiZyWzBdLmVsZW1lbnRzLnB1c2gobmV3IGYocy5jb21iaW5hdG9yLFwiXCIscy5pbmRleCxzLmN1cnJlbnRGaWxlSW5mbykpLHEucHVzaChyKTtlbHNlIGZvcihuPTA7Yi5sZW5ndGg+bjtuKyspe3ZhciBCPWoocixiW25dLHMsYyk7cS5wdXNoKEIpfXA9cSxvPVtdfWZvcihsKG8scCksZz0wO3AubGVuZ3RoPmc7ZysrKXQ9cFtnXS5sZW5ndGgsdD4wJiYoYS5wdXNoKHBbZ10pLHU9cFtnXVt0LTFdLHBbZ11bdC0xXT11LmNyZWF0ZURlcml2ZWQodS5lbGVtZW50cyxjLmV4dGVuZExpc3QpKTtyZXR1cm4gdn1mdW5jdGlvbiBqKGEsYixjLGQpe3ZhciBlLGcsaDtpZihlPVtdLGEubGVuZ3RoPjA/KGU9YS5zbGljZSgwKSxnPWUucG9wKCksaD1kLmNyZWF0ZURlcml2ZWQoZy5lbGVtZW50cy5zbGljZSgwKSkpOmg9ZC5jcmVhdGVEZXJpdmVkKFtdKSxiLmxlbmd0aD4wKXt2YXIgaT1jLmNvbWJpbmF0b3Isaj1iWzBdLmVsZW1lbnRzWzBdO2kuZW1wdHlPcldoaXRlc3BhY2UmJiFqLmNvbWJpbmF0b3IuZW1wdHlPcldoaXRlc3BhY2UmJihpPWouY29tYmluYXRvciksaC5lbGVtZW50cy5wdXNoKG5ldyBmKGksai52YWx1ZSxjLmluZGV4LGMuY3VycmVudEZpbGVJbmZvKSksaC5lbGVtZW50cz1oLmVsZW1lbnRzLmNvbmNhdChiWzBdLmVsZW1lbnRzLnNsaWNlKDEpKX1yZXR1cm4gMCE9PWguZWxlbWVudHMubGVuZ3RoJiZlLnB1c2goaCksYi5sZW5ndGg+MSYmKGU9ZS5jb25jYXQoYi5zbGljZSgxKSkpLGV9ZnVuY3Rpb24gayhhLGIsYyxkLGUpe3ZhciBmO2ZvcihmPTA7YS5sZW5ndGg+ZjtmKyspe3ZhciBnPWooYVtmXSxiLGMsZCk7ZS5wdXNoKGcpfXJldHVybiBlfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYyxkO2lmKDAhPT1hLmxlbmd0aCl7aWYoMD09PWIubGVuZ3RoKXJldHVybiB2b2lkIGIucHVzaChbbmV3IGUoYSldKTtmb3IoYz0wO2IubGVuZ3RoPmM7YysrKWQ9YltjXSxkLmxlbmd0aD4wP2RbZC5sZW5ndGgtMV09ZFtkLmxlbmd0aC0xXS5jcmVhdGVEZXJpdmVkKGRbZC5sZW5ndGgtMV0uZWxlbWVudHMuY29uY2F0KGEpKTpkLnB1c2gobmV3IGUoYSkpfX12YXIgbSxuLG87aWYobj1bXSxvPWkobixiLGMpLCFvKWlmKGIubGVuZ3RoPjApZm9yKG49W10sbT0wO2IubGVuZ3RoPm07bSsrKW4ucHVzaChiW21dLmNvbmNhdChjKSk7ZWxzZSBuPVtbY11dO2ZvcihtPTA7bi5sZW5ndGg+bTttKyspYS5wdXNoKG5bbV0pfSxiLmV4cG9ydHM9bH0se1wiLi4vY29udGV4dHNcIjoxMCxcIi4uL2Z1bmN0aW9ucy9kZWZhdWx0XCI6MTksXCIuLi9mdW5jdGlvbnMvZnVuY3Rpb24tcmVnaXN0cnlcIjoyMSxcIi4vZGVidWctaW5mb1wiOjUyLFwiLi9lbGVtZW50XCI6NTYsXCIuL25vZGVcIjo2OCxcIi4vcGFyZW5cIjo3MCxcIi4vcnVsZVwiOjcyLFwiLi9zZWxlY3RvclwiOjc1fV0sNzU6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuL2VsZW1lbnRcIiksZT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtZW50cz1hLHRoaXMuZXh0ZW5kTGlzdD1iLHRoaXMuY29uZGl0aW9uPWMsdGhpcy5jdXJyZW50RmlsZUluZm89ZXx8e30sdGhpcy5pc1JlZmVyZW5jZWQ9ZixjfHwodGhpcy5ldmFsZENvbmRpdGlvbj0hMCl9O2UucHJvdG90eXBlPW5ldyBjLGUucHJvdG90eXBlLnR5cGU9XCJTZWxlY3RvclwiLGUucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLmVsZW1lbnRzJiYodGhpcy5lbGVtZW50cz1hLnZpc2l0QXJyYXkodGhpcy5lbGVtZW50cykpLHRoaXMuZXh0ZW5kTGlzdCYmKHRoaXMuZXh0ZW5kTGlzdD1hLnZpc2l0QXJyYXkodGhpcy5leHRlbmRMaXN0KSksdGhpcy5jb25kaXRpb24mJih0aGlzLmNvbmRpdGlvbj1hLnZpc2l0KHRoaXMuY29uZGl0aW9uKSl9LGUucHJvdG90eXBlLmNyZWF0ZURlcml2ZWQ9ZnVuY3Rpb24oYSxiLGMpe2M9bnVsbCE9Yz9jOnRoaXMuZXZhbGRDb25kaXRpb247dmFyIGQ9bmV3IGUoYSxifHx0aGlzLmV4dGVuZExpc3QsbnVsbCx0aGlzLmluZGV4LHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMuaXNSZWZlcmVuY2VkKTtyZXR1cm4gZC5ldmFsZENvbmRpdGlvbj1jLGQubWVkaWFFbXB0eT10aGlzLm1lZGlhRW1wdHksZH0sZS5wcm90b3R5cGUuY3JlYXRlRW1wdHlTZWxlY3RvcnM9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZChcIlwiLFwiJlwiLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pLGI9W25ldyBlKFthXSxudWxsLG51bGwsdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbyldO3JldHVybiBiWzBdLm1lZGlhRW1wdHk9ITAsYn0sZS5wcm90b3R5cGUubWF0Y2g9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMuZWxlbWVudHMsZT1kLmxlbmd0aDtpZihhLkNhY2hlRWxlbWVudHMoKSxiPWEuX2VsZW1lbnRzLmxlbmd0aCwwPT09Ynx8Yj5lKXJldHVybiAwO2ZvcihjPTA7Yj5jO2MrKylpZihkW2NdLnZhbHVlIT09YS5fZWxlbWVudHNbY10pcmV0dXJuIDA7cmV0dXJuIGJ9LGUucHJvdG90eXBlLkNhY2hlRWxlbWVudHM9ZnVuY3Rpb24oKXtpZighdGhpcy5fZWxlbWVudHMpe3ZhciBhPXRoaXMuZWxlbWVudHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbWJpbmF0b3IudmFsdWUrKGEudmFsdWUudmFsdWV8fGEudmFsdWUpfSkuam9pbihcIlwiKS5tYXRjaCgvWywmI1xcKlxcLlxcdy1dKFtcXHctXXwoXFxcXC4pKSovZyk7YT9cIiZcIj09PWFbMF0mJmEuc2hpZnQoKTphPVtdLHRoaXMuX2VsZW1lbnRzPWF9fSxlLnByb3RvdHlwZS5pc0p1c3RQYXJlbnRTZWxlY3Rvcj1mdW5jdGlvbigpe3JldHVybiF0aGlzLm1lZGlhRW1wdHkmJjE9PT10aGlzLmVsZW1lbnRzLmxlbmd0aCYmXCImXCI9PT10aGlzLmVsZW1lbnRzWzBdLnZhbHVlJiYoXCIgXCI9PT10aGlzLmVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWV8fFwiXCI9PT10aGlzLmVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWUpfSxlLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29uZGl0aW9uJiZ0aGlzLmNvbmRpdGlvbi5ldmFsKGEpLGM9dGhpcy5lbGVtZW50cyxkPXRoaXMuZXh0ZW5kTGlzdDtyZXR1cm4gYz1jJiZjLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYi5ldmFsKGEpfSksZD1kJiZkLm1hcChmdW5jdGlvbihiKXtyZXR1cm4gYi5ldmFsKGEpfSksdGhpcy5jcmVhdGVEZXJpdmVkKGMsZCxiKX0sZS5wcm90b3R5cGUuZ2VuQ1NTPWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtpZihhJiZhLmZpcnN0U2VsZWN0b3J8fFwiXCIhPT10aGlzLmVsZW1lbnRzWzBdLmNvbWJpbmF0b3IudmFsdWV8fGIuYWRkKFwiIFwiLHRoaXMuY3VycmVudEZpbGVJbmZvLHRoaXMuaW5kZXgpLCF0aGlzLl9jc3MpZm9yKGM9MDt0aGlzLmVsZW1lbnRzLmxlbmd0aD5jO2MrKylkPXRoaXMuZWxlbWVudHNbY10sZC5nZW5DU1MoYSxiKX0sZS5wcm90b3R5cGUubWFya1JlZmVyZW5jZWQ9ZnVuY3Rpb24oKXt0aGlzLmlzUmVmZXJlbmNlZD0hMH0sZS5wcm90b3R5cGUuZ2V0SXNSZWZlcmVuY2VkPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuY3VycmVudEZpbGVJbmZvLnJlZmVyZW5jZXx8dGhpcy5pc1JlZmVyZW5jZWR9LGUucHJvdG90eXBlLmdldElzT3V0cHV0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXZhbGRDb25kaXRpb259LGIuZXhwb3J0cz1lfSx7XCIuL2VsZW1lbnRcIjo1NixcIi4vbm9kZVwiOjY4fV0sNzY6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWZ1bmN0aW9uKGEpe3RoaXMudmFsdWU9YX07ZC5wcm90b3R5cGU9bmV3IGMsZC5wcm90b3R5cGUudHlwZT1cIlVuaWNvZGVEZXNjcmlwdG9yXCIsYi5leHBvcnRzPWR9LHtcIi4vbm9kZVwiOjY4fV0sNzc6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWEoXCIuLi9kYXRhL3VuaXQtY29udmVyc2lvbnNcIiksZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5udW1lcmF0b3I9YT9hLnNsaWNlKDApLnNvcnQoKTpbXSx0aGlzLmRlbm9taW5hdG9yPWI/Yi5zbGljZSgwKS5zb3J0KCk6W10sYz90aGlzLmJhY2t1cFVuaXQ9YzphJiZhLmxlbmd0aCYmKHRoaXMuYmFja3VwVW5pdD1hWzBdKX07ZS5wcm90b3R5cGU9bmV3IGMsZS5wcm90b3R5cGUudHlwZT1cIlVuaXRcIixlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLm51bWVyYXRvci5zbGljZSgwKSx0aGlzLmRlbm9taW5hdG9yLnNsaWNlKDApLHRoaXMuYmFja3VwVW5pdCl9LGUucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe3ZhciBjPWEmJmEuc3RyaWN0VW5pdHM7MT09PXRoaXMubnVtZXJhdG9yLmxlbmd0aD9iLmFkZCh0aGlzLm51bWVyYXRvclswXSk6IWMmJnRoaXMuYmFja3VwVW5pdD9iLmFkZCh0aGlzLmJhY2t1cFVuaXQpOiFjJiZ0aGlzLmRlbm9taW5hdG9yLmxlbmd0aCYmYi5hZGQodGhpcy5kZW5vbWluYXRvclswXSl9LGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLm51bWVyYXRvci5qb2luKFwiKlwiKTtmb3IoYT0wO3RoaXMuZGVub21pbmF0b3IubGVuZ3RoPmE7YSsrKWIrPVwiL1wiK3RoaXMuZGVub21pbmF0b3JbYV07cmV0dXJuIGJ9LGUucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXMoYS50b1N0cmluZygpKT8wOnZvaWQgMH0sZS5wcm90b3R5cGUuaXM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpPT09YS50b1VwcGVyQ2FzZSgpfSxlLnByb3RvdHlwZS5pc0xlbmd0aD1mdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMudG9DU1MoKS5tYXRjaCgvcHh8ZW18JXxpbnxjbXxtbXxwY3xwdHxleC8pKX0sZS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5udW1lcmF0b3IubGVuZ3RoJiYwPT09dGhpcy5kZW5vbWluYXRvci5sZW5ndGh9LGUucHJvdG90eXBlLmlzU2luZ3VsYXI9ZnVuY3Rpb24oKXtyZXR1cm4gMT49dGhpcy5udW1lcmF0b3IubGVuZ3RoJiYwPT09dGhpcy5kZW5vbWluYXRvci5sZW5ndGh9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihhKXt2YXIgYjtmb3IoYj0wO3RoaXMubnVtZXJhdG9yLmxlbmd0aD5iO2IrKyl0aGlzLm51bWVyYXRvcltiXT1hKHRoaXMubnVtZXJhdG9yW2JdLCExKTtmb3IoYj0wO3RoaXMuZGVub21pbmF0b3IubGVuZ3RoPmI7YisrKXRoaXMuZGVub21pbmF0b3JbYl09YSh0aGlzLmRlbm9taW5hdG9yW2JdLCEwKX0sZS5wcm90b3R5cGUudXNlZFVuaXRzPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXt9O2I9ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFzT3duUHJvcGVydHkoYikmJiFjW2VdJiYoY1tlXT1iKSxifTtmb3IodmFyIGUgaW4gZClkLmhhc093blByb3BlcnR5KGUpJiYoYT1kW2VdLHRoaXMubWFwKGIpKTtyZXR1cm4gY30sZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dmFyIGEsYixjPXt9O2ZvcihiPTA7dGhpcy5udW1lcmF0b3IubGVuZ3RoPmI7YisrKWE9dGhpcy5udW1lcmF0b3JbYl0sY1thXT0oY1thXXx8MCkrMTtmb3IoYj0wO3RoaXMuZGVub21pbmF0b3IubGVuZ3RoPmI7YisrKWE9dGhpcy5kZW5vbWluYXRvcltiXSxjW2FdPShjW2FdfHwwKS0xO3RoaXMubnVtZXJhdG9yPVtdLHRoaXMuZGVub21pbmF0b3I9W107Zm9yKGEgaW4gYylpZihjLmhhc093blByb3BlcnR5KGEpKXt2YXIgZD1jW2FdO2lmKGQ+MClmb3IoYj0wO2Q+YjtiKyspdGhpcy5udW1lcmF0b3IucHVzaChhKTtlbHNlIGlmKDA+ZClmb3IoYj0wOy1kPmI7YisrKXRoaXMuZGVub21pbmF0b3IucHVzaChhKX10aGlzLm51bWVyYXRvci5zb3J0KCksdGhpcy5kZW5vbWluYXRvci5zb3J0KCl9LGIuZXhwb3J0cz1lfSx7XCIuLi9kYXRhL3VuaXQtY29udmVyc2lvbnNcIjoxMyxcIi4vbm9kZVwiOjY4fV0sNzg6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMudmFsdWU9YSx0aGlzLmN1cnJlbnRGaWxlSW5mbz1jLHRoaXMuaW5kZXg9Yix0aGlzLmlzRXZhbGQ9ZH07ZC5wcm90b3R5cGU9bmV3IGMsZC5wcm90b3R5cGUudHlwZT1cIlVybFwiLGQucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlPWEudmlzaXQodGhpcy52YWx1ZSl9LGQucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe2IuYWRkKFwidXJsKFwiKSx0aGlzLnZhbHVlLmdlbkNTUyhhLGIpLGIuYWRkKFwiKVwiKX0sZC5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMudmFsdWUuZXZhbChhKTtpZighdGhpcy5pc0V2YWxkJiYoYj10aGlzLmN1cnJlbnRGaWxlSW5mbyYmdGhpcy5jdXJyZW50RmlsZUluZm8ucm9vdHBhdGgsYiYmXCJzdHJpbmdcIj09dHlwZW9mIGMudmFsdWUmJmEuaXNQYXRoUmVsYXRpdmUoYy52YWx1ZSkmJihjLnF1b3RlfHwoYj1iLnJlcGxhY2UoL1tcXChcXCknXCJcXHNdL2csZnVuY3Rpb24oYSl7cmV0dXJuXCJcXFxcXCIrYX0pKSxjLnZhbHVlPWIrYy52YWx1ZSksYy52YWx1ZT1hLm5vcm1hbGl6ZVBhdGgoYy52YWx1ZSksYS51cmxBcmdzJiYhYy52YWx1ZS5tYXRjaCgvXlxccypkYXRhOi8pKSl7dmFyIGU9LTE9PT1jLnZhbHVlLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiLGY9ZSthLnVybEFyZ3M7LTEhPT1jLnZhbHVlLmluZGV4T2YoXCIjXCIpP2MudmFsdWU9Yy52YWx1ZS5yZXBsYWNlKFwiI1wiLGYrXCIjXCIpOmMudmFsdWUrPWZ9cmV0dXJuIG5ldyBkKGMsdGhpcy5pbmRleCx0aGlzLmN1cnJlbnRGaWxlSW5mbywhMCl9LGIuZXhwb3J0cz1kfSx7XCIuL25vZGVcIjo2OH1dLDc5OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL25vZGVcIiksZD1mdW5jdGlvbihhKXtpZih0aGlzLnZhbHVlPWEsIWEpdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgcmVxdWlyZXMgYW4gYXJyYXkgYXJndW1lbnRcIil9O2QucHJvdG90eXBlPW5ldyBjLGQucHJvdG90eXBlLnR5cGU9XCJWYWx1ZVwiLGQucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihhKXt0aGlzLnZhbHVlJiYodGhpcy52YWx1ZT1hLnZpc2l0QXJyYXkodGhpcy52YWx1ZSkpfSxkLnByb3RvdHlwZS5ldmFsPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09dGhpcy52YWx1ZS5sZW5ndGg/dGhpcy52YWx1ZVswXS5ldmFsKGEpOm5ldyBkKHRoaXMudmFsdWUubWFwKGZ1bmN0aW9uKGIpe3JldHVybiBiLmV2YWwoYSl9KSl9LGQucHJvdG90eXBlLmdlbkNTUz1mdW5jdGlvbihhLGIpe3ZhciBjO2ZvcihjPTA7dGhpcy52YWx1ZS5sZW5ndGg+YztjKyspdGhpcy52YWx1ZVtjXS5nZW5DU1MoYSxiKSx0aGlzLnZhbHVlLmxlbmd0aD5jKzEmJmIuYWRkKGEmJmEuY29tcHJlc3M/XCIsXCI6XCIsIFwiKX0sYi5leHBvcnRzPWR9LHtcIi4vbm9kZVwiOjY4fV0sODA6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vbm9kZVwiKSxkPWZ1bmN0aW9uKGEsYixjKXt0aGlzLm5hbWU9YSx0aGlzLmluZGV4PWIsdGhpcy5jdXJyZW50RmlsZUluZm89Y3x8e319O2QucHJvdG90eXBlPW5ldyBjLGQucHJvdG90eXBlLnR5cGU9XCJWYXJpYWJsZVwiLGQucHJvdG90eXBlLmV2YWw9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLm5hbWU7aWYoMD09PWMuaW5kZXhPZihcIkBAXCIpJiYoYz1cIkBcIituZXcgZChjLnNsaWNlKDEpLHRoaXMuaW5kZXgsdGhpcy5jdXJyZW50RmlsZUluZm8pLmV2YWwoYSkudmFsdWUpLHRoaXMuZXZhbHVhdGluZyl0aHJvd3t0eXBlOlwiTmFtZVwiLG1lc3NhZ2U6XCJSZWN1cnNpdmUgdmFyaWFibGUgZGVmaW5pdGlvbiBmb3IgXCIrYyxmaWxlbmFtZTp0aGlzLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZSxpbmRleDp0aGlzLmluZGV4fTtpZih0aGlzLmV2YWx1YXRpbmc9ITAsYj10aGlzLmZpbmQoYS5mcmFtZXMsZnVuY3Rpb24oYil7dmFyIGQ9Yi52YXJpYWJsZShjKTtpZihkKXtpZihkLmltcG9ydGFudCl7dmFyIGU9YS5pbXBvcnRhbnRTY29wZVthLmltcG9ydGFudFNjb3BlLmxlbmd0aC0xXTtlLmltcG9ydGFudD1kLmltcG9ydGFudH1yZXR1cm4gZC52YWx1ZS5ldmFsKGEpfX0pKXJldHVybiB0aGlzLmV2YWx1YXRpbmc9ITEsYjt0aHJvd3t0eXBlOlwiTmFtZVwiLG1lc3NhZ2U6XCJ2YXJpYWJsZSBcIitjK1wiIGlzIHVuZGVmaW5lZFwiLGZpbGVuYW1lOnRoaXMuY3VycmVudEZpbGVJbmZvLmZpbGVuYW1lLGluZGV4OnRoaXMuaW5kZXh9fSxkLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MDthLmxlbmd0aD5kO2QrKylpZihjPWIuY2FsbChhLGFbZF0pKXJldHVybiBjO3JldHVybiBudWxsfSxiLmV4cG9ydHM9ZH0se1wiLi9ub2RlXCI6Njh9XSw4MTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9e2dldExvY2F0aW9uOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWErMSxkPW51bGwsZT0tMTstLWM+PTAmJlwiXFxuXCIhPT1iLmNoYXJBdChjKTspZSsrO3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBhJiYoZD0oYi5zbGljZSgwLGEpLm1hdGNoKC9cXG4vZyl8fFwiXCIpLmxlbmd0aCkse2xpbmU6ZCxjb2x1bW46ZX19fX0se31dLDgyOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuLi90cmVlXCIpLGQ9YShcIi4vdmlzaXRvclwiKSxlPWEoXCIuLi9sb2dnZXJcIiksZj1mdW5jdGlvbigpe3RoaXMuX3Zpc2l0b3I9bmV3IGQodGhpcyksdGhpcy5jb250ZXh0cz1bXSx0aGlzLmFsbEV4dGVuZHNTdGFjaz1bW11dfTtmLnByb3RvdHlwZT17cnVuOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuX3Zpc2l0b3IudmlzaXQoYSksYS5hbGxFeHRlbmRzPXRoaXMuYWxsRXh0ZW5kc1N0YWNrWzBdLGF9LHZpc2l0UnVsZTpmdW5jdGlvbihhLGIpe2IudmlzaXREZWVwZXI9ITF9LHZpc2l0TWl4aW5EZWZpbml0aW9uOmZ1bmN0aW9uKGEsYil7Yi52aXNpdERlZXBlcj0hMX0sdmlzaXRSdWxlc2V0OmZ1bmN0aW9uKGEpe2lmKCFhLnJvb3Qpe3ZhciBiLGQsZSxmLGc9W10saD1hLnJ1bGVzLGk9aD9oLmxlbmd0aDowO2ZvcihiPTA7aT5iO2IrKylhLnJ1bGVzW2JdaW5zdGFuY2VvZiBjLkV4dGVuZCYmKGcucHVzaChoW2JdKSxhLmV4dGVuZE9uRXZlcnlQYXRoPSEwKTt2YXIgaj1hLnBhdGhzO2ZvcihiPTA7ai5sZW5ndGg+YjtiKyspe3ZhciBrPWpbYl0sbD1rW2subGVuZ3RoLTFdLG09bC5leHRlbmRMaXN0O2ZvcihmPW0/bS5zbGljZSgwKS5jb25jYXQoZyk6ZyxmJiYoZj1mLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5jbG9uZSgpfSkpLGQ9MDtmLmxlbmd0aD5kO2QrKyl0aGlzLmZvdW5kRXh0ZW5kcz0hMCxlPWZbZF0sZS5maW5kU2VsZlNlbGVjdG9ycyhrKSxlLnJ1bGVzZXQ9YSwwPT09ZCYmKGUuZmlyc3RFeHRlbmRPblRoaXNTZWxlY3RvclBhdGg9ITApLHRoaXMuYWxsRXh0ZW5kc1N0YWNrW3RoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aC0xXS5wdXNoKGUpfXRoaXMuY29udGV4dHMucHVzaChhLnNlbGVjdG9ycyl9fSx2aXNpdFJ1bGVzZXRPdXQ6ZnVuY3Rpb24oYSl7YS5yb290fHwodGhpcy5jb250ZXh0cy5sZW5ndGg9dGhpcy5jb250ZXh0cy5sZW5ndGgtMSl9LHZpc2l0TWVkaWE6ZnVuY3Rpb24oYSl7YS5hbGxFeHRlbmRzPVtdLHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2goYS5hbGxFeHRlbmRzKX0sdmlzaXRNZWRpYU91dDpmdW5jdGlvbigpe3RoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aD10aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGgtMX0sdmlzaXREaXJlY3RpdmU6ZnVuY3Rpb24oYSl7YS5hbGxFeHRlbmRzPVtdLHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2goYS5hbGxFeHRlbmRzKX0sdmlzaXREaXJlY3RpdmVPdXQ6ZnVuY3Rpb24oKXt0aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGg9dGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoLTF9fTt2YXIgZz1mdW5jdGlvbigpe3RoaXMuX3Zpc2l0b3I9bmV3IGQodGhpcyl9O2cucHJvdG90eXBlPXtydW46ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGY7aWYodGhpcy5leHRlbmRJbmRpY2llcz17fSxiLnJ1bihhKSwhYi5mb3VuZEV4dGVuZHMpcmV0dXJuIGE7YS5hbGxFeHRlbmRzPWEuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5kb0V4dGVuZENoYWluaW5nKGEuYWxsRXh0ZW5kcyxhLmFsbEV4dGVuZHMpKSx0aGlzLmFsbEV4dGVuZHNTdGFjaz1bYS5hbGxFeHRlbmRzXTt2YXIgYz10aGlzLl92aXNpdG9yLnZpc2l0KGEpO3JldHVybiB0aGlzLmNoZWNrRXh0ZW5kc0Zvck5vbk1hdGNoZWQoYS5hbGxFeHRlbmRzKSxjfSxjaGVja0V4dGVuZHNGb3JOb25NYXRjaGVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZXh0ZW5kSW5kaWNpZXM7YS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIWEuaGFzRm91bmRNYXRjaGVzJiYxPT1hLnBhcmVudF9pZHMubGVuZ3RofSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYz1cIl91bmtub3duX1wiO3RyeXtjPWEuc2VsZWN0b3IudG9DU1Moe30pfWNhdGNoKGQpe31iW2EuaW5kZXgrXCIgXCIrY118fChiW2EuaW5kZXgrXCIgXCIrY109ITAsZS53YXJuKFwiZXh0ZW5kICdcIitjK1wiJyBoYXMgbm8gbWF0Y2hlc1wiKSl9KX0sZG9FeHRlbmRDaGFpbmluZzpmdW5jdGlvbihhLGIsZCl7dmFyIGUsZixnLGgsaSxqLGssbCxtPVtdLG49dGhpcztmb3IoZD1kfHwwLGU9MDthLmxlbmd0aD5lO2UrKylmb3IoZj0wO2IubGVuZ3RoPmY7ZisrKWo9YVtlXSxrPWJbZl0sai5wYXJlbnRfaWRzLmluZGV4T2Yoay5vYmplY3RfaWQpPj0wfHwoaT1bay5zZWxmU2VsZWN0b3JzWzBdXSxnPW4uZmluZE1hdGNoKGosaSksZy5sZW5ndGgmJihqLmhhc0ZvdW5kTWF0Y2hlcz0hMCxqLnNlbGZTZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbihhKXtoPW4uZXh0ZW5kU2VsZWN0b3IoZyxpLGEpLGw9bmV3IGMuRXh0ZW5kKGsuc2VsZWN0b3Isay5vcHRpb24sMCksbC5zZWxmU2VsZWN0b3JzPWgsaFtoLmxlbmd0aC0xXS5leHRlbmRMaXN0PVtsXSxtLnB1c2gobCksbC5ydWxlc2V0PWsucnVsZXNldCxsLnBhcmVudF9pZHM9bC5wYXJlbnRfaWRzLmNvbmNhdChrLnBhcmVudF9pZHMsai5wYXJlbnRfaWRzKSxrLmZpcnN0RXh0ZW5kT25UaGlzU2VsZWN0b3JQYXRoJiYobC5maXJzdEV4dGVuZE9uVGhpc1NlbGVjdG9yUGF0aD0hMCxrLnJ1bGVzZXQucGF0aHMucHVzaChoKSl9KSkpO2lmKG0ubGVuZ3RoKXtpZih0aGlzLmV4dGVuZENoYWluQ291bnQrKyxkPjEwMCl7dmFyIG89XCJ7dW5hYmxlIHRvIGNhbGN1bGF0ZX1cIixwPVwie3VuYWJsZSB0byBjYWxjdWxhdGV9XCI7dHJ5e289bVswXS5zZWxmU2VsZWN0b3JzWzBdLnRvQ1NTKCkscD1tWzBdLnNlbGVjdG9yLnRvQ1NTKCl9Y2F0Y2gocSl7fXRocm93e21lc3NhZ2U6XCJleHRlbmQgY2lyY3VsYXIgcmVmZXJlbmNlIGRldGVjdGVkLiBPbmUgb2YgdGhlIGNpcmN1bGFyIGV4dGVuZHMgaXMgY3VycmVudGx5OlwiK28rXCI6ZXh0ZW5kKFwiK3ArXCIpXCJ9fXJldHVybiBtLmNvbmNhdChuLmRvRXh0ZW5kQ2hhaW5pbmcobSxiLGQrMSkpfXJldHVybiBtfSx2aXNpdFJ1bGU6ZnVuY3Rpb24oYSxiKXtiLnZpc2l0RGVlcGVyPSExfSx2aXNpdE1peGluRGVmaW5pdGlvbjpmdW5jdGlvbihhLGIpe2IudmlzaXREZWVwZXI9ITF9LHZpc2l0U2VsZWN0b3I6ZnVuY3Rpb24oYSxiKXtiLnZpc2l0RGVlcGVyPSExfSx2aXNpdFJ1bGVzZXQ6ZnVuY3Rpb24oYSl7aWYoIWEucm9vdCl7dmFyIGIsYyxkLGUsZj10aGlzLmFsbEV4dGVuZHNTdGFja1t0aGlzLmFsbEV4dGVuZHNTdGFjay5sZW5ndGgtMV0sZz1bXSxoPXRoaXM7Zm9yKGQ9MDtmLmxlbmd0aD5kO2QrKylmb3IoYz0wO2EucGF0aHMubGVuZ3RoPmM7YysrKWlmKGU9YS5wYXRoc1tjXSwhYS5leHRlbmRPbkV2ZXJ5UGF0aCl7dmFyIGk9ZVtlLmxlbmd0aC0xXS5leHRlbmRMaXN0O2kmJmkubGVuZ3RofHwoYj10aGlzLmZpbmRNYXRjaChmW2RdLGUpLGIubGVuZ3RoJiYoZltkXS5oYXNGb3VuZE1hdGNoZXM9ITAsZltkXS5zZWxmU2VsZWN0b3JzLmZvckVhY2goZnVuY3Rpb24oYSl7Zy5wdXNoKGguZXh0ZW5kU2VsZWN0b3IoYixlLGEpKX0pKSl9YS5wYXRocz1hLnBhdGhzLmNvbmNhdChnKX19LGZpbmRNYXRjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo9dGhpcyxrPWEuc2VsZWN0b3IuZWxlbWVudHMsbD1bXSxtPVtdO2ZvcihjPTA7Yi5sZW5ndGg+YztjKyspZm9yKGQ9YltjXSxlPTA7ZC5lbGVtZW50cy5sZW5ndGg+ZTtlKyspZm9yKGY9ZC5lbGVtZW50c1tlXSwoYS5hbGxvd0JlZm9yZXx8MD09PWMmJjA9PT1lKSYmbC5wdXNoKHtwYXRoSW5kZXg6YyxpbmRleDplLG1hdGNoZWQ6MCxpbml0aWFsQ29tYmluYXRvcjpmLmNvbWJpbmF0b3J9KSxoPTA7bC5sZW5ndGg+aDtoKyspaT1sW2hdLGc9Zi5jb21iaW5hdG9yLnZhbHVlLFwiXCI9PT1nJiYwPT09ZSYmKGc9XCIgXCIpLCFqLmlzRWxlbWVudFZhbHVlc0VxdWFsKGtbaS5tYXRjaGVkXS52YWx1ZSxmLnZhbHVlKXx8aS5tYXRjaGVkPjAmJmtbaS5tYXRjaGVkXS5jb21iaW5hdG9yLnZhbHVlIT09Zz9pPW51bGw6aS5tYXRjaGVkKyssaSYmKGkuZmluaXNoZWQ9aS5tYXRjaGVkPT09ay5sZW5ndGgsaS5maW5pc2hlZCYmIWEuYWxsb3dBZnRlciYmKGQuZWxlbWVudHMubGVuZ3RoPmUrMXx8Yi5sZW5ndGg+YysxKSYmKGk9bnVsbCkpLGk/aS5maW5pc2hlZCYmKGkubGVuZ3RoPWsubGVuZ3RoLGkuZW5kUGF0aEluZGV4PWMsaS5lbmRQYXRoRWxlbWVudEluZGV4PWUrMSxsLmxlbmd0aD0wLG0ucHVzaChpKSk6KGwuc3BsaWNlKGgsMSksaC0tKTtyZXR1cm4gbX0saXNFbGVtZW50VmFsdWVzRXF1YWw6ZnVuY3Rpb24oYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYXx8XCJzdHJpbmdcIj09dHlwZW9mIGIpcmV0dXJuIGE9PT1iO2lmKGEgaW5zdGFuY2VvZiBjLkF0dHJpYnV0ZSlyZXR1cm4gYS5vcCE9PWIub3B8fGEua2V5IT09Yi5rZXk/ITE6YS52YWx1ZSYmYi52YWx1ZT8oYT1hLnZhbHVlLnZhbHVlfHxhLnZhbHVlLGI9Yi52YWx1ZS52YWx1ZXx8Yi52YWx1ZSxhPT09Yik6YS52YWx1ZXx8Yi52YWx1ZT8hMTohMDtpZihhPWEudmFsdWUsYj1iLnZhbHVlLGEgaW5zdGFuY2VvZiBjLlNlbGVjdG9yKXtpZighKGIgaW5zdGFuY2VvZiBjLlNlbGVjdG9yKXx8YS5lbGVtZW50cy5sZW5ndGghPT1iLmVsZW1lbnRzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGQ9MDthLmVsZW1lbnRzLmxlbmd0aD5kO2QrKyl7aWYoYS5lbGVtZW50c1tkXS5jb21iaW5hdG9yLnZhbHVlIT09Yi5lbGVtZW50c1tkXS5jb21iaW5hdG9yLnZhbHVlJiYoMCE9PWR8fChhLmVsZW1lbnRzW2RdLmNvbWJpbmF0b3IudmFsdWV8fFwiIFwiKSE9PShiLmVsZW1lbnRzW2RdLmNvbWJpbmF0b3IudmFsdWV8fFwiIFwiKSkpcmV0dXJuITE7aWYoIXRoaXMuaXNFbGVtZW50VmFsdWVzRXF1YWwoYS5lbGVtZW50c1tkXS52YWx1ZSxiLmVsZW1lbnRzW2RdLnZhbHVlKSlyZXR1cm4hMX1yZXR1cm4hMH1yZXR1cm4hMX0sZXh0ZW5kU2VsZWN0b3I6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGYsZyxoLGksaj0wLGs9MCxsPVtdO2ZvcihlPTA7YS5sZW5ndGg+ZTtlKyspaD1hW2VdLGY9YltoLnBhdGhJbmRleF0sZz1uZXcgYy5FbGVtZW50KGguaW5pdGlhbENvbWJpbmF0b3IsZC5lbGVtZW50c1swXS52YWx1ZSxkLmVsZW1lbnRzWzBdLmluZGV4LGQuZWxlbWVudHNbMF0uY3VycmVudEZpbGVJbmZvKSxoLnBhdGhJbmRleD5qJiZrPjAmJihsW2wubGVuZ3RoLTFdLmVsZW1lbnRzPWxbbC5sZW5ndGgtMV0uZWxlbWVudHMuY29uY2F0KGJbal0uZWxlbWVudHMuc2xpY2UoaykpLGs9MCxqKyspLGk9Zi5lbGVtZW50cy5zbGljZShrLGguaW5kZXgpLmNvbmNhdChbZ10pLmNvbmNhdChkLmVsZW1lbnRzLnNsaWNlKDEpKSxqPT09aC5wYXRoSW5kZXgmJmU+MD9sW2wubGVuZ3RoLTFdLmVsZW1lbnRzPWxbbC5sZW5ndGgtMV0uZWxlbWVudHMuY29uY2F0KGkpOihsPWwuY29uY2F0KGIuc2xpY2UoaixoLnBhdGhJbmRleCkpLGwucHVzaChuZXcgYy5TZWxlY3RvcihpKSkpLGo9aC5lbmRQYXRoSW5kZXgsaz1oLmVuZFBhdGhFbGVtZW50SW5kZXgsaz49YltqXS5lbGVtZW50cy5sZW5ndGgmJihrPTAsaisrKTtyZXR1cm4gYi5sZW5ndGg+aiYmaz4wJiYobFtsLmxlbmd0aC0xXS5lbGVtZW50cz1sW2wubGVuZ3RoLTFdLmVsZW1lbnRzLmNvbmNhdChiW2pdLmVsZW1lbnRzLnNsaWNlKGspKSxqKyspLGw9bC5jb25jYXQoYi5zbGljZShqLGIubGVuZ3RoKSl9LHZpc2l0UnVsZXNldE91dDpmdW5jdGlvbigpe30sdmlzaXRNZWRpYTpmdW5jdGlvbihhKXt2YXIgYj1hLmFsbEV4dGVuZHMuY29uY2F0KHRoaXMuYWxsRXh0ZW5kc1N0YWNrW3RoaXMuYWxsRXh0ZW5kc1N0YWNrLmxlbmd0aC0xXSk7Yj1iLmNvbmNhdCh0aGlzLmRvRXh0ZW5kQ2hhaW5pbmcoYixhLmFsbEV4dGVuZHMpKSx0aGlzLmFsbEV4dGVuZHNTdGFjay5wdXNoKGIpfSx2aXNpdE1lZGlhT3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoLTE7dGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoPWF9LHZpc2l0RGlyZWN0aXZlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYWxsRXh0ZW5kcy5jb25jYXQodGhpcy5hbGxFeHRlbmRzU3RhY2tbdGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoLTFdKTtiPWIuY29uY2F0KHRoaXMuZG9FeHRlbmRDaGFpbmluZyhiLGEuYWxsRXh0ZW5kcykpLHRoaXMuYWxsRXh0ZW5kc1N0YWNrLnB1c2goYil9LHZpc2l0RGlyZWN0aXZlT3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoLTE7dGhpcy5hbGxFeHRlbmRzU3RhY2subGVuZ3RoPWF9fSxiLmV4cG9ydHM9Z30se1wiLi4vbG9nZ2VyXCI6MzEsXCIuLi90cmVlXCI6NjAsXCIuL3Zpc2l0b3JcIjo4OH1dLDgzOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7dGhpcy5pbXBvcnRzPVtdLHRoaXMudmFyaWFibGVJbXBvcnRzPVtdLHRoaXMuX29uU2VxdWVuY2VyRW1wdHk9YSx0aGlzLl9jdXJyZW50RGVwdGg9MH1jLnByb3RvdHlwZS5hZGRJbXBvcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPXtjYWxsYmFjazphLGFyZ3M6bnVsbCxpc1JlYWR5OiExfTtyZXR1cm4gdGhpcy5pbXBvcnRzLnB1c2goYyksZnVuY3Rpb24oKXtjLmFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGMuaXNSZWFkeT0hMCxiLnRyeVJ1bigpfX0sYy5wcm90b3R5cGUuYWRkVmFyaWFibGVJbXBvcnQ9ZnVuY3Rpb24oYSl7dGhpcy52YXJpYWJsZUltcG9ydHMucHVzaChhKX0sYy5wcm90b3R5cGUudHJ5UnVuPWZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudERlcHRoKys7dHJ5e2Zvcig7Oyl7Zm9yKDt0aGlzLmltcG9ydHMubGVuZ3RoPjA7KXt2YXIgYT10aGlzLmltcG9ydHNbMF07aWYoIWEuaXNSZWFkeSlyZXR1cm47dGhpcy5pbXBvcnRzPXRoaXMuaW1wb3J0cy5zbGljZSgxKSxhLmNhbGxiYWNrLmFwcGx5KG51bGwsYS5hcmdzKX1pZigwPT09dGhpcy52YXJpYWJsZUltcG9ydHMubGVuZ3RoKWJyZWFrO3ZhciBiPXRoaXMudmFyaWFibGVJbXBvcnRzWzBdO3RoaXMudmFyaWFibGVJbXBvcnRzPXRoaXMudmFyaWFibGVJbXBvcnRzLnNsaWNlKDEpLGIoKX19ZmluYWxseXt0aGlzLl9jdXJyZW50RGVwdGgtLX0wPT09dGhpcy5fY3VycmVudERlcHRoJiZ0aGlzLl9vblNlcXVlbmNlckVtcHR5JiZ0aGlzLl9vblNlcXVlbmNlckVtcHR5KCl9LGIuZXhwb3J0cz1jfSx7fV0sODQ6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4uL2NvbnRleHRzXCIpLGQ9YShcIi4vdmlzaXRvclwiKSxlPWEoXCIuL2ltcG9ydC1zZXF1ZW5jZXJcIiksZj1mdW5jdGlvbihhLGIpe3RoaXMuX3Zpc2l0b3I9bmV3IGQodGhpcyksdGhpcy5faW1wb3J0ZXI9YSx0aGlzLl9maW5pc2g9Yix0aGlzLmNvbnRleHQ9bmV3IGMuRXZhbCx0aGlzLmltcG9ydENvdW50PTAsdGhpcy5vbmNlRmlsZURldGVjdGlvbk1hcD17fSx0aGlzLnJlY3Vyc2lvbkRldGVjdG9yPXt9LHRoaXMuX3NlcXVlbmNlcj1uZXcgZSh0aGlzLl9vblNlcXVlbmNlckVtcHR5LmJpbmQodGhpcykpfTtmLnByb3RvdHlwZT17aXNSZXBsYWNpbmc6ITEscnVuOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLl92aXNpdG9yLnZpc2l0KGEpfWNhdGNoKGIpe3RoaXMuZXJyb3I9Yn10aGlzLmlzRmluaXNoZWQ9ITAsdGhpcy5fc2VxdWVuY2VyLnRyeVJ1bigpfSxfb25TZXF1ZW5jZXJFbXB0eTpmdW5jdGlvbigpe3RoaXMuaXNGaW5pc2hlZCYmdGhpcy5fZmluaXNoKHRoaXMuZXJyb3IpfSx2aXNpdEltcG9ydDpmdW5jdGlvbihhLGIpe3ZhciBkPWEub3B0aW9ucy5pbmxpbmU7aWYoIWEuY3NzfHxkKXt2YXIgZT1uZXcgYy5FdmFsKHRoaXMuY29udGV4dCx0aGlzLmNvbnRleHQuZnJhbWVzLnNsaWNlKDApKSxmPWUuZnJhbWVzWzBdO3RoaXMuaW1wb3J0Q291bnQrKyxhLmlzVmFyaWFibGVJbXBvcnQoKT90aGlzLl9zZXF1ZW5jZXIuYWRkVmFyaWFibGVJbXBvcnQodGhpcy5wcm9jZXNzSW1wb3J0Tm9kZS5iaW5kKHRoaXMsYSxlLGYpKTp0aGlzLnByb2Nlc3NJbXBvcnROb2RlKGEsZSxmKX1iLnZpc2l0RGVlcGVyPSExfSxwcm9jZXNzSW1wb3J0Tm9kZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1hLm9wdGlvbnMuaW5saW5lO3RyeXtkPWEuZXZhbEZvckltcG9ydChiKX1jYXRjaChmKXtmLmZpbGVuYW1lfHwoZi5pbmRleD1hLmluZGV4LGYuZmlsZW5hbWU9YS5jdXJyZW50RmlsZUluZm8uZmlsZW5hbWUpLGEuY3NzPSEwLGEuZXJyb3I9Zn1pZighZHx8ZC5jc3MmJiFlKXRoaXMuaW1wb3J0Q291bnQtLSx0aGlzLmlzRmluaXNoZWQmJnRoaXMuX3NlcXVlbmNlci50cnlSdW4oKTtlbHNle2Qub3B0aW9ucy5tdWx0aXBsZSYmKGIuaW1wb3J0TXVsdGlwbGU9ITApO2Zvcih2YXIgZz12b2lkIDA9PT1kLmNzcyxoPTA7Yy5ydWxlcy5sZW5ndGg+aDtoKyspaWYoYy5ydWxlc1toXT09PWEpe2MucnVsZXNbaF09ZDticmVha312YXIgaT10aGlzLm9uSW1wb3J0ZWQuYmluZCh0aGlzLGQsYiksaj10aGlzLl9zZXF1ZW5jZXIuYWRkSW1wb3J0KGkpO3RoaXMuX2ltcG9ydGVyLnB1c2goZC5nZXRQYXRoKCksZyxkLmN1cnJlbnRGaWxlSW5mbyxkLm9wdGlvbnMsail9fSxvbkltcG9ydGVkOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtjJiYoYy5maWxlbmFtZXx8KGMuaW5kZXg9YS5pbmRleCxjLmZpbGVuYW1lPWEuY3VycmVudEZpbGVJbmZvLmZpbGVuYW1lKSx0aGlzLmVycm9yPWMpO3ZhciBnPXRoaXMsaD1hLm9wdGlvbnMuaW5saW5lLGk9YS5vcHRpb25zLnBsdWdpbixqPWV8fGYgaW4gZy5yZWN1cnNpb25EZXRlY3RvcjtpZihiLmltcG9ydE11bHRpcGxlfHwoYS5za2lwPWo/ITA6ZnVuY3Rpb24oKXtyZXR1cm4gZiBpbiBnLm9uY2VGaWxlRGV0ZWN0aW9uTWFwPyEwOihnLm9uY2VGaWxlRGV0ZWN0aW9uTWFwW2ZdPSEwLCExKX0pLGQmJihhLnJvb3Q9ZCxhLmltcG9ydGVkRmlsZW5hbWU9ZiwhKGh8fGl8fCFiLmltcG9ydE11bHRpcGxlJiZqKSkpe2cucmVjdXJzaW9uRGV0ZWN0b3JbZl09ITA7dmFyIGs9dGhpcy5jb250ZXh0O3RoaXMuY29udGV4dD1iO3RyeXt0aGlzLl92aXNpdG9yLnZpc2l0KGQpfWNhdGNoKGMpe3RoaXMuZXJyb3I9Y310aGlzLmNvbnRleHQ9a31nLmltcG9ydENvdW50LS0sZy5pc0ZpbmlzaGVkJiZnLl9zZXF1ZW5jZXIudHJ5UnVuKCl9LHZpc2l0UnVsZTpmdW5jdGlvbihhLGIpe1wiRGV0YWNoZWRSdWxlc2V0XCI9PT1hLnZhbHVlLnR5cGU/dGhpcy5jb250ZXh0LmZyYW1lcy51bnNoaWZ0KGEpOmIudmlzaXREZWVwZXI9ITF9LHZpc2l0UnVsZU91dDpmdW5jdGlvbihhKXtcIkRldGFjaGVkUnVsZXNldFwiPT09YS52YWx1ZS50eXBlJiZ0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCl9LHZpc2l0RGlyZWN0aXZlOmZ1bmN0aW9uKGEpe3RoaXMuY29udGV4dC5mcmFtZXMudW5zaGlmdChhKX0sdmlzaXREaXJlY3RpdmVPdXQ6ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCl9LHZpc2l0TWl4aW5EZWZpbml0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuY29udGV4dC5mcmFtZXMudW5zaGlmdChhKX0sdmlzaXRNaXhpbkRlZmluaXRpb25PdXQ6ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCl9LHZpc2l0UnVsZXNldDpmdW5jdGlvbihhKXt0aGlzLmNvbnRleHQuZnJhbWVzLnVuc2hpZnQoYSl9LHZpc2l0UnVsZXNldE91dDpmdW5jdGlvbigpe3RoaXMuY29udGV4dC5mcmFtZXMuc2hpZnQoKX0sdmlzaXRNZWRpYTpmdW5jdGlvbihhKXt0aGlzLmNvbnRleHQuZnJhbWVzLnVuc2hpZnQoYS5ydWxlc1swXSl9LHZpc2l0TWVkaWFPdXQ6ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHQuZnJhbWVzLnNoaWZ0KCl9fSxiLmV4cG9ydHM9Zn0se1wiLi4vY29udGV4dHNcIjoxMCxcIi4vaW1wb3J0LXNlcXVlbmNlclwiOjgzLFwiLi92aXNpdG9yXCI6ODh9XSw4NTpbZnVuY3Rpb24oYSxiKXt2YXIgYz17VmlzaXRvcjphKFwiLi92aXNpdG9yXCIpLEltcG9ydFZpc2l0b3I6YShcIi4vaW1wb3J0LXZpc2l0b3JcIiksRXh0ZW5kVmlzaXRvcjphKFwiLi9leHRlbmQtdmlzaXRvclwiKSxKb2luU2VsZWN0b3JWaXNpdG9yOmEoXCIuL2pvaW4tc2VsZWN0b3ItdmlzaXRvclwiKSxUb0NTU1Zpc2l0b3I6YShcIi4vdG8tY3NzLXZpc2l0b3JcIil9O2IuZXhwb3J0cz1jfSx7XCIuL2V4dGVuZC12aXNpdG9yXCI6ODIsXCIuL2ltcG9ydC12aXNpdG9yXCI6ODQsXCIuL2pvaW4tc2VsZWN0b3ItdmlzaXRvclwiOjg2LFwiLi90by1jc3MtdmlzaXRvclwiOjg3LFwiLi92aXNpdG9yXCI6ODh9XSw4NjpbZnVuY3Rpb24oYSxiKXt2YXIgYz1hKFwiLi92aXNpdG9yXCIpLGQ9ZnVuY3Rpb24oKXt0aGlzLmNvbnRleHRzPVtbXV0sdGhpcy5fdmlzaXRvcj1uZXcgYyh0aGlzKX07ZC5wcm90b3R5cGU9e3J1bjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdmlzaXRvci52aXNpdChhKX0sdmlzaXRSdWxlOmZ1bmN0aW9uKGEsYil7Yi52aXNpdERlZXBlcj0hMX0sdmlzaXRNaXhpbkRlZmluaXRpb246ZnVuY3Rpb24oYSxiKXtiLnZpc2l0RGVlcGVyPSExfSx2aXNpdFJ1bGVzZXQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmNvbnRleHRzW3RoaXMuY29udGV4dHMubGVuZ3RoLTFdLGQ9W107dGhpcy5jb250ZXh0cy5wdXNoKGQpLGEucm9vdHx8KGI9YS5zZWxlY3RvcnMsYiYmKGI9Yi5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0SXNPdXRwdXQoKX0pLGEuc2VsZWN0b3JzPWIubGVuZ3RoP2I6Yj1udWxsLGImJmEuam9pblNlbGVjdG9ycyhkLGMsYikpLGJ8fChhLnJ1bGVzPW51bGwpLGEucGF0aHM9ZCl9LHZpc2l0UnVsZXNldE91dDpmdW5jdGlvbigpe3RoaXMuY29udGV4dHMubGVuZ3RoPXRoaXMuY29udGV4dHMubGVuZ3RoLTF9LHZpc2l0TWVkaWE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb250ZXh0c1t0aGlzLmNvbnRleHRzLmxlbmd0aC0xXTthLnJ1bGVzWzBdLnJvb3Q9MD09PWIubGVuZ3RofHxiWzBdLm11bHRpTWVkaWF9LHZpc2l0RGlyZWN0aXZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29udGV4dHNbdGhpcy5jb250ZXh0cy5sZW5ndGgtMV07YS5ydWxlcyYmYS5ydWxlcy5sZW5ndGgmJihhLnJ1bGVzWzBdLnJvb3Q9YS5pc1Jvb3RlZHx8MD09PWIubGVuZ3RofHxudWxsKX19LGIuZXhwb3J0cz1kfSx7XCIuL3Zpc2l0b3JcIjo4OH1dLDg3OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuLi90cmVlXCIpLGQ9YShcIi4vdmlzaXRvclwiKSxlPWZ1bmN0aW9uKGEpe3RoaXMuX3Zpc2l0b3I9bmV3IGQodGhpcyksdGhpcy5fY29udGV4dD1hfTtlLnByb3RvdHlwZT17aXNSZXBsYWNpbmc6ITAscnVuOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl92aXNpdG9yLnZpc2l0KGEpfSx2aXNpdFJ1bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFyaWFibGU/dm9pZCAwOmF9LHZpc2l0TWl4aW5EZWZpbml0aW9uOmZ1bmN0aW9uKGEpe1xuYS5mcmFtZXM9W119LHZpc2l0RXh0ZW5kOmZ1bmN0aW9uKCl7fSx2aXNpdENvbW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNTaWxlbnQodGhpcy5fY29udGV4dCk/dm9pZCAwOmF9LHZpc2l0TWVkaWE6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5hY2NlcHQodGhpcy5fdmlzaXRvciksYi52aXNpdERlZXBlcj0hMSxhLnJ1bGVzLmxlbmd0aD9hOnZvaWQgMH0sdmlzaXRJbXBvcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWEucGF0aC5jdXJyZW50RmlsZUluZm8ucmVmZXJlbmNlJiZhLmNzcz92b2lkIDA6YX0sdmlzaXREaXJlY3RpdmU6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEpe3ZhciBiLGM9YS5ydWxlczsxIT09Yy5sZW5ndGh8fGNbMF0ucGF0aHMmJjAhPT1jWzBdLnBhdGhzLmxlbmd0aHx8KGM9Y1swXS5ydWxlcyk7Zm9yKHZhciBkPTA7Yy5sZW5ndGg+ZDtkKyspaWYoYj1jW2RdLGIuZ2V0SXNSZWZlcmVuY2VkJiZiLmdldElzUmVmZXJlbmNlZCgpKXJldHVybiEwO3JldHVybiExfWlmKFwiQGNoYXJzZXRcIj09PWEubmFtZSl7aWYoIWEuZ2V0SXNSZWZlcmVuY2VkKCkpcmV0dXJuO2lmKHRoaXMuY2hhcnNldCl7aWYoYS5kZWJ1Z0luZm8pe3ZhciBlPW5ldyBjLkNvbW1lbnQoXCIvKiBcIithLnRvQ1NTKHRoaXMuX2NvbnRleHQpLnJlcGxhY2UoL1xcbi9nLFwiXCIpK1wiICovXFxuXCIpO3JldHVybiBlLmRlYnVnSW5mbz1hLmRlYnVnSW5mbyx0aGlzLl92aXNpdG9yLnZpc2l0KGUpfXJldHVybn10aGlzLmNoYXJzZXQ9ITB9aWYoYS5ydWxlcyYmYS5ydWxlcy5sZW5ndGgpe2lmKHRoaXMuX21lcmdlUnVsZXMoYS5ydWxlc1swXS5ydWxlcyksYS5hY2NlcHQodGhpcy5fdmlzaXRvciksYi52aXNpdERlZXBlcj0hMSxhLmdldElzUmVmZXJlbmNlZCgpKXJldHVybiBhO2lmKCFhLnJ1bGVzfHwhYS5ydWxlcy5sZW5ndGgpcmV0dXJuO2lmKGQoYSkpcmV0dXJuIGEubWFya1JlZmVyZW5jZWQoKSxhfWVsc2UgaWYoYS5nZXRJc1JlZmVyZW5jZWQoKSlyZXR1cm4gYX0sY2hlY2tQcm9wZXJ0aWVzSW5Sb290OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixkPTA7YS5sZW5ndGg+ZDtkKyspaWYoYj1hW2RdLGIgaW5zdGFuY2VvZiBjLlJ1bGUmJiFiLnZhcmlhYmxlKXRocm93e21lc3NhZ2U6XCJwcm9wZXJ0aWVzIG11c3QgYmUgaW5zaWRlIHNlbGVjdG9yIGJsb2NrcywgdGhleSBjYW5ub3QgYmUgaW4gdGhlIHJvb3QuXCIsaW5kZXg6Yi5pbmRleCxmaWxlbmFtZTpiLmN1cnJlbnRGaWxlSW5mbz9iLmN1cnJlbnRGaWxlSW5mby5maWxlbmFtZTpudWxsfX0sdmlzaXRSdWxlc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGQsZT1bXTtpZihhLmZpcnN0Um9vdCYmdGhpcy5jaGVja1Byb3BlcnRpZXNJblJvb3QoYS5ydWxlcyksYS5yb290KWEuYWNjZXB0KHRoaXMuX3Zpc2l0b3IpLGIudmlzaXREZWVwZXI9ITEsKGEuZmlyc3RSb290fHxhLnJ1bGVzJiZhLnJ1bGVzLmxlbmd0aD4wKSYmZS5zcGxpY2UoMCwwLGEpO2Vsc2V7YS5wYXRocyYmKGEucGF0aHM9YS5wYXRocy5maWx0ZXIoZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKFwiIFwiPT09YVswXS5lbGVtZW50c1swXS5jb21iaW5hdG9yLnZhbHVlJiYoYVswXS5lbGVtZW50c1swXS5jb21iaW5hdG9yPW5ldyBjLkNvbWJpbmF0b3IoXCJcIikpLGI9MDthLmxlbmd0aD5iO2IrKylpZihhW2JdLmdldElzUmVmZXJlbmNlZCgpJiZhW2JdLmdldElzT3V0cHV0KCkpcmV0dXJuITA7cmV0dXJuITF9KSk7Zm9yKHZhciBmPWEucnVsZXMsZz1mP2YubGVuZ3RoOjAsaD0wO2c+aDspZD1mW2hdLGQmJmQucnVsZXM/KGUucHVzaCh0aGlzLl92aXNpdG9yLnZpc2l0KGQpKSxmLnNwbGljZShoLDEpLGctLSk6aCsrO2c+MD9hLmFjY2VwdCh0aGlzLl92aXNpdG9yKTphLnJ1bGVzPW51bGwsYi52aXNpdERlZXBlcj0hMSxmPWEucnVsZXMsZiYmKHRoaXMuX21lcmdlUnVsZXMoZiksZj1hLnJ1bGVzKSxmJiYodGhpcy5fcmVtb3ZlRHVwbGljYXRlUnVsZXMoZiksZj1hLnJ1bGVzKSxmJiZmLmxlbmd0aD4wJiZhLnBhdGhzLmxlbmd0aD4wJiZlLnNwbGljZSgwLDAsYSl9cmV0dXJuIDE9PT1lLmxlbmd0aD9lWzBdOmV9LF9yZW1vdmVEdXBsaWNhdGVSdWxlczpmdW5jdGlvbihhKXtpZihhKXt2YXIgYixkLGUsZj17fTtmb3IoZT1hLmxlbmd0aC0xO2U+PTA7ZS0tKWlmKGQ9YVtlXSxkIGluc3RhbmNlb2YgYy5SdWxlKWlmKGZbZC5uYW1lXSl7Yj1mW2QubmFtZV0sYiBpbnN0YW5jZW9mIGMuUnVsZSYmKGI9ZltkLm5hbWVdPVtmW2QubmFtZV0udG9DU1ModGhpcy5fY29udGV4dCldKTt2YXIgZz1kLnRvQ1NTKHRoaXMuX2NvbnRleHQpOy0xIT09Yi5pbmRleE9mKGcpP2Euc3BsaWNlKGUsMSk6Yi5wdXNoKGcpfWVsc2UgZltkLm5hbWVdPWR9fSxfbWVyZ2VSdWxlczpmdW5jdGlvbihhKXtpZihhKXtmb3IodmFyIGIsZCxlLGY9e30sZz0wO2EubGVuZ3RoPmc7ZysrKWQ9YVtnXSxkIGluc3RhbmNlb2YgYy5SdWxlJiZkLm1lcmdlJiYoZT1bZC5uYW1lLGQuaW1wb3J0YW50P1wiIVwiOlwiXCJdLmpvaW4oXCIsXCIpLGZbZV0/YS5zcGxpY2UoZy0tLDEpOmZbZV09W10sZltlXS5wdXNoKGQpKTtPYmplY3Qua2V5cyhmKS5tYXAoZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gbmV3IGMuRXhwcmVzc2lvbihhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS52YWx1ZX0pKX1mdW5jdGlvbiBnKGEpe3JldHVybiBuZXcgYy5WYWx1ZShhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYX0pKX1pZihiPWZbYV0sYi5sZW5ndGg+MSl7ZD1iWzBdO3ZhciBoPVtdLGk9W107Yi5tYXAoZnVuY3Rpb24oYSl7XCIrXCI9PT1hLm1lcmdlJiYoaS5sZW5ndGg+MCYmaC5wdXNoKGUoaSkpLGk9W10pLGkucHVzaChhKX0pLGgucHVzaChlKGkpKSxkLnZhbHVlPWcoaCl9fSl9fX0sYi5leHBvcnRzPWV9LHtcIi4uL3RyZWVcIjo2MCxcIi4vdmlzaXRvclwiOjg4fV0sODg6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYil7dmFyIGMsZTtmb3IoYyBpbiBhKWlmKGEuaGFzT3duUHJvcGVydHkoYykpc3dpdGNoKGU9YVtjXSx0eXBlb2YgZSl7Y2FzZVwiZnVuY3Rpb25cIjplLnByb3RvdHlwZSYmZS5wcm90b3R5cGUudHlwZSYmKGUucHJvdG90eXBlLnR5cGVJbmRleD1iKyspO2JyZWFrO2Nhc2VcIm9iamVjdFwiOmI9ZChlLGIpfXJldHVybiBifXZhciBlPWEoXCIuLi90cmVlXCIpLGY9e3Zpc2l0RGVlcGVyOiEwfSxnPSExLGg9ZnVuY3Rpb24oYSl7dGhpcy5faW1wbGVtZW50YXRpb249YSx0aGlzLl92aXNpdEZuQ2FjaGU9W10sZ3x8KGQoZSwxKSxnPSEwKX07aC5wcm90b3R5cGU9e3Zpc2l0OmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBhO3ZhciBiPWEudHlwZUluZGV4O2lmKCFiKXJldHVybiBhO3ZhciBkLGU9dGhpcy5fdmlzaXRGbkNhY2hlLGc9dGhpcy5faW1wbGVtZW50YXRpb24saD1iPDwxLGk9MXxoLGo9ZVtoXSxrPWVbaV0sbD1mO2lmKGwudmlzaXREZWVwZXI9ITAsanx8KGQ9XCJ2aXNpdFwiK2EudHlwZSxqPWdbZF18fGMsaz1nW2QrXCJPdXRcIl18fGMsZVtoXT1qLGVbaV09ayksaiE9PWMpe3ZhciBtPWouY2FsbChnLGEsbCk7Zy5pc1JlcGxhY2luZyYmKGE9bSl9cmV0dXJuIGwudmlzaXREZWVwZXImJmEmJmEuYWNjZXB0JiZhLmFjY2VwdCh0aGlzKSxrIT1jJiZrLmNhbGwoZyxhKSxhfSx2aXNpdEFycmF5OmZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGE7dmFyIGMsZD1hLmxlbmd0aDtpZihifHwhdGhpcy5faW1wbGVtZW50YXRpb24uaXNSZXBsYWNpbmcpe2ZvcihjPTA7ZD5jO2MrKyl0aGlzLnZpc2l0KGFbY10pO3JldHVybiBhfXZhciBlPVtdO2ZvcihjPTA7ZD5jO2MrKyl7dmFyIGY9dGhpcy52aXNpdChhW2NdKTt2b2lkIDAhPT1mJiYoZi5zcGxpY2U/Zi5sZW5ndGgmJnRoaXMuZmxhdHRlbihmLGUpOmUucHVzaChmKSl9cmV0dXJuIGV9LGZsYXR0ZW46ZnVuY3Rpb24oYSxiKXtifHwoYj1bXSk7dmFyIGMsZCxlLGYsZyxoO2ZvcihkPTAsYz1hLmxlbmd0aDtjPmQ7ZCsrKWlmKGU9YVtkXSx2b2lkIDAhPT1lKWlmKGUuc3BsaWNlKWZvcihnPTAsZj1lLmxlbmd0aDtmPmc7ZysrKWg9ZVtnXSx2b2lkIDAhPT1oJiYoaC5zcGxpY2U/aC5sZW5ndGgmJnRoaXMuZmxhdHRlbihoLGIpOmIucHVzaChoKSk7ZWxzZSBiLnB1c2goZSk7cmV0dXJuIGJ9fSxiLmV4cG9ydHM9aH0se1wiLi4vdHJlZVwiOjYwfV0sODk6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe2lmKCFnKXtnPSEwO2Zvcih2YXIgYSxiPWYubGVuZ3RoO2I7KXthPWYsZj1bXTtmb3IodmFyIGM9LTE7KytjPGI7KWFbY10oKTtiPWYubGVuZ3RofWc9ITF9fWZ1bmN0aW9uIGQoKXt9dmFyIGU9Yi5leHBvcnRzPXt9LGY9W10sZz0hMTtlLm5leHRUaWNrPWZ1bmN0aW9uKGEpe2YucHVzaChhKSxnfHxzZXRUaW1lb3V0KGMsMCl9LGUudGl0bGU9XCJicm93c2VyXCIsZS5icm93c2VyPSEwLGUuZW52PXt9LGUuYXJndj1bXSxlLnZlcnNpb249XCJcIixlLnZlcnNpb25zPXt9LGUub249ZCxlLmFkZExpc3RlbmVyPWQsZS5vbmNlPWQsZS5vZmY9ZCxlLnJlbW92ZUxpc3RlbmVyPWQsZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZCxlLmVtaXQ9ZCxlLmJpbmRpbmc9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sZS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sZS5jaGRpcj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sZS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0se31dLDkwOltmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGMoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gbnVsbD09PWk/dm9pZCBrLnB1c2goYSk6dm9pZCBmKGZ1bmN0aW9uKCl7dmFyIGI9aT9hLm9uRnVsZmlsbGVkOmEub25SZWplY3RlZDtpZihudWxsPT09YilyZXR1cm4gdm9pZChpP2EucmVzb2x2ZTphLnJlamVjdCkoaik7dmFyIGM7dHJ5e2M9YihqKX1jYXRjaChkKXtyZXR1cm4gdm9pZCBhLnJlamVjdChkKX1hLnJlc29sdmUoYyl9KX1mdW5jdGlvbiBjKGEpe3RyeXtpZihhPT09bCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQSBwcm9taXNlIGNhbm5vdCBiZSByZXNvbHZlZCB3aXRoIGl0c2VsZi5cIik7aWYoYSYmKFwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhKSl7dmFyIGI9YS50aGVuO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpcmV0dXJuIHZvaWQgZShiLmJpbmQoYSksYyxnKX1pPSEwLGo9YSxoKCl9Y2F0Y2goZCl7ZyhkKX19ZnVuY3Rpb24gZyhhKXtpPSExLGo9YSxoKCl9ZnVuY3Rpb24gaCgpe2Zvcih2YXIgYT0wLGM9ay5sZW5ndGg7Yz5hO2ErKyliKGtbYV0pO2s9bnVsbH1pZihcIm9iamVjdFwiIT10eXBlb2YgdGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3XCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5vdCBhIGZ1bmN0aW9uXCIpO3ZhciBpPW51bGwsaj1udWxsLGs9W10sbD10aGlzO3RoaXMudGhlbj1mdW5jdGlvbihhLGMpe3JldHVybiBuZXcgbC5jb25zdHJ1Y3RvcihmdW5jdGlvbihlLGYpe2IobmV3IGQoYSxjLGUsZikpfSl9LGUoYSxjLGcpfWZ1bmN0aW9uIGQoYSxiLGMsZCl7dGhpcy5vbkZ1bGZpbGxlZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2E6bnVsbCx0aGlzLm9uUmVqZWN0ZWQ9XCJmdW5jdGlvblwiPT10eXBlb2YgYj9iOm51bGwsdGhpcy5yZXNvbHZlPWMsdGhpcy5yZWplY3Q9ZH1mdW5jdGlvbiBlKGEsYixjKXt2YXIgZD0hMTt0cnl7YShmdW5jdGlvbihhKXtkfHwoZD0hMCxiKGEpKX0sZnVuY3Rpb24oYSl7ZHx8KGQ9ITAsYyhhKSl9KX1jYXRjaChlKXtpZihkKXJldHVybjtkPSEwLGMoZSl9fXZhciBmPWEoXCJhc2FwXCIpO2IuZXhwb3J0cz1jfSx7YXNhcDo5Mn1dLDkxOltmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGMoYSl7dGhpcy50aGVuPWZ1bmN0aW9uKGIpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGI/dGhpczpuZXcgZChmdW5jdGlvbihjLGQpe2UoZnVuY3Rpb24oKXt0cnl7YyhiKGEpKX1jYXRjaChlKXtkKGUpfX0pfSl9fXZhciBkPWEoXCIuL2NvcmUuanNcIiksZT1hKFwiYXNhcFwiKTtiLmV4cG9ydHM9ZCxjLnByb3RvdHlwZT1kLnByb3RvdHlwZTt2YXIgZj1uZXcgYyghMCksZz1uZXcgYyghMSksaD1uZXcgYyhudWxsKSxpPW5ldyBjKHZvaWQgMCksaj1uZXcgYygwKSxrPW5ldyBjKFwiXCIpO2QucmVzb2x2ZT1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgZClyZXR1cm4gYTtpZihudWxsPT09YSlyZXR1cm4gaDtpZih2b2lkIDA9PT1hKXJldHVybiBpO2lmKGE9PT0hMClyZXR1cm4gZjtpZihhPT09ITEpcmV0dXJuIGc7aWYoMD09PWEpcmV0dXJuIGo7aWYoXCJcIj09PWEpcmV0dXJuIGs7aWYoXCJvYmplY3RcIj09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGEpdHJ5e3ZhciBiPWEudGhlbjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKXJldHVybiBuZXcgZChiLmJpbmQoYSkpfWNhdGNoKGUpe3JldHVybiBuZXcgZChmdW5jdGlvbihhLGIpe2IoZSl9KX1yZXR1cm4gbmV3IGMoYSl9LGQuYWxsPWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEpO3JldHVybiBuZXcgZChmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIGQoZixnKXt0cnl7aWYoZyYmKFwib2JqZWN0XCI9PXR5cGVvZiBnfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBnKSl7dmFyIGg9Zy50aGVuO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGgpcmV0dXJuIHZvaWQgaC5jYWxsKGcsZnVuY3Rpb24oYSl7ZChmLGEpfSxjKX1iW2ZdPWcsMD09PS0tZSYmYShiKX1jYXRjaChpKXtjKGkpfX1pZigwPT09Yi5sZW5ndGgpcmV0dXJuIGEoW10pO2Zvcih2YXIgZT1iLmxlbmd0aCxmPTA7Yi5sZW5ndGg+ZjtmKyspZChmLGJbZl0pfSl9LGQucmVqZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZChmdW5jdGlvbihiLGMpe2MoYSl9KX0sZC5yYWNlPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZChmdW5jdGlvbihiLGMpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtkLnJlc29sdmUoYSkudGhlbihiLGMpfSl9KX0sZC5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9fSx7XCIuL2NvcmUuanNcIjo5MCxhc2FwOjkyfV0sOTI6W2Z1bmN0aW9uKGEsYil7KGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoKXtmb3IoO2UubmV4dDspe2U9ZS5uZXh0O3ZhciBhPWUudGFzaztlLnRhc2s9dm9pZCAwO3ZhciBiPWUuZG9tYWluO2ImJihlLmRvbWFpbj12b2lkIDAsYi5lbnRlcigpKTt0cnl7YSgpfWNhdGNoKGQpe2lmKGkpdGhyb3cgYiYmYi5leGl0KCksc2V0VGltZW91dChjLDApLGImJmIuZW50ZXIoKSxkO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBkfSwwKX1iJiZiLmV4aXQoKX1nPSExfWZ1bmN0aW9uIGQoYil7Zj1mLm5leHQ9e3Rhc2s6Yixkb21haW46aSYmYS5kb21haW4sbmV4dDpudWxsfSxnfHwoZz0hMCxoKCkpfXZhciBlPXt0YXNrOnZvaWQgMCxuZXh0Om51bGx9LGY9ZSxnPSExLGg9dm9pZCAwLGk9ITE7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEmJmEubmV4dFRpY2spaT0hMCxoPWZ1bmN0aW9uKCl7YS5uZXh0VGljayhjKX07ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRJbW1lZGlhdGUpaD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3NldEltbWVkaWF0ZS5iaW5kKHdpbmRvdyxjKTpmdW5jdGlvbigpe3NldEltbWVkaWF0ZShjKX07ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgTWVzc2FnZUNoYW5uZWwpe3ZhciBqPW5ldyBNZXNzYWdlQ2hhbm5lbDtqLnBvcnQxLm9ubWVzc2FnZT1jLGg9ZnVuY3Rpb24oKXtqLnBvcnQyLnBvc3RNZXNzYWdlKDApfX1lbHNlIGg9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGMsMCl9O2IuZXhwb3J0cz1kfSkuY2FsbCh0aGlzLGEoXCJfcHJvY2Vzc1wiKSl9LHtfcHJvY2Vzczo4OX1dLDkzOltmdW5jdGlvbigpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIFByb21pc2UucHJvdG90eXBlLmRvbmUmJihQcm9taXNlLnByb3RvdHlwZS5kb25lPWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzLmxlbmd0aD90aGlzLnRoZW4uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXM7YS50aGVuKG51bGwsZnVuY3Rpb24oYSl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGF9LDApfSl9KX0se31dLDk0OltmdW5jdGlvbihhKXthKFwiYXNhcFwiKTtcInVuZGVmaW5lZFwiPT10eXBlb2YgUHJvbWlzZSYmKFByb21pc2U9YShcIi4vbGliL2NvcmUuanNcIiksYShcIi4vbGliL2VzNi1leHRlbnNpb25zLmpzXCIpKSxhKFwiLi9wb2x5ZmlsbC1kb25lLmpzXCIpfSx7XCIuL2xpYi9jb3JlLmpzXCI6OTAsXCIuL2xpYi9lczYtZXh0ZW5zaW9ucy5qc1wiOjkxLFwiLi9wb2x5ZmlsbC1kb25lLmpzXCI6OTMsYXNhcDo5Mn1dfSx7fSxbMl0pKDIpfSk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/assets/less.js/less.min.js\n')},"./web/assets/spectrum/spectrum.js":
/*!*****************************************!*\
  !*** ./web/assets/spectrum/spectrum.js ***!
  \*****************************************/
/*! no static exports found */function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Spectrum Colorpicker v1.8.1\n// https://github.com/bgrins/spectrum\n// Author: Brian Grinstead\n// License: MIT\n\n(function (factory) {\n    "use strict";\n\n    if (true) { // AMD\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "jquery")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    }\n    else {}\n})(function($, undefined) {\n    "use strict";\n\n    var defaultOpts = {\n\n        // Callbacks\n        beforeShow: noop,\n        move: noop,\n        change: noop,\n        show: noop,\n        hide: noop,\n\n        // Options\n        color: false,\n        flat: false,\n        showInput: false,\n        allowEmpty: false,\n        showButtons: true,\n        clickoutFiresChange: true,\n        showInitial: false,\n        showPalette: false,\n        showPaletteOnly: false,\n        hideAfterPaletteSelect: false,\n        togglePaletteOnly: false,\n        showSelectionPalette: true,\n        localStorageKey: false,\n        appendTo: "body",\n        maxSelectionSize: 7,\n        cancelText: "cancel",\n        chooseText: "choose",\n        togglePaletteMoreText: "more",\n        togglePaletteLessText: "less",\n        clearText: "Clear Color Selection",\n        noColorSelectedText: "No Color Selected",\n        preferredFormat: false,\n        className: "", // Deprecated - use containerClassName and replacerClassName instead.\n        containerClassName: "",\n        replacerClassName: "",\n        showAlpha: false,\n        theme: "sp-light",\n        palette: [["#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3"]],\n        selectionPalette: [],\n        disabled: false,\n        offset: null\n    },\n    spectrums = [],\n    IE = !!/msie/i.exec( window.navigator.userAgent ),\n    rgbaSupport = (function() {\n        function contains( str, substr ) {\n            return !!~(\'\' + str).indexOf(substr);\n        }\n\n        var elem = document.createElement(\'div\');\n        var style = elem.style;\n        style.cssText = \'background-color:rgba(0,0,0,.5)\';\n        return contains(style.backgroundColor, \'rgba\') || contains(style.backgroundColor, \'hsla\');\n    })(),\n    replaceInput = [\n        "<div class=\'sp-replacer\'>",\n            "<div class=\'sp-preview\'><div class=\'sp-preview-inner\'></div></div>",\n            "<div class=\'sp-dd\'>&#9660;</div>",\n        "</div>"\n    ].join(\'\'),\n    markup = (function () {\n\n        // IE does not support gradients with multiple stops, so we need to simulate\n        //  that for the rainbow slider with 8 divs that each have a single gradient\n        var gradientFix = "";\n        if (IE) {\n            for (var i = 1; i <= 6; i++) {\n                gradientFix += "<div class=\'sp-" + i + "\'></div>";\n            }\n        }\n\n        return [\n            "<div class=\'sp-container sp-hidden\'>",\n                "<div class=\'sp-palette-container\'>",\n                    "<div class=\'sp-palette sp-thumb sp-cf\'></div>",\n                    "<div class=\'sp-palette-button-container sp-cf\'>",\n                        "<button type=\'button\' class=\'sp-palette-toggle\'></button>",\n                    "</div>",\n                "</div>",\n                "<div class=\'sp-picker-container\'>",\n                    "<div class=\'sp-top sp-cf\'>",\n                        "<div class=\'sp-fill\'></div>",\n                        "<div class=\'sp-top-inner\'>",\n                            "<div class=\'sp-color\'>",\n                                "<div class=\'sp-sat\'>",\n                                    "<div class=\'sp-val\'>",\n                                        "<div class=\'sp-dragger\'></div>",\n                                    "</div>",\n                                "</div>",\n                            "</div>",\n                            "<div class=\'sp-clear sp-clear-display\'>",\n                            "</div>",\n                            "<div class=\'sp-hue\'>",\n                                "<div class=\'sp-slider\'></div>",\n                                gradientFix,\n                            "</div>",\n                        "</div>",\n                        "<div class=\'sp-alpha\'><div class=\'sp-alpha-inner\'><div class=\'sp-alpha-handle\'></div></div></div>",\n                    "</div>",\n                    "<div class=\'sp-input-container sp-cf\'>",\n                        "<input class=\'sp-input\' type=\'text\' spellcheck=\'false\'  />",\n                    "</div>",\n                    "<div class=\'sp-initial sp-thumb sp-cf\'></div>",\n                    "<div class=\'sp-button-container sp-cf\'>",\n                        "<a class=\'sp-cancel\' href=\'#\'></a>",\n                        "<button type=\'button\' class=\'sp-choose\'></button>",\n                    "</div>",\n                "</div>",\n            "</div>"\n        ].join("");\n    })();\n\n    function paletteTemplate (p, color, className, opts) {\n        var html = [];\n        for (var i = 0; i < p.length; i++) {\n            var current = p[i];\n            if(current) {\n                var tiny = tinycolor(current);\n                var c = tiny.toHsl().l < 0.5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light";\n                c += (tinycolor.equals(color, current)) ? " sp-thumb-active" : "";\n                var formattedString = tiny.toString(opts.preferredFormat || "rgb");\n                var swatchStyle = rgbaSupport ? ("background-color:" + tiny.toRgbString()) : "filter:" + tiny.toFilter();\n                html.push(\'<span title="\' + formattedString + \'" data-color="\' + tiny.toRgbString() + \'" class="\' + c + \'"><span class="sp-thumb-inner" style="\' + swatchStyle + \';"></span></span>\');\n            } else {\n                var cls = \'sp-clear-display\';\n                html.push($(\'<div />\')\n                    .append($(\'<span data-color="" style="background-color:transparent;" class="\' + cls + \'"></span>\')\n                        .attr(\'title\', opts.noColorSelectedText)\n                    )\n                    .html()\n                );\n            }\n        }\n        return "<div class=\'sp-cf " + className + "\'>" + html.join(\'\') + "</div>";\n    }\n\n    function hideAll() {\n        for (var i = 0; i < spectrums.length; i++) {\n            if (spectrums[i]) {\n                spectrums[i].hide();\n            }\n        }\n    }\n\n    function instanceOptions(o, callbackContext) {\n        var opts = $.extend({}, defaultOpts, o);\n        opts.callbacks = {\n            \'move\': bind(opts.move, callbackContext),\n            \'change\': bind(opts.change, callbackContext),\n            \'show\': bind(opts.show, callbackContext),\n            \'hide\': bind(opts.hide, callbackContext),\n            \'beforeShow\': bind(opts.beforeShow, callbackContext)\n        };\n\n        return opts;\n    }\n\n    function spectrum(element, o) {\n\n        var opts = instanceOptions(o, element),\n            flat = opts.flat,\n            showSelectionPalette = opts.showSelectionPalette,\n            localStorageKey = opts.localStorageKey,\n            theme = opts.theme,\n            callbacks = opts.callbacks,\n            resize = throttle(reflow, 10),\n            visible = false,\n            isDragging = false,\n            dragWidth = 0,\n            dragHeight = 0,\n            dragHelperHeight = 0,\n            slideHeight = 0,\n            slideWidth = 0,\n            alphaWidth = 0,\n            alphaSlideHelperWidth = 0,\n            slideHelperHeight = 0,\n            currentHue = 0,\n            currentSaturation = 0,\n            currentValue = 0,\n            currentAlpha = 1,\n            palette = [],\n            paletteArray = [],\n            paletteLookup = {},\n            selectionPalette = opts.selectionPalette.slice(0),\n            maxSelectionSize = opts.maxSelectionSize,\n            draggingClass = "sp-dragging",\n            shiftMovementDirection = null;\n\n        var doc = element.ownerDocument,\n            body = doc.body,\n            boundElement = $(element),\n            disabled = false,\n            container = $(markup, doc).addClass(theme),\n            pickerContainer = container.find(".sp-picker-container"),\n            dragger = container.find(".sp-color"),\n            dragHelper = container.find(".sp-dragger"),\n            slider = container.find(".sp-hue"),\n            slideHelper = container.find(".sp-slider"),\n            alphaSliderInner = container.find(".sp-alpha-inner"),\n            alphaSlider = container.find(".sp-alpha"),\n            alphaSlideHelper = container.find(".sp-alpha-handle"),\n            textInput = container.find(".sp-input"),\n            paletteContainer = container.find(".sp-palette"),\n            initialColorContainer = container.find(".sp-initial"),\n            cancelButton = container.find(".sp-cancel"),\n            clearButton = container.find(".sp-clear"),\n            chooseButton = container.find(".sp-choose"),\n            toggleButton = container.find(".sp-palette-toggle"),\n            isInput = boundElement.is("input"),\n            isInputTypeColor = isInput && boundElement.attr("type") === "color" && inputTypeColorSupport(),\n            shouldReplace = isInput && !flat,\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) : $([]),\n            offsetElement = (shouldReplace) ? replacer : boundElement,\n            previewElement = replacer.find(".sp-preview-inner"),\n            initialColor = opts.color || (isInput && boundElement.val()),\n            colorOnShow = false,\n            currentPreferredFormat = opts.preferredFormat,\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\n            isEmpty = !initialColor,\n            allowEmpty = opts.allowEmpty && !isInputTypeColor;\n\n        function applyOptions() {\n\n            if (opts.showPaletteOnly) {\n                opts.showPalette = true;\n            }\n\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\n\n            if (opts.palette) {\n                palette = opts.palette.slice(0);\n                paletteArray = $.isArray(palette[0]) ? palette : [palette];\n                paletteLookup = {};\n                for (var i = 0; i < paletteArray.length; i++) {\n                    for (var j = 0; j < paletteArray[i].length; j++) {\n                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();\n                        paletteLookup[rgb] = true;\n                    }\n                }\n            }\n\n            container.toggleClass("sp-flat", flat);\n            container.toggleClass("sp-input-disabled", !opts.showInput);\n            container.toggleClass("sp-alpha-enabled", opts.showAlpha);\n            container.toggleClass("sp-clear-enabled", allowEmpty);\n            container.toggleClass("sp-buttons-disabled", !opts.showButtons);\n            container.toggleClass("sp-palette-buttons-disabled", !opts.togglePaletteOnly);\n            container.toggleClass("sp-palette-disabled", !opts.showPalette);\n            container.toggleClass("sp-palette-only", opts.showPaletteOnly);\n            container.toggleClass("sp-initial-disabled", !opts.showInitial);\n            container.addClass(opts.className).addClass(opts.containerClassName);\n\n            reflow();\n        }\n\n        function initialize() {\n\n            if (IE) {\n                container.find("*:not(input)").attr("unselectable", "on");\n            }\n\n            applyOptions();\n\n            if (shouldReplace) {\n                boundElement.after(replacer).hide();\n            }\n\n            if (!allowEmpty) {\n                clearButton.hide();\n            }\n\n            if (flat) {\n                boundElement.after(container).hide();\n            }\n            else {\n\n                var appendTo = opts.appendTo === "parent" ? boundElement.parent() : $(opts.appendTo);\n                if (appendTo.length !== 1) {\n                    appendTo = $("body");\n                }\n\n                appendTo.append(container);\n            }\n\n            updateSelectionPaletteFromStorage();\n\n            offsetElement.on("click.spectrum touchstart.spectrum", function (e) {\n                if (!disabled) {\n                    toggle();\n                }\n\n                e.stopPropagation();\n\n                if (!$(e.target).is("input")) {\n                    e.preventDefault();\n                }\n            });\n\n            if(boundElement.is(":disabled") || (opts.disabled === true)) {\n                disable();\n            }\n\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\n            container.click(stopPropagation);\n\n            // Handle user typed input\n            textInput.change(setFromTextInput);\n            textInput.on("paste", function () {\n                setTimeout(setFromTextInput, 1);\n            });\n            textInput.keydown(function (e) { if (e.keyCode == 13) { setFromTextInput(); } });\n\n            cancelButton.text(opts.cancelText);\n            cancelButton.on("click.spectrum", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                revert();\n                hide();\n            });\n\n            clearButton.attr("title", opts.clearText);\n            clearButton.on("click.spectrum", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                isEmpty = true;\n                move();\n\n                if(flat) {\n                    //for the flat style, this is a change event\n                    updateOriginalInput(true);\n                }\n            });\n\n            chooseButton.text(opts.chooseText);\n            chooseButton.on("click.spectrum", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                if (IE && textInput.is(":focus")) {\n                    textInput.trigger(\'change\');\n                }\n\n                if (isValid()) {\n                    updateOriginalInput(true);\n                    hide();\n                }\n            });\n\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\n            toggleButton.on("click.spectrum", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                opts.showPaletteOnly = !opts.showPaletteOnly;\n\n                // To make sure the Picker area is drawn on the right, next to the\n                // Palette area (and not below the palette), first move the Palette\n                // to the left to make space for the picker, plus 5px extra.\n                // The \'applyOptions\' function puts the whole container back into place\n                // and takes care of the button-text and the sp-palette-only CSS class.\n                if (!opts.showPaletteOnly && !flat) {\n                    container.css(\'left\', \'-=\' + (pickerContainer.outerWidth(true) + 5));\n                }\n                applyOptions();\n            });\n\n            draggable(alphaSlider, function (dragX, dragY, e) {\n                currentAlpha = (dragX / alphaWidth);\n                isEmpty = false;\n                if (e.shiftKey) {\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\n                }\n\n                move();\n            }, dragStart, dragStop);\n\n            draggable(slider, function (dragX, dragY) {\n                currentHue = parseFloat(dragY / slideHeight);\n                isEmpty = false;\n                if (!opts.showAlpha) {\n                    currentAlpha = 1;\n                }\n                move();\n            }, dragStart, dragStop);\n\n            draggable(dragger, function (dragX, dragY, e) {\n\n                // shift+drag should snap the movement to either the x or y axis.\n                if (!e.shiftKey) {\n                    shiftMovementDirection = null;\n                }\n                else if (!shiftMovementDirection) {\n                    var oldDragX = currentSaturation * dragWidth;\n                    var oldDragY = dragHeight - (currentValue * dragHeight);\n                    var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\n\n                    shiftMovementDirection = furtherFromX ? "x" : "y";\n                }\n\n                var setSaturation = !shiftMovementDirection || shiftMovementDirection === "x";\n                var setValue = !shiftMovementDirection || shiftMovementDirection === "y";\n\n                if (setSaturation) {\n                    currentSaturation = parseFloat(dragX / dragWidth);\n                }\n                if (setValue) {\n                    currentValue = parseFloat((dragHeight - dragY) / dragHeight);\n                }\n\n                isEmpty = false;\n                if (!opts.showAlpha) {\n                    currentAlpha = 1;\n                }\n\n                move();\n\n            }, dragStart, dragStop);\n\n            if (!!initialColor) {\n                set(initialColor);\n\n                // In case color was black - update the preview UI and set the format\n                // since the set function will not run (default color is black).\n                updateUI();\n                currentPreferredFormat = opts.preferredFormat || tinycolor(initialColor).format;\n\n                addColorToSelectionPalette(initialColor);\n            }\n            else {\n                updateUI();\n            }\n\n            if (flat) {\n                show();\n            }\n\n            function paletteElementClick(e) {\n                if (e.data && e.data.ignore) {\n                    set($(e.target).closest(".sp-thumb-el").data("color"));\n                    move();\n                }\n                else {\n                    set($(e.target).closest(".sp-thumb-el").data("color"));\n                    move();\n\n                    // If the picker is going to close immediately, a palette selection\n                    // is a change.  Otherwise, it\'s a move only.\n                    if (opts.hideAfterPaletteSelect) {\n                        updateOriginalInput(true);\n                        hide();\n                    } else {\n                        updateOriginalInput();\n                    }\n                }\n\n                return false;\n            }\n\n            var paletteEvent = IE ? "mousedown.spectrum" : "click.spectrum touchstart.spectrum";\n            paletteContainer.on(paletteEvent, ".sp-thumb-el", paletteElementClick);\n            initialColorContainer.on(paletteEvent, ".sp-thumb-el:nth-child(1)", { ignore: true }, paletteElementClick);\n        }\n\n        function updateSelectionPaletteFromStorage() {\n\n            if (localStorageKey && window.localStorage) {\n\n                // Migrate old palettes over to new format.  May want to remove this eventually.\n                try {\n                    var oldPalette = window.localStorage[localStorageKey].split(",#");\n                    if (oldPalette.length > 1) {\n                        delete window.localStorage[localStorageKey];\n                        $.each(oldPalette, function(i, c) {\n                             addColorToSelectionPalette(c);\n                        });\n                    }\n                }\n                catch(e) { }\n\n                try {\n                    selectionPalette = window.localStorage[localStorageKey].split(";");\n                }\n                catch (e) { }\n            }\n        }\n\n        function addColorToSelectionPalette(color) {\n            if (showSelectionPalette) {\n                var rgb = tinycolor(color).toRgbString();\n                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {\n                    selectionPalette.push(rgb);\n                    while(selectionPalette.length > maxSelectionSize) {\n                        selectionPalette.shift();\n                    }\n                }\n\n                if (localStorageKey && window.localStorage) {\n                    try {\n                        window.localStorage[localStorageKey] = selectionPalette.join(";");\n                    }\n                    catch(e) { }\n                }\n            }\n        }\n\n        function getUniqueSelectionPalette() {\n            var unique = [];\n            if (opts.showPalette) {\n                for (var i = 0; i < selectionPalette.length; i++) {\n                    var rgb = tinycolor(selectionPalette[i]).toRgbString();\n\n                    if (!paletteLookup[rgb]) {\n                        unique.push(selectionPalette[i]);\n                    }\n                }\n            }\n\n            return unique.reverse().slice(0, opts.maxSelectionSize);\n        }\n\n        function drawPalette() {\n\n            var currentColor = get();\n\n            var html = $.map(paletteArray, function (palette, i) {\n                return paletteTemplate(palette, currentColor, "sp-palette-row sp-palette-row-" + i, opts);\n            });\n\n            updateSelectionPaletteFromStorage();\n\n            if (selectionPalette) {\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, "sp-palette-row sp-palette-row-selection", opts));\n            }\n\n            paletteContainer.html(html.join(""));\n        }\n\n        function drawInitial() {\n            if (opts.showInitial) {\n                var initial = colorOnShow;\n                var current = get();\n                initialColorContainer.html(paletteTemplate([initial, current], current, "sp-palette-row-initial", opts));\n            }\n        }\n\n        function dragStart() {\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\n                reflow();\n            }\n            isDragging = true;\n            container.addClass(draggingClass);\n            shiftMovementDirection = null;\n            boundElement.trigger(\'dragstart.spectrum\', [ get() ]);\n        }\n\n        function dragStop() {\n            isDragging = false;\n            container.removeClass(draggingClass);\n            boundElement.trigger(\'dragstop.spectrum\', [ get() ]);\n        }\n\n        function setFromTextInput() {\n\n            var value = textInput.val();\n\n            if ((value === null || value === "") && allowEmpty) {\n                set(null);\n                move();\n                updateOriginalInput();\n            }\n            else {\n                var tiny = tinycolor(value);\n                if (tiny.isValid()) {\n                    set(tiny);\n                    move();\n                    updateOriginalInput();\n                }\n                else {\n                    textInput.addClass("sp-validation-error");\n                }\n            }\n        }\n\n        function toggle() {\n            if (visible) {\n                hide();\n            }\n            else {\n                show();\n            }\n        }\n\n        function show() {\n            var event = $.Event(\'beforeShow.spectrum\');\n\n            if (visible) {\n                reflow();\n                return;\n            }\n\n            boundElement.trigger(event, [ get() ]);\n\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\n                return;\n            }\n\n            hideAll();\n            visible = true;\n\n            $(doc).on("keydown.spectrum", onkeydown);\n            $(doc).on("click.spectrum", clickout);\n            $(window).on("resize.spectrum", resize);\n            replacer.addClass("sp-active");\n            container.removeClass("sp-hidden");\n\n            reflow();\n            updateUI();\n\n            colorOnShow = get();\n\n            drawInitial();\n            callbacks.show(colorOnShow);\n            boundElement.trigger(\'show.spectrum\', [ colorOnShow ]);\n        }\n\n        function onkeydown(e) {\n            // Close on ESC\n            if (e.keyCode === 27) {\n                hide();\n            }\n        }\n\n        function clickout(e) {\n            // Return on right click.\n            if (e.button == 2) { return; }\n\n            // If a drag event was happening during the mouseup, don\'t hide\n            // on click.\n            if (isDragging) { return; }\n\n            if (clickoutFiresChange) {\n                updateOriginalInput(true);\n            }\n            else {\n                revert();\n            }\n            hide();\n        }\n\n        function hide() {\n            // Return if hiding is unnecessary\n            if (!visible || flat) { return; }\n            visible = false;\n\n            $(doc).off("keydown.spectrum", onkeydown);\n            $(doc).off("click.spectrum", clickout);\n            $(window).off("resize.spectrum", resize);\n\n            replacer.removeClass("sp-active");\n            container.addClass("sp-hidden");\n\n            callbacks.hide(get());\n            boundElement.trigger(\'hide.spectrum\', [ get() ]);\n        }\n\n        function revert() {\n            set(colorOnShow, true);\n            updateOriginalInput(true);\n        }\n\n        function set(color, ignoreFormatChange) {\n            if (tinycolor.equals(color, get())) {\n                // Update UI just in case a validation error needs\n                // to be cleared.\n                updateUI();\n                return;\n            }\n\n            var newColor, newHsv;\n            if (!color && allowEmpty) {\n                isEmpty = true;\n            } else {\n                isEmpty = false;\n                newColor = tinycolor(color);\n                newHsv = newColor.toHsv();\n\n                currentHue = (newHsv.h % 360) / 360;\n                currentSaturation = newHsv.s;\n                currentValue = newHsv.v;\n                currentAlpha = newHsv.a;\n            }\n            updateUI();\n\n            if (newColor && newColor.isValid() && !ignoreFormatChange) {\n                currentPreferredFormat = opts.preferredFormat || newColor.getFormat();\n            }\n        }\n\n        function get(opts) {\n            opts = opts || { };\n\n            if (allowEmpty && isEmpty) {\n                return null;\n            }\n\n            return tinycolor.fromRatio({\n                h: currentHue,\n                s: currentSaturation,\n                v: currentValue,\n                a: Math.round(currentAlpha * 1000) / 1000\n            }, { format: opts.format || currentPreferredFormat });\n        }\n\n        function isValid() {\n            return !textInput.hasClass("sp-validation-error");\n        }\n\n        function move() {\n            updateUI();\n\n            callbacks.move(get());\n            boundElement.trigger(\'move.spectrum\', [ get() ]);\n        }\n\n        function updateUI() {\n\n            textInput.removeClass("sp-validation-error");\n\n            updateHelperLocations();\n\n            // Update dragger background color (gradients take care of saturation and value).\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\n            dragger.css("background-color", flatColor.toHexString());\n\n            // Get a format that alpha will be included in (hex and names ignore alpha)\n            var format = currentPreferredFormat;\n            if (currentAlpha < 1 && !(currentAlpha === 0 && format === "name")) {\n                if (format === "hex" || format === "hex3" || format === "hex6" || format === "name") {\n                    format = "rgb";\n                }\n            }\n\n            var realColor = get({ format: format }),\n                displayColor = \'\';\n\n             //reset background info for preview element\n            previewElement.removeClass("sp-clear-display");\n            previewElement.css(\'background-color\', \'transparent\');\n\n            if (!realColor && allowEmpty) {\n                // Update the replaced elements background with icon indicating no color selection\n                previewElement.addClass("sp-clear-display");\n            }\n            else {\n                var realHex = realColor.toHexString(),\n                    realRgb = realColor.toRgbString();\n\n                // Update the replaced elements background color (with actual selected color)\n                if (rgbaSupport || realColor.alpha === 1) {\n                    previewElement.css("background-color", realRgb);\n                }\n                else {\n                    previewElement.css("background-color", "transparent");\n                    previewElement.css("filter", realColor.toFilter());\n                }\n\n                if (opts.showAlpha) {\n                    var rgb = realColor.toRgb();\n                    rgb.a = 0;\n                    var realAlpha = tinycolor(rgb).toRgbString();\n                    var gradient = "linear-gradient(left, " + realAlpha + ", " + realHex + ")";\n\n                    if (IE) {\n                        alphaSliderInner.css("filter", tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\n                    }\n                    else {\n                        alphaSliderInner.css("background", "-webkit-" + gradient);\n                        alphaSliderInner.css("background", "-moz-" + gradient);\n                        alphaSliderInner.css("background", "-ms-" + gradient);\n                        // Use current syntax gradient on unprefixed property.\n                        alphaSliderInner.css("background",\n                            "linear-gradient(to right, " + realAlpha + ", " + realHex + ")");\n                    }\n                }\n\n                displayColor = realColor.toString(format);\n            }\n\n            // Update the text entry input as it changes happen\n            if (opts.showInput) {\n                textInput.val(displayColor);\n            }\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            drawInitial();\n        }\n\n        function updateHelperLocations() {\n            var s = currentSaturation;\n            var v = currentValue;\n\n            if(allowEmpty && isEmpty) {\n                //if selected color is empty, hide the helpers\n                alphaSlideHelper.hide();\n                slideHelper.hide();\n                dragHelper.hide();\n            }\n            else {\n                //make sure helpers are visible\n                alphaSlideHelper.show();\n                slideHelper.show();\n                dragHelper.show();\n\n                // Where to show the little circle in that displays your current selected color\n                var dragX = s * dragWidth;\n                var dragY = dragHeight - (v * dragHeight);\n                dragX = Math.max(\n                    -dragHelperHeight,\n                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\n                );\n                dragY = Math.max(\n                    -dragHelperHeight,\n                    Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\n                );\n                dragHelper.css({\n                    "top": dragY + "px",\n                    "left": dragX + "px"\n                });\n\n                var alphaX = currentAlpha * alphaWidth;\n                alphaSlideHelper.css({\n                    "left": (alphaX - (alphaSlideHelperWidth / 2)) + "px"\n                });\n\n                // Where to show the bar that displays your current selected hue\n                var slideY = (currentHue) * slideHeight;\n                slideHelper.css({\n                    "top": (slideY - slideHelperHeight) + "px"\n                });\n            }\n        }\n\n        function updateOriginalInput(fireCallback) {\n            var color = get(),\n                displayColor = \'\',\n                hasChanged = !tinycolor.equals(color, colorOnShow);\n\n            if (color) {\n                displayColor = color.toString(currentPreferredFormat);\n                // Update the selection palette with the current color\n                addColorToSelectionPalette(color);\n            }\n\n            if (isInput) {\n                boundElement.val(displayColor);\n            }\n\n            if (fireCallback && hasChanged) {\n                callbacks.change(color);\n                boundElement.trigger(\'change\', [ color ]);\n            }\n        }\n\n        function reflow() {\n            if (!visible) {\n                return; // Calculations would be useless and wouldn\'t be reliable anyways\n            }\n            dragWidth = dragger.width();\n            dragHeight = dragger.height();\n            dragHelperHeight = dragHelper.height();\n            slideWidth = slider.width();\n            slideHeight = slider.height();\n            slideHelperHeight = slideHelper.height();\n            alphaWidth = alphaSlider.width();\n            alphaSlideHelperWidth = alphaSlideHelper.width();\n\n            if (!flat) {\n                container.css("position", "absolute");\n                if (opts.offset) {\n                    container.offset(opts.offset);\n                } else {\n                    container.offset(getOffset(container, offsetElement));\n                }\n            }\n\n            updateHelperLocations();\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            boundElement.trigger(\'reflow.spectrum\');\n        }\n\n        function destroy() {\n            boundElement.show();\n            offsetElement.off("click.spectrum touchstart.spectrum");\n            container.remove();\n            replacer.remove();\n            spectrums[spect.id] = null;\n        }\n\n        function option(optionName, optionValue) {\n            if (optionName === undefined) {\n                return $.extend({}, opts);\n            }\n            if (optionValue === undefined) {\n                return opts[optionName];\n            }\n\n            opts[optionName] = optionValue;\n\n            if (optionName === "preferredFormat") {\n                currentPreferredFormat = opts.preferredFormat;\n            }\n            applyOptions();\n        }\n\n        function enable() {\n            disabled = false;\n            boundElement.attr("disabled", false);\n            offsetElement.removeClass("sp-disabled");\n        }\n\n        function disable() {\n            hide();\n            disabled = true;\n            boundElement.attr("disabled", true);\n            offsetElement.addClass("sp-disabled");\n        }\n\n        function setOffset(coord) {\n            opts.offset = coord;\n            reflow();\n        }\n\n        initialize();\n\n        var spect = {\n            show: show,\n            hide: hide,\n            toggle: toggle,\n            reflow: reflow,\n            option: option,\n            enable: enable,\n            disable: disable,\n            offset: setOffset,\n            set: function (c) {\n                set(c);\n                updateOriginalInput();\n            },\n            get: get,\n            destroy: destroy,\n            container: container\n        };\n\n        spect.id = spectrums.push(spect) - 1;\n\n        return spect;\n    }\n\n    /**\n    * checkOffset - get the offset below/above and left/right element depending on screen position\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\n    */\n    function getOffset(picker, input) {\n        var extraY = 0;\n        var dpWidth = picker.outerWidth();\n        var dpHeight = picker.outerHeight();\n        var inputHeight = input.outerHeight();\n        var doc = picker[0].ownerDocument;\n        var docElem = doc.documentElement;\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\n        var offset = input.offset();\n        var offsetLeft = offset.left;\n        var offsetTop = offset.top;\n\n        offsetTop += inputHeight;\n\n        offsetLeft -=\n            Math.min(offsetLeft, (offsetLeft + dpWidth > viewWidth && viewWidth > dpWidth) ?\n            Math.abs(offsetLeft + dpWidth - viewWidth) : 0);\n\n        offsetTop -=\n            Math.min(offsetTop, ((offsetTop + dpHeight > viewHeight && viewHeight > dpHeight) ?\n            Math.abs(dpHeight + inputHeight - extraY) : extraY));\n\n        return {\n            top: offsetTop,\n            bottom: offset.bottom,\n            left: offsetLeft,\n            right: offset.right,\n            width: offset.width,\n            height: offset.height\n        };\n    }\n\n    /**\n    * noop - do nothing\n    */\n    function noop() {\n\n    }\n\n    /**\n    * stopPropagation - makes the code only doing this a little easier to read in line\n    */\n    function stopPropagation(e) {\n        e.stopPropagation();\n    }\n\n    /**\n    * Create a function bound to a given object\n    * Thanks to underscore.js\n    */\n    function bind(func, obj) {\n        var slice = Array.prototype.slice;\n        var args = slice.call(arguments, 2);\n        return function () {\n            return func.apply(obj, args.concat(slice.call(arguments)));\n        };\n    }\n\n    /**\n    * Lightweight drag helper.  Handles containment within the element, so that\n    * when dragging, the x is within [0,element.width] and y is within [0,element.height]\n    */\n    function draggable(element, onmove, onstart, onstop) {\n        onmove = onmove || function () { };\n        onstart = onstart || function () { };\n        onstop = onstop || function () { };\n        var doc = document;\n        var dragging = false;\n        var offset = {};\n        var maxHeight = 0;\n        var maxWidth = 0;\n        var hasTouch = (\'ontouchstart\' in window);\n\n        var duringDragEvents = {};\n        duringDragEvents["selectstart"] = prevent;\n        duringDragEvents["dragstart"] = prevent;\n        duringDragEvents["touchmove mousemove"] = move;\n        duringDragEvents["touchend mouseup"] = stop;\n\n        function prevent(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            e.returnValue = false;\n        }\n\n        function move(e) {\n            if (dragging) {\n                // Mouseup happened outside of window\n                if (IE && doc.documentMode < 9 && !e.button) {\n                    return stop();\n                }\n\n                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];\n                var pageX = t0 && t0.pageX || e.pageX;\n                var pageY = t0 && t0.pageY || e.pageY;\n\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\n\n                if (hasTouch) {\n                    // Stop scrolling in iOS\n                    prevent(e);\n                }\n\n                onmove.apply(element, [dragX, dragY, e]);\n            }\n        }\n\n        function start(e) {\n            var rightclick = (e.which) ? (e.which == 3) : (e.button == 2);\n\n            if (!rightclick && !dragging) {\n                if (onstart.apply(element, arguments) !== false) {\n                    dragging = true;\n                    maxHeight = $(element).height();\n                    maxWidth = $(element).width();\n                    offset = $(element).offset();\n\n                    $(doc).on(duringDragEvents);\n                    $(doc.body).addClass("sp-dragging");\n\n                    move(e);\n\n                    prevent(e);\n                }\n            }\n        }\n\n        function stop() {\n            if (dragging) {\n                $(doc).off(duringDragEvents);\n                $(doc.body).removeClass("sp-dragging");\n\n                // Wait a tick before notifying observers to allow the click event\n                // to fire in Chrome.\n                setTimeout(function() {\n                    onstop.apply(element, arguments);\n                }, 0);\n            }\n            dragging = false;\n        }\n\n        $(element).on("touchstart mousedown", start);\n    }\n\n    function throttle(func, wait, debounce) {\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            var throttler = function () {\n                timeout = null;\n                func.apply(context, args);\n            };\n            if (debounce) clearTimeout(timeout);\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\n        };\n    }\n\n    function inputTypeColorSupport() {\n        return $.fn.spectrum.inputTypeColorSupport();\n    }\n\n    /**\n    * Define a jQuery plugin\n    */\n    var dataID = "spectrum.id";\n    $.fn.spectrum = function (opts, extra) {\n\n        if (typeof opts == "string") {\n\n            var returnValue = this;\n            var args = Array.prototype.slice.call( arguments, 1 );\n\n            this.each(function () {\n                var spect = spectrums[$(this).data(dataID)];\n                if (spect) {\n                    var method = spect[opts];\n                    if (!method) {\n                        throw new Error( "Spectrum: no such method: \'" + opts + "\'" );\n                    }\n\n                    if (opts == "get") {\n                        returnValue = spect.get();\n                    }\n                    else if (opts == "container") {\n                        returnValue = spect.container;\n                    }\n                    else if (opts == "option") {\n                        returnValue = spect.option.apply(spect, args);\n                    }\n                    else if (opts == "destroy") {\n                        spect.destroy();\n                        $(this).removeData(dataID);\n                    }\n                    else {\n                        method.apply(spect, args);\n                    }\n                }\n            });\n\n            return returnValue;\n        }\n\n        // Initializing a new instance of spectrum\n        return this.spectrum("destroy").each(function () {\n            var options = $.extend({}, $(this).data(), opts);\n            var spect = spectrum(this, options);\n            $(this).data(dataID, spect.id);\n        });\n    };\n\n    $.fn.spectrum.load = true;\n    $.fn.spectrum.loadOpts = {};\n    $.fn.spectrum.draggable = draggable;\n    $.fn.spectrum.defaults = defaultOpts;\n    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {\n        if (typeof inputTypeColorSupport._cachedResult === "undefined") {\n            var colorInput = $("<input type=\'color\'/>")[0]; // if color element is supported, value will default to not null\n            inputTypeColorSupport._cachedResult = colorInput.type === "color" && colorInput.value !== "";\n        }\n        return inputTypeColorSupport._cachedResult;\n    };\n\n    $.spectrum = { };\n    $.spectrum.localization = { };\n    $.spectrum.palettes = { };\n\n    $.fn.spectrum.processNativeColorInputs = function () {\n        var colorInputs = $("input[type=color]");\n        if (colorInputs.length && !inputTypeColorSupport()) {\n            colorInputs.spectrum({\n                preferredFormat: "hex6"\n            });\n        }\n    };\n\n    // TinyColor v1.1.2\n    // https://github.com/bgrins/TinyColor\n    // Brian Grinstead, MIT License\n\n    (function() {\n\n    var trimLeft = /^[\\s,#]+/,\n        trimRight = /\\s+$/,\n        tinyCounter = 0,\n        math = Math,\n        mathRound = math.round,\n        mathMin = math.min,\n        mathMax = math.max,\n        mathRandom = math.random;\n\n    var tinycolor = function(color, opts) {\n\n        color = (color) ? color : \'\';\n        opts = opts || { };\n\n        // If input is already a tinycolor, return itself\n        if (color instanceof tinycolor) {\n           return color;\n        }\n        // If we are called as a function, call using new instead\n        if (!(this instanceof tinycolor)) {\n            return new tinycolor(color, opts);\n        }\n\n        var rgb = inputToRGB(color);\n        this._originalInput = color;\n        this._r = rgb.r;\n        this._g = rgb.g;\n        this._b = rgb.b;\n        this._a = rgb.a;\n        this._roundA = mathRound(1000 * this._a) / 1000;\n        this._format = opts.format || rgb.format;\n        this._gradientType = opts.gradientType;\n\n        // Don\'t let the range of [0,255] come back in [0,1].\n        // Potentially lose a little bit of precision here, but will fix issues where\n        // .5 gets interpreted as half of the total, instead of half of 1\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n        if (this._r < 1) { this._r = mathRound(this._r); }\n        if (this._g < 1) { this._g = mathRound(this._g); }\n        if (this._b < 1) { this._b = mathRound(this._b); }\n\n        this._ok = rgb.ok;\n        this._tc_id = tinyCounter++;\n    };\n\n    tinycolor.prototype = {\n        isDark: function() {\n            return this.getBrightness() < 128;\n        },\n        isLight: function() {\n            return !this.isDark();\n        },\n        isValid: function() {\n            return this._ok;\n        },\n        getOriginalInput: function() {\n          return this._originalInput;\n        },\n        getFormat: function() {\n            return this._format;\n        },\n        getAlpha: function() {\n            return this._a;\n        },\n        getBrightness: function() {\n            var rgb = this.toRgb();\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n        },\n        setAlpha: function(value) {\n            this._a = boundAlpha(value);\n            this._roundA = mathRound(1000 * this._a) / 1000;\n            return this;\n        },\n        toHsv: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n        },\n        toHsvString: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n            return (this._a == 1) ?\n              "hsv("  + h + ", " + s + "%, " + v + "%)" :\n              "hsva(" + h + ", " + s + "%, " + v + "%, "+ this._roundA + ")";\n        },\n        toHsl: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n        },\n        toHslString: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n            return (this._a == 1) ?\n              "hsl("  + h + ", " + s + "%, " + l + "%)" :\n              "hsla(" + h + ", " + s + "%, " + l + "%, "+ this._roundA + ")";\n        },\n        toHex: function(allow3Char) {\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\n        },\n        toHexString: function(allow3Char) {\n            return \'#\' + this.toHex(allow3Char);\n        },\n        toHex8: function() {\n            return rgbaToHex(this._r, this._g, this._b, this._a);\n        },\n        toHex8String: function() {\n            return \'#\' + this.toHex8();\n        },\n        toRgb: function() {\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n        },\n        toRgbString: function() {\n            return (this._a == 1) ?\n              "rgb("  + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ")" :\n              "rgba(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ", " + this._roundA + ")";\n        },\n        toPercentageRgb: function() {\n            return { r: mathRound(bound01(this._r, 255) * 100) + "%", g: mathRound(bound01(this._g, 255) * 100) + "%", b: mathRound(bound01(this._b, 255) * 100) + "%", a: this._a };\n        },\n        toPercentageRgbString: function() {\n            return (this._a == 1) ?\n              "rgb("  + mathRound(bound01(this._r, 255) * 100) + "%, " + mathRound(bound01(this._g, 255) * 100) + "%, " + mathRound(bound01(this._b, 255) * 100) + "%)" :\n              "rgba(" + mathRound(bound01(this._r, 255) * 100) + "%, " + mathRound(bound01(this._g, 255) * 100) + "%, " + mathRound(bound01(this._b, 255) * 100) + "%, " + this._roundA + ")";\n        },\n        toName: function() {\n            if (this._a === 0) {\n                return "transparent";\n            }\n\n            if (this._a < 1) {\n                return false;\n            }\n\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n        },\n        toFilter: function(secondColor) {\n            var hex8String = \'#\' + rgbaToHex(this._r, this._g, this._b, this._a);\n            var secondHex8String = hex8String;\n            var gradientType = this._gradientType ? "GradientType = 1, " : "";\n\n            if (secondColor) {\n                var s = tinycolor(secondColor);\n                secondHex8String = s.toHex8String();\n            }\n\n            return "progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")";\n        },\n        toString: function(format) {\n            var formatSet = !!format;\n            format = format || this._format;\n\n            var formattedString = false;\n            var hasAlpha = this._a < 1 && this._a >= 0;\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === "hex" || format === "hex6" || format === "hex3" || format === "name");\n\n            if (needsAlphaFormat) {\n                // Special case for "transparent", all other non-alpha formats\n                // will return rgba when there is transparency.\n                if (format === "name" && this._a === 0) {\n                    return this.toName();\n                }\n                return this.toRgbString();\n            }\n            if (format === "rgb") {\n                formattedString = this.toRgbString();\n            }\n            if (format === "prgb") {\n                formattedString = this.toPercentageRgbString();\n            }\n            if (format === "hex" || format === "hex6") {\n                formattedString = this.toHexString();\n            }\n            if (format === "hex3") {\n                formattedString = this.toHexString(true);\n            }\n            if (format === "hex8") {\n                formattedString = this.toHex8String();\n            }\n            if (format === "name") {\n                formattedString = this.toName();\n            }\n            if (format === "hsl") {\n                formattedString = this.toHslString();\n            }\n            if (format === "hsv") {\n                formattedString = this.toHsvString();\n            }\n\n            return formattedString || this.toHexString();\n        },\n\n        _applyModification: function(fn, args) {\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\n            this._r = color._r;\n            this._g = color._g;\n            this._b = color._b;\n            this.setAlpha(color._a);\n            return this;\n        },\n        lighten: function() {\n            return this._applyModification(lighten, arguments);\n        },\n        brighten: function() {\n            return this._applyModification(brighten, arguments);\n        },\n        darken: function() {\n            return this._applyModification(darken, arguments);\n        },\n        desaturate: function() {\n            return this._applyModification(desaturate, arguments);\n        },\n        saturate: function() {\n            return this._applyModification(saturate, arguments);\n        },\n        greyscale: function() {\n            return this._applyModification(greyscale, arguments);\n        },\n        spin: function() {\n            return this._applyModification(spin, arguments);\n        },\n\n        _applyCombination: function(fn, args) {\n            return fn.apply(null, [this].concat([].slice.call(args)));\n        },\n        analogous: function() {\n            return this._applyCombination(analogous, arguments);\n        },\n        complement: function() {\n            return this._applyCombination(complement, arguments);\n        },\n        monochromatic: function() {\n            return this._applyCombination(monochromatic, arguments);\n        },\n        splitcomplement: function() {\n            return this._applyCombination(splitcomplement, arguments);\n        },\n        triad: function() {\n            return this._applyCombination(triad, arguments);\n        },\n        tetrad: function() {\n            return this._applyCombination(tetrad, arguments);\n        }\n    };\n\n    // If input is an object, force 1 into "1.0" to handle ratios properly\n    // String input requires "1.0" as input, so 1 will be treated as 1\n    tinycolor.fromRatio = function(color, opts) {\n        if (typeof color == "object") {\n            var newColor = {};\n            for (var i in color) {\n                if (color.hasOwnProperty(i)) {\n                    if (i === "a") {\n                        newColor[i] = color[i];\n                    }\n                    else {\n                        newColor[i] = convertToPercentage(color[i]);\n                    }\n                }\n            }\n            color = newColor;\n        }\n\n        return tinycolor(color, opts);\n    };\n\n    // Given a string or object, convert that input to RGB\n    // Possible string inputs:\n    //\n    //     "red"\n    //     "#f00" or "f00"\n    //     "#ff0000" or "ff0000"\n    //     "#ff000000" or "ff000000"\n    //     "rgb 255 0 0" or "rgb (255, 0, 0)"\n    //     "rgb 1.0 0 0" or "rgb (1, 0, 0)"\n    //     "rgba (255, 0, 0, 1)" or "rgba 255, 0, 0, 1"\n    //     "rgba (1.0, 0, 0, 1)" or "rgba 1.0, 0, 0, 1"\n    //     "hsl(0, 100%, 50%)" or "hsl 0 100% 50%"\n    //     "hsla(0, 100%, 50%, 1)" or "hsla 0 100% 50%, 1"\n    //     "hsv(0, 100%, 100%)" or "hsv 0 100% 100%"\n    //\n    function inputToRGB(color) {\n\n        var rgb = { r: 0, g: 0, b: 0 };\n        var a = 1;\n        var ok = false;\n        var format = false;\n\n        if (typeof color == "string") {\n            color = stringInputToObject(color);\n        }\n\n        if (typeof color == "object") {\n            if (color.hasOwnProperty("r") && color.hasOwnProperty("g") && color.hasOwnProperty("b")) {\n                rgb = rgbToRgb(color.r, color.g, color.b);\n                ok = true;\n                format = String(color.r).substr(-1) === "%" ? "prgb" : "rgb";\n            }\n            else if (color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("v")) {\n                color.s = convertToPercentage(color.s);\n                color.v = convertToPercentage(color.v);\n                rgb = hsvToRgb(color.h, color.s, color.v);\n                ok = true;\n                format = "hsv";\n            }\n            else if (color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("l")) {\n                color.s = convertToPercentage(color.s);\n                color.l = convertToPercentage(color.l);\n                rgb = hslToRgb(color.h, color.s, color.l);\n                ok = true;\n                format = "hsl";\n            }\n\n            if (color.hasOwnProperty("a")) {\n                a = color.a;\n            }\n        }\n\n        a = boundAlpha(a);\n\n        return {\n            ok: ok,\n            format: color.format || format,\n            r: mathMin(255, mathMax(rgb.r, 0)),\n            g: mathMin(255, mathMax(rgb.g, 0)),\n            b: mathMin(255, mathMax(rgb.b, 0)),\n            a: a\n        };\n    }\n\n\n    // Conversion Functions\n    // --------------------\n\n    // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n    // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n    // `rgbToRgb`\n    // Handle bounds / percentage checking to conform to CSS color spec\n    // <http://www.w3.org/TR/css3-color/>\n    // *Assumes:* r, g, b in [0, 255] or [0, 1]\n    // *Returns:* { r, g, b } in [0, 255]\n    function rgbToRgb(r, g, b){\n        return {\n            r: bound01(r, 255) * 255,\n            g: bound01(g, 255) * 255,\n            b: bound01(b, 255) * 255\n        };\n    }\n\n    // `rgbToHsl`\n    // Converts an RGB color value to HSL.\n    // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n    // *Returns:* { h, s, l } in [0,1]\n    function rgbToHsl(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, l = (max + min) / 2;\n\n        if(max == min) {\n            h = s = 0; // achromatic\n        }\n        else {\n            var d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n\n            h /= 6;\n        }\n\n        return { h: h, s: s, l: l };\n    }\n\n    // `hslToRgb`\n    // Converts an HSL color value to RGB.\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n    // *Returns:* { r, g, b } in the set [0, 255]\n    function hslToRgb(h, s, l) {\n        var r, g, b;\n\n        h = bound01(h, 360);\n        s = bound01(s, 100);\n        l = bound01(l, 100);\n\n        function hue2rgb(p, q, t) {\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        if(s === 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n    // `rgbToHsv`\n    // Converts an RGB color value to HSV\n    // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n    // *Returns:* { h, s, v } in [0,1]\n    function rgbToHsv(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, v = max;\n\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n\n        if(max == min) {\n            h = 0; // achromatic\n        }\n        else {\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            h /= 6;\n        }\n        return { h: h, s: s, v: v };\n    }\n\n    // `hsvToRgb`\n    // Converts an HSV color value to RGB.\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n    // *Returns:* { r, g, b } in the set [0, 255]\n     function hsvToRgb(h, s, v) {\n\n        h = bound01(h, 360) * 6;\n        s = bound01(s, 100);\n        v = bound01(v, 100);\n\n        var i = math.floor(h),\n            f = h - i,\n            p = v * (1 - s),\n            q = v * (1 - f * s),\n            t = v * (1 - (1 - f) * s),\n            mod = i % 6,\n            r = [v, q, p, p, t, v][mod],\n            g = [t, v, v, q, p, p][mod],\n            b = [p, p, t, v, v, q][mod];\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n    // `rgbToHex`\n    // Converts an RGB color to hex\n    // Assumes r, g, and b are contained in the set [0, 255]\n    // Returns a 3 or 6 character hex\n    function rgbToHex(r, g, b, allow3Char) {\n\n        var hex = [\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16))\n        ];\n\n        // Return a 3 character hex if possible\n        if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n        }\n\n        return hex.join("");\n    }\n        // `rgbaToHex`\n        // Converts an RGBA color plus alpha transparency to hex\n        // Assumes r, g, b and a are contained in the set [0, 255]\n        // Returns an 8 character hex\n        function rgbaToHex(r, g, b, a) {\n\n            var hex = [\n                pad2(convertDecimalToHex(a)),\n                pad2(mathRound(r).toString(16)),\n                pad2(mathRound(g).toString(16)),\n                pad2(mathRound(b).toString(16))\n            ];\n\n            return hex.join("");\n        }\n\n    // `equals`\n    // Can be called with any tinycolor input\n    tinycolor.equals = function (color1, color2) {\n        if (!color1 || !color2) { return false; }\n        return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n    };\n    tinycolor.random = function() {\n        return tinycolor.fromRatio({\n            r: mathRandom(),\n            g: mathRandom(),\n            b: mathRandom()\n        });\n    };\n\n\n    // Modification Functions\n    // ----------------------\n    // Thanks to less.js for some of the basics here\n    // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n    function desaturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s -= amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function saturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s += amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function greyscale(color) {\n        return tinycolor(color).desaturate(100);\n    }\n\n    function lighten (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l += amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n    function brighten(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var rgb = tinycolor(color).toRgb();\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n        return tinycolor(rgb);\n    }\n\n    function darken (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l -= amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n    // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n    // Values outside of this range will be wrapped into this range.\n    function spin(color, amount) {\n        var hsl = tinycolor(color).toHsl();\n        var hue = (mathRound(hsl.h) + amount) % 360;\n        hsl.h = hue < 0 ? 360 + hue : hue;\n        return tinycolor(hsl);\n    }\n\n    // Combination Functions\n    // ---------------------\n    // Thanks to jQuery xColor for some of the ideas behind these\n    // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n    function complement(color) {\n        var hsl = tinycolor(color).toHsl();\n        hsl.h = (hsl.h + 180) % 360;\n        return tinycolor(hsl);\n    }\n\n    function triad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function tetrad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function splitcomplement(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n        ];\n    }\n\n    function analogous(color, results, slices) {\n        results = results || 6;\n        slices = slices || 30;\n\n        var hsl = tinycolor(color).toHsl();\n        var part = 360 / slices;\n        var ret = [tinycolor(color)];\n\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n            hsl.h = (hsl.h + part) % 360;\n            ret.push(tinycolor(hsl));\n        }\n        return ret;\n    }\n\n    function monochromatic(color, results) {\n        results = results || 6;\n        var hsv = tinycolor(color).toHsv();\n        var h = hsv.h, s = hsv.s, v = hsv.v;\n        var ret = [];\n        var modification = 1 / results;\n\n        while (results--) {\n            ret.push(tinycolor({ h: h, s: s, v: v}));\n            v = (v + modification) % 1;\n        }\n\n        return ret;\n    }\n\n    // Utility Functions\n    // ---------------------\n\n    tinycolor.mix = function(color1, color2, amount) {\n        amount = (amount === 0) ? 0 : (amount || 50);\n\n        var rgb1 = tinycolor(color1).toRgb();\n        var rgb2 = tinycolor(color2).toRgb();\n\n        var p = amount / 100;\n        var w = p * 2 - 1;\n        var a = rgb2.a - rgb1.a;\n\n        var w1;\n\n        if (w * a == -1) {\n            w1 = w;\n        } else {\n            w1 = (w + a) / (1 + w * a);\n        }\n\n        w1 = (w1 + 1) / 2;\n\n        var w2 = 1 - w1;\n\n        var rgba = {\n            r: rgb2.r * w1 + rgb1.r * w2,\n            g: rgb2.g * w1 + rgb1.g * w2,\n            b: rgb2.b * w1 + rgb1.b * w2,\n            a: rgb2.a * p  + rgb1.a * (1 - p)\n        };\n\n        return tinycolor(rgba);\n    };\n\n\n    // Readability Functions\n    // ---------------------\n    // <http://www.w3.org/TR/AERT#color-contrast>\n\n    // `readability`\n    // Analyze the 2 colors and returns an object with the following properties:\n    //    `brightness`: difference in brightness between the two colors\n    //    `color`: difference in color/hue between the two colors\n    tinycolor.readability = function(color1, color2) {\n        var c1 = tinycolor(color1);\n        var c2 = tinycolor(color2);\n        var rgb1 = c1.toRgb();\n        var rgb2 = c2.toRgb();\n        var brightnessA = c1.getBrightness();\n        var brightnessB = c2.getBrightness();\n        var colorDiff = (\n            Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) +\n            Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) +\n            Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b)\n        );\n\n        return {\n            brightness: Math.abs(brightnessA - brightnessB),\n            color: colorDiff\n        };\n    };\n\n    // `readable`\n    // http://www.w3.org/TR/AERT#color-contrast\n    // Ensure that foreground and background color combinations provide sufficient contrast.\n    // *Example*\n    //    tinycolor.isReadable("#000", "#111") => false\n    tinycolor.isReadable = function(color1, color2) {\n        var readability = tinycolor.readability(color1, color2);\n        return readability.brightness > 125 && readability.color > 500;\n    };\n\n    // `mostReadable`\n    // Given a base color and a list of possible foreground or background\n    // colors for that base, returns the most readable color.\n    // *Example*\n    //    tinycolor.mostReadable("#123", ["#fff", "#000"]) => "#000"\n    tinycolor.mostReadable = function(baseColor, colorList) {\n        var bestColor = null;\n        var bestScore = 0;\n        var bestIsReadable = false;\n        for (var i=0; i < colorList.length; i++) {\n\n            // We normalize both around the "acceptable" breaking point,\n            // but rank brightness constrast higher than hue.\n\n            var readability = tinycolor.readability(baseColor, colorList[i]);\n            var readable = readability.brightness > 125 && readability.color > 500;\n            var score = 3 * (readability.brightness / 125) + (readability.color / 500);\n\n            if ((readable && ! bestIsReadable) ||\n                (readable && bestIsReadable && score > bestScore) ||\n                ((! readable) && (! bestIsReadable) && score > bestScore)) {\n                bestIsReadable = readable;\n                bestScore = score;\n                bestColor = tinycolor(colorList[i]);\n            }\n        }\n        return bestColor;\n    };\n\n\n    // Big List of Colors\n    // ------------------\n    // <http://www.w3.org/TR/css3-color/#svg-color>\n    var names = tinycolor.names = {\n        aliceblue: "f0f8ff",\n        antiquewhite: "faebd7",\n        aqua: "0ff",\n        aquamarine: "7fffd4",\n        azure: "f0ffff",\n        beige: "f5f5dc",\n        bisque: "ffe4c4",\n        black: "000",\n        blanchedalmond: "ffebcd",\n        blue: "00f",\n        blueviolet: "8a2be2",\n        brown: "a52a2a",\n        burlywood: "deb887",\n        burntsienna: "ea7e5d",\n        cadetblue: "5f9ea0",\n        chartreuse: "7fff00",\n        chocolate: "d2691e",\n        coral: "ff7f50",\n        cornflowerblue: "6495ed",\n        cornsilk: "fff8dc",\n        crimson: "dc143c",\n        cyan: "0ff",\n        darkblue: "00008b",\n        darkcyan: "008b8b",\n        darkgoldenrod: "b8860b",\n        darkgray: "a9a9a9",\n        darkgreen: "006400",\n        darkgrey: "a9a9a9",\n        darkkhaki: "bdb76b",\n        darkmagenta: "8b008b",\n        darkolivegreen: "556b2f",\n        darkorange: "ff8c00",\n        darkorchid: "9932cc",\n        darkred: "8b0000",\n        darksalmon: "e9967a",\n        darkseagreen: "8fbc8f",\n        darkslateblue: "483d8b",\n        darkslategray: "2f4f4f",\n        darkslategrey: "2f4f4f",\n        darkturquoise: "00ced1",\n        darkviolet: "9400d3",\n        deeppink: "ff1493",\n        deepskyblue: "00bfff",\n        dimgray: "696969",\n        dimgrey: "696969",\n        dodgerblue: "1e90ff",\n        firebrick: "b22222",\n        floralwhite: "fffaf0",\n        forestgreen: "228b22",\n        fuchsia: "f0f",\n        gainsboro: "dcdcdc",\n        ghostwhite: "f8f8ff",\n        gold: "ffd700",\n        goldenrod: "daa520",\n        gray: "808080",\n        green: "008000",\n        greenyellow: "adff2f",\n        grey: "808080",\n        honeydew: "f0fff0",\n        hotpink: "ff69b4",\n        indianred: "cd5c5c",\n        indigo: "4b0082",\n        ivory: "fffff0",\n        khaki: "f0e68c",\n        lavender: "e6e6fa",\n        lavenderblush: "fff0f5",\n        lawngreen: "7cfc00",\n        lemonchiffon: "fffacd",\n        lightblue: "add8e6",\n        lightcoral: "f08080",\n        lightcyan: "e0ffff",\n        lightgoldenrodyellow: "fafad2",\n        lightgray: "d3d3d3",\n        lightgreen: "90ee90",\n        lightgrey: "d3d3d3",\n        lightpink: "ffb6c1",\n        lightsalmon: "ffa07a",\n        lightseagreen: "20b2aa",\n        lightskyblue: "87cefa",\n        lightslategray: "789",\n        lightslategrey: "789",\n        lightsteelblue: "b0c4de",\n        lightyellow: "ffffe0",\n        lime: "0f0",\n        limegreen: "32cd32",\n        linen: "faf0e6",\n        magenta: "f0f",\n        maroon: "800000",\n        mediumaquamarine: "66cdaa",\n        mediumblue: "0000cd",\n        mediumorchid: "ba55d3",\n        mediumpurple: "9370db",\n        mediumseagreen: "3cb371",\n        mediumslateblue: "7b68ee",\n        mediumspringgreen: "00fa9a",\n        mediumturquoise: "48d1cc",\n        mediumvioletred: "c71585",\n        midnightblue: "191970",\n        mintcream: "f5fffa",\n        mistyrose: "ffe4e1",\n        moccasin: "ffe4b5",\n        navajowhite: "ffdead",\n        navy: "000080",\n        oldlace: "fdf5e6",\n        olive: "808000",\n        olivedrab: "6b8e23",\n        orange: "ffa500",\n        orangered: "ff4500",\n        orchid: "da70d6",\n        palegoldenrod: "eee8aa",\n        palegreen: "98fb98",\n        paleturquoise: "afeeee",\n        palevioletred: "db7093",\n        papayawhip: "ffefd5",\n        peachpuff: "ffdab9",\n        peru: "cd853f",\n        pink: "ffc0cb",\n        plum: "dda0dd",\n        powderblue: "b0e0e6",\n        purple: "800080",\n        rebeccapurple: "663399",\n        red: "f00",\n        rosybrown: "bc8f8f",\n        royalblue: "4169e1",\n        saddlebrown: "8b4513",\n        salmon: "fa8072",\n        sandybrown: "f4a460",\n        seagreen: "2e8b57",\n        seashell: "fff5ee",\n        sienna: "a0522d",\n        silver: "c0c0c0",\n        skyblue: "87ceeb",\n        slateblue: "6a5acd",\n        slategray: "708090",\n        slategrey: "708090",\n        snow: "fffafa",\n        springgreen: "00ff7f",\n        steelblue: "4682b4",\n        tan: "d2b48c",\n        teal: "008080",\n        thistle: "d8bfd8",\n        tomato: "ff6347",\n        turquoise: "40e0d0",\n        violet: "ee82ee",\n        wheat: "f5deb3",\n        white: "fff",\n        whitesmoke: "f5f5f5",\n        yellow: "ff0",\n        yellowgreen: "9acd32"\n    };\n\n    // Make it easy to access colors via `hexNames[hex]`\n    var hexNames = tinycolor.hexNames = flip(names);\n\n\n    // Utilities\n    // ---------\n\n    // `{ \'name1\': \'val1\' }` becomes `{ \'val1\': \'name1\' }`\n    function flip(o) {\n        var flipped = { };\n        for (var i in o) {\n            if (o.hasOwnProperty(i)) {\n                flipped[o[i]] = i;\n            }\n        }\n        return flipped;\n    }\n\n    // Return a valid alpha value [0,1] with all invalid values being set to 1\n    function boundAlpha(a) {\n        a = parseFloat(a);\n\n        if (isNaN(a) || a < 0 || a > 1) {\n            a = 1;\n        }\n\n        return a;\n    }\n\n    // Take input from [0, n] and return it as [0, 1]\n    function bound01(n, max) {\n        if (isOnePointZero(n)) { n = "100%"; }\n\n        var processPercent = isPercentage(n);\n        n = mathMin(max, mathMax(0, parseFloat(n)));\n\n        // Automatically convert percentage into number\n        if (processPercent) {\n            n = parseInt(n * max, 10) / 100;\n        }\n\n        // Handle floating point rounding errors\n        if ((math.abs(n - max) < 0.000001)) {\n            return 1;\n        }\n\n        // Convert into [0, 1] range if it isn\'t already\n        return (n % max) / parseFloat(max);\n    }\n\n    // Force a number between 0 and 1\n    function clamp01(val) {\n        return mathMin(1, mathMax(0, val));\n    }\n\n    // Parse a base-16 hex value into a base-10 integer\n    function parseIntFromHex(val) {\n        return parseInt(val, 16);\n    }\n\n    // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n    // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n    function isOnePointZero(n) {\n        return typeof n == "string" && n.indexOf(\'.\') != -1 && parseFloat(n) === 1;\n    }\n\n    // Check to see if string passed in is a percentage\n    function isPercentage(n) {\n        return typeof n === "string" && n.indexOf(\'%\') != -1;\n    }\n\n    // Force a hex value to have 2 characters\n    function pad2(c) {\n        return c.length == 1 ? \'0\' + c : \'\' + c;\n    }\n\n    // Replace a decimal with it\'s percentage value\n    function convertToPercentage(n) {\n        if (n <= 1) {\n            n = (n * 100) + "%";\n        }\n\n        return n;\n    }\n\n    // Converts a decimal to a hex value\n    function convertDecimalToHex(d) {\n        return Math.round(parseFloat(d) * 255).toString(16);\n    }\n    // Converts a hex value to a decimal\n    function convertHexToDecimal(h) {\n        return (parseIntFromHex(h) / 255);\n    }\n\n    var matchers = (function() {\n\n        // <http://www.w3.org/TR/css3-values/#integers>\n        var CSS_INTEGER = "[-\\\\+]?\\\\d+%?";\n\n        // <http://www.w3.org/TR/css3-values/#number-value>\n        var CSS_NUMBER = "[-\\\\+]?\\\\d*\\\\.\\\\d+%?";\n\n        // Allow positive/negative integer/number.  Don\'t capture the either/or, just the entire outcome.\n        var CSS_UNIT = "(?:" + CSS_NUMBER + ")|(?:" + CSS_INTEGER + ")";\n\n        // Actual matching.\n        // Parentheses and commas are optional, but not required.\n        // Whitespace can take the place of commas or opening paren\n        var PERMISSIVE_MATCH3 = "[\\\\s|\\\\(]+(" + CSS_UNIT + ")[,|\\\\s]+(" + CSS_UNIT + ")[,|\\\\s]+(" + CSS_UNIT + ")\\\\s*\\\\)?";\n        var PERMISSIVE_MATCH4 = "[\\\\s|\\\\(]+(" + CSS_UNIT + ")[,|\\\\s]+(" + CSS_UNIT + ")[,|\\\\s]+(" + CSS_UNIT + ")[,|\\\\s]+(" + CSS_UNIT + ")\\\\s*\\\\)?";\n\n        return {\n            rgb: new RegExp("rgb" + PERMISSIVE_MATCH3),\n            rgba: new RegExp("rgba" + PERMISSIVE_MATCH4),\n            hsl: new RegExp("hsl" + PERMISSIVE_MATCH3),\n            hsla: new RegExp("hsla" + PERMISSIVE_MATCH4),\n            hsv: new RegExp("hsv" + PERMISSIVE_MATCH3),\n            hsva: new RegExp("hsva" + PERMISSIVE_MATCH4),\n            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n            hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n        };\n    })();\n\n    // `stringInputToObject`\n    // Permissive string parsing.  Take in a number of formats, and output an object\n    // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n    function stringInputToObject(color) {\n\n        color = color.replace(trimLeft,\'\').replace(trimRight, \'\').toLowerCase();\n        var named = false;\n        if (names[color]) {\n            color = names[color];\n            named = true;\n        }\n        else if (color == \'transparent\') {\n            return { r: 0, g: 0, b: 0, a: 0, format: "name" };\n        }\n\n        // Try to match string input using regular expressions.\n        // Keep most of the number bounding out of this function - don\'t worry about [0,1] or [0,100] or [0,360]\n        // Just return an object and let the conversion functions handle that.\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\n        var match;\n        if ((match = matchers.rgb.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3] };\n        }\n        if ((match = matchers.rgba.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsl.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3] };\n        }\n        if ((match = matchers.hsla.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsv.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3] };\n        }\n        if ((match = matchers.hsva.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\n        }\n        if ((match = matchers.hex8.exec(color))) {\n            return {\n                a: convertHexToDecimal(match[1]),\n                r: parseIntFromHex(match[2]),\n                g: parseIntFromHex(match[3]),\n                b: parseIntFromHex(match[4]),\n                format: named ? "name" : "hex8"\n            };\n        }\n        if ((match = matchers.hex6.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1]),\n                g: parseIntFromHex(match[2]),\n                b: parseIntFromHex(match[3]),\n                format: named ? "name" : "hex"\n            };\n        }\n        if ((match = matchers.hex3.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1] + \'\' + match[1]),\n                g: parseIntFromHex(match[2] + \'\' + match[2]),\n                b: parseIntFromHex(match[3] + \'\' + match[3]),\n                format: named ? "name" : "hex"\n            };\n        }\n\n        return false;\n    }\n\n    window.tinycolor = tinycolor;\n    })();\n\n    $(function () {\n        if ($.fn.spectrum.load) {\n            $.fn.spectrum.processNativeColorInputs();\n        }\n    });\n\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXNzZXRzL3NwZWN0cnVtL3NwZWN0cnVtLmpzPzlkMWYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxRQUFRLElBQTBDLEdBQUc7QUFDckQsUUFBUSxpQ0FBTyxDQUFDLDJDQUFRLENBQUMsb0NBQUUsT0FBTztBQUFBO0FBQUE7QUFBQSxvR0FBQztBQUNuQztBQUNBLFNBQVMsRUFLSjtBQUNMLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixRQUFRO0FBQ25DO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1MQUFt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QUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLDBDQUEwQztBQUMxQyx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCO0FBQ2xCLCtCQUErQjtBQUMvQiwyQkFBMkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHdCQUF3Qjs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOEJBQThCO0FBQ3hELDBCQUEwQiw4QkFBOEI7QUFDeEQsMEJBQTBCLDhCQUE4Qjs7QUFFeEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLG9CQUFvQjtBQUNwQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxvQkFBb0I7QUFDcEIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixzQkFBc0I7O0FBRTNDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBLFNBQVMsa0JBQWtCLFlBQVksa0JBQWtCO0FBQ3pEO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0NBQWdDLFlBQVk7O0FBRTVDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUU7QUFDbkUsaUNBQWlDLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRTtBQUNuRSxpQ0FBaUMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRTtBQUNuRjtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLDRDQUE0QyxVQUFVLE9BQU8sVUFBVSxPQUFPLFNBQVM7QUFDdkY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTCxDQUFDIiwiZmlsZSI6Ii4vd2ViL2Fzc2V0cy9zcGVjdHJ1bS9zcGVjdHJ1bS5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNwZWN0cnVtIENvbG9ycGlja2VyIHYxLjguMVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2Jncmlucy9zcGVjdHJ1bVxuLy8gQXV0aG9yOiBCcmlhbiBHcmluc3RlYWRcbi8vIExpY2Vuc2U6IE1JVFxuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsgLy8gQU1EXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIHsgLy8gQ29tbW9uSlNcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcbiAgICB9XG4gICAgZWxzZSB7IC8vIEJyb3dzZXJcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xuICAgIH1cbn0pKGZ1bmN0aW9uKCQsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGRlZmF1bHRPcHRzID0ge1xuXG4gICAgICAgIC8vIENhbGxiYWNrc1xuICAgICAgICBiZWZvcmVTaG93OiBub29wLFxuICAgICAgICBtb3ZlOiBub29wLFxuICAgICAgICBjaGFuZ2U6IG5vb3AsXG4gICAgICAgIHNob3c6IG5vb3AsXG4gICAgICAgIGhpZGU6IG5vb3AsXG5cbiAgICAgICAgLy8gT3B0aW9uc1xuICAgICAgICBjb2xvcjogZmFsc2UsXG4gICAgICAgIGZsYXQ6IGZhbHNlLFxuICAgICAgICBzaG93SW5wdXQ6IGZhbHNlLFxuICAgICAgICBhbGxvd0VtcHR5OiBmYWxzZSxcbiAgICAgICAgc2hvd0J1dHRvbnM6IHRydWUsXG4gICAgICAgIGNsaWNrb3V0RmlyZXNDaGFuZ2U6IHRydWUsXG4gICAgICAgIHNob3dJbml0aWFsOiBmYWxzZSxcbiAgICAgICAgc2hvd1BhbGV0dGU6IGZhbHNlLFxuICAgICAgICBzaG93UGFsZXR0ZU9ubHk6IGZhbHNlLFxuICAgICAgICBoaWRlQWZ0ZXJQYWxldHRlU2VsZWN0OiBmYWxzZSxcbiAgICAgICAgdG9nZ2xlUGFsZXR0ZU9ubHk6IGZhbHNlLFxuICAgICAgICBzaG93U2VsZWN0aW9uUGFsZXR0ZTogdHJ1ZSxcbiAgICAgICAgbG9jYWxTdG9yYWdlS2V5OiBmYWxzZSxcbiAgICAgICAgYXBwZW5kVG86IFwiYm9keVwiLFxuICAgICAgICBtYXhTZWxlY3Rpb25TaXplOiA3LFxuICAgICAgICBjYW5jZWxUZXh0OiBcImNhbmNlbFwiLFxuICAgICAgICBjaG9vc2VUZXh0OiBcImNob29zZVwiLFxuICAgICAgICB0b2dnbGVQYWxldHRlTW9yZVRleHQ6IFwibW9yZVwiLFxuICAgICAgICB0b2dnbGVQYWxldHRlTGVzc1RleHQ6IFwibGVzc1wiLFxuICAgICAgICBjbGVhclRleHQ6IFwiQ2xlYXIgQ29sb3IgU2VsZWN0aW9uXCIsXG4gICAgICAgIG5vQ29sb3JTZWxlY3RlZFRleHQ6IFwiTm8gQ29sb3IgU2VsZWN0ZWRcIixcbiAgICAgICAgcHJlZmVycmVkRm9ybWF0OiBmYWxzZSxcbiAgICAgICAgY2xhc3NOYW1lOiBcIlwiLCAvLyBEZXByZWNhdGVkIC0gdXNlIGNvbnRhaW5lckNsYXNzTmFtZSBhbmQgcmVwbGFjZXJDbGFzc05hbWUgaW5zdGVhZC5cbiAgICAgICAgY29udGFpbmVyQ2xhc3NOYW1lOiBcIlwiLFxuICAgICAgICByZXBsYWNlckNsYXNzTmFtZTogXCJcIixcbiAgICAgICAgc2hvd0FscGhhOiBmYWxzZSxcbiAgICAgICAgdGhlbWU6IFwic3AtbGlnaHRcIixcbiAgICAgICAgcGFsZXR0ZTogW1tcIiNmZmZmZmZcIiwgXCIjMDAwMDAwXCIsIFwiI2ZmMDAwMFwiLCBcIiNmZjgwMDBcIiwgXCIjZmZmZjAwXCIsIFwiIzAwODAwMFwiLCBcIiMwMDAwZmZcIiwgXCIjNGIwMDgyXCIsIFwiIzk0MDBkM1wiXV0sXG4gICAgICAgIHNlbGVjdGlvblBhbGV0dGU6IFtdLFxuICAgICAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgICAgIG9mZnNldDogbnVsbFxuICAgIH0sXG4gICAgc3BlY3RydW1zID0gW10sXG4gICAgSUUgPSAhIS9tc2llL2kuZXhlYyggd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQgKSxcbiAgICByZ2JhU3VwcG9ydCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gY29udGFpbnMoIHN0ciwgc3Vic3RyICkge1xuICAgICAgICAgICAgcmV0dXJuICEhfignJyArIHN0cikuaW5kZXhPZihzdWJzdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcbiAgICAgICAgc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpJztcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zKHN0eWxlLmJhY2tncm91bmRDb2xvciwgJ3JnYmEnKSB8fCBjb250YWlucyhzdHlsZS5iYWNrZ3JvdW5kQ29sb3IsICdoc2xhJyk7XG4gICAgfSkoKSxcbiAgICByZXBsYWNlSW5wdXQgPSBbXG4gICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtcmVwbGFjZXInPlwiLFxuICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1wcmV2aWV3Jz48ZGl2IGNsYXNzPSdzcC1wcmV2aWV3LWlubmVyJz48L2Rpdj48L2Rpdj5cIixcbiAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtZGQnPiYjOTY2MDs8L2Rpdj5cIixcbiAgICAgICAgXCI8L2Rpdj5cIlxuICAgIF0uam9pbignJyksXG4gICAgbWFya3VwID0gKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyBJRSBkb2VzIG5vdCBzdXBwb3J0IGdyYWRpZW50cyB3aXRoIG11bHRpcGxlIHN0b3BzLCBzbyB3ZSBuZWVkIHRvIHNpbXVsYXRlXG4gICAgICAgIC8vICB0aGF0IGZvciB0aGUgcmFpbmJvdyBzbGlkZXIgd2l0aCA4IGRpdnMgdGhhdCBlYWNoIGhhdmUgYSBzaW5nbGUgZ3JhZGllbnRcbiAgICAgICAgdmFyIGdyYWRpZW50Rml4ID0gXCJcIjtcbiAgICAgICAgaWYgKElFKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSA2OyBpKyspIHtcbiAgICAgICAgICAgICAgICBncmFkaWVudEZpeCArPSBcIjxkaXYgY2xhc3M9J3NwLVwiICsgaSArIFwiJz48L2Rpdj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3NwLWNvbnRhaW5lciBzcC1oaWRkZW4nPlwiLFxuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtcGFsZXR0ZS1jb250YWluZXInPlwiLFxuICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3NwLXBhbGV0dGUgc3AtdGh1bWIgc3AtY2YnPjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3NwLXBhbGV0dGUtYnV0dG9uLWNvbnRhaW5lciBzcC1jZic+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nc3AtcGFsZXR0ZS10b2dnbGUnPjwvYnV0dG9uPlwiLFxuICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1waWNrZXItY29udGFpbmVyJz5cIixcbiAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC10b3Agc3AtY2YnPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1maWxsJz48L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtdG9wLWlubmVyJz5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3NwLWNvbG9yJz5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1zYXQnPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC12YWwnPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtZHJhZ2dlcic+PC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1jbGVhciBzcC1jbGVhci1kaXNwbGF5Jz5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtaHVlJz5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1zbGlkZXInPjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFkaWVudEZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nc3AtYWxwaGEnPjxkaXYgY2xhc3M9J3NwLWFscGhhLWlubmVyJz48ZGl2IGNsYXNzPSdzcC1hbHBoYS1oYW5kbGUnPjwvZGl2PjwvZGl2PjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3NwLWlucHV0LWNvbnRhaW5lciBzcC1jZic+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjxpbnB1dCBjbGFzcz0nc3AtaW5wdXQnIHR5cGU9J3RleHQnIHNwZWxsY2hlY2s9J2ZhbHNlJyAgLz5cIixcbiAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1pbml0aWFsIHNwLXRodW1iIHNwLWNmJz48L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdzcC1idXR0b24tY29udGFpbmVyIHNwLWNmJz5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPGEgY2xhc3M9J3NwLWNhbmNlbCcgaHJlZj0nIyc+PC9hPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3NwLWNob29zZSc+PC9idXR0b24+XCIsXG4gICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIixcbiAgICAgICAgICAgIFwiPC9kaXY+XCJcbiAgICAgICAgXS5qb2luKFwiXCIpO1xuICAgIH0pKCk7XG5cbiAgICBmdW5jdGlvbiBwYWxldHRlVGVtcGxhdGUgKHAsIGNvbG9yLCBjbGFzc05hbWUsIG9wdHMpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudCA9IHBbaV07XG4gICAgICAgICAgICBpZihjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbnkgPSB0aW55Y29sb3IoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSB0aW55LnRvSHNsKCkubCA8IDAuNSA/IFwic3AtdGh1bWItZWwgc3AtdGh1bWItZGFya1wiIDogXCJzcC10aHVtYi1lbCBzcC10aHVtYi1saWdodFwiO1xuICAgICAgICAgICAgICAgIGMgKz0gKHRpbnljb2xvci5lcXVhbHMoY29sb3IsIGN1cnJlbnQpKSA/IFwiIHNwLXRodW1iLWFjdGl2ZVwiIDogXCJcIjtcbiAgICAgICAgICAgICAgICB2YXIgZm9ybWF0dGVkU3RyaW5nID0gdGlueS50b1N0cmluZyhvcHRzLnByZWZlcnJlZEZvcm1hdCB8fCBcInJnYlwiKTtcbiAgICAgICAgICAgICAgICB2YXIgc3dhdGNoU3R5bGUgPSByZ2JhU3VwcG9ydCA/IChcImJhY2tncm91bmQtY29sb3I6XCIgKyB0aW55LnRvUmdiU3RyaW5nKCkpIDogXCJmaWx0ZXI6XCIgKyB0aW55LnRvRmlsdGVyKCk7XG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiB0aXRsZT1cIicgKyBmb3JtYXR0ZWRTdHJpbmcgKyAnXCIgZGF0YS1jb2xvcj1cIicgKyB0aW55LnRvUmdiU3RyaW5nKCkgKyAnXCIgY2xhc3M9XCInICsgYyArICdcIj48c3BhbiBjbGFzcz1cInNwLXRodW1iLWlubmVyXCIgc3R5bGU9XCInICsgc3dhdGNoU3R5bGUgKyAnO1wiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBjbHMgPSAnc3AtY2xlYXItZGlzcGxheSc7XG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKCQoJzxkaXYgLz4nKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQoJzxzcGFuIGRhdGEtY29sb3I9XCJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7XCIgY2xhc3M9XCInICsgY2xzICsgJ1wiPjwvc3Bhbj4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgb3B0cy5ub0NvbG9yU2VsZWN0ZWRUZXh0KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5odG1sKClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIjxkaXYgY2xhc3M9J3NwLWNmIFwiICsgY2xhc3NOYW1lICsgXCInPlwiICsgaHRtbC5qb2luKCcnKSArIFwiPC9kaXY+XCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGlkZUFsbCgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGVjdHJ1bXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzcGVjdHJ1bXNbaV0pIHtcbiAgICAgICAgICAgICAgICBzcGVjdHJ1bXNbaV0uaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFuY2VPcHRpb25zKG8sIGNhbGxiYWNrQ29udGV4dCkge1xuICAgICAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0T3B0cywgbyk7XG4gICAgICAgIG9wdHMuY2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgJ21vdmUnOiBiaW5kKG9wdHMubW92ZSwgY2FsbGJhY2tDb250ZXh0KSxcbiAgICAgICAgICAgICdjaGFuZ2UnOiBiaW5kKG9wdHMuY2hhbmdlLCBjYWxsYmFja0NvbnRleHQpLFxuICAgICAgICAgICAgJ3Nob3cnOiBiaW5kKG9wdHMuc2hvdywgY2FsbGJhY2tDb250ZXh0KSxcbiAgICAgICAgICAgICdoaWRlJzogYmluZChvcHRzLmhpZGUsIGNhbGxiYWNrQ29udGV4dCksXG4gICAgICAgICAgICAnYmVmb3JlU2hvdyc6IGJpbmQob3B0cy5iZWZvcmVTaG93LCBjYWxsYmFja0NvbnRleHQpXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9wdHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3BlY3RydW0oZWxlbWVudCwgbykge1xuXG4gICAgICAgIHZhciBvcHRzID0gaW5zdGFuY2VPcHRpb25zKG8sIGVsZW1lbnQpLFxuICAgICAgICAgICAgZmxhdCA9IG9wdHMuZmxhdCxcbiAgICAgICAgICAgIHNob3dTZWxlY3Rpb25QYWxldHRlID0gb3B0cy5zaG93U2VsZWN0aW9uUGFsZXR0ZSxcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZUtleSA9IG9wdHMubG9jYWxTdG9yYWdlS2V5LFxuICAgICAgICAgICAgdGhlbWUgPSBvcHRzLnRoZW1lLFxuICAgICAgICAgICAgY2FsbGJhY2tzID0gb3B0cy5jYWxsYmFja3MsXG4gICAgICAgICAgICByZXNpemUgPSB0aHJvdHRsZShyZWZsb3csIDEwKSxcbiAgICAgICAgICAgIHZpc2libGUgPSBmYWxzZSxcbiAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZSxcbiAgICAgICAgICAgIGRyYWdXaWR0aCA9IDAsXG4gICAgICAgICAgICBkcmFnSGVpZ2h0ID0gMCxcbiAgICAgICAgICAgIGRyYWdIZWxwZXJIZWlnaHQgPSAwLFxuICAgICAgICAgICAgc2xpZGVIZWlnaHQgPSAwLFxuICAgICAgICAgICAgc2xpZGVXaWR0aCA9IDAsXG4gICAgICAgICAgICBhbHBoYVdpZHRoID0gMCxcbiAgICAgICAgICAgIGFscGhhU2xpZGVIZWxwZXJXaWR0aCA9IDAsXG4gICAgICAgICAgICBzbGlkZUhlbHBlckhlaWdodCA9IDAsXG4gICAgICAgICAgICBjdXJyZW50SHVlID0gMCxcbiAgICAgICAgICAgIGN1cnJlbnRTYXR1cmF0aW9uID0gMCxcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IDAsXG4gICAgICAgICAgICBjdXJyZW50QWxwaGEgPSAxLFxuICAgICAgICAgICAgcGFsZXR0ZSA9IFtdLFxuICAgICAgICAgICAgcGFsZXR0ZUFycmF5ID0gW10sXG4gICAgICAgICAgICBwYWxldHRlTG9va3VwID0ge30sXG4gICAgICAgICAgICBzZWxlY3Rpb25QYWxldHRlID0gb3B0cy5zZWxlY3Rpb25QYWxldHRlLnNsaWNlKDApLFxuICAgICAgICAgICAgbWF4U2VsZWN0aW9uU2l6ZSA9IG9wdHMubWF4U2VsZWN0aW9uU2l6ZSxcbiAgICAgICAgICAgIGRyYWdnaW5nQ2xhc3MgPSBcInNwLWRyYWdnaW5nXCIsXG4gICAgICAgICAgICBzaGlmdE1vdmVtZW50RGlyZWN0aW9uID0gbnVsbDtcblxuICAgICAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50LFxuICAgICAgICAgICAgYm9keSA9IGRvYy5ib2R5LFxuICAgICAgICAgICAgYm91bmRFbGVtZW50ID0gJChlbGVtZW50KSxcbiAgICAgICAgICAgIGRpc2FibGVkID0gZmFsc2UsXG4gICAgICAgICAgICBjb250YWluZXIgPSAkKG1hcmt1cCwgZG9jKS5hZGRDbGFzcyh0aGVtZSksXG4gICAgICAgICAgICBwaWNrZXJDb250YWluZXIgPSBjb250YWluZXIuZmluZChcIi5zcC1waWNrZXItY29udGFpbmVyXCIpLFxuICAgICAgICAgICAgZHJhZ2dlciA9IGNvbnRhaW5lci5maW5kKFwiLnNwLWNvbG9yXCIpLFxuICAgICAgICAgICAgZHJhZ0hlbHBlciA9IGNvbnRhaW5lci5maW5kKFwiLnNwLWRyYWdnZXJcIiksXG4gICAgICAgICAgICBzbGlkZXIgPSBjb250YWluZXIuZmluZChcIi5zcC1odWVcIiksXG4gICAgICAgICAgICBzbGlkZUhlbHBlciA9IGNvbnRhaW5lci5maW5kKFwiLnNwLXNsaWRlclwiKSxcbiAgICAgICAgICAgIGFscGhhU2xpZGVySW5uZXIgPSBjb250YWluZXIuZmluZChcIi5zcC1hbHBoYS1pbm5lclwiKSxcbiAgICAgICAgICAgIGFscGhhU2xpZGVyID0gY29udGFpbmVyLmZpbmQoXCIuc3AtYWxwaGFcIiksXG4gICAgICAgICAgICBhbHBoYVNsaWRlSGVscGVyID0gY29udGFpbmVyLmZpbmQoXCIuc3AtYWxwaGEtaGFuZGxlXCIpLFxuICAgICAgICAgICAgdGV4dElucHV0ID0gY29udGFpbmVyLmZpbmQoXCIuc3AtaW5wdXRcIiksXG4gICAgICAgICAgICBwYWxldHRlQ29udGFpbmVyID0gY29udGFpbmVyLmZpbmQoXCIuc3AtcGFsZXR0ZVwiKSxcbiAgICAgICAgICAgIGluaXRpYWxDb2xvckNvbnRhaW5lciA9IGNvbnRhaW5lci5maW5kKFwiLnNwLWluaXRpYWxcIiksXG4gICAgICAgICAgICBjYW5jZWxCdXR0b24gPSBjb250YWluZXIuZmluZChcIi5zcC1jYW5jZWxcIiksXG4gICAgICAgICAgICBjbGVhckJ1dHRvbiA9IGNvbnRhaW5lci5maW5kKFwiLnNwLWNsZWFyXCIpLFxuICAgICAgICAgICAgY2hvb3NlQnV0dG9uID0gY29udGFpbmVyLmZpbmQoXCIuc3AtY2hvb3NlXCIpLFxuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uID0gY29udGFpbmVyLmZpbmQoXCIuc3AtcGFsZXR0ZS10b2dnbGVcIiksXG4gICAgICAgICAgICBpc0lucHV0ID0gYm91bmRFbGVtZW50LmlzKFwiaW5wdXRcIiksXG4gICAgICAgICAgICBpc0lucHV0VHlwZUNvbG9yID0gaXNJbnB1dCAmJiBib3VuZEVsZW1lbnQuYXR0cihcInR5cGVcIikgPT09IFwiY29sb3JcIiAmJiBpbnB1dFR5cGVDb2xvclN1cHBvcnQoKSxcbiAgICAgICAgICAgIHNob3VsZFJlcGxhY2UgPSBpc0lucHV0ICYmICFmbGF0LFxuICAgICAgICAgICAgcmVwbGFjZXIgPSAoc2hvdWxkUmVwbGFjZSkgPyAkKHJlcGxhY2VJbnB1dCkuYWRkQ2xhc3ModGhlbWUpLmFkZENsYXNzKG9wdHMuY2xhc3NOYW1lKS5hZGRDbGFzcyhvcHRzLnJlcGxhY2VyQ2xhc3NOYW1lKSA6ICQoW10pLFxuICAgICAgICAgICAgb2Zmc2V0RWxlbWVudCA9IChzaG91bGRSZXBsYWNlKSA/IHJlcGxhY2VyIDogYm91bmRFbGVtZW50LFxuICAgICAgICAgICAgcHJldmlld0VsZW1lbnQgPSByZXBsYWNlci5maW5kKFwiLnNwLXByZXZpZXctaW5uZXJcIiksXG4gICAgICAgICAgICBpbml0aWFsQ29sb3IgPSBvcHRzLmNvbG9yIHx8IChpc0lucHV0ICYmIGJvdW5kRWxlbWVudC52YWwoKSksXG4gICAgICAgICAgICBjb2xvck9uU2hvdyA9IGZhbHNlLFxuICAgICAgICAgICAgY3VycmVudFByZWZlcnJlZEZvcm1hdCA9IG9wdHMucHJlZmVycmVkRm9ybWF0LFxuICAgICAgICAgICAgY2xpY2tvdXRGaXJlc0NoYW5nZSA9ICFvcHRzLnNob3dCdXR0b25zIHx8IG9wdHMuY2xpY2tvdXRGaXJlc0NoYW5nZSxcbiAgICAgICAgICAgIGlzRW1wdHkgPSAhaW5pdGlhbENvbG9yLFxuICAgICAgICAgICAgYWxsb3dFbXB0eSA9IG9wdHMuYWxsb3dFbXB0eSAmJiAhaXNJbnB1dFR5cGVDb2xvcjtcblxuICAgICAgICBmdW5jdGlvbiBhcHBseU9wdGlvbnMoKSB7XG5cbiAgICAgICAgICAgIGlmIChvcHRzLnNob3dQYWxldHRlT25seSkge1xuICAgICAgICAgICAgICAgIG9wdHMuc2hvd1BhbGV0dGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0b2dnbGVCdXR0b24udGV4dChvcHRzLnNob3dQYWxldHRlT25seSA/IG9wdHMudG9nZ2xlUGFsZXR0ZU1vcmVUZXh0IDogb3B0cy50b2dnbGVQYWxldHRlTGVzc1RleHQpO1xuXG4gICAgICAgICAgICBpZiAob3B0cy5wYWxldHRlKSB7XG4gICAgICAgICAgICAgICAgcGFsZXR0ZSA9IG9wdHMucGFsZXR0ZS5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICBwYWxldHRlQXJyYXkgPSAkLmlzQXJyYXkocGFsZXR0ZVswXSkgPyBwYWxldHRlIDogW3BhbGV0dGVdO1xuICAgICAgICAgICAgICAgIHBhbGV0dGVMb29rdXAgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhbGV0dGVBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBhbGV0dGVBcnJheVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJnYiA9IHRpbnljb2xvcihwYWxldHRlQXJyYXlbaV1bal0pLnRvUmdiU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWxldHRlTG9va3VwW3JnYl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250YWluZXIudG9nZ2xlQ2xhc3MoXCJzcC1mbGF0XCIsIGZsYXQpO1xuICAgICAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwic3AtaW5wdXQtZGlzYWJsZWRcIiwgIW9wdHMuc2hvd0lucHV0KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcyhcInNwLWFscGhhLWVuYWJsZWRcIiwgb3B0cy5zaG93QWxwaGEpO1xuICAgICAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwic3AtY2xlYXItZW5hYmxlZFwiLCBhbGxvd0VtcHR5KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcyhcInNwLWJ1dHRvbnMtZGlzYWJsZWRcIiwgIW9wdHMuc2hvd0J1dHRvbnMpO1xuICAgICAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwic3AtcGFsZXR0ZS1idXR0b25zLWRpc2FibGVkXCIsICFvcHRzLnRvZ2dsZVBhbGV0dGVPbmx5KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcyhcInNwLXBhbGV0dGUtZGlzYWJsZWRcIiwgIW9wdHMuc2hvd1BhbGV0dGUpO1xuICAgICAgICAgICAgY29udGFpbmVyLnRvZ2dsZUNsYXNzKFwic3AtcGFsZXR0ZS1vbmx5XCIsIG9wdHMuc2hvd1BhbGV0dGVPbmx5KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci50b2dnbGVDbGFzcyhcInNwLWluaXRpYWwtZGlzYWJsZWRcIiwgIW9wdHMuc2hvd0luaXRpYWwpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKG9wdHMuY2xhc3NOYW1lKS5hZGRDbGFzcyhvcHRzLmNvbnRhaW5lckNsYXNzTmFtZSk7XG5cbiAgICAgICAgICAgIHJlZmxvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcblxuICAgICAgICAgICAgaWYgKElFKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmZpbmQoXCIqOm5vdChpbnB1dClcIikuYXR0cihcInVuc2VsZWN0YWJsZVwiLCBcIm9uXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhcHBseU9wdGlvbnMoKTtcblxuICAgICAgICAgICAgaWYgKHNob3VsZFJlcGxhY2UpIHtcbiAgICAgICAgICAgICAgICBib3VuZEVsZW1lbnQuYWZ0ZXIocmVwbGFjZXIpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJCdXR0b24uaGlkZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmxhdCkge1xuICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudC5hZnRlcihjb250YWluZXIpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgdmFyIGFwcGVuZFRvID0gb3B0cy5hcHBlbmRUbyA9PT0gXCJwYXJlbnRcIiA/IGJvdW5kRWxlbWVudC5wYXJlbnQoKSA6ICQob3B0cy5hcHBlbmRUbyk7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGVuZFRvLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbyA9ICQoXCJib2R5XCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFwcGVuZFRvLmFwcGVuZChjb250YWluZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3Rpb25QYWxldHRlRnJvbVN0b3JhZ2UoKTtcblxuICAgICAgICAgICAgb2Zmc2V0RWxlbWVudC5vbihcImNsaWNrLnNwZWN0cnVtIHRvdWNoc3RhcnQuc3BlY3RydW1cIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoISQoZS50YXJnZXQpLmlzKFwiaW5wdXRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZihib3VuZEVsZW1lbnQuaXMoXCI6ZGlzYWJsZWRcIikgfHwgKG9wdHMuZGlzYWJsZWQgPT09IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgZGlzYWJsZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGJ1YmJsaW5nIHVwIHRvIGRvY3VtZW50LiAgVGhpcyB3b3VsZCBjYXVzZSBpdCB0byBiZSBoaWRkZW4uXG4gICAgICAgICAgICBjb250YWluZXIuY2xpY2soc3RvcFByb3BhZ2F0aW9uKTtcblxuICAgICAgICAgICAgLy8gSGFuZGxlIHVzZXIgdHlwZWQgaW5wdXRcbiAgICAgICAgICAgIHRleHRJbnB1dC5jaGFuZ2Uoc2V0RnJvbVRleHRJbnB1dCk7XG4gICAgICAgICAgICB0ZXh0SW5wdXQub24oXCJwYXN0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChzZXRGcm9tVGV4dElucHV0LCAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGV4dElucHV0LmtleWRvd24oZnVuY3Rpb24gKGUpIHsgaWYgKGUua2V5Q29kZSA9PSAxMykgeyBzZXRGcm9tVGV4dElucHV0KCk7IH0gfSk7XG5cbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0KG9wdHMuY2FuY2VsVGV4dCk7XG4gICAgICAgICAgICBjYW5jZWxCdXR0b24ub24oXCJjbGljay5zcGVjdHJ1bVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJldmVydCgpO1xuICAgICAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjbGVhckJ1dHRvbi5hdHRyKFwidGl0bGVcIiwgb3B0cy5jbGVhclRleHQpO1xuICAgICAgICAgICAgY2xlYXJCdXR0b24ub24oXCJjbGljay5zcGVjdHJ1bVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlzRW1wdHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG1vdmUoKTtcblxuICAgICAgICAgICAgICAgIGlmKGZsYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9mb3IgdGhlIGZsYXQgc3R5bGUsIHRoaXMgaXMgYSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlT3JpZ2luYWxJbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2hvb3NlQnV0dG9uLnRleHQob3B0cy5jaG9vc2VUZXh0KTtcbiAgICAgICAgICAgIGNob29zZUJ1dHRvbi5vbihcImNsaWNrLnNwZWN0cnVtXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoSUUgJiYgdGV4dElucHV0LmlzKFwiOmZvY3VzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRJbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU9yaWdpbmFsSW5wdXQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLnRleHQob3B0cy5zaG93UGFsZXR0ZU9ubHkgPyBvcHRzLnRvZ2dsZVBhbGV0dGVNb3JlVGV4dCA6IG9wdHMudG9nZ2xlUGFsZXR0ZUxlc3NUZXh0KTtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbi5vbihcImNsaWNrLnNwZWN0cnVtXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBvcHRzLnNob3dQYWxldHRlT25seSA9ICFvcHRzLnNob3dQYWxldHRlT25seTtcblxuICAgICAgICAgICAgICAgIC8vIFRvIG1ha2Ugc3VyZSB0aGUgUGlja2VyIGFyZWEgaXMgZHJhd24gb24gdGhlIHJpZ2h0LCBuZXh0IHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIFBhbGV0dGUgYXJlYSAoYW5kIG5vdCBiZWxvdyB0aGUgcGFsZXR0ZSksIGZpcnN0IG1vdmUgdGhlIFBhbGV0dGVcbiAgICAgICAgICAgICAgICAvLyB0byB0aGUgbGVmdCB0byBtYWtlIHNwYWNlIGZvciB0aGUgcGlja2VyLCBwbHVzIDVweCBleHRyYS5cbiAgICAgICAgICAgICAgICAvLyBUaGUgJ2FwcGx5T3B0aW9ucycgZnVuY3Rpb24gcHV0cyB0aGUgd2hvbGUgY29udGFpbmVyIGJhY2sgaW50byBwbGFjZVxuICAgICAgICAgICAgICAgIC8vIGFuZCB0YWtlcyBjYXJlIG9mIHRoZSBidXR0b24tdGV4dCBhbmQgdGhlIHNwLXBhbGV0dGUtb25seSBDU1MgY2xhc3MuXG4gICAgICAgICAgICAgICAgaWYgKCFvcHRzLnNob3dQYWxldHRlT25seSAmJiAhZmxhdCkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuY3NzKCdsZWZ0JywgJy09JyArIChwaWNrZXJDb250YWluZXIub3V0ZXJXaWR0aCh0cnVlKSArIDUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXBwbHlPcHRpb25zKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZHJhZ2dhYmxlKGFscGhhU2xpZGVyLCBmdW5jdGlvbiAoZHJhZ1gsIGRyYWdZLCBlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEFscGhhID0gKGRyYWdYIC8gYWxwaGFXaWR0aCk7XG4gICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBbHBoYSA9IE1hdGgucm91bmQoY3VycmVudEFscGhhICogMTApIC8gMTA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbW92ZSgpO1xuICAgICAgICAgICAgfSwgZHJhZ1N0YXJ0LCBkcmFnU3RvcCk7XG5cbiAgICAgICAgICAgIGRyYWdnYWJsZShzbGlkZXIsIGZ1bmN0aW9uIChkcmFnWCwgZHJhZ1kpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50SHVlID0gcGFyc2VGbG9hdChkcmFnWSAvIHNsaWRlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRzLnNob3dBbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWxwaGEgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtb3ZlKCk7XG4gICAgICAgICAgICB9LCBkcmFnU3RhcnQsIGRyYWdTdG9wKTtcblxuICAgICAgICAgICAgZHJhZ2dhYmxlKGRyYWdnZXIsIGZ1bmN0aW9uIChkcmFnWCwgZHJhZ1ksIGUpIHtcblxuICAgICAgICAgICAgICAgIC8vIHNoaWZ0K2RyYWcgc2hvdWxkIHNuYXAgdGhlIG1vdmVtZW50IHRvIGVpdGhlciB0aGUgeCBvciB5IGF4aXMuXG4gICAgICAgICAgICAgICAgaWYgKCFlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0TW92ZW1lbnREaXJlY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghc2hpZnRNb3ZlbWVudERpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2xkRHJhZ1ggPSBjdXJyZW50U2F0dXJhdGlvbiAqIGRyYWdXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZERyYWdZID0gZHJhZ0hlaWdodCAtIChjdXJyZW50VmFsdWUgKiBkcmFnSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZ1cnRoZXJGcm9tWCA9IE1hdGguYWJzKGRyYWdYIC0gb2xkRHJhZ1gpID4gTWF0aC5hYnMoZHJhZ1kgLSBvbGREcmFnWSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2hpZnRNb3ZlbWVudERpcmVjdGlvbiA9IGZ1cnRoZXJGcm9tWCA/IFwieFwiIDogXCJ5XCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHNldFNhdHVyYXRpb24gPSAhc2hpZnRNb3ZlbWVudERpcmVjdGlvbiB8fCBzaGlmdE1vdmVtZW50RGlyZWN0aW9uID09PSBcInhcIjtcbiAgICAgICAgICAgICAgICB2YXIgc2V0VmFsdWUgPSAhc2hpZnRNb3ZlbWVudERpcmVjdGlvbiB8fCBzaGlmdE1vdmVtZW50RGlyZWN0aW9uID09PSBcInlcIjtcblxuICAgICAgICAgICAgICAgIGlmIChzZXRTYXR1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTYXR1cmF0aW9uID0gcGFyc2VGbG9hdChkcmFnWCAvIGRyYWdXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBwYXJzZUZsb2F0KChkcmFnSGVpZ2h0IC0gZHJhZ1kpIC8gZHJhZ0hlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghb3B0cy5zaG93QWxwaGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEFscGhhID0gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtb3ZlKCk7XG5cbiAgICAgICAgICAgIH0sIGRyYWdTdGFydCwgZHJhZ1N0b3ApO1xuXG4gICAgICAgICAgICBpZiAoISFpbml0aWFsQ29sb3IpIHtcbiAgICAgICAgICAgICAgICBzZXQoaW5pdGlhbENvbG9yKTtcblxuICAgICAgICAgICAgICAgIC8vIEluIGNhc2UgY29sb3Igd2FzIGJsYWNrIC0gdXBkYXRlIHRoZSBwcmV2aWV3IFVJIGFuZCBzZXQgdGhlIGZvcm1hdFxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBzZXQgZnVuY3Rpb24gd2lsbCBub3QgcnVuIChkZWZhdWx0IGNvbG9yIGlzIGJsYWNrKS5cbiAgICAgICAgICAgICAgICB1cGRhdGVVSSgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmVmZXJyZWRGb3JtYXQgPSBvcHRzLnByZWZlcnJlZEZvcm1hdCB8fCB0aW55Y29sb3IoaW5pdGlhbENvbG9yKS5mb3JtYXQ7XG5cbiAgICAgICAgICAgICAgICBhZGRDb2xvclRvU2VsZWN0aW9uUGFsZXR0ZShpbml0aWFsQ29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlVUkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZsYXQpIHtcbiAgICAgICAgICAgICAgICBzaG93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhbGV0dGVFbGVtZW50Q2xpY2soZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLmlnbm9yZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXQoJChlLnRhcmdldCkuY2xvc2VzdChcIi5zcC10aHVtYi1lbFwiKS5kYXRhKFwiY29sb3JcIikpO1xuICAgICAgICAgICAgICAgICAgICBtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXQoJChlLnRhcmdldCkuY2xvc2VzdChcIi5zcC10aHVtYi1lbFwiKS5kYXRhKFwiY29sb3JcIikpO1xuICAgICAgICAgICAgICAgICAgICBtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHBpY2tlciBpcyBnb2luZyB0byBjbG9zZSBpbW1lZGlhdGVseSwgYSBwYWxldHRlIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBhIGNoYW5nZS4gIE90aGVyd2lzZSwgaXQncyBhIG1vdmUgb25seS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuaGlkZUFmdGVyUGFsZXR0ZVNlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlT3JpZ2luYWxJbnB1dCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU9yaWdpbmFsSW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBhbGV0dGVFdmVudCA9IElFID8gXCJtb3VzZWRvd24uc3BlY3RydW1cIiA6IFwiY2xpY2suc3BlY3RydW0gdG91Y2hzdGFydC5zcGVjdHJ1bVwiO1xuICAgICAgICAgICAgcGFsZXR0ZUNvbnRhaW5lci5vbihwYWxldHRlRXZlbnQsIFwiLnNwLXRodW1iLWVsXCIsIHBhbGV0dGVFbGVtZW50Q2xpY2spO1xuICAgICAgICAgICAgaW5pdGlhbENvbG9yQ29udGFpbmVyLm9uKHBhbGV0dGVFdmVudCwgXCIuc3AtdGh1bWItZWw6bnRoLWNoaWxkKDEpXCIsIHsgaWdub3JlOiB0cnVlIH0sIHBhbGV0dGVFbGVtZW50Q2xpY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsZWN0aW9uUGFsZXR0ZUZyb21TdG9yYWdlKCkge1xuXG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlS2V5ICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcblxuICAgICAgICAgICAgICAgIC8vIE1pZ3JhdGUgb2xkIHBhbGV0dGVzIG92ZXIgdG8gbmV3IGZvcm1hdC4gIE1heSB3YW50IHRvIHJlbW92ZSB0aGlzIGV2ZW50dWFsbHkuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFBhbGV0dGUgPSB3aW5kb3cubG9jYWxTdG9yYWdlW2xvY2FsU3RvcmFnZUtleV0uc3BsaXQoXCIsI1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFBhbGV0dGUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy5sb2NhbFN0b3JhZ2VbbG9jYWxTdG9yYWdlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChvbGRQYWxldHRlLCBmdW5jdGlvbihpLCBjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZENvbG9yVG9TZWxlY3Rpb25QYWxldHRlKGMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2goZSkgeyB9XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25QYWxldHRlID0gd2luZG93LmxvY2FsU3RvcmFnZVtsb2NhbFN0b3JhZ2VLZXldLnNwbGl0KFwiO1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQ29sb3JUb1NlbGVjdGlvblBhbGV0dGUoY29sb3IpIHtcbiAgICAgICAgICAgIGlmIChzaG93U2VsZWN0aW9uUGFsZXR0ZSkge1xuICAgICAgICAgICAgICAgIHZhciByZ2IgPSB0aW55Y29sb3IoY29sb3IpLnRvUmdiU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYWxldHRlTG9va3VwW3JnYl0gJiYgJC5pbkFycmF5KHJnYiwgc2VsZWN0aW9uUGFsZXR0ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBhbGV0dGUucHVzaChyZ2IpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZShzZWxlY3Rpb25QYWxldHRlLmxlbmd0aCA+IG1heFNlbGVjdGlvblNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvblBhbGV0dGUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2VLZXkgJiYgd2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZVtsb2NhbFN0b3JhZ2VLZXldID0gc2VsZWN0aW9uUGFsZXR0ZS5qb2luKFwiO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlKSB7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRVbmlxdWVTZWxlY3Rpb25QYWxldHRlKCkge1xuICAgICAgICAgICAgdmFyIHVuaXF1ZSA9IFtdO1xuICAgICAgICAgICAgaWYgKG9wdHMuc2hvd1BhbGV0dGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGlvblBhbGV0dGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJnYiA9IHRpbnljb2xvcihzZWxlY3Rpb25QYWxldHRlW2ldKS50b1JnYlN0cmluZygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFsZXR0ZUxvb2t1cFtyZ2JdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWUucHVzaChzZWxlY3Rpb25QYWxldHRlW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZS5yZXZlcnNlKCkuc2xpY2UoMCwgb3B0cy5tYXhTZWxlY3Rpb25TaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdQYWxldHRlKCkge1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudENvbG9yID0gZ2V0KCk7XG5cbiAgICAgICAgICAgIHZhciBodG1sID0gJC5tYXAocGFsZXR0ZUFycmF5LCBmdW5jdGlvbiAocGFsZXR0ZSwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYWxldHRlVGVtcGxhdGUocGFsZXR0ZSwgY3VycmVudENvbG9yLCBcInNwLXBhbGV0dGUtcm93IHNwLXBhbGV0dGUtcm93LVwiICsgaSwgb3B0cyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdXBkYXRlU2VsZWN0aW9uUGFsZXR0ZUZyb21TdG9yYWdlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3Rpb25QYWxldHRlKSB7XG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKHBhbGV0dGVUZW1wbGF0ZShnZXRVbmlxdWVTZWxlY3Rpb25QYWxldHRlKCksIGN1cnJlbnRDb2xvciwgXCJzcC1wYWxldHRlLXJvdyBzcC1wYWxldHRlLXJvdy1zZWxlY3Rpb25cIiwgb3B0cykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYWxldHRlQ29udGFpbmVyLmh0bWwoaHRtbC5qb2luKFwiXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdJbml0aWFsKCkge1xuICAgICAgICAgICAgaWYgKG9wdHMuc2hvd0luaXRpYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5pdGlhbCA9IGNvbG9yT25TaG93O1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gZ2V0KCk7XG4gICAgICAgICAgICAgICAgaW5pdGlhbENvbG9yQ29udGFpbmVyLmh0bWwocGFsZXR0ZVRlbXBsYXRlKFtpbml0aWFsLCBjdXJyZW50XSwgY3VycmVudCwgXCJzcC1wYWxldHRlLXJvdy1pbml0aWFsXCIsIG9wdHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYWdTdGFydCgpIHtcbiAgICAgICAgICAgIGlmIChkcmFnSGVpZ2h0IDw9IDAgfHwgZHJhZ1dpZHRoIDw9IDAgfHwgc2xpZGVIZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgICAgIHJlZmxvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoZHJhZ2dpbmdDbGFzcyk7XG4gICAgICAgICAgICBzaGlmdE1vdmVtZW50RGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGJvdW5kRWxlbWVudC50cmlnZ2VyKCdkcmFnc3RhcnQuc3BlY3RydW0nLCBbIGdldCgpIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhZ1N0b3AoKSB7XG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoZHJhZ2dpbmdDbGFzcyk7XG4gICAgICAgICAgICBib3VuZEVsZW1lbnQudHJpZ2dlcignZHJhZ3N0b3Auc3BlY3RydW0nLCBbIGdldCgpIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RnJvbVRleHRJbnB1dCgpIHtcblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGV4dElucHV0LnZhbCgpO1xuXG4gICAgICAgICAgICBpZiAoKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSBcIlwiKSAmJiBhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgc2V0KG51bGwpO1xuICAgICAgICAgICAgICAgIG1vdmUoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVPcmlnaW5hbElucHV0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlueSA9IHRpbnljb2xvcih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRpbnkuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldCh0aW55KTtcbiAgICAgICAgICAgICAgICAgICAgbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVPcmlnaW5hbElucHV0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0SW5wdXQuYWRkQ2xhc3MoXCJzcC12YWxpZGF0aW9uLWVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9ICQuRXZlbnQoJ2JlZm9yZVNob3cuc3BlY3RydW0nKTtcblxuICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICAgICAgICByZWZsb3coKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJvdW5kRWxlbWVudC50cmlnZ2VyKGV2ZW50LCBbIGdldCgpIF0pO1xuXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmJlZm9yZVNob3coZ2V0KCkpID09PSBmYWxzZSB8fCBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGlkZUFsbCgpO1xuICAgICAgICAgICAgdmlzaWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgICQoZG9jKS5vbihcImtleWRvd24uc3BlY3RydW1cIiwgb25rZXlkb3duKTtcbiAgICAgICAgICAgICQoZG9jKS5vbihcImNsaWNrLnNwZWN0cnVtXCIsIGNsaWNrb3V0KTtcbiAgICAgICAgICAgICQod2luZG93KS5vbihcInJlc2l6ZS5zcGVjdHJ1bVwiLCByZXNpemUpO1xuICAgICAgICAgICAgcmVwbGFjZXIuYWRkQ2xhc3MoXCJzcC1hY3RpdmVcIik7XG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoXCJzcC1oaWRkZW5cIik7XG5cbiAgICAgICAgICAgIHJlZmxvdygpO1xuICAgICAgICAgICAgdXBkYXRlVUkoKTtcblxuICAgICAgICAgICAgY29sb3JPblNob3cgPSBnZXQoKTtcblxuICAgICAgICAgICAgZHJhd0luaXRpYWwoKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zaG93KGNvbG9yT25TaG93KTtcbiAgICAgICAgICAgIGJvdW5kRWxlbWVudC50cmlnZ2VyKCdzaG93LnNwZWN0cnVtJywgWyBjb2xvck9uU2hvdyBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9ua2V5ZG93bihlKSB7XG4gICAgICAgICAgICAvLyBDbG9zZSBvbiBFU0NcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3KSB7XG4gICAgICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xpY2tvdXQoZSkge1xuICAgICAgICAgICAgLy8gUmV0dXJuIG9uIHJpZ2h0IGNsaWNrLlxuICAgICAgICAgICAgaWYgKGUuYnV0dG9uID09IDIpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgICAgIC8vIElmIGEgZHJhZyBldmVudCB3YXMgaGFwcGVuaW5nIGR1cmluZyB0aGUgbW91c2V1cCwgZG9uJ3QgaGlkZVxuICAgICAgICAgICAgLy8gb24gY2xpY2suXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykgeyByZXR1cm47IH1cblxuICAgICAgICAgICAgaWYgKGNsaWNrb3V0RmlyZXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVPcmlnaW5hbElucHV0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV2ZXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoaWRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgLy8gUmV0dXJuIGlmIGhpZGluZyBpcyB1bm5lY2Vzc2FyeVxuICAgICAgICAgICAgaWYgKCF2aXNpYmxlIHx8IGZsYXQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgICB2aXNpYmxlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICQoZG9jKS5vZmYoXCJrZXlkb3duLnNwZWN0cnVtXCIsIG9ua2V5ZG93bik7XG4gICAgICAgICAgICAkKGRvYykub2ZmKFwiY2xpY2suc3BlY3RydW1cIiwgY2xpY2tvdXQpO1xuICAgICAgICAgICAgJCh3aW5kb3cpLm9mZihcInJlc2l6ZS5zcGVjdHJ1bVwiLCByZXNpemUpO1xuXG4gICAgICAgICAgICByZXBsYWNlci5yZW1vdmVDbGFzcyhcInNwLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhcInNwLWhpZGRlblwiKTtcblxuICAgICAgICAgICAgY2FsbGJhY2tzLmhpZGUoZ2V0KCkpO1xuICAgICAgICAgICAgYm91bmRFbGVtZW50LnRyaWdnZXIoJ2hpZGUuc3BlY3RydW0nLCBbIGdldCgpIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0KCkge1xuICAgICAgICAgICAgc2V0KGNvbG9yT25TaG93LCB0cnVlKTtcbiAgICAgICAgICAgIHVwZGF0ZU9yaWdpbmFsSW5wdXQodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXQoY29sb3IsIGlnbm9yZUZvcm1hdENoYW5nZSkge1xuICAgICAgICAgICAgaWYgKHRpbnljb2xvci5lcXVhbHMoY29sb3IsIGdldCgpKSkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBVSSBqdXN0IGluIGNhc2UgYSB2YWxpZGF0aW9uIGVycm9yIG5lZWRzXG4gICAgICAgICAgICAgICAgLy8gdG8gYmUgY2xlYXJlZC5cbiAgICAgICAgICAgICAgICB1cGRhdGVVSSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG5ld0NvbG9yLCBuZXdIc3Y7XG4gICAgICAgICAgICBpZiAoIWNvbG9yICYmIGFsbG93RW1wdHkpIHtcbiAgICAgICAgICAgICAgICBpc0VtcHR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5ld0NvbG9yID0gdGlueWNvbG9yKGNvbG9yKTtcbiAgICAgICAgICAgICAgICBuZXdIc3YgPSBuZXdDb2xvci50b0hzdigpO1xuXG4gICAgICAgICAgICAgICAgY3VycmVudEh1ZSA9IChuZXdIc3YuaCAlIDM2MCkgLyAzNjA7XG4gICAgICAgICAgICAgICAgY3VycmVudFNhdHVyYXRpb24gPSBuZXdIc3YucztcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBuZXdIc3YudjtcbiAgICAgICAgICAgICAgICBjdXJyZW50QWxwaGEgPSBuZXdIc3YuYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZVVJKCk7XG5cbiAgICAgICAgICAgIGlmIChuZXdDb2xvciAmJiBuZXdDb2xvci5pc1ZhbGlkKCkgJiYgIWlnbm9yZUZvcm1hdENoYW5nZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmVmZXJyZWRGb3JtYXQgPSBvcHRzLnByZWZlcnJlZEZvcm1hdCB8fCBuZXdDb2xvci5nZXRGb3JtYXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldChvcHRzKSB7XG4gICAgICAgICAgICBvcHRzID0gb3B0cyB8fCB7IH07XG5cbiAgICAgICAgICAgIGlmIChhbGxvd0VtcHR5ICYmIGlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRpbnljb2xvci5mcm9tUmF0aW8oe1xuICAgICAgICAgICAgICAgIGg6IGN1cnJlbnRIdWUsXG4gICAgICAgICAgICAgICAgczogY3VycmVudFNhdHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdjogY3VycmVudFZhbHVlLFxuICAgICAgICAgICAgICAgIGE6IE1hdGgucm91bmQoY3VycmVudEFscGhhICogMTAwMCkgLyAxMDAwXG4gICAgICAgICAgICB9LCB7IGZvcm1hdDogb3B0cy5mb3JtYXQgfHwgY3VycmVudFByZWZlcnJlZEZvcm1hdCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzVmFsaWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRleHRJbnB1dC5oYXNDbGFzcyhcInNwLXZhbGlkYXRpb24tZXJyb3JcIik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtb3ZlKCkge1xuICAgICAgICAgICAgdXBkYXRlVUkoKTtcblxuICAgICAgICAgICAgY2FsbGJhY2tzLm1vdmUoZ2V0KCkpO1xuICAgICAgICAgICAgYm91bmRFbGVtZW50LnRyaWdnZXIoJ21vdmUuc3BlY3RydW0nLCBbIGdldCgpIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlVUkoKSB7XG5cbiAgICAgICAgICAgIHRleHRJbnB1dC5yZW1vdmVDbGFzcyhcInNwLXZhbGlkYXRpb24tZXJyb3JcIik7XG5cbiAgICAgICAgICAgIHVwZGF0ZUhlbHBlckxvY2F0aW9ucygpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgZHJhZ2dlciBiYWNrZ3JvdW5kIGNvbG9yIChncmFkaWVudHMgdGFrZSBjYXJlIG9mIHNhdHVyYXRpb24gYW5kIHZhbHVlKS5cbiAgICAgICAgICAgIHZhciBmbGF0Q29sb3IgPSB0aW55Y29sb3IuZnJvbVJhdGlvKHsgaDogY3VycmVudEh1ZSwgczogMSwgdjogMSB9KTtcbiAgICAgICAgICAgIGRyYWdnZXIuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBmbGF0Q29sb3IudG9IZXhTdHJpbmcoKSk7XG5cbiAgICAgICAgICAgIC8vIEdldCBhIGZvcm1hdCB0aGF0IGFscGhhIHdpbGwgYmUgaW5jbHVkZWQgaW4gKGhleCBhbmQgbmFtZXMgaWdub3JlIGFscGhhKVxuICAgICAgICAgICAgdmFyIGZvcm1hdCA9IGN1cnJlbnRQcmVmZXJyZWRGb3JtYXQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudEFscGhhIDwgMSAmJiAhKGN1cnJlbnRBbHBoYSA9PT0gMCAmJiBmb3JtYXQgPT09IFwibmFtZVwiKSkge1xuICAgICAgICAgICAgICAgIGlmIChmb3JtYXQgPT09IFwiaGV4XCIgfHwgZm9ybWF0ID09PSBcImhleDNcIiB8fCBmb3JtYXQgPT09IFwiaGV4NlwiIHx8IGZvcm1hdCA9PT0gXCJuYW1lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ID0gXCJyZ2JcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZWFsQ29sb3IgPSBnZXQoeyBmb3JtYXQ6IGZvcm1hdCB9KSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5Q29sb3IgPSAnJztcblxuICAgICAgICAgICAgIC8vcmVzZXQgYmFja2dyb3VuZCBpbmZvIGZvciBwcmV2aWV3IGVsZW1lbnRcbiAgICAgICAgICAgIHByZXZpZXdFbGVtZW50LnJlbW92ZUNsYXNzKFwic3AtY2xlYXItZGlzcGxheVwiKTtcbiAgICAgICAgICAgIHByZXZpZXdFbGVtZW50LmNzcygnYmFja2dyb3VuZC1jb2xvcicsICd0cmFuc3BhcmVudCcpO1xuXG4gICAgICAgICAgICBpZiAoIXJlYWxDb2xvciAmJiBhbGxvd0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSByZXBsYWNlZCBlbGVtZW50cyBiYWNrZ3JvdW5kIHdpdGggaWNvbiBpbmRpY2F0aW5nIG5vIGNvbG9yIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgIHByZXZpZXdFbGVtZW50LmFkZENsYXNzKFwic3AtY2xlYXItZGlzcGxheVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZWFsSGV4ID0gcmVhbENvbG9yLnRvSGV4U3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIHJlYWxSZ2IgPSByZWFsQ29sb3IudG9SZ2JTdHJpbmcoKTtcblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmVwbGFjZWQgZWxlbWVudHMgYmFja2dyb3VuZCBjb2xvciAod2l0aCBhY3R1YWwgc2VsZWN0ZWQgY29sb3IpXG4gICAgICAgICAgICAgICAgaWYgKHJnYmFTdXBwb3J0IHx8IHJlYWxDb2xvci5hbHBoYSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3RWxlbWVudC5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsIHJlYWxSZ2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlld0VsZW1lbnQuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLCBcInRyYW5zcGFyZW50XCIpO1xuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3RWxlbWVudC5jc3MoXCJmaWx0ZXJcIiwgcmVhbENvbG9yLnRvRmlsdGVyKCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRzLnNob3dBbHBoYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmdiID0gcmVhbENvbG9yLnRvUmdiKCk7XG4gICAgICAgICAgICAgICAgICAgIHJnYi5hID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYWxBbHBoYSA9IHRpbnljb2xvcihyZ2IpLnRvUmdiU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBncmFkaWVudCA9IFwibGluZWFyLWdyYWRpZW50KGxlZnQsIFwiICsgcmVhbEFscGhhICsgXCIsIFwiICsgcmVhbEhleCArIFwiKVwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChJRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGFTbGlkZXJJbm5lci5jc3MoXCJmaWx0ZXJcIiwgdGlueWNvbG9yKHJlYWxBbHBoYSkudG9GaWx0ZXIoeyBncmFkaWVudFR5cGU6IDEgfSwgcmVhbEhleCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxwaGFTbGlkZXJJbm5lci5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwiLXdlYmtpdC1cIiArIGdyYWRpZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhU2xpZGVySW5uZXIuY3NzKFwiYmFja2dyb3VuZFwiLCBcIi1tb3otXCIgKyBncmFkaWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbHBoYVNsaWRlcklubmVyLmNzcyhcImJhY2tncm91bmRcIiwgXCItbXMtXCIgKyBncmFkaWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgY3VycmVudCBzeW50YXggZ3JhZGllbnQgb24gdW5wcmVmaXhlZCBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFscGhhU2xpZGVySW5uZXIuY3NzKFwiYmFja2dyb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCBcIiArIHJlYWxBbHBoYSArIFwiLCBcIiArIHJlYWxIZXggKyBcIilcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkaXNwbGF5Q29sb3IgPSByZWFsQ29sb3IudG9TdHJpbmcoZm9ybWF0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0ZXh0IGVudHJ5IGlucHV0IGFzIGl0IGNoYW5nZXMgaGFwcGVuXG4gICAgICAgICAgICBpZiAob3B0cy5zaG93SW5wdXQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQudmFsKGRpc3BsYXlDb2xvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRzLnNob3dQYWxldHRlKSB7XG4gICAgICAgICAgICAgICAgZHJhd1BhbGV0dGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZHJhd0luaXRpYWwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUhlbHBlckxvY2F0aW9ucygpIHtcbiAgICAgICAgICAgIHZhciBzID0gY3VycmVudFNhdHVyYXRpb247XG4gICAgICAgICAgICB2YXIgdiA9IGN1cnJlbnRWYWx1ZTtcblxuICAgICAgICAgICAgaWYoYWxsb3dFbXB0eSAmJiBpc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgLy9pZiBzZWxlY3RlZCBjb2xvciBpcyBlbXB0eSwgaGlkZSB0aGUgaGVscGVyc1xuICAgICAgICAgICAgICAgIGFscGhhU2xpZGVIZWxwZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHNsaWRlSGVscGVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkcmFnSGVscGVyLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vbWFrZSBzdXJlIGhlbHBlcnMgYXJlIHZpc2libGVcbiAgICAgICAgICAgICAgICBhbHBoYVNsaWRlSGVscGVyLnNob3coKTtcbiAgICAgICAgICAgICAgICBzbGlkZUhlbHBlci5zaG93KCk7XG4gICAgICAgICAgICAgICAgZHJhZ0hlbHBlci5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBXaGVyZSB0byBzaG93IHRoZSBsaXR0bGUgY2lyY2xlIGluIHRoYXQgZGlzcGxheXMgeW91ciBjdXJyZW50IHNlbGVjdGVkIGNvbG9yXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdYID0gcyAqIGRyYWdXaWR0aDtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZ1kgPSBkcmFnSGVpZ2h0IC0gKHYgKiBkcmFnSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBkcmFnWCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgICAgICAgICAtZHJhZ0hlbHBlckhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oZHJhZ1dpZHRoIC0gZHJhZ0hlbHBlckhlaWdodCwgZHJhZ1ggLSBkcmFnSGVscGVySGVpZ2h0KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZHJhZ1kgPSBNYXRoLm1heChcbiAgICAgICAgICAgICAgICAgICAgLWRyYWdIZWxwZXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWluKGRyYWdIZWlnaHQgLSBkcmFnSGVscGVySGVpZ2h0LCBkcmFnWSAtIGRyYWdIZWxwZXJIZWlnaHQpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBkcmFnSGVscGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIFwidG9wXCI6IGRyYWdZICsgXCJweFwiLFxuICAgICAgICAgICAgICAgICAgICBcImxlZnRcIjogZHJhZ1ggKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBhbHBoYVggPSBjdXJyZW50QWxwaGEgKiBhbHBoYVdpZHRoO1xuICAgICAgICAgICAgICAgIGFscGhhU2xpZGVIZWxwZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgXCJsZWZ0XCI6IChhbHBoYVggLSAoYWxwaGFTbGlkZUhlbHBlcldpZHRoIC8gMikpICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBXaGVyZSB0byBzaG93IHRoZSBiYXIgdGhhdCBkaXNwbGF5cyB5b3VyIGN1cnJlbnQgc2VsZWN0ZWQgaHVlXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlWSA9IChjdXJyZW50SHVlKSAqIHNsaWRlSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHNsaWRlSGVscGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIFwidG9wXCI6IChzbGlkZVkgLSBzbGlkZUhlbHBlckhlaWdodCkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU9yaWdpbmFsSW5wdXQoZmlyZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgY29sb3IgPSBnZXQoKSxcbiAgICAgICAgICAgICAgICBkaXNwbGF5Q29sb3IgPSAnJyxcbiAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gIXRpbnljb2xvci5lcXVhbHMoY29sb3IsIGNvbG9yT25TaG93KTtcblxuICAgICAgICAgICAgaWYgKGNvbG9yKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheUNvbG9yID0gY29sb3IudG9TdHJpbmcoY3VycmVudFByZWZlcnJlZEZvcm1hdCk7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBzZWxlY3Rpb24gcGFsZXR0ZSB3aXRoIHRoZSBjdXJyZW50IGNvbG9yXG4gICAgICAgICAgICAgICAgYWRkQ29sb3JUb1NlbGVjdGlvblBhbGV0dGUoY29sb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNJbnB1dCkge1xuICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudC52YWwoZGlzcGxheUNvbG9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpcmVDYWxsYmFjayAmJiBoYXNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLmNoYW5nZShjb2xvcik7XG4gICAgICAgICAgICAgICAgYm91bmRFbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScsIFsgY29sb3IgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWZsb3coKSB7XG4gICAgICAgICAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIENhbGN1bGF0aW9ucyB3b3VsZCBiZSB1c2VsZXNzIGFuZCB3b3VsZG4ndCBiZSByZWxpYWJsZSBhbnl3YXlzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmFnV2lkdGggPSBkcmFnZ2VyLndpZHRoKCk7XG4gICAgICAgICAgICBkcmFnSGVpZ2h0ID0gZHJhZ2dlci5oZWlnaHQoKTtcbiAgICAgICAgICAgIGRyYWdIZWxwZXJIZWlnaHQgPSBkcmFnSGVscGVyLmhlaWdodCgpO1xuICAgICAgICAgICAgc2xpZGVXaWR0aCA9IHNsaWRlci53aWR0aCgpO1xuICAgICAgICAgICAgc2xpZGVIZWlnaHQgPSBzbGlkZXIuaGVpZ2h0KCk7XG4gICAgICAgICAgICBzbGlkZUhlbHBlckhlaWdodCA9IHNsaWRlSGVscGVyLmhlaWdodCgpO1xuICAgICAgICAgICAgYWxwaGFXaWR0aCA9IGFscGhhU2xpZGVyLndpZHRoKCk7XG4gICAgICAgICAgICBhbHBoYVNsaWRlSGVscGVyV2lkdGggPSBhbHBoYVNsaWRlSGVscGVyLndpZHRoKCk7XG5cbiAgICAgICAgICAgIGlmICghZmxhdCkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5jc3MoXCJwb3NpdGlvblwiLCBcImFic29sdXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChvcHRzLm9mZnNldCkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIub2Zmc2V0KG9wdHMub2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIub2Zmc2V0KGdldE9mZnNldChjb250YWluZXIsIG9mZnNldEVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZUhlbHBlckxvY2F0aW9ucygpO1xuXG4gICAgICAgICAgICBpZiAob3B0cy5zaG93UGFsZXR0ZSkge1xuICAgICAgICAgICAgICAgIGRyYXdQYWxldHRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJvdW5kRWxlbWVudC50cmlnZ2VyKCdyZWZsb3cuc3BlY3RydW0nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICBib3VuZEVsZW1lbnQuc2hvdygpO1xuICAgICAgICAgICAgb2Zmc2V0RWxlbWVudC5vZmYoXCJjbGljay5zcGVjdHJ1bSB0b3VjaHN0YXJ0LnNwZWN0cnVtXCIpO1xuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgcmVwbGFjZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICBzcGVjdHJ1bXNbc3BlY3QuaWRdID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wdGlvbihvcHRpb25OYW1lLCBvcHRpb25WYWx1ZSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh7fSwgb3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9uVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRzW29wdGlvbk5hbWVdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcHRzW29wdGlvbk5hbWVdID0gb3B0aW9uVmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25OYW1lID09PSBcInByZWZlcnJlZEZvcm1hdFwiKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFByZWZlcnJlZEZvcm1hdCA9IG9wdHMucHJlZmVycmVkRm9ybWF0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBwbHlPcHRpb25zKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYm91bmRFbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICBvZmZzZXRFbGVtZW50LnJlbW92ZUNsYXNzKFwic3AtZGlzYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICAgICAgaGlkZSgpO1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgYm91bmRFbGVtZW50LmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgICAgIG9mZnNldEVsZW1lbnQuYWRkQ2xhc3MoXCJzcC1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE9mZnNldChjb29yZCkge1xuICAgICAgICAgICAgb3B0cy5vZmZzZXQgPSBjb29yZDtcbiAgICAgICAgICAgIHJlZmxvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5pdGlhbGl6ZSgpO1xuXG4gICAgICAgIHZhciBzcGVjdCA9IHtcbiAgICAgICAgICAgIHNob3c6IHNob3csXG4gICAgICAgICAgICBoaWRlOiBoaWRlLFxuICAgICAgICAgICAgdG9nZ2xlOiB0b2dnbGUsXG4gICAgICAgICAgICByZWZsb3c6IHJlZmxvdyxcbiAgICAgICAgICAgIG9wdGlvbjogb3B0aW9uLFxuICAgICAgICAgICAgZW5hYmxlOiBlbmFibGUsXG4gICAgICAgICAgICBkaXNhYmxlOiBkaXNhYmxlLFxuICAgICAgICAgICAgb2Zmc2V0OiBzZXRPZmZzZXQsXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgc2V0KGMpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZU9yaWdpbmFsSW5wdXQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGdldCxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lclxuICAgICAgICB9O1xuXG4gICAgICAgIHNwZWN0LmlkID0gc3BlY3RydW1zLnB1c2goc3BlY3QpIC0gMTtcblxuICAgICAgICByZXR1cm4gc3BlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBjaGVja09mZnNldCAtIGdldCB0aGUgb2Zmc2V0IGJlbG93L2Fib3ZlIGFuZCBsZWZ0L3JpZ2h0IGVsZW1lbnQgZGVwZW5kaW5nIG9uIHNjcmVlbiBwb3NpdGlvblxuICAgICogVGhhbmtzIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LXVpL2Jsb2IvbWFzdGVyL3VpL2pxdWVyeS51aS5kYXRlcGlja2VyLmpzXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZXRPZmZzZXQocGlja2VyLCBpbnB1dCkge1xuICAgICAgICB2YXIgZXh0cmFZID0gMDtcbiAgICAgICAgdmFyIGRwV2lkdGggPSBwaWNrZXIub3V0ZXJXaWR0aCgpO1xuICAgICAgICB2YXIgZHBIZWlnaHQgPSBwaWNrZXIub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIGlucHV0SGVpZ2h0ID0gaW5wdXQub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIGRvYyA9IHBpY2tlclswXS5vd25lckRvY3VtZW50O1xuICAgICAgICB2YXIgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHZhciB2aWV3V2lkdGggPSBkb2NFbGVtLmNsaWVudFdpZHRoICsgJChkb2MpLnNjcm9sbExlZnQoKTtcbiAgICAgICAgdmFyIHZpZXdIZWlnaHQgPSBkb2NFbGVtLmNsaWVudEhlaWdodCArICQoZG9jKS5zY3JvbGxUb3AoKTtcbiAgICAgICAgdmFyIG9mZnNldCA9IGlucHV0Lm9mZnNldCgpO1xuICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9mZnNldC5sZWZ0O1xuICAgICAgICB2YXIgb2Zmc2V0VG9wID0gb2Zmc2V0LnRvcDtcblxuICAgICAgICBvZmZzZXRUb3AgKz0gaW5wdXRIZWlnaHQ7XG5cbiAgICAgICAgb2Zmc2V0TGVmdCAtPVxuICAgICAgICAgICAgTWF0aC5taW4ob2Zmc2V0TGVmdCwgKG9mZnNldExlZnQgKyBkcFdpZHRoID4gdmlld1dpZHRoICYmIHZpZXdXaWR0aCA+IGRwV2lkdGgpID9cbiAgICAgICAgICAgIE1hdGguYWJzKG9mZnNldExlZnQgKyBkcFdpZHRoIC0gdmlld1dpZHRoKSA6IDApO1xuXG4gICAgICAgIG9mZnNldFRvcCAtPVxuICAgICAgICAgICAgTWF0aC5taW4ob2Zmc2V0VG9wLCAoKG9mZnNldFRvcCArIGRwSGVpZ2h0ID4gdmlld0hlaWdodCAmJiB2aWV3SGVpZ2h0ID4gZHBIZWlnaHQpID9cbiAgICAgICAgICAgIE1hdGguYWJzKGRwSGVpZ2h0ICsgaW5wdXRIZWlnaHQgLSBleHRyYVkpIDogZXh0cmFZKSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvcDogb2Zmc2V0VG9wLFxuICAgICAgICAgICAgYm90dG9tOiBvZmZzZXQuYm90dG9tLFxuICAgICAgICAgICAgbGVmdDogb2Zmc2V0TGVmdCxcbiAgICAgICAgICAgIHJpZ2h0OiBvZmZzZXQucmlnaHQsXG4gICAgICAgICAgICB3aWR0aDogb2Zmc2V0LndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBvZmZzZXQuaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBub29wIC0gZG8gbm90aGluZ1xuICAgICovXG4gICAgZnVuY3Rpb24gbm9vcCgpIHtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICogc3RvcFByb3BhZ2F0aW9uIC0gbWFrZXMgdGhlIGNvZGUgb25seSBkb2luZyB0aGlzIGEgbGl0dGxlIGVhc2llciB0byByZWFkIGluIGxpbmVcbiAgICAqL1xuICAgIGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdFxuICAgICogVGhhbmtzIHRvIHVuZGVyc2NvcmUuanNcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGJpbmQoZnVuYywgb2JqKSB7XG4gICAgICAgIHZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShvYmosIGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICogTGlnaHR3ZWlnaHQgZHJhZyBoZWxwZXIuICBIYW5kbGVzIGNvbnRhaW5tZW50IHdpdGhpbiB0aGUgZWxlbWVudCwgc28gdGhhdFxuICAgICogd2hlbiBkcmFnZ2luZywgdGhlIHggaXMgd2l0aGluIFswLGVsZW1lbnQud2lkdGhdIGFuZCB5IGlzIHdpdGhpbiBbMCxlbGVtZW50LmhlaWdodF1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGRyYWdnYWJsZShlbGVtZW50LCBvbm1vdmUsIG9uc3RhcnQsIG9uc3RvcCkge1xuICAgICAgICBvbm1vdmUgPSBvbm1vdmUgfHwgZnVuY3Rpb24gKCkgeyB9O1xuICAgICAgICBvbnN0YXJ0ID0gb25zdGFydCB8fCBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIG9uc3RvcCA9IG9uc3RvcCB8fCBmdW5jdGlvbiAoKSB7IH07XG4gICAgICAgIHZhciBkb2MgPSBkb2N1bWVudDtcbiAgICAgICAgdmFyIGRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBvZmZzZXQgPSB7fTtcbiAgICAgICAgdmFyIG1heEhlaWdodCA9IDA7XG4gICAgICAgIHZhciBtYXhXaWR0aCA9IDA7XG4gICAgICAgIHZhciBoYXNUb3VjaCA9ICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpO1xuXG4gICAgICAgIHZhciBkdXJpbmdEcmFnRXZlbnRzID0ge307XG4gICAgICAgIGR1cmluZ0RyYWdFdmVudHNbXCJzZWxlY3RzdGFydFwiXSA9IHByZXZlbnQ7XG4gICAgICAgIGR1cmluZ0RyYWdFdmVudHNbXCJkcmFnc3RhcnRcIl0gPSBwcmV2ZW50O1xuICAgICAgICBkdXJpbmdEcmFnRXZlbnRzW1widG91Y2htb3ZlIG1vdXNlbW92ZVwiXSA9IG1vdmU7XG4gICAgICAgIGR1cmluZ0RyYWdFdmVudHNbXCJ0b3VjaGVuZCBtb3VzZXVwXCJdID0gc3RvcDtcblxuICAgICAgICBmdW5jdGlvbiBwcmV2ZW50KGUpIHtcbiAgICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1vdmUoZSkge1xuICAgICAgICAgICAgaWYgKGRyYWdnaW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gTW91c2V1cCBoYXBwZW5lZCBvdXRzaWRlIG9mIHdpbmRvd1xuICAgICAgICAgICAgICAgIGlmIChJRSAmJiBkb2MuZG9jdW1lbnRNb2RlIDwgOSAmJiAhZS5idXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgdDAgPSBlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgJiYgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgdmFyIHBhZ2VYID0gdDAgJiYgdDAucGFnZVggfHwgZS5wYWdlWDtcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVkgPSB0MCAmJiB0MC5wYWdlWSB8fCBlLnBhZ2VZO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRyYWdYID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocGFnZVggLSBvZmZzZXQubGVmdCwgbWF4V2lkdGgpKTtcbiAgICAgICAgICAgICAgICB2YXIgZHJhZ1kgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihwYWdlWSAtIG9mZnNldC50b3AsIG1heEhlaWdodCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGhhc1RvdWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3Agc2Nyb2xsaW5nIGluIGlPU1xuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50KGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9ubW92ZS5hcHBseShlbGVtZW50LCBbZHJhZ1gsIGRyYWdZLCBlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdGFydChlKSB7XG4gICAgICAgICAgICB2YXIgcmlnaHRjbGljayA9IChlLndoaWNoKSA/IChlLndoaWNoID09IDMpIDogKGUuYnV0dG9uID09IDIpO1xuXG4gICAgICAgICAgICBpZiAoIXJpZ2h0Y2xpY2sgJiYgIWRyYWdnaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9uc3RhcnQuYXBwbHkoZWxlbWVudCwgYXJndW1lbnRzKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAkKGVsZW1lbnQpLmhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aCA9ICQoZWxlbWVudCkud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gJChlbGVtZW50KS5vZmZzZXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAkKGRvYykub24oZHVyaW5nRHJhZ0V2ZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICQoZG9jLmJvZHkpLmFkZENsYXNzKFwic3AtZHJhZ2dpbmdcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgbW92ZShlKTtcblxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAgICAgICBpZiAoZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgICAgICAkKGRvYykub2ZmKGR1cmluZ0RyYWdFdmVudHMpO1xuICAgICAgICAgICAgICAgICQoZG9jLmJvZHkpLnJlbW92ZUNsYXNzKFwic3AtZHJhZ2dpbmdcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBXYWl0IGEgdGljayBiZWZvcmUgbm90aWZ5aW5nIG9ic2VydmVycyB0byBhbGxvdyB0aGUgY2xpY2sgZXZlbnRcbiAgICAgICAgICAgICAgICAvLyB0byBmaXJlIGluIENocm9tZS5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBvbnN0b3AuYXBwbHkoZWxlbWVudCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAkKGVsZW1lbnQpLm9uKFwidG91Y2hzdGFydCBtb3VzZWRvd25cIiwgc3RhcnQpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIGRlYm91bmNlKSB7XG4gICAgICAgIHZhciB0aW1lb3V0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgdmFyIHRocm90dGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChkZWJvdW5jZSkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgaWYgKGRlYm91bmNlIHx8ICF0aW1lb3V0KSB0aW1lb3V0ID0gc2V0VGltZW91dCh0aHJvdHRsZXIsIHdhaXQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlucHV0VHlwZUNvbG9yU3VwcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuICQuZm4uc3BlY3RydW0uaW5wdXRUeXBlQ29sb3JTdXBwb3J0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgKiBEZWZpbmUgYSBqUXVlcnkgcGx1Z2luXG4gICAgKi9cbiAgICB2YXIgZGF0YUlEID0gXCJzcGVjdHJ1bS5pZFwiO1xuICAgICQuZm4uc3BlY3RydW0gPSBmdW5jdGlvbiAob3B0cywgZXh0cmEpIHtcblxuICAgICAgICBpZiAodHlwZW9mIG9wdHMgPT0gXCJzdHJpbmdcIikge1xuXG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICk7XG5cbiAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNwZWN0ID0gc3BlY3RydW1zWyQodGhpcykuZGF0YShkYXRhSUQpXTtcbiAgICAgICAgICAgICAgICBpZiAoc3BlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IHNwZWN0W29wdHNdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIlNwZWN0cnVtOiBubyBzdWNoIG1ldGhvZDogJ1wiICsgb3B0cyArIFwiJ1wiICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cyA9PSBcImdldFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNwZWN0LmdldCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wdHMgPT0gXCJjb250YWluZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBzcGVjdC5jb250YWluZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0cyA9PSBcIm9wdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHNwZWN0Lm9wdGlvbi5hcHBseShzcGVjdCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0cyA9PSBcImRlc3Ryb3lcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BlY3QuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVEYXRhKGRhdGFJRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QuYXBwbHkoc3BlY3QsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluaXRpYWxpemluZyBhIG5ldyBpbnN0YW5jZSBvZiBzcGVjdHJ1bVxuICAgICAgICByZXR1cm4gdGhpcy5zcGVjdHJ1bShcImRlc3Ryb3lcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkKHRoaXMpLmRhdGEoKSwgb3B0cyk7XG4gICAgICAgICAgICB2YXIgc3BlY3QgPSBzcGVjdHJ1bSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgICQodGhpcykuZGF0YShkYXRhSUQsIHNwZWN0LmlkKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQuZm4uc3BlY3RydW0ubG9hZCA9IHRydWU7XG4gICAgJC5mbi5zcGVjdHJ1bS5sb2FkT3B0cyA9IHt9O1xuICAgICQuZm4uc3BlY3RydW0uZHJhZ2dhYmxlID0gZHJhZ2dhYmxlO1xuICAgICQuZm4uc3BlY3RydW0uZGVmYXVsdHMgPSBkZWZhdWx0T3B0cztcbiAgICAkLmZuLnNwZWN0cnVtLmlucHV0VHlwZUNvbG9yU3VwcG9ydCA9IGZ1bmN0aW9uIGlucHV0VHlwZUNvbG9yU3VwcG9ydCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dFR5cGVDb2xvclN1cHBvcnQuX2NhY2hlZFJlc3VsdCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgdmFyIGNvbG9ySW5wdXQgPSAkKFwiPGlucHV0IHR5cGU9J2NvbG9yJy8+XCIpWzBdOyAvLyBpZiBjb2xvciBlbGVtZW50IGlzIHN1cHBvcnRlZCwgdmFsdWUgd2lsbCBkZWZhdWx0IHRvIG5vdCBudWxsXG4gICAgICAgICAgICBpbnB1dFR5cGVDb2xvclN1cHBvcnQuX2NhY2hlZFJlc3VsdCA9IGNvbG9ySW5wdXQudHlwZSA9PT0gXCJjb2xvclwiICYmIGNvbG9ySW5wdXQudmFsdWUgIT09IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlucHV0VHlwZUNvbG9yU3VwcG9ydC5fY2FjaGVkUmVzdWx0O1xuICAgIH07XG5cbiAgICAkLnNwZWN0cnVtID0geyB9O1xuICAgICQuc3BlY3RydW0ubG9jYWxpemF0aW9uID0geyB9O1xuICAgICQuc3BlY3RydW0ucGFsZXR0ZXMgPSB7IH07XG5cbiAgICAkLmZuLnNwZWN0cnVtLnByb2Nlc3NOYXRpdmVDb2xvcklucHV0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbG9ySW5wdXRzID0gJChcImlucHV0W3R5cGU9Y29sb3JdXCIpO1xuICAgICAgICBpZiAoY29sb3JJbnB1dHMubGVuZ3RoICYmICFpbnB1dFR5cGVDb2xvclN1cHBvcnQoKSkge1xuICAgICAgICAgICAgY29sb3JJbnB1dHMuc3BlY3RydW0oe1xuICAgICAgICAgICAgICAgIHByZWZlcnJlZEZvcm1hdDogXCJoZXg2XCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIFRpbnlDb2xvciB2MS4xLjJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYmdyaW5zL1RpbnlDb2xvclxuICAgIC8vIEJyaWFuIEdyaW5zdGVhZCwgTUlUIExpY2Vuc2VcblxuICAgIChmdW5jdGlvbigpIHtcblxuICAgIHZhciB0cmltTGVmdCA9IC9eW1xccywjXSsvLFxuICAgICAgICB0cmltUmlnaHQgPSAvXFxzKyQvLFxuICAgICAgICB0aW55Q291bnRlciA9IDAsXG4gICAgICAgIG1hdGggPSBNYXRoLFxuICAgICAgICBtYXRoUm91bmQgPSBtYXRoLnJvdW5kLFxuICAgICAgICBtYXRoTWluID0gbWF0aC5taW4sXG4gICAgICAgIG1hdGhNYXggPSBtYXRoLm1heCxcbiAgICAgICAgbWF0aFJhbmRvbSA9IG1hdGgucmFuZG9tO1xuXG4gICAgdmFyIHRpbnljb2xvciA9IGZ1bmN0aW9uKGNvbG9yLCBvcHRzKSB7XG5cbiAgICAgICAgY29sb3IgPSAoY29sb3IpID8gY29sb3IgOiAnJztcbiAgICAgICAgb3B0cyA9IG9wdHMgfHwgeyB9O1xuXG4gICAgICAgIC8vIElmIGlucHV0IGlzIGFscmVhZHkgYSB0aW55Y29sb3IsIHJldHVybiBpdHNlbGZcbiAgICAgICAgaWYgKGNvbG9yIGluc3RhbmNlb2YgdGlueWNvbG9yKSB7XG4gICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBhcmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGNhbGwgdXNpbmcgbmV3IGluc3RlYWRcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIHRpbnljb2xvcikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGlueWNvbG9yKGNvbG9yLCBvcHRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZ2IgPSBpbnB1dFRvUkdCKGNvbG9yKTtcbiAgICAgICAgdGhpcy5fb3JpZ2luYWxJbnB1dCA9IGNvbG9yO1xuICAgICAgICB0aGlzLl9yID0gcmdiLnI7XG4gICAgICAgIHRoaXMuX2cgPSByZ2IuZztcbiAgICAgICAgdGhpcy5fYiA9IHJnYi5iO1xuICAgICAgICB0aGlzLl9hID0gcmdiLmE7XG4gICAgICAgIHRoaXMuX3JvdW5kQSA9IG1hdGhSb3VuZCgxMDAwICogdGhpcy5fYSkgLyAxMDAwO1xuICAgICAgICB0aGlzLl9mb3JtYXQgPSBvcHRzLmZvcm1hdCB8fCByZ2IuZm9ybWF0O1xuICAgICAgICB0aGlzLl9ncmFkaWVudFR5cGUgPSBvcHRzLmdyYWRpZW50VHlwZTtcblxuICAgICAgICAvLyBEb24ndCBsZXQgdGhlIHJhbmdlIG9mIFswLDI1NV0gY29tZSBiYWNrIGluIFswLDFdLlxuICAgICAgICAvLyBQb3RlbnRpYWxseSBsb3NlIGEgbGl0dGxlIGJpdCBvZiBwcmVjaXNpb24gaGVyZSwgYnV0IHdpbGwgZml4IGlzc3VlcyB3aGVyZVxuICAgICAgICAvLyAuNSBnZXRzIGludGVycHJldGVkIGFzIGhhbGYgb2YgdGhlIHRvdGFsLCBpbnN0ZWFkIG9mIGhhbGYgb2YgMVxuICAgICAgICAvLyBJZiBpdCB3YXMgc3VwcG9zZWQgdG8gYmUgMTI4LCB0aGlzIHdhcyBhbHJlYWR5IHRha2VuIGNhcmUgb2YgYnkgYGlucHV0VG9SZ2JgXG4gICAgICAgIGlmICh0aGlzLl9yIDwgMSkgeyB0aGlzLl9yID0gbWF0aFJvdW5kKHRoaXMuX3IpOyB9XG4gICAgICAgIGlmICh0aGlzLl9nIDwgMSkgeyB0aGlzLl9nID0gbWF0aFJvdW5kKHRoaXMuX2cpOyB9XG4gICAgICAgIGlmICh0aGlzLl9iIDwgMSkgeyB0aGlzLl9iID0gbWF0aFJvdW5kKHRoaXMuX2IpOyB9XG5cbiAgICAgICAgdGhpcy5fb2sgPSByZ2Iub2s7XG4gICAgICAgIHRoaXMuX3RjX2lkID0gdGlueUNvdW50ZXIrKztcbiAgICB9O1xuXG4gICAgdGlueWNvbG9yLnByb3RvdHlwZSA9IHtcbiAgICAgICAgaXNEYXJrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJyaWdodG5lc3MoKSA8IDEyODtcbiAgICAgICAgfSxcbiAgICAgICAgaXNMaWdodDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNEYXJrKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29rO1xuICAgICAgICB9LFxuICAgICAgICBnZXRPcmlnaW5hbElucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fb3JpZ2luYWxJbnB1dDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Rm9ybWF0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEFscGhhOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hO1xuICAgICAgICB9LFxuICAgICAgICBnZXRCcmlnaHRuZXNzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZ2IgPSB0aGlzLnRvUmdiKCk7XG4gICAgICAgICAgICByZXR1cm4gKHJnYi5yICogMjk5ICsgcmdiLmcgKiA1ODcgKyByZ2IuYiAqIDExNCkgLyAxMDAwO1xuICAgICAgICB9LFxuICAgICAgICBzZXRBbHBoYTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2EgPSBib3VuZEFscGhhKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuX3JvdW5kQSA9IG1hdGhSb3VuZCgxMDAwICogdGhpcy5fYSkgLyAxMDAwO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG4gICAgICAgIHRvSHN2OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoc3YgPSByZ2JUb0hzdih0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iKTtcbiAgICAgICAgICAgIHJldHVybiB7IGg6IGhzdi5oICogMzYwLCBzOiBoc3YucywgdjogaHN2LnYsIGE6IHRoaXMuX2EgfTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9Ic3ZTdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGhzdiA9IHJnYlRvSHN2KHRoaXMuX3IsIHRoaXMuX2csIHRoaXMuX2IpO1xuICAgICAgICAgICAgdmFyIGggPSBtYXRoUm91bmQoaHN2LmggKiAzNjApLCBzID0gbWF0aFJvdW5kKGhzdi5zICogMTAwKSwgdiA9IG1hdGhSb3VuZChoc3YudiAqIDEwMCk7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX2EgPT0gMSkgP1xuICAgICAgICAgICAgICBcImhzdihcIiAgKyBoICsgXCIsIFwiICsgcyArIFwiJSwgXCIgKyB2ICsgXCIlKVwiIDpcbiAgICAgICAgICAgICAgXCJoc3ZhKFwiICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgdiArIFwiJSwgXCIrIHRoaXMuX3JvdW5kQSArIFwiKVwiO1xuICAgICAgICB9LFxuICAgICAgICB0b0hzbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaHNsID0gcmdiVG9Ic2wodGhpcy5fciwgdGhpcy5fZywgdGhpcy5fYik7XG4gICAgICAgICAgICByZXR1cm4geyBoOiBoc2wuaCAqIDM2MCwgczogaHNsLnMsIGw6IGhzbC5sLCBhOiB0aGlzLl9hIH07XG4gICAgICAgIH0sXG4gICAgICAgIHRvSHNsU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBoc2wgPSByZ2JUb0hzbCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iKTtcbiAgICAgICAgICAgIHZhciBoID0gbWF0aFJvdW5kKGhzbC5oICogMzYwKSwgcyA9IG1hdGhSb3VuZChoc2wucyAqIDEwMCksIGwgPSBtYXRoUm91bmQoaHNsLmwgKiAxMDApO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9hID09IDEpID9cbiAgICAgICAgICAgICAgXCJoc2woXCIgICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgbCArIFwiJSlcIiA6XG4gICAgICAgICAgICAgIFwiaHNsYShcIiArIGggKyBcIiwgXCIgKyBzICsgXCIlLCBcIiArIGwgKyBcIiUsIFwiKyB0aGlzLl9yb3VuZEEgKyBcIilcIjtcbiAgICAgICAgfSxcbiAgICAgICAgdG9IZXg6IGZ1bmN0aW9uKGFsbG93M0NoYXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZ2JUb0hleCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iLCBhbGxvdzNDaGFyKTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9IZXhTdHJpbmc6IGZ1bmN0aW9uKGFsbG93M0NoYXIpIHtcbiAgICAgICAgICAgIHJldHVybiAnIycgKyB0aGlzLnRvSGV4KGFsbG93M0NoYXIpO1xuICAgICAgICB9LFxuICAgICAgICB0b0hleDg6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJnYmFUb0hleCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iLCB0aGlzLl9hKTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9IZXg4U3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAnIycgKyB0aGlzLnRvSGV4OCgpO1xuICAgICAgICB9LFxuICAgICAgICB0b1JnYjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4geyByOiBtYXRoUm91bmQodGhpcy5fciksIGc6IG1hdGhSb3VuZCh0aGlzLl9nKSwgYjogbWF0aFJvdW5kKHRoaXMuX2IpLCBhOiB0aGlzLl9hIH07XG4gICAgICAgIH0sXG4gICAgICAgIHRvUmdiU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5fYSA9PSAxKSA/XG4gICAgICAgICAgICAgIFwicmdiKFwiICArIG1hdGhSb3VuZCh0aGlzLl9yKSArIFwiLCBcIiArIG1hdGhSb3VuZCh0aGlzLl9nKSArIFwiLCBcIiArIG1hdGhSb3VuZCh0aGlzLl9iKSArIFwiKVwiIDpcbiAgICAgICAgICAgICAgXCJyZ2JhKFwiICsgbWF0aFJvdW5kKHRoaXMuX3IpICsgXCIsIFwiICsgbWF0aFJvdW5kKHRoaXMuX2cpICsgXCIsIFwiICsgbWF0aFJvdW5kKHRoaXMuX2IpICsgXCIsIFwiICsgdGhpcy5fcm91bmRBICsgXCIpXCI7XG4gICAgICAgIH0sXG4gICAgICAgIHRvUGVyY2VudGFnZVJnYjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4geyByOiBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9yLCAyNTUpICogMTAwKSArIFwiJVwiLCBnOiBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9nLCAyNTUpICogMTAwKSArIFwiJVwiLCBiOiBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9iLCAyNTUpICogMTAwKSArIFwiJVwiLCBhOiB0aGlzLl9hIH07XG4gICAgICAgIH0sXG4gICAgICAgIHRvUGVyY2VudGFnZVJnYlN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX2EgPT0gMSkgP1xuICAgICAgICAgICAgICBcInJnYihcIiAgKyBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9yLCAyNTUpICogMTAwKSArIFwiJSwgXCIgKyBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9nLCAyNTUpICogMTAwKSArIFwiJSwgXCIgKyBtYXRoUm91bmQoYm91bmQwMSh0aGlzLl9iLCAyNTUpICogMTAwKSArIFwiJSlcIiA6XG4gICAgICAgICAgICAgIFwicmdiYShcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX3IsIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2csIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIG1hdGhSb3VuZChib3VuZDAxKHRoaXMuX2IsIDI1NSkgKiAxMDApICsgXCIlLCBcIiArIHRoaXMuX3JvdW5kQSArIFwiKVwiO1xuICAgICAgICB9LFxuICAgICAgICB0b05hbWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2EgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5fYSA8IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBoZXhOYW1lc1tyZ2JUb0hleCh0aGlzLl9yLCB0aGlzLl9nLCB0aGlzLl9iLCB0cnVlKV0gfHwgZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIHRvRmlsdGVyOiBmdW5jdGlvbihzZWNvbmRDb2xvcikge1xuICAgICAgICAgICAgdmFyIGhleDhTdHJpbmcgPSAnIycgKyByZ2JhVG9IZXgodGhpcy5fciwgdGhpcy5fZywgdGhpcy5fYiwgdGhpcy5fYSk7XG4gICAgICAgICAgICB2YXIgc2Vjb25kSGV4OFN0cmluZyA9IGhleDhTdHJpbmc7XG4gICAgICAgICAgICB2YXIgZ3JhZGllbnRUeXBlID0gdGhpcy5fZ3JhZGllbnRUeXBlID8gXCJHcmFkaWVudFR5cGUgPSAxLCBcIiA6IFwiXCI7XG5cbiAgICAgICAgICAgIGlmIChzZWNvbmRDb2xvcikge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGlueWNvbG9yKHNlY29uZENvbG9yKTtcbiAgICAgICAgICAgICAgICBzZWNvbmRIZXg4U3RyaW5nID0gcy50b0hleDhTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KFwiK2dyYWRpZW50VHlwZStcInN0YXJ0Q29sb3JzdHI9XCIraGV4OFN0cmluZytcIixlbmRDb2xvcnN0cj1cIitzZWNvbmRIZXg4U3RyaW5nK1wiKVwiO1xuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oZm9ybWF0KSB7XG4gICAgICAgICAgICB2YXIgZm9ybWF0U2V0ID0gISFmb3JtYXQ7XG4gICAgICAgICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgdGhpcy5fZm9ybWF0O1xuXG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkU3RyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgaGFzQWxwaGEgPSB0aGlzLl9hIDwgMSAmJiB0aGlzLl9hID49IDA7XG4gICAgICAgICAgICB2YXIgbmVlZHNBbHBoYUZvcm1hdCA9ICFmb3JtYXRTZXQgJiYgaGFzQWxwaGEgJiYgKGZvcm1hdCA9PT0gXCJoZXhcIiB8fCBmb3JtYXQgPT09IFwiaGV4NlwiIHx8IGZvcm1hdCA9PT0gXCJoZXgzXCIgfHwgZm9ybWF0ID09PSBcIm5hbWVcIik7XG5cbiAgICAgICAgICAgIGlmIChuZWVkc0FscGhhRm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciBcInRyYW5zcGFyZW50XCIsIGFsbCBvdGhlciBub24tYWxwaGEgZm9ybWF0c1xuICAgICAgICAgICAgICAgIC8vIHdpbGwgcmV0dXJuIHJnYmEgd2hlbiB0aGVyZSBpcyB0cmFuc3BhcmVuY3kuXG4gICAgICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJuYW1lXCIgJiYgdGhpcy5fYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b05hbWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9SZ2JTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3JtYXQgPT09IFwicmdiXCIpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvUmdiU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcInByZ2JcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9QZXJjZW50YWdlUmdiU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhleFwiIHx8IGZvcm1hdCA9PT0gXCJoZXg2XCIpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRTdHJpbmcgPSB0aGlzLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhleDNcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9IZXhTdHJpbmcodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhleDhcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9IZXg4U3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcIm5hbWVcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9OYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm9ybWF0ID09PSBcImhzbFwiKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkU3RyaW5nID0gdGhpcy50b0hzbFN0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvcm1hdCA9PT0gXCJoc3ZcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFN0cmluZyA9IHRoaXMudG9Ic3ZTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlZFN0cmluZyB8fCB0aGlzLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2FwcGx5TW9kaWZpY2F0aW9uOiBmdW5jdGlvbihmbiwgYXJncykge1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gZm4uYXBwbHkobnVsbCwgW3RoaXNdLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3MpKSk7XG4gICAgICAgICAgICB0aGlzLl9yID0gY29sb3IuX3I7XG4gICAgICAgICAgICB0aGlzLl9nID0gY29sb3IuX2c7XG4gICAgICAgICAgICB0aGlzLl9iID0gY29sb3IuX2I7XG4gICAgICAgICAgICB0aGlzLnNldEFscGhhKGNvbG9yLl9hKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBsaWdodGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihsaWdodGVuLCBhcmd1bWVudHMpO1xuICAgICAgICB9LFxuICAgICAgICBicmlnaHRlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oYnJpZ2h0ZW4sIGFyZ3VtZW50cyk7XG4gICAgICAgIH0sXG4gICAgICAgIGRhcmtlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZGFya2VuLCBhcmd1bWVudHMpO1xuICAgICAgICB9LFxuICAgICAgICBkZXNhdHVyYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihkZXNhdHVyYXRlLCBhcmd1bWVudHMpO1xuICAgICAgICB9LFxuICAgICAgICBzYXR1cmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oc2F0dXJhdGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0sXG4gICAgICAgIGdyZXlzY2FsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlNb2RpZmljYXRpb24oZ3JleXNjYWxlLCBhcmd1bWVudHMpO1xuICAgICAgICB9LFxuICAgICAgICBzcGluOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcHBseU1vZGlmaWNhdGlvbihzcGluLCBhcmd1bWVudHMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9hcHBseUNvbWJpbmF0aW9uOiBmdW5jdGlvbihmbiwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIFt0aGlzXS5jb25jYXQoW10uc2xpY2UuY2FsbChhcmdzKSkpO1xuICAgICAgICB9LFxuICAgICAgICBhbmFsb2dvdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24oYW5hbG9nb3VzLCBhcmd1bWVudHMpO1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKGNvbXBsZW1lbnQsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0sXG4gICAgICAgIG1vbm9jaHJvbWF0aWM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24obW9ub2Nocm9tYXRpYywgYXJndW1lbnRzKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXRjb21wbGVtZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcHBseUNvbWJpbmF0aW9uKHNwbGl0Y29tcGxlbWVudCwgYXJndW1lbnRzKTtcbiAgICAgICAgfSxcbiAgICAgICAgdHJpYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5Q29tYmluYXRpb24odHJpYWQsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0sXG4gICAgICAgIHRldHJhZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXBwbHlDb21iaW5hdGlvbih0ZXRyYWQsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gSWYgaW5wdXQgaXMgYW4gb2JqZWN0LCBmb3JjZSAxIGludG8gXCIxLjBcIiB0byBoYW5kbGUgcmF0aW9zIHByb3Blcmx5XG4gICAgLy8gU3RyaW5nIGlucHV0IHJlcXVpcmVzIFwiMS4wXCIgYXMgaW5wdXQsIHNvIDEgd2lsbCBiZSB0cmVhdGVkIGFzIDFcbiAgICB0aW55Y29sb3IuZnJvbVJhdGlvID0gZnVuY3Rpb24oY29sb3IsIG9wdHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb2xvciA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB2YXIgbmV3Q29sb3IgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gY29sb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sb3IuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IFwiYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb2xvcltpXSA9IGNvbG9yW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29sb3JbaV0gPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbG9yID0gbmV3Q29sb3I7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGlueWNvbG9yKGNvbG9yLCBvcHRzKTtcbiAgICB9O1xuXG4gICAgLy8gR2l2ZW4gYSBzdHJpbmcgb3Igb2JqZWN0LCBjb252ZXJ0IHRoYXQgaW5wdXQgdG8gUkdCXG4gICAgLy8gUG9zc2libGUgc3RyaW5nIGlucHV0czpcbiAgICAvL1xuICAgIC8vICAgICBcInJlZFwiXG4gICAgLy8gICAgIFwiI2YwMFwiIG9yIFwiZjAwXCJcbiAgICAvLyAgICAgXCIjZmYwMDAwXCIgb3IgXCJmZjAwMDBcIlxuICAgIC8vICAgICBcIiNmZjAwMDAwMFwiIG9yIFwiZmYwMDAwMDBcIlxuICAgIC8vICAgICBcInJnYiAyNTUgMCAwXCIgb3IgXCJyZ2IgKDI1NSwgMCwgMClcIlxuICAgIC8vICAgICBcInJnYiAxLjAgMCAwXCIgb3IgXCJyZ2IgKDEsIDAsIDApXCJcbiAgICAvLyAgICAgXCJyZ2JhICgyNTUsIDAsIDAsIDEpXCIgb3IgXCJyZ2JhIDI1NSwgMCwgMCwgMVwiXG4gICAgLy8gICAgIFwicmdiYSAoMS4wLCAwLCAwLCAxKVwiIG9yIFwicmdiYSAxLjAsIDAsIDAsIDFcIlxuICAgIC8vICAgICBcImhzbCgwLCAxMDAlLCA1MCUpXCIgb3IgXCJoc2wgMCAxMDAlIDUwJVwiXG4gICAgLy8gICAgIFwiaHNsYSgwLCAxMDAlLCA1MCUsIDEpXCIgb3IgXCJoc2xhIDAgMTAwJSA1MCUsIDFcIlxuICAgIC8vICAgICBcImhzdigwLCAxMDAlLCAxMDAlKVwiIG9yIFwiaHN2IDAgMTAwJSAxMDAlXCJcbiAgICAvL1xuICAgIGZ1bmN0aW9uIGlucHV0VG9SR0IoY29sb3IpIHtcblxuICAgICAgICB2YXIgcmdiID0geyByOiAwLCBnOiAwLCBiOiAwIH07XG4gICAgICAgIHZhciBhID0gMTtcbiAgICAgICAgdmFyIG9rID0gZmFsc2U7XG4gICAgICAgIHZhciBmb3JtYXQgPSBmYWxzZTtcblxuICAgICAgICBpZiAodHlwZW9mIGNvbG9yID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbG9yID0gc3RyaW5nSW5wdXRUb09iamVjdChjb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbG9yID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGlmIChjb2xvci5oYXNPd25Qcm9wZXJ0eShcInJcIikgJiYgY29sb3IuaGFzT3duUHJvcGVydHkoXCJnXCIpICYmIGNvbG9yLmhhc093blByb3BlcnR5KFwiYlwiKSkge1xuICAgICAgICAgICAgICAgIHJnYiA9IHJnYlRvUmdiKGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIpO1xuICAgICAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBTdHJpbmcoY29sb3Iucikuc3Vic3RyKC0xKSA9PT0gXCIlXCIgPyBcInByZ2JcIiA6IFwicmdiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2xvci5oYXNPd25Qcm9wZXJ0eShcImhcIikgJiYgY29sb3IuaGFzT3duUHJvcGVydHkoXCJzXCIpICYmIGNvbG9yLmhhc093blByb3BlcnR5KFwidlwiKSkge1xuICAgICAgICAgICAgICAgIGNvbG9yLnMgPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLnMpO1xuICAgICAgICAgICAgICAgIGNvbG9yLnYgPSBjb252ZXJ0VG9QZXJjZW50YWdlKGNvbG9yLnYpO1xuICAgICAgICAgICAgICAgIHJnYiA9IGhzdlRvUmdiKGNvbG9yLmgsIGNvbG9yLnMsIGNvbG9yLnYpO1xuICAgICAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3JtYXQgPSBcImhzdlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29sb3IuaGFzT3duUHJvcGVydHkoXCJoXCIpICYmIGNvbG9yLmhhc093blByb3BlcnR5KFwic1wiKSAmJiBjb2xvci5oYXNPd25Qcm9wZXJ0eShcImxcIikpIHtcbiAgICAgICAgICAgICAgICBjb2xvci5zID0gY29udmVydFRvUGVyY2VudGFnZShjb2xvci5zKTtcbiAgICAgICAgICAgICAgICBjb2xvci5sID0gY29udmVydFRvUGVyY2VudGFnZShjb2xvci5sKTtcbiAgICAgICAgICAgICAgICByZ2IgPSBoc2xUb1JnYihjb2xvci5oLCBjb2xvci5zLCBjb2xvci5sKTtcbiAgICAgICAgICAgICAgICBvayA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9ybWF0ID0gXCJoc2xcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbG9yLmhhc093blByb3BlcnR5KFwiYVwiKSkge1xuICAgICAgICAgICAgICAgIGEgPSBjb2xvci5hO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYSA9IGJvdW5kQWxwaGEoYSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9rOiBvayxcbiAgICAgICAgICAgIGZvcm1hdDogY29sb3IuZm9ybWF0IHx8IGZvcm1hdCxcbiAgICAgICAgICAgIHI6IG1hdGhNaW4oMjU1LCBtYXRoTWF4KHJnYi5yLCAwKSksXG4gICAgICAgICAgICBnOiBtYXRoTWluKDI1NSwgbWF0aE1heChyZ2IuZywgMCkpLFxuICAgICAgICAgICAgYjogbWF0aE1pbigyNTUsIG1hdGhNYXgocmdiLmIsIDApKSxcbiAgICAgICAgICAgIGE6IGFcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIC8vIENvbnZlcnNpb24gRnVuY3Rpb25zXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8vIGByZ2JUb0hzbGAsIGByZ2JUb0hzdmAsIGBoc2xUb1JnYmAsIGBoc3ZUb1JnYmAgbW9kaWZpZWQgZnJvbTpcbiAgICAvLyA8aHR0cDovL21qaWphY2tzb24uY29tLzIwMDgvMDIvcmdiLXRvLWhzbC1hbmQtcmdiLXRvLWhzdi1jb2xvci1tb2RlbC1jb252ZXJzaW9uLWFsZ29yaXRobXMtaW4tamF2YXNjcmlwdD5cblxuICAgIC8vIGByZ2JUb1JnYmBcbiAgICAvLyBIYW5kbGUgYm91bmRzIC8gcGVyY2VudGFnZSBjaGVja2luZyB0byBjb25mb3JtIHRvIENTUyBjb2xvciBzcGVjXG4gICAgLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29sb3IvPlxuICAgIC8vICpBc3N1bWVzOiogciwgZywgYiBpbiBbMCwgMjU1XSBvciBbMCwgMV1cbiAgICAvLyAqUmV0dXJuczoqIHsgciwgZywgYiB9IGluIFswLCAyNTVdXG4gICAgZnVuY3Rpb24gcmdiVG9SZ2IociwgZywgYil7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByOiBib3VuZDAxKHIsIDI1NSkgKiAyNTUsXG4gICAgICAgICAgICBnOiBib3VuZDAxKGcsIDI1NSkgKiAyNTUsXG4gICAgICAgICAgICBiOiBib3VuZDAxKGIsIDI1NSkgKiAyNTVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBgcmdiVG9Ic2xgXG4gICAgLy8gQ29udmVydHMgYW4gUkdCIGNvbG9yIHZhbHVlIHRvIEhTTC5cbiAgICAvLyAqQXNzdW1lczoqIHIsIGcsIGFuZCBiIGFyZSBjb250YWluZWQgaW4gWzAsIDI1NV0gb3IgWzAsIDFdXG4gICAgLy8gKlJldHVybnM6KiB7IGgsIHMsIGwgfSBpbiBbMCwxXVxuICAgIGZ1bmN0aW9uIHJnYlRvSHNsKHIsIGcsIGIpIHtcblxuICAgICAgICByID0gYm91bmQwMShyLCAyNTUpO1xuICAgICAgICBnID0gYm91bmQwMShnLCAyNTUpO1xuICAgICAgICBiID0gYm91bmQwMShiLCAyNTUpO1xuXG4gICAgICAgIHZhciBtYXggPSBtYXRoTWF4KHIsIGcsIGIpLCBtaW4gPSBtYXRoTWluKHIsIGcsIGIpO1xuICAgICAgICB2YXIgaCwgcywgbCA9IChtYXggKyBtaW4pIC8gMjtcblxuICAgICAgICBpZihtYXggPT0gbWluKSB7XG4gICAgICAgICAgICBoID0gcyA9IDA7IC8vIGFjaHJvbWF0aWNcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkID0gbWF4IC0gbWluO1xuICAgICAgICAgICAgcyA9IGwgPiAwLjUgPyBkIC8gKDIgLSBtYXggLSBtaW4pIDogZCAvIChtYXggKyBtaW4pO1xuICAgICAgICAgICAgc3dpdGNoKG1heCkge1xuICAgICAgICAgICAgICAgIGNhc2UgcjogaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIGc6IGggPSAoYiAtIHIpIC8gZCArIDI7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgYjogaCA9IChyIC0gZykgLyBkICsgNDsgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGggLz0gNjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IGg6IGgsIHM6IHMsIGw6IGwgfTtcbiAgICB9XG5cbiAgICAvLyBgaHNsVG9SZ2JgXG4gICAgLy8gQ29udmVydHMgYW4gSFNMIGNvbG9yIHZhbHVlIHRvIFJHQi5cbiAgICAvLyAqQXNzdW1lczoqIGggaXMgY29udGFpbmVkIGluIFswLCAxXSBvciBbMCwgMzYwXSBhbmQgcyBhbmQgbCBhcmUgY29udGFpbmVkIFswLCAxXSBvciBbMCwgMTAwXVxuICAgIC8vICpSZXR1cm5zOiogeyByLCBnLCBiIH0gaW4gdGhlIHNldCBbMCwgMjU1XVxuICAgIGZ1bmN0aW9uIGhzbFRvUmdiKGgsIHMsIGwpIHtcbiAgICAgICAgdmFyIHIsIGcsIGI7XG5cbiAgICAgICAgaCA9IGJvdW5kMDEoaCwgMzYwKTtcbiAgICAgICAgcyA9IGJvdW5kMDEocywgMTAwKTtcbiAgICAgICAgbCA9IGJvdW5kMDEobCwgMTAwKTtcblxuICAgICAgICBmdW5jdGlvbiBodWUycmdiKHAsIHEsIHQpIHtcbiAgICAgICAgICAgIGlmKHQgPCAwKSB0ICs9IDE7XG4gICAgICAgICAgICBpZih0ID4gMSkgdCAtPSAxO1xuICAgICAgICAgICAgaWYodCA8IDEvNikgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XG4gICAgICAgICAgICBpZih0IDwgMS8yKSByZXR1cm4gcTtcbiAgICAgICAgICAgIGlmKHQgPCAyLzMpIHJldHVybiBwICsgKHEgLSBwKSAqICgyLzMgLSB0KSAqIDY7XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHMgPT09IDApIHtcbiAgICAgICAgICAgIHIgPSBnID0gYiA9IGw7IC8vIGFjaHJvbWF0aWNcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBxID0gbCA8IDAuNSA/IGwgKiAoMSArIHMpIDogbCArIHMgLSBsICogcztcbiAgICAgICAgICAgIHZhciBwID0gMiAqIGwgLSBxO1xuICAgICAgICAgICAgciA9IGh1ZTJyZ2IocCwgcSwgaCArIDEvMyk7XG4gICAgICAgICAgICBnID0gaHVlMnJnYihwLCBxLCBoKTtcbiAgICAgICAgICAgIGIgPSBodWUycmdiKHAsIHEsIGggLSAxLzMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgcjogciAqIDI1NSwgZzogZyAqIDI1NSwgYjogYiAqIDI1NSB9O1xuICAgIH1cblxuICAgIC8vIGByZ2JUb0hzdmBcbiAgICAvLyBDb252ZXJ0cyBhbiBSR0IgY29sb3IgdmFsdWUgdG8gSFNWXG4gICAgLy8gKkFzc3VtZXM6KiByLCBnLCBhbmQgYiBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDI1NV0gb3IgWzAsIDFdXG4gICAgLy8gKlJldHVybnM6KiB7IGgsIHMsIHYgfSBpbiBbMCwxXVxuICAgIGZ1bmN0aW9uIHJnYlRvSHN2KHIsIGcsIGIpIHtcblxuICAgICAgICByID0gYm91bmQwMShyLCAyNTUpO1xuICAgICAgICBnID0gYm91bmQwMShnLCAyNTUpO1xuICAgICAgICBiID0gYm91bmQwMShiLCAyNTUpO1xuXG4gICAgICAgIHZhciBtYXggPSBtYXRoTWF4KHIsIGcsIGIpLCBtaW4gPSBtYXRoTWluKHIsIGcsIGIpO1xuICAgICAgICB2YXIgaCwgcywgdiA9IG1heDtcblxuICAgICAgICB2YXIgZCA9IG1heCAtIG1pbjtcbiAgICAgICAgcyA9IG1heCA9PT0gMCA/IDAgOiBkIC8gbWF4O1xuXG4gICAgICAgIGlmKG1heCA9PSBtaW4pIHtcbiAgICAgICAgICAgIGggPSAwOyAvLyBhY2hyb21hdGljXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2gobWF4KSB7XG4gICAgICAgICAgICAgICAgY2FzZSByOiBoID0gKGcgLSBiKSAvIGQgKyAoZyA8IGIgPyA2IDogMCk7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgZzogaCA9IChiIC0gcikgLyBkICsgMjsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBiOiBoID0gKHIgLSBnKSAvIGQgKyA0OyBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGggLz0gNjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBoOiBoLCBzOiBzLCB2OiB2IH07XG4gICAgfVxuXG4gICAgLy8gYGhzdlRvUmdiYFxuICAgIC8vIENvbnZlcnRzIGFuIEhTViBjb2xvciB2YWx1ZSB0byBSR0IuXG4gICAgLy8gKkFzc3VtZXM6KiBoIGlzIGNvbnRhaW5lZCBpbiBbMCwgMV0gb3IgWzAsIDM2MF0gYW5kIHMgYW5kIHYgYXJlIGNvbnRhaW5lZCBpbiBbMCwgMV0gb3IgWzAsIDEwMF1cbiAgICAvLyAqUmV0dXJuczoqIHsgciwgZywgYiB9IGluIHRoZSBzZXQgWzAsIDI1NV1cbiAgICAgZnVuY3Rpb24gaHN2VG9SZ2IoaCwgcywgdikge1xuXG4gICAgICAgIGggPSBib3VuZDAxKGgsIDM2MCkgKiA2O1xuICAgICAgICBzID0gYm91bmQwMShzLCAxMDApO1xuICAgICAgICB2ID0gYm91bmQwMSh2LCAxMDApO1xuXG4gICAgICAgIHZhciBpID0gbWF0aC5mbG9vcihoKSxcbiAgICAgICAgICAgIGYgPSBoIC0gaSxcbiAgICAgICAgICAgIHAgPSB2ICogKDEgLSBzKSxcbiAgICAgICAgICAgIHEgPSB2ICogKDEgLSBmICogcyksXG4gICAgICAgICAgICB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpLFxuICAgICAgICAgICAgbW9kID0gaSAlIDYsXG4gICAgICAgICAgICByID0gW3YsIHEsIHAsIHAsIHQsIHZdW21vZF0sXG4gICAgICAgICAgICBnID0gW3QsIHYsIHYsIHEsIHAsIHBdW21vZF0sXG4gICAgICAgICAgICBiID0gW3AsIHAsIHQsIHYsIHYsIHFdW21vZF07XG5cbiAgICAgICAgcmV0dXJuIHsgcjogciAqIDI1NSwgZzogZyAqIDI1NSwgYjogYiAqIDI1NSB9O1xuICAgIH1cblxuICAgIC8vIGByZ2JUb0hleGBcbiAgICAvLyBDb252ZXJ0cyBhbiBSR0IgY29sb3IgdG8gaGV4XG4gICAgLy8gQXNzdW1lcyByLCBnLCBhbmQgYiBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDI1NV1cbiAgICAvLyBSZXR1cm5zIGEgMyBvciA2IGNoYXJhY3RlciBoZXhcbiAgICBmdW5jdGlvbiByZ2JUb0hleChyLCBnLCBiLCBhbGxvdzNDaGFyKSB7XG5cbiAgICAgICAgdmFyIGhleCA9IFtcbiAgICAgICAgICAgIHBhZDIobWF0aFJvdW5kKHIpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgICAgICBwYWQyKG1hdGhSb3VuZChnKS50b1N0cmluZygxNikpLFxuICAgICAgICAgICAgcGFkMihtYXRoUm91bmQoYikudG9TdHJpbmcoMTYpKVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIFJldHVybiBhIDMgY2hhcmFjdGVyIGhleCBpZiBwb3NzaWJsZVxuICAgICAgICBpZiAoYWxsb3czQ2hhciAmJiBoZXhbMF0uY2hhckF0KDApID09IGhleFswXS5jaGFyQXQoMSkgJiYgaGV4WzFdLmNoYXJBdCgwKSA9PSBoZXhbMV0uY2hhckF0KDEpICYmIGhleFsyXS5jaGFyQXQoMCkgPT0gaGV4WzJdLmNoYXJBdCgxKSkge1xuICAgICAgICAgICAgcmV0dXJuIGhleFswXS5jaGFyQXQoMCkgKyBoZXhbMV0uY2hhckF0KDApICsgaGV4WzJdLmNoYXJBdCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZXguam9pbihcIlwiKTtcbiAgICB9XG4gICAgICAgIC8vIGByZ2JhVG9IZXhgXG4gICAgICAgIC8vIENvbnZlcnRzIGFuIFJHQkEgY29sb3IgcGx1cyBhbHBoYSB0cmFuc3BhcmVuY3kgdG8gaGV4XG4gICAgICAgIC8vIEFzc3VtZXMgciwgZywgYiBhbmQgYSBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDI1NV1cbiAgICAgICAgLy8gUmV0dXJucyBhbiA4IGNoYXJhY3RlciBoZXhcbiAgICAgICAgZnVuY3Rpb24gcmdiYVRvSGV4KHIsIGcsIGIsIGEpIHtcblxuICAgICAgICAgICAgdmFyIGhleCA9IFtcbiAgICAgICAgICAgICAgICBwYWQyKGNvbnZlcnREZWNpbWFsVG9IZXgoYSkpLFxuICAgICAgICAgICAgICAgIHBhZDIobWF0aFJvdW5kKHIpLnRvU3RyaW5nKDE2KSksXG4gICAgICAgICAgICAgICAgcGFkMihtYXRoUm91bmQoZykudG9TdHJpbmcoMTYpKSxcbiAgICAgICAgICAgICAgICBwYWQyKG1hdGhSb3VuZChiKS50b1N0cmluZygxNikpXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICByZXR1cm4gaGV4LmpvaW4oXCJcIik7XG4gICAgICAgIH1cblxuICAgIC8vIGBlcXVhbHNgXG4gICAgLy8gQ2FuIGJlIGNhbGxlZCB3aXRoIGFueSB0aW55Y29sb3IgaW5wdXRcbiAgICB0aW55Y29sb3IuZXF1YWxzID0gZnVuY3Rpb24gKGNvbG9yMSwgY29sb3IyKSB7XG4gICAgICAgIGlmICghY29sb3IxIHx8ICFjb2xvcjIpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IoY29sb3IxKS50b1JnYlN0cmluZygpID09IHRpbnljb2xvcihjb2xvcjIpLnRvUmdiU3RyaW5nKCk7XG4gICAgfTtcbiAgICB0aW55Y29sb3IucmFuZG9tID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IuZnJvbVJhdGlvKHtcbiAgICAgICAgICAgIHI6IG1hdGhSYW5kb20oKSxcbiAgICAgICAgICAgIGc6IG1hdGhSYW5kb20oKSxcbiAgICAgICAgICAgIGI6IG1hdGhSYW5kb20oKVxuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvLyBNb2RpZmljYXRpb24gRnVuY3Rpb25zXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIFRoYW5rcyB0byBsZXNzLmpzIGZvciBzb21lIG9mIHRoZSBiYXNpY3MgaGVyZVxuICAgIC8vIDxodHRwczovL2dpdGh1Yi5jb20vY2xvdWRoZWFkL2xlc3MuanMvYmxvYi9tYXN0ZXIvbGliL2xlc3MvZnVuY3Rpb25zLmpzPlxuXG4gICAgZnVuY3Rpb24gZGVzYXR1cmF0ZShjb2xvciwgYW1vdW50KSB7XG4gICAgICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgICAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgICAgICBoc2wucyAtPSBhbW91bnQgLyAxMDA7XG4gICAgICAgIGhzbC5zID0gY2xhbXAwMShoc2wucyk7XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzYXR1cmF0ZShjb2xvciwgYW1vdW50KSB7XG4gICAgICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgMTApO1xuICAgICAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgICAgICBoc2wucyArPSBhbW91bnQgLyAxMDA7XG4gICAgICAgIGhzbC5zID0gY2xhbXAwMShoc2wucyk7XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBncmV5c2NhbGUoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIHRpbnljb2xvcihjb2xvcikuZGVzYXR1cmF0ZSgxMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpZ2h0ZW4gKGNvbG9yLCBhbW91bnQpIHtcbiAgICAgICAgYW1vdW50ID0gKGFtb3VudCA9PT0gMCkgPyAwIDogKGFtb3VudCB8fCAxMCk7XG4gICAgICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgICAgIGhzbC5sICs9IGFtb3VudCAvIDEwMDtcbiAgICAgICAgaHNsLmwgPSBjbGFtcDAxKGhzbC5sKTtcbiAgICAgICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJyaWdodGVuKGNvbG9yLCBhbW91bnQpIHtcbiAgICAgICAgYW1vdW50ID0gKGFtb3VudCA9PT0gMCkgPyAwIDogKGFtb3VudCB8fCAxMCk7XG4gICAgICAgIHZhciByZ2IgPSB0aW55Y29sb3IoY29sb3IpLnRvUmdiKCk7XG4gICAgICAgIHJnYi5yID0gbWF0aE1heCgwLCBtYXRoTWluKDI1NSwgcmdiLnIgLSBtYXRoUm91bmQoMjU1ICogLSAoYW1vdW50IC8gMTAwKSkpKTtcbiAgICAgICAgcmdiLmcgPSBtYXRoTWF4KDAsIG1hdGhNaW4oMjU1LCByZ2IuZyAtIG1hdGhSb3VuZCgyNTUgKiAtIChhbW91bnQgLyAxMDApKSkpO1xuICAgICAgICByZ2IuYiA9IG1hdGhNYXgoMCwgbWF0aE1pbigyNTUsIHJnYi5iIC0gbWF0aFJvdW5kKDI1NSAqIC0gKGFtb3VudCAvIDEwMCkpKSk7XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IocmdiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkYXJrZW4gKGNvbG9yLCBhbW91bnQpIHtcbiAgICAgICAgYW1vdW50ID0gKGFtb3VudCA9PT0gMCkgPyAwIDogKGFtb3VudCB8fCAxMCk7XG4gICAgICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgICAgIGhzbC5sIC09IGFtb3VudCAvIDEwMDtcbiAgICAgICAgaHNsLmwgPSBjbGFtcDAxKGhzbC5sKTtcbiAgICAgICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xuICAgIH1cblxuICAgIC8vIFNwaW4gdGFrZXMgYSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSBhbW91bnQgd2l0aGluIFstMzYwLCAzNjBdIGluZGljYXRpbmcgdGhlIGNoYW5nZSBvZiBodWUuXG4gICAgLy8gVmFsdWVzIG91dHNpZGUgb2YgdGhpcyByYW5nZSB3aWxsIGJlIHdyYXBwZWQgaW50byB0aGlzIHJhbmdlLlxuICAgIGZ1bmN0aW9uIHNwaW4oY29sb3IsIGFtb3VudCkge1xuICAgICAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgICAgICB2YXIgaHVlID0gKG1hdGhSb3VuZChoc2wuaCkgKyBhbW91bnQpICUgMzYwO1xuICAgICAgICBoc2wuaCA9IGh1ZSA8IDAgPyAzNjAgKyBodWUgOiBodWU7XG4gICAgICAgIHJldHVybiB0aW55Y29sb3IoaHNsKTtcbiAgICB9XG5cbiAgICAvLyBDb21iaW5hdGlvbiBGdW5jdGlvbnNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBUaGFua3MgdG8galF1ZXJ5IHhDb2xvciBmb3Igc29tZSBvZiB0aGUgaWRlYXMgYmVoaW5kIHRoZXNlXG4gICAgLy8gPGh0dHBzOi8vZ2l0aHViLmNvbS9pbmZ1c2lvbi9qUXVlcnkteGNvbG9yL2Jsb2IvbWFzdGVyL2pxdWVyeS54Y29sb3IuanM+XG5cbiAgICBmdW5jdGlvbiBjb21wbGVtZW50KGNvbG9yKSB7XG4gICAgICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgICAgIGhzbC5oID0gKGhzbC5oICsgMTgwKSAlIDM2MDtcbiAgICAgICAgcmV0dXJuIHRpbnljb2xvcihoc2wpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyaWFkKGNvbG9yKSB7XG4gICAgICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgICAgIHZhciBoID0gaHNsLmg7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0aW55Y29sb3IoY29sb3IpLFxuICAgICAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyAxMjApICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmwgfSksXG4gICAgICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDI0MCkgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubCB9KVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRldHJhZChjb2xvcikge1xuICAgICAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgICAgICB2YXIgaCA9IGhzbC5oO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgdGlueWNvbG9yKGNvbG9yKSxcbiAgICAgICAgICAgIHRpbnljb2xvcih7IGg6IChoICsgOTApICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmwgfSksXG4gICAgICAgICAgICB0aW55Y29sb3IoeyBoOiAoaCArIDE4MCkgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubCB9KSxcbiAgICAgICAgICAgIHRpbnljb2xvcih7IGg6IChoICsgMjcwKSAlIDM2MCwgczogaHNsLnMsIGw6IGhzbC5sIH0pXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3BsaXRjb21wbGVtZW50KGNvbG9yKSB7XG4gICAgICAgIHZhciBoc2wgPSB0aW55Y29sb3IoY29sb3IpLnRvSHNsKCk7XG4gICAgICAgIHZhciBoID0gaHNsLmg7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB0aW55Y29sb3IoY29sb3IpLFxuICAgICAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyA3MikgJSAzNjAsIHM6IGhzbC5zLCBsOiBoc2wubH0pLFxuICAgICAgICAgICAgdGlueWNvbG9yKHsgaDogKGggKyAyMTYpICUgMzYwLCBzOiBoc2wucywgbDogaHNsLmx9KVxuICAgICAgICBdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFuYWxvZ291cyhjb2xvciwgcmVzdWx0cywgc2xpY2VzKSB7XG4gICAgICAgIHJlc3VsdHMgPSByZXN1bHRzIHx8IDY7XG4gICAgICAgIHNsaWNlcyA9IHNsaWNlcyB8fCAzMDtcblxuICAgICAgICB2YXIgaHNsID0gdGlueWNvbG9yKGNvbG9yKS50b0hzbCgpO1xuICAgICAgICB2YXIgcGFydCA9IDM2MCAvIHNsaWNlcztcbiAgICAgICAgdmFyIHJldCA9IFt0aW55Y29sb3IoY29sb3IpXTtcblxuICAgICAgICBmb3IgKGhzbC5oID0gKChoc2wuaCAtIChwYXJ0ICogcmVzdWx0cyA+PiAxKSkgKyA3MjApICUgMzYwOyAtLXJlc3VsdHM7ICkge1xuICAgICAgICAgICAgaHNsLmggPSAoaHNsLmggKyBwYXJ0KSAlIDM2MDtcbiAgICAgICAgICAgIHJldC5wdXNoKHRpbnljb2xvcihoc2wpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1vbm9jaHJvbWF0aWMoY29sb3IsIHJlc3VsdHMpIHtcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMgfHwgNjtcbiAgICAgICAgdmFyIGhzdiA9IHRpbnljb2xvcihjb2xvcikudG9Ic3YoKTtcbiAgICAgICAgdmFyIGggPSBoc3YuaCwgcyA9IGhzdi5zLCB2ID0gaHN2LnY7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgdmFyIG1vZGlmaWNhdGlvbiA9IDEgLyByZXN1bHRzO1xuXG4gICAgICAgIHdoaWxlIChyZXN1bHRzLS0pIHtcbiAgICAgICAgICAgIHJldC5wdXNoKHRpbnljb2xvcih7IGg6IGgsIHM6IHMsIHY6IHZ9KSk7XG4gICAgICAgICAgICB2ID0gKHYgKyBtb2RpZmljYXRpb24pICUgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLy8gVXRpbGl0eSBGdW5jdGlvbnNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIHRpbnljb2xvci5taXggPSBmdW5jdGlvbihjb2xvcjEsIGNvbG9yMiwgYW1vdW50KSB7XG4gICAgICAgIGFtb3VudCA9IChhbW91bnQgPT09IDApID8gMCA6IChhbW91bnQgfHwgNTApO1xuXG4gICAgICAgIHZhciByZ2IxID0gdGlueWNvbG9yKGNvbG9yMSkudG9SZ2IoKTtcbiAgICAgICAgdmFyIHJnYjIgPSB0aW55Y29sb3IoY29sb3IyKS50b1JnYigpO1xuXG4gICAgICAgIHZhciBwID0gYW1vdW50IC8gMTAwO1xuICAgICAgICB2YXIgdyA9IHAgKiAyIC0gMTtcbiAgICAgICAgdmFyIGEgPSByZ2IyLmEgLSByZ2IxLmE7XG5cbiAgICAgICAgdmFyIHcxO1xuXG4gICAgICAgIGlmICh3ICogYSA9PSAtMSkge1xuICAgICAgICAgICAgdzEgPSB3O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdzEgPSAodyArIGEpIC8gKDEgKyB3ICogYSk7XG4gICAgICAgIH1cblxuICAgICAgICB3MSA9ICh3MSArIDEpIC8gMjtcblxuICAgICAgICB2YXIgdzIgPSAxIC0gdzE7XG5cbiAgICAgICAgdmFyIHJnYmEgPSB7XG4gICAgICAgICAgICByOiByZ2IyLnIgKiB3MSArIHJnYjEuciAqIHcyLFxuICAgICAgICAgICAgZzogcmdiMi5nICogdzEgKyByZ2IxLmcgKiB3MixcbiAgICAgICAgICAgIGI6IHJnYjIuYiAqIHcxICsgcmdiMS5iICogdzIsXG4gICAgICAgICAgICBhOiByZ2IyLmEgKiBwICArIHJnYjEuYSAqICgxIC0gcClcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGlueWNvbG9yKHJnYmEpO1xuICAgIH07XG5cblxuICAgIC8vIFJlYWRhYmlsaXR5IEZ1bmN0aW9uc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIDxodHRwOi8vd3d3LnczLm9yZy9UUi9BRVJUI2NvbG9yLWNvbnRyYXN0PlxuXG4gICAgLy8gYHJlYWRhYmlsaXR5YFxuICAgIC8vIEFuYWx5emUgdGhlIDIgY29sb3JzIGFuZCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAvLyAgICBgYnJpZ2h0bmVzc2A6IGRpZmZlcmVuY2UgaW4gYnJpZ2h0bmVzcyBiZXR3ZWVuIHRoZSB0d28gY29sb3JzXG4gICAgLy8gICAgYGNvbG9yYDogZGlmZmVyZW5jZSBpbiBjb2xvci9odWUgYmV0d2VlbiB0aGUgdHdvIGNvbG9yc1xuICAgIHRpbnljb2xvci5yZWFkYWJpbGl0eSA9IGZ1bmN0aW9uKGNvbG9yMSwgY29sb3IyKSB7XG4gICAgICAgIHZhciBjMSA9IHRpbnljb2xvcihjb2xvcjEpO1xuICAgICAgICB2YXIgYzIgPSB0aW55Y29sb3IoY29sb3IyKTtcbiAgICAgICAgdmFyIHJnYjEgPSBjMS50b1JnYigpO1xuICAgICAgICB2YXIgcmdiMiA9IGMyLnRvUmdiKCk7XG4gICAgICAgIHZhciBicmlnaHRuZXNzQSA9IGMxLmdldEJyaWdodG5lc3MoKTtcbiAgICAgICAgdmFyIGJyaWdodG5lc3NCID0gYzIuZ2V0QnJpZ2h0bmVzcygpO1xuICAgICAgICB2YXIgY29sb3JEaWZmID0gKFxuICAgICAgICAgICAgTWF0aC5tYXgocmdiMS5yLCByZ2IyLnIpIC0gTWF0aC5taW4ocmdiMS5yLCByZ2IyLnIpICtcbiAgICAgICAgICAgIE1hdGgubWF4KHJnYjEuZywgcmdiMi5nKSAtIE1hdGgubWluKHJnYjEuZywgcmdiMi5nKSArXG4gICAgICAgICAgICBNYXRoLm1heChyZ2IxLmIsIHJnYjIuYikgLSBNYXRoLm1pbihyZ2IxLmIsIHJnYjIuYilcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnJpZ2h0bmVzczogTWF0aC5hYnMoYnJpZ2h0bmVzc0EgLSBicmlnaHRuZXNzQiksXG4gICAgICAgICAgICBjb2xvcjogY29sb3JEaWZmXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIGByZWFkYWJsZWBcbiAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9BRVJUI2NvbG9yLWNvbnRyYXN0XG4gICAgLy8gRW5zdXJlIHRoYXQgZm9yZWdyb3VuZCBhbmQgYmFja2dyb3VuZCBjb2xvciBjb21iaW5hdGlvbnMgcHJvdmlkZSBzdWZmaWNpZW50IGNvbnRyYXN0LlxuICAgIC8vICpFeGFtcGxlKlxuICAgIC8vICAgIHRpbnljb2xvci5pc1JlYWRhYmxlKFwiIzAwMFwiLCBcIiMxMTFcIikgPT4gZmFsc2VcbiAgICB0aW55Y29sb3IuaXNSZWFkYWJsZSA9IGZ1bmN0aW9uKGNvbG9yMSwgY29sb3IyKSB7XG4gICAgICAgIHZhciByZWFkYWJpbGl0eSA9IHRpbnljb2xvci5yZWFkYWJpbGl0eShjb2xvcjEsIGNvbG9yMik7XG4gICAgICAgIHJldHVybiByZWFkYWJpbGl0eS5icmlnaHRuZXNzID4gMTI1ICYmIHJlYWRhYmlsaXR5LmNvbG9yID4gNTAwO1xuICAgIH07XG5cbiAgICAvLyBgbW9zdFJlYWRhYmxlYFxuICAgIC8vIEdpdmVuIGEgYmFzZSBjb2xvciBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlIGZvcmVncm91bmQgb3IgYmFja2dyb3VuZFxuICAgIC8vIGNvbG9ycyBmb3IgdGhhdCBiYXNlLCByZXR1cm5zIHRoZSBtb3N0IHJlYWRhYmxlIGNvbG9yLlxuICAgIC8vICpFeGFtcGxlKlxuICAgIC8vICAgIHRpbnljb2xvci5tb3N0UmVhZGFibGUoXCIjMTIzXCIsIFtcIiNmZmZcIiwgXCIjMDAwXCJdKSA9PiBcIiMwMDBcIlxuICAgIHRpbnljb2xvci5tb3N0UmVhZGFibGUgPSBmdW5jdGlvbihiYXNlQ29sb3IsIGNvbG9yTGlzdCkge1xuICAgICAgICB2YXIgYmVzdENvbG9yID0gbnVsbDtcbiAgICAgICAgdmFyIGJlc3RTY29yZSA9IDA7XG4gICAgICAgIHZhciBiZXN0SXNSZWFkYWJsZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGkgPCBjb2xvckxpc3QubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgLy8gV2Ugbm9ybWFsaXplIGJvdGggYXJvdW5kIHRoZSBcImFjY2VwdGFibGVcIiBicmVha2luZyBwb2ludCxcbiAgICAgICAgICAgIC8vIGJ1dCByYW5rIGJyaWdodG5lc3MgY29uc3RyYXN0IGhpZ2hlciB0aGFuIGh1ZS5cblxuICAgICAgICAgICAgdmFyIHJlYWRhYmlsaXR5ID0gdGlueWNvbG9yLnJlYWRhYmlsaXR5KGJhc2VDb2xvciwgY29sb3JMaXN0W2ldKTtcbiAgICAgICAgICAgIHZhciByZWFkYWJsZSA9IHJlYWRhYmlsaXR5LmJyaWdodG5lc3MgPiAxMjUgJiYgcmVhZGFiaWxpdHkuY29sb3IgPiA1MDA7XG4gICAgICAgICAgICB2YXIgc2NvcmUgPSAzICogKHJlYWRhYmlsaXR5LmJyaWdodG5lc3MgLyAxMjUpICsgKHJlYWRhYmlsaXR5LmNvbG9yIC8gNTAwKTtcblxuICAgICAgICAgICAgaWYgKChyZWFkYWJsZSAmJiAhIGJlc3RJc1JlYWRhYmxlKSB8fFxuICAgICAgICAgICAgICAgIChyZWFkYWJsZSAmJiBiZXN0SXNSZWFkYWJsZSAmJiBzY29yZSA+IGJlc3RTY29yZSkgfHxcbiAgICAgICAgICAgICAgICAoKCEgcmVhZGFibGUpICYmICghIGJlc3RJc1JlYWRhYmxlKSAmJiBzY29yZSA+IGJlc3RTY29yZSkpIHtcbiAgICAgICAgICAgICAgICBiZXN0SXNSZWFkYWJsZSA9IHJlYWRhYmxlO1xuICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgIGJlc3RDb2xvciA9IHRpbnljb2xvcihjb2xvckxpc3RbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZXN0Q29sb3I7XG4gICAgfTtcblxuXG4gICAgLy8gQmlnIExpc3Qgb2YgQ29sb3JzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtY29sb3IvI3N2Zy1jb2xvcj5cbiAgICB2YXIgbmFtZXMgPSB0aW55Y29sb3IubmFtZXMgPSB7XG4gICAgICAgIGFsaWNlYmx1ZTogXCJmMGY4ZmZcIixcbiAgICAgICAgYW50aXF1ZXdoaXRlOiBcImZhZWJkN1wiLFxuICAgICAgICBhcXVhOiBcIjBmZlwiLFxuICAgICAgICBhcXVhbWFyaW5lOiBcIjdmZmZkNFwiLFxuICAgICAgICBhenVyZTogXCJmMGZmZmZcIixcbiAgICAgICAgYmVpZ2U6IFwiZjVmNWRjXCIsXG4gICAgICAgIGJpc3F1ZTogXCJmZmU0YzRcIixcbiAgICAgICAgYmxhY2s6IFwiMDAwXCIsXG4gICAgICAgIGJsYW5jaGVkYWxtb25kOiBcImZmZWJjZFwiLFxuICAgICAgICBibHVlOiBcIjAwZlwiLFxuICAgICAgICBibHVldmlvbGV0OiBcIjhhMmJlMlwiLFxuICAgICAgICBicm93bjogXCJhNTJhMmFcIixcbiAgICAgICAgYnVybHl3b29kOiBcImRlYjg4N1wiLFxuICAgICAgICBidXJudHNpZW5uYTogXCJlYTdlNWRcIixcbiAgICAgICAgY2FkZXRibHVlOiBcIjVmOWVhMFwiLFxuICAgICAgICBjaGFydHJldXNlOiBcIjdmZmYwMFwiLFxuICAgICAgICBjaG9jb2xhdGU6IFwiZDI2OTFlXCIsXG4gICAgICAgIGNvcmFsOiBcImZmN2Y1MFwiLFxuICAgICAgICBjb3JuZmxvd2VyYmx1ZTogXCI2NDk1ZWRcIixcbiAgICAgICAgY29ybnNpbGs6IFwiZmZmOGRjXCIsXG4gICAgICAgIGNyaW1zb246IFwiZGMxNDNjXCIsXG4gICAgICAgIGN5YW46IFwiMGZmXCIsXG4gICAgICAgIGRhcmtibHVlOiBcIjAwMDA4YlwiLFxuICAgICAgICBkYXJrY3lhbjogXCIwMDhiOGJcIixcbiAgICAgICAgZGFya2dvbGRlbnJvZDogXCJiODg2MGJcIixcbiAgICAgICAgZGFya2dyYXk6IFwiYTlhOWE5XCIsXG4gICAgICAgIGRhcmtncmVlbjogXCIwMDY0MDBcIixcbiAgICAgICAgZGFya2dyZXk6IFwiYTlhOWE5XCIsXG4gICAgICAgIGRhcmtraGFraTogXCJiZGI3NmJcIixcbiAgICAgICAgZGFya21hZ2VudGE6IFwiOGIwMDhiXCIsXG4gICAgICAgIGRhcmtvbGl2ZWdyZWVuOiBcIjU1NmIyZlwiLFxuICAgICAgICBkYXJrb3JhbmdlOiBcImZmOGMwMFwiLFxuICAgICAgICBkYXJrb3JjaGlkOiBcIjk5MzJjY1wiLFxuICAgICAgICBkYXJrcmVkOiBcIjhiMDAwMFwiLFxuICAgICAgICBkYXJrc2FsbW9uOiBcImU5OTY3YVwiLFxuICAgICAgICBkYXJrc2VhZ3JlZW46IFwiOGZiYzhmXCIsXG4gICAgICAgIGRhcmtzbGF0ZWJsdWU6IFwiNDgzZDhiXCIsXG4gICAgICAgIGRhcmtzbGF0ZWdyYXk6IFwiMmY0ZjRmXCIsXG4gICAgICAgIGRhcmtzbGF0ZWdyZXk6IFwiMmY0ZjRmXCIsXG4gICAgICAgIGRhcmt0dXJxdW9pc2U6IFwiMDBjZWQxXCIsXG4gICAgICAgIGRhcmt2aW9sZXQ6IFwiOTQwMGQzXCIsXG4gICAgICAgIGRlZXBwaW5rOiBcImZmMTQ5M1wiLFxuICAgICAgICBkZWVwc2t5Ymx1ZTogXCIwMGJmZmZcIixcbiAgICAgICAgZGltZ3JheTogXCI2OTY5NjlcIixcbiAgICAgICAgZGltZ3JleTogXCI2OTY5NjlcIixcbiAgICAgICAgZG9kZ2VyYmx1ZTogXCIxZTkwZmZcIixcbiAgICAgICAgZmlyZWJyaWNrOiBcImIyMjIyMlwiLFxuICAgICAgICBmbG9yYWx3aGl0ZTogXCJmZmZhZjBcIixcbiAgICAgICAgZm9yZXN0Z3JlZW46IFwiMjI4YjIyXCIsXG4gICAgICAgIGZ1Y2hzaWE6IFwiZjBmXCIsXG4gICAgICAgIGdhaW5zYm9ybzogXCJkY2RjZGNcIixcbiAgICAgICAgZ2hvc3R3aGl0ZTogXCJmOGY4ZmZcIixcbiAgICAgICAgZ29sZDogXCJmZmQ3MDBcIixcbiAgICAgICAgZ29sZGVucm9kOiBcImRhYTUyMFwiLFxuICAgICAgICBncmF5OiBcIjgwODA4MFwiLFxuICAgICAgICBncmVlbjogXCIwMDgwMDBcIixcbiAgICAgICAgZ3JlZW55ZWxsb3c6IFwiYWRmZjJmXCIsXG4gICAgICAgIGdyZXk6IFwiODA4MDgwXCIsXG4gICAgICAgIGhvbmV5ZGV3OiBcImYwZmZmMFwiLFxuICAgICAgICBob3RwaW5rOiBcImZmNjliNFwiLFxuICAgICAgICBpbmRpYW5yZWQ6IFwiY2Q1YzVjXCIsXG4gICAgICAgIGluZGlnbzogXCI0YjAwODJcIixcbiAgICAgICAgaXZvcnk6IFwiZmZmZmYwXCIsXG4gICAgICAgIGtoYWtpOiBcImYwZTY4Y1wiLFxuICAgICAgICBsYXZlbmRlcjogXCJlNmU2ZmFcIixcbiAgICAgICAgbGF2ZW5kZXJibHVzaDogXCJmZmYwZjVcIixcbiAgICAgICAgbGF3bmdyZWVuOiBcIjdjZmMwMFwiLFxuICAgICAgICBsZW1vbmNoaWZmb246IFwiZmZmYWNkXCIsXG4gICAgICAgIGxpZ2h0Ymx1ZTogXCJhZGQ4ZTZcIixcbiAgICAgICAgbGlnaHRjb3JhbDogXCJmMDgwODBcIixcbiAgICAgICAgbGlnaHRjeWFuOiBcImUwZmZmZlwiLFxuICAgICAgICBsaWdodGdvbGRlbnJvZHllbGxvdzogXCJmYWZhZDJcIixcbiAgICAgICAgbGlnaHRncmF5OiBcImQzZDNkM1wiLFxuICAgICAgICBsaWdodGdyZWVuOiBcIjkwZWU5MFwiLFxuICAgICAgICBsaWdodGdyZXk6IFwiZDNkM2QzXCIsXG4gICAgICAgIGxpZ2h0cGluazogXCJmZmI2YzFcIixcbiAgICAgICAgbGlnaHRzYWxtb246IFwiZmZhMDdhXCIsXG4gICAgICAgIGxpZ2h0c2VhZ3JlZW46IFwiMjBiMmFhXCIsXG4gICAgICAgIGxpZ2h0c2t5Ymx1ZTogXCI4N2NlZmFcIixcbiAgICAgICAgbGlnaHRzbGF0ZWdyYXk6IFwiNzg5XCIsXG4gICAgICAgIGxpZ2h0c2xhdGVncmV5OiBcIjc4OVwiLFxuICAgICAgICBsaWdodHN0ZWVsYmx1ZTogXCJiMGM0ZGVcIixcbiAgICAgICAgbGlnaHR5ZWxsb3c6IFwiZmZmZmUwXCIsXG4gICAgICAgIGxpbWU6IFwiMGYwXCIsXG4gICAgICAgIGxpbWVncmVlbjogXCIzMmNkMzJcIixcbiAgICAgICAgbGluZW46IFwiZmFmMGU2XCIsXG4gICAgICAgIG1hZ2VudGE6IFwiZjBmXCIsXG4gICAgICAgIG1hcm9vbjogXCI4MDAwMDBcIixcbiAgICAgICAgbWVkaXVtYXF1YW1hcmluZTogXCI2NmNkYWFcIixcbiAgICAgICAgbWVkaXVtYmx1ZTogXCIwMDAwY2RcIixcbiAgICAgICAgbWVkaXVtb3JjaGlkOiBcImJhNTVkM1wiLFxuICAgICAgICBtZWRpdW1wdXJwbGU6IFwiOTM3MGRiXCIsXG4gICAgICAgIG1lZGl1bXNlYWdyZWVuOiBcIjNjYjM3MVwiLFxuICAgICAgICBtZWRpdW1zbGF0ZWJsdWU6IFwiN2I2OGVlXCIsXG4gICAgICAgIG1lZGl1bXNwcmluZ2dyZWVuOiBcIjAwZmE5YVwiLFxuICAgICAgICBtZWRpdW10dXJxdW9pc2U6IFwiNDhkMWNjXCIsXG4gICAgICAgIG1lZGl1bXZpb2xldHJlZDogXCJjNzE1ODVcIixcbiAgICAgICAgbWlkbmlnaHRibHVlOiBcIjE5MTk3MFwiLFxuICAgICAgICBtaW50Y3JlYW06IFwiZjVmZmZhXCIsXG4gICAgICAgIG1pc3R5cm9zZTogXCJmZmU0ZTFcIixcbiAgICAgICAgbW9jY2FzaW46IFwiZmZlNGI1XCIsXG4gICAgICAgIG5hdmFqb3doaXRlOiBcImZmZGVhZFwiLFxuICAgICAgICBuYXZ5OiBcIjAwMDA4MFwiLFxuICAgICAgICBvbGRsYWNlOiBcImZkZjVlNlwiLFxuICAgICAgICBvbGl2ZTogXCI4MDgwMDBcIixcbiAgICAgICAgb2xpdmVkcmFiOiBcIjZiOGUyM1wiLFxuICAgICAgICBvcmFuZ2U6IFwiZmZhNTAwXCIsXG4gICAgICAgIG9yYW5nZXJlZDogXCJmZjQ1MDBcIixcbiAgICAgICAgb3JjaGlkOiBcImRhNzBkNlwiLFxuICAgICAgICBwYWxlZ29sZGVucm9kOiBcImVlZThhYVwiLFxuICAgICAgICBwYWxlZ3JlZW46IFwiOThmYjk4XCIsXG4gICAgICAgIHBhbGV0dXJxdW9pc2U6IFwiYWZlZWVlXCIsXG4gICAgICAgIHBhbGV2aW9sZXRyZWQ6IFwiZGI3MDkzXCIsXG4gICAgICAgIHBhcGF5YXdoaXA6IFwiZmZlZmQ1XCIsXG4gICAgICAgIHBlYWNocHVmZjogXCJmZmRhYjlcIixcbiAgICAgICAgcGVydTogXCJjZDg1M2ZcIixcbiAgICAgICAgcGluazogXCJmZmMwY2JcIixcbiAgICAgICAgcGx1bTogXCJkZGEwZGRcIixcbiAgICAgICAgcG93ZGVyYmx1ZTogXCJiMGUwZTZcIixcbiAgICAgICAgcHVycGxlOiBcIjgwMDA4MFwiLFxuICAgICAgICByZWJlY2NhcHVycGxlOiBcIjY2MzM5OVwiLFxuICAgICAgICByZWQ6IFwiZjAwXCIsXG4gICAgICAgIHJvc3licm93bjogXCJiYzhmOGZcIixcbiAgICAgICAgcm95YWxibHVlOiBcIjQxNjllMVwiLFxuICAgICAgICBzYWRkbGVicm93bjogXCI4YjQ1MTNcIixcbiAgICAgICAgc2FsbW9uOiBcImZhODA3MlwiLFxuICAgICAgICBzYW5keWJyb3duOiBcImY0YTQ2MFwiLFxuICAgICAgICBzZWFncmVlbjogXCIyZThiNTdcIixcbiAgICAgICAgc2Vhc2hlbGw6IFwiZmZmNWVlXCIsXG4gICAgICAgIHNpZW5uYTogXCJhMDUyMmRcIixcbiAgICAgICAgc2lsdmVyOiBcImMwYzBjMFwiLFxuICAgICAgICBza3libHVlOiBcIjg3Y2VlYlwiLFxuICAgICAgICBzbGF0ZWJsdWU6IFwiNmE1YWNkXCIsXG4gICAgICAgIHNsYXRlZ3JheTogXCI3MDgwOTBcIixcbiAgICAgICAgc2xhdGVncmV5OiBcIjcwODA5MFwiLFxuICAgICAgICBzbm93OiBcImZmZmFmYVwiLFxuICAgICAgICBzcHJpbmdncmVlbjogXCIwMGZmN2ZcIixcbiAgICAgICAgc3RlZWxibHVlOiBcIjQ2ODJiNFwiLFxuICAgICAgICB0YW46IFwiZDJiNDhjXCIsXG4gICAgICAgIHRlYWw6IFwiMDA4MDgwXCIsXG4gICAgICAgIHRoaXN0bGU6IFwiZDhiZmQ4XCIsXG4gICAgICAgIHRvbWF0bzogXCJmZjYzNDdcIixcbiAgICAgICAgdHVycXVvaXNlOiBcIjQwZTBkMFwiLFxuICAgICAgICB2aW9sZXQ6IFwiZWU4MmVlXCIsXG4gICAgICAgIHdoZWF0OiBcImY1ZGViM1wiLFxuICAgICAgICB3aGl0ZTogXCJmZmZcIixcbiAgICAgICAgd2hpdGVzbW9rZTogXCJmNWY1ZjVcIixcbiAgICAgICAgeWVsbG93OiBcImZmMFwiLFxuICAgICAgICB5ZWxsb3dncmVlbjogXCI5YWNkMzJcIlxuICAgIH07XG5cbiAgICAvLyBNYWtlIGl0IGVhc3kgdG8gYWNjZXNzIGNvbG9ycyB2aWEgYGhleE5hbWVzW2hleF1gXG4gICAgdmFyIGhleE5hbWVzID0gdGlueWNvbG9yLmhleE5hbWVzID0gZmxpcChuYW1lcyk7XG5cblxuICAgIC8vIFV0aWxpdGllc1xuICAgIC8vIC0tLS0tLS0tLVxuXG4gICAgLy8gYHsgJ25hbWUxJzogJ3ZhbDEnIH1gIGJlY29tZXMgYHsgJ3ZhbDEnOiAnbmFtZTEnIH1gXG4gICAgZnVuY3Rpb24gZmxpcChvKSB7XG4gICAgICAgIHZhciBmbGlwcGVkID0geyB9O1xuICAgICAgICBmb3IgKHZhciBpIGluIG8pIHtcbiAgICAgICAgICAgIGlmIChvLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgZmxpcHBlZFtvW2ldXSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsaXBwZWQ7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGEgdmFsaWQgYWxwaGEgdmFsdWUgWzAsMV0gd2l0aCBhbGwgaW52YWxpZCB2YWx1ZXMgYmVpbmcgc2V0IHRvIDFcbiAgICBmdW5jdGlvbiBib3VuZEFscGhhKGEpIHtcbiAgICAgICAgYSA9IHBhcnNlRmxvYXQoYSk7XG5cbiAgICAgICAgaWYgKGlzTmFOKGEpIHx8IGEgPCAwIHx8IGEgPiAxKSB7XG4gICAgICAgICAgICBhID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICAgIC8vIFRha2UgaW5wdXQgZnJvbSBbMCwgbl0gYW5kIHJldHVybiBpdCBhcyBbMCwgMV1cbiAgICBmdW5jdGlvbiBib3VuZDAxKG4sIG1heCkge1xuICAgICAgICBpZiAoaXNPbmVQb2ludFplcm8obikpIHsgbiA9IFwiMTAwJVwiOyB9XG5cbiAgICAgICAgdmFyIHByb2Nlc3NQZXJjZW50ID0gaXNQZXJjZW50YWdlKG4pO1xuICAgICAgICBuID0gbWF0aE1pbihtYXgsIG1hdGhNYXgoMCwgcGFyc2VGbG9hdChuKSkpO1xuXG4gICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgY29udmVydCBwZXJjZW50YWdlIGludG8gbnVtYmVyXG4gICAgICAgIGlmIChwcm9jZXNzUGVyY2VudCkge1xuICAgICAgICAgICAgbiA9IHBhcnNlSW50KG4gKiBtYXgsIDEwKSAvIDEwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBmbG9hdGluZyBwb2ludCByb3VuZGluZyBlcnJvcnNcbiAgICAgICAgaWYgKChtYXRoLmFicyhuIC0gbWF4KSA8IDAuMDAwMDAxKSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0IGludG8gWzAsIDFdIHJhbmdlIGlmIGl0IGlzbid0IGFscmVhZHlcbiAgICAgICAgcmV0dXJuIChuICUgbWF4KSAvIHBhcnNlRmxvYXQobWF4KTtcbiAgICB9XG5cbiAgICAvLyBGb3JjZSBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDFcbiAgICBmdW5jdGlvbiBjbGFtcDAxKHZhbCkge1xuICAgICAgICByZXR1cm4gbWF0aE1pbigxLCBtYXRoTWF4KDAsIHZhbCkpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIGEgYmFzZS0xNiBoZXggdmFsdWUgaW50byBhIGJhc2UtMTAgaW50ZWdlclxuICAgIGZ1bmN0aW9uIHBhcnNlSW50RnJvbUhleCh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTYpO1xuICAgIH1cblxuICAgIC8vIE5lZWQgdG8gaGFuZGxlIDEuMCBhcyAxMDAlLCBzaW5jZSBvbmNlIGl0IGlzIGEgbnVtYmVyLCB0aGVyZSBpcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaXQgYW5kIDFcbiAgICAvLyA8aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83NDIyMDcyL2phdmFzY3JpcHQtaG93LXRvLWRldGVjdC1udW1iZXItYXMtYS1kZWNpbWFsLWluY2x1ZGluZy0xLTA+XG4gICAgZnVuY3Rpb24gaXNPbmVQb2ludFplcm8obikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiAmJiBuLmluZGV4T2YoJy4nKSAhPSAtMSAmJiBwYXJzZUZsb2F0KG4pID09PSAxO1xuICAgIH1cblxuICAgIC8vIENoZWNrIHRvIHNlZSBpZiBzdHJpbmcgcGFzc2VkIGluIGlzIGEgcGVyY2VudGFnZVxuICAgIGZ1bmN0aW9uIGlzUGVyY2VudGFnZShuKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbiA9PT0gXCJzdHJpbmdcIiAmJiBuLmluZGV4T2YoJyUnKSAhPSAtMTtcbiAgICB9XG5cbiAgICAvLyBGb3JjZSBhIGhleCB2YWx1ZSB0byBoYXZlIDIgY2hhcmFjdGVyc1xuICAgIGZ1bmN0aW9uIHBhZDIoYykge1xuICAgICAgICByZXR1cm4gYy5sZW5ndGggPT0gMSA/ICcwJyArIGMgOiAnJyArIGM7XG4gICAgfVxuXG4gICAgLy8gUmVwbGFjZSBhIGRlY2ltYWwgd2l0aCBpdCdzIHBlcmNlbnRhZ2UgdmFsdWVcbiAgICBmdW5jdGlvbiBjb252ZXJ0VG9QZXJjZW50YWdlKG4pIHtcbiAgICAgICAgaWYgKG4gPD0gMSkge1xuICAgICAgICAgICAgbiA9IChuICogMTAwKSArIFwiJVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuXG4gICAgLy8gQ29udmVydHMgYSBkZWNpbWFsIHRvIGEgaGV4IHZhbHVlXG4gICAgZnVuY3Rpb24gY29udmVydERlY2ltYWxUb0hleChkKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoZCkgKiAyNTUpLnRvU3RyaW5nKDE2KTtcbiAgICB9XG4gICAgLy8gQ29udmVydHMgYSBoZXggdmFsdWUgdG8gYSBkZWNpbWFsXG4gICAgZnVuY3Rpb24gY29udmVydEhleFRvRGVjaW1hbChoKSB7XG4gICAgICAgIHJldHVybiAocGFyc2VJbnRGcm9tSGV4KGgpIC8gMjU1KTtcbiAgICB9XG5cbiAgICB2YXIgbWF0Y2hlcnMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLy8gPGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtdmFsdWVzLyNpbnRlZ2Vycz5cbiAgICAgICAgdmFyIENTU19JTlRFR0VSID0gXCJbLVxcXFwrXT9cXFxcZCslP1wiO1xuXG4gICAgICAgIC8vIDxodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXZhbHVlcy8jbnVtYmVyLXZhbHVlPlxuICAgICAgICB2YXIgQ1NTX05VTUJFUiA9IFwiWy1cXFxcK10/XFxcXGQqXFxcXC5cXFxcZCslP1wiO1xuXG4gICAgICAgIC8vIEFsbG93IHBvc2l0aXZlL25lZ2F0aXZlIGludGVnZXIvbnVtYmVyLiAgRG9uJ3QgY2FwdHVyZSB0aGUgZWl0aGVyL29yLCBqdXN0IHRoZSBlbnRpcmUgb3V0Y29tZS5cbiAgICAgICAgdmFyIENTU19VTklUID0gXCIoPzpcIiArIENTU19OVU1CRVIgKyBcIil8KD86XCIgKyBDU1NfSU5URUdFUiArIFwiKVwiO1xuXG4gICAgICAgIC8vIEFjdHVhbCBtYXRjaGluZy5cbiAgICAgICAgLy8gUGFyZW50aGVzZXMgYW5kIGNvbW1hcyBhcmUgb3B0aW9uYWwsIGJ1dCBub3QgcmVxdWlyZWQuXG4gICAgICAgIC8vIFdoaXRlc3BhY2UgY2FuIHRha2UgdGhlIHBsYWNlIG9mIGNvbW1hcyBvciBvcGVuaW5nIHBhcmVuXG4gICAgICAgIHZhciBQRVJNSVNTSVZFX01BVENIMyA9IFwiW1xcXFxzfFxcXFwoXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVssfFxcXFxzXSsoXCIgKyBDU1NfVU5JVCArIFwiKVxcXFxzKlxcXFwpP1wiO1xuICAgICAgICB2YXIgUEVSTUlTU0lWRV9NQVRDSDQgPSBcIltcXFxcc3xcXFxcKF0rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilbLHxcXFxcc10rKFwiICsgQ1NTX1VOSVQgKyBcIilcXFxccypcXFxcKT9cIjtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmdiOiBuZXcgUmVnRXhwKFwicmdiXCIgKyBQRVJNSVNTSVZFX01BVENIMyksXG4gICAgICAgICAgICByZ2JhOiBuZXcgUmVnRXhwKFwicmdiYVwiICsgUEVSTUlTU0lWRV9NQVRDSDQpLFxuICAgICAgICAgICAgaHNsOiBuZXcgUmVnRXhwKFwiaHNsXCIgKyBQRVJNSVNTSVZFX01BVENIMyksXG4gICAgICAgICAgICBoc2xhOiBuZXcgUmVnRXhwKFwiaHNsYVwiICsgUEVSTUlTU0lWRV9NQVRDSDQpLFxuICAgICAgICAgICAgaHN2OiBuZXcgUmVnRXhwKFwiaHN2XCIgKyBQRVJNSVNTSVZFX01BVENIMyksXG4gICAgICAgICAgICBoc3ZhOiBuZXcgUmVnRXhwKFwiaHN2YVwiICsgUEVSTUlTU0lWRV9NQVRDSDQpLFxuICAgICAgICAgICAgaGV4MzogL14oWzAtOWEtZkEtRl17MX0pKFswLTlhLWZBLUZdezF9KShbMC05YS1mQS1GXXsxfSkkLyxcbiAgICAgICAgICAgIGhleDY6IC9eKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pJC8sXG4gICAgICAgICAgICBoZXg4OiAvXihbMC05YS1mQS1GXXsyfSkoWzAtOWEtZkEtRl17Mn0pKFswLTlhLWZBLUZdezJ9KShbMC05YS1mQS1GXXsyfSkkL1xuICAgICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICAvLyBgc3RyaW5nSW5wdXRUb09iamVjdGBcbiAgICAvLyBQZXJtaXNzaXZlIHN0cmluZyBwYXJzaW5nLiAgVGFrZSBpbiBhIG51bWJlciBvZiBmb3JtYXRzLCBhbmQgb3V0cHV0IGFuIG9iamVjdFxuICAgIC8vIGJhc2VkIG9uIGRldGVjdGVkIGZvcm1hdC4gIFJldHVybnMgYHsgciwgZywgYiB9YCBvciBgeyBoLCBzLCBsIH1gIG9yIGB7IGgsIHMsIHZ9YFxuICAgIGZ1bmN0aW9uIHN0cmluZ0lucHV0VG9PYmplY3QoY29sb3IpIHtcblxuICAgICAgICBjb2xvciA9IGNvbG9yLnJlcGxhY2UodHJpbUxlZnQsJycpLnJlcGxhY2UodHJpbVJpZ2h0LCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIG5hbWVkID0gZmFsc2U7XG4gICAgICAgIGlmIChuYW1lc1tjb2xvcl0pIHtcbiAgICAgICAgICAgIGNvbG9yID0gbmFtZXNbY29sb3JdO1xuICAgICAgICAgICAgbmFtZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbG9yID09ICd0cmFuc3BhcmVudCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHI6IDAsIGc6IDAsIGI6IDAsIGE6IDAsIGZvcm1hdDogXCJuYW1lXCIgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyeSB0byBtYXRjaCBzdHJpbmcgaW5wdXQgdXNpbmcgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgLy8gS2VlcCBtb3N0IG9mIHRoZSBudW1iZXIgYm91bmRpbmcgb3V0IG9mIHRoaXMgZnVuY3Rpb24gLSBkb24ndCB3b3JyeSBhYm91dCBbMCwxXSBvciBbMCwxMDBdIG9yIFswLDM2MF1cbiAgICAgICAgLy8gSnVzdCByZXR1cm4gYW4gb2JqZWN0IGFuZCBsZXQgdGhlIGNvbnZlcnNpb24gZnVuY3Rpb25zIGhhbmRsZSB0aGF0LlxuICAgICAgICAvLyBUaGlzIHdheSB0aGUgcmVzdWx0IHdpbGwgYmUgdGhlIHNhbWUgd2hldGhlciB0aGUgdGlueWNvbG9yIGlzIGluaXRpYWxpemVkIHdpdGggc3RyaW5nIG9yIG9iamVjdC5cbiAgICAgICAgdmFyIG1hdGNoO1xuICAgICAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMucmdiLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgcjogbWF0Y2hbMV0sIGc6IG1hdGNoWzJdLCBiOiBtYXRjaFszXSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5yZ2JhLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgcjogbWF0Y2hbMV0sIGc6IG1hdGNoWzJdLCBiOiBtYXRjaFszXSwgYTogbWF0Y2hbNF0gfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaHNsLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaDogbWF0Y2hbMV0sIHM6IG1hdGNoWzJdLCBsOiBtYXRjaFszXSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oc2xhLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaDogbWF0Y2hbMV0sIHM6IG1hdGNoWzJdLCBsOiBtYXRjaFszXSwgYTogbWF0Y2hbNF0gfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaHN2LmV4ZWMoY29sb3IpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaDogbWF0Y2hbMV0sIHM6IG1hdGNoWzJdLCB2OiBtYXRjaFszXSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICgobWF0Y2ggPSBtYXRjaGVycy5oc3ZhLmV4ZWMoY29sb3IpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaDogbWF0Y2hbMV0sIHM6IG1hdGNoWzJdLCB2OiBtYXRjaFszXSwgYTogbWF0Y2hbNF0gfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG1hdGNoID0gbWF0Y2hlcnMuaGV4OC5leGVjKGNvbG9yKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYTogY29udmVydEhleFRvRGVjaW1hbChtYXRjaFsxXSksXG4gICAgICAgICAgICAgICAgcjogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzJdKSxcbiAgICAgICAgICAgICAgICBnOiBwYXJzZUludEZyb21IZXgobWF0Y2hbM10pLFxuICAgICAgICAgICAgICAgIGI6IHBhcnNlSW50RnJvbUhleChtYXRjaFs0XSksXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBuYW1lZCA/IFwibmFtZVwiIDogXCJoZXg4XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhleDYuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHI6IHBhcnNlSW50RnJvbUhleChtYXRjaFsxXSksXG4gICAgICAgICAgICAgICAgZzogcGFyc2VJbnRGcm9tSGV4KG1hdGNoWzJdKSxcbiAgICAgICAgICAgICAgICBiOiBwYXJzZUludEZyb21IZXgobWF0Y2hbM10pLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogbmFtZWQgPyBcIm5hbWVcIiA6IFwiaGV4XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChtYXRjaCA9IG1hdGNoZXJzLmhleDMuZXhlYyhjb2xvcikpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHI6IHBhcnNlSW50RnJvbUhleChtYXRjaFsxXSArICcnICsgbWF0Y2hbMV0pLFxuICAgICAgICAgICAgICAgIGc6IHBhcnNlSW50RnJvbUhleChtYXRjaFsyXSArICcnICsgbWF0Y2hbMl0pLFxuICAgICAgICAgICAgICAgIGI6IHBhcnNlSW50RnJvbUhleChtYXRjaFszXSArICcnICsgbWF0Y2hbM10pLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogbmFtZWQgPyBcIm5hbWVcIiA6IFwiaGV4XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgd2luZG93LnRpbnljb2xvciA9IHRpbnljb2xvcjtcbiAgICB9KSgpO1xuXG4gICAgJChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkLmZuLnNwZWN0cnVtLmxvYWQpIHtcbiAgICAgICAgICAgICQuZm4uc3BlY3RydW0ucHJvY2Vzc05hdGl2ZUNvbG9ySW5wdXRzKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./web/assets/spectrum/spectrum.js\n')},"./web/assets/tooltipster/js/jquery.tooltipster.min.js":
/*!*************************************************************!*\
  !*** ./web/assets/tooltipster/js/jquery.tooltipster.min.js ***!
  \*************************************************************/
/*! no static exports found */function(module,exports){eval('/* Tooltipster v3.3.0 */;(function(e,t,n){function s(t,n){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=e(t);this.$elProxy;this.elProxyPosition;this.enabled=true;this.options=e.extend({},i,n);this.mouseIsOverProxy=false;this.namespace="tooltipster-"+Math.round(Math.random()*1e5);this.Status="hidden";this.timerHide=null;this.timerShow=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this._init()}function o(t,n){var r=true;e.each(t,function(e,i){if(typeof n[e]==="undefined"||t[e]!==n[e]){r=false;return false}});return r}function f(){return!a&&u}function l(){var e=n.body||n.documentElement,t=e.style,r="transition";if(typeof t[r]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++){if(typeof t[v[i]+r]=="string"){return true}}return false}var r="tooltipster",i={animation:"fade",arrow:true,arrowColor:"",autoClose:true,content:null,contentAsHTML:false,contentCloning:true,debug:true,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:false,icon:"(?)",iconCloning:true,iconDesktop:false,iconTouch:false,iconTheme:"tooltipster-icon",interactive:false,interactiveTolerance:350,multiple:false,offsetX:0,offsetY:0,onlyOne:false,position:"top",positionTracker:false,positionTrackerCallback:function(e){if(this.option("trigger")=="hover"&&this.option("autoClose")){this.hide()}},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:true,trigger:"hover",updateAnimation:true};s.prototype={_init:function(){var t=this;if(n.querySelector){var r=null;if(t.$el.data("tooltipster-initialTitle")===undefined){r=t.$el.attr("title");if(r===undefined)r=null;t.$el.data("tooltipster-initialTitle",r)}if(t.options.content!==null){t._content_set(t.options.content)}else{t._content_set(r)}var i=t.options.functionInit.call(t.$el,t.$el,t.Content);if(typeof i!=="undefined")t._content_set(i);t.$el.removeAttr("title").addClass("tooltipstered");if(!u&&t.options.iconDesktop||u&&t.options.iconTouch){if(typeof t.options.icon==="string"){t.$elProxy=e(\'<span class="\'+t.options.iconTheme+\'"></span>\');t.$elProxy.text(t.options.icon)}else{if(t.options.iconCloning)t.$elProxy=t.options.icon.clone(true);else t.$elProxy=t.options.icon}t.$elProxy.insertAfter(t.$el)}else{t.$elProxy=t.$el}if(t.options.trigger=="hover"){t.$elProxy.on("mouseenter."+t.namespace,function(){if(!f()||t.options.touchDevices){t.mouseIsOverProxy=true;t._show()}}).on("mouseleave."+t.namespace,function(){if(!f()||t.options.touchDevices){t.mouseIsOverProxy=false}});if(u&&t.options.touchDevices){t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})}}else if(t.options.trigger=="click"){t.$elProxy.on("click."+t.namespace,function(){if(!f()||t.options.touchDevices){t._show()}})}}},_show:function(){var e=this;if(e.Status!="shown"&&e.Status!="appearing"){if(e.options.delay){e.timerShow=setTimeout(function(){if(e.options.trigger=="click"||e.options.trigger=="hover"&&e.mouseIsOverProxy){e._showNow()}},e.options.delay)}else e._showNow()}},_showNow:function(n){var r=this;r.options.functionBefore.call(r.$el,r.$el,function(){if(r.enabled&&r.Content!==null){if(n)r.callbacks.show.push(n);r.callbacks.hide=[];clearTimeout(r.timerShow);r.timerShow=null;clearTimeout(r.timerHide);r.timerHide=null;if(r.options.onlyOne){e(".tooltipstered").not(r.$el).each(function(t,n){var r=e(n),i=r.data("tooltipster-ns");e.each(i,function(e,t){var n=r.data(t),i=n.status(),s=n.option("autoClose");if(i!=="hidden"&&i!=="disappearing"&&s){n.hide()}})})}var i=function(){r.Status="shown";e.each(r.callbacks.show,function(e,t){t.call(r.$el)});r.callbacks.show=[]};if(r.Status!=="hidden"){var s=0;if(r.Status==="disappearing"){r.Status="appearing";if(l()){r.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+r.options.animation+"-show");if(r.options.speed>0)r.$tooltip.delay(r.options.speed);r.$tooltip.queue(i)}else{r.$tooltip.stop().fadeIn(i)}}else if(r.Status==="shown"){i()}}else{r.Status="appearing";var s=r.options.speed;r.bodyOverflowX=e("body").css("overflow-x");e("body").css("overflow-x","hidden");var o="tooltipster-"+r.options.animation,a="-webkit-transition-duration: "+r.options.speed+"ms; -webkit-animation-duration: "+r.options.speed+"ms; -moz-transition-duration: "+r.options.speed+"ms; -moz-animation-duration: "+r.options.speed+"ms; -o-transition-duration: "+r.options.speed+"ms; -o-animation-duration: "+r.options.speed+"ms; -ms-transition-duration: "+r.options.speed+"ms; -ms-animation-duration: "+r.options.speed+"ms; transition-duration: "+r.options.speed+"ms; animation-duration: "+r.options.speed+"ms;",f=r.options.minWidth?"min-width:"+Math.round(r.options.minWidth)+"px;":"",c=r.options.maxWidth?"max-width:"+Math.round(r.options.maxWidth)+"px;":"",h=r.options.interactive?"pointer-events: auto;":"";r.$tooltip=e(\'<div class="tooltipster-base \'+r.options.theme+\'" style="\'+f+" "+c+" "+h+" "+a+\'"><div class="tooltipster-content"></div></div>\');if(l())r.$tooltip.addClass(o);r._content_insert();r.$tooltip.appendTo("body");r.reposition();r.options.functionReady.call(r.$el,r.$el,r.$tooltip);if(l()){r.$tooltip.addClass(o+"-show");if(r.options.speed>0)r.$tooltip.delay(r.options.speed);r.$tooltip.queue(i)}else{r.$tooltip.css("display","none").fadeIn(r.options.speed,i)}r._interval_set();e(t).on("scroll."+r.namespace+" resize."+r.namespace,function(){r.reposition()});if(r.options.autoClose){e("body").off("."+r.namespace);if(r.options.trigger=="hover"){if(u){setTimeout(function(){e("body").on("touchstart."+r.namespace,function(){r.hide()})},0)}if(r.options.interactive){if(u){r.$tooltip.on("touchstart."+r.namespace,function(e){e.stopPropagation()})}var p=null;r.$elProxy.add(r.$tooltip).on("mouseleave."+r.namespace+"-autoClose",function(){clearTimeout(p);p=setTimeout(function(){r.hide()},r.options.interactiveTolerance)}).on("mouseenter."+r.namespace+"-autoClose",function(){clearTimeout(p)})}else{r.$elProxy.on("mouseleave."+r.namespace+"-autoClose",function(){r.hide()})}if(r.options.hideOnClick){r.$elProxy.on("click."+r.namespace+"-autoClose",function(){r.hide()})}}else if(r.options.trigger=="click"){setTimeout(function(){e("body").on("click."+r.namespace+" touchstart."+r.namespace,function(){r.hide()})},0);if(r.options.interactive){r.$tooltip.on("click."+r.namespace+" touchstart."+r.namespace,function(e){e.stopPropagation()})}}}}if(r.options.timer>0){r.timerHide=setTimeout(function(){r.timerHide=null;r.hide()},r.options.timer+s)}}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(e("body").find(t.$el).length===0||e("body").find(t.$elProxy).length===0||t.Status=="hidden"||e("body").find(t.$tooltip).length===0){if(t.Status=="shown"||t.Status=="appearing")t.hide();t._interval_cancel()}else{if(t.options.positionTracker){var n=t._repositionInfo(t.$elProxy),r=false;if(o(n.dimension,t.elProxyPosition.dimension)){if(t.$elProxy.css("position")==="fixed"){if(o(n.position,t.elProxyPosition.position))r=true}else{if(o(n.offset,t.elProxyPosition.offset))r=true}}if(!r){t.reposition();t.options.positionTrackerCallback.call(t,t.$el)}}}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(e){if(typeof e==="object"&&e!==null&&this.options.contentCloning){e=e.clone(true)}this.Content=e},_content_insert:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");if(typeof e.Content==="string"&&!e.options.contentAsHTML){t.text(e.Content)}else{t.empty().append(e.Content)}},_update:function(e){var t=this;t._content_set(e);if(t.Content!==null){if(t.Status!=="hidden"){t._content_insert();t.reposition();if(t.options.updateAnimation){if(l()){t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing");setTimeout(function(){if(t.Status!="hidden"){t.$tooltip.removeClass("tooltipster-content-changing");setTimeout(function(){if(t.Status!=="hidden"){t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})}},t.options.speed)}},t.options.speed)}else{t.$tooltip.fadeTo(t.options.speed,.5,function(){if(t.Status!="hidden"){t.$tooltip.fadeTo(t.options.speed,1)}})}}}}else{t.hide()}},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(false),width:e.outerWidth(false)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(n){var r=this;if(n)r.callbacks.hide.push(n);r.callbacks.show=[];clearTimeout(r.timerShow);r.timerShow=null;clearTimeout(r.timerHide);r.timerHide=null;var i=function(){e.each(r.callbacks.hide,function(e,t){t.call(r.$el)});r.callbacks.hide=[]};if(r.Status=="shown"||r.Status=="appearing"){r.Status="disappearing";var s=function(){r.Status="hidden";if(typeof r.Content=="object"&&r.Content!==null){r.Content.detach()}r.$tooltip.remove();r.$tooltip=null;e(t).off("."+r.namespace);e("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX);e("body").off("."+r.namespace);r.$elProxy.off("."+r.namespace+"-autoClose");r.options.functionAfter.call(r.$el,r.$el);i()};if(l()){r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying");if(r.options.speed>0)r.$tooltip.delay(r.options.speed);r.$tooltip.queue(s)}else{r.$tooltip.stop().fadeOut(r.options.speed,s)}}else if(r.Status=="hidden"){i()}return r},show:function(e){this._showNow(e);return this},update:function(e){return this.content(e)},content:function(e){if(typeof e==="undefined"){return this.Content}else{this._update(e);return this}},reposition:function(){var n=this;if(e("body").find(n.$tooltip).length!==0){n.$tooltip.css("width","");n.elProxyPosition=n._repositionInfo(n.$elProxy);var r=null,i=e(t).width(),s=n.elProxyPosition,o=n.$tooltip.outerWidth(false),u=n.$tooltip.innerWidth()+1,a=n.$tooltip.outerHeight(false);if(n.$elProxy.is("area")){var f=n.$elProxy.attr("shape"),l=n.$elProxy.parent().attr("name"),c=e(\'img[usemap="#\'+l+\'"]\'),h=c.offset().left,p=c.offset().top,d=n.$elProxy.attr("coords")!==undefined?n.$elProxy.attr("coords").split(","):undefined;if(f=="circle"){var v=parseInt(d[0]),m=parseInt(d[1]),g=parseInt(d[2]);s.dimension.height=g*2;s.dimension.width=g*2;s.offset.top=p+m-g;s.offset.left=h+v-g}else if(f=="rect"){var v=parseInt(d[0]),m=parseInt(d[1]),y=parseInt(d[2]),b=parseInt(d[3]);s.dimension.height=b-m;s.dimension.width=y-v;s.offset.top=p+m;s.offset.left=h+v}else if(f=="poly"){var w=[],E=[],S=0,x=0,T=0,N=0,C="even";for(var k=0;k<d.length;k++){var L=parseInt(d[k]);if(C=="even"){if(L>T){T=L;if(k===0){S=T}}if(L<S){S=L}C="odd"}else{if(L>N){N=L;if(k==1){x=N}}if(L<x){x=L}C="even"}}s.dimension.height=N-x;s.dimension.width=T-S;s.offset.top=p+x;s.offset.left=h+S}else{s.dimension.height=c.outerHeight(false);s.dimension.width=c.outerWidth(false);s.offset.top=p;s.offset.left=h}}var A=0,O=0,M=0,_=parseInt(n.options.offsetY),D=parseInt(n.options.offsetX),P=n.options.position;function H(){var n=e(t).scrollLeft();if(A-n<0){r=A-n;A=n}if(A+o-n>i){r=A-(i+n-o);A=i+n-o}}function B(n,r){if(s.offset.top-e(t).scrollTop()-a-_-12<0&&r.indexOf("top")>-1){P=n}if(s.offset.top+s.dimension.height+a+12+_>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1){P=n;M=s.offset.top-a-_-12}}if(P=="top"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left+D-j/2;M=s.offset.top-a-_-12;H();B("bottom","top")}if(P=="top-left"){A=s.offset.left+D;M=s.offset.top-a-_-12;H();B("bottom-left","top-left")}if(P=="top-right"){A=s.offset.left+s.dimension.width+D-o;M=s.offset.top-a-_-12;H();B("bottom-right","top-right")}if(P=="bottom"){var j=s.offset.left+o-(s.offset.left+s.dimension.width);A=s.offset.left-j/2+D;M=s.offset.top+s.dimension.height+_+12;H();B("top","bottom")}if(P=="bottom-left"){A=s.offset.left+D;M=s.offset.top+s.dimension.height+_+12;H();B("top-left","bottom-left")}if(P=="bottom-right"){A=s.offset.left+s.dimension.width+D-o;M=s.offset.top+s.dimension.height+_+12;H();B("top-right","bottom-right")}if(P=="left"){A=s.offset.left-D-o-12;O=s.offset.left+D+s.dimension.width+12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A<0&&O+o>i){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=o+A-I;n.$tooltip.css("width",q+"px");a=n.$tooltip.outerHeight(false);A=s.offset.left-D-q-12-I;F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_}else if(A<0){A=s.offset.left+D+s.dimension.width+12;r="left"}}if(P=="right"){A=s.offset.left+D+s.dimension.width+12;O=s.offset.left-D-o-12;var F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_;if(A+o>i&&O<0){var I=parseFloat(n.$tooltip.css("border-width"))*2,q=i-A-I;n.$tooltip.css("width",q+"px");a=n.$tooltip.outerHeight(false);F=s.offset.top+a-(s.offset.top+s.dimension.height);M=s.offset.top-F/2-_}else if(A+o>i){A=s.offset.left-D-o-12;r="right"}}if(n.options.arrow){var R="tooltipster-arrow-"+P;if(n.options.arrowColor.length<1){var U=n.$tooltip.css("background-color")}else{var U=n.options.arrowColor}if(!r){r=""}else if(r=="left"){R="tooltipster-arrow-right";r=""}else if(r=="right"){R="tooltipster-arrow-left";r=""}else{r="left:"+Math.round(r)+"px;"}if(P=="top"||P=="top-left"||P=="top-right"){var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color")}else if(P=="bottom"||P=="bottom-left"||P=="bottom-right"){var z=parseFloat(n.$tooltip.css("border-top-width")),W=n.$tooltip.css("border-top-color")}else if(P=="left"){var z=parseFloat(n.$tooltip.css("border-right-width")),W=n.$tooltip.css("border-right-color")}else if(P=="right"){var z=parseFloat(n.$tooltip.css("border-left-width")),W=n.$tooltip.css("border-left-color")}else{var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color")}if(z>1){z++}var X="";if(z!==0){var V="",J="border-color: "+W+";";if(R.indexOf("bottom")!==-1){V="margin-top: -"+Math.round(z)+"px;"}else if(R.indexOf("top")!==-1){V="margin-bottom: -"+Math.round(z)+"px;"}else if(R.indexOf("left")!==-1){V="margin-right: -"+Math.round(z)+"px;"}else if(R.indexOf("right")!==-1){V="margin-left: -"+Math.round(z)+"px;"}X=\'<span class="tooltipster-arrow-border" style="\'+V+" "+J+\';"></span>\'}n.$tooltip.find(".tooltipster-arrow").remove();var K=\'<div class="\'+R+\' tooltipster-arrow" style="\'+r+\'">\'+X+\'<span style="border-color:\'+U+\';"></span></div>\';n.$tooltip.append(K)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(A)+"px"})}return n},enable:function(){this.enabled=true;return this},disable:function(){this.hide();this.enabled=false;return this},destroy:function(){var t=this;t.hide();if(t.$el[0]!==t.$elProxy[0]){t.$elProxy.remove()}t.$el.removeData(t.namespace).off("."+t.namespace);var n=t.$el.data("tooltipster-ns");if(n.length===1){var r=null;if(t.options.restoration==="previous"){r=t.$el.data("tooltipster-initialTitle")}else if(t.options.restoration==="current"){r=typeof t.Content==="string"?t.Content:e("<div></div>").append(t.Content).html()}if(r){t.$el.attr("title",r)}t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else{n=e.grep(n,function(e,n){return e!==t.namespace});t.$el.data("tooltipster-ns",n)}return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(e,t){if(typeof t=="undefined")return this.options[e];else{this.options[e]=t;return this}},status:function(){return this.Status}};e.fn[r]=function(){var t=arguments;if(this.length===0){if(typeof t[0]==="string"){var n=true;switch(t[0]){case"setDefaults":e.extend(i,t[1]);break;default:n=false;break}if(n)return true;else return this}else{return this}}else{if(typeof t[0]==="string"){var r="#*$~&";this.each(function(){var n=e(this).data("tooltipster-ns"),i=n?e(this).data(n[0]):null;if(i){if(typeof i[t[0]]==="function"){var s=i[t[0]](t[1],t[2])}else{throw new Error(\'Unknown method .tooltipster("\'+t[0]+\'")\')}if(s!==i){r=s;return false}}else{throw new Error("You called Tooltipster\'s \\""+t[0]+\'" method on an uninitialized element\')}});return r!=="#*$~&"?r:this}else{var o=[],u=t[0]&&typeof t[0].multiple!=="undefined",a=u&&t[0].multiple||!u&&i.multiple,f=t[0]&&typeof t[0].debug!=="undefined",l=f&&t[0].debug||!f&&i.debug;this.each(function(){var n=false,r=e(this).data("tooltipster-ns"),i=null;if(!r){n=true}else if(a){n=true}else if(l){console.log(\'Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.\')}if(n){i=new s(this,t[0]);if(!r)r=[];r.push(i.namespace);e(this).data("tooltipster-ns",r);e(this).data(i.namespace,i)}o.push(i)});if(a)return o;else return this}}};var u=!!("ontouchstart"in t);var a=false;e("body").one("mousemove",function(){a=true})})(jQuery,window,document);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi93ZWIvYXNzZXRzL3Rvb2x0aXBzdGVyL2pzL2pxdWVyeS50b29sdGlwc3Rlci5taW4uanM/NzcwYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx5QkFBeUIsaUJBQWlCLGdCQUFnQixtQkFBbUIsZ0JBQWdCLGlCQUFpQix3QkFBd0IsYUFBYSxjQUFjLGNBQWMscUJBQXFCLGtCQUFrQix3QkFBd0IsTUFBTSw0QkFBNEIsNERBQTRELHFCQUFxQixvQkFBb0Isb0JBQW9CLGNBQWMsOERBQThELHNEQUFzRCxhQUFhLGdCQUFnQixXQUFXLHVCQUF1QiwyQ0FBMkMsUUFBUSxjQUFjLEVBQUUsU0FBUyxhQUFhLFlBQVksYUFBYSx5REFBeUQsMEJBQTBCLFlBQVksNEVBQTRFLFlBQVksV0FBVyxLQUFLLCtCQUErQixhQUFhLGFBQWEsdUJBQXVCLHdMQUF3TCw4QkFBOEIsSUFBSSw4QkFBOEIsNEJBQTRCLG1SQUFtUiw4REFBOEQsYUFBYSw2SEFBNkgsYUFBYSxpQkFBaUIsV0FBVyxvQkFBb0IsV0FBVyx1REFBdUQsc0JBQXNCLHdCQUF3Qix5Q0FBeUMsNkJBQTZCLGtDQUFrQyxLQUFLLGtCQUFrQix5REFBeUQsNENBQTRDLG9EQUFvRCxzREFBc0QscUNBQXFDLDhEQUE4RCxnQ0FBZ0MsS0FBSywrREFBK0QsK0JBQStCLDhCQUE4QixLQUFLLGlCQUFpQiwrQkFBK0IsbURBQW1ELGlDQUFpQyx3QkFBd0IsV0FBVywwQ0FBMEMsaUNBQWlDLDBCQUEwQixFQUFFLDhCQUE4QixtREFBbUQsYUFBYSxHQUFHLG9DQUFvQyw4Q0FBOEMsaUNBQWlDLFdBQVcsSUFBSSxrQkFBa0IsV0FBVyw2Q0FBNkMsb0JBQW9CLGtDQUFrQywrRUFBK0UsY0FBYyxrQkFBa0IsbUJBQW1CLHNCQUFzQixXQUFXLHFEQUFxRCxnQ0FBZ0MsOEJBQThCLG9CQUFvQiwwQkFBMEIsaUJBQWlCLDBCQUEwQixpQkFBaUIsc0JBQXNCLGtEQUFrRCxzQ0FBc0MsdUJBQXVCLHFE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QixFQUFFLCtCQUErQixTQUFTLHdCQUF3QixpRUFBaUUsMkJBQTJCLGdEQUFnRCxzQkFBc0IsZ0RBQWdELEtBQUssa0JBQWtCLGFBQWEsbUJBQW1CLHFCQUFxQixtQkFBbUIsZ0JBQWdCLG9CQUFvQiwyQkFBMkIsV0FBVyxhQUFhLG1DQUFtQyxNQUFNLGdCQUFnQixNQUFNLGlCQUFpQixpQkFBaUIsS0FBSyxhQUFhLEtBQUssMkJBQTJCLGNBQWMscUJBQXFCLGlFQUFpRSxNQUFNLGdDQUFnQyx5QkFBeUIsS0FBSywyREFBMkQsVUFBVSxJQUFJLGNBQWMsS0FBSyw0RkFBNEYsRUFBRSwwQkFBMEIsS0FBSyw0SkFBNEoscUJBQXFCLG9EQUFvRCxPQUFPLE9BQU8sV0FBVyxPQUFPLFdBQVcsb0pBQW9KLE1BQU0sbUJBQW1CLFdBQVcsb0JBQW9CLGlDQUFpQyw0QkFBNEIsVUFBVSxFQUFFLGNBQWMsb0JBQW9CLDZCQUE2QixZQUFZLHFDQUFxQyxPQUFPLEVBQUUiLCJmaWxlIjoiLi93ZWIvYXNzZXRzL3Rvb2x0aXBzdGVyL2pzL2pxdWVyeS50b29sdGlwc3Rlci5taW4uanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBUb29sdGlwc3RlciB2My4zLjAgKi87KGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBzKHQsbil7dGhpcy5ib2R5T3ZlcmZsb3dYO3RoaXMuY2FsbGJhY2tzPXtoaWRlOltdLHNob3c6W119O3RoaXMuY2hlY2tJbnRlcnZhbD1udWxsO3RoaXMuQ29udGVudDt0aGlzLiRlbD1lKHQpO3RoaXMuJGVsUHJveHk7dGhpcy5lbFByb3h5UG9zaXRpb247dGhpcy5lbmFibGVkPXRydWU7dGhpcy5vcHRpb25zPWUuZXh0ZW5kKHt9LGksbik7dGhpcy5tb3VzZUlzT3ZlclByb3h5PWZhbHNlO3RoaXMubmFtZXNwYWNlPVwidG9vbHRpcHN0ZXItXCIrTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjFlNSk7dGhpcy5TdGF0dXM9XCJoaWRkZW5cIjt0aGlzLnRpbWVySGlkZT1udWxsO3RoaXMudGltZXJTaG93PW51bGw7dGhpcy4kdG9vbHRpcDt0aGlzLm9wdGlvbnMuaWNvblRoZW1lPXRoaXMub3B0aW9ucy5pY29uVGhlbWUucmVwbGFjZShcIi5cIixcIlwiKTt0aGlzLm9wdGlvbnMudGhlbWU9dGhpcy5vcHRpb25zLnRoZW1lLnJlcGxhY2UoXCIuXCIsXCJcIik7dGhpcy5faW5pdCgpfWZ1bmN0aW9uIG8odCxuKXt2YXIgcj10cnVlO2UuZWFjaCh0LGZ1bmN0aW9uKGUsaSl7aWYodHlwZW9mIG5bZV09PT1cInVuZGVmaW5lZFwifHx0W2VdIT09bltlXSl7cj1mYWxzZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZigpe3JldHVybiFhJiZ1fWZ1bmN0aW9uIGwoKXt2YXIgZT1uLmJvZHl8fG4uZG9jdW1lbnRFbGVtZW50LHQ9ZS5zdHlsZSxyPVwidHJhbnNpdGlvblwiO2lmKHR5cGVvZiB0W3JdPT1cInN0cmluZ1wiKXtyZXR1cm4gdHJ1ZX12PVtcIk1velwiLFwiV2Via2l0XCIsXCJLaHRtbFwiLFwiT1wiLFwibXNcIl0scj1yLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Iuc3Vic3RyKDEpO2Zvcih2YXIgaT0wO2k8di5sZW5ndGg7aSsrKXtpZih0eXBlb2YgdFt2W2ldK3JdPT1cInN0cmluZ1wiKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfXZhciByPVwidG9vbHRpcHN0ZXJcIixpPXthbmltYXRpb246XCJmYWRlXCIsYXJyb3c6dHJ1ZSxhcnJvd0NvbG9yOlwiXCIsYXV0b0Nsb3NlOnRydWUsY29udGVudDpudWxsLGNvbnRlbnRBc0hUTUw6ZmFsc2UsY29udGVudENsb25pbmc6dHJ1ZSxkZWJ1Zzp0cnVlLGRlbGF5OjIwMCxtaW5XaWR0aDowLG1heFdpZHRoOm51bGwsZnVuY3Rpb25Jbml0OmZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbkJlZm9yZTpmdW5jdGlvbihlLHQpe3QoKX0sZnVuY3Rpb25SZWFkeTpmdW5jdGlvbihlLHQpe30sZnVuY3Rpb25BZnRlcjpmdW5jdGlvbihlKXt9LGhpZGVPbkNsaWNrOmZhbHNlLGljb246XCIoPylcIixpY29uQ2xvbmluZzp0cnVlLGljb25EZXNrdG9wOmZhbHNlLGljb25Ub3VjaDpmYWxzZSxpY29uVGhlbWU6XCJ0b29sdGlwc3Rlci1pY29uXCIsaW50ZXJhY3RpdmU6ZmFsc2UsaW50ZXJhY3RpdmVUb2xlcmFuY2U6MzUwLG11bHRpcGxlOmZhbHNlLG9mZnNldFg6MCxvZmZzZXRZOjAsb25seU9uZTpmYWxzZSxwb3NpdGlvbjpcInRvcFwiLHBvc2l0aW9uVHJhY2tlcjpmYWxzZSxwb3NpdGlvblRyYWNrZXJDYWxsYmFjazpmdW5jdGlvbihlKXtpZih0aGlzLm9wdGlvbihcInRyaWdnZXJcIik9PVwiaG92ZXJcIiYmdGhpcy5vcHRpb24oXCJhdXRvQ2xvc2VcIikpe3RoaXMuaGlkZSgpfX0scmVzdG9yYXRpb246XCJjdXJyZW50XCIsc3BlZWQ6MzUwLHRpbWVyOjAsdGhlbWU6XCJ0b29sdGlwc3Rlci1kZWZhdWx0XCIsdG91Y2hEZXZpY2VzOnRydWUsdHJpZ2dlcjpcImhvdmVyXCIsdXBkYXRlQW5pbWF0aW9uOnRydWV9O3MucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYobi5xdWVyeVNlbGVjdG9yKXt2YXIgcj1udWxsO2lmKHQuJGVsLmRhdGEoXCJ0b29sdGlwc3Rlci1pbml0aWFsVGl0bGVcIik9PT11bmRlZmluZWQpe3I9dC4kZWwuYXR0cihcInRpdGxlXCIpO2lmKHI9PT11bmRlZmluZWQpcj1udWxsO3QuJGVsLmRhdGEoXCJ0b29sdGlwc3Rlci1pbml0aWFsVGl0bGVcIixyKX1pZih0Lm9wdGlvbnMuY29udGVudCE9PW51bGwpe3QuX2NvbnRlbnRfc2V0KHQub3B0aW9ucy5jb250ZW50KX1lbHNle3QuX2NvbnRlbnRfc2V0KHIpfXZhciBpPXQub3B0aW9ucy5mdW5jdGlvbkluaXQuY2FsbCh0LiRlbCx0LiRlbCx0LkNvbnRlbnQpO2lmKHR5cGVvZiBpIT09XCJ1bmRlZmluZWRcIil0Ll9jb250ZW50X3NldChpKTt0LiRlbC5yZW1vdmVBdHRyKFwidGl0bGVcIikuYWRkQ2xhc3MoXCJ0b29sdGlwc3RlcmVkXCIpO2lmKCF1JiZ0Lm9wdGlvbnMuaWNvbkRlc2t0b3B8fHUmJnQub3B0aW9ucy5pY29uVG91Y2gpe2lmKHR5cGVvZiB0Lm9wdGlvbnMuaWNvbj09PVwic3RyaW5nXCIpe3QuJGVsUHJveHk9ZSgnPHNwYW4gY2xhc3M9XCInK3Qub3B0aW9ucy5pY29uVGhlbWUrJ1wiPjwvc3Bhbj4nKTt0LiRlbFByb3h5LnRleHQodC5vcHRpb25zLmljb24pfWVsc2V7aWYodC5vcHRpb25zLmljb25DbG9uaW5nKXQuJGVsUHJveHk9dC5vcHRpb25zLmljb24uY2xvbmUodHJ1ZSk7ZWxzZSB0LiRlbFByb3h5PXQub3B0aW9ucy5pY29ufXQuJGVsUHJveHkuaW5zZXJ0QWZ0ZXIodC4kZWwpfWVsc2V7dC4kZWxQcm94eT10LiRlbH1pZih0Lm9wdGlvbnMudHJpZ2dlcj09XCJob3ZlclwiKXt0LiRlbFByb3h5Lm9uKFwibW91c2VlbnRlci5cIit0Lm5hbWVzcGFjZSxmdW5jdGlvbigpe2lmKCFmKCl8fHQub3B0aW9ucy50b3VjaERldmljZXMpe3QubW91c2VJc092ZXJQcm94eT10cnVlO3QuX3Nob3coKX19KS5vbihcIm1vdXNlbGVhdmUuXCIrdC5uYW1lc3BhY2UsZnVuY3Rpb24oKXtpZighZigpfHx0Lm9wdGlvbnMudG91Y2hEZXZpY2VzKXt0Lm1vdXNlSXNPdmVyUHJveHk9ZmFsc2V9fSk7aWYodSYmdC5vcHRpb25zLnRvdWNoRGV2aWNlcyl7dC4kZWxQcm94eS5vbihcInRvdWNoc3RhcnQuXCIrdC5uYW1lc3BhY2UsZnVuY3Rpb24oKXt0Ll9zaG93Tm93KCl9KX19ZWxzZSBpZih0Lm9wdGlvbnMudHJpZ2dlcj09XCJjbGlja1wiKXt0LiRlbFByb3h5Lm9uKFwiY2xpY2suXCIrdC5uYW1lc3BhY2UsZnVuY3Rpb24oKXtpZighZigpfHx0Lm9wdGlvbnMudG91Y2hEZXZpY2VzKXt0Ll9zaG93KCl9fSl9fX0sX3Nob3c6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUuU3RhdHVzIT1cInNob3duXCImJmUuU3RhdHVzIT1cImFwcGVhcmluZ1wiKXtpZihlLm9wdGlvbnMuZGVsYXkpe2UudGltZXJTaG93PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihlLm9wdGlvbnMudHJpZ2dlcj09XCJjbGlja1wifHxlLm9wdGlvbnMudHJpZ2dlcj09XCJob3ZlclwiJiZlLm1vdXNlSXNPdmVyUHJveHkpe2UuX3Nob3dOb3coKX19LGUub3B0aW9ucy5kZWxheSl9ZWxzZSBlLl9zaG93Tm93KCl9fSxfc2hvd05vdzpmdW5jdGlvbihuKXt2YXIgcj10aGlzO3Iub3B0aW9ucy5mdW5jdGlvbkJlZm9yZS5jYWxsKHIuJGVsLHIuJGVsLGZ1bmN0aW9uKCl7aWYoci5lbmFibGVkJiZyLkNvbnRlbnQhPT1udWxsKXtpZihuKXIuY2FsbGJhY2tzLnNob3cucHVzaChuKTtyLmNhbGxiYWNrcy5oaWRlPVtdO2NsZWFyVGltZW91dChyLnRpbWVyU2hvdyk7ci50aW1lclNob3c9bnVsbDtjbGVhclRpbWVvdXQoci50aW1lckhpZGUpO3IudGltZXJIaWRlPW51bGw7aWYoci5vcHRpb25zLm9ubHlPbmUpe2UoXCIudG9vbHRpcHN0ZXJlZFwiKS5ub3Qoci4kZWwpLmVhY2goZnVuY3Rpb24odCxuKXt2YXIgcj1lKG4pLGk9ci5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIik7ZS5lYWNoKGksZnVuY3Rpb24oZSx0KXt2YXIgbj1yLmRhdGEodCksaT1uLnN0YXR1cygpLHM9bi5vcHRpb24oXCJhdXRvQ2xvc2VcIik7aWYoaSE9PVwiaGlkZGVuXCImJmkhPT1cImRpc2FwcGVhcmluZ1wiJiZzKXtuLmhpZGUoKX19KX0pfXZhciBpPWZ1bmN0aW9uKCl7ci5TdGF0dXM9XCJzaG93blwiO2UuZWFjaChyLmNhbGxiYWNrcy5zaG93LGZ1bmN0aW9uKGUsdCl7dC5jYWxsKHIuJGVsKX0pO3IuY2FsbGJhY2tzLnNob3c9W119O2lmKHIuU3RhdHVzIT09XCJoaWRkZW5cIil7dmFyIHM9MDtpZihyLlN0YXR1cz09PVwiZGlzYXBwZWFyaW5nXCIpe3IuU3RhdHVzPVwiYXBwZWFyaW5nXCI7aWYobCgpKXtyLiR0b29sdGlwLmNsZWFyUXVldWUoKS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLWR5aW5nXCIpLmFkZENsYXNzKFwidG9vbHRpcHN0ZXItXCIrci5vcHRpb25zLmFuaW1hdGlvbitcIi1zaG93XCIpO2lmKHIub3B0aW9ucy5zcGVlZD4wKXIuJHRvb2x0aXAuZGVsYXkoci5vcHRpb25zLnNwZWVkKTtyLiR0b29sdGlwLnF1ZXVlKGkpfWVsc2V7ci4kdG9vbHRpcC5zdG9wKCkuZmFkZUluKGkpfX1lbHNlIGlmKHIuU3RhdHVzPT09XCJzaG93blwiKXtpKCl9fWVsc2V7ci5TdGF0dXM9XCJhcHBlYXJpbmdcIjt2YXIgcz1yLm9wdGlvbnMuc3BlZWQ7ci5ib2R5T3ZlcmZsb3dYPWUoXCJib2R5XCIpLmNzcyhcIm92ZXJmbG93LXhcIik7ZShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3cteFwiLFwiaGlkZGVuXCIpO3ZhciBvPVwidG9vbHRpcHN0ZXItXCIrci5vcHRpb25zLmFuaW1hdGlvbixhPVwiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uOiBcIityLm9wdGlvbnMuc3BlZWQrXCJtczsgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IFwiK3Iub3B0aW9ucy5zcGVlZCtcIm1zOyAtbW96LXRyYW5zaXRpb24tZHVyYXRpb246IFwiK3Iub3B0aW9ucy5zcGVlZCtcIm1zOyAtbW96LWFuaW1hdGlvbi1kdXJhdGlvbjogXCIrci5vcHRpb25zLnNwZWVkK1wibXM7IC1vLXRyYW5zaXRpb24tZHVyYXRpb246IFwiK3Iub3B0aW9ucy5zcGVlZCtcIm1zOyAtby1hbmltYXRpb24tZHVyYXRpb246IFwiK3Iub3B0aW9ucy5zcGVlZCtcIm1zOyAtbXMtdHJhbnNpdGlvbi1kdXJhdGlvbjogXCIrci5vcHRpb25zLnNwZWVkK1wibXM7IC1tcy1hbmltYXRpb24tZHVyYXRpb246IFwiK3Iub3B0aW9ucy5zcGVlZCtcIm1zOyB0cmFuc2l0aW9uLWR1cmF0aW9uOiBcIityLm9wdGlvbnMuc3BlZWQrXCJtczsgYW5pbWF0aW9uLWR1cmF0aW9uOiBcIityLm9wdGlvbnMuc3BlZWQrXCJtcztcIixmPXIub3B0aW9ucy5taW5XaWR0aD9cIm1pbi13aWR0aDpcIitNYXRoLnJvdW5kKHIub3B0aW9ucy5taW5XaWR0aCkrXCJweDtcIjpcIlwiLGM9ci5vcHRpb25zLm1heFdpZHRoP1wibWF4LXdpZHRoOlwiK01hdGgucm91bmQoci5vcHRpb25zLm1heFdpZHRoKStcInB4O1wiOlwiXCIsaD1yLm9wdGlvbnMuaW50ZXJhY3RpdmU/XCJwb2ludGVyLWV2ZW50czogYXV0bztcIjpcIlwiO3IuJHRvb2x0aXA9ZSgnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWJhc2UgJytyLm9wdGlvbnMudGhlbWUrJ1wiIHN0eWxlPVwiJytmK1wiIFwiK2MrXCIgXCIraCtcIiBcIithKydcIj48ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItY29udGVudFwiPjwvZGl2PjwvZGl2PicpO2lmKGwoKSlyLiR0b29sdGlwLmFkZENsYXNzKG8pO3IuX2NvbnRlbnRfaW5zZXJ0KCk7ci4kdG9vbHRpcC5hcHBlbmRUbyhcImJvZHlcIik7ci5yZXBvc2l0aW9uKCk7ci5vcHRpb25zLmZ1bmN0aW9uUmVhZHkuY2FsbChyLiRlbCxyLiRlbCxyLiR0b29sdGlwKTtpZihsKCkpe3IuJHRvb2x0aXAuYWRkQ2xhc3MobytcIi1zaG93XCIpO2lmKHIub3B0aW9ucy5zcGVlZD4wKXIuJHRvb2x0aXAuZGVsYXkoci5vcHRpb25zLnNwZWVkKTtyLiR0b29sdGlwLnF1ZXVlKGkpfWVsc2V7ci4kdG9vbHRpcC5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLmZhZGVJbihyLm9wdGlvbnMuc3BlZWQsaSl9ci5faW50ZXJ2YWxfc2V0KCk7ZSh0KS5vbihcInNjcm9sbC5cIityLm5hbWVzcGFjZStcIiByZXNpemUuXCIrci5uYW1lc3BhY2UsZnVuY3Rpb24oKXtyLnJlcG9zaXRpb24oKX0pO2lmKHIub3B0aW9ucy5hdXRvQ2xvc2Upe2UoXCJib2R5XCIpLm9mZihcIi5cIityLm5hbWVzcGFjZSk7aWYoci5vcHRpb25zLnRyaWdnZXI9PVwiaG92ZXJcIil7aWYodSl7c2V0VGltZW91dChmdW5jdGlvbigpe2UoXCJib2R5XCIpLm9uKFwidG91Y2hzdGFydC5cIityLm5hbWVzcGFjZSxmdW5jdGlvbigpe3IuaGlkZSgpfSl9LDApfWlmKHIub3B0aW9ucy5pbnRlcmFjdGl2ZSl7aWYodSl7ci4kdG9vbHRpcC5vbihcInRvdWNoc3RhcnQuXCIrci5uYW1lc3BhY2UsZnVuY3Rpb24oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKX0pfXZhciBwPW51bGw7ci4kZWxQcm94eS5hZGQoci4kdG9vbHRpcCkub24oXCJtb3VzZWxlYXZlLlwiK3IubmFtZXNwYWNlK1wiLWF1dG9DbG9zZVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHApO3A9c2V0VGltZW91dChmdW5jdGlvbigpe3IuaGlkZSgpfSxyLm9wdGlvbnMuaW50ZXJhY3RpdmVUb2xlcmFuY2UpfSkub24oXCJtb3VzZWVudGVyLlwiK3IubmFtZXNwYWNlK1wiLWF1dG9DbG9zZVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHApfSl9ZWxzZXtyLiRlbFByb3h5Lm9uKFwibW91c2VsZWF2ZS5cIityLm5hbWVzcGFjZStcIi1hdXRvQ2xvc2VcIixmdW5jdGlvbigpe3IuaGlkZSgpfSl9aWYoci5vcHRpb25zLmhpZGVPbkNsaWNrKXtyLiRlbFByb3h5Lm9uKFwiY2xpY2suXCIrci5uYW1lc3BhY2UrXCItYXV0b0Nsb3NlXCIsZnVuY3Rpb24oKXtyLmhpZGUoKX0pfX1lbHNlIGlmKHIub3B0aW9ucy50cmlnZ2VyPT1cImNsaWNrXCIpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlKFwiYm9keVwiKS5vbihcImNsaWNrLlwiK3IubmFtZXNwYWNlK1wiIHRvdWNoc3RhcnQuXCIrci5uYW1lc3BhY2UsZnVuY3Rpb24oKXtyLmhpZGUoKX0pfSwwKTtpZihyLm9wdGlvbnMuaW50ZXJhY3RpdmUpe3IuJHRvb2x0aXAub24oXCJjbGljay5cIityLm5hbWVzcGFjZStcIiB0b3VjaHN0YXJ0LlwiK3IubmFtZXNwYWNlLGZ1bmN0aW9uKGUpe2Uuc3RvcFByb3BhZ2F0aW9uKCl9KX19fX1pZihyLm9wdGlvbnMudGltZXI+MCl7ci50aW1lckhpZGU9c2V0VGltZW91dChmdW5jdGlvbigpe3IudGltZXJIaWRlPW51bGw7ci5oaWRlKCl9LHIub3B0aW9ucy50aW1lcitzKX19fSl9LF9pbnRlcnZhbF9zZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3QuY2hlY2tJbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKGUoXCJib2R5XCIpLmZpbmQodC4kZWwpLmxlbmd0aD09PTB8fGUoXCJib2R5XCIpLmZpbmQodC4kZWxQcm94eSkubGVuZ3RoPT09MHx8dC5TdGF0dXM9PVwiaGlkZGVuXCJ8fGUoXCJib2R5XCIpLmZpbmQodC4kdG9vbHRpcCkubGVuZ3RoPT09MCl7aWYodC5TdGF0dXM9PVwic2hvd25cInx8dC5TdGF0dXM9PVwiYXBwZWFyaW5nXCIpdC5oaWRlKCk7dC5faW50ZXJ2YWxfY2FuY2VsKCl9ZWxzZXtpZih0Lm9wdGlvbnMucG9zaXRpb25UcmFja2VyKXt2YXIgbj10Ll9yZXBvc2l0aW9uSW5mbyh0LiRlbFByb3h5KSxyPWZhbHNlO2lmKG8obi5kaW1lbnNpb24sdC5lbFByb3h5UG9zaXRpb24uZGltZW5zaW9uKSl7aWYodC4kZWxQcm94eS5jc3MoXCJwb3NpdGlvblwiKT09PVwiZml4ZWRcIil7aWYobyhuLnBvc2l0aW9uLHQuZWxQcm94eVBvc2l0aW9uLnBvc2l0aW9uKSlyPXRydWV9ZWxzZXtpZihvKG4ub2Zmc2V0LHQuZWxQcm94eVBvc2l0aW9uLm9mZnNldCkpcj10cnVlfX1pZighcil7dC5yZXBvc2l0aW9uKCk7dC5vcHRpb25zLnBvc2l0aW9uVHJhY2tlckNhbGxiYWNrLmNhbGwodCx0LiRlbCl9fX19LDIwMCl9LF9pbnRlcnZhbF9jYW5jZWw6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuY2hlY2tJbnRlcnZhbCk7dGhpcy5jaGVja0ludGVydmFsPW51bGx9LF9jb250ZW50X3NldDpmdW5jdGlvbihlKXtpZih0eXBlb2YgZT09PVwib2JqZWN0XCImJmUhPT1udWxsJiZ0aGlzLm9wdGlvbnMuY29udGVudENsb25pbmcpe2U9ZS5jbG9uZSh0cnVlKX10aGlzLkNvbnRlbnQ9ZX0sX2NvbnRlbnRfaW5zZXJ0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuJHRvb2x0aXAuZmluZChcIi50b29sdGlwc3Rlci1jb250ZW50XCIpO2lmKHR5cGVvZiBlLkNvbnRlbnQ9PT1cInN0cmluZ1wiJiYhZS5vcHRpb25zLmNvbnRlbnRBc0hUTUwpe3QudGV4dChlLkNvbnRlbnQpfWVsc2V7dC5lbXB0eSgpLmFwcGVuZChlLkNvbnRlbnQpfX0sX3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2NvbnRlbnRfc2V0KGUpO2lmKHQuQ29udGVudCE9PW51bGwpe2lmKHQuU3RhdHVzIT09XCJoaWRkZW5cIil7dC5fY29udGVudF9pbnNlcnQoKTt0LnJlcG9zaXRpb24oKTtpZih0Lm9wdGlvbnMudXBkYXRlQW5pbWF0aW9uKXtpZihsKCkpe3QuJHRvb2x0aXAuY3NzKHt3aWR0aDpcIlwiLFwiLXdlYmtpdC10cmFuc2l0aW9uXCI6XCJhbGwgXCIrdC5vcHRpb25zLnNwZWVkK1wibXMsIHdpZHRoIDBtcywgaGVpZ2h0IDBtcywgbGVmdCAwbXMsIHRvcCAwbXNcIixcIi1tb3otdHJhbnNpdGlvblwiOlwiYWxsIFwiK3Qub3B0aW9ucy5zcGVlZCtcIm1zLCB3aWR0aCAwbXMsIGhlaWdodCAwbXMsIGxlZnQgMG1zLCB0b3AgMG1zXCIsXCItby10cmFuc2l0aW9uXCI6XCJhbGwgXCIrdC5vcHRpb25zLnNwZWVkK1wibXMsIHdpZHRoIDBtcywgaGVpZ2h0IDBtcywgbGVmdCAwbXMsIHRvcCAwbXNcIixcIi1tcy10cmFuc2l0aW9uXCI6XCJhbGwgXCIrdC5vcHRpb25zLnNwZWVkK1wibXMsIHdpZHRoIDBtcywgaGVpZ2h0IDBtcywgbGVmdCAwbXMsIHRvcCAwbXNcIix0cmFuc2l0aW9uOlwiYWxsIFwiK3Qub3B0aW9ucy5zcGVlZCtcIm1zLCB3aWR0aCAwbXMsIGhlaWdodCAwbXMsIGxlZnQgMG1zLCB0b3AgMG1zXCJ9KS5hZGRDbGFzcyhcInRvb2x0aXBzdGVyLWNvbnRlbnQtY2hhbmdpbmdcIik7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKHQuU3RhdHVzIT1cImhpZGRlblwiKXt0LiR0b29sdGlwLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItY29udGVudC1jaGFuZ2luZ1wiKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYodC5TdGF0dXMhPT1cImhpZGRlblwiKXt0LiR0b29sdGlwLmNzcyh7XCItd2Via2l0LXRyYW5zaXRpb25cIjp0Lm9wdGlvbnMuc3BlZWQrXCJtc1wiLFwiLW1vei10cmFuc2l0aW9uXCI6dC5vcHRpb25zLnNwZWVkK1wibXNcIixcIi1vLXRyYW5zaXRpb25cIjp0Lm9wdGlvbnMuc3BlZWQrXCJtc1wiLFwiLW1zLXRyYW5zaXRpb25cIjp0Lm9wdGlvbnMuc3BlZWQrXCJtc1wiLHRyYW5zaXRpb246dC5vcHRpb25zLnNwZWVkK1wibXNcIn0pfX0sdC5vcHRpb25zLnNwZWVkKX19LHQub3B0aW9ucy5zcGVlZCl9ZWxzZXt0LiR0b29sdGlwLmZhZGVUbyh0Lm9wdGlvbnMuc3BlZWQsLjUsZnVuY3Rpb24oKXtpZih0LlN0YXR1cyE9XCJoaWRkZW5cIil7dC4kdG9vbHRpcC5mYWRlVG8odC5vcHRpb25zLnNwZWVkLDEpfX0pfX19fWVsc2V7dC5oaWRlKCl9fSxfcmVwb3NpdGlvbkluZm86ZnVuY3Rpb24oZSl7cmV0dXJue2RpbWVuc2lvbjp7aGVpZ2h0OmUub3V0ZXJIZWlnaHQoZmFsc2UpLHdpZHRoOmUub3V0ZXJXaWR0aChmYWxzZSl9LG9mZnNldDplLm9mZnNldCgpLHBvc2l0aW9uOntsZWZ0OnBhcnNlSW50KGUuY3NzKFwibGVmdFwiKSksdG9wOnBhcnNlSW50KGUuY3NzKFwidG9wXCIpKX19fSxoaWRlOmZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7aWYobilyLmNhbGxiYWNrcy5oaWRlLnB1c2gobik7ci5jYWxsYmFja3Muc2hvdz1bXTtjbGVhclRpbWVvdXQoci50aW1lclNob3cpO3IudGltZXJTaG93PW51bGw7Y2xlYXJUaW1lb3V0KHIudGltZXJIaWRlKTtyLnRpbWVySGlkZT1udWxsO3ZhciBpPWZ1bmN0aW9uKCl7ZS5lYWNoKHIuY2FsbGJhY2tzLmhpZGUsZnVuY3Rpb24oZSx0KXt0LmNhbGwoci4kZWwpfSk7ci5jYWxsYmFja3MuaGlkZT1bXX07aWYoci5TdGF0dXM9PVwic2hvd25cInx8ci5TdGF0dXM9PVwiYXBwZWFyaW5nXCIpe3IuU3RhdHVzPVwiZGlzYXBwZWFyaW5nXCI7dmFyIHM9ZnVuY3Rpb24oKXtyLlN0YXR1cz1cImhpZGRlblwiO2lmKHR5cGVvZiByLkNvbnRlbnQ9PVwib2JqZWN0XCImJnIuQ29udGVudCE9PW51bGwpe3IuQ29udGVudC5kZXRhY2goKX1yLiR0b29sdGlwLnJlbW92ZSgpO3IuJHRvb2x0aXA9bnVsbDtlKHQpLm9mZihcIi5cIityLm5hbWVzcGFjZSk7ZShcImJvZHlcIikub2ZmKFwiLlwiK3IubmFtZXNwYWNlKS5jc3MoXCJvdmVyZmxvdy14XCIsci5ib2R5T3ZlcmZsb3dYKTtlKFwiYm9keVwiKS5vZmYoXCIuXCIrci5uYW1lc3BhY2UpO3IuJGVsUHJveHkub2ZmKFwiLlwiK3IubmFtZXNwYWNlK1wiLWF1dG9DbG9zZVwiKTtyLm9wdGlvbnMuZnVuY3Rpb25BZnRlci5jYWxsKHIuJGVsLHIuJGVsKTtpKCl9O2lmKGwoKSl7ci4kdG9vbHRpcC5jbGVhclF1ZXVlKCkucmVtb3ZlQ2xhc3MoXCJ0b29sdGlwc3Rlci1cIityLm9wdGlvbnMuYW5pbWF0aW9uK1wiLXNob3dcIikuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci1keWluZ1wiKTtpZihyLm9wdGlvbnMuc3BlZWQ+MClyLiR0b29sdGlwLmRlbGF5KHIub3B0aW9ucy5zcGVlZCk7ci4kdG9vbHRpcC5xdWV1ZShzKX1lbHNle3IuJHRvb2x0aXAuc3RvcCgpLmZhZGVPdXQoci5vcHRpb25zLnNwZWVkLHMpfX1lbHNlIGlmKHIuU3RhdHVzPT1cImhpZGRlblwiKXtpKCl9cmV0dXJuIHJ9LHNob3c6ZnVuY3Rpb24oZSl7dGhpcy5fc2hvd05vdyhlKTtyZXR1cm4gdGhpc30sdXBkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnRlbnQoZSl9LGNvbnRlbnQ6ZnVuY3Rpb24oZSl7aWYodHlwZW9mIGU9PT1cInVuZGVmaW5lZFwiKXtyZXR1cm4gdGhpcy5Db250ZW50fWVsc2V7dGhpcy5fdXBkYXRlKGUpO3JldHVybiB0aGlzfX0scmVwb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBuPXRoaXM7aWYoZShcImJvZHlcIikuZmluZChuLiR0b29sdGlwKS5sZW5ndGghPT0wKXtuLiR0b29sdGlwLmNzcyhcIndpZHRoXCIsXCJcIik7bi5lbFByb3h5UG9zaXRpb249bi5fcmVwb3NpdGlvbkluZm8obi4kZWxQcm94eSk7dmFyIHI9bnVsbCxpPWUodCkud2lkdGgoKSxzPW4uZWxQcm94eVBvc2l0aW9uLG89bi4kdG9vbHRpcC5vdXRlcldpZHRoKGZhbHNlKSx1PW4uJHRvb2x0aXAuaW5uZXJXaWR0aCgpKzEsYT1uLiR0b29sdGlwLm91dGVySGVpZ2h0KGZhbHNlKTtpZihuLiRlbFByb3h5LmlzKFwiYXJlYVwiKSl7dmFyIGY9bi4kZWxQcm94eS5hdHRyKFwic2hhcGVcIiksbD1uLiRlbFByb3h5LnBhcmVudCgpLmF0dHIoXCJuYW1lXCIpLGM9ZSgnaW1nW3VzZW1hcD1cIiMnK2wrJ1wiXScpLGg9Yy5vZmZzZXQoKS5sZWZ0LHA9Yy5vZmZzZXQoKS50b3AsZD1uLiRlbFByb3h5LmF0dHIoXCJjb29yZHNcIikhPT11bmRlZmluZWQ/bi4kZWxQcm94eS5hdHRyKFwiY29vcmRzXCIpLnNwbGl0KFwiLFwiKTp1bmRlZmluZWQ7aWYoZj09XCJjaXJjbGVcIil7dmFyIHY9cGFyc2VJbnQoZFswXSksbT1wYXJzZUludChkWzFdKSxnPXBhcnNlSW50KGRbMl0pO3MuZGltZW5zaW9uLmhlaWdodD1nKjI7cy5kaW1lbnNpb24ud2lkdGg9ZyoyO3Mub2Zmc2V0LnRvcD1wK20tZztzLm9mZnNldC5sZWZ0PWgrdi1nfWVsc2UgaWYoZj09XCJyZWN0XCIpe3ZhciB2PXBhcnNlSW50KGRbMF0pLG09cGFyc2VJbnQoZFsxXSkseT1wYXJzZUludChkWzJdKSxiPXBhcnNlSW50KGRbM10pO3MuZGltZW5zaW9uLmhlaWdodD1iLW07cy5kaW1lbnNpb24ud2lkdGg9eS12O3Mub2Zmc2V0LnRvcD1wK207cy5vZmZzZXQubGVmdD1oK3Z9ZWxzZSBpZihmPT1cInBvbHlcIil7dmFyIHc9W10sRT1bXSxTPTAseD0wLFQ9MCxOPTAsQz1cImV2ZW5cIjtmb3IodmFyIGs9MDtrPGQubGVuZ3RoO2srKyl7dmFyIEw9cGFyc2VJbnQoZFtrXSk7aWYoQz09XCJldmVuXCIpe2lmKEw+VCl7VD1MO2lmKGs9PT0wKXtTPVR9fWlmKEw8Uyl7Uz1MfUM9XCJvZGRcIn1lbHNle2lmKEw+Til7Tj1MO2lmKGs9PTEpe3g9Tn19aWYoTDx4KXt4PUx9Qz1cImV2ZW5cIn19cy5kaW1lbnNpb24uaGVpZ2h0PU4teDtzLmRpbWVuc2lvbi53aWR0aD1ULVM7cy5vZmZzZXQudG9wPXAreDtzLm9mZnNldC5sZWZ0PWgrU31lbHNle3MuZGltZW5zaW9uLmhlaWdodD1jLm91dGVySGVpZ2h0KGZhbHNlKTtzLmRpbWVuc2lvbi53aWR0aD1jLm91dGVyV2lkdGgoZmFsc2UpO3Mub2Zmc2V0LnRvcD1wO3Mub2Zmc2V0LmxlZnQ9aH19dmFyIEE9MCxPPTAsTT0wLF89cGFyc2VJbnQobi5vcHRpb25zLm9mZnNldFkpLEQ9cGFyc2VJbnQobi5vcHRpb25zLm9mZnNldFgpLFA9bi5vcHRpb25zLnBvc2l0aW9uO2Z1bmN0aW9uIEgoKXt2YXIgbj1lKHQpLnNjcm9sbExlZnQoKTtpZihBLW48MCl7cj1BLW47QT1ufWlmKEErby1uPmkpe3I9QS0oaStuLW8pO0E9aStuLW99fWZ1bmN0aW9uIEIobixyKXtpZihzLm9mZnNldC50b3AtZSh0KS5zY3JvbGxUb3AoKS1hLV8tMTI8MCYmci5pbmRleE9mKFwidG9wXCIpPi0xKXtQPW59aWYocy5vZmZzZXQudG9wK3MuZGltZW5zaW9uLmhlaWdodCthKzEyK18+ZSh0KS5zY3JvbGxUb3AoKStlKHQpLmhlaWdodCgpJiZyLmluZGV4T2YoXCJib3R0b21cIik+LTEpe1A9bjtNPXMub2Zmc2V0LnRvcC1hLV8tMTJ9fWlmKFA9PVwidG9wXCIpe3ZhciBqPXMub2Zmc2V0LmxlZnQrby0ocy5vZmZzZXQubGVmdCtzLmRpbWVuc2lvbi53aWR0aCk7QT1zLm9mZnNldC5sZWZ0K0Qtai8yO009cy5vZmZzZXQudG9wLWEtXy0xMjtIKCk7QihcImJvdHRvbVwiLFwidG9wXCIpfWlmKFA9PVwidG9wLWxlZnRcIil7QT1zLm9mZnNldC5sZWZ0K0Q7TT1zLm9mZnNldC50b3AtYS1fLTEyO0goKTtCKFwiYm90dG9tLWxlZnRcIixcInRvcC1sZWZ0XCIpfWlmKFA9PVwidG9wLXJpZ2h0XCIpe0E9cy5vZmZzZXQubGVmdCtzLmRpbWVuc2lvbi53aWR0aCtELW87TT1zLm9mZnNldC50b3AtYS1fLTEyO0goKTtCKFwiYm90dG9tLXJpZ2h0XCIsXCJ0b3AtcmlnaHRcIil9aWYoUD09XCJib3R0b21cIil7dmFyIGo9cy5vZmZzZXQubGVmdCtvLShzLm9mZnNldC5sZWZ0K3MuZGltZW5zaW9uLndpZHRoKTtBPXMub2Zmc2V0LmxlZnQtai8yK0Q7TT1zLm9mZnNldC50b3Arcy5kaW1lbnNpb24uaGVpZ2h0K18rMTI7SCgpO0IoXCJ0b3BcIixcImJvdHRvbVwiKX1pZihQPT1cImJvdHRvbS1sZWZ0XCIpe0E9cy5vZmZzZXQubGVmdCtEO009cy5vZmZzZXQudG9wK3MuZGltZW5zaW9uLmhlaWdodCtfKzEyO0goKTtCKFwidG9wLWxlZnRcIixcImJvdHRvbS1sZWZ0XCIpfWlmKFA9PVwiYm90dG9tLXJpZ2h0XCIpe0E9cy5vZmZzZXQubGVmdCtzLmRpbWVuc2lvbi53aWR0aCtELW87TT1zLm9mZnNldC50b3Arcy5kaW1lbnNpb24uaGVpZ2h0K18rMTI7SCgpO0IoXCJ0b3AtcmlnaHRcIixcImJvdHRvbS1yaWdodFwiKX1pZihQPT1cImxlZnRcIil7QT1zLm9mZnNldC5sZWZ0LUQtby0xMjtPPXMub2Zmc2V0LmxlZnQrRCtzLmRpbWVuc2lvbi53aWR0aCsxMjt2YXIgRj1zLm9mZnNldC50b3ArYS0ocy5vZmZzZXQudG9wK3MuZGltZW5zaW9uLmhlaWdodCk7TT1zLm9mZnNldC50b3AtRi8yLV87aWYoQTwwJiZPK28+aSl7dmFyIEk9cGFyc2VGbG9hdChuLiR0b29sdGlwLmNzcyhcImJvcmRlci13aWR0aFwiKSkqMixxPW8rQS1JO24uJHRvb2x0aXAuY3NzKFwid2lkdGhcIixxK1wicHhcIik7YT1uLiR0b29sdGlwLm91dGVySGVpZ2h0KGZhbHNlKTtBPXMub2Zmc2V0LmxlZnQtRC1xLTEyLUk7Rj1zLm9mZnNldC50b3ArYS0ocy5vZmZzZXQudG9wK3MuZGltZW5zaW9uLmhlaWdodCk7TT1zLm9mZnNldC50b3AtRi8yLV99ZWxzZSBpZihBPDApe0E9cy5vZmZzZXQubGVmdCtEK3MuZGltZW5zaW9uLndpZHRoKzEyO3I9XCJsZWZ0XCJ9fWlmKFA9PVwicmlnaHRcIil7QT1zLm9mZnNldC5sZWZ0K0Qrcy5kaW1lbnNpb24ud2lkdGgrMTI7Tz1zLm9mZnNldC5sZWZ0LUQtby0xMjt2YXIgRj1zLm9mZnNldC50b3ArYS0ocy5vZmZzZXQudG9wK3MuZGltZW5zaW9uLmhlaWdodCk7TT1zLm9mZnNldC50b3AtRi8yLV87aWYoQStvPmkmJk88MCl7dmFyIEk9cGFyc2VGbG9hdChuLiR0b29sdGlwLmNzcyhcImJvcmRlci13aWR0aFwiKSkqMixxPWktQS1JO24uJHRvb2x0aXAuY3NzKFwid2lkdGhcIixxK1wicHhcIik7YT1uLiR0b29sdGlwLm91dGVySGVpZ2h0KGZhbHNlKTtGPXMub2Zmc2V0LnRvcCthLShzLm9mZnNldC50b3Arcy5kaW1lbnNpb24uaGVpZ2h0KTtNPXMub2Zmc2V0LnRvcC1GLzItX31lbHNlIGlmKEErbz5pKXtBPXMub2Zmc2V0LmxlZnQtRC1vLTEyO3I9XCJyaWdodFwifX1pZihuLm9wdGlvbnMuYXJyb3cpe3ZhciBSPVwidG9vbHRpcHN0ZXItYXJyb3ctXCIrUDtpZihuLm9wdGlvbnMuYXJyb3dDb2xvci5sZW5ndGg8MSl7dmFyIFU9bi4kdG9vbHRpcC5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpfWVsc2V7dmFyIFU9bi5vcHRpb25zLmFycm93Q29sb3J9aWYoIXIpe3I9XCJcIn1lbHNlIGlmKHI9PVwibGVmdFwiKXtSPVwidG9vbHRpcHN0ZXItYXJyb3ctcmlnaHRcIjtyPVwiXCJ9ZWxzZSBpZihyPT1cInJpZ2h0XCIpe1I9XCJ0b29sdGlwc3Rlci1hcnJvdy1sZWZ0XCI7cj1cIlwifWVsc2V7cj1cImxlZnQ6XCIrTWF0aC5yb3VuZChyKStcInB4O1wifWlmKFA9PVwidG9wXCJ8fFA9PVwidG9wLWxlZnRcInx8UD09XCJ0b3AtcmlnaHRcIil7dmFyIHo9cGFyc2VGbG9hdChuLiR0b29sdGlwLmNzcyhcImJvcmRlci1ib3R0b20td2lkdGhcIikpLFc9bi4kdG9vbHRpcC5jc3MoXCJib3JkZXItYm90dG9tLWNvbG9yXCIpfWVsc2UgaWYoUD09XCJib3R0b21cInx8UD09XCJib3R0b20tbGVmdFwifHxQPT1cImJvdHRvbS1yaWdodFwiKXt2YXIgej1wYXJzZUZsb2F0KG4uJHRvb2x0aXAuY3NzKFwiYm9yZGVyLXRvcC13aWR0aFwiKSksVz1uLiR0b29sdGlwLmNzcyhcImJvcmRlci10b3AtY29sb3JcIil9ZWxzZSBpZihQPT1cImxlZnRcIil7dmFyIHo9cGFyc2VGbG9hdChuLiR0b29sdGlwLmNzcyhcImJvcmRlci1yaWdodC13aWR0aFwiKSksVz1uLiR0b29sdGlwLmNzcyhcImJvcmRlci1yaWdodC1jb2xvclwiKX1lbHNlIGlmKFA9PVwicmlnaHRcIil7dmFyIHo9cGFyc2VGbG9hdChuLiR0b29sdGlwLmNzcyhcImJvcmRlci1sZWZ0LXdpZHRoXCIpKSxXPW4uJHRvb2x0aXAuY3NzKFwiYm9yZGVyLWxlZnQtY29sb3JcIil9ZWxzZXt2YXIgej1wYXJzZUZsb2F0KG4uJHRvb2x0aXAuY3NzKFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiKSksVz1uLiR0b29sdGlwLmNzcyhcImJvcmRlci1ib3R0b20tY29sb3JcIil9aWYoej4xKXt6Kyt9dmFyIFg9XCJcIjtpZih6IT09MCl7dmFyIFY9XCJcIixKPVwiYm9yZGVyLWNvbG9yOiBcIitXK1wiO1wiO2lmKFIuaW5kZXhPZihcImJvdHRvbVwiKSE9PS0xKXtWPVwibWFyZ2luLXRvcDogLVwiK01hdGgucm91bmQoeikrXCJweDtcIn1lbHNlIGlmKFIuaW5kZXhPZihcInRvcFwiKSE9PS0xKXtWPVwibWFyZ2luLWJvdHRvbTogLVwiK01hdGgucm91bmQoeikrXCJweDtcIn1lbHNlIGlmKFIuaW5kZXhPZihcImxlZnRcIikhPT0tMSl7Vj1cIm1hcmdpbi1yaWdodDogLVwiK01hdGgucm91bmQoeikrXCJweDtcIn1lbHNlIGlmKFIuaW5kZXhPZihcInJpZ2h0XCIpIT09LTEpe1Y9XCJtYXJnaW4tbGVmdDogLVwiK01hdGgucm91bmQoeikrXCJweDtcIn1YPSc8c3BhbiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93LWJvcmRlclwiIHN0eWxlPVwiJytWK1wiIFwiK0orJztcIj48L3NwYW4+J31uLiR0b29sdGlwLmZpbmQoXCIudG9vbHRpcHN0ZXItYXJyb3dcIikucmVtb3ZlKCk7dmFyIEs9JzxkaXYgY2xhc3M9XCInK1IrJyB0b29sdGlwc3Rlci1hcnJvd1wiIHN0eWxlPVwiJytyKydcIj4nK1grJzxzcGFuIHN0eWxlPVwiYm9yZGVyLWNvbG9yOicrVSsnO1wiPjwvc3Bhbj48L2Rpdj4nO24uJHRvb2x0aXAuYXBwZW5kKEspfW4uJHRvb2x0aXAuY3NzKHt0b3A6TWF0aC5yb3VuZChNKStcInB4XCIsbGVmdDpNYXRoLnJvdW5kKEEpK1wicHhcIn0pfXJldHVybiBufSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9dHJ1ZTtyZXR1cm4gdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuaGlkZSgpO3RoaXMuZW5hYmxlZD1mYWxzZTtyZXR1cm4gdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dC5oaWRlKCk7aWYodC4kZWxbMF0hPT10LiRlbFByb3h5WzBdKXt0LiRlbFByb3h5LnJlbW92ZSgpfXQuJGVsLnJlbW92ZURhdGEodC5uYW1lc3BhY2UpLm9mZihcIi5cIit0Lm5hbWVzcGFjZSk7dmFyIG49dC4kZWwuZGF0YShcInRvb2x0aXBzdGVyLW5zXCIpO2lmKG4ubGVuZ3RoPT09MSl7dmFyIHI9bnVsbDtpZih0Lm9wdGlvbnMucmVzdG9yYXRpb249PT1cInByZXZpb3VzXCIpe3I9dC4kZWwuZGF0YShcInRvb2x0aXBzdGVyLWluaXRpYWxUaXRsZVwiKX1lbHNlIGlmKHQub3B0aW9ucy5yZXN0b3JhdGlvbj09PVwiY3VycmVudFwiKXtyPXR5cGVvZiB0LkNvbnRlbnQ9PT1cInN0cmluZ1wiP3QuQ29udGVudDplKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKHQuQ29udGVudCkuaHRtbCgpfWlmKHIpe3QuJGVsLmF0dHIoXCJ0aXRsZVwiLHIpfXQuJGVsLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXJlZFwiKS5yZW1vdmVEYXRhKFwidG9vbHRpcHN0ZXItbnNcIikucmVtb3ZlRGF0YShcInRvb2x0aXBzdGVyLWluaXRpYWxUaXRsZVwiKX1lbHNle249ZS5ncmVwKG4sZnVuY3Rpb24oZSxuKXtyZXR1cm4gZSE9PXQubmFtZXNwYWNlfSk7dC4kZWwuZGF0YShcInRvb2x0aXBzdGVyLW5zXCIsbil9cmV0dXJuIHR9LGVsZW1lbnRJY29uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGVsWzBdIT09dGhpcy4kZWxQcm94eVswXT90aGlzLiRlbFByb3h5WzBdOnVuZGVmaW5lZH0sZWxlbWVudFRvb2x0aXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG9vbHRpcD90aGlzLiR0b29sdGlwWzBdOnVuZGVmaW5lZH0sb3B0aW9uOmZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQ9PVwidW5kZWZpbmVkXCIpcmV0dXJuIHRoaXMub3B0aW9uc1tlXTtlbHNle3RoaXMub3B0aW9uc1tlXT10O3JldHVybiB0aGlzfX0sc3RhdHVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuU3RhdHVzfX07ZS5mbltyXT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cztpZih0aGlzLmxlbmd0aD09PTApe2lmKHR5cGVvZiB0WzBdPT09XCJzdHJpbmdcIil7dmFyIG49dHJ1ZTtzd2l0Y2godFswXSl7Y2FzZVwic2V0RGVmYXVsdHNcIjplLmV4dGVuZChpLHRbMV0pO2JyZWFrO2RlZmF1bHQ6bj1mYWxzZTticmVha31pZihuKXJldHVybiB0cnVlO2Vsc2UgcmV0dXJuIHRoaXN9ZWxzZXtyZXR1cm4gdGhpc319ZWxzZXtpZih0eXBlb2YgdFswXT09PVwic3RyaW5nXCIpe3ZhciByPVwiIyokfiZcIjt0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLmRhdGEoXCJ0b29sdGlwc3Rlci1uc1wiKSxpPW4/ZSh0aGlzKS5kYXRhKG5bMF0pOm51bGw7aWYoaSl7aWYodHlwZW9mIGlbdFswXV09PT1cImZ1bmN0aW9uXCIpe3ZhciBzPWlbdFswXV0odFsxXSx0WzJdKX1lbHNle3Rocm93IG5ldyBFcnJvcignVW5rbm93biBtZXRob2QgLnRvb2x0aXBzdGVyKFwiJyt0WzBdKydcIiknKX1pZihzIT09aSl7cj1zO3JldHVybiBmYWxzZX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgY2FsbGVkIFRvb2x0aXBzdGVyJ3MgXFxcIlwiK3RbMF0rJ1wiIG1ldGhvZCBvbiBhbiB1bmluaXRpYWxpemVkIGVsZW1lbnQnKX19KTtyZXR1cm4gciE9PVwiIyokfiZcIj9yOnRoaXN9ZWxzZXt2YXIgbz1bXSx1PXRbMF0mJnR5cGVvZiB0WzBdLm11bHRpcGxlIT09XCJ1bmRlZmluZWRcIixhPXUmJnRbMF0ubXVsdGlwbGV8fCF1JiZpLm11bHRpcGxlLGY9dFswXSYmdHlwZW9mIHRbMF0uZGVidWchPT1cInVuZGVmaW5lZFwiLGw9ZiYmdFswXS5kZWJ1Z3x8IWYmJmkuZGVidWc7dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49ZmFsc2Uscj1lKHRoaXMpLmRhdGEoXCJ0b29sdGlwc3Rlci1uc1wiKSxpPW51bGw7aWYoIXIpe249dHJ1ZX1lbHNlIGlmKGEpe249dHJ1ZX1lbHNlIGlmKGwpe2NvbnNvbGUubG9nKCdUb29sdGlwc3Rlcjogb25lIG9yIG1vcmUgdG9vbHRpcHMgYXJlIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhpcyBlbGVtZW50OiBpZ25vcmluZy4gVXNlIHRoZSBcIm11bHRpcGxlXCIgb3B0aW9uIHRvIGF0dGFjaCBtb3JlIHRvb2x0aXBzLicpfWlmKG4pe2k9bmV3IHModGhpcyx0WzBdKTtpZighcilyPVtdO3IucHVzaChpLm5hbWVzcGFjZSk7ZSh0aGlzKS5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIixyKTtlKHRoaXMpLmRhdGEoaS5uYW1lc3BhY2UsaSl9by5wdXNoKGkpfSk7aWYoYSlyZXR1cm4gbztlbHNlIHJldHVybiB0aGlzfX19O3ZhciB1PSEhKFwib250b3VjaHN0YXJ0XCJpbiB0KTt2YXIgYT1mYWxzZTtlKFwiYm9keVwiKS5vbmUoXCJtb3VzZW1vdmVcIixmdW5jdGlvbigpe2E9dHJ1ZX0pfSkoalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./web/assets/tooltipster/js/jquery.tooltipster.min.js\n')},0:
/*!*****************************************************!*\
  !*** multi whatwg-fetch ./web/app/builder/build.js ***!
  \*****************************************************/
/*! no static exports found */function(I,g,C){C(/*! whatwg-fetch */"./node_modules/whatwg-fetch/fetch.js"),I.exports=C(/*! /home/serkoz/Bitbucket/desktop/mbr-online/web/app/builder/build.js */"./web/app/builder/build.js")},CodeMirror:
/*!*****************************!*\
  !*** external "CodeMirror" ***!
  \*****************************/
/*! no static exports found */function(module,exports){eval("module.exports = CodeMirror;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJDb2RlTWlycm9yXCI/MTc4MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiJDb2RlTWlycm9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBDb2RlTWlycm9yOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///CodeMirror\n")},jquery:
/*!********************************!*\
  !*** external "window.jQuery" ***!
  \********************************/
/*! no static exports found */function(module,exports){eval("module.exports = window.jQuery;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ3aW5kb3cualF1ZXJ5XCI/ZjEzYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSIsImZpbGUiOiJqcXVlcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5qUXVlcnk7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///jquery\n")}});